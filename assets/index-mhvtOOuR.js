(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var k1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sm={exports:{}},qd={};var p5;function Q_(){if(p5)return qd;p5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:o}}return qd.Fragment=e,qd.jsx=t,qd.jsxs=t,qd}var m5;function J_(){return m5||(m5=1,Sm.exports=Q_()),Sm.exports}var g=J_(),Nm={exports:{}},bn={};var g5;function eS(){if(g5)return bn;g5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function b(z){return z===null||typeof z!="object"?null:(z=_&&z[_]||z["@@iterator"],typeof z=="function"?z:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,k={};function T(z,M,$){this.props=z,this.context=M,this.refs=k,this.updater=$||A}T.prototype.isReactComponent={},T.prototype.setState=function(z,M){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,M,"setState")},T.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function R(){}R.prototype=T.prototype;function D(z,M,$){this.props=z,this.context=M,this.refs=k,this.updater=$||A}var V=D.prototype=new R;V.constructor=D,N(V,T.prototype),V.isPureReactComponent=!0;var F=Array.isArray;function W(){}var H={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function B(z,M,$){var G=$.ref;return{$$typeof:n,type:z,key:M,ref:G!==void 0?G:null,props:$}}function te(z,M){return B(z.type,M,z.props)}function j(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function I(z){var M={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function($){return M[$]})}var K=/\/+/g;function P(z,M){return typeof z=="object"&&z!==null&&z.key!=null?I(""+z.key):M.toString(36)}function ie(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(W,W):(z.status="pending",z.then(function(M){z.status==="pending"&&(z.status="fulfilled",z.value=M)},function(M){z.status==="pending"&&(z.status="rejected",z.reason=M)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function X(z,M,$,G,J){var ae=typeof z;(ae==="undefined"||ae==="boolean")&&(z=null);var pe=!1;if(z===null)pe=!0;else switch(ae){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(z.$$typeof){case n:case e:pe=!0;break;case p:return pe=z._init,X(pe(z._payload),M,$,G,J)}}if(pe)return J=J(z),pe=G===""?"."+P(z,0):G,F(J)?($="",pe!=null&&($=pe.replace(K,"$&/")+"/"),X(J,M,$,"",function(Ne){return Ne})):J!=null&&(j(J)&&(J=te(J,$+(J.key==null||z&&z.key===J.key?"":(""+J.key).replace(K,"$&/")+"/")+pe)),M.push(J)),1;pe=0;var de=G===""?".":G+":";if(F(z))for(var xe=0;xe<z.length;xe++)G=z[xe],ae=de+P(G,xe),pe+=X(G,M,$,ae,J);else if(xe=b(z),typeof xe=="function")for(z=xe.call(z),xe=0;!(G=z.next()).done;)G=G.value,ae=de+P(G,xe++),pe+=X(G,M,$,ae,J);else if(ae==="object"){if(typeof z.then=="function")return X(ie(z),M,$,G,J);throw M=String(z),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return pe}function re(z,M,$){if(z==null)return z;var G=[],J=0;return X(z,G,"","",function(ae){return M.call($,ae,J++)}),G}function le(z){if(z._status===-1){var M=z._result;M=M(),M.then(function($){(z._status===0||z._status===-1)&&(z._status=1,z._result=$)},function($){(z._status===0||z._status===-1)&&(z._status=2,z._result=$)}),z._status===-1&&(z._status=0,z._result=M)}if(z._status===1)return z._result.default;throw z._result}var fe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Se={map:re,forEach:function(z,M,$){re(z,function(){M.apply(this,arguments)},$)},count:function(z){var M=0;return re(z,function(){M++}),M},toArray:function(z){return re(z,function(M){return M})||[]},only:function(z){if(!j(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return bn.Activity=y,bn.Children=Se,bn.Component=T,bn.Fragment=t,bn.Profiler=a,bn.PureComponent=D,bn.StrictMode=s,bn.Suspense=h,bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,bn.__COMPILER_RUNTIME={__proto__:null,c:function(z){return H.H.useMemoCache(z)}},bn.cache=function(z){return function(){return z.apply(null,arguments)}},bn.cacheSignal=function(){return null},bn.cloneElement=function(z,M,$){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var G=N({},z.props),J=z.key;if(M!=null)for(ae in M.key!==void 0&&(J=""+M.key),M)!L.call(M,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&M.ref===void 0||(G[ae]=M[ae]);var ae=arguments.length-2;if(ae===1)G.children=$;else if(1<ae){for(var pe=Array(ae),de=0;de<ae;de++)pe[de]=arguments[de+2];G.children=pe}return B(z.type,J,G)},bn.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},bn.createElement=function(z,M,$){var G,J={},ae=null;if(M!=null)for(G in M.key!==void 0&&(ae=""+M.key),M)L.call(M,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(J[G]=M[G]);var pe=arguments.length-2;if(pe===1)J.children=$;else if(1<pe){for(var de=Array(pe),xe=0;xe<pe;xe++)de[xe]=arguments[xe+2];J.children=de}if(z&&z.defaultProps)for(G in pe=z.defaultProps,pe)J[G]===void 0&&(J[G]=pe[G]);return B(z,ae,J)},bn.createRef=function(){return{current:null}},bn.forwardRef=function(z){return{$$typeof:c,render:z}},bn.isValidElement=j,bn.lazy=function(z){return{$$typeof:p,_payload:{_status:-1,_result:z},_init:le}},bn.memo=function(z,M){return{$$typeof:f,type:z,compare:M===void 0?null:M}},bn.startTransition=function(z){var M=H.T,$={};H.T=$;try{var G=z(),J=H.S;J!==null&&J($,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(W,fe)}catch(ae){fe(ae)}finally{M!==null&&$.types!==null&&(M.types=$.types),H.T=M}},bn.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},bn.use=function(z){return H.H.use(z)},bn.useActionState=function(z,M,$){return H.H.useActionState(z,M,$)},bn.useCallback=function(z,M){return H.H.useCallback(z,M)},bn.useContext=function(z){return H.H.useContext(z)},bn.useDebugValue=function(){},bn.useDeferredValue=function(z,M){return H.H.useDeferredValue(z,M)},bn.useEffect=function(z,M){return H.H.useEffect(z,M)},bn.useEffectEvent=function(z){return H.H.useEffectEvent(z)},bn.useId=function(){return H.H.useId()},bn.useImperativeHandle=function(z,M,$){return H.H.useImperativeHandle(z,M,$)},bn.useInsertionEffect=function(z,M){return H.H.useInsertionEffect(z,M)},bn.useLayoutEffect=function(z,M){return H.H.useLayoutEffect(z,M)},bn.useMemo=function(z,M){return H.H.useMemo(z,M)},bn.useOptimistic=function(z,M){return H.H.useOptimistic(z,M)},bn.useReducer=function(z,M,$){return H.H.useReducer(z,M,$)},bn.useRef=function(z){return H.H.useRef(z)},bn.useState=function(z){return H.H.useState(z)},bn.useSyncExternalStore=function(z,M,$){return H.H.useSyncExternalStore(z,M,$)},bn.useTransition=function(){return H.H.useTransition()},bn.version="19.2.0",bn}var b5;function zg(){return b5||(b5=1,Nm.exports=eS()),Nm.exports}var ee=zg();const Cn=K_(ee);var Am={exports:{}},Ud={},Cm={exports:{}},Tm={};var v5;function tS(){return v5||(v5=1,(function(n){function e(X,re){var le=X.length;X.push(re);e:for(;0<le;){var fe=le-1>>>1,Se=X[fe];if(0<a(Se,re))X[fe]=re,X[le]=Se,le=fe;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var re=X[0],le=X.pop();if(le!==re){X[0]=le;e:for(var fe=0,Se=X.length,z=Se>>>1;fe<z;){var M=2*(fe+1)-1,$=X[M],G=M+1,J=X[G];if(0>a($,le))G<Se&&0>a(J,$)?(X[fe]=J,X[G]=le,fe=G):(X[fe]=$,X[M]=le,fe=M);else if(G<Se&&0>a(J,le))X[fe]=J,X[G]=le,fe=G;else break e}}return re}function a(X,re){var le=X.sortIndex-re.sortIndex;return le!==0?le:X.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();n.unstable_now=function(){return u.now()-c}}var h=[],f=[],p=1,y=null,_=3,b=!1,A=!1,N=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function V(X){for(var re=t(f);re!==null;){if(re.callback===null)s(f);else if(re.startTime<=X)s(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(f)}}function F(X){if(N=!1,V(X),!A)if(t(h)!==null)A=!0,W||(W=!0,I());else{var re=t(f);re!==null&&ie(F,re.startTime-X)}}var W=!1,H=-1,L=5,B=-1;function te(){return k?!0:!(n.unstable_now()-B<L)}function j(){if(k=!1,W){var X=n.unstable_now();B=X;var re=!0;try{e:{A=!1,N&&(N=!1,R(H),H=-1),b=!0;var le=_;try{t:{for(V(X),y=t(h);y!==null&&!(y.expirationTime>X&&te());){var fe=y.callback;if(typeof fe=="function"){y.callback=null,_=y.priorityLevel;var Se=fe(y.expirationTime<=X);if(X=n.unstable_now(),typeof Se=="function"){y.callback=Se,V(X),re=!0;break t}y===t(h)&&s(h),V(X)}else s(h);y=t(h)}if(y!==null)re=!0;else{var z=t(f);z!==null&&ie(F,z.startTime-X),re=!1}}break e}finally{y=null,_=le,b=!1}re=void 0}}finally{re?I():W=!1}}}var I;if(typeof D=="function")I=function(){D(j)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,P=K.port2;K.port1.onmessage=j,I=function(){P.postMessage(null)}}else I=function(){T(j,0)};function ie(X,re){H=T(function(){X(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(X){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var le=_;_=re;try{return X()}finally{_=le}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var le=_;_=X;try{return re()}finally{_=le}},n.unstable_scheduleCallback=function(X,re,le){var fe=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?fe+le:fe):le=fe,X){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=le+Se,X={id:p++,callback:re,priorityLevel:X,startTime:le,expirationTime:Se,sortIndex:-1},le>fe?(X.sortIndex=le,e(f,X),t(h)===null&&X===t(f)&&(N?(R(H),H=-1):N=!0,ie(F,le-fe))):(X.sortIndex=Se,e(h,X),A||b||(A=!0,W||(W=!0,I()))),X},n.unstable_shouldYield=te,n.unstable_wrapCallback=function(X){var re=_;return function(){var le=_;_=re;try{return X.apply(this,arguments)}finally{_=le}}}})(Tm)),Tm}var y5;function nS(){return y5||(y5=1,Cm.exports=tS()),Cm.exports}var km={exports:{}},ai={};var x5;function rS(){if(x5)return ai;x5=1;var n=zg();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ai.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ai.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,p)},ai.flushSync=function(h){var f=u.T,p=s.p;try{if(u.T=null,s.p=2,h)return h()}finally{u.T=f,s.p=p,s.d.f()}},ai.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},ai.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},ai.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin),_=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):p==="script"&&s.d.X(h,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ai.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},ai.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=c(p,f.crossOrigin);s.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ai.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=c(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},ai.requestFormReset=function(h){s.d.r(h)},ai.unstable_batchedUpdates=function(h,f){return h(f)},ai.useFormState=function(h,f,p){return u.H.useFormState(h,f,p)},ai.useFormStatus=function(){return u.H.useHostTransitionStatus()},ai.version="19.2.0",ai}var w5;function Px(){if(w5)return km.exports;w5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),km.exports=rS(),km.exports}var _5;function sS(){if(_5)return Ud;_5=1;var n=nS(),e=zg(),t=Px();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function c(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function h(r){if(o(r)!==r)throw Error(s(188))}function f(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(s(188));return i!==r?null:r}for(var l=r,d=i;;){var v=l.return;if(v===null)break;var w=v.alternate;if(w===null){if(d=v.return,d!==null){l=d;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===l)return h(v),r;if(w===d)return h(v),i;w=w.sibling}throw Error(s(188))}if(l.return!==d.return)l=v,d=w;else{for(var O=!1,ne=v.child;ne;){if(ne===l){O=!0,l=v,d=w;break}if(ne===d){O=!0,d=v,l=w;break}ne=ne.sibling}if(!O){for(ne=w.child;ne;){if(ne===l){O=!0,l=w,d=v;break}if(ne===d){O=!0,d=w,l=v;break}ne=ne.sibling}if(!O)throw Error(s(189))}}if(l.alternate!==d)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function I(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var K=Symbol.for("react.client.reference");function P(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===K?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case T:return"Profiler";case k:return"StrictMode";case F:return"Suspense";case W:return"SuspenseList";case B:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case D:return r.displayName||"Context";case R:return(r._context.displayName||"Context")+".Consumer";case V:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case H:return i=r.displayName||null,i!==null?i:P(r.type)||"Memo";case L:i=r._payload,r=r._init;try{return P(r(i))}catch{}}return null}var ie=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},fe=[],Se=-1;function z(r){return{current:r}}function M(r){0>Se||(r.current=fe[Se],fe[Se]=null,Se--)}function $(r,i){Se++,fe[Se]=r.current,r.current=i}var G=z(null),J=z(null),ae=z(null),pe=z(null);function de(r,i){switch($(ae,i),$(J,r),$(G,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?Fv(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=Fv(i),r=Vv(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}M(G),$(G,r)}function xe(){M(G),M(J),M(ae)}function Ne(r){r.memoizedState!==null&&$(pe,r);var i=G.current,l=Vv(i,r.type);i!==l&&($(J,r),$(G,l))}function Be(r){J.current===r&&(M(G),M(J)),pe.current===r&&(M(pe),Vd._currentValue=le)}var Qe,Xe;function st(r){if(Qe===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Qe=i&&i[1]||"",Xe=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+r+Xe}var Y=!1;function Ie(r,i){if(!r||Y)return"";Y=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(ze){var Ve=ze}Reflect.construct(r,[],Je)}else{try{Je.call()}catch(ze){Ve=ze}r.call(Je.prototype)}}else{try{throw Error()}catch(ze){Ve=ze}(Je=r())&&typeof Je.catch=="function"&&Je.catch(function(){})}}catch(ze){if(ze&&Ve&&typeof ze.stack=="string")return[ze.stack,Ve.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),O=w[0],ne=w[1];if(O&&ne){var me=O.split(`
`),De=ne.split(`
`);for(v=d=0;d<me.length&&!me[d].includes("DetermineComponentFrameRoot");)d++;for(;v<De.length&&!De[v].includes("DetermineComponentFrameRoot");)v++;if(d===me.length||v===De.length)for(d=me.length-1,v=De.length-1;1<=d&&0<=v&&me[d]!==De[v];)v--;for(;1<=d&&0<=v;d--,v--)if(me[d]!==De[v]){if(d!==1||v!==1)do if(d--,v--,0>v||me[d]!==De[v]){var Ge=`
`+me[d].replace(" at new "," at ");return r.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",r.displayName)),Ge}while(1<=d&&0<=v);break}}}finally{Y=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?st(l):""}function dt(r,i){switch(r.tag){case 26:case 27:case 5:return st(r.type);case 16:return st("Lazy");case 13:return r.child!==i&&i!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return Ie(r.type,!1);case 11:return Ie(r.type.render,!1);case 1:return Ie(r.type,!0);case 31:return st("Activity");default:return""}}function et(r){try{var i="",l=null;do i+=dt(r,l),l=r,r=r.return;while(r);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var ge=Object.prototype.hasOwnProperty,qe=n.unstable_scheduleCallback,Re=n.unstable_cancelCallback,nt=n.unstable_shouldYield,ct=n.unstable_requestPaint,vt=n.unstable_now,It=n.unstable_getCurrentPriorityLevel,St=n.unstable_ImmediatePriority,Ft=n.unstable_UserBlockingPriority,jt=n.unstable_NormalPriority,yt=n.unstable_LowPriority,xt=n.unstable_IdlePriority,Me=n.log,ut=n.unstable_setDisableYieldValue,ot=null,We=null;function at(r){if(typeof Me=="function"&&ut(r),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(ot,r)}catch{}}var bt=Math.clz32?Math.clz32:Ct,lt=Math.log,tn=Math.LN2;function Ct(r){return r>>>=0,r===0?32:31-(lt(r)/tn|0)|0}var Vt=256,Jt=262144,wt=4194304;function pt(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function qt(r,i,l){var d=r.pendingLanes;if(d===0)return 0;var v=0,w=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var ne=d&134217727;return ne!==0?(d=ne&~w,d!==0?v=pt(d):(O&=ne,O!==0?v=pt(O):l||(l=ne&~r,l!==0&&(v=pt(l))))):(ne=d&~w,ne!==0?v=pt(ne):O!==0?v=pt(O):l||(l=d&~r,l!==0&&(v=pt(l)))),v===0?0:i!==0&&i!==v&&(i&w)===0&&(w=v&-v,l=i&-i,w>=l||w===32&&(l&4194048)!==0)?i:v}function wn(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function Ee(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ft(){var r=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),r}function _e(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Fe(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ht(r,i,l,d,v,w){var O=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var ne=r.entanglements,me=r.expirationTimes,De=r.hiddenUpdates;for(l=O&~l;0<l;){var Ge=31-bt(l),Je=1<<Ge;ne[Ge]=0,me[Ge]=-1;var Ve=De[Ge];if(Ve!==null)for(De[Ge]=null,Ge=0;Ge<Ve.length;Ge++){var ze=Ve[Ge];ze!==null&&(ze.lane&=-536870913)}l&=~Je}d!==0&&Tt(r,d,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(O&~i))}function Tt(r,i,l){r.pendingLanes|=i,r.suspendedLanes&=~i;var d=31-bt(i);r.entangledLanes|=i,r.entanglements[d]=r.entanglements[d]|1073741824|l&261930}function Bt(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var d=31-bt(l),v=1<<d;v&i|r[d]&i&&(r[d]|=i),l&=~v}}function nn(r,i){var l=i&-i;return l=(l&42)!==0?1:$t(l),(l&(r.suspendedLanes|i))!==0?0:l}function $t(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function dn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function fn(){var r=re.p;return r!==0?r:(r=window.event,r===void 0?32:o5(r.type))}function Jn(r,i){var l=re.p;try{return re.p=r,i()}finally{re.p=l}}var Gn=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Gn,rn="__reactProps$"+Gn,$n="__reactContainer$"+Gn,Er="__reactEvents$"+Gn,us="__reactListeners$"+Gn,je="__reactHandles$"+Gn,Pe="__reactResources$"+Gn,Ze="__reactMarker$"+Gn;function _t(r){delete r[Sn],delete r[rn],delete r[Er],delete r[us],delete r[je]}function gt(r){var i=r[Sn];if(i)return i;for(var l=r.parentNode;l;){if(i=l[$n]||l[Sn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=Wv(r);r!==null;){if(l=r[Sn])return l;r=Wv(r)}return i}r=l,l=r.parentNode}return null}function kt(r){if(r=r[Sn]||r[$n]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function pn(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function un(r){var i=r[Pe];return i||(i=r[Pe]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function sn(r){r[Ze]=!0}var xn=new Set,Pn={};function Tn(r,i){sr(r,i),sr(r+"Capture",i)}function sr(r,i){for(Pn[r]=i,r=0;r<i.length;r++)xn.add(i[r])}var $r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mr={},_s={};function Yi(r){return ge.call(_s,r)?!0:ge.call(Mr,r)?!1:$r.test(r)?_s[r]=!0:(Mr[r]=!0,!1)}function Pr(r,i,l){if(Yi(i))if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+l)}}function ni(r,i,l){if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+l)}}function Gs(r,i,l,d){if(d===null)r.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(i,l,""+d)}}function Nn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Xi(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ds(r,i,l){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,w=d.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return v.call(this)},set:function(O){l=""+O,w.call(this,O)}}),Object.defineProperty(r,i,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(O){l=""+O},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Si(r){if(!r._valueTracker){var i=Xi(r)?"checked":"value";r._valueTracker=Ds(r,i,""+r[i])}}function _o(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return r&&(d=Xi(r)?r.checked?"true":"false":r.value),r=d,r!==l?(i.setValue(r),!0):!1}function hs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var zr=/[\n"\\]/g;function Lr(r){return r.replace(zr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function So(r,i,l,d,v,w,O,ne){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),i!=null?O==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Nn(i)):r.value!==""+Nn(i)&&(r.value=""+Nn(i)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),i!=null?Qo(r,O,Nn(i)):l!=null?Qo(r,O,Nn(l)):d!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?r.name=""+Nn(ne):r.removeAttribute("name")}function Bl(r,i,l,d,v,w,O,ne){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),i!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){Si(r);return}l=l!=null?""+Nn(l):"",i=i!=null?""+Nn(i):l,ne||i===r.value||(r.value=i),r.defaultValue=i}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=ne?r.checked:!!d,r.defaultChecked=!!d,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),Si(r)}function Qo(r,i,l){i==="number"&&hs(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function $s(r,i,l,d){if(r=r.options,i){i={};for(var v=0;v<l.length;v++)i["$"+l[v]]=!0;for(l=0;l<r.length;l++)v=i.hasOwnProperty("$"+r[l].value),r[l].selected!==v&&(r[l].selected=v),v&&d&&(r[l].defaultSelected=!0)}else{for(l=""+Nn(l),i=null,v=0;v<r.length;v++){if(r[v].value===l){r[v].selected=!0,d&&(r[v].defaultSelected=!0);return}i!==null||r[v].disabled||(i=r[v])}i!==null&&(i.selected=!0)}}function Fc(r,i,l){if(i!=null&&(i=""+Nn(i),i!==r.value&&(r.value=i),l==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=l!=null?""+Nn(l):""}function Vc(r,i,l,d){if(i==null){if(d!=null){if(l!=null)throw Error(s(92));if(ie(d)){if(1<d.length)throw Error(s(93));d=d[0]}l=d}l==null&&(l=""),i=l}l=Nn(i),r.defaultValue=l,d=r.textContent,d===l&&d!==""&&d!==null&&(r.value=d),Si(r)}function Zi(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Jo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lu(r,i,l){var d=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":d?r.setProperty(i,l):typeof l!="number"||l===0||Jo.has(i)?i==="float"?r.cssFloat=l:r[i]=(""+l).trim():r[i]=l+"px"}function Ou(r,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var v in i)d=i[v],i.hasOwnProperty(v)&&l[v]!==d&&Lu(r,v,d)}else for(var w in i)i.hasOwnProperty(w)&&Lu(r,w,i[w])}function Bc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Du=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ri(r){return Du.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ki(){}var Da=null;function el(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var No=null,Yt=null;function Ru(r){var i=kt(r);if(i&&(r=i.stateNode)){var l=r[rn]||null;e:switch(r=i.stateNode,i.type){case"input":if(So(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Lr(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==r&&d.form===r.form){var v=d[rn]||null;if(!v)throw Error(s(90));So(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(i=0;i<l.length;i++)d=l[i],d.form===r.form&&_o(d)}break e;case"textarea":Fc(r,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&$s(r,!!l.multiple,i,!1)}}}var zc=!1;function Iu(r,i,l){if(zc)return r(i,l);zc=!0;try{var d=r(i);return d}finally{if(zc=!1,(No!==null||Yt!==null)&&(a1(),No&&(i=No,r=Yt,Yt=No=null,Ru(i),r)))for(i=0;i<r.length;i++)Ru(r[i])}}function fi(r,i){var l=r.stateNode;if(l===null)return null;var d=l[rn]||null;if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qc=!1;if(Ss)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){qc=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{qc=!1}var pi=null,nl=null,pa=null;function Fu(){if(pa)return pa;var r,i=nl,l=i.length,d,v="value"in pi?pi.value:pi.textContent,w=v.length;for(r=0;r<l&&i[r]===v[r];r++);var O=l-r;for(d=1;d<=O&&i[l-d]===v[w-d];d++);return pa=v.slice(r,1<d?1-d:void 0)}function Ni(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Pl(){return!0}function zl(){return!1}function ds(r){function i(l,d,v,w,O){this._reactName=l,this._targetInst=v,this.type=d,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var ne in r)r.hasOwnProperty(ne)&&(l=r[ne],this[ne]=l?l(w):w[ne]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Pl:zl,this.isPropagationStopped=zl,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),i}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=ds(ma),Ra=y({},ma,{view:0,detail:0}),ql=ds(Ra),rl,Ia,Fa,sl=y({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qt,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fa&&(Fa&&r.type==="mousemove"?(rl=r.screenX-Fa.screenX,Ia=r.screenY-Fa.screenY):Ia=rl=0,Fa=r),rl)},movementY:function(r){return"movementY"in r?r.movementY:Ia}}),Uc=ds(sl),Va=y({},sl,{dataTransfer:0}),Ba=ds(Va),Vu=y({},Ra,{relatedTarget:0}),Pa=ds(Vu),Bu=y({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),S=ds(Bu),q=y({},ma,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),he=ds(q),be=y({},ma,{data:0}),Ae=ds(be),$e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pt(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Mt[r])?!!i[r]:!1}function Qt(){return Pt}var mn=y({},Ra,{key:function(r){if(r.key){var i=$e[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ni(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?rt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qt,charCode:function(r){return r.type==="keypress"?Ni(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ni(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),In=ds(mn),xr=y({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qr=ds(xr),ir=y({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qt}),rs=ds(ir),Yr=y({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ns=ds(Yr),za=y({},sl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Qi=ds(za),qa=y({},ma,{newState:0,oldState:0}),Hc=ds(qa),Ul=[9,13,27,32],ga=Ss&&"CompositionEvent"in window,Ji=null;Ss&&"documentMode"in document&&(Ji=document.documentMode);var il=Ss&&"TextEvent"in window&&!Ji,Ua=Ss&&(!ga||Ji&&8<Ji&&11>=Ji),fs=" ",Ao=!1;function Co(r,i){switch(r){case"keyup":return Ul.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ba=!1;function Ys(r,i){switch(r){case"compositionend":return Hl(i);case"keypress":return i.which!==32?null:(Ao=!0,fs);case"textInput":return r=i.data,r===fs&&Ao?null:r;default:return null}}function Ha(r,i){if(ba)return r==="compositionend"||!ga&&Co(r,i)?(r=Fu(),pa=nl=pi=null,ba=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ua&&i.locale!=="ko"?null:i.data;default:return null}}var Wl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Wl[r.type]:i==="textarea"}function mi(r,i,l,d){No?Yt?Yt.push(d):Yt=[d]:No=d,i=f1(i,"onChange"),0<i.length&&(l=new Ai("onChange","change",null,l,d),r.push({event:l,listeners:i}))}var ea=null,Wa=null;function Gc(r){Mv(r,0)}function ta(r){var i=pn(r);if(_o(i))return r}function To(r,i){if(r==="change")return i}var si=!1;if(Ss){var Xs;if(Ss){var va="oninput"in document;if(!va){var ya=document.createElement("div");ya.setAttribute("oninput","return;"),va=typeof ya.oninput=="function"}Xs=va}else Xs=!1;si=Xs&&(!document.documentMode||9<document.documentMode)}function Ga(){ea&&(ea.detachEvent("onpropertychange",Gl),Wa=ea=null)}function Gl(r){if(r.propertyName==="value"&&ta(Wa)){var i=[];mi(i,Wa,r,el(r)),Iu(Gc,i)}}function $l(r,i,l){r==="focusin"?(Ga(),ea=i,Wa=l,ea.attachEvent("onpropertychange",Gl)):r==="focusout"&&Ga()}function Ur(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ta(Wa)}function Pu(r,i){if(r==="click")return ta(i)}function xa(r,i){if(r==="input"||r==="change")return ta(i)}function wa(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var As=typeof Object.is=="function"?Object.is:wa;function $a(r,i){if(As(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var v=l[d];if(!ge.call(i,v)||!As(r[v],i[v]))return!1}return!0}function Yl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Xl(r,i){var l=Yl(r);r=0;for(var d;l;){if(l.nodeType===3){if(d=r+l.textContent.length,r<=i&&d>=i)return{node:l,offset:i-r};r=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Yl(l)}}function Ya(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Ya(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Xa(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=hs(r.document);i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=hs(r.document)}return i}function _a(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var al=Ss&&"documentMode"in document&&11>=document.documentMode,gi=null,Za=null,Rs=null,Ci=!1;function Hn(r,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ci||gi==null||gi!==hs(d)||(d=gi,"selectionStart"in d&&_a(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Rs&&$a(Rs,d)||(Rs=d,d=f1(Za,"onSelect"),0<d.length&&(i=new Ai("onSelect","select",null,i,l),r.push({event:i,listeners:d}),i.target=gi)))}function Fn(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var ar={animationend:Fn("Animation","AnimationEnd"),animationiteration:Fn("Animation","AnimationIteration"),animationstart:Fn("Animation","AnimationStart"),transitionrun:Fn("Transition","TransitionRun"),transitionstart:Fn("Transition","TransitionStart"),transitioncancel:Fn("Transition","TransitionCancel"),transitionend:Fn("Transition","TransitionEnd")},Hr={},Sa={};Ss&&(Sa=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function na(r){if(Hr[r])return Hr[r];if(!ar[r])return r;var i=ar[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in Sa)return Hr[r]=i[l];return r}var ol=na("animationend"),$c=na("animationiteration"),od=na("animationstart"),If=na("transitionrun"),Ff=na("transitionstart"),Vf=na("transitioncancel"),ld=na("transitionend"),cd=new Map,ll="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ll.push("scrollEnd");function Ti(r,i){cd.set(r,i),Tn(i,[r])}var Yc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},bi=[],cl=0,zu=0;function Xc(){for(var r=cl,i=zu=cl=0;i<r;){var l=bi[i];bi[i++]=null;var d=bi[i];bi[i++]=null;var v=bi[i];bi[i++]=null;var w=bi[i];if(bi[i++]=null,d!==null&&v!==null){var O=d.pending;O===null?v.next=v:(v.next=O.next,O.next=v),d.pending=v}w!==0&&Kc(l,v,w)}}function Zc(r,i,l,d){bi[cl++]=r,bi[cl++]=i,bi[cl++]=l,bi[cl++]=d,zu|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function qu(r,i,l,d){return Zc(r,i,l,d),Is(r)}function Ka(r,i){return Zc(r,null,null,i),Is(r)}function Kc(r,i,l){r.lanes|=l;var d=r.alternate;d!==null&&(d.lanes|=l);for(var v=!1,w=r.return;w!==null;)w.childLanes|=l,d=w.alternate,d!==null&&(d.childLanes|=l),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,v&&i!==null&&(v=31-bt(l),r=w.hiddenUpdates,d=r[v],d===null?r[v]=[i]:d.push(i),i.lane=l|536870912),w):null}function Is(r){if(50<Md)throw Md=0,$0=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Cs={};function Uu(r,i,l,d){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(r,i,l,d){return new Uu(r,i,l,d)}function Hu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ki(r,i){var l=r.alternate;return l===null?(l=Fs(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Qc(r,i){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,i=l.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Zl(r,i,l,d,v,w){var O=0;if(d=r,typeof r=="function")Hu(r)&&(O=1);else if(typeof r=="string")O=B_(r,l,G.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case B:return r=Fs(31,l,i,v),r.elementType=B,r.lanes=w,r;case N:return ko(l.children,v,w,i);case k:O=8,v|=24;break;case T:return r=Fs(12,l,i,v|2),r.elementType=T,r.lanes=w,r;case F:return r=Fs(13,l,i,v),r.elementType=F,r.lanes=w,r;case W:return r=Fs(19,l,i,v),r.elementType=W,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:O=10;break e;case R:O=9;break e;case V:O=11;break e;case H:O=14;break e;case L:O=16,d=null;break e}O=29,l=Error(s(130,r===null?"null":typeof r,"")),d=null}return i=Fs(O,l,i,v),i.elementType=r,i.type=d,i.lanes=w,i}function ko(r,i,l,d){return r=Fs(7,r,d,i),r.lanes=l,r}function Jc(r,i,l){return r=Fs(6,r,null,i),r.lanes=l,r}function Wu(r){var i=Fs(18,null,null,0);return i.stateNode=r,i}function Kl(r,i,l){return i=Fs(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Gu=new WeakMap;function ji(r,i){if(typeof r=="object"&&r!==null){var l=Gu.get(r);return l!==void 0?l:(i={value:r,source:i,stack:et(i)},Gu.set(r,i),i)}return{value:r,source:i,stack:et(i)}}var Ql=[],ul=0,$u=null,eu=0,Ei=[],Mi=0,jo=null,Li=1,Oi="";function vi(r,i){Ql[ul++]=eu,Ql[ul++]=$u,$u=r,eu=i}function Bf(r,i,l){Ei[Mi++]=Li,Ei[Mi++]=Oi,Ei[Mi++]=jo,jo=r;var d=Li;r=Oi;var v=32-bt(d)-1;d&=~(1<<v),l+=1;var w=32-bt(i)+v;if(30<w){var O=v-v%5;w=(d&(1<<O)-1).toString(32),d>>=O,v-=O,Li=1<<32-bt(i)+v|l<<v|d,Oi=w+r}else Li=1<<w|l<<v|d,Oi=r}function ud(r){r.return!==null&&(vi(r,1),Bf(r,1,0))}function Yu(r){for(;r===$u;)$u=Ql[--ul],Ql[ul]=null,eu=Ql[--ul],Ql[ul]=null;for(;r===jo;)jo=Ei[--Mi],Ei[Mi]=null,Oi=Ei[--Mi],Ei[Mi]=null,Li=Ei[--Mi],Ei[Mi]=null}function Pf(r,i){Ei[Mi++]=Li,Ei[Mi++]=Oi,Ei[Mi++]=jo,Li=i.id,Oi=i.overflow,jo=r}var Ts=null,fr=null,jn=!1,Zs=null,Or=!1,ra=Error(s(519));function Eo(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jl(ji(i,r)),ra}function hd(r){var i=r.stateNode,l=r.type,d=r.memoizedProps;switch(i[Sn]=r,i[rn]=d,l){case"dialog":Mn("cancel",i),Mn("close",i);break;case"iframe":case"object":case"embed":Mn("load",i);break;case"video":case"audio":for(l=0;l<Od.length;l++)Mn(Od[l],i);break;case"source":Mn("error",i);break;case"img":case"image":case"link":Mn("error",i),Mn("load",i);break;case"details":Mn("toggle",i);break;case"input":Mn("invalid",i),Bl(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Mn("invalid",i);break;case"textarea":Mn("invalid",i),Vc(i,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||d.suppressHydrationWarning===!0||Rv(i.textContent,l)?(d.popover!=null&&(Mn("beforetoggle",i),Mn("toggle",i)),d.onScroll!=null&&Mn("scroll",i),d.onScrollEnd!=null&&Mn("scrollend",i),d.onClick!=null&&(i.onclick=Ki),i=!0):i=!1,i||Eo(r,!0)}function Qa(r){for(Ts=r.return;Ts;)switch(Ts.tag){case 5:case 31:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:Ts=Ts.return}}function ks(r){if(r!==Ts)return!1;if(!jn)return Qa(r),jn=!0,!1;var i=r.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||lm(r.type,r.memoizedProps)),l=!l),l&&fr&&Eo(r),Qa(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));fr=Hv(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));fr=Hv(r)}else i===27?(i=fr,fc(r.type)?(r=fm,fm=null,fr=r):fr=i):fr=Ts?Ta(r.stateNode.nextSibling):null;return!0}function hl(){fr=Ts=null,jn=!1}function dd(){var r=Zs;return r!==null&&(Bi===null?Bi=r:Bi.push.apply(Bi,r),Zs=null),r}function Jl(r){Zs===null?Zs=[r]:Zs.push(r)}var Xu=z(null),Mo=null,Na=null;function Lo(r,i,l){$(Xu,i._currentValue),i._currentValue=l}function Di(r){r._currentValue=Xu.current,M(Xu)}function ec(r,i,l){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===l)break;r=r.return}}function dl(r,i,l,d){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var O=v.child;w=w.firstContext;e:for(;w!==null;){var ne=w;w=v;for(var me=0;me<i.length;me++)if(ne.context===i[me]){w.lanes|=l,ne=w.alternate,ne!==null&&(ne.lanes|=l),ec(w.return,l,r),d||(O=null);break e}w=ne.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(s(341));O.lanes|=l,w=O.alternate,w!==null&&(w.lanes|=l),ec(O,l,r),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===r){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function Oo(r,i,l,d){r=null;for(var v=i,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var ne=v.type;As(v.pendingProps.value,O.value)||(r!==null?r.push(ne):r=[ne])}}else if(v===pe.current){if(O=v.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Vd):r=[Vd])}v=v.return}r!==null&&dl(i,r,l,d),i.flags|=262144}function Zu(r){for(r=r.firstContext;r!==null;){if(!As(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Do(r){Mo=r,Na=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function js(r){return zf(Mo,r)}function Ku(r,i){return Mo===null&&Do(r),zf(r,i)}function zf(r,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Na===null){if(r===null)throw Error(s(308));Na=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Na=Na.next=i;return l}var d0=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(l,d){r.push(d)}};this.abort=function(){i.aborted=!0,r.forEach(function(l){return l()})}},f0=n.unstable_scheduleCallback,p0=n.unstable_NormalPriority,Wr={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tc(){return{controller:new d0,data:new Map,refCount:0}}function tu(r){r.refCount--,r.refCount===0&&f0(p0,function(){r.controller.abort()})}var nu=null,Qu=0,m=0,x=null;function C(r,i){if(nu===null){var l=nu=[];Qu=0,m=J0(),x={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Qu++,i.then(E,E),i}function E(){if(--Qu===0&&nu!==null){x!==null&&(x.status="fulfilled");var r=nu;nu=null,m=0,x=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function U(r,i){var l=[],d={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return r.then(function(){d.status="fulfilled",d.value=i;for(var v=0;v<l.length;v++)(0,l[v])(i)},function(v){for(d.status="rejected",d.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),d}var Z=X.S;X.S=function(r,i){iv=vt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&C(r,i),Z!==null&&Z(r,i)};var Q=z(null);function se(){var r=Q.current;return r!==null?r:mr.pooledCache}function oe(r,i){i===null?$(Q,Q.current):$(Q,i.pool)}function ue(){var r=se();return r===null?null:{parent:Wr._currentValue,pool:r}}var ve=Error(s(460)),Le=Error(s(474)),ce=Error(s(542)),we={then:function(){}};function Te(r){return r=r.status,r==="fulfilled"||r==="rejected"}function He(r,i,l){switch(l=r[l],l===void 0?r.push(i):l!==i&&(i.then(Ki,Ki),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,it(r),r;default:if(typeof i.status=="string")i.then(Ki,Ki);else{if(r=mr,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(d){if(i.status==="pending"){var v=i;v.status="fulfilled",v.value=d}},function(d){if(i.status==="pending"){var v=i;v.status="rejected",v.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,it(r),r}throw Ue=i,ve}}function ke(r){try{var i=r._init;return i(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ue=l,ve):l}}var Ue=null;function Ye(){if(Ue===null)throw Error(s(459));var r=Ue;return Ue=null,r}function it(r){if(r===ve||r===ce)throw Error(s(483))}var tt=null,Ot=0;function Nt(r){var i=Ot;return Ot+=1,tt===null&&(tt=[]),He(tt,r,i)}function an(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Et(r,i){throw i.$$typeof===_?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function kn(r){function i(Ce,ye){if(r){var Oe=Ce.deletions;Oe===null?(Ce.deletions=[ye],Ce.flags|=16):Oe.push(ye)}}function l(Ce,ye){if(!r)return null;for(;ye!==null;)i(Ce,ye),ye=ye.sibling;return null}function d(Ce){for(var ye=new Map;Ce!==null;)Ce.key!==null?ye.set(Ce.key,Ce):ye.set(Ce.index,Ce),Ce=Ce.sibling;return ye}function v(Ce,ye){return Ce=ki(Ce,ye),Ce.index=0,Ce.sibling=null,Ce}function w(Ce,ye,Oe){return Ce.index=Oe,r?(Oe=Ce.alternate,Oe!==null?(Oe=Oe.index,Oe<ye?(Ce.flags|=67108866,ye):Oe):(Ce.flags|=67108866,ye)):(Ce.flags|=1048576,ye)}function O(Ce){return r&&Ce.alternate===null&&(Ce.flags|=67108866),Ce}function ne(Ce,ye,Oe,Ke){return ye===null||ye.tag!==6?(ye=Jc(Oe,Ce.mode,Ke),ye.return=Ce,ye):(ye=v(ye,Oe),ye.return=Ce,ye)}function me(Ce,ye,Oe,Ke){var Gt=Oe.type;return Gt===N?Ge(Ce,ye,Oe.props.children,Ke,Oe.key):ye!==null&&(ye.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===L&&ke(Gt)===ye.type)?(ye=v(ye,Oe.props),an(ye,Oe),ye.return=Ce,ye):(ye=Zl(Oe.type,Oe.key,Oe.props,null,Ce.mode,Ke),an(ye,Oe),ye.return=Ce,ye)}function De(Ce,ye,Oe,Ke){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Oe.containerInfo||ye.stateNode.implementation!==Oe.implementation?(ye=Kl(Oe,Ce.mode,Ke),ye.return=Ce,ye):(ye=v(ye,Oe.children||[]),ye.return=Ce,ye)}function Ge(Ce,ye,Oe,Ke,Gt){return ye===null||ye.tag!==7?(ye=ko(Oe,Ce.mode,Ke,Gt),ye.return=Ce,ye):(ye=v(ye,Oe),ye.return=Ce,ye)}function Je(Ce,ye,Oe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Jc(""+ye,Ce.mode,Oe),ye.return=Ce,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return Oe=Zl(ye.type,ye.key,ye.props,null,Ce.mode,Oe),an(Oe,ye),Oe.return=Ce,Oe;case A:return ye=Kl(ye,Ce.mode,Oe),ye.return=Ce,ye;case L:return ye=ke(ye),Je(Ce,ye,Oe)}if(ie(ye)||I(ye))return ye=ko(ye,Ce.mode,Oe,null),ye.return=Ce,ye;if(typeof ye.then=="function")return Je(Ce,Nt(ye),Oe);if(ye.$$typeof===D)return Je(Ce,Ku(Ce,ye),Oe);Et(Ce,ye)}return null}function Ve(Ce,ye,Oe,Ke){var Gt=ye!==null?ye.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Gt!==null?null:ne(Ce,ye,""+Oe,Ke);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case b:return Oe.key===Gt?me(Ce,ye,Oe,Ke):null;case A:return Oe.key===Gt?De(Ce,ye,Oe,Ke):null;case L:return Oe=ke(Oe),Ve(Ce,ye,Oe,Ke)}if(ie(Oe)||I(Oe))return Gt!==null?null:Ge(Ce,ye,Oe,Ke,null);if(typeof Oe.then=="function")return Ve(Ce,ye,Nt(Oe),Ke);if(Oe.$$typeof===D)return Ve(Ce,ye,Ku(Ce,Oe),Ke);Et(Ce,Oe)}return null}function ze(Ce,ye,Oe,Ke,Gt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Ce=Ce.get(Oe)||null,ne(ye,Ce,""+Ke,Gt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case b:return Ce=Ce.get(Ke.key===null?Oe:Ke.key)||null,me(ye,Ce,Ke,Gt);case A:return Ce=Ce.get(Ke.key===null?Oe:Ke.key)||null,De(ye,Ce,Ke,Gt);case L:return Ke=ke(Ke),ze(Ce,ye,Oe,Ke,Gt)}if(ie(Ke)||I(Ke))return Ce=Ce.get(Oe)||null,Ge(ye,Ce,Ke,Gt,null);if(typeof Ke.then=="function")return ze(Ce,ye,Oe,Nt(Ke),Gt);if(Ke.$$typeof===D)return ze(Ce,ye,Oe,Ku(ye,Ke),Gt);Et(ye,Ke)}return null}function Lt(Ce,ye,Oe,Ke){for(var Gt=null,Yn=null,zt=ye,_n=ye=0,Dn=null;zt!==null&&_n<Oe.length;_n++){zt.index>_n?(Dn=zt,zt=null):Dn=zt.sibling;var Xn=Ve(Ce,zt,Oe[_n],Ke);if(Xn===null){zt===null&&(zt=Dn);break}r&&zt&&Xn.alternate===null&&i(Ce,zt),ye=w(Xn,ye,_n),Yn===null?Gt=Xn:Yn.sibling=Xn,Yn=Xn,zt=Dn}if(_n===Oe.length)return l(Ce,zt),jn&&vi(Ce,_n),Gt;if(zt===null){for(;_n<Oe.length;_n++)zt=Je(Ce,Oe[_n],Ke),zt!==null&&(ye=w(zt,ye,_n),Yn===null?Gt=zt:Yn.sibling=zt,Yn=zt);return jn&&vi(Ce,_n),Gt}for(zt=d(zt);_n<Oe.length;_n++)Dn=ze(zt,Ce,_n,Oe[_n],Ke),Dn!==null&&(r&&Dn.alternate!==null&&zt.delete(Dn.key===null?_n:Dn.key),ye=w(Dn,ye,_n),Yn===null?Gt=Dn:Yn.sibling=Dn,Yn=Dn);return r&&zt.forEach(function(vc){return i(Ce,vc)}),jn&&vi(Ce,_n),Gt}function Zt(Ce,ye,Oe,Ke){if(Oe==null)throw Error(s(151));for(var Gt=null,Yn=null,zt=ye,_n=ye=0,Dn=null,Xn=Oe.next();zt!==null&&!Xn.done;_n++,Xn=Oe.next()){zt.index>_n?(Dn=zt,zt=null):Dn=zt.sibling;var vc=Ve(Ce,zt,Xn.value,Ke);if(vc===null){zt===null&&(zt=Dn);break}r&&zt&&vc.alternate===null&&i(Ce,zt),ye=w(vc,ye,_n),Yn===null?Gt=vc:Yn.sibling=vc,Yn=vc,zt=Dn}if(Xn.done)return l(Ce,zt),jn&&vi(Ce,_n),Gt;if(zt===null){for(;!Xn.done;_n++,Xn=Oe.next())Xn=Je(Ce,Xn.value,Ke),Xn!==null&&(ye=w(Xn,ye,_n),Yn===null?Gt=Xn:Yn.sibling=Xn,Yn=Xn);return jn&&vi(Ce,_n),Gt}for(zt=d(zt);!Xn.done;_n++,Xn=Oe.next())Xn=ze(zt,Ce,_n,Xn.value,Ke),Xn!==null&&(r&&Xn.alternate!==null&&zt.delete(Xn.key===null?_n:Xn.key),ye=w(Xn,ye,_n),Yn===null?Gt=Xn:Yn.sibling=Xn,Yn=Xn);return r&&zt.forEach(function(Z_){return i(Ce,Z_)}),jn&&vi(Ce,_n),Gt}function ur(Ce,ye,Oe,Ke){if(typeof Oe=="object"&&Oe!==null&&Oe.type===N&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case b:e:{for(var Gt=Oe.key;ye!==null;){if(ye.key===Gt){if(Gt=Oe.type,Gt===N){if(ye.tag===7){l(Ce,ye.sibling),Ke=v(ye,Oe.props.children),Ke.return=Ce,Ce=Ke;break e}}else if(ye.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===L&&ke(Gt)===ye.type){l(Ce,ye.sibling),Ke=v(ye,Oe.props),an(Ke,Oe),Ke.return=Ce,Ce=Ke;break e}l(Ce,ye);break}else i(Ce,ye);ye=ye.sibling}Oe.type===N?(Ke=ko(Oe.props.children,Ce.mode,Ke,Oe.key),Ke.return=Ce,Ce=Ke):(Ke=Zl(Oe.type,Oe.key,Oe.props,null,Ce.mode,Ke),an(Ke,Oe),Ke.return=Ce,Ce=Ke)}return O(Ce);case A:e:{for(Gt=Oe.key;ye!==null;){if(ye.key===Gt)if(ye.tag===4&&ye.stateNode.containerInfo===Oe.containerInfo&&ye.stateNode.implementation===Oe.implementation){l(Ce,ye.sibling),Ke=v(ye,Oe.children||[]),Ke.return=Ce,Ce=Ke;break e}else{l(Ce,ye);break}else i(Ce,ye);ye=ye.sibling}Ke=Kl(Oe,Ce.mode,Ke),Ke.return=Ce,Ce=Ke}return O(Ce);case L:return Oe=ke(Oe),ur(Ce,ye,Oe,Ke)}if(ie(Oe))return Lt(Ce,ye,Oe,Ke);if(I(Oe)){if(Gt=I(Oe),typeof Gt!="function")throw Error(s(150));return Oe=Gt.call(Oe),Zt(Ce,ye,Oe,Ke)}if(typeof Oe.then=="function")return ur(Ce,ye,Nt(Oe),Ke);if(Oe.$$typeof===D)return ur(Ce,ye,Ku(Ce,Oe),Ke);Et(Ce,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,ye!==null&&ye.tag===6?(l(Ce,ye.sibling),Ke=v(ye,Oe),Ke.return=Ce,Ce=Ke):(l(Ce,ye),Ke=Jc(Oe,Ce.mode,Ke),Ke.return=Ce,Ce=Ke),O(Ce)):l(Ce,ye)}return function(Ce,ye,Oe,Ke){try{Ot=0;var Gt=ur(Ce,ye,Oe,Ke);return tt=null,Gt}catch(zt){if(zt===ve||zt===ce)throw zt;var Yn=Fs(29,zt,null,Ce.mode);return Yn.lanes=Ke,Yn.return=Ce,Yn}finally{}}}var pr=kn(!0),gn=kn(!1),At=!1;function mt(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wr(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Xt(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function yn(r,i,l){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Qn&2)!==0){var v=d.pending;return v===null?i.next=i:(i.next=v.next,v.next=i),d.pending=i,i=Is(r),Kc(r,null,l),i}return Zc(r,d,i,l),Is(r)}function Zn(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var d=i.lanes;d&=r.pendingLanes,l|=d,i.lanes=l,Bt(r,l)}}function ss(r,i){var l=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var v=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var O={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?v=w=O:w=w.next=O,l=l.next}while(l!==null);w===null?v=w=i:w=w.next=i}else v=w=i;l={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}var Es=!1;function or(){if(Es){var r=x;if(r!==null)throw r}}function Xr(r,i,l,d){Es=!1;var v=r.updateQueue;At=!1;var w=v.firstBaseUpdate,O=v.lastBaseUpdate,ne=v.shared.pending;if(ne!==null){v.shared.pending=null;var me=ne,De=me.next;me.next=null,O===null?w=De:O.next=De,O=me;var Ge=r.alternate;Ge!==null&&(Ge=Ge.updateQueue,ne=Ge.lastBaseUpdate,ne!==O&&(ne===null?Ge.firstBaseUpdate=De:ne.next=De,Ge.lastBaseUpdate=me))}if(w!==null){var Je=v.baseState;O=0,Ge=De=me=null,ne=w;do{var Ve=ne.lane&-536870913,ze=Ve!==ne.lane;if(ze?(On&Ve)===Ve:(d&Ve)===Ve){Ve!==0&&Ve===m&&(Es=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:ne.tag,payload:ne.payload,callback:null,next:null});e:{var Lt=r,Zt=ne;Ve=i;var ur=l;switch(Zt.tag){case 1:if(Lt=Zt.payload,typeof Lt=="function"){Je=Lt.call(ur,Je,Ve);break e}Je=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Zt.payload,Ve=typeof Lt=="function"?Lt.call(ur,Je,Ve):Lt,Ve==null)break e;Je=y({},Je,Ve);break e;case 2:At=!0}}Ve=ne.callback,Ve!==null&&(r.flags|=64,ze&&(r.flags|=8192),ze=v.callbacks,ze===null?v.callbacks=[Ve]:ze.push(Ve))}else ze={lane:Ve,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},Ge===null?(De=Ge=ze,me=Je):Ge=Ge.next=ze,O|=Ve;if(ne=ne.next,ne===null){if(ne=v.shared.pending,ne===null)break;ze=ne,ne=ze.next,ze.next=null,v.lastBaseUpdate=ze,v.shared.pending=null}}while(!0);Ge===null&&(me=Je),v.baseState=me,v.firstBaseUpdate=De,v.lastBaseUpdate=Ge,w===null&&(v.shared.lanes=0),lc|=O,r.lanes=O,r.memoizedState=Je}}function Vs(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function Zr(r,i){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Vs(l[r],i)}var An=z(null),zn=z(0);function _r(r,i){r=_l,$(zn,r),$(An,i),_l=r|i.baseLanes}function Wn(){$(zn,_l),$(An,An.current)}function is(){_l=zn.current,M(An),M(zn)}var Sr=z(null),qn=null;function Gr(r){var i=r.alternate;$(Vn,Vn.current&1),$(Sr,r),qn===null&&(i===null||An.current!==null||i.memoizedState!==null)&&(qn=r)}function Kn(r){$(Vn,Vn.current),$(Sr,r),qn===null&&(qn=r)}function Kr(r){r.tag===22?($(Vn,Vn.current),$(Sr,r),qn===null&&(qn=r)):Qr()}function Qr(){$(Vn,Vn.current),$(Sr,Sr.current)}function er(r){M(Sr),qn===r&&(qn=null),M(Vn)}var Vn=z(0);function Bs(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||hm(l)||dm(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Dr=0,Ht=null,Wt=null,Un=null,ii=!1,Ri=!1,Ks=!1,Jr=0,Ro=0,Io=null,Ju=0;function lr(){throw Error(s(321))}function fd(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!As(r[l],i[l]))return!1;return!0}function pd(r,i,l,d,v,w){return Dr=w,Ht=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=r===null||r.memoizedState===null?gb:_0,Ks=!1,w=l(d,v),Ks=!1,Ri&&(w=Ja(i,l,d,v)),eh(r),w}function eh(r){X.H=_d;var i=Wt!==null&&Wt.next!==null;if(Dr=0,Un=Wt=Ht=null,ii=!1,Ro=0,Io=null,i)throw Error(s(300));r===null||ms||(r=r.dependencies,r!==null&&Zu(r)&&(ms=!0))}function Ja(r,i,l,d){Ht=r;var v=0;do{if(Ri&&(Io=null),Ro=0,Ri=!1,25<=v)throw Error(s(301));if(v+=1,Un=Wt=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}X.H=bb,w=i(l,d)}while(Ri);return w}function m0(){var r=X.H,i=r.useState()[0];return i=typeof i.then=="function"?Fo(i):i,r=r.useState()[0],(Wt!==null?Wt.memoizedState:null)!==r&&(Ht.flags|=1024),i}function md(){var r=Jr!==0;return Jr=0,r}function gd(r,i,l){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~l}function th(r){if(ii){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ii=!1}Dr=0,Un=Wt=Ht=null,Ri=!1,Ro=Jr=0,Io=null}function ps(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?Ht.memoizedState=Un=r:Un=Un.next=r,Un}function Rr(){if(Wt===null){var r=Ht.alternate;r=r!==null?r.memoizedState:null}else r=Wt.next;var i=Un===null?Ht.memoizedState:Un.next;if(i!==null)Un=i,Wt=r;else{if(r===null)throw Ht.alternate===null?Error(s(467)):Error(s(310));Wt=r,r={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Un===null?Ht.memoizedState=Un=r:Un=Un.next=r}return Un}function ru(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fo(r){var i=Ro;return Ro+=1,Io===null&&(Io=[]),r=He(Io,r,i),i=Ht,(Un===null?i.memoizedState:Un.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?gb:_0),r}function nc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Fo(r);if(r.$$typeof===D)return js(r)}throw Error(s(438,String(r)))}function fl(r){var i=null,l=Ht.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var d=Ht.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(v){return v.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=ru(),Ht.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(r),d=0;d<r;d++)l[d]=te;return i.index++,l}function Aa(r,i){return typeof i=="function"?i(r):i}function nh(r){var i=Rr();return rc(i,Wt,r)}function rc(r,i,l){var d=r.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=l;var v=r.baseQueue,w=d.pending;if(w!==null){if(v!==null){var O=v.next;v.next=w.next,w.next=O}i.baseQueue=v=w,d.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{i=v.next;var ne=O=null,me=null,De=i,Ge=!1;do{var Je=De.lane&-536870913;if(Je!==De.lane?(On&Je)===Je:(Dr&Je)===Je){var Ve=De.revertLane;if(Ve===0)me!==null&&(me=me.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),Je===m&&(Ge=!0);else if((Dr&Ve)===Ve){De=De.next,Ve===m&&(Ge=!0);continue}else Je={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},me===null?(ne=me=Je,O=w):me=me.next=Je,Ht.lanes|=Ve,lc|=Ve;Je=De.action,Ks&&l(w,Je),w=De.hasEagerState?De.eagerState:l(w,Je)}else Ve={lane:Je,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},me===null?(ne=me=Ve,O=w):me=me.next=Ve,Ht.lanes|=Je,lc|=Je;De=De.next}while(De!==null&&De!==i);if(me===null?O=w:me.next=ne,!As(w,r.memoizedState)&&(ms=!0,Ge&&(l=x,l!==null)))throw l;r.memoizedState=w,r.baseState=O,r.baseQueue=me,d.lastRenderedState=w}return v===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function rh(r){var i=Rr(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var d=l.dispatch,v=l.pending,w=i.memoizedState;if(v!==null){l.pending=null;var O=v=v.next;do w=r(w,O.action),O=O.next;while(O!==v);As(w,i.memoizedState)||(ms=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),l.lastRenderedState=w}return[w,d]}function sh(r,i,l){var d=Ht,v=Rr(),w=jn;if(w){if(l===void 0)throw Error(s(407));l=l()}else l=i();var O=!As((Wt||v).memoizedState,l);if(O&&(v.memoizedState=l,ms=!0),v=v.queue,g0(vd.bind(null,d,v,r),[r]),v.getSnapshot!==i||O||Un!==null&&Un.memoizedState.tag&1){if(d.flags|=2048,ml(9,{destroy:void 0},bd.bind(null,d,v,l,i),null),mr===null)throw Error(s(349));w||(Dr&127)!==0||eo(d,i,l)}return l}function eo(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Ht.updateQueue,i===null?(i=ru(),Ht.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function bd(r,i,l,d){i.value=l,i.getSnapshot=d,qf(i)&&yd(r)}function vd(r,i,l){return l(function(){qf(i)&&yd(r)})}function qf(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!As(r,l)}catch{return!0}}function yd(r){var i=Ka(r,2);i!==null&&Pi(i,r,2)}function Vo(r){var i=ps();if(typeof r=="function"){var l=r;if(r=l(),Ks){at(!0);try{l()}finally{at(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:r},i}function Uf(r,i,l,d){return r.baseState=l,rc(r,Wt,typeof d=="function"?d:Aa)}function Hf(r,i,l,d,v){if(Yf(r))throw Error(s(485));if(r=i.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};X.T!==null?l(!0):w.isTransition=!1,d(w),l=i.pending,l===null?(w.next=i.pending=w,Wf(i,w)):(w.next=l.next,i.pending=l.next=w)}}function Wf(r,i){var l=i.action,d=i.payload,v=r.state;if(i.isTransition){var w=X.T,O={};X.T=O;try{var ne=l(v,d),me=X.S;me!==null&&me(O,ne),xd(r,i,ne)}catch(De){pl(r,i,De)}finally{w!==null&&O.types!==null&&(w.types=O.types),X.T=w}}else try{w=l(v,d),xd(r,i,w)}catch(De){pl(r,i,De)}}function xd(r,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Gf(r,i,d)},function(d){return pl(r,i,d)}):Gf(r,i,l)}function Gf(r,i,l){i.status="fulfilled",i.value=l,ih(i),r.state=l,i=r.pending,i!==null&&(l=i.next,l===i?r.pending=null:(l=l.next,i.next=l,Wf(r,l)))}function pl(r,i,l){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=l,ih(i),i=i.next;while(i!==d)}r.action=null}function ih(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function su(r,i){return i}function Ca(r,i){if(jn){var l=mr.formState;if(l!==null){e:{var d=Ht;if(jn){if(fr){t:{for(var v=fr,w=Or;v.nodeType!==8;){if(!w){v=null;break t}if(v=Ta(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){fr=Ta(v.nextSibling),d=v.data==="F!";break e}}Eo(d)}d=!1}d&&(i=l[0])}}return l=ps(),l.memoizedState=l.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:su,lastRenderedState:i},l.queue=d,l=fb.bind(null,Ht,d),d.dispatch=l,d=Vo(!1),w=w0.bind(null,Ht,!1,d.queue),d=ps(),v={state:i,dispatch:null,action:r,pending:null},d.queue=v,l=Hf.bind(null,Ht,v,w,l),v.dispatch=l,d.memoizedState=r,[i,l,!1]}function to(r){var i=Rr();return no(i,Wt,r)}function no(r,i,l){if(i=rc(r,i,su)[0],r=nh(Aa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=Fo(i)}catch(O){throw O===ve?ce:O}else d=i;i=Rr();var v=i.queue,w=v.dispatch;return l!==i.memoizedState&&(Ht.flags|=2048,ml(9,{destroy:void 0},ah.bind(null,v,l),null)),[d,w,r]}function ah(r,i){r.action=i}function oh(r){var i=Rr(),l=Wt;if(l!==null)return no(i,l,r);Rr(),i=i.memoizedState,l=Rr();var d=l.queue.dispatch;return l.memoizedState=r,[i,d,!1]}function ml(r,i,l,d){return r={tag:r,create:l,deps:d,inst:i,next:null},i=Ht.updateQueue,i===null&&(i=ru(),Ht.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=r.next=r:(d=l.next,l.next=r,r.next=d,i.lastEffect=r),r}function $f(){return Rr().memoizedState}function sc(r,i,l,d){var v=ps();Ht.flags|=r,v.memoizedState=ml(1|i,{destroy:void 0},l,d===void 0?null:d)}function ic(r,i,l,d){var v=Rr();d=d===void 0?null:d;var w=v.memoizedState.inst;Wt!==null&&d!==null&&fd(d,Wt.memoizedState.deps)?v.memoizedState=ml(i,w,l,d):(Ht.flags|=r,v.memoizedState=ml(1|i,w,l,d))}function J2(r,i){sc(8390656,8,r,i)}function g0(r,i){ic(2048,8,r,i)}function H4(r){Ht.flags|=4;var i=Ht.updateQueue;if(i===null)i=ru(),Ht.updateQueue=i,i.events=[r];else{var l=i.events;l===null?i.events=[r]:l.push(r)}}function eb(r){var i=Rr().memoizedState;return H4({ref:i,nextImpl:r}),function(){if((Qn&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function tb(r,i){return ic(4,2,r,i)}function nb(r,i){return ic(4,4,r,i)}function rb(r,i){if(typeof i=="function"){r=r();var l=i(r);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function sb(r,i,l){l=l!=null?l.concat([r]):null,ic(4,4,rb.bind(null,i,r),l)}function b0(){}function ib(r,i){var l=Rr();i=i===void 0?null:i;var d=l.memoizedState;return i!==null&&fd(i,d[1])?d[0]:(l.memoizedState=[r,i],r)}function ab(r,i){var l=Rr();i=i===void 0?null:i;var d=l.memoizedState;if(i!==null&&fd(i,d[1]))return d[0];if(d=r(),Ks){at(!0);try{r()}finally{at(!1)}}return l.memoizedState=[d,i],d}function v0(r,i,l){return l===void 0||(Dr&1073741824)!==0&&(On&261930)===0?r.memoizedState=i:(r.memoizedState=l,r=ov(),Ht.lanes|=r,lc|=r,l)}function ob(r,i,l,d){return As(l,i)?l:An.current!==null?(r=v0(r,l,d),As(r,i)||(ms=!0),r):(Dr&42)===0||(Dr&1073741824)!==0&&(On&261930)===0?(ms=!0,r.memoizedState=l):(r=ov(),Ht.lanes|=r,lc|=r,i)}function lb(r,i,l,d,v){var w=re.p;re.p=w!==0&&8>w?w:8;var O=X.T,ne={};X.T=ne,w0(r,!1,i,l);try{var me=v(),De=X.S;if(De!==null&&De(ne,me),me!==null&&typeof me=="object"&&typeof me.then=="function"){var Ge=U(me,d);wd(r,i,Ge,aa(r))}else wd(r,i,d,aa(r))}catch(Je){wd(r,i,{then:function(){},status:"rejected",reason:Je},aa())}finally{re.p=w,O!==null&&ne.types!==null&&(O.types=ne.types),X.T=O}}function W4(){}function y0(r,i,l,d){if(r.tag!==5)throw Error(s(476));var v=cb(r).queue;lb(r,v,i,le,l===null?W4:function(){return ub(r),l(d)})}function cb(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:le},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:l},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function ub(r){var i=cb(r);i.next===null&&(i=r.alternate.memoizedState),wd(r,i.next.queue,{},aa())}function x0(){return js(Vd)}function hb(){return Rr().memoizedState}function db(){return Rr().memoizedState}function G4(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var l=aa();r=Xt(l);var d=yn(i,r,l);d!==null&&(Pi(d,i,l),Zn(d,i,l)),i={cache:tc()},r.payload=i;return}i=i.return}}function $4(r,i,l){var d=aa();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yf(r)?pb(i,l):(l=qu(r,i,l,d),l!==null&&(Pi(l,r,d),mb(l,i,d)))}function fb(r,i,l){var d=aa();wd(r,i,l,d)}function wd(r,i,l,d){var v={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Yf(r))pb(i,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var O=i.lastRenderedState,ne=w(O,l);if(v.hasEagerState=!0,v.eagerState=ne,As(ne,O))return Zc(r,i,v,0),mr===null&&Xc(),!1}catch{}finally{}if(l=qu(r,i,v,d),l!==null)return Pi(l,r,d),mb(l,i,d),!0}return!1}function w0(r,i,l,d){if(d={lane:2,revertLane:J0(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Yf(r)){if(i)throw Error(s(479))}else i=qu(r,l,d,2),i!==null&&Pi(i,r,2)}function Yf(r){var i=r.alternate;return r===Ht||i!==null&&i===Ht}function pb(r,i){Ri=ii=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function mb(r,i,l){if((l&4194048)!==0){var d=i.lanes;d&=r.pendingLanes,l|=d,i.lanes=l,Bt(r,l)}}var _d={readContext:js,use:nc,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useLayoutEffect:lr,useInsertionEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useSyncExternalStore:lr,useId:lr,useHostTransitionStatus:lr,useFormState:lr,useActionState:lr,useOptimistic:lr,useMemoCache:lr,useCacheRefresh:lr};_d.useEffectEvent=lr;var gb={readContext:js,use:nc,useCallback:function(r,i){return ps().memoizedState=[r,i===void 0?null:i],r},useContext:js,useEffect:J2,useImperativeHandle:function(r,i,l){l=l!=null?l.concat([r]):null,sc(4194308,4,rb.bind(null,i,r),l)},useLayoutEffect:function(r,i){return sc(4194308,4,r,i)},useInsertionEffect:function(r,i){sc(4,2,r,i)},useMemo:function(r,i){var l=ps();i=i===void 0?null:i;var d=r();if(Ks){at(!0);try{r()}finally{at(!1)}}return l.memoizedState=[d,i],d},useReducer:function(r,i,l){var d=ps();if(l!==void 0){var v=l(i);if(Ks){at(!0);try{l(i)}finally{at(!1)}}}else v=i;return d.memoizedState=d.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},d.queue=r,r=r.dispatch=$4.bind(null,Ht,r),[d.memoizedState,r]},useRef:function(r){var i=ps();return r={current:r},i.memoizedState=r},useState:function(r){r=Vo(r);var i=r.queue,l=fb.bind(null,Ht,i);return i.dispatch=l,[r.memoizedState,l]},useDebugValue:b0,useDeferredValue:function(r,i){var l=ps();return v0(l,r,i)},useTransition:function(){var r=Vo(!1);return r=lb.bind(null,Ht,r.queue,!0,!1),ps().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,l){var d=Ht,v=ps();if(jn){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),mr===null)throw Error(s(349));(On&127)!==0||eo(d,i,l)}v.memoizedState=l;var w={value:l,getSnapshot:i};return v.queue=w,J2(vd.bind(null,d,w,r),[r]),d.flags|=2048,ml(9,{destroy:void 0},bd.bind(null,d,w,l,i),null),l},useId:function(){var r=ps(),i=mr.identifierPrefix;if(jn){var l=Oi,d=Li;l=(d&~(1<<32-bt(d)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Jr++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=Ju++,i="_"+i+"r_"+l.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:x0,useFormState:Ca,useActionState:Ca,useOptimistic:function(r){var i=ps();i.memoizedState=i.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=w0.bind(null,Ht,!0,l),l.dispatch=i,[r,i]},useMemoCache:fl,useCacheRefresh:function(){return ps().memoizedState=G4.bind(null,Ht)},useEffectEvent:function(r){var i=ps(),l={impl:r};return i.memoizedState=l,function(){if((Qn&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},_0={readContext:js,use:nc,useCallback:ib,useContext:js,useEffect:g0,useImperativeHandle:sb,useInsertionEffect:tb,useLayoutEffect:nb,useMemo:ab,useReducer:nh,useRef:$f,useState:function(){return nh(Aa)},useDebugValue:b0,useDeferredValue:function(r,i){var l=Rr();return ob(l,Wt.memoizedState,r,i)},useTransition:function(){var r=nh(Aa)[0],i=Rr().memoizedState;return[typeof r=="boolean"?r:Fo(r),i]},useSyncExternalStore:sh,useId:hb,useHostTransitionStatus:x0,useFormState:to,useActionState:to,useOptimistic:function(r,i){var l=Rr();return Uf(l,Wt,r,i)},useMemoCache:fl,useCacheRefresh:db};_0.useEffectEvent=eb;var bb={readContext:js,use:nc,useCallback:ib,useContext:js,useEffect:g0,useImperativeHandle:sb,useInsertionEffect:tb,useLayoutEffect:nb,useMemo:ab,useReducer:rh,useRef:$f,useState:function(){return rh(Aa)},useDebugValue:b0,useDeferredValue:function(r,i){var l=Rr();return Wt===null?v0(l,r,i):ob(l,Wt.memoizedState,r,i)},useTransition:function(){var r=rh(Aa)[0],i=Rr().memoizedState;return[typeof r=="boolean"?r:Fo(r),i]},useSyncExternalStore:sh,useId:hb,useHostTransitionStatus:x0,useFormState:oh,useActionState:oh,useOptimistic:function(r,i){var l=Rr();return Wt!==null?Uf(l,Wt,r,i):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:fl,useCacheRefresh:db};bb.useEffectEvent=eb;function S0(r,i,l,d){i=r.memoizedState,l=l(d,i),l=l==null?i:y({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var N0={enqueueSetState:function(r,i,l){r=r._reactInternals;var d=aa(),v=Xt(d);v.payload=i,l!=null&&(v.callback=l),i=yn(r,v,d),i!==null&&(Pi(i,r,d),Zn(i,r,d))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var d=aa(),v=Xt(d);v.tag=1,v.payload=i,l!=null&&(v.callback=l),i=yn(r,v,d),i!==null&&(Pi(i,r,d),Zn(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=aa(),d=Xt(l);d.tag=2,i!=null&&(d.callback=i),i=yn(r,d,l),i!==null&&(Pi(i,r,l),Zn(i,r,l))}};function vb(r,i,l,d,v,w,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,w,O):i.prototype&&i.prototype.isPureReactComponent?!$a(l,d)||!$a(v,w):!0}function yb(r,i,l,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==r&&N0.enqueueReplaceState(i,i.state,null)}function iu(r,i){var l=i;if("ref"in i){l={};for(var d in i)d!=="ref"&&(l[d]=i[d])}if(r=r.defaultProps){l===i&&(l=y({},l));for(var v in r)l[v]===void 0&&(l[v]=r[v])}return l}function xb(r){Yc(r)}function wb(r){console.error(r)}function _b(r){Yc(r)}function Xf(r,i){try{var l=r.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function Sb(r,i,l){try{var d=r.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function A0(r,i,l){return l=Xt(l),l.tag=3,l.payload={element:null},l.callback=function(){Xf(r,i)},l}function Nb(r){return r=Xt(r),r.tag=3,r}function Ab(r,i,l,d){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var w=d.value;r.payload=function(){return v(w)},r.callback=function(){Sb(i,l,d)}}var O=l.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){Sb(i,l,d),typeof v!="function"&&(cc===null?cc=new Set([this]):cc.add(this));var ne=d.stack;this.componentDidCatch(d.value,{componentStack:ne!==null?ne:""})})}function Y4(r,i,l,d,v){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=l.alternate,i!==null&&Oo(i,l,v,!0),l=Sr.current,l!==null){switch(l.tag){case 31:case 13:return qn===null?o1():l.alternate===null&&es===0&&(es=3),l.flags&=-257,l.flags|=65536,l.lanes=v,d===we?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([d]):i.add(d),Z0(r,d,v)),!1;case 22:return l.flags|=65536,d===we?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([d]):l.add(d)),Z0(r,d,v)),!1}throw Error(s(435,l.tag))}return Z0(r,d,v),o1(),!1}if(jn)return i=Sr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=v,d!==ra&&(r=Error(s(422),{cause:d}),Jl(ji(r,l)))):(d!==ra&&(i=Error(s(423),{cause:d}),Jl(ji(i,l))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,d=ji(d,l),v=A0(r.stateNode,d,v),ss(r,v),es!==4&&(es=2)),!1;var w=Error(s(520),{cause:d});if(w=ji(w,l),Ed===null?Ed=[w]:Ed.push(w),es!==4&&(es=2),i===null)return!0;d=ji(d,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,r=v&-v,l.lanes|=r,r=A0(l.stateNode,d,r),ss(l,r),!1;case 1:if(i=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(cc===null||!cc.has(w))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Nb(v),Ab(v,r,l,d),ss(l,v),!1}l=l.return}while(l!==null);return!1}var C0=Error(s(461)),ms=!1;function Qs(r,i,l,d){i.child=r===null?gn(i,null,l,d):pr(i,r.child,l,d)}function Cb(r,i,l,d,v){l=l.render;var w=i.ref;if("ref"in d){var O={};for(var ne in d)ne!=="ref"&&(O[ne]=d[ne])}else O=d;return Do(i),d=pd(r,i,l,O,w,v),ne=md(),r!==null&&!ms?(gd(r,i,v),gl(r,i,v)):(jn&&ne&&ud(i),i.flags|=1,Qs(r,i,d,v),i.child)}function Tb(r,i,l,d,v){if(r===null){var w=l.type;return typeof w=="function"&&!Hu(w)&&w.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=w,kb(r,i,w,d,v)):(r=Zl(l.type,null,d,i,i.mode,v),r.ref=i.ref,r.return=i,i.child=r)}if(w=r.child,!D0(r,v)){var O=w.memoizedProps;if(l=l.compare,l=l!==null?l:$a,l(O,d)&&r.ref===i.ref)return gl(r,i,v)}return i.flags|=1,r=ki(w,d),r.ref=i.ref,r.return=i,i.child=r}function kb(r,i,l,d,v){if(r!==null){var w=r.memoizedProps;if($a(w,d)&&r.ref===i.ref)if(ms=!1,i.pendingProps=d=w,D0(r,v))(r.flags&131072)!==0&&(ms=!0);else return i.lanes=r.lanes,gl(r,i,v)}return T0(r,i,l,d,v)}function jb(r,i,l,d){var v=d.children,w=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|l:l,r!==null){for(d=i.child=r.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~w}else d=0,i.child=null;return Eb(r,i,w,l,d)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&oe(i,w!==null?w.cachePool:null),w!==null?_r(i,w):Wn(),Kr(i);else return d=i.lanes=536870912,Eb(r,i,w!==null?w.baseLanes|l:l,l,d)}else w!==null?(oe(i,w.cachePool),_r(i,w),Qr(),i.memoizedState=null):(r!==null&&oe(i,null),Wn(),Qr());return Qs(r,i,v,l),i.child}function Sd(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Eb(r,i,l,d,v){var w=se();return w=w===null?null:{parent:Wr._currentValue,pool:w},i.memoizedState={baseLanes:l,cachePool:w},r!==null&&oe(i,null),Wn(),Kr(i),r!==null&&Oo(r,i,d,!0),i.childLanes=v,null}function Zf(r,i){return i=Qf({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function Mb(r,i,l){return pr(i,r.child,null,l),r=Zf(i,i.pendingProps),r.flags|=2,er(i),i.memoizedState=null,r}function X4(r,i,l){var d=i.pendingProps,v=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(jn){if(d.mode==="hidden")return r=Zf(i,d),i.lanes=536870912,Sd(null,r);if(Kn(i),(r=fr)?(r=Uv(r,Or),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:jo!==null?{id:Li,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},l=Wu(r),l.return=i,i.child=l,Ts=i,fr=null)):r=null,r===null)throw Eo(i);return i.lanes=536870912,null}return Zf(i,d)}var w=r.memoizedState;if(w!==null){var O=w.dehydrated;if(Kn(i),v)if(i.flags&256)i.flags&=-257,i=Mb(r,i,l);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(ms||Oo(r,i,l,!1),v=(l&r.childLanes)!==0,ms||v){if(d=mr,d!==null&&(O=nn(d,l),O!==0&&O!==w.retryLane))throw w.retryLane=O,Ka(r,O),Pi(d,r,O),C0;o1(),i=Mb(r,i,l)}else r=w.treeContext,fr=Ta(O.nextSibling),Ts=i,jn=!0,Zs=null,Or=!1,r!==null&&Pf(i,r),i=Zf(i,d),i.flags|=4096;return i}return r=ki(r.child,{mode:d.mode,children:d.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Kf(r,i){var l=i.ref;if(l===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(r===null||r.ref!==l)&&(i.flags|=4194816)}}function T0(r,i,l,d,v){return Do(i),l=pd(r,i,l,d,void 0,v),d=md(),r!==null&&!ms?(gd(r,i,v),gl(r,i,v)):(jn&&d&&ud(i),i.flags|=1,Qs(r,i,l,v),i.child)}function Lb(r,i,l,d,v,w){return Do(i),i.updateQueue=null,l=Ja(i,d,l,v),eh(r),d=md(),r!==null&&!ms?(gd(r,i,w),gl(r,i,w)):(jn&&d&&ud(i),i.flags|=1,Qs(r,i,l,w),i.child)}function Ob(r,i,l,d,v){if(Do(i),i.stateNode===null){var w=Cs,O=l.contextType;typeof O=="object"&&O!==null&&(w=js(O)),w=new l(d,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=N0,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=d,w.state=i.memoizedState,w.refs={},mt(i),O=l.contextType,w.context=typeof O=="object"&&O!==null?js(O):Cs,w.state=i.memoizedState,O=l.getDerivedStateFromProps,typeof O=="function"&&(S0(i,l,O,d),w.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&N0.enqueueReplaceState(w,w.state,null),Xr(i,d,w,v),or(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(r===null){w=i.stateNode;var ne=i.memoizedProps,me=iu(l,ne);w.props=me;var De=w.context,Ge=l.contextType;O=Cs,typeof Ge=="object"&&Ge!==null&&(O=js(Ge));var Je=l.getDerivedStateFromProps;Ge=typeof Je=="function"||typeof w.getSnapshotBeforeUpdate=="function",ne=i.pendingProps!==ne,Ge||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(ne||De!==O)&&yb(i,w,d,O),At=!1;var Ve=i.memoizedState;w.state=Ve,Xr(i,d,w,v),or(),De=i.memoizedState,ne||Ve!==De||At?(typeof Je=="function"&&(S0(i,l,Je,d),De=i.memoizedState),(me=At||vb(i,l,me,d,Ve,De,O))?(Ge||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=De),w.props=d,w.state=De,w.context=O,d=me):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{w=i.stateNode,wr(r,i),O=i.memoizedProps,Ge=iu(l,O),w.props=Ge,Je=i.pendingProps,Ve=w.context,De=l.contextType,me=Cs,typeof De=="object"&&De!==null&&(me=js(De)),ne=l.getDerivedStateFromProps,(De=typeof ne=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==Je||Ve!==me)&&yb(i,w,d,me),At=!1,Ve=i.memoizedState,w.state=Ve,Xr(i,d,w,v),or();var ze=i.memoizedState;O!==Je||Ve!==ze||At||r!==null&&r.dependencies!==null&&Zu(r.dependencies)?(typeof ne=="function"&&(S0(i,l,ne,d),ze=i.memoizedState),(Ge=At||vb(i,l,Ge,d,Ve,ze,me)||r!==null&&r.dependencies!==null&&Zu(r.dependencies))?(De||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,ze,me),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,ze,me)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&Ve===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&Ve===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=ze),w.props=d,w.state=ze,w.context=me,d=Ge):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&Ve===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&Ve===r.memoizedState||(i.flags|=1024),d=!1)}return w=d,Kf(r,i),d=(i.flags&128)!==0,w||d?(w=i.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,r!==null&&d?(i.child=pr(i,r.child,null,v),i.child=pr(i,null,l,v)):Qs(r,i,l,v),i.memoizedState=w.state,r=i.child):r=gl(r,i,v),r}function Db(r,i,l,d){return hl(),i.flags|=256,Qs(r,i,l,d),i.child}var k0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function j0(r){return{baseLanes:r,cachePool:ue()}}function E0(r,i,l){return r=r!==null?r.childLanes&~l:0,i&&(r|=ia),r}function Rb(r,i,l){var d=i.pendingProps,v=!1,w=(i.flags&128)!==0,O;if((O=w)||(O=r!==null&&r.memoizedState===null?!1:(Vn.current&2)!==0),O&&(v=!0,i.flags&=-129),O=(i.flags&32)!==0,i.flags&=-33,r===null){if(jn){if(v?Gr(i):Qr(),(r=fr)?(r=Uv(r,Or),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:jo!==null?{id:Li,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},l=Wu(r),l.return=i,i.child=l,Ts=i,fr=null)):r=null,r===null)throw Eo(i);return dm(r)?i.lanes=32:i.lanes=536870912,null}var ne=d.children;return d=d.fallback,v?(Qr(),v=i.mode,ne=Qf({mode:"hidden",children:ne},v),d=ko(d,v,l,null),ne.return=i,d.return=i,ne.sibling=d,i.child=ne,d=i.child,d.memoizedState=j0(l),d.childLanes=E0(r,O,l),i.memoizedState=k0,Sd(null,d)):(Gr(i),M0(i,ne))}var me=r.memoizedState;if(me!==null&&(ne=me.dehydrated,ne!==null)){if(w)i.flags&256?(Gr(i),i.flags&=-257,i=L0(r,i,l)):i.memoizedState!==null?(Qr(),i.child=r.child,i.flags|=128,i=null):(Qr(),ne=d.fallback,v=i.mode,d=Qf({mode:"visible",children:d.children},v),ne=ko(ne,v,l,null),ne.flags|=2,d.return=i,ne.return=i,d.sibling=ne,i.child=d,pr(i,r.child,null,l),d=i.child,d.memoizedState=j0(l),d.childLanes=E0(r,O,l),i.memoizedState=k0,i=Sd(null,d));else if(Gr(i),dm(ne)){if(O=ne.nextSibling&&ne.nextSibling.dataset,O)var De=O.dgst;O=De,d=Error(s(419)),d.stack="",d.digest=O,Jl({value:d,source:null,stack:null}),i=L0(r,i,l)}else if(ms||Oo(r,i,l,!1),O=(l&r.childLanes)!==0,ms||O){if(O=mr,O!==null&&(d=nn(O,l),d!==0&&d!==me.retryLane))throw me.retryLane=d,Ka(r,d),Pi(O,r,d),C0;hm(ne)||o1(),i=L0(r,i,l)}else hm(ne)?(i.flags|=192,i.child=r.child,i=null):(r=me.treeContext,fr=Ta(ne.nextSibling),Ts=i,jn=!0,Zs=null,Or=!1,r!==null&&Pf(i,r),i=M0(i,d.children),i.flags|=4096);return i}return v?(Qr(),ne=d.fallback,v=i.mode,me=r.child,De=me.sibling,d=ki(me,{mode:"hidden",children:d.children}),d.subtreeFlags=me.subtreeFlags&65011712,De!==null?ne=ki(De,ne):(ne=ko(ne,v,l,null),ne.flags|=2),ne.return=i,d.return=i,d.sibling=ne,i.child=d,Sd(null,d),d=i.child,ne=r.child.memoizedState,ne===null?ne=j0(l):(v=ne.cachePool,v!==null?(me=Wr._currentValue,v=v.parent!==me?{parent:me,pool:me}:v):v=ue(),ne={baseLanes:ne.baseLanes|l,cachePool:v}),d.memoizedState=ne,d.childLanes=E0(r,O,l),i.memoizedState=k0,Sd(r.child,d)):(Gr(i),l=r.child,r=l.sibling,l=ki(l,{mode:"visible",children:d.children}),l.return=i,l.sibling=null,r!==null&&(O=i.deletions,O===null?(i.deletions=[r],i.flags|=16):O.push(r)),i.child=l,i.memoizedState=null,l)}function M0(r,i){return i=Qf({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Qf(r,i){return r=Fs(22,r,null,i),r.lanes=0,r}function L0(r,i,l){return pr(i,r.child,null,l),r=M0(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Ib(r,i,l){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),ec(r.return,i,l)}function O0(r,i,l,d,v,w){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:v,treeForkCount:w}:(O.isBackwards=i,O.rendering=null,O.renderingStartTime=0,O.last=d,O.tail=l,O.tailMode=v,O.treeForkCount=w)}function Fb(r,i,l){var d=i.pendingProps,v=d.revealOrder,w=d.tail;d=d.children;var O=Vn.current,ne=(O&2)!==0;if(ne?(O=O&1|2,i.flags|=128):O&=1,$(Vn,O),Qs(r,i,d,l),d=jn?eu:0,!ne&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ib(r,l,i);else if(r.tag===19)Ib(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(l=i.child,v=null;l!==null;)r=l.alternate,r!==null&&Bs(r)===null&&(v=l),l=l.sibling;l=v,l===null?(v=i.child,i.child=null):(v=l.sibling,l.sibling=null),O0(i,!1,v,l,w,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=i.child,i.child=null;v!==null;){if(r=v.alternate,r!==null&&Bs(r)===null){i.child=v;break}r=v.sibling,v.sibling=l,l=v,v=r}O0(i,!0,l,null,w,d);break;case"together":O0(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function gl(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),lc|=i.lanes,(l&i.childLanes)===0)if(r!==null){if(Oo(r,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,l=ki(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=ki(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function D0(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Zu(r)))}function Z4(r,i,l){switch(i.tag){case 3:de(i,i.stateNode.containerInfo),Lo(i,Wr,r.memoizedState.cache),hl();break;case 27:case 5:Ne(i);break;case 4:de(i,i.stateNode.containerInfo);break;case 10:Lo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Kn(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Gr(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Rb(r,i,l):(Gr(i),r=gl(r,i,l),r!==null?r.sibling:null);Gr(i);break;case 19:var v=(r.flags&128)!==0;if(d=(l&i.childLanes)!==0,d||(Oo(r,i,l,!1),d=(l&i.childLanes)!==0),v){if(d)return Fb(r,i,l);i.flags|=128}if(v=i.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),$(Vn,Vn.current),d)break;return null;case 22:return i.lanes=0,jb(r,i,l,i.pendingProps);case 24:Lo(i,Wr,r.memoizedState.cache)}return gl(r,i,l)}function Vb(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps)ms=!0;else{if(!D0(r,l)&&(i.flags&128)===0)return ms=!1,Z4(r,i,l);ms=(r.flags&131072)!==0}else ms=!1,jn&&(i.flags&1048576)!==0&&Bf(i,eu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(r=ke(i.elementType),i.type=r,typeof r=="function")Hu(r)?(d=iu(r,d),i.tag=1,i=Ob(null,i,r,d,l)):(i.tag=0,i=T0(null,i,r,d,l));else{if(r!=null){var v=r.$$typeof;if(v===V){i.tag=11,i=Cb(null,i,r,d,l);break e}else if(v===H){i.tag=14,i=Tb(null,i,r,d,l);break e}}throw i=P(r)||r,Error(s(306,i,""))}}return i;case 0:return T0(r,i,i.type,i.pendingProps,l);case 1:return d=i.type,v=iu(d,i.pendingProps),Ob(r,i,d,v,l);case 3:e:{if(de(i,i.stateNode.containerInfo),r===null)throw Error(s(387));d=i.pendingProps;var w=i.memoizedState;v=w.element,wr(r,i),Xr(i,d,null,l);var O=i.memoizedState;if(d=O.cache,Lo(i,Wr,d),d!==w.cache&&dl(i,[Wr],l,!0),or(),d=O.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:O.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=Db(r,i,d,l);break e}else if(d!==v){v=ji(Error(s(424)),i),Jl(v),i=Db(r,i,d,l);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(fr=Ta(r.firstChild),Ts=i,jn=!0,Zs=null,Or=!0,l=gn(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(hl(),d===v){i=gl(r,i,l);break e}Qs(r,i,d,l)}i=i.child}return i;case 26:return Kf(r,i),r===null?(l=Xv(i.type,null,i.pendingProps,null))?i.memoizedState=l:jn||(l=i.type,r=i.pendingProps,d=p1(ae.current).createElement(l),d[Sn]=i,d[rn]=r,Js(d,l,r),sn(d),i.stateNode=d):i.memoizedState=Xv(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Ne(i),r===null&&jn&&(d=i.stateNode=Gv(i.type,i.pendingProps,ae.current),Ts=i,Or=!0,v=fr,fc(i.type)?(fm=v,fr=Ta(d.firstChild)):fr=v),Qs(r,i,i.pendingProps.children,l),Kf(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&jn&&((v=d=fr)&&(d=C_(d,i.type,i.pendingProps,Or),d!==null?(i.stateNode=d,Ts=i,fr=Ta(d.firstChild),Or=!1,v=!0):v=!1),v||Eo(i)),Ne(i),v=i.type,w=i.pendingProps,O=r!==null?r.memoizedProps:null,d=w.children,lm(v,w)?d=null:O!==null&&lm(v,O)&&(i.flags|=32),i.memoizedState!==null&&(v=pd(r,i,m0,null,null,l),Vd._currentValue=v),Kf(r,i),Qs(r,i,d,l),i.child;case 6:return r===null&&jn&&((r=l=fr)&&(l=T_(l,i.pendingProps,Or),l!==null?(i.stateNode=l,Ts=i,fr=null,r=!0):r=!1),r||Eo(i)),null;case 13:return Rb(r,i,l);case 4:return de(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=pr(i,null,d,l):Qs(r,i,d,l),i.child;case 11:return Cb(r,i,i.type,i.pendingProps,l);case 7:return Qs(r,i,i.pendingProps,l),i.child;case 8:return Qs(r,i,i.pendingProps.children,l),i.child;case 12:return Qs(r,i,i.pendingProps.children,l),i.child;case 10:return d=i.pendingProps,Lo(i,i.type,d.value),Qs(r,i,d.children,l),i.child;case 9:return v=i.type._context,d=i.pendingProps.children,Do(i),v=js(v),d=d(v),i.flags|=1,Qs(r,i,d,l),i.child;case 14:return Tb(r,i,i.type,i.pendingProps,l);case 15:return kb(r,i,i.type,i.pendingProps,l);case 19:return Fb(r,i,l);case 31:return X4(r,i,l);case 22:return jb(r,i,l,i.pendingProps);case 24:return Do(i),d=js(Wr),r===null?(v=se(),v===null&&(v=mr,w=tc(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=l),v=w),i.memoizedState={parent:d,cache:v},mt(i),Lo(i,Wr,v)):((r.lanes&l)!==0&&(wr(r,i),Xr(i,null,null,l),or()),v=r.memoizedState,w=i.memoizedState,v.parent!==d?(v={parent:d,cache:d},i.memoizedState=v,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=v),Lo(i,Wr,d)):(d=w.cache,Lo(i,Wr,d),d!==v.cache&&dl(i,[Wr],l,!0))),Qs(r,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function bl(r){r.flags|=4}function R0(r,i,l,d,v){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(hv())r.flags|=8192;else throw Ue=we,Le}else r.flags&=-16777217}function Bb(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!e5(i))if(hv())r.flags|=8192;else throw Ue=we,Le}function Jf(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?ft():536870912,r.lanes|=i,hh|=i)}function Nd(r,i){if(!jn)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Nr(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,d=0;if(i)for(var v=r.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=d,r.childLanes=l,i}function K4(r,i,l){var d=i.pendingProps;switch(Yu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(i),null;case 1:return Nr(i),null;case 3:return l=i.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),Di(Wr),xe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(ks(i)?bl(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,dd())),Nr(i),null;case 26:var v=i.type,w=i.memoizedState;return r===null?(bl(i),w!==null?(Nr(i),Bb(i,w)):(Nr(i),R0(i,v,null,d,l))):w?w!==r.memoizedState?(bl(i),Nr(i),Bb(i,w)):(Nr(i),i.flags&=-16777217):(r=r.memoizedProps,r!==d&&bl(i),Nr(i),R0(i,v,r,d,l)),null;case 27:if(Be(i),l=ae.current,v=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&bl(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return Nr(i),null}r=G.current,ks(i)?hd(i):(r=Gv(v,d,l),i.stateNode=r,bl(i))}return Nr(i),null;case 5:if(Be(i),v=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==d&&bl(i);else{if(!d){if(i.stateNode===null)throw Error(s(166));return Nr(i),null}if(w=G.current,ks(i))hd(i);else{var O=p1(ae.current);switch(w){case 1:w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=O.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?O.createElement("select",{is:d.is}):O.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?O.createElement(v,{is:d.is}):O.createElement(v)}}w[Sn]=i,w[rn]=d;e:for(O=i.child;O!==null;){if(O.tag===5||O.tag===6)w.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===i)break e;for(;O.sibling===null;){if(O.return===null||O.return===i)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}i.stateNode=w;e:switch(Js(w,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&bl(i)}}return Nr(i),R0(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,l),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==d&&bl(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(s(166));if(r=ae.current,ks(i)){if(r=i.stateNode,l=i.memoizedProps,d=null,v=Ts,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}r[Sn]=i,r=!!(r.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Rv(r.nodeValue,l)),r||Eo(i,!0)}else r=p1(r).createTextNode(d),r[Sn]=i,i.stateNode=r}return Nr(i),null;case 31:if(l=i.memoizedState,r===null||r.memoizedState!==null){if(d=ks(i),l!==null){if(r===null){if(!d)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Sn]=i}else hl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nr(i),r=!1}else l=dd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return i.flags&256?(er(i),i):(er(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Nr(i),null;case 13:if(d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=ks(i),d!==null&&d.dehydrated!==null){if(r===null){if(!v)throw Error(s(318));if(v=i.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Sn]=i}else hl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nr(i),v=!1}else v=dd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return i.flags&256?(er(i),i):(er(i),null)}return er(i),(i.flags&128)!==0?(i.lanes=l,i):(l=d!==null,r=r!==null&&r.memoizedState!==null,l&&(d=i.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==v&&(d.flags|=2048)),l!==r&&l&&(i.child.flags|=8192),Jf(i,i.updateQueue),Nr(i),null);case 4:return xe(),r===null&&rm(i.stateNode.containerInfo),Nr(i),null;case 10:return Di(i.type),Nr(i),null;case 19:if(M(Vn),d=i.memoizedState,d===null)return Nr(i),null;if(v=(i.flags&128)!==0,w=d.rendering,w===null)if(v)Nd(d,!1);else{if(es!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=Bs(r),w!==null){for(i.flags|=128,Nd(d,!1),r=w.updateQueue,i.updateQueue=r,Jf(i,r),i.subtreeFlags=0,r=l,l=i.child;l!==null;)Qc(l,r),l=l.sibling;return $(Vn,Vn.current&1|2),jn&&vi(i,d.treeForkCount),i.child}r=r.sibling}d.tail!==null&&vt()>s1&&(i.flags|=128,v=!0,Nd(d,!1),i.lanes=4194304)}else{if(!v)if(r=Bs(w),r!==null){if(i.flags|=128,v=!0,r=r.updateQueue,i.updateQueue=r,Jf(i,r),Nd(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!jn)return Nr(i),null}else 2*vt()-d.renderingStartTime>s1&&l!==536870912&&(i.flags|=128,v=!0,Nd(d,!1),i.lanes=4194304);d.isBackwards?(w.sibling=i.child,i.child=w):(r=d.last,r!==null?r.sibling=w:i.child=w,d.last=w)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=vt(),r.sibling=null,l=Vn.current,$(Vn,v?l&1|2:l&1),jn&&vi(i,d.treeForkCount),r):(Nr(i),null);case 22:case 23:return er(i),is(),d=i.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(l&536870912)!==0&&(i.flags&128)===0&&(Nr(i),i.subtreeFlags&6&&(i.flags|=8192)):Nr(i),l=i.updateQueue,l!==null&&Jf(i,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==l&&(i.flags|=2048),r!==null&&M(Q),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Di(Wr),Nr(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function Q4(r,i){switch(Yu(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Di(Wr),xe(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Be(i),null;case 31:if(i.memoizedState!==null){if(er(i),i.alternate===null)throw Error(s(340));hl()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(er(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));hl()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return M(Vn),null;case 4:return xe(),null;case 10:return Di(i.type),null;case 22:case 23:return er(i),is(),r!==null&&M(Q),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Di(Wr),null;case 25:return null;default:return null}}function Pb(r,i){switch(Yu(i),i.tag){case 3:Di(Wr),xe();break;case 26:case 27:case 5:Be(i);break;case 4:xe();break;case 31:i.memoizedState!==null&&er(i);break;case 13:er(i);break;case 19:M(Vn);break;case 10:Di(i.type);break;case 22:case 23:er(i),is(),r!==null&&M(Q);break;case 24:Di(Wr)}}function Ad(r,i){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var v=d.next;l=v;do{if((l.tag&r)===r){d=void 0;var w=l.create,O=l.inst;d=w(),O.destroy=d}l=l.next}while(l!==v)}}catch(ne){nr(i,i.return,ne)}}function ac(r,i,l){try{var d=i.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var w=v.next;d=w;do{if((d.tag&r)===r){var O=d.inst,ne=O.destroy;if(ne!==void 0){O.destroy=void 0,v=i;var me=l,De=ne;try{De()}catch(Ge){nr(v,me,Ge)}}}d=d.next}while(d!==w)}}catch(Ge){nr(i,i.return,Ge)}}function zb(r){var i=r.updateQueue;if(i!==null){var l=r.stateNode;try{Zr(i,l)}catch(d){nr(r,r.return,d)}}}function qb(r,i,l){l.props=iu(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(d){nr(r,i,d)}}function Cd(r,i){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof l=="function"?r.refCleanup=l(d):l.current=d}}catch(v){nr(r,i,v)}}function Bo(r,i){var l=r.ref,d=r.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(v){nr(r,i,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){nr(r,i,v)}else l.current=null}function Ub(r){var i=r.type,l=r.memoizedProps,d=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(v){nr(r,r.return,v)}}function I0(r,i,l){try{var d=r.stateNode;x_(d,r.type,l,i),d[rn]=i}catch(v){nr(r,r.return,v)}}function Hb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&fc(r.type)||r.tag===4}function F0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Hb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&fc(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function V0(r,i,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(r),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Ki));else if(d!==4&&(d===27&&fc(r.type)&&(l=r.stateNode,i=null),r=r.child,r!==null))for(V0(r,i,l),r=r.sibling;r!==null;)V0(r,i,l),r=r.sibling}function e1(r,i,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(d!==4&&(d===27&&fc(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(e1(r,i,l),r=r.sibling;r!==null;)e1(r,i,l),r=r.sibling}function Wb(r){var i=r.stateNode,l=r.memoizedProps;try{for(var d=r.type,v=i.attributes;v.length;)i.removeAttributeNode(v[0]);Js(i,d,l),i[Sn]=r,i[rn]=l}catch(w){nr(r,r.return,w)}}var vl=!1,gs=!1,B0=!1,Gb=typeof WeakSet=="function"?WeakSet:Set,Ps=null;function J4(r,i){if(r=r.containerInfo,am=w1,r=Xa(r),_a(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var v=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var O=0,ne=-1,me=-1,De=0,Ge=0,Je=r,Ve=null;t:for(;;){for(var ze;Je!==l||v!==0&&Je.nodeType!==3||(ne=O+v),Je!==w||d!==0&&Je.nodeType!==3||(me=O+d),Je.nodeType===3&&(O+=Je.nodeValue.length),(ze=Je.firstChild)!==null;)Ve=Je,Je=ze;for(;;){if(Je===r)break t;if(Ve===l&&++De===v&&(ne=O),Ve===w&&++Ge===d&&(me=O),(ze=Je.nextSibling)!==null)break;Je=Ve,Ve=Je.parentNode}Je=ze}l=ne===-1||me===-1?null:{start:ne,end:me}}else l=null}l=l||{start:0,end:0}}else l=null;for(om={focusedElem:r,selectionRange:l},w1=!1,Ps=i;Ps!==null;)if(i=Ps,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Ps=r;else for(;Ps!==null;){switch(i=Ps,w=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)v=r[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,l=i,v=w.memoizedProps,w=w.memoizedState,d=l.stateNode;try{var Lt=iu(l.type,v);r=d.getSnapshotBeforeUpdate(Lt,w),d.__reactInternalSnapshotBeforeUpdate=r}catch(Zt){nr(l,l.return,Zt)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,l=r.nodeType,l===9)um(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":um(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Ps=r;break}Ps=i.return}}function $b(r,i,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:xl(r,l),d&4&&Ad(5,l);break;case 1:if(xl(r,l),d&4)if(r=l.stateNode,i===null)try{r.componentDidMount()}catch(O){nr(l,l.return,O)}else{var v=iu(l.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(v,i,r.__reactInternalSnapshotBeforeUpdate)}catch(O){nr(l,l.return,O)}}d&64&&zb(l),d&512&&Cd(l,l.return);break;case 3:if(xl(r,l),d&64&&(r=l.updateQueue,r!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Zr(r,i)}catch(O){nr(l,l.return,O)}}break;case 27:i===null&&d&4&&Wb(l);case 26:case 5:xl(r,l),i===null&&d&4&&Ub(l),d&512&&Cd(l,l.return);break;case 12:xl(r,l);break;case 31:xl(r,l),d&4&&Zb(r,l);break;case 13:xl(r,l),d&4&&Kb(r,l),d&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=l_.bind(null,l),k_(r,l))));break;case 22:if(d=l.memoizedState!==null||vl,!d){i=i!==null&&i.memoizedState!==null||gs,v=vl;var w=gs;vl=d,(gs=i)&&!w?wl(r,l,(l.subtreeFlags&8772)!==0):xl(r,l),vl=v,gs=w}break;case 30:break;default:xl(r,l)}}function Yb(r){var i=r.alternate;i!==null&&(r.alternate=null,Yb(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&_t(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ir=null,Ii=!1;function yl(r,i,l){for(l=l.child;l!==null;)Xb(r,i,l),l=l.sibling}function Xb(r,i,l){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(ot,l)}catch{}switch(l.tag){case 26:gs||Bo(l,i),yl(r,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:gs||Bo(l,i);var d=Ir,v=Ii;fc(l.type)&&(Ir=l.stateNode,Ii=!1),yl(r,i,l),Rd(l.stateNode),Ir=d,Ii=v;break;case 5:gs||Bo(l,i);case 6:if(d=Ir,v=Ii,Ir=null,yl(r,i,l),Ir=d,Ii=v,Ir!==null)if(Ii)try{(Ir.nodeType===9?Ir.body:Ir.nodeName==="HTML"?Ir.ownerDocument.body:Ir).removeChild(l.stateNode)}catch(w){nr(l,i,w)}else try{Ir.removeChild(l.stateNode)}catch(w){nr(l,i,w)}break;case 18:Ir!==null&&(Ii?(r=Ir,zv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),yh(r)):zv(Ir,l.stateNode));break;case 4:d=Ir,v=Ii,Ir=l.stateNode.containerInfo,Ii=!0,yl(r,i,l),Ir=d,Ii=v;break;case 0:case 11:case 14:case 15:ac(2,l,i),gs||ac(4,l,i),yl(r,i,l);break;case 1:gs||(Bo(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"&&qb(l,i,d)),yl(r,i,l);break;case 21:yl(r,i,l);break;case 22:gs=(d=gs)||l.memoizedState!==null,yl(r,i,l),gs=d;break;default:yl(r,i,l)}}function Zb(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{yh(r)}catch(l){nr(i,i.return,l)}}}function Kb(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{yh(r)}catch(l){nr(i,i.return,l)}}function e_(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Gb),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Gb),i;default:throw Error(s(435,r.tag))}}function t1(r,i){var l=e_(r);i.forEach(function(d){if(!l.has(d)){l.add(d);var v=c_.bind(null,r,d);d.then(v,v)}})}function Fi(r,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var v=l[d],w=r,O=i,ne=O;e:for(;ne!==null;){switch(ne.tag){case 27:if(fc(ne.type)){Ir=ne.stateNode,Ii=!1;break e}break;case 5:Ir=ne.stateNode,Ii=!1;break e;case 3:case 4:Ir=ne.stateNode.containerInfo,Ii=!0;break e}ne=ne.return}if(Ir===null)throw Error(s(160));Xb(w,O,v),Ir=null,Ii=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Qb(i,r),i=i.sibling}var ro=null;function Qb(r,i){var l=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Fi(i,r),Vi(r),d&4&&(ac(3,r,r.return),Ad(3,r),ac(5,r,r.return));break;case 1:Fi(i,r),Vi(r),d&512&&(gs||l===null||Bo(l,l.return)),d&64&&vl&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var v=ro;if(Fi(i,r),Vi(r),d&512&&(gs||l===null||Bo(l,l.return)),d&4){var w=l!==null?l.memoizedState:null;if(d=r.memoizedState,l===null)if(d===null)if(r.stateNode===null){e:{d=r.type,l=r.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":w=v.getElementsByTagName("title")[0],(!w||w[Ze]||w[Sn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(d),v.head.insertBefore(w,v.querySelector("head > title"))),Js(w,d,l),w[Sn]=r,sn(w),d=w;break e;case"link":var O=Qv("link","href",v).get(d+(l.href||""));if(O){for(var ne=0;ne<O.length;ne++)if(w=O[ne],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){O.splice(ne,1);break t}}w=v.createElement(d),Js(w,d,l),v.head.appendChild(w);break;case"meta":if(O=Qv("meta","content",v).get(d+(l.content||""))){for(ne=0;ne<O.length;ne++)if(w=O[ne],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){O.splice(ne,1);break t}}w=v.createElement(d),Js(w,d,l),v.head.appendChild(w);break;default:throw Error(s(468,d))}w[Sn]=r,sn(w),d=w}r.stateNode=d}else Jv(v,r.type,r.stateNode);else r.stateNode=Kv(v,d,r.memoizedProps);else w!==d?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,d===null?Jv(v,r.type,r.stateNode):Kv(v,d,r.memoizedProps)):d===null&&r.stateNode!==null&&I0(r,r.memoizedProps,l.memoizedProps)}break;case 27:Fi(i,r),Vi(r),d&512&&(gs||l===null||Bo(l,l.return)),l!==null&&d&4&&I0(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Fi(i,r),Vi(r),d&512&&(gs||l===null||Bo(l,l.return)),r.flags&32){v=r.stateNode;try{Zi(v,"")}catch(Lt){nr(r,r.return,Lt)}}d&4&&r.stateNode!=null&&(v=r.memoizedProps,I0(r,v,l!==null?l.memoizedProps:v)),d&1024&&(B0=!0);break;case 6:if(Fi(i,r),Vi(r),d&4){if(r.stateNode===null)throw Error(s(162));d=r.memoizedProps,l=r.stateNode;try{l.nodeValue=d}catch(Lt){nr(r,r.return,Lt)}}break;case 3:if(b1=null,v=ro,ro=m1(i.containerInfo),Fi(i,r),ro=v,Vi(r),d&4&&l!==null&&l.memoizedState.isDehydrated)try{yh(i.containerInfo)}catch(Lt){nr(r,r.return,Lt)}B0&&(B0=!1,Jb(r));break;case 4:d=ro,ro=m1(r.stateNode.containerInfo),Fi(i,r),Vi(r),ro=d;break;case 12:Fi(i,r),Vi(r);break;case 31:Fi(i,r),Vi(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,t1(r,d)));break;case 13:Fi(i,r),Vi(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(r1=vt()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,t1(r,d)));break;case 22:v=r.memoizedState!==null;var me=l!==null&&l.memoizedState!==null,De=vl,Ge=gs;if(vl=De||v,gs=Ge||me,Fi(i,r),gs=Ge,vl=De,Vi(r),d&8192)e:for(i=r.stateNode,i._visibility=v?i._visibility&-2:i._visibility|1,v&&(l===null||me||vl||gs||au(r)),l=null,i=r;;){if(i.tag===5||i.tag===26){if(l===null){me=l=i;try{if(w=me.stateNode,v)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{ne=me.stateNode;var Je=me.memoizedProps.style,Ve=Je!=null&&Je.hasOwnProperty("display")?Je.display:null;ne.style.display=Ve==null||typeof Ve=="boolean"?"":(""+Ve).trim()}}catch(Lt){nr(me,me.return,Lt)}}}else if(i.tag===6){if(l===null){me=i;try{me.stateNode.nodeValue=v?"":me.memoizedProps}catch(Lt){nr(me,me.return,Lt)}}}else if(i.tag===18){if(l===null){me=i;try{var ze=me.stateNode;v?qv(ze,!0):qv(me.stateNode,!1)}catch(Lt){nr(me,me.return,Lt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=r.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,t1(r,l))));break;case 19:Fi(i,r),Vi(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,t1(r,d)));break;case 30:break;case 21:break;default:Fi(i,r),Vi(r)}}function Vi(r){var i=r.flags;if(i&2){try{for(var l,d=r.return;d!==null;){if(Hb(d)){l=d;break}d=d.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var v=l.stateNode,w=F0(r);e1(r,w,v);break;case 5:var O=l.stateNode;l.flags&32&&(Zi(O,""),l.flags&=-33);var ne=F0(r);e1(r,ne,O);break;case 3:case 4:var me=l.stateNode.containerInfo,De=F0(r);V0(r,De,me);break;default:throw Error(s(161))}}catch(Ge){nr(r,r.return,Ge)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Jb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Jb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function xl(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)$b(r,i.alternate,i),i=i.sibling}function au(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:ac(4,i,i.return),au(i);break;case 1:Bo(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&qb(i,i.return,l),au(i);break;case 27:Rd(i.stateNode);case 26:case 5:Bo(i,i.return),au(i);break;case 22:i.memoizedState===null&&au(i);break;case 30:au(i);break;default:au(i)}r=r.sibling}}function wl(r,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,v=r,w=i,O=w.flags;switch(w.tag){case 0:case 11:case 15:wl(v,w,l),Ad(4,w);break;case 1:if(wl(v,w,l),d=w,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(De){nr(d,d.return,De)}if(d=w,v=d.updateQueue,v!==null){var ne=d.stateNode;try{var me=v.shared.hiddenCallbacks;if(me!==null)for(v.shared.hiddenCallbacks=null,v=0;v<me.length;v++)Vs(me[v],ne)}catch(De){nr(d,d.return,De)}}l&&O&64&&zb(w),Cd(w,w.return);break;case 27:Wb(w);case 26:case 5:wl(v,w,l),l&&d===null&&O&4&&Ub(w),Cd(w,w.return);break;case 12:wl(v,w,l);break;case 31:wl(v,w,l),l&&O&4&&Zb(v,w);break;case 13:wl(v,w,l),l&&O&4&&Kb(v,w);break;case 22:w.memoizedState===null&&wl(v,w,l),Cd(w,w.return);break;case 30:break;default:wl(v,w,l)}i=i.sibling}}function P0(r,i){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&tu(l))}function z0(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&tu(r))}function so(r,i,l,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ev(r,i,l,d),i=i.sibling}function ev(r,i,l,d){var v=i.flags;switch(i.tag){case 0:case 11:case 15:so(r,i,l,d),v&2048&&Ad(9,i);break;case 1:so(r,i,l,d);break;case 3:so(r,i,l,d),v&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&tu(r)));break;case 12:if(v&2048){so(r,i,l,d),r=i.stateNode;try{var w=i.memoizedProps,O=w.id,ne=w.onPostCommit;typeof ne=="function"&&ne(O,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(me){nr(i,i.return,me)}}else so(r,i,l,d);break;case 31:so(r,i,l,d);break;case 13:so(r,i,l,d);break;case 23:break;case 22:w=i.stateNode,O=i.alternate,i.memoizedState!==null?w._visibility&2?so(r,i,l,d):Td(r,i):w._visibility&2?so(r,i,l,d):(w._visibility|=2,lh(r,i,l,d,(i.subtreeFlags&10256)!==0||!1)),v&2048&&P0(O,i);break;case 24:so(r,i,l,d),v&2048&&z0(i.alternate,i);break;default:so(r,i,l,d)}}function lh(r,i,l,d,v){for(v=v&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=r,O=i,ne=l,me=d,De=O.flags;switch(O.tag){case 0:case 11:case 15:lh(w,O,ne,me,v),Ad(8,O);break;case 23:break;case 22:var Ge=O.stateNode;O.memoizedState!==null?Ge._visibility&2?lh(w,O,ne,me,v):Td(w,O):(Ge._visibility|=2,lh(w,O,ne,me,v)),v&&De&2048&&P0(O.alternate,O);break;case 24:lh(w,O,ne,me,v),v&&De&2048&&z0(O.alternate,O);break;default:lh(w,O,ne,me,v)}i=i.sibling}}function Td(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=r,d=i,v=d.flags;switch(d.tag){case 22:Td(l,d),v&2048&&P0(d.alternate,d);break;case 24:Td(l,d),v&2048&&z0(d.alternate,d);break;default:Td(l,d)}i=i.sibling}}var kd=8192;function ch(r,i,l){if(r.subtreeFlags&kd)for(r=r.child;r!==null;)tv(r,i,l),r=r.sibling}function tv(r,i,l){switch(r.tag){case 26:ch(r,i,l),r.flags&kd&&r.memoizedState!==null&&P_(l,ro,r.memoizedState,r.memoizedProps);break;case 5:ch(r,i,l);break;case 3:case 4:var d=ro;ro=m1(r.stateNode.containerInfo),ch(r,i,l),ro=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=kd,kd=16777216,ch(r,i,l),kd=d):ch(r,i,l));break;default:ch(r,i,l)}}function nv(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function jd(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];Ps=d,sv(d,r)}nv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)rv(r),r=r.sibling}function rv(r){switch(r.tag){case 0:case 11:case 15:jd(r),r.flags&2048&&ac(9,r,r.return);break;case 3:jd(r);break;case 12:jd(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,n1(r)):jd(r);break;default:jd(r)}}function n1(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];Ps=d,sv(d,r)}nv(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:ac(8,i,i.return),n1(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,n1(i));break;default:n1(i)}r=r.sibling}}function sv(r,i){for(;Ps!==null;){var l=Ps;switch(l.tag){case 0:case 11:case 15:ac(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:tu(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Ps=d;else e:for(l=r;Ps!==null;){d=Ps;var v=d.sibling,w=d.return;if(Yb(d),d===l){Ps=null;break e}if(v!==null){v.return=w,Ps=v;break e}Ps=w}}}var t_={getCacheForType:function(r){var i=js(Wr),l=i.data.get(r);return l===void 0&&(l=r(),i.data.set(r,l)),l},cacheSignal:function(){return js(Wr).controller.signal}},n_=typeof WeakMap=="function"?WeakMap:Map,Qn=0,mr=null,En=null,On=0,tr=0,sa=null,oc=!1,uh=!1,q0=!1,_l=0,es=0,lc=0,ou=0,U0=0,ia=0,hh=0,Ed=null,Bi=null,H0=!1,r1=0,iv=0,s1=1/0,i1=null,cc=null,Ms=0,uc=null,dh=null,Sl=0,W0=0,G0=null,av=null,Md=0,$0=null;function aa(){return(Qn&2)!==0&&On!==0?On&-On:X.T!==null?J0():fn()}function ov(){if(ia===0)if((On&536870912)===0||jn){var r=Jt;Jt<<=1,(Jt&3932160)===0&&(Jt=262144),ia=r}else ia=536870912;return r=Sr.current,r!==null&&(r.flags|=32),ia}function Pi(r,i,l){(r===mr&&(tr===2||tr===9)||r.cancelPendingCommit!==null)&&(fh(r,0),hc(r,On,ia,!1)),Fe(r,l),((Qn&2)===0||r!==mr)&&(r===mr&&((Qn&2)===0&&(ou|=l),es===4&&hc(r,On,ia,!1)),Po(r))}function lv(r,i,l){if((Qn&6)!==0)throw Error(s(327));var d=!l&&(i&127)===0&&(i&r.expiredLanes)===0||wn(r,i),v=d?i_(r,i):X0(r,i,!0),w=d;do{if(v===0){uh&&!d&&hc(r,i,0,!1);break}else{if(l=r.current.alternate,w&&!r_(l)){v=X0(r,i,!1),w=!1;continue}if(v===2){if(w=i,r.errorRecoveryDisabledLanes&w)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){i=O;e:{var ne=r;v=Ed;var me=ne.current.memoizedState.isDehydrated;if(me&&(fh(ne,O).flags|=256),O=X0(ne,O,!1),O!==2){if(q0&&!me){ne.errorRecoveryDisabledLanes|=w,ou|=w,v=4;break e}w=Bi,Bi=v,w!==null&&(Bi===null?Bi=w:Bi.push.apply(Bi,w))}v=O}if(w=!1,v!==2)continue}}if(v===1){fh(r,0),hc(r,i,0,!0);break}e:{switch(d=r,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:hc(d,i,ia,!oc);break e;case 2:Bi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(v=r1+300-vt(),10<v)){if(hc(d,i,ia,!oc),qt(d,0,!0)!==0)break e;Sl=i,d.timeoutHandle=Bv(cv.bind(null,d,l,Bi,i1,H0,i,ia,ou,hh,oc,w,"Throttled",-0,0),v);break e}cv(d,l,Bi,i1,H0,i,ia,ou,hh,oc,w,null,-0,0)}}break}while(!0);Po(r)}function cv(r,i,l,d,v,w,O,ne,me,De,Ge,Je,Ve,ze){if(r.timeoutHandle=-1,Je=i.subtreeFlags,Je&8192||(Je&16785408)===16785408){Je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ki},tv(i,w,Je);var Lt=(w&62914560)===w?r1-vt():(w&4194048)===w?iv-vt():0;if(Lt=z_(Je,Lt),Lt!==null){Sl=w,r.cancelPendingCommit=Lt(bv.bind(null,r,i,w,l,d,v,O,ne,me,Ge,Je,null,Ve,ze)),hc(r,w,O,!De);return}}bv(r,i,w,l,d,v,O,ne,me)}function r_(r){for(var i=r;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var v=l[d],w=v.getSnapshot;v=v.value;try{if(!As(w(),v))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function hc(r,i,l,d){i&=~U0,i&=~ou,r.suspendedLanes|=i,r.pingedLanes&=~i,d&&(r.warmLanes|=i),d=r.expirationTimes;for(var v=i;0<v;){var w=31-bt(v),O=1<<w;d[w]=-1,v&=~O}l!==0&&Tt(r,l,i)}function a1(){return(Qn&6)===0?(Ld(0),!1):!0}function Y0(){if(En!==null){if(tr===0)var r=En.return;else r=En,Na=Mo=null,th(r),tt=null,Ot=0,r=En;for(;r!==null;)Pb(r.alternate,r),r=r.return;En=null}}function fh(r,i){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,S_(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Sl=0,Y0(),mr=r,En=l=ki(r.current,null),On=i,tr=0,sa=null,oc=!1,uh=wn(r,i),q0=!1,hh=ia=U0=ou=lc=es=0,Bi=Ed=null,H0=!1,(i&8)!==0&&(i|=i&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=i;0<d;){var v=31-bt(d),w=1<<v;i|=r[v],d&=~w}return _l=i,Xc(),l}function uv(r,i){Ht=null,X.H=_d,i===ve||i===ce?(i=Ye(),tr=3):i===Le?(i=Ye(),tr=4):tr=i===C0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,sa=i,En===null&&(es=1,Xf(r,ji(i,r.current)))}function hv(){var r=Sr.current;return r===null?!0:(On&4194048)===On?qn===null:(On&62914560)===On||(On&536870912)!==0?r===qn:!1}function dv(){var r=X.H;return X.H=_d,r===null?_d:r}function fv(){var r=X.A;return X.A=t_,r}function o1(){es=4,oc||(On&4194048)!==On&&Sr.current!==null||(uh=!0),(lc&134217727)===0&&(ou&134217727)===0||mr===null||hc(mr,On,ia,!1)}function X0(r,i,l){var d=Qn;Qn|=2;var v=dv(),w=fv();(mr!==r||On!==i)&&(i1=null,fh(r,i)),i=!1;var O=es;e:do try{if(tr!==0&&En!==null){var ne=En,me=sa;switch(tr){case 8:Y0(),O=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(i=!0);var De=tr;if(tr=0,sa=null,ph(r,ne,me,De),l&&uh){O=0;break e}break;default:De=tr,tr=0,sa=null,ph(r,ne,me,De)}}s_(),O=es;break}catch(Ge){uv(r,Ge)}while(!0);return i&&r.shellSuspendCounter++,Na=Mo=null,Qn=d,X.H=v,X.A=w,En===null&&(mr=null,On=0,Xc()),O}function s_(){for(;En!==null;)pv(En)}function i_(r,i){var l=Qn;Qn|=2;var d=dv(),v=fv();mr!==r||On!==i?(i1=null,s1=vt()+500,fh(r,i)):uh=wn(r,i);e:do try{if(tr!==0&&En!==null){i=En;var w=sa;t:switch(tr){case 1:tr=0,sa=null,ph(r,i,w,1);break;case 2:case 9:if(Te(w)){tr=0,sa=null,mv(i);break}i=function(){tr!==2&&tr!==9||mr!==r||(tr=7),Po(r)},w.then(i,i);break e;case 3:tr=7;break e;case 4:tr=5;break e;case 7:Te(w)?(tr=0,sa=null,mv(i)):(tr=0,sa=null,ph(r,i,w,7));break;case 5:var O=null;switch(En.tag){case 26:O=En.memoizedState;case 5:case 27:var ne=En;if(O?e5(O):ne.stateNode.complete){tr=0,sa=null;var me=ne.sibling;if(me!==null)En=me;else{var De=ne.return;De!==null?(En=De,l1(De)):En=null}break t}}tr=0,sa=null,ph(r,i,w,5);break;case 6:tr=0,sa=null,ph(r,i,w,6);break;case 8:Y0(),es=6;break e;default:throw Error(s(462))}}a_();break}catch(Ge){uv(r,Ge)}while(!0);return Na=Mo=null,X.H=d,X.A=v,Qn=l,En!==null?0:(mr=null,On=0,Xc(),es)}function a_(){for(;En!==null&&!nt();)pv(En)}function pv(r){var i=Vb(r.alternate,r,_l);r.memoizedProps=r.pendingProps,i===null?l1(r):En=i}function mv(r){var i=r,l=i.alternate;switch(i.tag){case 15:case 0:i=Lb(l,i,i.pendingProps,i.type,void 0,On);break;case 11:i=Lb(l,i,i.pendingProps,i.type.render,i.ref,On);break;case 5:th(i);default:Pb(l,i),i=En=Qc(i,_l),i=Vb(l,i,_l)}r.memoizedProps=r.pendingProps,i===null?l1(r):En=i}function ph(r,i,l,d){Na=Mo=null,th(i),tt=null,Ot=0;var v=i.return;try{if(Y4(r,v,i,l,On)){es=1,Xf(r,ji(l,r.current)),En=null;return}}catch(w){if(v!==null)throw En=v,w;es=1,Xf(r,ji(l,r.current)),En=null;return}i.flags&32768?(jn||d===1?r=!0:uh||(On&536870912)!==0?r=!1:(oc=r=!0,(d===2||d===9||d===3||d===6)&&(d=Sr.current,d!==null&&d.tag===13&&(d.flags|=16384))),gv(i,r)):l1(i)}function l1(r){var i=r;do{if((i.flags&32768)!==0){gv(i,oc);return}r=i.return;var l=K4(i.alternate,i,_l);if(l!==null){En=l;return}if(i=i.sibling,i!==null){En=i;return}En=i=r}while(i!==null);es===0&&(es=5)}function gv(r,i){do{var l=Q4(r.alternate,r);if(l!==null){l.flags&=32767,En=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(r=r.sibling,r!==null)){En=r;return}En=r=l}while(r!==null);es=6,En=null}function bv(r,i,l,d,v,w,O,ne,me){r.cancelPendingCommit=null;do c1();while(Ms!==0);if((Qn&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(w=i.lanes|i.childLanes,w|=zu,ht(r,l,w,O,ne,me),r===mr&&(En=mr=null,On=0),dh=i,uc=r,Sl=l,W0=w,G0=v,av=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,u_(jt,function(){return _v(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=X.T,X.T=null,v=re.p,re.p=2,O=Qn,Qn|=4;try{J4(r,i,l)}finally{Qn=O,re.p=v,X.T=d}}Ms=1,vv(),yv(),xv()}}function vv(){if(Ms===1){Ms=0;var r=uc,i=dh,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var d=re.p;re.p=2;var v=Qn;Qn|=4;try{Qb(i,r);var w=om,O=Xa(r.containerInfo),ne=w.focusedElem,me=w.selectionRange;if(O!==ne&&ne&&ne.ownerDocument&&Ya(ne.ownerDocument.documentElement,ne)){if(me!==null&&_a(ne)){var De=me.start,Ge=me.end;if(Ge===void 0&&(Ge=De),"selectionStart"in ne)ne.selectionStart=De,ne.selectionEnd=Math.min(Ge,ne.value.length);else{var Je=ne.ownerDocument||document,Ve=Je&&Je.defaultView||window;if(Ve.getSelection){var ze=Ve.getSelection(),Lt=ne.textContent.length,Zt=Math.min(me.start,Lt),ur=me.end===void 0?Zt:Math.min(me.end,Lt);!ze.extend&&Zt>ur&&(O=ur,ur=Zt,Zt=O);var Ce=Xl(ne,Zt),ye=Xl(ne,ur);if(Ce&&ye&&(ze.rangeCount!==1||ze.anchorNode!==Ce.node||ze.anchorOffset!==Ce.offset||ze.focusNode!==ye.node||ze.focusOffset!==ye.offset)){var Oe=Je.createRange();Oe.setStart(Ce.node,Ce.offset),ze.removeAllRanges(),Zt>ur?(ze.addRange(Oe),ze.extend(ye.node,ye.offset)):(Oe.setEnd(ye.node,ye.offset),ze.addRange(Oe))}}}}for(Je=[],ze=ne;ze=ze.parentNode;)ze.nodeType===1&&Je.push({element:ze,left:ze.scrollLeft,top:ze.scrollTop});for(typeof ne.focus=="function"&&ne.focus(),ne=0;ne<Je.length;ne++){var Ke=Je[ne];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}w1=!!am,om=am=null}finally{Qn=v,re.p=d,X.T=l}}r.current=i,Ms=2}}function yv(){if(Ms===2){Ms=0;var r=uc,i=dh,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var d=re.p;re.p=2;var v=Qn;Qn|=4;try{$b(r,i.alternate,i)}finally{Qn=v,re.p=d,X.T=l}}Ms=3}}function xv(){if(Ms===4||Ms===3){Ms=0,ct();var r=uc,i=dh,l=Sl,d=av;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ms=5:(Ms=0,dh=uc=null,wv(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(cc=null),dn(l),i=i.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(ot,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=X.T,v=re.p,re.p=2,X.T=null;try{for(var w=r.onRecoverableError,O=0;O<d.length;O++){var ne=d[O];w(ne.value,{componentStack:ne.stack})}}finally{X.T=i,re.p=v}}(Sl&3)!==0&&c1(),Po(r),v=r.pendingLanes,(l&261930)!==0&&(v&42)!==0?r===$0?Md++:(Md=0,$0=r):Md=0,Ld(0)}}function wv(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,tu(i)))}function c1(){return vv(),yv(),xv(),_v()}function _v(){if(Ms!==5)return!1;var r=uc,i=W0;W0=0;var l=dn(Sl),d=X.T,v=re.p;try{re.p=32>l?32:l,X.T=null,l=G0,G0=null;var w=uc,O=Sl;if(Ms=0,dh=uc=null,Sl=0,(Qn&6)!==0)throw Error(s(331));var ne=Qn;if(Qn|=4,rv(w.current),ev(w,w.current,O,l),Qn=ne,Ld(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(ot,w)}catch{}return!0}finally{re.p=v,X.T=d,wv(r,i)}}function Sv(r,i,l){i=ji(l,i),i=A0(r.stateNode,i,2),r=yn(r,i,2),r!==null&&(Fe(r,2),Po(r))}function nr(r,i,l){if(r.tag===3)Sv(r,r,l);else for(;i!==null;){if(i.tag===3){Sv(i,r,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(cc===null||!cc.has(d))){r=ji(l,r),l=Nb(2),d=yn(i,l,2),d!==null&&(Ab(l,d,i,r),Fe(d,2),Po(d));break}}i=i.return}}function Z0(r,i,l){var d=r.pingCache;if(d===null){d=r.pingCache=new n_;var v=new Set;d.set(i,v)}else v=d.get(i),v===void 0&&(v=new Set,d.set(i,v));v.has(l)||(q0=!0,v.add(l),r=o_.bind(null,r,i,l),i.then(r,r))}function o_(r,i,l){var d=r.pingCache;d!==null&&d.delete(i),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,mr===r&&(On&l)===l&&(es===4||es===3&&(On&62914560)===On&&300>vt()-r1?(Qn&2)===0&&fh(r,0):U0|=l,hh===On&&(hh=0)),Po(r)}function Nv(r,i){i===0&&(i=ft()),r=Ka(r,i),r!==null&&(Fe(r,i),Po(r))}function l_(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),Nv(r,l)}function c_(r,i){var l=0;switch(r.tag){case 31:case 13:var d=r.stateNode,v=r.memoizedState;v!==null&&(l=v.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(i),Nv(r,l)}function u_(r,i){return qe(r,i)}var u1=null,mh=null,K0=!1,h1=!1,Q0=!1,dc=0;function Po(r){r!==mh&&r.next===null&&(mh===null?u1=mh=r:mh=mh.next=r),h1=!0,K0||(K0=!0,d_())}function Ld(r,i){if(!Q0&&h1){Q0=!0;do for(var l=!1,d=u1;d!==null;){if(r!==0){var v=d.pendingLanes;if(v===0)var w=0;else{var O=d.suspendedLanes,ne=d.pingedLanes;w=(1<<31-bt(42|r)+1)-1,w&=v&~(O&~ne),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,kv(d,w))}else w=On,w=qt(d,d===mr?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||wn(d,w)||(l=!0,kv(d,w));d=d.next}while(l);Q0=!1}}function h_(){Av()}function Av(){h1=K0=!1;var r=0;dc!==0&&__()&&(r=dc);for(var i=vt(),l=null,d=u1;d!==null;){var v=d.next,w=Cv(d,i);w===0?(d.next=null,l===null?u1=v:l.next=v,v===null&&(mh=l)):(l=d,(r!==0||(w&3)!==0)&&(h1=!0)),d=v}Ms!==0&&Ms!==5||Ld(r),dc!==0&&(dc=0)}function Cv(r,i){for(var l=r.suspendedLanes,d=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var O=31-bt(w),ne=1<<O,me=v[O];me===-1?((ne&l)===0||(ne&d)!==0)&&(v[O]=Ee(ne,i)):me<=i&&(r.expiredLanes|=ne),w&=~ne}if(i=mr,l=On,l=qt(r,r===i?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,l===0||r===i&&(tr===2||tr===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Re(d),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||wn(r,l)){if(i=l&-l,i===r.callbackPriority)return i;switch(d!==null&&Re(d),dn(l)){case 2:case 8:l=Ft;break;case 32:l=jt;break;case 268435456:l=xt;break;default:l=jt}return d=Tv.bind(null,r),l=qe(l,d),r.callbackPriority=i,r.callbackNode=l,i}return d!==null&&d!==null&&Re(d),r.callbackPriority=2,r.callbackNode=null,2}function Tv(r,i){if(Ms!==0&&Ms!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(c1()&&r.callbackNode!==l)return null;var d=On;return d=qt(r,r===mr?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(lv(r,d,i),Cv(r,vt()),r.callbackNode!=null&&r.callbackNode===l?Tv.bind(null,r):null)}function kv(r,i){if(c1())return null;lv(r,i,!0)}function d_(){N_(function(){(Qn&6)!==0?qe(St,h_):Av()})}function J0(){if(dc===0){var r=m;r===0&&(r=Vt,Vt<<=1,(Vt&261888)===0&&(Vt=256)),dc=r}return dc}function jv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ri(""+r)}function Ev(r,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,r.id&&l.setAttribute("form",r.id),i.parentNode.insertBefore(l,i),r=new FormData(r),l.parentNode.removeChild(l),r}function f_(r,i,l,d,v){if(i==="submit"&&l&&l.stateNode===v){var w=jv((v[rn]||null).action),O=d.submitter;O&&(i=(i=O[rn]||null)?jv(i.formAction):O.getAttribute("formAction"),i!==null&&(w=i,O=null));var ne=new Ai("action","action",null,d,v);r.push({event:ne,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(dc!==0){var me=O?Ev(v,O):new FormData(v);y0(l,{pending:!0,data:me,method:v.method,action:w},null,me)}}else typeof w=="function"&&(ne.preventDefault(),me=O?Ev(v,O):new FormData(v),y0(l,{pending:!0,data:me,method:v.method,action:w},w,me))},currentTarget:v}]})}}for(var em=0;em<ll.length;em++){var tm=ll[em],p_=tm.toLowerCase(),m_=tm[0].toUpperCase()+tm.slice(1);Ti(p_,"on"+m_)}Ti(ol,"onAnimationEnd"),Ti($c,"onAnimationIteration"),Ti(od,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(If,"onTransitionRun"),Ti(Ff,"onTransitionStart"),Ti(Vf,"onTransitionCancel"),Ti(ld,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Od="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Od));function Mv(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var d=r[l],v=d.event;d=d.listeners;e:{var w=void 0;if(i)for(var O=d.length-1;0<=O;O--){var ne=d[O],me=ne.instance,De=ne.currentTarget;if(ne=ne.listener,me!==w&&v.isPropagationStopped())break e;w=ne,v.currentTarget=De;try{w(v)}catch(Ge){Yc(Ge)}v.currentTarget=null,w=me}else for(O=0;O<d.length;O++){if(ne=d[O],me=ne.instance,De=ne.currentTarget,ne=ne.listener,me!==w&&v.isPropagationStopped())break e;w=ne,v.currentTarget=De;try{w(v)}catch(Ge){Yc(Ge)}v.currentTarget=null,w=me}}}}function Mn(r,i){var l=i[Er];l===void 0&&(l=i[Er]=new Set);var d=r+"__bubble";l.has(d)||(Lv(i,r,2,!1),l.add(d))}function nm(r,i,l){var d=0;i&&(d|=4),Lv(l,r,d,i)}var d1="_reactListening"+Math.random().toString(36).slice(2);function rm(r){if(!r[d1]){r[d1]=!0,xn.forEach(function(l){l!=="selectionchange"&&(g_.has(l)||nm(l,!1,r),nm(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[d1]||(i[d1]=!0,nm("selectionchange",!1,i))}}function Lv(r,i,l,d){switch(o5(i)){case 2:var v=H_;break;case 8:v=W_;break;default:v=vm}l=v.bind(null,i,l,r),v=void 0,!qc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(v=!0),d?v!==void 0?r.addEventListener(i,l,{capture:!0,passive:v}):r.addEventListener(i,l,!0):v!==void 0?r.addEventListener(i,l,{passive:v}):r.addEventListener(i,l,!1)}function sm(r,i,l,d,v){var w=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var O=d.tag;if(O===3||O===4){var ne=d.stateNode.containerInfo;if(ne===v)break;if(O===4)for(O=d.return;O!==null;){var me=O.tag;if((me===3||me===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;ne!==null;){if(O=gt(ne),O===null)return;if(me=O.tag,me===5||me===6||me===26||me===27){d=w=O;continue e}ne=ne.parentNode}}d=d.return}Iu(function(){var De=w,Ge=el(l),Je=[];e:{var Ve=cd.get(r);if(Ve!==void 0){var ze=Ai,Lt=r;switch(r){case"keypress":if(Ni(l)===0)break e;case"keydown":case"keyup":ze=In;break;case"focusin":Lt="focus",ze=Pa;break;case"focusout":Lt="blur",ze=Pa;break;case"beforeblur":case"afterblur":ze=Pa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=Uc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=Ba;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=rs;break;case ol:case $c:case od:ze=S;break;case ld:ze=Ns;break;case"scroll":case"scrollend":ze=ql;break;case"wheel":ze=Qi;break;case"copy":case"cut":case"paste":ze=he;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=qr;break;case"toggle":case"beforetoggle":ze=Hc}var Zt=(i&4)!==0,ur=!Zt&&(r==="scroll"||r==="scrollend"),Ce=Zt?Ve!==null?Ve+"Capture":null:Ve;Zt=[];for(var ye=De,Oe;ye!==null;){var Ke=ye;if(Oe=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Oe===null||Ce===null||(Ke=fi(ye,Ce),Ke!=null&&Zt.push(Dd(ye,Ke,Oe))),ur)break;ye=ye.return}0<Zt.length&&(Ve=new ze(Ve,Lt,null,l,Ge),Je.push({event:Ve,listeners:Zt}))}}if((i&7)===0){e:{if(Ve=r==="mouseover"||r==="pointerover",ze=r==="mouseout"||r==="pointerout",Ve&&l!==Da&&(Lt=l.relatedTarget||l.fromElement)&&(gt(Lt)||Lt[$n]))break e;if((ze||Ve)&&(Ve=Ge.window===Ge?Ge:(Ve=Ge.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,ze?(Lt=l.relatedTarget||l.toElement,ze=De,Lt=Lt?gt(Lt):null,Lt!==null&&(ur=o(Lt),Zt=Lt.tag,Lt!==ur||Zt!==5&&Zt!==27&&Zt!==6)&&(Lt=null)):(ze=null,Lt=De),ze!==Lt)){if(Zt=Uc,Ke="onMouseLeave",Ce="onMouseEnter",ye="mouse",(r==="pointerout"||r==="pointerover")&&(Zt=qr,Ke="onPointerLeave",Ce="onPointerEnter",ye="pointer"),ur=ze==null?Ve:pn(ze),Oe=Lt==null?Ve:pn(Lt),Ve=new Zt(Ke,ye+"leave",ze,l,Ge),Ve.target=ur,Ve.relatedTarget=Oe,Ke=null,gt(Ge)===De&&(Zt=new Zt(Ce,ye+"enter",Lt,l,Ge),Zt.target=Oe,Zt.relatedTarget=ur,Ke=Zt),ur=Ke,ze&&Lt)t:{for(Zt=b_,Ce=ze,ye=Lt,Oe=0,Ke=Ce;Ke;Ke=Zt(Ke))Oe++;Ke=0;for(var Gt=ye;Gt;Gt=Zt(Gt))Ke++;for(;0<Oe-Ke;)Ce=Zt(Ce),Oe--;for(;0<Ke-Oe;)ye=Zt(ye),Ke--;for(;Oe--;){if(Ce===ye||ye!==null&&Ce===ye.alternate){Zt=Ce;break t}Ce=Zt(Ce),ye=Zt(ye)}Zt=null}else Zt=null;ze!==null&&Ov(Je,Ve,ze,Zt,!1),Lt!==null&&ur!==null&&Ov(Je,ur,Lt,Zt,!0)}}e:{if(Ve=De?pn(De):window,ze=Ve.nodeName&&Ve.nodeName.toLowerCase(),ze==="select"||ze==="input"&&Ve.type==="file")var Yn=To;else if(Wc(Ve))if(si)Yn=xa;else{Yn=Ur;var zt=$l}else ze=Ve.nodeName,!ze||ze.toLowerCase()!=="input"||Ve.type!=="checkbox"&&Ve.type!=="radio"?De&&Bc(De.elementType)&&(Yn=To):Yn=Pu;if(Yn&&(Yn=Yn(r,De))){mi(Je,Yn,l,Ge);break e}zt&&zt(r,Ve,De),r==="focusout"&&De&&Ve.type==="number"&&De.memoizedProps.value!=null&&Qo(Ve,"number",Ve.value)}switch(zt=De?pn(De):window,r){case"focusin":(Wc(zt)||zt.contentEditable==="true")&&(gi=zt,Za=De,Rs=null);break;case"focusout":Rs=Za=gi=null;break;case"mousedown":Ci=!0;break;case"contextmenu":case"mouseup":case"dragend":Ci=!1,Hn(Je,l,Ge);break;case"selectionchange":if(al)break;case"keydown":case"keyup":Hn(Je,l,Ge)}var _n;if(ga)e:{switch(r){case"compositionstart":var Dn="onCompositionStart";break e;case"compositionend":Dn="onCompositionEnd";break e;case"compositionupdate":Dn="onCompositionUpdate";break e}Dn=void 0}else ba?Co(r,l)&&(Dn="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Dn="onCompositionStart");Dn&&(Ua&&l.locale!=="ko"&&(ba||Dn!=="onCompositionStart"?Dn==="onCompositionEnd"&&ba&&(_n=Fu()):(pi=Ge,nl="value"in pi?pi.value:pi.textContent,ba=!0)),zt=f1(De,Dn),0<zt.length&&(Dn=new Ae(Dn,r,null,l,Ge),Je.push({event:Dn,listeners:zt}),_n?Dn.data=_n:(_n=Hl(l),_n!==null&&(Dn.data=_n)))),(_n=il?Ys(r,l):Ha(r,l))&&(Dn=f1(De,"onBeforeInput"),0<Dn.length&&(zt=new Ae("onBeforeInput","beforeinput",null,l,Ge),Je.push({event:zt,listeners:Dn}),zt.data=_n)),f_(Je,r,De,l,Ge)}Mv(Je,i)})}function Dd(r,i,l){return{instance:r,listener:i,currentTarget:l}}function f1(r,i){for(var l=i+"Capture",d=[];r!==null;){var v=r,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=fi(r,l),v!=null&&d.unshift(Dd(r,v,w)),v=fi(r,i),v!=null&&d.push(Dd(r,v,w))),r.tag===3)return d;r=r.return}return[]}function b_(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ov(r,i,l,d,v){for(var w=i._reactName,O=[];l!==null&&l!==d;){var ne=l,me=ne.alternate,De=ne.stateNode;if(ne=ne.tag,me!==null&&me===d)break;ne!==5&&ne!==26&&ne!==27||De===null||(me=De,v?(De=fi(l,w),De!=null&&O.unshift(Dd(l,De,me))):v||(De=fi(l,w),De!=null&&O.push(Dd(l,De,me)))),l=l.return}O.length!==0&&r.push({event:i,listeners:O})}var v_=/\r\n?/g,y_=/\u0000|\uFFFD/g;function Dv(r){return(typeof r=="string"?r:""+r).replace(v_,`
`).replace(y_,"")}function Rv(r,i){return i=Dv(i),Dv(r)===i}function cr(r,i,l,d,v,w){switch(l){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||Zi(r,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&Zi(r,""+d);break;case"className":ni(r,"class",d);break;case"tabIndex":ni(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(r,l,d);break;case"style":Ou(r,d,w);break;case"data":if(i!=="object"){ni(r,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||l!=="href")){r.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=ri(""+d),r.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(i!=="input"&&cr(r,i,"name",v.name,v,null),cr(r,i,"formEncType",v.formEncType,v,null),cr(r,i,"formMethod",v.formMethod,v,null),cr(r,i,"formTarget",v.formTarget,v,null)):(cr(r,i,"encType",v.encType,v,null),cr(r,i,"method",v.method,v,null),cr(r,i,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(l);break}d=ri(""+d),r.setAttribute(l,d);break;case"onClick":d!=null&&(r.onclick=Ki);break;case"onScroll":d!=null&&Mn("scroll",r);break;case"onScrollEnd":d!=null&&Mn("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}l=ri(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""+d):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":d===!0?r.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(l,d):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(l,d):r.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(l):r.setAttribute(l,d);break;case"popover":Mn("beforetoggle",r),Mn("toggle",r),Pr(r,"popover",d);break;case"xlinkActuate":Gs(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Gs(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Gs(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Gs(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Gs(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Gs(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Gs(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Gs(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Gs(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Pr(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Pc.get(l)||l,Pr(r,l,d))}}function im(r,i,l,d,v,w){switch(l){case"style":Ou(r,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"children":typeof d=="string"?Zi(r,d):(typeof d=="number"||typeof d=="bigint")&&Zi(r,""+d);break;case"onScroll":d!=null&&Mn("scroll",r);break;case"onScrollEnd":d!=null&&Mn("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pn.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),i=l.slice(2,v?l.length-7:void 0),w=r[rn]||null,w=w!=null?w[l]:null,typeof w=="function"&&r.removeEventListener(i,w,v),typeof d=="function")){typeof w!="function"&&w!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(i,d,v);break e}l in r?r[l]=d:d===!0?r.setAttribute(l,""):Pr(r,l,d)}}}function Js(r,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mn("error",r),Mn("load",r);var d=!1,v=!1,w;for(w in l)if(l.hasOwnProperty(w)){var O=l[w];if(O!=null)switch(w){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:cr(r,i,w,O,l,null)}}v&&cr(r,i,"srcSet",l.srcSet,l,null),d&&cr(r,i,"src",l.src,l,null);return;case"input":Mn("invalid",r);var ne=w=O=v=null,me=null,De=null;for(d in l)if(l.hasOwnProperty(d)){var Ge=l[d];if(Ge!=null)switch(d){case"name":v=Ge;break;case"type":O=Ge;break;case"checked":me=Ge;break;case"defaultChecked":De=Ge;break;case"value":w=Ge;break;case"defaultValue":ne=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(s(137,i));break;default:cr(r,i,d,Ge,l,null)}}Bl(r,w,ne,me,De,O,v,!1);return;case"select":Mn("invalid",r),d=O=w=null;for(v in l)if(l.hasOwnProperty(v)&&(ne=l[v],ne!=null))switch(v){case"value":w=ne;break;case"defaultValue":O=ne;break;case"multiple":d=ne;default:cr(r,i,v,ne,l,null)}i=w,l=O,r.multiple=!!d,i!=null?$s(r,!!d,i,!1):l!=null&&$s(r,!!d,l,!0);return;case"textarea":Mn("invalid",r),w=v=d=null;for(O in l)if(l.hasOwnProperty(O)&&(ne=l[O],ne!=null))switch(O){case"value":d=ne;break;case"defaultValue":v=ne;break;case"children":w=ne;break;case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(91));break;default:cr(r,i,O,ne,l,null)}Vc(r,d,v,w);return;case"option":for(me in l)if(l.hasOwnProperty(me)&&(d=l[me],d!=null))switch(me){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:cr(r,i,me,d,l,null)}return;case"dialog":Mn("beforetoggle",r),Mn("toggle",r),Mn("cancel",r),Mn("close",r);break;case"iframe":case"object":Mn("load",r);break;case"video":case"audio":for(d=0;d<Od.length;d++)Mn(Od[d],r);break;case"image":Mn("error",r),Mn("load",r);break;case"details":Mn("toggle",r);break;case"embed":case"source":case"link":Mn("error",r),Mn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in l)if(l.hasOwnProperty(De)&&(d=l[De],d!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:cr(r,i,De,d,l,null)}return;default:if(Bc(i)){for(Ge in l)l.hasOwnProperty(Ge)&&(d=l[Ge],d!==void 0&&im(r,i,Ge,d,l,void 0));return}}for(ne in l)l.hasOwnProperty(ne)&&(d=l[ne],d!=null&&cr(r,i,ne,d,l,null))}function x_(r,i,l,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,O=null,ne=null,me=null,De=null,Ge=null;for(ze in l){var Je=l[ze];if(l.hasOwnProperty(ze)&&Je!=null)switch(ze){case"checked":break;case"value":break;case"defaultValue":me=Je;default:d.hasOwnProperty(ze)||cr(r,i,ze,null,d,Je)}}for(var Ve in d){var ze=d[Ve];if(Je=l[Ve],d.hasOwnProperty(Ve)&&(ze!=null||Je!=null))switch(Ve){case"type":w=ze;break;case"name":v=ze;break;case"checked":De=ze;break;case"defaultChecked":Ge=ze;break;case"value":O=ze;break;case"defaultValue":ne=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(s(137,i));break;default:ze!==Je&&cr(r,i,Ve,ze,d,Je)}}So(r,O,ne,me,De,Ge,w,v);return;case"select":ze=O=ne=Ve=null;for(w in l)if(me=l[w],l.hasOwnProperty(w)&&me!=null)switch(w){case"value":break;case"multiple":ze=me;default:d.hasOwnProperty(w)||cr(r,i,w,null,d,me)}for(v in d)if(w=d[v],me=l[v],d.hasOwnProperty(v)&&(w!=null||me!=null))switch(v){case"value":Ve=w;break;case"defaultValue":ne=w;break;case"multiple":O=w;default:w!==me&&cr(r,i,v,w,d,me)}i=ne,l=O,d=ze,Ve!=null?$s(r,!!l,Ve,!1):!!d!=!!l&&(i!=null?$s(r,!!l,i,!0):$s(r,!!l,l?[]:"",!1));return;case"textarea":ze=Ve=null;for(ne in l)if(v=l[ne],l.hasOwnProperty(ne)&&v!=null&&!d.hasOwnProperty(ne))switch(ne){case"value":break;case"children":break;default:cr(r,i,ne,null,d,v)}for(O in d)if(v=d[O],w=l[O],d.hasOwnProperty(O)&&(v!=null||w!=null))switch(O){case"value":Ve=v;break;case"defaultValue":ze=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&cr(r,i,O,v,d,w)}Fc(r,Ve,ze);return;case"option":for(var Lt in l)if(Ve=l[Lt],l.hasOwnProperty(Lt)&&Ve!=null&&!d.hasOwnProperty(Lt))switch(Lt){case"selected":r.selected=!1;break;default:cr(r,i,Lt,null,d,Ve)}for(me in d)if(Ve=d[me],ze=l[me],d.hasOwnProperty(me)&&Ve!==ze&&(Ve!=null||ze!=null))switch(me){case"selected":r.selected=Ve&&typeof Ve!="function"&&typeof Ve!="symbol";break;default:cr(r,i,me,Ve,d,ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Zt in l)Ve=l[Zt],l.hasOwnProperty(Zt)&&Ve!=null&&!d.hasOwnProperty(Zt)&&cr(r,i,Zt,null,d,Ve);for(De in d)if(Ve=d[De],ze=l[De],d.hasOwnProperty(De)&&Ve!==ze&&(Ve!=null||ze!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(s(137,i));break;default:cr(r,i,De,Ve,d,ze)}return;default:if(Bc(i)){for(var ur in l)Ve=l[ur],l.hasOwnProperty(ur)&&Ve!==void 0&&!d.hasOwnProperty(ur)&&im(r,i,ur,void 0,d,Ve);for(Ge in d)Ve=d[Ge],ze=l[Ge],!d.hasOwnProperty(Ge)||Ve===ze||Ve===void 0&&ze===void 0||im(r,i,Ge,Ve,d,ze);return}}for(var Ce in l)Ve=l[Ce],l.hasOwnProperty(Ce)&&Ve!=null&&!d.hasOwnProperty(Ce)&&cr(r,i,Ce,null,d,Ve);for(Je in d)Ve=d[Je],ze=l[Je],!d.hasOwnProperty(Je)||Ve===ze||Ve==null&&ze==null||cr(r,i,Je,Ve,d,ze)}function Iv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function w_(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var v=l[d],w=v.transferSize,O=v.initiatorType,ne=v.duration;if(w&&ne&&Iv(O)){for(O=0,ne=v.responseEnd,d+=1;d<l.length;d++){var me=l[d],De=me.startTime;if(De>ne)break;var Ge=me.transferSize,Je=me.initiatorType;Ge&&Iv(Je)&&(me=me.responseEnd,O+=Ge*(me<ne?1:(ne-De)/(me-De)))}if(--d,i+=8*(w+O)/(v.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var am=null,om=null;function p1(r){return r.nodeType===9?r:r.ownerDocument}function Fv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vv(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function lm(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var cm=null;function __(){var r=window.event;return r&&r.type==="popstate"?r===cm?!1:(cm=r,!0):(cm=null,!1)}var Bv=typeof setTimeout=="function"?setTimeout:void 0,S_=typeof clearTimeout=="function"?clearTimeout:void 0,Pv=typeof Promise=="function"?Promise:void 0,N_=typeof queueMicrotask=="function"?queueMicrotask:typeof Pv<"u"?function(r){return Pv.resolve(null).then(r).catch(A_)}:Bv;function A_(r){setTimeout(function(){throw r})}function fc(r){return r==="head"}function zv(r,i){var l=i,d=0;do{var v=l.nextSibling;if(r.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(d===0){r.removeChild(v),yh(i);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Rd(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Rd(l);for(var w=l.firstChild;w;){var O=w.nextSibling,ne=w.nodeName;w[Ze]||ne==="SCRIPT"||ne==="STYLE"||ne==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=O}}else l==="body"&&Rd(r.ownerDocument.body);l=v}while(l);yh(i)}function qv(r,i){var l=r;r=0;do{var d=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=d}while(l)}function um(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":um(l),_t(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function C_(r,i,l,d){for(;r.nodeType===1;){var v=l;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[Ze])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=Ta(r.nextSibling),r===null)break}return null}function T_(r,i,l){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Ta(r.nextSibling),r===null))return null;return r}function Uv(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Ta(r.nextSibling),r===null))return null;return r}function hm(r){return r.data==="$?"||r.data==="$~"}function dm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function k_(r,i){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||l.readyState!=="loading")i();else{var d=function(){i(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Ta(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var fm=null;function Hv(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(i===0)return Ta(r.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}r=r.nextSibling}return null}function Wv(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return r;i--}else l!=="/$"&&l!=="/&"||i++}r=r.previousSibling}return null}function Gv(r,i,l){switch(i=p1(l),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Rd(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);_t(r)}var ka=new Map,$v=new Set;function m1(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Nl=re.d;re.d={f:j_,r:E_,D:M_,C:L_,L:O_,m:D_,X:I_,S:R_,M:F_};function j_(){var r=Nl.f(),i=a1();return r||i}function E_(r){var i=kt(r);i!==null&&i.tag===5&&i.type==="form"?ub(i):Nl.r(r)}var gh=typeof document>"u"?null:document;function Yv(r,i,l){var d=gh;if(d&&typeof i=="string"&&i){var v=Lr(i);v='link[rel="'+r+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),$v.has(v)||($v.add(v),r={rel:r,crossOrigin:l,href:i},d.querySelector(v)===null&&(i=d.createElement("link"),Js(i,"link",r),sn(i),d.head.appendChild(i)))}}function M_(r){Nl.D(r),Yv("dns-prefetch",r,null)}function L_(r,i){Nl.C(r,i),Yv("preconnect",r,i)}function O_(r,i,l){Nl.L(r,i,l);var d=gh;if(d&&r&&i){var v='link[rel="preload"][as="'+Lr(i)+'"]';i==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Lr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Lr(l.imageSizes)+'"]')):v+='[href="'+Lr(r)+'"]';var w=v;switch(i){case"style":w=bh(r);break;case"script":w=vh(r)}ka.has(w)||(r=y({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:r,as:i},l),ka.set(w,r),d.querySelector(v)!==null||i==="style"&&d.querySelector(Id(w))||i==="script"&&d.querySelector(Fd(w))||(i=d.createElement("link"),Js(i,"link",r),sn(i),d.head.appendChild(i)))}}function D_(r,i){Nl.m(r,i);var l=gh;if(l&&r){var d=i&&typeof i.as=="string"?i.as:"script",v='link[rel="modulepreload"][as="'+Lr(d)+'"][href="'+Lr(r)+'"]',w=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=vh(r)}if(!ka.has(w)&&(r=y({rel:"modulepreload",href:r},i),ka.set(w,r),l.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Fd(w)))return}d=l.createElement("link"),Js(d,"link",r),sn(d),l.head.appendChild(d)}}}function R_(r,i,l){Nl.S(r,i,l);var d=gh;if(d&&r){var v=un(d).hoistableStyles,w=bh(r);i=i||"default";var O=v.get(w);if(!O){var ne={loading:0,preload:null};if(O=d.querySelector(Id(w)))ne.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},l),(l=ka.get(w))&&pm(r,l);var me=O=d.createElement("link");sn(me),Js(me,"link",r),me._p=new Promise(function(De,Ge){me.onload=De,me.onerror=Ge}),me.addEventListener("load",function(){ne.loading|=1}),me.addEventListener("error",function(){ne.loading|=2}),ne.loading|=4,g1(O,i,d)}O={type:"stylesheet",instance:O,count:1,state:ne},v.set(w,O)}}}function I_(r,i){Nl.X(r,i);var l=gh;if(l&&r){var d=un(l).hoistableScripts,v=vh(r),w=d.get(v);w||(w=l.querySelector(Fd(v)),w||(r=y({src:r,async:!0},i),(i=ka.get(v))&&mm(r,i),w=l.createElement("script"),sn(w),Js(w,"link",r),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function F_(r,i){Nl.M(r,i);var l=gh;if(l&&r){var d=un(l).hoistableScripts,v=vh(r),w=d.get(v);w||(w=l.querySelector(Fd(v)),w||(r=y({src:r,async:!0,type:"module"},i),(i=ka.get(v))&&mm(r,i),w=l.createElement("script"),sn(w),Js(w,"link",r),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function Xv(r,i,l,d){var v=(v=ae.current)?m1(v):null;if(!v)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=bh(l.href),l=un(v).hoistableStyles,d=l.get(i),d||(d={type:"style",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=bh(l.href);var w=un(v).hoistableStyles,O=w.get(r);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,O),(w=v.querySelector(Id(r)))&&!w._p&&(O.instance=w,O.state.loading=5),ka.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ka.set(r,l),w||V_(v,r,l,O.state))),i&&d===null)throw Error(s(528,""));return O}if(i&&d!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=vh(l),l=un(v).hoistableScripts,d=l.get(i),d||(d={type:"script",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function bh(r){return'href="'+Lr(r)+'"'}function Id(r){return'link[rel="stylesheet"]['+r+"]"}function Zv(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function V_(r,i,l,d){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=r.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Js(i,"link",l),sn(i),r.head.appendChild(i))}function vh(r){return'[src="'+Lr(r)+'"]'}function Fd(r){return"script[async]"+r}function Kv(r,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var d=r.querySelector('style[data-href~="'+Lr(l.href)+'"]');if(d)return i.instance=d,sn(d),d;var v=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),sn(d),Js(d,"style",v),g1(d,l.precedence,r),i.instance=d;case"stylesheet":v=bh(l.href);var w=r.querySelector(Id(v));if(w)return i.state.loading|=4,i.instance=w,sn(w),w;d=Zv(l),(v=ka.get(v))&&pm(d,v),w=(r.ownerDocument||r).createElement("link"),sn(w);var O=w;return O._p=new Promise(function(ne,me){O.onload=ne,O.onerror=me}),Js(w,"link",d),i.state.loading|=4,g1(w,l.precedence,r),i.instance=w;case"script":return w=vh(l.src),(v=r.querySelector(Fd(w)))?(i.instance=v,sn(v),v):(d=l,(v=ka.get(w))&&(d=y({},l),mm(d,v)),r=r.ownerDocument||r,v=r.createElement("script"),sn(v),Js(v,"link",d),r.head.appendChild(v),i.instance=v);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,g1(d,l.precedence,r));return i.instance}function g1(r,i,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,w=v,O=0;O<d.length;O++){var ne=d[O];if(ne.dataset.precedence===i)w=ne;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(r,i.firstChild))}function pm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function mm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var b1=null;function Qv(r,i,l){if(b1===null){var d=new Map,v=b1=new Map;v.set(l,d)}else v=b1,d=v.get(l),d||(d=new Map,v.set(l,d));if(d.has(r))return d;for(d.set(r,null),l=l.getElementsByTagName(r),v=0;v<l.length;v++){var w=l[v];if(!(w[Ze]||w[Sn]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(i)||"";O=r+O;var ne=d.get(O);ne?ne.push(w):d.set(O,[w])}}return d}function Jv(r,i,l){r=r.ownerDocument||r,r.head.insertBefore(l,i==="title"?r.querySelector("head > title"):null)}function B_(r,i,l){if(l===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function e5(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function P_(r,i,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=bh(d.href),w=i.querySelector(Id(v));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=v1.bind(r),i.then(r,r)),l.state.loading|=4,l.instance=w,sn(w);return}w=i.ownerDocument||i,d=Zv(d),(v=ka.get(v))&&pm(d,v),w=w.createElement("link"),sn(w);var O=w;O._p=new Promise(function(ne,me){O.onload=ne,O.onerror=me}),Js(w,"link",d),l.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=v1.bind(r),i.addEventListener("load",l),i.addEventListener("error",l))}}var gm=0;function z_(r,i){return r.stylesheets&&r.count===0&&x1(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var d=setTimeout(function(){if(r.stylesheets&&x1(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+i);0<r.imgBytes&&gm===0&&(gm=62500*w_());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&x1(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>gm?50:800)+i);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function v1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)x1(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var y1=null;function x1(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,y1=new Map,i.forEach(q_,r),y1=null,v1.call(r))}function q_(r,i){if(!(i.state.loading&4)){var l=y1.get(r);if(l)var d=l.get(null);else{l=new Map,y1.set(r,l);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var O=v[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(l.set(O.dataset.precedence,O),d=O)}d&&l.set(null,d)}v=i.instance,O=v.getAttribute("data-precedence"),w=l.get(O)||d,w===d&&l.set(null,v),l.set(O,v),this.count++,d=v1.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),i.state.loading|=4}}var Vd={$$typeof:D,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function U_(r,i,l,d,v,w,O,ne,me){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=me,this.incompleteTransitions=new Map}function t5(r,i,l,d,v,w,O,ne,me,De,Ge,Je){return r=new U_(r,i,l,O,me,De,Ge,Je,ne),i=1,w===!0&&(i|=24),w=Fs(3,null,null,i),r.current=w,w.stateNode=r,i=tc(),i.refCount++,r.pooledCache=i,i.refCount++,w.memoizedState={element:d,isDehydrated:l,cache:i},mt(w),r}function n5(r){return r?(r=Cs,r):Cs}function r5(r,i,l,d,v,w){v=n5(v),d.context===null?d.context=v:d.pendingContext=v,d=Xt(i),d.payload={element:l},w=w===void 0?null:w,w!==null&&(d.callback=w),l=yn(r,d,i),l!==null&&(Pi(l,r,i),Zn(l,r,i))}function s5(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function bm(r,i){s5(r,i),(r=r.alternate)&&s5(r,i)}function i5(r){if(r.tag===13||r.tag===31){var i=Ka(r,67108864);i!==null&&Pi(i,r,67108864),bm(r,67108864)}}function a5(r){if(r.tag===13||r.tag===31){var i=aa();i=$t(i);var l=Ka(r,i);l!==null&&Pi(l,r,i),bm(r,i)}}var w1=!0;function H_(r,i,l,d){var v=X.T;X.T=null;var w=re.p;try{re.p=2,vm(r,i,l,d)}finally{re.p=w,X.T=v}}function W_(r,i,l,d){var v=X.T;X.T=null;var w=re.p;try{re.p=8,vm(r,i,l,d)}finally{re.p=w,X.T=v}}function vm(r,i,l,d){if(w1){var v=ym(d);if(v===null)sm(r,i,d,_1,l),l5(r,d);else if($_(v,r,i,l,d))d.stopPropagation();else if(l5(r,d),i&4&&-1<G_.indexOf(r)){for(;v!==null;){var w=kt(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=pt(w.pendingLanes);if(O!==0){var ne=w;for(ne.pendingLanes|=2,ne.entangledLanes|=2;O;){var me=1<<31-bt(O);ne.entanglements[1]|=me,O&=~me}Po(w),(Qn&6)===0&&(s1=vt()+500,Ld(0))}}break;case 31:case 13:ne=Ka(w,2),ne!==null&&Pi(ne,w,2),a1(),bm(w,2)}if(w=ym(d),w===null&&sm(r,i,d,_1,l),w===v)break;v=w}v!==null&&d.stopPropagation()}else sm(r,i,d,null,l)}}function ym(r){return r=el(r),xm(r)}var _1=null;function xm(r){if(_1=null,r=gt(r),r!==null){var i=o(r);if(i===null)r=null;else{var l=i.tag;if(l===13){if(r=u(i),r!==null)return r;r=null}else if(l===31){if(r=c(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return _1=r,null}function o5(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(It()){case St:return 2;case Ft:return 8;case jt:case yt:return 32;case xt:return 268435456;default:return 32}default:return 32}}var wm=!1,pc=null,mc=null,gc=null,Bd=new Map,Pd=new Map,bc=[],G_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l5(r,i){switch(r){case"focusin":case"focusout":pc=null;break;case"dragenter":case"dragleave":mc=null;break;case"mouseover":case"mouseout":gc=null;break;case"pointerover":case"pointerout":Bd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pd.delete(i.pointerId)}}function zd(r,i,l,d,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:w,targetContainers:[v]},i!==null&&(i=kt(i),i!==null&&i5(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,v!==null&&i.indexOf(v)===-1&&i.push(v),r)}function $_(r,i,l,d,v){switch(i){case"focusin":return pc=zd(pc,r,i,l,d,v),!0;case"dragenter":return mc=zd(mc,r,i,l,d,v),!0;case"mouseover":return gc=zd(gc,r,i,l,d,v),!0;case"pointerover":var w=v.pointerId;return Bd.set(w,zd(Bd.get(w)||null,r,i,l,d,v)),!0;case"gotpointercapture":return w=v.pointerId,Pd.set(w,zd(Pd.get(w)||null,r,i,l,d,v)),!0}return!1}function c5(r){var i=gt(r.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=u(l),i!==null){r.blockedOn=i,Jn(r.priority,function(){a5(l)});return}}else if(i===31){if(i=c(l),i!==null){r.blockedOn=i,Jn(r.priority,function(){a5(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function S1(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=ym(r.nativeEvent);if(l===null){l=r.nativeEvent;var d=new l.constructor(l.type,l);Da=d,l.target.dispatchEvent(d),Da=null}else return i=kt(l),i!==null&&i5(i),r.blockedOn=l,!1;i.shift()}return!0}function u5(r,i,l){S1(r)&&l.delete(i)}function Y_(){wm=!1,pc!==null&&S1(pc)&&(pc=null),mc!==null&&S1(mc)&&(mc=null),gc!==null&&S1(gc)&&(gc=null),Bd.forEach(u5),Pd.forEach(u5)}function N1(r,i){r.blockedOn===i&&(r.blockedOn=null,wm||(wm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Y_)))}var A1=null;function h5(r){A1!==r&&(A1=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){A1===r&&(A1=null);for(var i=0;i<r.length;i+=3){var l=r[i],d=r[i+1],v=r[i+2];if(typeof d!="function"){if(xm(d||l)===null)continue;break}var w=kt(l);w!==null&&(r.splice(i,3),i-=3,y0(w,{pending:!0,data:v,method:l.method,action:d},d,v))}}))}function yh(r){function i(me){return N1(me,r)}pc!==null&&N1(pc,r),mc!==null&&N1(mc,r),gc!==null&&N1(gc,r),Bd.forEach(i),Pd.forEach(i);for(var l=0;l<bc.length;l++){var d=bc[l];d.blockedOn===r&&(d.blockedOn=null)}for(;0<bc.length&&(l=bc[0],l.blockedOn===null);)c5(l),l.blockedOn===null&&bc.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var v=l[d],w=l[d+1],O=v[rn]||null;if(typeof w=="function")O||h5(l);else if(O){var ne=null;if(w&&w.hasAttribute("formAction")){if(v=w,O=w[rn]||null)ne=O.formAction;else if(xm(v)!==null)continue}else ne=O.action;typeof ne=="function"?l[d+1]=ne:(l.splice(d,3),d-=3),h5(l)}}}function d5(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function i(){v!==null&&(v(),v=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),v!==null&&(v(),v=null)}}}function _m(r){this._internalRoot=r}C1.prototype.render=_m.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,d=aa();r5(l,d,r,i,null,null)},C1.prototype.unmount=_m.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;r5(r.current,2,null,r,null,null),a1(),i[$n]=null}};function C1(r){this._internalRoot=r}C1.prototype.unstable_scheduleHydration=function(r){if(r){var i=fn();r={blockedOn:null,target:r,priority:i};for(var l=0;l<bc.length&&i!==0&&i<bc[l].priority;l++);bc.splice(l,0,r),l===0&&c5(r)}};var f5=e.version;if(f5!=="19.2.0")throw Error(s(527,f5,"19.2.0"));re.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=f(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var X_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var T1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!T1.isDisabled&&T1.supportsFiber)try{ot=T1.inject(X_),We=T1}catch{}}return Ud.createRoot=function(r,i){if(!a(r))throw Error(s(299));var l=!1,d="",v=xb,w=wb,O=_b;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(v=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(O=i.onRecoverableError)),i=t5(r,1,!1,null,null,l,d,null,v,w,O,d5),r[$n]=i.current,rm(r),new _m(i)},Ud.hydrateRoot=function(r,i,l){if(!a(r))throw Error(s(299));var d=!1,v="",w=xb,O=wb,ne=_b,me=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(O=l.onCaughtError),l.onRecoverableError!==void 0&&(ne=l.onRecoverableError),l.formState!==void 0&&(me=l.formState)),i=t5(r,1,!0,i,l??null,d,v,me,w,O,ne,d5),i.context=n5(null),l=i.current,d=aa(),d=$t(d),v=Xt(d),v.callback=null,yn(l,v,d),l=d,i.current.lanes=l,Fe(i,l),Po(i),r[$n]=i.current,rm(r),new C1(i)},Ud.version="19.2.0",Ud}var S5;function iS(){if(S5)return Am.exports;S5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Am.exports=sS(),Am.exports}var aS=iS(),N5={},oS="@vercel/speed-insights",lS="1.3.1",cS=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function uS(){return typeof window<"u"}function hS(){try{const n="production"}catch{}return"production"}function zx(){return hS()==="development"}function dS(n){return n.scriptSrc?n.scriptSrc:zx()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":n.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":n.basePath?`${n.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function fS(n={}){var e;if(!uS()||n.route===null)return null;cS();const t=dS(n);if(document.head.querySelector(`script[src*="${t}"]`))return null;n.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",n.beforeSend));const s=document.createElement("script");return s.src=t,s.defer=!0,s.dataset.sdkn=oS+(n.framework?`/${n.framework}`:""),s.dataset.sdkv=lS,n.sampleRate&&(s.dataset.sampleRate=n.sampleRate.toString()),n.route&&(s.dataset.route=n.route),n.endpoint?s.dataset.endpoint=n.endpoint:n.basePath&&(s.dataset.endpoint=`${n.basePath}/speed-insights/vitals`),n.dsn&&(s.dataset.dsn=n.dsn),zx()&&n.debug===!1&&(s.dataset.debug="false"),s.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${t}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(s),{setRoute:a=>{s.dataset.route=a??void 0}}}function pS(){if(!(typeof process>"u"||typeof N5>"u"))return N5.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function mS(n){ee.useEffect(()=>{var t;n.beforeSend&&((t=window.si)==null||t.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]);const e=ee.useRef(null);return ee.useEffect(()=>{if(e.current)n.route&&e.current(n.route);else{const t=fS({framework:n.framework??"react",basePath:n.basePath??pS(),...n});t&&(e.current=t.setRoute)}},[n.route]),null}const A5=n=>{let e;const t=new Set,s=(f,p)=>{const y=typeof f=="function"?f(e):f;if(!Object.is(y,e)){const _=e;e=p??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,_))}},a=()=>e,c={setState:s,getState:a,getInitialState:()=>h,subscribe:f=>(t.add(f),()=>t.delete(f))},h=e=n(s,a,c);return c},gS=(n=>n?A5(n):A5),bS=n=>n;function vS(n,e=bS){const t=Cn.useSyncExternalStore(n.subscribe,Cn.useCallback(()=>e(n.getState()),[n,e]),Cn.useCallback(()=>e(n.getInitialState()),[n,e]));return Cn.useDebugValue(t),t}const yS=n=>{const e=gS(n),t=s=>vS(e,s);return Object.assign(t,e),t},xS=(n=>yS);function wS(n,e){let t;try{t=n()}catch{return}return{getItem:a=>{var o;const u=h=>h===null?null:JSON.parse(h,void 0),c=(o=t.getItem(a))!=null?o:null;return c instanceof Promise?c.then(u):u(c)},setItem:(a,o)=>t.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>t.removeItem(a)}}const rg=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return rg(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return rg(s)(t)}}}},_S=(n,e)=>(t,s,a)=>{let o={storage:wS(()=>localStorage),partialize:N=>N,version:0,merge:(N,k)=>({...k,...N}),...e},u=!1;const c=new Set,h=new Set;let f=o.storage;if(!f)return n((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...N)},s,a);const p=()=>{const N=o.partialize({...s()});return f.setItem(o.name,{state:N,version:o.version})},y=a.setState;a.setState=(N,k)=>(y(N,k),p());const _=n((...N)=>(t(...N),p()),s,a);a.getInitialState=()=>_;let b;const A=()=>{var N,k;if(!f)return;u=!1,c.forEach(R=>{var D;return R((D=s())!=null?D:_)});const T=((k=o.onRehydrateStorage)==null?void 0:k.call(o,(N=s())!=null?N:_))||void 0;return rg(f.getItem.bind(f))(o.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==o.version){if(o.migrate){const D=o.migrate(R.state,R.version);return D instanceof Promise?D.then(V=>[!0,V]):[!0,D]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var D;const[V,F]=R;if(b=o.merge(F,(D=s())!=null?D:_),t(b,!0),V)return p()}).then(()=>{T?.(b,void 0),b=s(),u=!0,h.forEach(R=>R(b))}).catch(R=>{T?.(void 0,R)})};return a.persist={setOptions:N=>{o={...o,...N},N.storage&&(f=N.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>A(),hasHydrated:()=>u,onHydrate:N=>(c.add(N),()=>{c.delete(N)}),onFinishHydration:N=>(h.add(N),()=>{h.delete(N)})},o.skipHydration||A(),b||_},SS=_S,oo=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],gu=["C","G","D","A","E","B","F#","Db","Ab","Eb","Bb","F"],C5={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#","C#":"Db","D#":"Eb","F#":"Gb","G#":"Ab","A#":"Bb"},NS=[{major:"C",ii:"Dm",iii:"Em",diminished:"B"},{major:"G",ii:"Am",iii:"Bm",diminished:"F#"},{major:"D",ii:"Em",iii:"F#m",diminished:"C#"},{major:"A",ii:"Bm",iii:"C#m",diminished:"G#"},{major:"E",ii:"F#m",iii:"G#m",diminished:"D#"},{major:"B",ii:"C#m",iii:"D#m",diminished:"A#"},{major:"F#",ii:"G#m",iii:"A#m",diminished:"E#"},{major:"Db",ii:"Ebm",iii:"Fm",diminished:"C"},{major:"Ab",ii:"Bbm",iii:"Cm",diminished:"G"},{major:"Eb",ii:"Fm",iii:"Gm",diminished:"D"},{major:"Bb",ii:"Cm",iii:"Dm",diminished:"A"},{major:"F",ii:"Gm",iii:"Am",diminished:"E"}],AS={major:"",maj:"",minor:"m",diminished:"",dim:"",augmented:"+",major7:"maj7",minor7:"m7",dominant7:"7",halfDiminished7:"m75",sus2:"sus2",sus4:"sus4",dominant9:"9",dominant11:"11",dominant13:"13",major9:"maj9",minor9:"m9",add9:"add9",6:"6",m6:"m6","7sus4":"7sus4",dominant7sus4:"7sus4"};function Mh(n){return AS[n]??n}function xu(n){return n.includes("b")&&{Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#",Cb:"B",Fb:"E"}[n]||n}const CS={7:"dominant7",9:"dominant9",11:"dominant11",13:"dominant13",maj7:"major7",maj9:"major9",maj11:"major11",maj13:"major13",6:"major6",add9:"add9",m7:"minor7",m9:"minor9",m11:"minor11",m13:"minor13",m6:"minor6",dim:"diminished",dim7:"diminished7",m7b5:"halfDiminished7","m75":"halfDiminished7",7:"halfDiminished7",sus2:"sus2",sus4:"sus4","7sus4":"dominant7sus4"},TS={major:[0,4,7],minor:[0,3,7],diminished:[0,3,6],augmented:[0,4,8],sus2:[0,2,7],sus4:[0,5,7],major6:[0,4,7,9],minor6:[0,3,7,9],major7:[0,4,7,11],minor7:[0,3,7,10],dominant7:[0,4,7,10],diminished7:[0,3,6,9],halfDiminished7:[0,3,6,10],dominant7sus4:[0,5,7,10],add9:[0,4,7,14],major9:[0,4,7,11,14],minor9:[0,3,7,10,14],dominant9:[0,4,7,10,14],major11:[0,4,7,11,14,17],minor11:[0,3,7,10,14,17],dominant11:[0,4,7,10,14,17],major13:[0,4,7,11,14,21],minor13:[0,3,7,10,14,21],dominant13:[0,4,7,10,14,21]};function la(n,e){const t=xu(n),s=oo.indexOf(t);if(s===-1)return[];const a=CS[e]||e,o=TS[a];return o?o.map(u=>oo[(s+u)%12]):(console.warn(`Unknown chord quality: ${e} (resolved to ${a})`),oo.slice(s,s+1).concat([oo[(s+4)%12],oo[(s+7)%12]]))}function lu(n,e){if(!n||n.length===0)return n;const t=n.length-1,s=Math.max(0,Math.min(e,t));return s===0?n:[...n.slice(s),...n.slice(0,s)]}function kS(n){return Math.max(0,(n?.length||1)-1)}function jS(n){return["Root","1st","2nd","3rd","4th","5th","6th"][n]||`${n}th`}function T5(n,e,t,s){const o=`${n}${e==="major"||e==="maj"?"":e}`;if(!s||s===0||!t||t.length===0)return o;const u=t[s%t.length];return`${o}/${u}`}function sg(n){const e=[0,2,4,5,7,9,11],t=xu(n),s=oo.indexOf(t),a=["F","Bb","Eb","Ab","Db","Gb","Cb"].includes(n);return e.map(o=>{const u=oo[(s+o)%12];return a&&C5[u]&&u.includes("#")?C5[u]:n==="F"&&u==="A#"?"Bb":u})}function qx(n){const e=["G","D","A","E","B","F#","C#"],t=["F","Bb","Eb","Ab","Db","Gb","Cb"],s=e.indexOf(n),a=t.indexOf(n);return s>=0?{sharps:s+1,flats:0}:a>=0?{sharps:0,flats:a+1}:{sharps:0,flats:0}}function Yh(){return{C:"hsl(48, 95%, 58%)",G:"hsl(72, 75%, 50%)",D:"hsl(95, 65%, 48%)",A:"hsl(160, 60%, 45%)",E:"hsl(185, 70%, 50%)",B:"hsl(205, 75%, 55%)","F#":"hsl(235, 60%, 58%)",Gb:"hsl(235, 60%, 58%)",Db:"hsl(265, 55%, 55%)",Ab:"hsl(285, 50%, 52%)",Eb:"hsl(315, 60%, 55%)",Bb:"hsl(350, 70%, 58%)",F:"hsl(28, 85%, 55%)"}}function ES(n,e){const t=xu(n),s=xu(e),a=oo.indexOf(t),o=oo.indexOf(s);if(a===-1||o===-1)return"?";let u=(o-a+12)%12;return{0:"1",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[u]||"?"}function Ln(n){return n&&n.replace(/([A-G])b/g,"$1")}const ei=[];for(let n=0;n<256;++n)ei.push((n+256).toString(16).slice(1));function MS(n,e=0){return(ei[n[e+0]]+ei[n[e+1]]+ei[n[e+2]]+ei[n[e+3]]+"-"+ei[n[e+4]]+ei[n[e+5]]+"-"+ei[n[e+6]]+ei[n[e+7]]+"-"+ei[n[e+8]]+ei[n[e+9]]+"-"+ei[n[e+10]]+ei[n[e+11]]+ei[n[e+12]]+ei[n[e+13]]+ei[n[e+14]]+ei[n[e+15]]).toLowerCase()}let jm;const LS=new Uint8Array(16);function OS(){if(!jm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jm=crypto.getRandomValues.bind(crypto)}return jm(LS)}const DS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),k5={randomUUID:DS};function RS(n,e,t){n=n||{};const s=n.random??n.rng?.()??OS();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,MS(s)}function zs(n,e,t){return k5.randomUUID&&!n?k5.randomUUID():RS(n)}function j5(n){if(n.length===0)return"intro";const e=n.map(o=>o.type),t=e[e.length-1],s=e.slice(-4),a=e.reduce((o,u)=>(o[u]=(o[u]||0)+1,o),{});if(t==="intro")return"verse";if(s.length>=4){const[o,u,c,h]=s;if(o==="verse"&&u==="chorus"&&c==="verse"&&h==="chorus"||o==="chorus"&&u==="verse"&&c==="chorus"&&h==="verse")return"bridge"}if(t==="bridge"||t==="verse")return"chorus";if(t==="chorus"){const o=e.includes("bridge"),u=a.chorus||0;return o&&u>=3?"outro":"verse"}return t==="outro"?"verse":t==="pre-chorus"||t==="interlude"||t==="solo"||t==="breakdown"?"chorus":"verse"}const qs=[4,4],Yd=(n=qs)=>{const[e,t]=n;return!e||!t?4:e*(4/t)},du=n=>{const e=Yd(n);return{id:zs(),beats:[{id:zs(),chord:null,duration:e}]}},zo=n=>n?`${n.sectionId}:${n.slotId}`:"",qg=n=>{const e=[];return n.forEach(t=>{t.measures.forEach(s=>{s.beats.forEach(a=>{e.push({sectionId:t.id,slotId:a.id,chord:a.chord??null})})})}),e},cu=(n,e)=>{if(!e)return null;for(const t of n)if(t.id===e.sectionId){for(const s of t.measures)for(const a of s.beats)if(a.id===e.slotId)return a.chord??null}return null},E5=(n,e)=>e?qg(n).findIndex(s=>s.sectionId===e.sectionId&&s.slotId===e.slotId):-1,IS=(n,e,t)=>{const s=qg(n),a=s.findIndex(h=>h.sectionId===e.sectionId&&h.slotId===e.slotId),o=s.findIndex(h=>h.sectionId===t.sectionId&&h.slotId===t.slotId);if(a===-1||o===-1)return[];const[u,c]=a<=o?[a,o]:[o,a];return s.slice(u,c+1).map(({sectionId:h,slotId:f})=>({sectionId:h,slotId:f}))},W1=(n,e)=>e?n.some(t=>t.id===e.sectionId&&t.measures.some(s=>s.beats.some(a=>a.id===e.slotId))):!1,uu=(n,e,t,s,a)=>{const o=e&&t?{sectionId:e,slotId:t}:null,u=s.filter(p=>W1(n,p)),c=W1(n,o),h=u[u.length-1]||(c?o:null),f=a&&W1(n,a);return{selectedSectionId:h?.sectionId??null,selectedSlotId:h?.slotId??null,selectedSlots:u,selectionAnchor:f?a:u[0]??h??null}},ig=100,Xd=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)),Ar=n=>{const e=Xd(n.currentSong),t=[...n.historyPast,e].slice(-ig);return{historyPast:t,historyFuture:[],canUndo:t.length>0,canRedo:!1}},M5=(n,e,t,s,a)=>{const o=uu(n.sections,e,t,s,a),u=o.selectedSectionId&&o.selectedSlotId?{sectionId:o.selectedSectionId,slotId:o.selectedSlotId}:null,c=u?cu(n.sections,u):null;return{...o,selectedChord:c}},FS=(n,e,t)=>{let s=!1;for(const a of n)for(const o of a.measures)for(const u of o.beats){if(s)return{sectionId:a.id,slotId:u.id};a.id===e&&u.id===t&&(s=!0)}return null},Hd={id:"default",title:"Untitled Song",artist:"",key:"C",tempo:120,timeSignature:[4,4],sections:[{id:"verse-1",name:"Verse 1",type:"verse",timeSignature:qs,measures:Array(4).fill(null).map(()=>du(qs))},{id:"chorus-1",name:"Chorus",type:"chorus",timeSignature:qs,measures:Array(4).fill(null).map(()=>du(qs))}],notes:"",createdAt:new Date,updatedAt:new Date},Em={root:"C",quality:"major",numeral:"I",notes:["C","E","G"],symbol:"C"},ln=xS()(SS(n=>({currentSong:Hd,historyPast:[],historyFuture:[],canUndo:!1,canRedo:!1,selectedKey:"C",wheelRotation:0,wheelMode:"fixed",chordPanelVisible:!0,timelineVisible:!0,songMapVisible:!1,songInfoModalVisible:!1,collapsedSections:{},chordPanelGuitarExpanded:!1,chordPanelVoicingsExpanded:!1,chordPanelAttention:!1,selectedChord:Em,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,isPlaying:!1,playingSectionId:null,playingSlotId:null,isLooping:!1,tempo:120,volume:.8,instrument:"piano",isMuted:!1,setKey:(e,t)=>n(s=>{if(s.wheelMode==="rotating"&&!t?.skipRotation){const a=gu.indexOf(e);if(a!==-1){const o=s.wheelRotation,c=-(a*30)-o,h=c-360*Math.round(c/360);return{selectedKey:e,wheelRotation:o+h}}}return{selectedKey:e}}),rotateWheel:e=>n(t=>({wheelRotation:t.wheelMode==="rotating"?t.wheelRotation+(e==="cw"?-30:30):0})),toggleWheelMode:()=>n(e=>{const t=e.wheelMode==="rotating"?"fixed":"rotating";let s=0;if(t==="rotating"){const a=gu.indexOf(e.selectedKey);a!==-1&&(s=-(a*30))}return{wheelMode:t,wheelRotation:s}}),toggleChordPanel:()=>n(e=>({chordPanelVisible:!e.chordPanelVisible})),toggleTimeline:()=>n(e=>({timelineVisible:!e.timelineVisible})),openTimeline:()=>n(e=>{if(typeof window<"u"&&window.dispatchEvent(new CustomEvent("openMobileTimeline")),!e.selectedSectionId||!e.selectedSlotId){const t=e.currentSong.sections;if(t.length>0){const s=e.selectedSectionId&&t.find(a=>a.id===e.selectedSectionId)||t[0];if(s.measures.length>0&&s.measures[0].beats.length>0){const a=s.measures[0].beats[0],o={sectionId:s.id,slotId:a.id},u=a.chord??null;return{timelineVisible:!0,selectedSectionId:s.id,selectedSlotId:a.id,selectedSlots:[o],selectionAnchor:o,selectedChord:u}}}}return{timelineVisible:!0}}),toggleSongMap:e=>n(t=>({songMapVisible:e!==void 0?e:!t.songMapVisible})),toggleSongInfoModal:e=>n(t=>({songInfoModalVisible:e!==void 0?e:!t.songInfoModalVisible})),toggleSectionCollapsed:e=>n(t=>{const s={...t.collapsedSections,[e]:!t.collapsedSections?.[e]};return s[e]||delete s[e],{collapsedSections:s}}),setChordPanelGuitarExpanded:e=>n({chordPanelGuitarExpanded:e}),setChordPanelVoicingsExpanded:e=>n({chordPanelVoicingsExpanded:e}),pulseChordPanel:()=>{n({chordPanelAttention:!0}),setTimeout(()=>n({chordPanelAttention:!1}),600)},setSelectedChord:e=>n({selectedChord:e}),setSelectedSlot:(e,t)=>n(s=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,selectedChord:null};const a={sectionId:e,slotId:t},o=cu(s.currentSong.sections,a);return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[a],selectionAnchor:a,selectedChord:o??null}}),selectSlotOnly:(e,t)=>n(()=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null};const s={sectionId:e,slotId:t};return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[s],selectionAnchor:s}}),setSelectedSlots:e=>n(t=>{const s=e.filter(Boolean),a=s[s.length-1]??null,o=cu(t.currentSong.sections,a);return{selectedSlots:s,selectedSectionId:a?.sectionId??null,selectedSlotId:a?.slotId??null,selectionAnchor:s[0]??a??null,selectedChord:o??null}}),toggleSlotSelection:(e,t)=>n(s=>{const a=s.selectedSlots.some(f=>f.sectionId===e&&f.slotId===t),o=a?s.selectedSlots.filter(f=>!(f.sectionId===e&&f.slotId===t)):[...s.selectedSlots,{sectionId:e,slotId:t}],u=o[o.length-1]??null,c=cu(s.currentSong.sections,u),h=a&&s.selectionAnchor&&zo(s.selectionAnchor)===zo({sectionId:e,slotId:t});return{selectedSlots:o,selectedSectionId:u?.sectionId??null,selectedSlotId:u?.slotId??null,selectionAnchor:h?o[0]??u??null:s.selectionAnchor??u??null,selectedChord:c??null}}),selectRangeTo:(e,t)=>n(s=>{const a={sectionId:e,slotId:t},o=s.selectionAnchor||s.selectedSlots[s.selectedSlots.length-1]||(s.selectedSectionId&&s.selectedSlotId?{sectionId:s.selectedSectionId,slotId:s.selectedSlotId}:a),c=W1(s.currentSong.sections,o)?o:a,h=IS(s.currentSong.sections,c,a),f=h.length?h:[a],p=cu(s.currentSong.sections,a);return{selectedSlots:f,selectedSectionId:a.sectionId,selectedSlotId:a.slotId,selectionAnchor:c,selectedChord:p??null}}),moveSelection:(e,t,s="move")=>{let a=!1;return n(o=>{const u=qg(o.currentSong.sections),c=E5(o.currentSong.sections,e),h=E5(o.currentSong.sections,t);if(c===-1||h===-1)return{};const p=(o.selectedSlots.length?o.selectedSlots:[e]).map(L=>{const B=u.findIndex(te=>te.sectionId===L.sectionId&&te.slotId===L.slotId);return B>=0?{idx:B,slot:u[B]}:null}).filter(L=>!!L).sort((L,B)=>L.idx-B.idx);if(!p.length)return{};const y=h-c,_=p.map(({idx:L})=>L+y);if(_.some(L=>L<0||L>=u.length))return{};const b=_.map(L=>u[L]);if(p.length===1&&s==="move"){const L=p[0].slot,B=b[0],te=Ar(o),j=o.currentSong.sections.map(X=>({...X,measures:X.measures.map(re=>({...re,beats:re.beats.map(le=>le.id===L.slotId&&X.id===L.sectionId?{...le,chord:B.chord}:le.id===B.slotId&&X.id===B.sectionId?{...le,chord:L.chord}:le)}))}));a=!0;const I=o.selectionAnchor&&zo(o.selectionAnchor)===zo(e),K=uu(j,t.sectionId,t.slotId,[{sectionId:B.sectionId,slotId:B.slotId}],I?{sectionId:B.sectionId,slotId:B.slotId}:o.selectionAnchor),P=K.selectedSectionId&&K.selectedSlotId?{sectionId:K.selectedSectionId,slotId:K.selectedSlotId}:null,ie=cu(j,P);return{...te,currentSong:{...o.currentSong,sections:j},selectedSectionId:K.selectedSectionId,selectedSlotId:K.selectedSlotId,selectedSlots:K.selectedSlots,selectionAnchor:K.selectionAnchor,selectedChord:ie??null}}const A=new Map;p.forEach((L,B)=>{A.set(zo(b[B]),L.slot.chord??null)});const N=new Set;s==="move"&&p.forEach((L,B)=>{const te=zo(L.slot),j=zo(b[B]);te!==j&&N.add(te)});const k=Ar(o),T=o.currentSong.sections.map(L=>({...L,measures:L.measures.map(B=>({...B,beats:B.beats.map(te=>{const j=zo({sectionId:L.id,slotId:te.id});return A.has(j)?{...te,chord:A.get(j)??null}:N.has(j)?{...te,chord:null}:te})}))}));a=!0;const R=zo(o.selectionAnchor),D=p.find(L=>zo(L.slot)===R),V=D?{sectionId:b[p.indexOf(D)].sectionId,slotId:b[p.indexOf(D)].slotId}:o.selectionAnchor,F=uu(T,t.sectionId,t.slotId,b.map(L=>({sectionId:L.sectionId,slotId:L.slotId})),V??null),W=F.selectedSectionId&&F.selectedSlotId?{sectionId:F.selectedSectionId,slotId:F.selectedSlotId}:null,H=cu(T,W);return{...k,currentSong:{...o.currentSong,sections:T},selectedSectionId:F.selectedSectionId,selectedSlotId:F.selectedSlotId,selectedSlots:F.selectedSlots,selectionAnchor:F.selectionAnchor,selectedChord:H??null}}),a},selectNextSlotAfter:(e,t)=>{let s=!1;return n(a=>{const o=FS(a.currentSong.sections,e,t);if(!o)return{};const u=a.currentSong.sections.find(c=>c.id===o.sectionId)?.measures.flatMap(c=>c.beats).find(c=>c.id===o.slotId)?.chord??null;return s=!0,{selectedSectionId:o.sectionId,selectedSlotId:o.slotId,selectedChord:u,selectedSlots:[{sectionId:o.sectionId,slotId:o.slotId}],selectionAnchor:{sectionId:o.sectionId,slotId:o.slotId}}}),s},setTempo:e=>n(t=>({...Ar(t),tempo:e,currentSong:{...t.currentSong,tempo:e}})),setVolume:e=>n({volume:e}),setInstrument:e=>n({instrument:e}),setIsPlaying:e=>n({isPlaying:e}),setPlayingSlot:(e,t)=>n({playingSectionId:e,playingSlotId:t}),toggleLoop:()=>n(e=>({isLooping:!e.isLooping})),toggleMute:()=>n(e=>({isMuted:!e.isMuted})),setTitle:e=>n(t=>({...Ar(t),currentSong:{...t.currentSong,title:e}})),setArtist:e=>n(t=>({...Ar(t),currentSong:{...t.currentSong,artist:e}})),setTags:e=>n(t=>({...Ar(t),currentSong:{...t.currentSong,tags:e}})),setSongTimeSignature:e=>n(t=>({...Ar(t),currentSong:{...t.currentSong,timeSignature:e}})),loadSong:e=>n(t=>{const s=e.key||"C",a=e.tempo??Hd.tempo;let o=0;if(t.wheelMode==="rotating"){const c=gu.indexOf(s);c!==-1&&(o=-(c*30))}return{...Ar(t),currentSong:{...e,tempo:a},selectedKey:s,wheelRotation:o,selectedChord:Em,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:a}}),newSong:()=>n(e=>({...Ar(e),currentSong:{...Hd,id:zs(),title:"Untitled Song",createdAt:new Date,updatedAt:new Date,tempo:Hd.tempo,sections:[{id:zs(),name:"Verse 1",type:"verse",timeSignature:qs,measures:Array(4).fill(null).map(()=>du(qs))},{id:zs(),name:"Chorus",type:"chorus",timeSignature:qs,measures:Array(4).fill(null).map(()=>du(qs))}]},selectedKey:"C",wheelRotation:0,selectedChord:Em,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:Hd.tempo})),addSection:e=>n(t=>{const s={id:zs(),name:e.charAt(0).toUpperCase()+e.slice(1),type:e,timeSignature:t.currentSong.timeSignature||qs,measures:Array(4).fill(null).map(()=>du(t.currentSong.timeSignature||qs))};return{...Ar(t),currentSong:{...t.currentSong,sections:[...t.currentSong.sections,s]}}}),addSuggestedSection:()=>n(e=>{const t=j5(e.currentSong.sections),s={id:zs(),name:t.charAt(0).toUpperCase()+t.slice(1),type:t,timeSignature:e.currentSong.timeSignature||qs,measures:Array(4).fill(null).map(()=>du(e.currentSong.timeSignature||qs))};return{...Ar(e),currentSong:{...e.currentSong,sections:[...e.currentSong.sections,s]}}}),addCustomSection:(e,t,s,a)=>n(o=>{const u=o.currentSong.timeSignature||qs,c=Yd(u),h=a?.beatsPerChord??4,f=c/h;let p;a?.totalBars?p=a.totalBars:f>=1?p=Math.ceil(s.length/f):p=s.length*Math.ceil(1/f);const y=[];if(f>=1)for(let k=0;k<p;k++){const T=[];for(let R=0;R<f;R++){const D=Math.floor(k*f+R);T.push({id:zs(),chord:s[D]||null,duration:h})}y.push({id:zs(),beats:T})}else for(let k=0;k<p;k++)y.push({id:zs(),beats:[{id:zs(),chord:s[k]||null,duration:c}]});const _={id:zs(),name:e,type:t,timeSignature:u,measures:y},b=Ar(o),A=y[0]?.beats[0]?.id,N=y[0]?.beats[0]?.chord??null;return{...b,currentSong:{...o.currentSong,sections:[...o.currentSong.sections,_]},selectedSectionId:_.id,selectedSlotId:A??null,selectedSlots:A?[{sectionId:_.id,slotId:A}]:[],selectionAnchor:A?{sectionId:_.id,slotId:A}:null,selectedChord:N}}),getSuggestedSectionType:()=>{const e=ln.getState();return j5(e.currentSong.sections)},updateSection:(e,t)=>n(s=>({...Ar(s),currentSong:{...s.currentSong,sections:s.currentSong.sections.map(o=>o.id===e?{...o,...t}:o)}})),removeSection:e=>n(t=>{const s=Ar(t),{[e]:a,...o}=t.collapsedSections||{};return{...s,currentSong:{...t.currentSong,sections:t.currentSong.sections.filter(u=>u.id!==e)},collapsedSections:o}}),clearSection:e=>n(t=>{const s=t.currentSong.sections.find(c=>c.id===e);if(!s)return{};if(!s.measures.some(c=>c.beats.some(h=>h.chord!==null)))return{};const o=Ar(t),u=t.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(h=>({...h,beats:h.beats.map(f=>({...f,chord:null}))}))});return{...o,currentSong:{...t.currentSong,sections:u}}}),duplicateSection:e=>n(t=>{const s=t.currentSong.sections.find(h=>h.id===e);if(!s)return{};const a=Ar(t),o={...s,id:zs(),name:`${s.name} (Copy)`,timeSignature:s.timeSignature||t.currentSong.timeSignature||qs,measures:s.measures.map(h=>({...h,id:zs(),beats:h.beats.map(f=>({...f,id:zs()}))}))},u=t.currentSong.sections.findIndex(h=>h.id===e),c=[...t.currentSong.sections];return c.splice(u+1,0,o),{...a,currentSong:{...t.currentSong,sections:c}}}),reorderSections:e=>n(t=>({...Ar(t),currentSong:{...t.currentSong,sections:e}})),setSectionMeasures:(e,t)=>n(s=>{const a=Math.max(1,Math.min(32,Math.round(t))),o=s.currentSong.sections.map(h=>{if(h.id!==e)return h;const f=h.timeSignature||s.currentSong.timeSignature||qs;let p=[...h.measures];if(p.length<a)for(;p.length<a;)p.push(du(f));else p.length>a&&(p=p.slice(0,a));return{...h,measures:p}}),u=uu(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Ar(s),currentSong:{...s.currentSong,sections:o},...u}}),setSectionTimeSignature:(e,t)=>n(s=>{const a=s.currentSong.sections.map(c=>{if(c.id!==e)return c;const h=Yd(t);return{...c,timeSignature:t,measures:c.measures.map(f=>({...f,beats:[{id:zs(),chord:null,duration:h}]}))}}),o=uu(a,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Ar(s),currentSong:{...s.currentSong,sections:a},...o}}),setMeasureSubdivision:(e,t,s)=>n(a=>{const o=Math.max(1,Math.min(32,Math.round(s))),u=a.currentSong.sections.map(f=>{if(f.id!==e)return f;const p=f.timeSignature||a.currentSong.timeSignature||qs,y=Yd(p);return{...f,measures:f.measures.map(_=>{if(_.id!==t)return _;const b=y/o,A=Array.from({length:o}).map((N,k)=>{const T=_.beats[k];return{id:T?.id??zs(),chord:T?.chord??null,duration:b}});return{..._,beats:A}})}}),c=uu(u,a.selectedSectionId,a.selectedSlotId,a.selectedSlots,a.selectionAnchor);return{...Ar(a),currentSong:{...a.currentSong,sections:u},...c}}),setSectionSubdivision:(e,t)=>n(s=>{const a=Math.max(1,Math.min(32,Math.round(t))),o=s.currentSong.sections.map(h=>{if(h.id!==e)return h;const f=h.timeSignature||s.currentSong.timeSignature||qs,y=Yd(f)/a;return{...h,measures:h.measures.map(_=>{const b=Array.from({length:a}).map((A,N)=>{const k=_.beats[N];return{id:k?.id??zs(),chord:k?.chord??null,duration:y}});return{..._,beats:b}})}}),u=uu(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Ar(s),currentSong:{...s.currentSong,sections:o},...u}}),addChordToSlot:(e,t,s)=>n(a=>{const o=Ar(a),u=a.currentSong.sections.map(c=>c.id!==t?c:{...c,measures:c.measures.map(h=>({...h,beats:h.beats.map(f=>f.id!==s?f:{...f,chord:e})}))});return{...o,currentSong:{...a.currentSong,sections:u}}}),clearSlot:(e,t)=>n(s=>{if(!s.currentSong.sections.some(c=>c.id===e&&c.measures.some(h=>h.beats.some(f=>f.id===t&&f.chord))))return{};const o=Ar(s),u=s.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(h=>({...h,beats:h.beats.map(f=>f.id!==t?f:{...f,chord:null})}))});return{...o,currentSong:{...s.currentSong,sections:u}}}),clearTimeline:()=>n(e=>{if(!e.currentSong.sections.some(o=>o.measures.some(u=>u.beats.some(c=>c.chord!==null))))return{};const s=Ar(e),a=e.currentSong.sections.map(o=>({...o,measures:o.measures.map(u=>({...u,beats:u.beats.map(c=>({...c,chord:null}))}))}));return{...s,currentSong:{...e.currentSong,sections:a},selectedChord:null}}),moveChord:(e,t,s,a)=>n(o=>{let u=null,c=null;if(o.currentSong.sections.forEach(p=>{p.measures.forEach(y=>{y.beats.forEach(_=>{_.id===t&&(u=_.chord),_.id===a&&(c=_.chord)})})}),!u&&!c)return{};const h=Ar(o),f=o.currentSong.sections.map(p=>({...p,measures:p.measures.map(y=>({...y,beats:y.beats.map(_=>_.id===t?{..._,chord:c}:_.id===a?{..._,chord:u}:_)}))}));return{...h,currentSong:{...o.currentSong,sections:f}}}),undo:()=>n(e=>{if(!e.historyPast.length)return{};const t=e.historyPast[e.historyPast.length-1],s=e.historyPast.slice(0,-1),a=[Xd(e.currentSong),...e.historyFuture].slice(0,ig),o=M5(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:Xd(t),historyPast:s,historyFuture:a,canUndo:s.length>0,canRedo:a.length>0,tempo:t.tempo??e.tempo,...o}}),redo:()=>n(e=>{if(!e.historyFuture.length)return{};const t=e.historyFuture[0],s=e.historyFuture.slice(1),a=[...e.historyPast,Xd(e.currentSong)].slice(-ig),o=M5(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:Xd(t),historyPast:a,historyFuture:s,canUndo:a.length>0,canRedo:s.length>0,tempo:t.tempo??e.tempo,...o}})}),{name:"songwriter-wheel-storage",partialize:n=>({currentSong:n.currentSong,tempo:n.tempo,volume:n.volume,instrument:n.instrument,isMuted:n.isMuted})}));function Nc(n,e,t,s){const a=(s-90)*Math.PI/180;return{x:n+t*Math.cos(a),y:e+t*Math.sin(a)}}function VS(n,e,t,s,a){const o=Nc(n,e,t,s),u=Nc(n,e,t,a),c=a-s<=180?"0":"1";return["M",o.x,o.y,"A",t,t,0,c,1,u.x,u.y].join(" ")}function BS(n,e,t,s,a,o){const u=Nc(n,e,s,o),c=Nc(n,e,s,a),h=Nc(n,e,t,o),f=Nc(n,e,t,a),p=o-a<=180?"0":"1";return["M",u.x,u.y,"A",s,s,0,p,0,c.x,c.y,"L",f.x,f.y,"A",t,t,0,p,1,h.x,h.y,"Z"].join(" ")}function Ux(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=Ux(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Rt(){for(var n,e,t=0,s="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=Ux(n))&&(s&&(s+=" "),s+=e);return s}const Hx="15.1.22",L5=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),O5=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),ag=(n,e)=>({startTime:e,type:"setValue",value:n}),Wx=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),Gx=(n,e,{startTime:t,target:s,timeConstant:a})=>s+(e-s)*Math.exp((t-n)/a),Ch=n=>n.type==="exponentialRampToValue",sp=n=>n.type==="linearRampToValue",_c=n=>Ch(n)||sp(n),Ug=n=>n.type==="setValue",Tl=n=>n.type==="setValueCurve",ip=(n,e,t,s)=>{const a=n[e];return a===void 0?s:_c(a)||Ug(a)?a.value:Tl(a)?a.values[a.values.length-1]:Gx(t,ip(n,e-1,a.startTime,s),a)},D5=(n,e,t,s,a)=>t===void 0?[s.insertTime,a]:_c(t)?[t.endTime,t.value]:Ug(t)?[t.startTime,t.value]:Tl(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,ip(n,e-1,t.startTime,a)],og=n=>n.type==="cancelAndHold",lg=n=>n.type==="cancelScheduledValues",yc=n=>og(n)||lg(n)?n.cancelTime:Ch(n)||sp(n)?n.endTime:n.startTime,R5=(n,e,t,{endTime:s,value:a})=>t===a?a:0<t&&0<a||t<0&&a<0?t*(a/t)**((n-e)/(s-e)):0,I5=(n,e,t,{endTime:s,value:a})=>t+(n-e)/(s-e)*(a-t),PS=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},zS=(n,{duration:e,startTime:t,values:s})=>{const a=(n-t)/e*(s.length-1);return PS(s,a)},j1=n=>n.type==="setTarget";class qS{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=yc(e);if(og(e)||lg(e)){const s=this._automationEvents.findIndex(o=>lg(e)&&Tl(o)?o.startTime+o.duration>=t:yc(o)>=t),a=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),og(e)){const o=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&_c(a)){if(o!==void 0&&j1(o))throw new Error("The internal list is malformed.");const u=o===void 0?a.insertTime:Tl(o)?o.startTime+o.duration:yc(o),c=o===void 0?this._defaultValue:Tl(o)?o.values[o.values.length-1]:o.value,h=Ch(a)?R5(t,u,c,a):I5(t,u,c,a),f=Ch(a)?L5(h,t,this._currenTime):O5(h,t,this._currenTime);this._automationEvents.push(f)}if(o!==void 0&&j1(o)&&this._automationEvents.push(ag(this.getValue(t),t)),o!==void 0&&Tl(o)&&o.startTime+o.duration>t){const u=t-o.startTime,c=(o.values.length-1)/o.duration,h=Math.max(2,1+Math.ceil(u*c)),f=u/(h-1)*c,p=o.values.slice(0,h);if(f<1)for(let y=1;y<h;y+=1){const _=f*y%1;p[y]=o.values[y-1]*(1-_)+o.values[y]*_}this._automationEvents[this._automationEvents.length-1]=Wx(p,o.startTime,u)}}}else{const s=this._automationEvents.findIndex(u=>yc(u)>t),a=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(a!==void 0&&Tl(a)&&yc(a)+a.duration>t)return!1;const o=Ch(e)?L5(e.value,e.endTime,this._currenTime):sp(e)?O5(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(o);else{if(Tl(e)&&t+e.duration>yc(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,o)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>yc(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),a=s[0];j1(a)&&s.unshift(ag(ip(this._automationEvents,t-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(u=>yc(u)>e),s=this._automationEvents[t],a=(t===-1?this._automationEvents.length:t)-1,o=this._automationEvents[a];if(o!==void 0&&j1(o)&&(s===void 0||!_c(s)||s.insertTime>e))return Gx(e,ip(this._automationEvents,a-1,o.startTime,this._defaultValue),o);if(o!==void 0&&Ug(o)&&(s===void 0||!_c(s)))return o.value;if(o!==void 0&&Tl(o)&&(s===void 0||!_c(s)||o.startTime+o.duration>e))return e<o.startTime+o.duration?zS(e,o):o.values[o.values.length-1];if(o!==void 0&&_c(o)&&(s===void 0||!_c(s)))return o.value;if(s!==void 0&&Ch(s)){const[u,c]=D5(this._automationEvents,a,o,s,this._defaultValue);return R5(e,u,c,s)}if(s!==void 0&&sp(s)){const[u,c]=D5(this._automationEvents,a,o,s,this._defaultValue);return I5(e,u,c,s)}return this._defaultValue}}const US=n=>({cancelTime:n,type:"cancelAndHold"}),HS=n=>({cancelTime:n,type:"cancelScheduledValues"}),WS=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),GS=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),$S=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),YS=()=>new DOMException("","AbortError"),XS=n=>(e,t,[s,a,o],u)=>{n(e[a],[t,s,o],c=>c[0]===t&&c[1]===s,u)},ZS=n=>(e,t,s)=>{const a=[];for(let o=0;o<s.numberOfInputs;o+=1)a.push(new Set);n.set(e,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},KS=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},zh=new WeakSet,$x=new WeakMap,Hg=new WeakMap,Yx=new WeakMap,Wg=new WeakMap,Ip=new WeakMap,Xx=new WeakMap,cg=new WeakMap,ug=new WeakMap,hg=new WeakMap,Zx={construct(){return Zx}},QS=n=>{try{const e=new Proxy(n,Zx);new e}catch{return!1}return!0},F5=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,V5=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),a=s.match(F5);for(;a!==null;){const o=a[1].slice(1,-1),u=a[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());t.push(u),s=s.slice(a[0].length).replace(/^[\s]+/,""),a=s.match(F5)}return[t.join(";"),s]},B5=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},P5=n=>{if(!QS(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},JS=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>{let b=0;return(A,N,k={credentials:"omit"})=>{const T=p.get(A);if(T!==void 0&&T.has(N))return Promise.resolve();const R=f.get(A);if(R!==void 0){const F=R.get(N);if(F!==void 0)return F}const D=o(A),V=D.audioWorklet===void 0?a(N).then(([F,W])=>{const[H,L]=V5(F,W),B=`${H};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${L}
})})(window,'_AWGS')`;return t(B)}).then(()=>{const F=_._AWGS.pop();if(F===void 0)throw new SyntaxError;s(D.currentTime,D.sampleRate,()=>F(class{},void 0,(W,H)=>{if(W.trim()==="")throw e();const L=ug.get(D);if(L!==void 0){if(L.has(W))throw e();P5(H),B5(H.parameterDescriptors),L.set(W,H)}else P5(H),B5(H.parameterDescriptors),ug.set(D,new Map([[W,H]]))},D.sampleRate,void 0,void 0))}):Promise.all([a(N),Promise.resolve(n(y,y))]).then(([[F,W],H])=>{const L=b+1;b=L;const[B,te]=V5(F,W),P=`${B};((AudioWorkletProcessor,registerProcessor)=>{${te}
})(${H?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${H?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${H?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${L}',class extends AudioWorkletProcessor{process(){return !1}})`,ie=new Blob([P],{type:"application/javascript; charset=utf-8"}),X=URL.createObjectURL(ie);return D.audioWorklet.addModule(X,k).then(()=>{if(c(D))return D;const re=u(D);return re.audioWorklet.addModule(X,k).then(()=>re)}).then(re=>{if(h===null)throw new SyntaxError;try{new h(re,`__sac${L}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(X))});return R===void 0?f.set(A,new Map([[N,V]])):R.set(N,V),V.then(()=>{const F=p.get(A);F===void 0?p.set(A,new Set([N])):F.add(N)}).finally(()=>{const F=f.get(A);F!==void 0&&F.delete(N)}),V}},ho=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},Fp=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},Kx=(n,e,t,s)=>{const a=ho(n,e),o=Fp(a,u=>u[0]===t&&u[1]===s);return a.size===0&&n.delete(e),o},gf=n=>ho(Xx,n),qh=n=>{if(zh.has(n))throw new Error("The AudioNode is already stored.");zh.add(n),gf(n).forEach(e=>e(!0))},Qx=n=>"port"in n,bf=n=>{if(!zh.has(n))throw new Error("The AudioNode is not stored.");zh.delete(n),gf(n).forEach(e=>e(!1))},dg=(n,e)=>{!Qx(n)&&e.every(t=>t.size===0)&&bf(n)},e6=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>{const b=new WeakMap;return(A,N,k,T,R)=>{const{activeInputs:D,passiveInputs:V}=o(N),{outputs:F}=o(A),W=c(A),H=L=>{const B=h(N),te=h(A);if(L){const j=Kx(V,A,k,T);n(D,A,j,!1),!R&&!y(A)&&t(te,B,k,T),_(N)&&qh(N)}else{const j=s(D,A,k,T);e(V,T,j,!1),!R&&!y(A)&&a(te,B,k,T);const I=u(N);if(I===0)p(N)&&dg(N,D);else{const K=b.get(N);K!==void 0&&clearTimeout(K),b.set(N,setTimeout(()=>{p(N)&&dg(N,D)},I*1e3))}}};return f(F,[N,k,T],L=>L[0]===N&&L[1]===k&&L[2]===T,!0)?(W.add(H),p(A)?n(D,A,[k,T,H],!0):e(V,T,[A,k,H],!0),!0):!1}},t6=n=>(e,t,[s,a,o],u)=>{const c=e.get(s);c===void 0?e.set(s,new Set([[a,t,o]])):n(c,[a,t,o],h=>h[0]===a&&h[1]===t,u)},n6=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const a=()=>{t.removeEventListener("ended",a),t.disconnect(s),s.disconnect()};t.addEventListener("ended",a)},r6=n=>(e,t)=>{n(e).add(t)},s6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},i6=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=a(c),p={...s6,...h},y=s(f,p),_=o(f)?e():null;super(c,!1,y,_),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const h=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=h,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const h=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=h,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},di=(n,e)=>n.context===e,a6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!di(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=n(u,f)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},ap=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Yo=()=>new DOMException("","IndexSizeError"),Gg=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?Yo():s}})(n.getChannelData)},o6={numberOfChannels:1},l6=(n,e,t,s,a,o,u,c)=>{let h=null;return class Jx{constructor(p){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:_,sampleRate:b}={...o6,...p};h===null&&(h=new a(1,1,44100));const A=s!==null&&e(o,o)?new s({length:y,numberOfChannels:_,sampleRate:b}):h.createBuffer(_,y,b);if(A.numberOfChannels===0)throw t();return typeof A.copyFromChannel!="function"?(u(A),Gg(A)):e(ap,()=>ap(A))||c(A),n.add(A),A}static[Symbol.hasInstance](p){return p!==null&&typeof p=="object"&&Object.getPrototypeOf(p)===Jx.prototype||n.has(p)}}},Ui=-34028234663852886e22,yi=-Ui,jl=n=>zh.has(n),c6={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},u6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_={...c6,...p},b=a(y,_),A=u(y),N=A?e():null;super(f,!1,b,N),this._audioBufferSourceNodeRenderer=N,this._isBufferNullified=!1,this._isBufferSet=_.buffer!==null,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=t(this,A,b.playbackRate,yi,Ui)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(f){if(this._nativeAudioBufferSourceNode.buffer=f,f!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(f){this._nativeAudioBufferSourceNode.loop=f}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(f){this._nativeAudioBufferSourceNode.loopEnd=f}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(f){this._nativeAudioBufferSourceNode.loopStart=f}get onended(){return this._onended}set onended(f){const p=typeof f=="function"?c(this,f):null;this._nativeAudioBufferSourceNode.onended=p;const y=this._nativeAudioBufferSourceNode.onended;this._onended=y!==null&&y===p?f:y}get playbackRate(){return this._playbackRate}start(f=0,p=0,y){if(this._nativeAudioBufferSourceNode.start(f,p,y),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=y===void 0?[f,p]:[f,p,y]),this.context.state!=="closed"){qh(this);const _=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",_),jl(this)&&bf(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",_)}}stop(f=0){this._nativeAudioBufferSourceNode.stop(f),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=f)}},h6=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const h=async(f,p)=>{let y=t(f);const _=di(y,p);if(!_){const b={buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value};y=e(p,b),u!==null&&y.start(...u),c!==null&&y.stop(c)}return o.set(p,y),_?await n(p,f.playbackRate,y.playbackRate):await s(p,f.playbackRate,y.playbackRate),await a(f,p,y),y};return{set start(f){u=f},set stop(f){c=f},render(f,p){const y=o.get(p);return y!==void 0?Promise.resolve(y):h(f,p)}}},d6=n=>"playbackRate"in n,f6=n=>"frequency"in n&&"gain"in n,p6=n=>"offset"in n,m6=n=>!("frequency"in n)&&"gain"in n,g6=n=>"detune"in n&&"frequency"in n&&!("gain"in n),b6=n=>"pan"in n,xi=n=>ho($x,n),vf=n=>ho(Yx,n),fg=(n,e)=>{const{activeInputs:t}=xi(n);t.forEach(a=>a.forEach(([o])=>{e.includes(n)||fg(o,[...e,n])}));const s=d6(n)?[n.playbackRate]:Qx(n)?Array.from(n.parameters.values()):f6(n)?[n.Q,n.detune,n.frequency,n.gain]:p6(n)?[n.offset]:m6(n)?[n.gain]:g6(n)?[n.detune,n.frequency]:b6(n)?[n.pan]:[];for(const a of s){const o=vf(a);o!==void 0&&o.activeInputs.forEach(([u])=>fg(u,e))}jl(n)&&bf(n)},e3=n=>{fg(n.destination,[])},v6=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),y6=(n,e,t,s,a,o,u,c,h)=>class extends n{constructor(p={}){if(h===null)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new h(p)}catch(A){throw A.code===12&&A.message==="sampleRate is not in range"?t():A}if(y===null)throw s();if(!v6(p.latencyHint))throw new TypeError(`The provided value '${p.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(p.sampleRate!==void 0&&y.sampleRate!==p.sampleRate)throw t();super(y,2);const{latencyHint:_}=p,{sampleRate:b}=y;if(this._baseLatency=typeof y.baseLatency=="number"?y.baseLatency:_==="balanced"?512/b:_==="interactive"||_===void 0?256/b:_==="playback"?1024/b:Math.max(2,Math.min(128,Math.round(_*b/128)))*128/b,this._nativeAudioContext=y,h.name==="webkitAudioContext"?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,y.state==="running"){this._state="suspended";const A=()=>{this._state==="suspended"&&(this._state=null),y.removeEventListener("statechange",A)};y.addEventListener("statechange",A)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),e3(this)}))}createMediaElementSource(p){return new a(this,{mediaElement:p})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(p){return new u(this,{mediaStream:p})}createMediaStreamTrackSource(p){return new c(this,{mediaStreamTrack:p})}resume(){return this._state==="suspended"?new Promise((p,y)=>{const _=()=>{this._nativeAudioContext.removeEventListener("statechange",_),this._nativeAudioContext.state==="running"?p():this.resume().then(p,y)};this._nativeAudioContext.addEventListener("statechange",_)}):this._nativeAudioContext.resume().catch(p=>{throw p===void 0||p.code===15?e():p})}suspend(){return this._nativeAudioContext.suspend().catch(p=>{throw p===void 0?e():p})}},x6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_=u(y),b=a(y,p,_),A=_?e(c):null;super(f,!1,b,A),this._isNodeOfNativeOfflineAudioContext=_,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(f){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(f>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=f}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(f){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=f}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},w6=n=>{const e=new WeakMap,t=async(s,a)=>{const o=a.destination;return e.set(a,o),await n(s,a,o),o};return{render(s,a){const o=e.get(a);return o!==void 0?Promise.resolve(o):t(s,a)}}},_6=(n,e,t,s,a,o,u,c)=>(h,f)=>{const p=f.listener,y=()=>{const F=new Float32Array(1),W=e(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),H=u(f);let L=!1,B=[0,0,-1,0,1,0],te=[0,0,0];const j=()=>{if(L)return;L=!0;const ie=s(f,256,9,0);ie.onaudioprocess=({inputBuffer:X})=>{const re=[o(X,F,0),o(X,F,1),o(X,F,2),o(X,F,3),o(X,F,4),o(X,F,5)];re.some((fe,Se)=>fe!==B[Se])&&(p.setOrientation(...re),B=re);const le=[o(X,F,6),o(X,F,7),o(X,F,8)];le.some((fe,Se)=>fe!==te[Se])&&(p.setPosition(...le),te=le)},W.connect(ie)},I=ie=>X=>{X!==B[ie]&&(B[ie]=X,p.setOrientation(...B))},K=ie=>X=>{X!==te[ie]&&(te[ie]=X,p.setPosition(...te))},P=(ie,X,re)=>{const le=t(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:X});le.connect(W,0,ie),le.start(),Object.defineProperty(le.offset,"defaultValue",{get(){return X}});const fe=n({context:h},H,le.offset,yi,Ui);return c(fe,"value",Se=>()=>Se.call(fe),Se=>z=>{try{Se.call(fe,z)}catch(M){if(M.code!==9)throw M}j(),H&&re(z)}),fe.cancelAndHoldAtTime=(Se=>H?()=>{throw a()}:(...z)=>{const M=Se.apply(fe,z);return j(),M})(fe.cancelAndHoldAtTime),fe.cancelScheduledValues=(Se=>H?()=>{throw a()}:(...z)=>{const M=Se.apply(fe,z);return j(),M})(fe.cancelScheduledValues),fe.exponentialRampToValueAtTime=(Se=>H?()=>{throw a()}:(...z)=>{const M=Se.apply(fe,z);return j(),M})(fe.exponentialRampToValueAtTime),fe.linearRampToValueAtTime=(Se=>H?()=>{throw a()}:(...z)=>{const M=Se.apply(fe,z);return j(),M})(fe.linearRampToValueAtTime),fe.setTargetAtTime=(Se=>H?()=>{throw a()}:(...z)=>{const M=Se.apply(fe,z);return j(),M})(fe.setTargetAtTime),fe.setValueAtTime=(Se=>H?()=>{throw a()}:(...z)=>{const M=Se.apply(fe,z);return j(),M})(fe.setValueAtTime),fe.setValueCurveAtTime=(Se=>H?()=>{throw a()}:(...z)=>{const M=Se.apply(fe,z);return j(),M})(fe.setValueCurveAtTime),fe};return{forwardX:P(0,0,I(0)),forwardY:P(1,0,I(1)),forwardZ:P(2,-1,I(2)),positionX:P(6,0,K(0)),positionY:P(7,0,K(1)),positionZ:P(8,0,K(2)),upX:P(3,0,I(3)),upY:P(4,1,I(4)),upZ:P(5,0,I(5))}},{forwardX:_,forwardY:b,forwardZ:A,positionX:N,positionY:k,positionZ:T,upX:R,upY:D,upZ:V}=p.forwardX===void 0?y():p;return{get forwardX(){return _},get forwardY(){return b},get forwardZ(){return A},get positionX(){return N},get positionY(){return k},get positionZ(){return T},get upX(){return R},get upY(){return D},get upZ(){return V}}},op=n=>"context"in n,yf=n=>op(n[0]),Au=(n,e,t,s)=>{for(const a of n)if(t(a)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},z5=(n,e,[t,s],a)=>{Au(n,[e,t,s],o=>o[0]===e&&o[1]===t,a)},q5=(n,[e,t,s],a)=>{const o=n.get(e);o===void 0?n.set(e,new Set([[t,s]])):Au(o,[t,s],u=>u[0]===t,a)},Xh=n=>"inputs"in n,lp=(n,e,t,s)=>{if(Xh(e)){const a=e.inputs[s];return n.connect(a,t,0),[a,t,0]}return n.connect(e,t,s),[e,t,s]},t3=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},S6=(n,e,t)=>Fp(n,s=>s[0]===e&&s[1]===t),n3=(n,e)=>{if(!gf(n).delete(e))throw new Error("Missing the expected event listener.")},r3=(n,e,t)=>{const s=ho(n,e),a=Fp(s,o=>o[0]===t);return s.size===0&&n.delete(e),a},cp=(n,e,t,s)=>{Xh(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},kr=n=>ho(Hg,n),sf=n=>ho(Wg,n),wu=n=>cg.has(n),G1=n=>!zh.has(n),U5=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),a=n.createGain(),o=n.createBuffer(1,2,44100),u=o.getChannelData(0);u[0]=1,u[1]=1;const c=n.createBufferSource();c.buffer=o,c.loop=!0,c.connect(s).connect(n.destination),c.connect(a),c.disconnect(a),s.onaudioprocess=h=>{const f=h.inputBuffer.getChannelData(0);Array.prototype.some.call(f,p=>p===1)?t(!0):t(!1),c.stop(),s.onaudioprocess=null,c.disconnect(s),s.disconnect(n.destination)},c.start()}}),Mm=(n,e)=>{const t=new Map;for(const s of n)for(const a of s){const o=t.get(a);t.set(a,o===void 0?1:o+1)}t.forEach((s,a)=>e(a,s))},up=n=>"context"in n,N6=n=>{const e=new Map;n.connect=(t=>(s,a=0,o=0)=>{const u=up(s)?t(s,a,o):t(s,a),c=e.get(s);return c===void 0?e.set(s,[{input:o,output:a}]):c.every(h=>h.input!==o||h.output!==a)&&c.push({input:o,output:a}),u})(n.connect.bind(n)),n.disconnect=(t=>(s,a,o)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[u,c]of e){const h=c.filter(f=>f.output!==s);h.length===0?e.delete(u):e.set(u,h)}else if(e.has(s))if(a===void 0)e.delete(s);else{const u=e.get(s);if(u!==void 0){const c=u.filter(h=>h.output!==a&&(h.input!==o||o===void 0));c.length===0?e.delete(s):e.set(s,c)}}for(const[u,c]of e)c.forEach(h=>{up(u)?n.connect(u,h.output,h.input):n.connect(u,h.output)})})(n.disconnect)},A6=(n,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=vf(e),{outputs:u}=xi(n),c=gf(n),h=f=>{const p=kr(n),y=sf(e);if(f){const _=r3(o,n,t);z5(a,n,_,!1),!s&&!wu(n)&&p.connect(y,t)}else{const _=S6(a,n,t);q5(o,_,!1),!s&&!wu(n)&&p.disconnect(y,t)}};return Au(u,[e,t],f=>f[0]===e&&f[1]===t,!0)?(c.add(h),jl(n)?z5(a,n,[t,h],!0):q5(o,[n,t,h],!0),!0):!1},C6=(n,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=xi(e),u=t3(a[s],n,t);return u===null?[Kx(o,n,t,s)[2],!1]:[u[2],!0]},T6=(n,e,t)=>{const{activeInputs:s,passiveInputs:a}=vf(e),o=t3(s,n,t);return o===null?[r3(a,n,t)[1],!1]:[o[2],!0]},$g=(n,e,t,s,a)=>{const[o,u]=C6(n,t,s,a);if(o!==null&&(n3(n,o),u&&!e&&!wu(n)&&cp(kr(n),kr(t),s,a)),jl(t)){const{activeInputs:c}=xi(t);dg(t,c)}},Yg=(n,e,t,s)=>{const[a,o]=T6(n,t,s);a!==null&&(n3(n,a),o&&!e&&!wu(n)&&kr(n).disconnect(sf(t),s))},k6=(n,e)=>{const t=xi(n),s=[];for(const a of t.outputs)yf(a)?$g(n,e,...a):Yg(n,e,...a),s.push(a[0]);return t.outputs.clear(),s},j6=(n,e,t)=>{const s=xi(n),a=[];for(const o of s.outputs)o[1]===t&&(yf(o)?$g(n,e,...o):Yg(n,e,...o),a.push(o[0]),s.outputs.delete(o));return a},E6=(n,e,t,s,a)=>{const o=xi(n);return Array.from(o.outputs).filter(u=>u[0]===t&&(s===void 0||u[1]===s)&&(a===void 0||u[2]===a)).map(u=>(yf(u)?$g(n,e,...u):Yg(n,e,...u),o.outputs.delete(u),u[0]))},M6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b,A,N)=>class extends f{constructor(T,R,D,V){super(D),this._context=T,this._nativeAudioNode=D;const F=p(T);y(F)&&t(U5,()=>U5(F,N))!==!0&&N6(D),Hg.set(this,D),Xx.set(this,new Set),T.state!=="closed"&&R&&qh(this),n(this,V,D)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(T){this._nativeAudioNode.channelCount=T}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(T){this._nativeAudioNode.channelCountMode=T}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(T){this._nativeAudioNode.channelInterpretation=T}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(T,R=0,D=0){if(R<0||R>=this._nativeAudioNode.numberOfOutputs)throw a();const V=p(this._context),F=A(V);if(_(T)||b(T))throw o();if(op(T)){const L=kr(T);try{const te=lp(this._nativeAudioNode,L,R,D),j=G1(this);(F||j)&&this._nativeAudioNode.disconnect(...te),this.context.state!=="closed"&&!j&&G1(T)&&qh(T)}catch(te){throw te.code===12?o():te}if(e(this,T,R,D,F)){const te=h([this],T);Mm(te,s(F))}return T}const W=sf(T);if(W.name==="playbackRate"&&W.maxValue===1024)throw u();try{this._nativeAudioNode.connect(W,R),(F||G1(this))&&this._nativeAudioNode.disconnect(W,R)}catch(L){throw L.code===12?o():L}if(A6(this,T,R,F)){const L=h([this],T);Mm(L,s(F))}}disconnect(T,R,D){let V;const F=p(this._context),W=A(F);if(T===void 0)V=k6(this,W);else if(typeof T=="number"){if(T<0||T>=this.numberOfOutputs)throw a();V=j6(this,W,T)}else{if(R!==void 0&&(R<0||R>=this.numberOfOutputs)||op(T)&&D!==void 0&&(D<0||D>=T.numberOfInputs))throw a();if(V=E6(this,W,T,R,D),V.length===0)throw o()}for(const H of V){const L=h([this],H);Mm(L,c)}}},L6=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>(b,A,N,k=null,T=null)=>{const R=N.value,D=new qS(R),V=A?s(D):null,F={get defaultValue(){return R},get maxValue(){return k===null?N.maxValue:k},get minValue(){return T===null?N.minValue:T},get value(){return N.value},set value(W){N.value=W,F.setValueAtTime(W,b.context.currentTime)},cancelAndHoldAtTime(W){if(typeof N.cancelAndHoldAtTime=="function")V===null&&D.flush(b.context.currentTime),D.add(a(W)),N.cancelAndHoldAtTime(W);else{const H=Array.from(D).pop();V===null&&D.flush(b.context.currentTime),D.add(a(W));const L=Array.from(D).pop();N.cancelScheduledValues(W),H!==L&&L!==void 0&&(L.type==="exponentialRampToValue"?N.exponentialRampToValueAtTime(L.value,L.endTime):L.type==="linearRampToValue"?N.linearRampToValueAtTime(L.value,L.endTime):L.type==="setValue"?N.setValueAtTime(L.value,L.startTime):L.type==="setValueCurve"&&N.setValueCurveAtTime(L.values,L.startTime,L.duration))}return F},cancelScheduledValues(W){return V===null&&D.flush(b.context.currentTime),D.add(o(W)),N.cancelScheduledValues(W),F},exponentialRampToValueAtTime(W,H){if(W===0)throw new RangeError;if(!Number.isFinite(H)||H<0)throw new RangeError;const L=b.context.currentTime;return V===null&&D.flush(L),Array.from(D).length===0&&(D.add(f(R,L)),N.setValueAtTime(R,L)),D.add(u(W,H)),N.exponentialRampToValueAtTime(W,H),F},linearRampToValueAtTime(W,H){const L=b.context.currentTime;return V===null&&D.flush(L),Array.from(D).length===0&&(D.add(f(R,L)),N.setValueAtTime(R,L)),D.add(c(W,H)),N.linearRampToValueAtTime(W,H),F},setTargetAtTime(W,H,L){return V===null&&D.flush(b.context.currentTime),D.add(h(W,H,L)),N.setTargetAtTime(W,H,L),F},setValueAtTime(W,H){return V===null&&D.flush(b.context.currentTime),D.add(f(W,H)),N.setValueAtTime(W,H),F},setValueCurveAtTime(W,H,L){const B=W instanceof Float32Array?W:new Float32Array(W);if(y!==null&&y.name==="webkitAudioContext"){const te=H+L,j=b.context.sampleRate,I=Math.ceil(H*j),K=Math.floor(te*j),P=K-I,ie=new Float32Array(P);for(let re=0;re<P;re+=1){const le=(B.length-1)/L*((I+re)/j-H),fe=Math.floor(le),Se=Math.ceil(le);ie[re]=fe===Se?B[fe]:(1-(le-fe))*B[fe]+(1-(Se-le))*B[Se]}V===null&&D.flush(b.context.currentTime),D.add(p(ie,H,L)),N.setValueCurveAtTime(ie,H,L);const X=K/j;X<te&&_(F,ie[ie.length-1],X),_(F,B[B.length-1],te)}else V===null&&D.flush(b.context.currentTime),D.add(p(B,H,L)),N.setValueCurveAtTime(B,H,L);return F}};return t.set(F,N),e.set(F,b),n(F,V),F},O6=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:a}=t;e.exponentialRampToValueAtTime(a,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:a}=t;e.linearRampToValueAtTime(a,s)}else if(t.type==="setTarget"){const{startTime:s,target:a,timeConstant:o}=t;e.setTargetAtTime(a,s,o)}else if(t.type==="setValue"){const{startTime:s,value:a}=t;e.setValueAtTime(a,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:a,values:o}=t;e.setValueCurveAtTime(o,a,s)}else throw new Error("Can't apply an unknown automation.")}});class s3{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,a)=>e.call(t,s,a,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const D6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},R6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b)=>class extends e{constructor(N,k,T){var R;const D=c(N),V=h(D),F=p({...D6,...T});_(F);const W=ug.get(D),H=W?.get(k),L=V||D.state!=="closed"?D:(R=u(D))!==null&&R!==void 0?R:D,B=a(L,V?null:N.baseLatency,f,k,H,F),te=V?s(k,F,H):null;super(N,!0,B,te);const j=[];B.parameters.forEach((K,P)=>{const ie=t(this,V,K);j.push([P,ie])}),this._nativeAudioWorkletNode=B,this._onprocessorerror=null,this._parameters=new s3(j),V&&n(D,this);const{activeInputs:I}=o(this);y(B,I)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(N){const k=typeof N=="function"?b(this,N):null;this._nativeAudioWorkletNode.onprocessorerror=k;const T=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=T!==null&&T===k?N:T}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function hp(n,e,t,s,a){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,a);else{const o=n.getChannelData(s);if(e[t].byteLength===0)e[t]=o.slice(a,a+128);else{const u=new Float32Array(o.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(u)}}}const i3=(n,e,t,s,a)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,a):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],a)},dp=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const a=[],o=typeof e=="number"?e:e[s];for(let u=0;u<o;u+=1)a.push(new Float32Array(128));t.push(a)}return t},I6=(n,e)=>{const t=ho(hg,n),s=kr(e);return ho(t,s)},F6=async(n,e,t,s,a,o,u)=>{const c=e===null?Math.ceil(n.context.length/128)*128:e.length,h=s.channelCount*s.numberOfInputs,f=a.reduce((k,T)=>k+T,0),p=f===0?null:t.createBuffer(f,c,t.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const y=xi(n),_=await I6(t,n),b=dp(s.numberOfInputs,s.channelCount),A=dp(s.numberOfOutputs,a),N=Array.from(n.parameters.keys()).reduce((k,T)=>({...k,[T]:new Float32Array(128)}),{});for(let k=0;k<c;k+=128){if(s.numberOfInputs>0&&e!==null)for(let T=0;T<s.numberOfInputs;T+=1)for(let R=0;R<s.channelCount;R+=1)hp(e,b[T],R,R,k);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:T},R)=>{hp(e,N,T,h+R,k)});for(let T=0;T<s.numberOfInputs;T+=1)for(let R=0;R<a[T];R+=1)A[T][R].byteLength===0&&(A[T][R]=new Float32Array(128));try{const T=b.map((D,V)=>y.activeInputs[V].size===0?[]:D),R=u(k/t.sampleRate,t.sampleRate,()=>_.process(T,A,N));if(p!==null)for(let D=0,V=0;D<s.numberOfOutputs;D+=1){for(let F=0;F<a[D];F+=1)i3(p,A[D],F,V+F,k);V+=a[D]}if(!R)break}catch(T){n.dispatchEvent(new ErrorEvent("processorerror",{colno:T.colno,filename:T.filename,lineno:T.lineno,message:T.message}));break}}return p},V6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b,A,N)=>(k,T,R)=>{const D=new WeakMap;let V=null;const F=async(W,H)=>{let L=p(W),B=null;const te=di(L,H),j=Array.isArray(T.outputChannelCount)?T.outputChannelCount:Array.from(T.outputChannelCount);if(y===null){const I=j.reduce((X,re)=>X+re,0),K=a(H,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),P=[];for(let X=0;X<W.numberOfOutputs;X+=1)P.push(s(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:j[X]}));const ie=u(H,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1});ie.connect=e.bind(null,P),ie.disconnect=h.bind(null,P),B=[K,P,ie]}else te||(L=new y(H,k));if(D.set(H,B===null?L:B[2]),B!==null){if(V===null){if(R===void 0)throw new Error("Missing the processor constructor.");if(_===null)throw new Error("Missing the native OfflineAudioContext constructor.");const re=W.channelCount*W.numberOfInputs,le=R.parameterDescriptors===void 0?0:R.parameterDescriptors.length,fe=re+le;V=F6(W,fe===0?null:await(async()=>{const z=new _(fe,Math.ceil(W.context.length/128)*128,H.sampleRate),M=[],$=[];for(let ae=0;ae<T.numberOfInputs;ae+=1)M.push(u(z,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1})),$.push(a(z,{channelCount:T.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:T.channelCount}));const G=await Promise.all(Array.from(W.parameters.values()).map(async ae=>{const pe=o(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ae.value});return await b(z,ae,pe.offset),pe})),J=s(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,re+le)});for(let ae=0;ae<T.numberOfInputs;ae+=1){M[ae].connect($[ae]);for(let pe=0;pe<T.channelCount;pe+=1)$[ae].connect(J,pe,ae*T.channelCount+pe)}for(const[ae,pe]of G.entries())pe.connect(J,0,re+ae),pe.start(0);return J.connect(z.destination),await Promise.all(M.map(ae=>A(W,z,ae))),N(z)})(),H,T,j,R,f)}const I=await V,K=t(H,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[P,ie,X]=B;I!==null&&(K.buffer=I,K.start(0)),K.connect(P);for(let re=0,le=0;re<W.numberOfOutputs;re+=1){const fe=ie[re];for(let Se=0;Se<j[re];Se+=1)P.connect(fe,le+Se,Se);le+=j[re]}return X}if(te)for(const[I,K]of W.parameters.entries())await n(H,K,L.parameters.get(I));else for(const[I,K]of W.parameters.entries())await b(H,K,L.parameters.get(I));return await A(W,H,L),L};return{render(W,H){c(H,W);const L=D.get(H);return L!==void 0?Promise.resolve(L):F(W,H)}}},B6=(n,e,t,s,a,o,u,c,h,f,p,y,_,b,A,N,k,T,R,D)=>class extends A{constructor(F,W){super(F,W),this._nativeContext=F,this._audioWorklet=n===void 0?void 0:{addModule:(H,L)=>n(this,H,L)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new a(this)}createBuffer(F,W,H){return new t({length:W,numberOfChannels:F,sampleRate:H})}createBufferSource(){return new s(this)}createChannelMerger(F=6){return new o(this,{numberOfInputs:F})}createChannelSplitter(F=6){return new u(this,{numberOfOutputs:F})}createConstantSource(){return new c(this)}createConvolver(){return new h(this)}createDelay(F=1){return new p(this,{maxDelayTime:F})}createDynamicsCompressor(){return new y(this)}createGain(){return new _(this)}createIIRFilter(F,W){return new b(this,{feedback:W,feedforward:F})}createOscillator(){return new N(this)}createPanner(){return new k(this)}createPeriodicWave(F,W,H={disableNormalization:!1}){return new T(this,{...H,imag:W,real:F})}createStereoPanner(){return new R(this)}createWaveShaper(){return new D(this)}decodeAudioData(F,W,H){return f(this._nativeContext,F).then(L=>(typeof W=="function"&&W(L),L),L=>{throw typeof H=="function"&&H(L),L})}},P6={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},z6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_={...P6,...p},b=a(y,_),A=u(y),N=A?t():null;super(f,!1,b,N),this._Q=e(this,A,b.Q,yi,Ui),this._detune=e(this,A,b.detune,1200*Math.log2(yi),-1200*Math.log2(yi)),this._frequency=e(this,A,b.frequency,f.sampleRate/2,0),this._gain=e(this,A,b.gain,40*Math.log10(yi),Ui),this._nativeBiquadFilterNode=b,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(f){this._nativeBiquadFilterNode.type=f}getFrequencyResponse(f,p,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(f,p,y)}catch(_){throw _.code===11?s():_}if(f.length!==p.length||p.length!==y.length)throw s()}},q6=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=di(f,h);if(!p){const y={Q:f.Q.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,gain:f.gain.value,type:f.type};f=e(h,y)}return o.set(h,f),p?(await n(h,c.Q,f.Q),await n(h,c.detune,f.detune),await n(h,c.frequency,f.frequency),await n(h,c.gain,f.gain)):(await s(h,c.Q,f.Q),await s(h,c.detune,f.detune),await s(h,c.frequency,f.frequency),await s(h,c.gain,f.gain)),await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},U6=(n,e)=>(t,s)=>{const a=e.get(t);if(a!==void 0)return a;const o=n.get(t);if(o!==void 0)return o;try{const u=s();return u instanceof Promise?(n.set(t,u),u.catch(()=>!1).then(c=>(n.delete(t),e.set(t,c),c))):(e.set(t,u),u)}catch{return e.set(t,!1),!1}},H6={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},W6=(n,e,t,s,a)=>class extends n{constructor(u,c){const h=s(u),f={...H6,...c},p=t(h,f),y=a(h)?e():null;super(u,!1,p,y)}},G6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!di(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=n(u,f)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},$6={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Y6=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=s(c),p=o({...$6,...h}),y=t(f,p),_=a(f)?e():null;super(c,!1,y,_)}},X6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!di(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=n(u,f)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},Z6=n=>(e,t,s)=>n(t,e,s),K6=n=>(e,t,s=0,a=0)=>{const o=e[s];if(o===void 0)throw n();return up(t)?o.connect(t,0,a):o.connect(t,0)},Q6=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=e.createBuffer(1,2,44100);return s.buffer=a,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},J6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},eN=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...J6,...f},_=s(p,y),b=o(p),A=b?t():null;super(h,!1,_,A),this._constantSourceNodeRenderer=A,this._nativeConstantSourceNode=_,this._offset=e(this,b,_.offset,yi,Ui),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?u(this,h):null;this._nativeConstantSourceNode.onended=f;const p=this._nativeConstantSourceNode.onended;this._onended=p!==null&&p===f?h:p}start(h=0){if(this._nativeConstantSourceNode.start(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=h),this.context.state!=="closed"){qh(this);const f=()=>{this._nativeConstantSourceNode.removeEventListener("ended",f),jl(this)&&bf(this)};this._nativeConstantSourceNode.addEventListener("ended",f)}}stop(h=0){this._nativeConstantSourceNode.stop(h),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=h)}},tN=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const h=async(f,p)=>{let y=t(f);const _=di(y,p);if(!_){const b={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value};y=e(p,b),u!==null&&y.start(u),c!==null&&y.stop(c)}return o.set(p,y),_?await n(p,f.offset,y.offset):await s(p,f.offset,y.offset),await a(f,p,y),y};return{set start(f){u=f},set stop(f){c=f},render(f,p){const y=o.get(p);return y!==void 0?Promise.resolve(y):h(f,p)}}},nN=n=>e=>(n[0]=e,n[0]),rN={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},sN=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=s(c),p={...rN,...h},y=t(f,p),b=a(f)?e():null;super(c,!1,y,b),this._isBufferNullified=!1,this._nativeConvolverNode=y,p.buffer!==null&&o(this,p.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const h=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=h.createBuffer(1,1,h.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},iN=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!di(c,u)){const f={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=n(u,f)}return s.set(u,c),Xh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},aN=(n,e)=>(t,s,a)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,a)}catch(o){throw o.name==="SyntaxError"?n():o}},oN=()=>new DOMException("","DataCloneError"),H5=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const a=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>a();try{e.postMessage(n,[n])}catch{}finally{a()}})},lN=(n,e,t,s,a,o,u,c,h,f,p)=>(y,_)=>{const b=u(y)?y:o(y);if(a.has(_)){const A=t();return Promise.reject(A)}try{a.add(_)}catch{}return e(h,()=>h(b))?b.decodeAudioData(_).then(A=>(H5(_).catch(()=>{}),e(c,()=>c(A))||p(A),n.add(A),A)):new Promise((A,N)=>{const k=async()=>{try{await H5(_)}catch{}},T=R=>{N(R),k()};try{b.decodeAudioData(_,R=>{typeof R.copyFromChannel!="function"&&(f(R),Gg(R)),n.add(R),k().then(()=>A(R))},R=>{T(R===null?s():R)})}catch(R){T(R)}})},cN=(n,e,t,s,a,o,u,c)=>(h,f)=>{const p=e.get(h);if(p===void 0)throw new Error("Missing the expected cycle count.");const y=o(h.context),_=c(y);if(p===f){if(e.delete(h),!_&&u(h)){const b=s(h),{outputs:A}=t(h);for(const N of A)if(yf(N)){const k=s(N[0]);n(b,k,N[1],N[2])}else{const k=a(N[0]);b.connect(k,N[1])}}}else e.set(h,p-f)},uN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},hN=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...uN,...f},_=s(p,y),b=o(p),A=b?t(y.maxDelayTime):null;super(h,!1,_,A),this._delayTime=e(this,b,_.delayTime),u(this,y.maxDelayTime)}get delayTime(){return this._delayTime}},dN=(n,e,t,s,a)=>o=>{const u=new WeakMap,c=async(h,f)=>{let p=t(h);const y=di(p,f);if(!y){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,delayTime:p.delayTime.value,maxDelayTime:o};p=e(f,_)}return u.set(f,p),y?await n(f,h.delayTime,p.delayTime):await s(f,h.delayTime,p.delayTime),await a(h,f,p),p};return{render(h,f){const p=u.get(f);return p!==void 0?Promise.resolve(p):c(h,f)}}},fN=n=>(e,t,s,a)=>n(e[a],o=>o[0]===t&&o[1]===s),pN=n=>(e,t)=>{n(e).delete(t)},mN=n=>"delayTime"in n,gN=(n,e,t)=>function s(a,o){const u=op(o)?o:t(n,o);if(mN(u))return[];if(a[0]===u)return[a];if(a.includes(u))return[];const{outputs:c}=e(u);return Array.from(c).map(h=>s([...a,u],h[0])).reduce((h,f)=>h.concat(f),[])},E1=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},bN=n=>(e,t=void 0,s=void 0,a=0)=>t===void 0?e.forEach(o=>o.disconnect()):typeof t=="number"?E1(n,e,t).disconnect():up(t)?s===void 0?e.forEach(o=>o.disconnect(t)):a===void 0?E1(n,e,s).disconnect(t,0):E1(n,e,s).disconnect(t,0,a):s===void 0?e.forEach(o=>o.disconnect(t)):E1(n,e,s).disconnect(t,0),vN={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},yN=(n,e,t,s,a,o,u,c)=>class extends n{constructor(f,p){const y=o(f),_={...vN,...p},b=s(y,_),A=u(y),N=A?t():null;super(f,!1,b,N),this._attack=e(this,A,b.attack),this._knee=e(this,A,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=e(this,A,b.ratio),this._release=e(this,A,b.release),this._threshold=e(this,A,b.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(f){const p=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=f,f>2)throw this._nativeDynamicsCompressorNode.channelCount=p,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(f){const p=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=f,f==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=p,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},xN=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=di(f,h);if(!p){const y={attack:f.attack.value,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,knee:f.knee.value,ratio:f.ratio.value,release:f.release.value,threshold:f.threshold.value};f=e(h,y)}return o.set(h,f),p?(await n(h,c.attack,f.attack),await n(h,c.knee,f.knee),await n(h,c.ratio,f.ratio),await n(h,c.release,f.release),await n(h,c.threshold,f.threshold)):(await s(h,c.attack,f.attack),await s(h,c.knee,f.knee),await s(h,c.ratio,f.ratio),await s(h,c.release,f.release),await s(h,c.threshold,f.threshold)),await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},wN=()=>new DOMException("","EncodingError"),_N=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const a=n.document.head;if(a===null)s(new SyntaxError);else{const o=n.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(u),h=n.onerror,f=()=>{n.onerror=h,URL.revokeObjectURL(c)};n.onerror=(p,y,_,b,A)=>{if(y===c||y===n.location.href&&_===1&&b===1)return f(),s(A),!1;if(h!==null)return h(p,y,_,b,A)},o.onerror=()=>{f(),s(new SyntaxError)},o.onload=()=>{f(),t()},o.src=c,o.type="module",a.appendChild(o)}}),SN=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,a){if(s!==null){let o=this._listeners.get(s);o===void 0&&(o=n(this,s),typeof s=="function"&&this._listeners.set(s,o)),this._nativeEventTarget.addEventListener(t,o,a)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,a){const o=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,o===void 0?null:o,a)}},NN=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},AN=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},CN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},TN=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=a(c),p={...CN,...h},y=s(f,p),_=o(f),b=_?t():null;super(c,!1,y,b),this._gain=e(this,_,y.gain,yi,Ui)}get gain(){return this._gain}},kN=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=di(f,h);if(!p){const y={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:f.gain.value};f=e(h,y)}return o.set(h,f),p?await n(h,c.gain,f.gain):await s(h,c.gain,f.gain),await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},jN=(n,e)=>t=>e(n,t),EN=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},MN=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},LN=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},ON=n=>e=>n.get(e),Ws=()=>new DOMException("","InvalidStateError"),DN=n=>e=>{const t=n.get(e);if(t===void 0)throw Ws();return t},RN=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},IN=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},Vp=()=>new DOMException("","InvalidAccessError"),FN=n=>{n.getFrequencyResponse=(e=>(t,s,a)=>{if(t.length!==s.length||s.length!==a.length)throw Vp();return e.call(n,t,s,a)})(n.getFrequencyResponse)},VN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},BN=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=s(c),p=a(f),y={...VN,...h},_=e(f,p?null:c.baseLatency,y),b=p?t(y.feedback,y.feedforward):null;super(c,!1,_,b),FN(_),this._nativeIIRFilterNode=_,o(this,1)}getFrequencyResponse(c,h,f){return this._nativeIIRFilterNode.getFrequencyResponse(c,h,f)}},a3=(n,e,t,s,a,o,u,c,h,f,p)=>{const y=f.length;let _=c;for(let b=0;b<y;b+=1){let A=t[0]*f[b];for(let N=1;N<a;N+=1){const k=_-N&h-1;A+=t[N]*o[k],A-=n[N]*u[k]}for(let N=a;N<s;N+=1)A+=t[N]*o[_-N&h-1];for(let N=a;N<e;N+=1)A-=n[N]*u[_-N&h-1];o[_]=f[b],u[_]=A,_=_+1&h-1,p[b]=A}return _},PN=(n,e,t,s)=>{const a=t instanceof Float64Array?t:new Float64Array(t),o=s instanceof Float64Array?s:new Float64Array(s),u=a.length,c=o.length,h=Math.min(u,c);if(a[0]!==1){for(let A=0;A<u;A+=1)o[A]/=a[0];for(let A=1;A<c;A+=1)a[A]/=a[0]}const f=32,p=new Float32Array(f),y=new Float32Array(f),_=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),b=n.numberOfChannels;for(let A=0;A<b;A+=1){const N=n.getChannelData(A),k=_.getChannelData(A);p.fill(0),y.fill(0),a3(a,u,o,c,h,p,y,0,f,N,k)}return _},zN=(n,e,t,s,a)=>(o,u)=>{const c=new WeakMap;let h=null;const f=async(p,y)=>{let _=null,b=e(p);const A=di(b,y);if(y.createIIRFilter===void 0?_=n(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):A||(b=y.createIIRFilter(u,o)),c.set(y,_===null?b:_),_!==null){if(h===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new t(p.context.destination.channelCount,p.context.length,y.sampleRate);h=(async()=>{await s(p,k,k.destination);const T=await a(k);return PN(T,y,o,u)})()}const N=await h;return _.buffer=N,_.start(0),_}return await s(p,y,b),b};return{render(p,y){const _=c.get(y);return _!==void 0?Promise.resolve(_):f(p,y)}}},qN=(n,e,t,s,a,o)=>u=>(c,h)=>{const f=n.get(c);if(f===void 0){if(!u&&o(c)){const p=s(c),{outputs:y}=t(c);for(const _ of y)if(yf(_)){const b=s(_[0]);e(p,b,_[1],_[2])}else{const b=a(_[0]);p.disconnect(b,_[1])}}n.set(c,h)}else n.set(c,f+h)},UN=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},HN=(n,e)=>t=>n.has(t)||e(t),WN=(n,e)=>t=>n.has(t)||e(t),GN=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},$N=n=>e=>n!==null&&e instanceof n,YN=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,XN=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,ZN=(n,e)=>t=>n(t)||e(t),KN=n=>e=>n!==null&&e instanceof n,QN=n=>n!==null&&n.isSecureContext,JN=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o),h=e(c,u);if(s(c))throw TypeError();super(o,!0,h,null),this._nativeMediaElementAudioSourceNode=h}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},eA={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},tA=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o);if(s(c))throw new TypeError;const h={...eA,...u},f=e(c,h);super(o,!1,f,null),this._nativeMediaStreamAudioDestinationNode=f}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},nA=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o),h=e(c,u);if(s(c))throw new TypeError;super(o,!0,h,null),this._nativeMediaStreamAudioSourceNode=h}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},rA=(n,e,t)=>class extends n{constructor(a,o){const u=t(a),c=e(u,o);super(a,!0,c,null)}},sA=(n,e,t,s,a,o)=>class extends t{constructor(c,h){super(c),this._nativeContext=c,Ip.set(this,c),s(c)&&a.set(c,new Set),this._destination=new n(this,h),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const h=typeof c=="function"?o(this,c):null;this._nativeContext.onstatechange=h;const f=this._nativeContext.onstatechange;this._onstatechange=f!==null&&f===h?c:f}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},af=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},iA=(n,e)=>(t,s,a)=>{const o=new Set;return t.connect=(u=>(c,h=0,f=0)=>{const p=o.size===0;if(e(c))return u.call(t,c,h,f),n(o,[c,h,f],y=>y[0]===c&&y[1]===h&&y[2]===f,!0),p&&s(),c;u.call(t,c,h),n(o,[c,h],y=>y[0]===c&&y[1]===h,!0),p&&s()})(t.connect),t.disconnect=(u=>(c,h,f)=>{const p=o.size>0;if(c===void 0)u.apply(t),o.clear();else if(typeof c=="number"){u.call(t,c);for(const _ of o)_[1]===c&&o.delete(_)}else{e(c)?u.call(t,c,h,f):u.call(t,c,h);for(const _ of o)_[0]===c&&(h===void 0||_[1]===h)&&(f===void 0||_[2]===f)&&o.delete(_)}const y=o.size===0;p&&y&&a()})(t.disconnect),t},Vr=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},Os=(n,e)=>{Vr(n,e,"channelCount"),Vr(n,e,"channelCountMode"),Vr(n,e,"channelInterpretation")},W5=n=>typeof n.getFloatTimeDomainData=="function",aA=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let a=0;a<s;a+=1)e[a]=(t[a]-128)*.0078125;return e}},oA=(n,e)=>(t,s)=>{const a=t.createAnalyser();if(Os(a,s),!(s.maxDecibels>s.minDecibels))throw e();return Vr(a,s,"fftSize"),Vr(a,s,"maxDecibels"),Vr(a,s,"minDecibels"),Vr(a,s,"smoothingTimeConstant"),n(W5,()=>W5(a))||aA(a),a},lA=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,ns=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},cA=n=>{n.start=(e=>{let t=!1;return(s=0,a=0,o)=>{if(t)throw Ws();e.call(n,s,a,o),t=!0}})(n.start)},Xg=n=>{n.start=(e=>(t=0,s=0,a)=>{if(typeof a=="number"&&a<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,a)})(n.start)},Zg=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},uA=(n,e,t,s,a,o,u,c,h,f,p)=>(y,_)=>{const b=y.createBufferSource();return Os(b,_),ns(b,_,"playbackRate"),Vr(b,_,"buffer"),Vr(b,_,"loop"),Vr(b,_,"loopEnd"),Vr(b,_,"loopStart"),e(t,()=>t(y))||cA(b),e(s,()=>s(y))||h(b),e(a,()=>a(y))||f(b,y),e(o,()=>o(y))||Xg(b),e(u,()=>u(y))||p(b,y),e(c,()=>c(y))||Zg(b),n(y,b),b},hA=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,dA=(n,e)=>(t,s,a)=>{const o=t.destination;if(o.channelCount!==s)try{o.channelCount=s}catch{}a&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:s});const u=n(t,{channelCount:s,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(u,"channelCount",c=>()=>c.call(u),c=>h=>{c.call(u,h);try{o.channelCount=h}catch(f){if(h>o.maxChannelCount)throw f}}),e(u,"channelCountMode",c=>()=>c.call(u),c=>h=>{c.call(u,h),o.channelCountMode=h}),e(u,"channelInterpretation",c=>()=>c.call(u),c=>h=>{c.call(u,h),o.channelInterpretation=h}),Object.defineProperty(u,"maxChannelCount",{get:()=>o.maxChannelCount}),u.connect(o),u},fA=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,pA=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},mA=(n,e,t,s,a)=>(o,u,c,h,f,p)=>{if(c!==null)try{const y=new c(o,h,p),_=new Map;let b=null;if(Object.defineProperties(y,{channelCount:{get:()=>p.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>b,set:A=>{typeof b=="function"&&y.removeEventListener("processorerror",b),b=typeof A=="function"?A:null,typeof b=="function"&&y.addEventListener("processorerror",b)}}}),y.addEventListener=(A=>(...N)=>{if(N[0]==="processorerror"){const k=typeof N[1]=="function"?N[1]:typeof N[1]=="object"&&N[1]!==null&&typeof N[1].handleEvent=="function"?N[1].handleEvent:null;if(k!==null){const T=_.get(N[1]);T!==void 0?N[1]=T:(N[1]=R=>{R.type==="error"?(Object.defineProperties(R,{type:{value:"processorerror"}}),k(R)):k(new ErrorEvent(N[0],{...R}))},_.set(k,N[1]))}}return A.call(y,"error",N[1],N[2]),A.call(y,...N)})(y.addEventListener),y.removeEventListener=(A=>(...N)=>{if(N[0]==="processorerror"){const k=_.get(N[1]);k!==void 0&&(_.delete(N[1]),N[1]=k)}return A.call(y,"error",N[1],N[2]),A.call(y,N[0],N[1],N[2])})(y.removeEventListener),p.numberOfOutputs!==0){const A=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(A).connect(o.destination),a(y,()=>A.disconnect(),()=>A.connect(o.destination))}return y}catch(y){throw y.code===11?s():y}if(f===void 0)throw s();return pA(p),e(o,u,f,p)},o3=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),gA=n=>new Promise((e,t)=>{const{port1:s,port2:a}=new MessageChannel;s.onmessage=({data:o})=>{s.close(),a.close(),e(o)},s.onmessageerror=({data:o})=>{s.close(),a.close(),t(o)},a.postMessage(n)}),bA=async(n,e)=>{const t=await gA(e);return new n(t)},vA=(n,e,t,s)=>{let a=hg.get(n);a===void 0&&(a=new WeakMap,hg.set(n,a));const o=bA(t,s);return a.set(e,o),o},yA=(n,e,t,s,a,o,u,c,h,f,p,y,_)=>(b,A,N,k)=>{if(k.numberOfInputs===0&&k.numberOfOutputs===0)throw h();const T=Array.isArray(k.outputChannelCount)?k.outputChannelCount:Array.from(k.outputChannelCount);if(T.some(Y=>Y<1))throw h();if(T.length!==k.numberOfOutputs)throw e();if(k.channelCountMode!=="explicit")throw h();const R=k.channelCount*k.numberOfInputs,D=T.reduce((Y,Ie)=>Y+Ie,0),V=N.parameterDescriptors===void 0?0:N.parameterDescriptors.length;if(R+V>6||D>6)throw h();const F=new MessageChannel,W=[],H=[];for(let Y=0;Y<k.numberOfInputs;Y+=1)W.push(u(b,{channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation,gain:1})),H.push(a(b,{channelCount:k.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:k.channelCount}));const L=[];if(N.parameterDescriptors!==void 0)for(const{defaultValue:Y,maxValue:Ie,minValue:dt,name:et}of N.parameterDescriptors){const ge=o(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k.parameterData[et]!==void 0?k.parameterData[et]:Y===void 0?0:Y});Object.defineProperties(ge.offset,{defaultValue:{get:()=>Y===void 0?0:Y},maxValue:{get:()=>Ie===void 0?yi:Ie},minValue:{get:()=>dt===void 0?Ui:dt}}),L.push(ge)}const B=s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+V)}),te=o3(A,b.sampleRate),j=c(b,te,R+V,Math.max(1,D)),I=a(b,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),K=[];for(let Y=0;Y<k.numberOfOutputs;Y+=1)K.push(s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[Y]}));for(let Y=0;Y<k.numberOfInputs;Y+=1){W[Y].connect(H[Y]);for(let Ie=0;Ie<k.channelCount;Ie+=1)H[Y].connect(B,Ie,Y*k.channelCount+Ie)}const P=new s3(N.parameterDescriptors===void 0?[]:N.parameterDescriptors.map(({name:Y},Ie)=>{const dt=L[Ie];return dt.connect(B,0,R+Ie),dt.start(0),[Y,dt.offset]}));B.connect(j);let ie=k.channelInterpretation,X=null;const re=k.numberOfOutputs===0?[j]:K,le={get bufferSize(){return te},get channelCount(){return k.channelCount},set channelCount(Y){throw t()},get channelCountMode(){return k.channelCountMode},set channelCountMode(Y){throw t()},get channelInterpretation(){return ie},set channelInterpretation(Y){for(const Ie of W)Ie.channelInterpretation=Y;ie=Y},get context(){return j.context},get inputs(){return W},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get onprocessorerror(){return X},set onprocessorerror(Y){typeof X=="function"&&le.removeEventListener("processorerror",X),X=typeof Y=="function"?Y:null,typeof X=="function"&&le.addEventListener("processorerror",X)},get parameters(){return P},get port(){return F.port2},addEventListener(...Y){return j.addEventListener(Y[0],Y[1],Y[2])},connect:n.bind(null,re),disconnect:f.bind(null,re),dispatchEvent(...Y){return j.dispatchEvent(Y[0])},removeEventListener(...Y){return j.removeEventListener(Y[0],Y[1],Y[2])}},fe=new Map;F.port1.addEventListener=(Y=>(...Ie)=>{if(Ie[0]==="message"){const dt=typeof Ie[1]=="function"?Ie[1]:typeof Ie[1]=="object"&&Ie[1]!==null&&typeof Ie[1].handleEvent=="function"?Ie[1].handleEvent:null;if(dt!==null){const et=fe.get(Ie[1]);et!==void 0?Ie[1]=et:(Ie[1]=ge=>{p(b.currentTime,b.sampleRate,()=>dt(ge))},fe.set(dt,Ie[1]))}}return Y.call(F.port1,Ie[0],Ie[1],Ie[2])})(F.port1.addEventListener),F.port1.removeEventListener=(Y=>(...Ie)=>{if(Ie[0]==="message"){const dt=fe.get(Ie[1]);dt!==void 0&&(fe.delete(Ie[1]),Ie[1]=dt)}return Y.call(F.port1,Ie[0],Ie[1],Ie[2])})(F.port1.removeEventListener);let Se=null;Object.defineProperty(F.port1,"onmessage",{get:()=>Se,set:Y=>{typeof Se=="function"&&F.port1.removeEventListener("message",Se),Se=typeof Y=="function"?Y:null,typeof Se=="function"&&(F.port1.addEventListener("message",Se),F.port1.start())}}),N.prototype.port=F.port1;let z=null;vA(b,le,N,k).then(Y=>z=Y);const $=dp(k.numberOfInputs,k.channelCount),G=dp(k.numberOfOutputs,T),J=N.parameterDescriptors===void 0?[]:N.parameterDescriptors.reduce((Y,{name:Ie})=>({...Y,[Ie]:new Float32Array(128)}),{});let ae=!0;const pe=()=>{k.numberOfOutputs>0&&j.disconnect(I);for(let Y=0,Ie=0;Y<k.numberOfOutputs;Y+=1){const dt=K[Y];for(let et=0;et<T[Y];et+=1)I.disconnect(dt,Ie+et,et);Ie+=T[Y]}},de=new Map;j.onaudioprocess=({inputBuffer:Y,outputBuffer:Ie})=>{if(z!==null){const dt=y(le);for(let et=0;et<te;et+=128){for(let ge=0;ge<k.numberOfInputs;ge+=1)for(let qe=0;qe<k.channelCount;qe+=1)hp(Y,$[ge],qe,qe,et);N.parameterDescriptors!==void 0&&N.parameterDescriptors.forEach(({name:ge},qe)=>{hp(Y,J,ge,R+qe,et)});for(let ge=0;ge<k.numberOfInputs;ge+=1)for(let qe=0;qe<T[ge];qe+=1)G[ge][qe].byteLength===0&&(G[ge][qe]=new Float32Array(128));try{const ge=$.map((Re,nt)=>{if(dt[nt].size>0)return de.set(nt,te/128),Re;const vt=de.get(nt);return vt===void 0?[]:(Re.every(It=>It.every(St=>St===0))&&(vt===1?de.delete(nt):de.set(nt,vt-1)),Re)});ae=p(b.currentTime+et/b.sampleRate,b.sampleRate,()=>z.process(ge,G,J));for(let Re=0,nt=0;Re<k.numberOfOutputs;Re+=1){for(let ct=0;ct<T[Re];ct+=1)i3(Ie,G[Re],ct,nt+ct,et);nt+=T[Re]}}catch(ge){ae=!1,le.dispatchEvent(new ErrorEvent("processorerror",{colno:ge.colno,filename:ge.filename,lineno:ge.lineno,message:ge.message}))}if(!ae){for(let ge=0;ge<k.numberOfInputs;ge+=1){W[ge].disconnect(H[ge]);for(let qe=0;qe<k.channelCount;qe+=1)H[et].disconnect(B,qe,ge*k.channelCount+qe)}if(N.parameterDescriptors!==void 0){const ge=N.parameterDescriptors.length;for(let qe=0;qe<ge;qe+=1){const Re=L[qe];Re.disconnect(B,0,R+qe),Re.stop()}}B.disconnect(j),j.onaudioprocess=null,xe?pe():Qe();break}}}};let xe=!1;const Ne=u(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Be=()=>j.connect(Ne).connect(b.destination),Qe=()=>{j.disconnect(Ne),Ne.disconnect()},Xe=()=>{if(ae){Qe(),k.numberOfOutputs>0&&j.connect(I);for(let Y=0,Ie=0;Y<k.numberOfOutputs;Y+=1){const dt=K[Y];for(let et=0;et<T[Y];et+=1)I.connect(dt,Ie+et,et);Ie+=T[Y]}}xe=!0},st=()=>{ae&&(Be(),pe()),xe=!1};return Be(),_(le,Xe,st)},l3=(n,e)=>{const t=n.createBiquadFilter();return Os(t,e),ns(t,e,"Q"),ns(t,e,"detune"),ns(t,e,"frequency"),ns(t,e,"gain"),Vr(t,e,"type"),t},xA=(n,e)=>(t,s)=>{const a=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,a),Os(a,s),a},wA=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Ws()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw Ws()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw Ws()}})},xf=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return Os(t,e),wA(t),t},_A=(n,e,t,s,a)=>(o,u)=>{if(o.createConstantSource===void 0)return t(o,u);const c=o.createConstantSource();return Os(c,u),ns(c,u,"offset"),e(s,()=>s(o))||Xg(c),e(a,()=>a(o))||Zg(c),n(o,c),c},Zh=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),SA=(n,e,t,s)=>(a,{offset:o,...u})=>{const c=a.createBuffer(1,2,44100),h=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),f=t(a,{...u,gain:o}),p=c.getChannelData(0);p[0]=1,p[1]=1,h.buffer=c,h.loop=!0;const y={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(A){f.channelCount=A},get channelCountMode(){return f.channelCountMode},set channelCountMode(A){f.channelCountMode=A},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(A){f.channelInterpretation=A},get context(){return f.context},get inputs(){return[]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get offset(){return f.gain},get onended(){return h.onended},set onended(A){h.onended=A},addEventListener(...A){return h.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return h.dispatchEvent(A[0])},removeEventListener(...A){return h.removeEventListener(A[0],A[1],A[2])},start(A=0){h.start.call(h,A)},stop(A=0){h.stop.call(h,A)}},_=()=>h.connect(f),b=()=>h.disconnect(f);return n(a,h),s(Zh(y,f),_,b)},NA=(n,e)=>(t,s)=>{const a=t.createConvolver();if(Os(a,s),s.disableNormalization===a.normalize&&(a.normalize=!s.disableNormalization),Vr(a,s,"buffer"),s.channelCount>2||(e(a,"channelCount",o=>()=>o.call(a),o=>u=>{if(u>2)throw n();return o.call(a,u)}),s.channelCountMode==="max"))throw n();return e(a,"channelCountMode",o=>()=>o.call(a),o=>u=>{if(u==="max")throw n();return o.call(a,u)}),a},c3=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return Os(t,e),ns(t,e,"delayTime"),t},AA=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(Os(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return ns(s,t,"attack"),ns(s,t,"knee"),ns(s,t,"ratio"),ns(s,t,"release"),ns(s,t,"threshold"),s},Gi=(n,e)=>{const t=n.createGain();return Os(t,e),ns(t,e,"gain"),t},CA=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const a=e.createIIRFilter(s.feedforward,s.feedback);return Os(a,s),a};function TA(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function kA(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function G5(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=kA(t,e),t[0]+=n[s];return t}const jA=(n,e,t,s)=>(a,o,{channelCount:u,channelCountMode:c,channelInterpretation:h,feedback:f,feedforward:p})=>{const y=o3(o,a.sampleRate),_=f instanceof Float64Array?f:new Float64Array(f),b=p instanceof Float64Array?p:new Float64Array(p),A=_.length,N=b.length,k=Math.min(A,N);if(A===0||A>20)throw s();if(_[0]===0)throw e();if(N===0||N>20)throw s();if(b[0]===0)throw e();if(_[0]!==1){for(let L=0;L<N;L+=1)b[L]/=_[0];for(let L=1;L<A;L+=1)_[L]/=_[0]}const T=t(a,y,u,u);T.channelCount=u,T.channelCountMode=c,T.channelInterpretation=h;const R=32,D=[],V=[],F=[];for(let L=0;L<u;L+=1){D.push(0);const B=new Float32Array(R),te=new Float32Array(R);B.fill(0),te.fill(0),V.push(B),F.push(te)}T.onaudioprocess=L=>{const B=L.inputBuffer,te=L.outputBuffer,j=B.numberOfChannels;for(let I=0;I<j;I+=1){const K=B.getChannelData(I),P=te.getChannelData(I);D[I]=a3(_,A,b,N,k,V[I],F[I],D[I],R,K,P)}};const W=a.sampleRate/2;return Zh({get bufferSize(){return y},get channelCount(){return T.channelCount},set channelCount(L){T.channelCount=L},get channelCountMode(){return T.channelCountMode},set channelCountMode(L){T.channelCountMode=L},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(L){T.channelInterpretation=L},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},addEventListener(...L){return T.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return T.dispatchEvent(L[0])},getFrequencyResponse(L,B,te){if(L.length!==B.length||B.length!==te.length)throw n();const j=L.length;for(let I=0;I<j;I+=1){const K=-Math.PI*(L[I]/W),P=[Math.cos(K),Math.sin(K)],ie=G5(b,P),X=G5(_,P),re=TA(ie,X);B[I]=Math.sqrt(re[0]*re[0]+re[1]*re[1]),te[I]=Math.atan2(re[1],re[0])}},removeEventListener(...L){return T.removeEventListener(L[0],L[1],L[2])}},T)},EA=(n,e)=>n.createMediaElementSource(e.mediaElement),MA=(n,e)=>{const t=n.createMediaStreamDestination();return Os(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},LA=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((o,u)=>o.id<u.id?-1:o.id>u.id?1:0);const s=t.slice(0,1),a=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(a,"mediaStream",{value:e}),a},OA=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const a=new MediaStream([s]),o=t.createMediaStreamSource(a);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return o},DA=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,RA=(n,e,t,s,a,o)=>(u,c)=>{const h=u.createOscillator();return Os(h,c),ns(h,c,"detune"),ns(h,c,"frequency"),c.periodicWave!==void 0?h.setPeriodicWave(c.periodicWave):Vr(h,c,"type"),e(t,()=>t(u))||Xg(h),e(s,()=>s(u))||o(h,u),e(a,()=>a(u))||Zg(h),n(u,h),h},IA=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(Os(s,t),ns(s,t,"orientationX"),ns(s,t,"orientationY"),ns(s,t,"orientationZ"),ns(s,t,"positionX"),ns(s,t,"positionY"),ns(s,t,"positionZ"),Vr(s,t,"coneInnerAngle"),Vr(s,t,"coneOuterAngle"),Vr(s,t,"coneOuterGain"),Vr(s,t,"distanceModel"),Vr(s,t,"maxDistance"),Vr(s,t,"panningModel"),Vr(s,t,"refDistance"),Vr(s,t,"rolloffFactor"),s)},FA=(n,e,t,s,a,o,u,c,h,f)=>(p,{coneInnerAngle:y,coneOuterAngle:_,coneOuterGain:b,distanceModel:A,maxDistance:N,orientationX:k,orientationY:T,orientationZ:R,panningModel:D,positionX:V,positionY:F,positionZ:W,refDistance:H,rolloffFactor:L,...B})=>{const te=p.createPanner();if(B.channelCount>2||B.channelCountMode==="max")throw u();Os(te,B);const j={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=t(p,{...j,channelInterpretation:"speakers",numberOfInputs:6}),K=s(p,{...B,gain:1}),P=s(p,{...j,gain:1}),ie=s(p,{...j,gain:0}),X=s(p,{...j,gain:0}),re=s(p,{...j,gain:0}),le=s(p,{...j,gain:0}),fe=s(p,{...j,gain:0}),Se=a(p,256,6,1),z=o(p,{...j,curve:new Float32Array([1,1]),oversample:"none"});let M=[k,T,R],$=[V,F,W];const G=new Float32Array(1);Se.onaudioprocess=({inputBuffer:de})=>{const xe=[h(de,G,0),h(de,G,1),h(de,G,2)];xe.some((Be,Qe)=>Be!==M[Qe])&&(te.setOrientation(...xe),M=xe);const Ne=[h(de,G,3),h(de,G,4),h(de,G,5)];Ne.some((Be,Qe)=>Be!==$[Qe])&&(te.setPosition(...Ne),$=Ne)},Object.defineProperty(ie.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(re.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0}),Object.defineProperty(fe.gain,"defaultValue",{get:()=>0});const J={get bufferSize(){},get channelCount(){return te.channelCount},set channelCount(de){if(de>2)throw u();K.channelCount=de,te.channelCount=de},get channelCountMode(){return te.channelCountMode},set channelCountMode(de){if(de==="max")throw u();K.channelCountMode=de,te.channelCountMode=de},get channelInterpretation(){return te.channelInterpretation},set channelInterpretation(de){K.channelInterpretation=de,te.channelInterpretation=de},get coneInnerAngle(){return te.coneInnerAngle},set coneInnerAngle(de){te.coneInnerAngle=de},get coneOuterAngle(){return te.coneOuterAngle},set coneOuterAngle(de){te.coneOuterAngle=de},get coneOuterGain(){return te.coneOuterGain},set coneOuterGain(de){if(de<0||de>1)throw e();te.coneOuterGain=de},get context(){return te.context},get distanceModel(){return te.distanceModel},set distanceModel(de){te.distanceModel=de},get inputs(){return[K]},get maxDistance(){return te.maxDistance},set maxDistance(de){if(de<0)throw new RangeError;te.maxDistance=de},get numberOfInputs(){return te.numberOfInputs},get numberOfOutputs(){return te.numberOfOutputs},get orientationX(){return P.gain},get orientationY(){return ie.gain},get orientationZ(){return X.gain},get panningModel(){return te.panningModel},set panningModel(de){te.panningModel=de},get positionX(){return re.gain},get positionY(){return le.gain},get positionZ(){return fe.gain},get refDistance(){return te.refDistance},set refDistance(de){if(de<0)throw new RangeError;te.refDistance=de},get rolloffFactor(){return te.rolloffFactor},set rolloffFactor(de){if(de<0)throw new RangeError;te.rolloffFactor=de},addEventListener(...de){return K.addEventListener(de[0],de[1],de[2])},dispatchEvent(...de){return K.dispatchEvent(de[0])},removeEventListener(...de){return K.removeEventListener(de[0],de[1],de[2])}};y!==J.coneInnerAngle&&(J.coneInnerAngle=y),_!==J.coneOuterAngle&&(J.coneOuterAngle=_),b!==J.coneOuterGain&&(J.coneOuterGain=b),A!==J.distanceModel&&(J.distanceModel=A),N!==J.maxDistance&&(J.maxDistance=N),k!==J.orientationX.value&&(J.orientationX.value=k),T!==J.orientationY.value&&(J.orientationY.value=T),R!==J.orientationZ.value&&(J.orientationZ.value=R),D!==J.panningModel&&(J.panningModel=D),V!==J.positionX.value&&(J.positionX.value=V),F!==J.positionY.value&&(J.positionY.value=F),W!==J.positionZ.value&&(J.positionZ.value=W),H!==J.refDistance&&(J.refDistance=H),L!==J.rolloffFactor&&(J.rolloffFactor=L),(M[0]!==1||M[1]!==0||M[2]!==0)&&te.setOrientation(...M),($[0]!==0||$[1]!==0||$[2]!==0)&&te.setPosition(...$);const ae=()=>{K.connect(te),n(K,z,0,0),z.connect(P).connect(I,0,0),z.connect(ie).connect(I,0,1),z.connect(X).connect(I,0,2),z.connect(re).connect(I,0,3),z.connect(le).connect(I,0,4),z.connect(fe).connect(I,0,5),I.connect(Se).connect(p.destination)},pe=()=>{K.disconnect(te),c(K,z,0,0),z.disconnect(P),P.disconnect(I),z.disconnect(ie),ie.disconnect(I),z.disconnect(X),X.disconnect(I),z.disconnect(re),re.disconnect(I),z.disconnect(le),le.disconnect(I),z.disconnect(fe),fe.disconnect(I),I.disconnect(Se),Se.disconnect(p.destination)};return f(Zh(J,te),ae,pe)},VA=n=>(e,{disableNormalization:t,imag:s,real:a})=>{const o=s instanceof Float32Array?s:new Float32Array(s),u=a instanceof Float32Array?a:new Float32Array(a),c=e.createPeriodicWave(u,o,{disableNormalization:t});if(Array.from(s).length<2)throw n();return c},wf=(n,e,t,s)=>n.createScriptProcessor(e,t,s),BA=(n,e)=>(t,s)=>{const a=s.channelCountMode;if(a==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const o=t.createStereoPanner();return Os(o,s),ns(o,s,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>a,set:u=>{if(u!==a)throw e()}}),o},PA=(n,e,t,s,a,o)=>{const c=new Float32Array([1,1]),h=Math.PI/2,f={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},p={...f,oversample:"none"},y=(A,N,k,T)=>{const R=new Float32Array(16385),D=new Float32Array(16385);for(let B=0;B<16385;B+=1){const te=B/16384*h;R[B]=Math.cos(te),D[B]=Math.sin(te)}const V=t(A,{...f,gain:0}),F=s(A,{...p,curve:R}),W=s(A,{...p,curve:c}),H=t(A,{...f,gain:0}),L=s(A,{...p,curve:D});return{connectGraph(){N.connect(V),N.connect(W.inputs===void 0?W:W.inputs[0]),N.connect(H),W.connect(k),k.connect(F.inputs===void 0?F:F.inputs[0]),k.connect(L.inputs===void 0?L:L.inputs[0]),F.connect(V.gain),L.connect(H.gain),V.connect(T,0,0),H.connect(T,0,1)},disconnectGraph(){N.disconnect(V),N.disconnect(W.inputs===void 0?W:W.inputs[0]),N.disconnect(H),W.disconnect(k),k.disconnect(F.inputs===void 0?F:F.inputs[0]),k.disconnect(L.inputs===void 0?L:L.inputs[0]),F.disconnect(V.gain),L.disconnect(H.gain),V.disconnect(T,0,0),H.disconnect(T,0,1)}}},_=(A,N,k,T)=>{const R=new Float32Array(16385),D=new Float32Array(16385),V=new Float32Array(16385),F=new Float32Array(16385),W=Math.floor(16385/2);for(let re=0;re<16385;re+=1)if(re>W){const le=(re-W)/(16384-W)*h;R[re]=Math.cos(le),D[re]=Math.sin(le),V[re]=0,F[re]=1}else{const le=re/(16384-W)*h;R[re]=1,D[re]=0,V[re]=Math.cos(le),F[re]=Math.sin(le)}const H=e(A,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),L=t(A,{...f,gain:0}),B=s(A,{...p,curve:R}),te=t(A,{...f,gain:0}),j=s(A,{...p,curve:D}),I=s(A,{...p,curve:c}),K=t(A,{...f,gain:0}),P=s(A,{...p,curve:V}),ie=t(A,{...f,gain:0}),X=s(A,{...p,curve:F});return{connectGraph(){N.connect(H),N.connect(I.inputs===void 0?I:I.inputs[0]),H.connect(L,0),H.connect(te,0),H.connect(K,1),H.connect(ie,1),I.connect(k),k.connect(B.inputs===void 0?B:B.inputs[0]),k.connect(j.inputs===void 0?j:j.inputs[0]),k.connect(P.inputs===void 0?P:P.inputs[0]),k.connect(X.inputs===void 0?X:X.inputs[0]),B.connect(L.gain),j.connect(te.gain),P.connect(K.gain),X.connect(ie.gain),L.connect(T,0,0),K.connect(T,0,0),te.connect(T,0,1),ie.connect(T,0,1)},disconnectGraph(){N.disconnect(H),N.disconnect(I.inputs===void 0?I:I.inputs[0]),H.disconnect(L,0),H.disconnect(te,0),H.disconnect(K,1),H.disconnect(ie,1),I.disconnect(k),k.disconnect(B.inputs===void 0?B:B.inputs[0]),k.disconnect(j.inputs===void 0?j:j.inputs[0]),k.disconnect(P.inputs===void 0?P:P.inputs[0]),k.disconnect(X.inputs===void 0?X:X.inputs[0]),B.disconnect(L.gain),j.disconnect(te.gain),P.disconnect(K.gain),X.disconnect(ie.gain),L.disconnect(T,0,0),K.disconnect(T,0,0),te.disconnect(T,0,1),ie.disconnect(T,0,1)}}},b=(A,N,k,T,R)=>{if(N===1)return y(A,k,T,R);if(N===2)return _(A,k,T,R);throw a()};return(A,{channelCount:N,channelCountMode:k,pan:T,...R})=>{if(k==="max")throw a();const D=n(A,{...R,channelCount:1,channelCountMode:k,numberOfInputs:2}),V=t(A,{...R,channelCount:N,channelCountMode:k,gain:1}),F=t(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:T});let{connectGraph:W,disconnectGraph:H}=b(A,N,V,F,D);Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"maxValue",{get:()=>1}),Object.defineProperty(F.gain,"minValue",{get:()=>-1});const L={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(I){V.channelCount!==I&&(B&&H(),{connectGraph:W,disconnectGraph:H}=b(A,I,V,F,D),B&&W()),V.channelCount=I},get channelCountMode(){return V.channelCountMode},set channelCountMode(I){if(I==="clamped-max"||I==="max")throw a();V.channelCountMode=I},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(I){V.channelInterpretation=I},get context(){return V.context},get inputs(){return[V]},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get pan(){return F.gain},addEventListener(...I){return V.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return V.dispatchEvent(I[0])},removeEventListener(...I){return V.removeEventListener(I[0],I[1],I[2])}};let B=!1;const te=()=>{W(),B=!0},j=()=>{H(),B=!1};return o(Zh(L,D),te,j)}},zA=(n,e,t,s,a,o,u)=>(c,h)=>{const f=c.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,h);Os(f,h);const p=h.curve===null||h.curve instanceof Float32Array?h.curve:new Float32Array(h.curve);if(p!==null&&p.length<2)throw e();Vr(f,{curve:p},"curve"),Vr(f,h,"oversample");let y=null,_=!1;return u(f,"curve",N=>()=>N.call(f),N=>k=>(N.call(f,k),_&&(s(k)&&y===null?y=n(c,f):!s(k)&&y!==null&&(y(),y=null)),k)),a(f,()=>{_=!0,s(f.curve)&&(y=n(c,f))},()=>{_=!1,y!==null&&(y(),y=null)})},qA=(n,e,t,s,a)=>(o,{curve:u,oversample:c,...h})=>{const f=o.createWaveShaper(),p=o.createWaveShaper();Os(f,h),Os(p,h);const y=t(o,{...h,gain:1}),_=t(o,{...h,gain:-1}),b=t(o,{...h,gain:1}),A=t(o,{...h,gain:-1});let N=null,k=!1,T=null;const R={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(F){y.channelCount=F,_.channelCount=F,f.channelCount=F,b.channelCount=F,p.channelCount=F,A.channelCount=F},get channelCountMode(){return f.channelCountMode},set channelCountMode(F){y.channelCountMode=F,_.channelCountMode=F,f.channelCountMode=F,b.channelCountMode=F,p.channelCountMode=F,A.channelCountMode=F},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(F){y.channelInterpretation=F,_.channelInterpretation=F,f.channelInterpretation=F,b.channelInterpretation=F,p.channelInterpretation=F,A.channelInterpretation=F},get context(){return f.context},get curve(){return T},set curve(F){if(F!==null&&F.length<2)throw e();if(F===null)f.curve=F,p.curve=F;else{const W=F.length,H=new Float32Array(W+2-W%2),L=new Float32Array(W+2-W%2);H[0]=F[0],L[0]=-F[W-1];const B=Math.ceil((W+1)/2),te=(W+1)/2-1;for(let j=1;j<B;j+=1){const I=j/B*te,K=Math.floor(I),P=Math.ceil(I);H[j]=K===P?F[K]:(1-(I-K))*F[K]+(1-(P-I))*F[P],L[j]=K===P?-F[W-1-K]:-((1-(I-K))*F[W-1-K])-(1-(P-I))*F[W-1-P]}H[B]=W%2===1?F[B-1]:(F[B-2]+F[B-1])/2,f.curve=H,p.curve=L}T=F,k&&(s(T)&&N===null?N=n(o,y):N!==null&&(N(),N=null))},get inputs(){return[y]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(F){f.oversample=F,p.oversample=F},addEventListener(...F){return y.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return y.dispatchEvent(F[0])},removeEventListener(...F){return y.removeEventListener(F[0],F[1],F[2])}};u!==null&&(R.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==R.oversample&&(R.oversample=c);const D=()=>{y.connect(f).connect(b),y.connect(_).connect(p).connect(A).connect(b),k=!0,s(T)&&(N=n(o,y))},V=()=>{y.disconnect(f),f.disconnect(b),y.disconnect(_),_.disconnect(p),p.disconnect(A),A.disconnect(b),k=!1,N!==null&&(N(),N=null)};return a(Zh(R,b),D,V)},wi=()=>new DOMException("","NotSupportedError"),UA={numberOfChannels:1},HA=(n,e,t,s,a)=>class extends n{constructor(u,c,h){let f;if(typeof u=="number"&&c!==void 0&&h!==void 0)f={length:c,numberOfChannels:u,sampleRate:h};else if(typeof u=="object")f=u;else throw new Error("The given parameters are not valid.");const{length:p,numberOfChannels:y,sampleRate:_}={...UA,...f},b=s(y,p,_);e(af,()=>af(b))||b.addEventListener("statechange",(()=>{let A=0;const N=k=>{this._state==="running"&&(A>0?(b.removeEventListener("statechange",N),k.stopImmediatePropagation(),this._waitForThePromiseToSettle(k)):A+=1)};return N})()),super(b,y),this._length=p,this._nativeOfflineAudioContext=b,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,e3(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},WA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},GA=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...WA,...f},_=t(p,y),b=o(p),A=b?s():null,N=h.sampleRate/2;super(h,!1,_,A),this._detune=e(this,b,_.detune,153600,-153600),this._frequency=e(this,b,_.frequency,N,-N),this._nativeOscillatorNode=_,this._onended=null,this._oscillatorNodeRenderer=A,this._oscillatorNodeRenderer!==null&&y.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(h){const f=typeof h=="function"?u(this,h):null;this._nativeOscillatorNode.onended=f;const p=this._nativeOscillatorNode.onended;this._onended=p!==null&&p===f?h:p}get type(){return this._nativeOscillatorNode.type}set type(h){this._nativeOscillatorNode.type=h,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(h){this._nativeOscillatorNode.setPeriodicWave(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=h)}start(h=0){if(this._nativeOscillatorNode.start(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=h),this.context.state!=="closed"){qh(this);const f=()=>{this._nativeOscillatorNode.removeEventListener("ended",f),jl(this)&&bf(this)};this._nativeOscillatorNode.addEventListener("ended",f)}}stop(h=0){this._nativeOscillatorNode.stop(h),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=h)}},$A=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null,h=null;const f=async(p,y)=>{let _=t(p);const b=di(_,y);if(!b){const A={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,detune:_.detune.value,frequency:_.frequency.value,periodicWave:u===null?void 0:u,type:_.type};_=e(y,A),c!==null&&_.start(c),h!==null&&_.stop(h)}return o.set(y,_),b?(await n(y,p.detune,_.detune),await n(y,p.frequency,_.frequency)):(await s(y,p.detune,_.detune),await s(y,p.frequency,_.frequency)),await a(p,y,_),_};return{set periodicWave(p){u=p},set start(p){c=p},set stop(p){h=p},render(p,y){const _=o.get(y);return _!==void 0?Promise.resolve(_):f(p,y)}}},YA={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},XA=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...YA,...f},_=t(p,y),b=o(p),A=b?s():null;super(h,!1,_,A),this._nativePannerNode=_,this._orientationX=e(this,b,_.orientationX,yi,Ui),this._orientationY=e(this,b,_.orientationY,yi,Ui),this._orientationZ=e(this,b,_.orientationZ,yi,Ui),this._positionX=e(this,b,_.positionX,yi,Ui),this._positionY=e(this,b,_.positionY,yi,Ui),this._positionZ=e(this,b,_.positionZ,yi,Ui),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(h){this._nativePannerNode.coneInnerAngle=h}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(h){this._nativePannerNode.coneOuterAngle=h}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(h){this._nativePannerNode.coneOuterGain=h}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(h){this._nativePannerNode.distanceModel=h}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(h){this._nativePannerNode.maxDistance=h}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(h){this._nativePannerNode.panningModel=h}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(h){this._nativePannerNode.refDistance=h}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(h){this._nativePannerNode.rolloffFactor=h}},ZA=(n,e,t,s,a,o,u,c,h,f)=>()=>{const p=new WeakMap;let y=null;const _=async(b,A)=>{let N=null,k=o(b);const T={channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation},R={...T,coneInnerAngle:k.coneInnerAngle,coneOuterAngle:k.coneOuterAngle,coneOuterGain:k.coneOuterGain,distanceModel:k.distanceModel,maxDistance:k.maxDistance,panningModel:k.panningModel,refDistance:k.refDistance,rolloffFactor:k.rolloffFactor},D=di(k,A);if("bufferSize"in k)N=s(A,{...T,gain:1});else if(!D){const V={...R,orientationX:k.orientationX.value,orientationY:k.orientationY.value,orientationZ:k.orientationZ.value,positionX:k.positionX.value,positionY:k.positionY.value,positionZ:k.positionZ.value};k=a(A,V)}if(p.set(A,N===null?k:N),N!==null){if(y===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const j=new u(6,b.context.length,A.sampleRate),I=e(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});I.connect(j.destination),y=(async()=>{const K=await Promise.all([b.orientationX,b.orientationY,b.orientationZ,b.positionX,b.positionY,b.positionZ].map(async(P,ie)=>{const X=t(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ie===0?1:0});return await c(j,P,X.offset),X}));for(let P=0;P<6;P+=1)K[P].connect(I,0,P),K[P].start(0);return f(j)})()}const V=await y,F=s(A,{...T,gain:1});await h(b,A,F);const W=[];for(let j=0;j<V.numberOfChannels;j+=1)W.push(V.getChannelData(j));let H=[W[0][0],W[1][0],W[2][0]],L=[W[3][0],W[4][0],W[5][0]],B=s(A,{...T,gain:1}),te=a(A,{...R,orientationX:H[0],orientationY:H[1],orientationZ:H[2],positionX:L[0],positionY:L[1],positionZ:L[2]});F.connect(B).connect(te.inputs[0]),te.connect(N);for(let j=128;j<V.length;j+=128){const I=[W[0][j],W[1][j],W[2][j]],K=[W[3][j],W[4][j],W[5][j]];if(I.some((P,ie)=>P!==H[ie])||K.some((P,ie)=>P!==L[ie])){H=I,L=K;const P=j/A.sampleRate;B.gain.setValueAtTime(0,P),B=s(A,{...T,gain:0}),te=a(A,{...R,orientationX:H[0],orientationY:H[1],orientationZ:H[2],positionX:L[0],positionY:L[1],positionZ:L[2]}),B.gain.setValueAtTime(1,P),F.connect(B).connect(te.inputs[0]),te.connect(N)}}return N}return D?(await n(A,b.orientationX,k.orientationX),await n(A,b.orientationY,k.orientationY),await n(A,b.orientationZ,k.orientationZ),await n(A,b.positionX,k.positionX),await n(A,b.positionY,k.positionY),await n(A,b.positionZ,k.positionZ)):(await c(A,b.orientationX,k.orientationX),await c(A,b.orientationY,k.orientationY),await c(A,b.orientationZ,k.orientationZ),await c(A,b.positionX,k.positionX),await c(A,b.positionY,k.positionY),await c(A,b.positionZ,k.positionZ)),Xh(k)?await h(b,A,k.inputs[0]):await h(b,A,k),k};return{render(b,A){const N=p.get(A);return N!==void 0?Promise.resolve(N):_(b,A)}}},KA={disableNormalization:!1},QA=(n,e,t,s)=>class u3{constructor(o,u){const c=e(o),h=s({...KA,...u}),f=n(c,h);return t.add(f),f}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===u3.prototype||t.has(o)}},JA=(n,e)=>(t,s,a)=>(n(s).replay(a),e(s,t,a)),e8=(n,e,t)=>async(s,a,o)=>{const u=n(s);await Promise.all(u.activeInputs.map((c,h)=>Array.from(c).map(async([f,p])=>{const _=await e(f).render(f,a),b=s.context.destination;!t(f)&&(s!==b||!t(s))&&_.connect(o,p,h)})).reduce((c,h)=>[...c,...h],[]))},t8=(n,e,t)=>async(s,a,o)=>{const u=e(s);await Promise.all(Array.from(u.activeInputs).map(async([c,h])=>{const p=await n(c).render(c,a);t(c)||p.connect(o,h)}))},n8=(n,e,t,s)=>a=>n(af,()=>af(a))?Promise.resolve(n(s,s)).then(o=>{if(!o){const u=t(a,512,0,1);a.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>a.currentTime,u.connect(a.destination)}return a.startRendering()}):new Promise(o=>{const u=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=c=>{u.disconnect(),o(c.renderedBuffer)},u.connect(a.destination),a.startRendering()}),r8=n=>(e,t)=>{n.set(e,t)},s8=n=>(e,t)=>n.set(e,t),i8=(n,e,t,s,a,o,u,c)=>(h,f)=>t(h).render(h,f).then(()=>Promise.all(Array.from(s(f)).map(p=>t(p).render(p,f)))).then(()=>a(f)).then(p=>(typeof p.copyFromChannel!="function"?(u(p),Gg(p)):e(o,()=>o(p))||c(p),n.add(p),p)),a8={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},o8=(n,e,t,s,a,o)=>class extends n{constructor(c,h){const f=a(c),p={...a8,...h},y=t(f,p),_=o(f),b=_?s():null;super(c,!1,y,b),this._pan=e(this,_,y.pan)}get pan(){return this._pan}},l8=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,h)=>{let f=t(c);const p=di(f,h);if(!p){const y={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,pan:f.pan.value};f=e(h,y)}return o.set(h,f),p?await n(h,c.pan,f.pan):await s(h,c.pan,f.pan),Xh(f)?await a(c,h,f.inputs[0]):await a(c,h,f),f};return{render(c,h){const f=o.get(h);return f!==void 0?Promise.resolve(f):u(c,h)}}},c8=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},u8=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),a=URL.createObjectURL(t);let o=!1,u=!1;try{await s.audioWorklet.addModule(a);const c=new n(s,"a",{numberOfOutputs:0}),h=s.createOscillator();c.port.onmessage=()=>o=!0,c.onprocessorerror=()=>u=!0,h.connect(c),h.start(0),await s.startRendering(),await new Promise(f=>setTimeout(f))}catch{}finally{URL.revokeObjectURL(a)}return o&&!u},h8=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{t.oncomplete=()=>{s.disconnect(),a(t.currentTime!==0)},t.startRendering()})},d8=()=>new DOMException("","UnknownError"),f8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},p8=(n,e,t,s,a,o,u)=>class extends n{constructor(h,f){const p=a(h),y={...f8,...f},_=t(p,y),A=o(p)?s():null;super(h,!0,_,A),this._isCurveNullified=!1,this._nativeWaveShaperNode=_,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(h){if(h===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(h.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=h}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(h){this._nativeWaveShaperNode.oversample=h}},m8=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!di(c,u)){const f={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=n(u,f)}return s.set(u,c),Xh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},g8=()=>typeof window>"u"?null:window,b8=(n,e)=>t=>{t.copyFromChannel=(s,a,o=0)=>{const u=n(o),c=n(a);if(c>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(c),p=s.length;for(let y=u<0?-u:0;y+u<h&&y<p;y+=1)s[y]=f[y+u]},t.copyToChannel=(s,a,o=0)=>{const u=n(o),c=n(a);if(c>=t.numberOfChannels)throw e();const h=t.length,f=t.getChannelData(c),p=s.length;for(let y=u<0?-u:0;y+u<h&&y<p;y+=1)f[y+u]=s[y]}},v8=n=>e=>{e.copyFromChannel=(t=>(s,a,o=0)=>{const u=n(o),c=n(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyFromChannel),e.copyToChannel=(t=>(s,a,o=0)=>{const u=n(o),c=n(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyToChannel)},y8=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",a=>()=>{const o=a.call(e);return o===s?null:o},a=>o=>a.call(e,o===null?s:o))},x8=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const a=t.createBufferSource();e(s,()=>{const c=s.numberOfInputs;for(let h=0;h<c;h+=1)a.connect(s,0,h)},()=>a.disconnect(s))},h3=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),d3=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},_f=(n,e,t,s)=>{let a=n;for(;!a.hasOwnProperty(e);)a=Object.getPrototypeOf(a);const{get:o,set:u}=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(n,e,{get:t(o),set:s(u)})},w8=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),_8=n=>({...n,channelCount:n.numberOfOutputs}),S8=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},f3=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;f3(n,e,t+1e-7)}},N8=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},A8=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},C8=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Kg=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},p3=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Qg=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},T8=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},k8=n=>{n.start=(e=>(t=0,s=0,a)=>{const o=n.buffer,u=o===null?s:Math.min(o.duration,s);o!==null&&u>o.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,u,a)})(n.start)},m3=(n,e)=>{const t=e.createGain();n.connect(t);const s=(a=>()=>{a.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Zh(n,t),n.stop=(a=>{let o=!1;return(u=0)=>{if(o)try{a.call(n,u)}catch{t.gain.setValueAtTime(0,u)}else a.call(n,u),o=!0}})(n.stop)},Kh=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},j8=XS(Au),E8=t6(Au),M8=fN(Fp),g3=new WeakMap,L8=MN(g3),bo=U6(new Map,new WeakMap),Go=g8(),b3=oA(bo,Yo),Jg=EN(xi),ti=e8(xi,Jg,wu),O8=a6(b3,kr,ti),yr=DN(Ip),Rl=DA(Go),dr=KN(Rl),v3=new WeakMap,y3=SN(Kh),Sf=hA(Go),e2=$N(Sf),t2=YN(Go),x3=XN(Go),of=fA(Go),cs=M6(ZS($x),e6(j8,E8,lp,M8,cp,xi,L8,gf,kr,Au,jl,wu,G1),bo,qN(cg,cp,xi,kr,sf,jl),Yo,Vp,wi,cN(lp,cg,xi,kr,sf,yr,jl,dr),gN(v3,xi,ho),y3,yr,e2,t2,x3,dr,of),D8=i6(cs,O8,Yo,b3,yr,dr),n2=new WeakSet,$5=lA(Go),w3=nN(new Uint32Array(1)),r2=b8(w3,Yo),s2=v8(w3),_3=l6(n2,bo,wi,$5,Rl,c8($5),r2,s2),Bp=n6(Gi),S3=t8(Jg,vf,wu),Xo=Z6(S3),Qh=uA(Bp,bo,N8,A8,C8,Kg,p3,Qg,k8,y8(_f),m3),Zo=JA(LN(vf),S3),R8=h6(Xo,Qh,kr,Zo,ti),vo=L6(KS(Yx),v3,Wg,O6,US,HS,WS,GS,$S,ag,Wx,Sf,f3),I8=u6(cs,R8,vo,Ws,Qh,yr,dr,Kh),F8=x6(cs,w6,Yo,Ws,dA(Gi,_f),yr,dr,ti),V8=q6(Xo,l3,kr,Zo,ti),Cu=s8(g3),B8=z6(cs,vo,V8,Vp,l3,yr,dr,Cu),Rc=iA(Au,t2),P8=x8(Ws,Rc),Ic=xA(Sf,P8),z8=G6(Ic,kr,ti),q8=W6(cs,z8,Ic,yr,dr),U8=X6(xf,kr,ti),H8=Y6(cs,U8,xf,yr,dr,_8),W8=SA(Bp,Qh,Gi,Rc),Jh=_A(Bp,bo,W8,Kg,Qg),G8=tN(Xo,Jh,kr,Zo,ti),$8=eN(cs,vo,G8,Jh,yr,dr,Kh),N3=NA(wi,_f),Y8=iN(N3,kr,ti),X8=sN(cs,Y8,N3,yr,dr,Cu),Z8=dN(Xo,c3,kr,Zo,ti),K8=hN(cs,vo,Z8,c3,yr,dr,Cu),A3=AA(wi),Q8=xN(Xo,A3,kr,Zo,ti),J8=yN(cs,vo,Q8,A3,wi,yr,dr,Cu),eC=kN(Xo,Gi,kr,Zo,ti),tC=TN(cs,vo,eC,Gi,yr,dr),nC=jA(Vp,Ws,wf,wi),Pp=n8(bo,Gi,wf,h8(Gi,Rl)),rC=zN(Qh,kr,Rl,ti,Pp),sC=CA(nC),iC=BN(cs,sC,rC,yr,dr,Cu),aC=_6(vo,Ic,Jh,wf,wi,h3,dr,_f),C3=new WeakMap,oC=sA(F8,aC,y3,dr,C3,Kh),T3=RA(Bp,bo,Kg,p3,Qg,m3),lC=$A(Xo,T3,kr,Zo,ti),cC=GA(cs,vo,T3,lC,yr,dr,Kh),k3=Q6(Qh),uC=qA(k3,Ws,Gi,d3,Rc),zp=zA(k3,Ws,uC,d3,Rc,Sf,_f),hC=FA(lp,Ws,Ic,Gi,wf,zp,wi,cp,h3,Rc),j3=IA(hC),dC=ZA(Xo,Ic,Jh,Gi,j3,kr,Rl,Zo,ti,Pp),fC=XA(cs,vo,j3,dC,yr,dr,Cu),pC=VA(Yo),mC=QA(pC,yr,new WeakSet,S8),gC=PA(Ic,xf,Gi,zp,wi,Rc),E3=BA(gC,wi),bC=l8(Xo,E3,kr,Zo,ti),vC=o8(cs,vo,E3,bC,yr,dr),yC=m8(zp,kr,ti),xC=p8(cs,Ws,zp,yC,yr,dr,Cu),M3=QN(Go),i2=NN(Go),L3=new WeakMap,wC=RN(L3,Rl),_C=M3?JS(bo,wi,_N(Go),i2,AN(YS),yr,wC,dr,of,new WeakMap,new WeakMap,u8(of,Rl),Go):void 0,SC=ZN(e2,dr),NC=lN(n2,bo,oN,wN,new WeakSet,yr,SC,ap,af,r2,s2),O3=B6(_C,D8,_3,I8,B8,q8,H8,$8,X8,NC,K8,J8,tC,iC,oC,cC,fC,mC,vC,xC),AC=JN(cs,EA,yr,dr),CC=tA(cs,MA,yr,dr),TC=nA(cs,LA,yr,dr),kC=OA(Ws,dr),jC=rA(cs,kC,yr),EC=y6(O3,Ws,wi,d8,AC,CC,TC,jC,Sf),a2=IN(C3),MC=r6(a2),D3=K6(Yo),LC=pN(a2),R3=bN(Yo),I3=new WeakMap,OC=jN(I3,ho),DC=yA(D3,Yo,Ws,Ic,xf,Jh,Gi,wf,wi,R3,i2,OC,Rc),RC=mA(Ws,DC,Gi,wi,Rc),IC=V6(Xo,D3,Qh,Ic,xf,Jh,Gi,LC,R3,i2,kr,of,Rl,Zo,ti,Pp),FC=ON(L3),VC=r8(I3),Y5=M3?R6(MC,cs,vo,IC,RC,xi,FC,yr,dr,of,w8,VC,T8,Kh):void 0,BC=aN(wi,Rl),PC=i8(n2,bo,Jg,a2,Pp,ap,r2,s2),zC=HA(O3,bo,Ws,BC,PC),qC=UN(Ip,e2),UC=HN(Hg,t2),HC=WN(Wg,x3),WC=GN(Ip,dr);function Ma(n){return n===void 0}function Rn(n){return n!==void 0}function GC(n){return typeof n=="function"}function Ml(n){return typeof n=="number"}function bu(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function $C(n){return typeof n=="boolean"}function da(n){return Array.isArray(n)}function Ll(n){return typeof n=="string"}function M1(n){return Ll(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function en(n,e){if(!n)throw new Error(e)}function Ol(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function F3(n){!n.isOffline&&n.state!=="running"&&qp('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let V3=!1,X5=!1;function Z5(n){V3=n}function YC(n){Ma(n)&&V3&&!X5&&(X5=!0,qp("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let B3=console;function XC(...n){B3.log(...n)}function qp(...n){B3.warn(...n)}function ZC(n){return new EC(n)}function KC(n,e,t){return new zC(n,e,t)}const ca=typeof self=="object"?self:null,QC=ca&&(ca.hasOwnProperty("AudioContext")||ca.hasOwnProperty("webkitAudioContext"));function JC(n,e,t){return en(Rn(Y5),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof ca?.BaseAudioContext?ca?.AudioWorkletNode:Y5)(n,e,t)}function yo(n,e,t,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,s);else for(var c=n.length-1;c>=0;c--)(u=n[c])&&(o=(a<3?u(o):a>3?u(e,t,o):u(e,t))||o);return a>3&&o&&Object.defineProperty(e,t,o),o}function ys(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(p){try{f(s.next(p))}catch(y){u(y)}}function h(p){try{f(s.throw(p))}catch(y){u(y)}}function f(p){p.done?o(p.value):a(p.value).then(c,h)}f((s=s.apply(n,e||[])).next())})}class eT{constructor(e,t,s,a){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function _u(n){return HC(n)}function Cc(n){return UC(n)}function $1(n){return WC(n)}function Sh(n){return qC(n)}function tT(n){return n instanceof _3}function nT(n,e){return n==="value"||_u(e)||Cc(e)||tT(e)}function vu(n,...e){if(!e.length)return n;const t=e.shift();if(bu(n)&&bu(t))for(const s in t)nT(s,t[s])?n[s]=t[s]:bu(t[s])?(n[s]||Object.assign(n,{[s]:{}}),vu(n[s],t[s])):Object.assign(n,{[s]:t[s]});return vu(n,...e)}function rT(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function Kt(n,e,t=[],s){const a={},o=Array.from(e);if(bu(o[0])&&s&&!Reflect.has(o[0],s)&&(Object.keys(o[0]).some(c=>Reflect.has(n,c))||(vu(a,{[s]:o[0]}),t.splice(t.indexOf(s),1),o.shift())),o.length===1&&bu(o[0]))vu(a,o[0]);else for(let u=0;u<t.length;u++)Rn(o[u])&&(a[t[u]]=o[u]);return vu(n,a)}function sT(n){return n.constructor.getDefaults()}function Lh(n,e){return Ma(n)?e:n}function lo(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}class Il{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||ca&&this.toString()===ca.TONE_DEBUG_CLASS)&&XC(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Il.version=Hx;const o2=1e-6;function Uh(n,e){return n>e+o2}function pg(n,e){return Uh(n,e)||ao(n,e)}function fp(n,e){return n+o2<e}function ao(n,e){return Math.abs(n-e)<o2}function iT(n,e,t){return Math.max(Math.min(n,t),e)}class La extends Il{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Kt(La.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(en(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];en(pg(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(ao(this._timeline[t].time,e)){for(let s=t;s>=0&&ao(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&pg(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const a=this._timeline.length;let o=a;if(a>0&&this._timeline[a-1][t]<=e)return a-1;for(;s<o;){let u=Math.floor(s+(o-s)/2);const c=this._timeline[u],h=this._timeline[u+1];if(ao(c[t],e)){for(let f=u;f<this._timeline.length;f++){const p=this._timeline[f];if(ao(p[t],e))u=f;else break}return u}else{if(fp(c[t],e)&&Uh(h[t],e))return u;Uh(c[t],e)?o=u:s=u+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let a=this._search(e),o=this._search(t);return a!==-1&&o!==-1?(this._timeline[a].time!==e&&(a+=1),this._timeline[o].time===t&&(o-=1),this._iterate(s,a,o)):a===-1&&this._iterate(s,0,o),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&ao(this._timeline[s].time,e)){let a=s;for(let o=s;o>=0&&ao(this._timeline[o].time,e);o--)a=o;this._iterate(o=>{t(o)},a,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const P3=[];function Up(n){P3.push(n)}function aT(n){P3.forEach(e=>e(n))}const z3=[];function Hp(n){z3.push(n)}function oT(n){z3.forEach(e=>e(n))}class Nf extends Il{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(a=>{Ma(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(t)}),this}once(e,t){const s=(...a)=>{t(...a),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(a=>{if(Ma(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(Ma(t))this._events[a]=[];else{const o=this._events[a];for(let u=o.length-1;u>=0;u--)o[u]===t&&o.splice(u,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let a=0,o=s.length;a<o;a++)s[a].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Nf.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class q3 extends Nf{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}let l2=class U3 extends q3{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new La,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=Kt(U3.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=ZC({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new eT(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(aT(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return en(Sh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return en(Sh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return en(Sh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){en(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){en(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){en(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){en(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return JC(this.rawContext,e,t)}addAudioWorkletModule(e){return ys(this,void 0,void 0,function*(){en(Rn(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ys(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Sh(this._context)?this._context.resume():Promise.resolve()}close(){return ys(this,void 0,void 0,function*(){Sh(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&oT(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let o=0;o<s.length;o++)s[o]=e;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=t,a.loop=!0,a.start(0),this._constants.set(e,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,a=()=>{const o=this.now();this._timeouts.add({callback:()=>{e(),a()},id:s,time:o+t})};return a(),s}};class lT extends q3{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ys(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function jr(n,e){da(e)?e.forEach(t=>jr(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function c2(n,e){da(e)?e.forEach(t=>c2(n,t)):Object.defineProperty(n,e,{writable:!0})}const hr=()=>{};class Cr extends Il{constructor(){super(),this.name="ToneAudioBuffer",this.onload=hr;const e=Kt(Cr.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Ll(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:hr,onload:hr,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:co().sampleRate}set(e){return e instanceof Cr?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ys(this,void 0,void 0,function*(){const t=Cr.load(e).then(s=>{this.set(s),this.onload(this)});Cr.downloads.push(t);try{yield t}finally{const s=Cr.downloads.indexOf(t);Cr.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=da(e)&&e[0].length>0,s=t?e.length:1,a=t?e[0].length:e.length,o=co(),u=o.createBuffer(s,a,o.sampleRate),c=!t&&s===1?[e]:e;for(let h=0;h<s;h++)u.copyToChannel(c[h],h);return this._buffer=u,this}toMono(e){if(Ml(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let a=0;a<s;a++){const o=this.toArray(a);for(let u=0;u<o.length;u++)t[u]+=o[u]}t=t.map(a=>a/s),this.fromArray(t)}return this}toArray(e){if(Ml(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){en(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),a=Math.floor(t*this.sampleRate);en(s<a,"The start time must be less than the end time");const o=a-s,u=co().createBuffer(this.numberOfChannels,o,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)u.copyToChannel(this.getChannelData(c).subarray(s,a),c);return new Cr(u)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Cr().fromArray(e)}static fromUrl(e){return ys(this,void 0,void 0,function*(){return yield new Cr().load(e)})}static load(e){return ys(this,void 0,void 0,function*(){const t=Cr.baseUrl===""||Cr.baseUrl.endsWith("/")?Cr.baseUrl:Cr.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const a=yield s.arrayBuffer();return yield co().decodeAudioData(a)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return ys(this,void 0,void 0,function*(){for(yield Promise.resolve();Cr.downloads.length;)yield Cr.downloads[0]})}}Cr.baseUrl="";Cr.downloads=[];class u2 extends l2{constructor(){super({clockSource:"offline",context:$1(arguments[0])?arguments[0]:KC(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:$1(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=$1(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ys(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return ys(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Cr(t)})}close(){return Promise.resolve()}}const H3=new lT;let pu=H3;function co(){return pu===H3&&QC&&cT(new l2),pu}function cT(n,e=!1){e&&pu.dispose(),Sh(n)?pu=new l2(n):$1(n)?pu=new u2(n):pu=n}function Tu(){return pu.resume()}if(ca&&!ca.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Hx} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function uT(n){return Math.pow(10,n/20)}function hT(n){return 20*(Math.log(n)/Math.LN10)}function W3(n){return Math.pow(2,n/12)}let Wp=440;function dT(){return Wp}function fT(n){Wp=n}function mu(n){return Math.round(G3(n))}function G3(n){return 69+12*Math.log2(n/Wp)}function $3(n){return Wp*Math.pow(2,(n-69)/12)}class h2 extends Il{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),a=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/s)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let a=0;return e&&e!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a+=this._beatsToUnits(parseFloat(s)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof h2&&this.fromType(this._val),Ma(this._val))return this._noArg();if(Ll(this._val)&&Ma(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(bu(this._val)){let e=0;for(const t in this._val)if(Rn(this._val[t])){const s=this._val[t],a=new this.constructor(this.context,t).valueOf()*s;e+=a}return e}if(Rn(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Ll(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class uo extends h2{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new uo(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),a=this.valueOf(),c=Math.round(a/s)*s-a;return a+c*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let o=1;o<9;o++){const u=Math.pow(2,o);t.push(u+"n."),t.push(u+"n"),t.push(u+"t")}t.push("0");let s=t[0],a=new uo(this.context,t[0]).toSeconds();return t.forEach(o=>{const u=new uo(this.context,o).toSeconds();Math.abs(u-e)<Math.abs(a-e)&&(s=o,a=u)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let a=t%1*4;t=Math.floor(t)%this._getTimeSignature();const o=a.toString();return o.length>3&&(a=parseFloat(parseFloat(o).toFixed(3))),[s,t,a].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return mu(this.toFrequency())}_now(){return this.context.now()}}class ua extends uo{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return dT()}static set A4(e){fT(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:ua.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const a=pT[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?a:ua.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let a=1;return e&&e!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a*=this._beatsToUnits(parseFloat(s)/4)),a}}})}transpose(e){return new ua(this.context,this.valueOf()*W3(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return mu(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/ua.A4);let s=Math.round(12*t)+57;const a=Math.floor(s/12);return a<0&&(s+=-12*a),mT[s%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return $3(e)}static ftom(e){return mu(e)}}const pT={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},mT=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Zd extends uo{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Wi extends Il{constructor(){super();const e=Kt(Wi.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:co()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return YC(e),new uo(this.context,e).toSeconds()}toFrequency(e){return new ua(this.context,e).toFrequency()}toTicks(e){return new Zd(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Ma(e[s])&&delete t[s]}),t}get(){const e=sT(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Rn(s)&&Rn(s.value)&&Rn(s.setValueAtTime)?e[t]=s.value:s instanceof Wi?e[t]=s._getPartialProperties(e[t]):da(s)||Ml(s)||Ll(s)||$C(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Rn(this[t])&&(this[t]&&Rn(this[t].value)&&Rn(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Wi?this[t].set(e[t]):this[t]=e[t])}),this}}class d2 extends La{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return Ol(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let a=s;a>=0;a--){const o=this._timeline[a];if(o.state===e)return o}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let a=s;a<this._timeline.length;a++){const o=this._timeline[a];if(o.state===e)return o}}}class br extends Wi{constructor(){const e=Kt(br.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,en(Rn(e.param)&&(_u(e.param)||e.param instanceof br),"param must be an AudioParam");!_u(e.param);)e.param=e.param._param;this._swappable=Rn(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new La(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Rn(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Wi.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Rn(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Rn(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Rn(this.maxValue)&&Rn(this.minValue)&&Ol(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?uT(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?hT(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),a=this._fromType(e);return en(isFinite(a)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),a=this._events.get(t);let o=this._initialValue;if(a===null)o=this._initialValue;else if(a.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const u=this._events.getBefore(a.time);let c;u===null?c=this._initialValue:c=u.value,a.type==="setTargetAtTime"&&(o=this._exponentialApproach(a.time,c,a.value,a.constant,t))}else if(s===null)o=a.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=a.value;if(a.type==="setTargetAtTime"){const c=this._events.getBefore(a.time);c===null?u=this._initialValue:u=c.value}s.type==="linearRampToValueAtTime"?o=this._linearInterpolate(a.time,u,s.time,s.value,t):o=this._exponentialInterpolate(a.time,u,s.time,s.value,t)}else o=a.value;return this._toType(o)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),a=this.toSeconds(t);return en(isFinite(s)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:a,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,a),this._param.linearRampToValueAtTime(s,a),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=ao(s,0)?this._minOutput:s,this._assertRange(s);const a=this.toSeconds(t);return en(isFinite(s)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,a),this._param.exponentialRampToValueAtTime(s,a),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const a=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,a),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const a=this._fromType(e);en(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const o=this.toSeconds(t);return this._assertRange(a),en(isFinite(a)&&isFinite(o),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:o,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",e,o,s),this._param.setTargetAtTime(a,o,s),this}setValueCurveAtTime(e,t,s,a=1){s=this.toSeconds(s),t=this.toSeconds(t);const o=this._fromType(e[0])*a;this.setValueAtTime(this._toType(o),t);const u=s/(e.length-1);for(let c=1;c<e.length;c++){const h=this._fromType(e[c])*a;this.linearRampToValueAtTime(this._toType(h),t+c*u)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return en(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));en(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const a=this._events.get(t),o=this._events.getAfter(t);return a&&ao(a.time,t)?o?(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):o&&(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time),o.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):o.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const a=this._events.getAfter(s.time),o=a?a.time:t+2,u=(o-t)/10;for(let c=t;c<o;c+=u)e.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?e.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?e.setTargetAtTime(a.value,a.time,a.constant):e[a.type](a.value,a.time)}),this}setParam(e){en(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,a,o){return s+(t-s)*Math.exp(-(o-e)/a)}_linearInterpolate(e,t,s,a,o){return t+(a-t)*((o-e)/(s-e))}_exponentialInterpolate(e,t,s,a,o){return t*Math.pow(a/t,(o-e)/(s-e))}}class hn extends Wi{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Rn(this.input)?_u(this.input)||this.input instanceof br?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Rn(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Rn(e)&&(e instanceof hn||Cc(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();en(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return ed(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return qp("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return gT(this,e,t,s),this}chain(...e){return lf(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Rn(this.input)&&(this.input instanceof hn?this.input.dispose():Cc(this.input)&&this.input.disconnect()),Rn(this.output)&&(this.output instanceof hn?this.output.dispose():Cc(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function lf(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof hn?t.connect(s):Cc(t)&&ed(t,s),s),e)}function ed(n,e,t=0,s=0){for(en(Rn(n),"Cannot connect from undefined node"),en(Rn(e),"Cannot connect to undefined node"),(e instanceof hn||Cc(e))&&en(e.numberOfInputs>0,"Cannot connect to node with no inputs"),en(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof hn||e instanceof br;)Rn(e.input)&&(e=e.input);for(;n instanceof hn;)Rn(n.output)&&(n=n.output);_u(e)?n.connect(e,t):n.connect(e,t,s)}function gT(n,e,t=0,s=0){if(Rn(e))for(;e instanceof hn;)e=e.input;for(;!Cc(n);)Rn(n.output)&&(n=n.output);_u(e)?n.disconnect(e,t):Cc(e)?n.disconnect(e,t,s):n.disconnect()}class ws extends hn{constructor(){const e=Kt(ws.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new br({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),jr(this,"gain")}static getDefaults(){return Object.assign(hn.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Hh extends hn{constructor(e){super(e),this.onended=hr,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ws({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(hn.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:hr})}_startGain(e,t=1){en(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){en(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==hr&&(this.onended(this),this.onended=hr,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),en(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=hr,this}}class f2 extends Hh{constructor(){const e=Kt(f2.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),ed(this._source,this._gainNode),this.offset=new br({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Hh.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class vr extends hn{constructor(){const e=Kt(vr.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new f2({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(hn.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return p2(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,a){return this._param.setValueCurveAtTime(e,t,s,a),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function p2(n,e,t,s){(e instanceof br||_u(e)||e instanceof vr&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof vr&&(e.overridden=!0)),ed(n,e,t,s)}class m2 extends br{constructor(){const e=Kt(m2.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new La(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(br.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const a=this._fromType(e),o=this._events.get(t),u=Math.round(Math.max(1/s,1));for(let c=0;c<=u;c++){const h=s*c+t,f=this._exponentialApproach(o.time,o.value,a,s,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),a=this._events.get(t),o=Math.round(Math.max((t-a.time)*10,1)),u=(t-a.time)/o;for(let c=0;c<=o;c++){const h=u*c+a.time,f=this._exponentialInterpolate(a.time,a.value,t,s,h);this.linearRampToValueAtTime(this._toType(f),h)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ma(e.ticks)){const u=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(u,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let a=this._fromType(this.getValueAtTime(t));const o=this._events.get(t);return o&&o.time===t&&o.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+a)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(t);return this.getTimeOfTick(a+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const a=this._fromType(this.getValueAtTime(t.time)),u=(this._fromType(this.getValueAtTime(s.time))-a)/(s.time-t.time),c=Math.sqrt(Math.pow(a,2)-2*u*(t.ticks-e)),h=(-a+c)/u,f=(-a-c)/u;return(h>0?h:f)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),a=this.toSeconds(e),o=this.getTicksAtTime(s);return this.getTicksAtTime(s+a)-o}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class g2 extends vr{constructor(){const e=Kt(g2.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new m2({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(vr.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class b2 extends Wi{constructor(){const e=Kt(b2.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new d2,this._tickOffset=new La,this._ticksAtTime=new La,this._secondsAtTime=new La,this.frequency=new g2({context:this.context,units:e.units,value:e.frequency}),jr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Wi.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Rn(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),a=this._ticksAtTime.get(t),o={state:"paused",time:t};this._state.add(o);let u=a||s,c=a?a.ticks:0,h=null;return this._state.forEachBetween(u.time,t+this.sampleTime,f=>{let p=u.time;const y=this._tickOffset.get(f.time);y&&y.time>=u.time&&(c=y.ticks,p=y.time),u.state==="started"&&f.state!=="started"&&(c+=this.frequency.getTicksAtTime(f.time)-this.frequency.getTicksAtTime(p),f.time!==o.time&&(h={state:f.state,time:f.time,ticks:c})),u=f}),this._state.remove(o),h&&this._ticksAtTime.add(h),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const a=this._secondsAtTime.get(e);let o=a||t,u=a?a.seconds:0,c=null;return this._state.forEachBetween(o.time,e+this.sampleTime,h=>{let f=o.time;const p=this._tickOffset.get(h.time);p&&p.time>=o.time&&(u=p.seconds,f=p.time),o.state==="started"&&h.state!=="started"&&(u+=h.time-f,h.time!==s.time&&(c={state:h.state,time:h.time,seconds:u})),o=h}),this._state.remove(s),c&&this._secondsAtTime.add(c),u}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),a=this._state.get(t),o=Math.max(s.time,a.time),u=this.frequency.getTicksAtTime(o)+e-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(e,t,s){let a=this._state.get(e);this._state.forEachBetween(e,t,u=>{a&&a.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(a.time,e),u.time-this.sampleTime,s),a=u});let o=null;if(a&&a.state==="started"){const u=Math.max(a.time,e),c=this.frequency.getTicksAtTime(u),h=this.frequency.getTicksAtTime(a.time),f=c-h;let p=Math.ceil(f)-f;p=ao(p,1)?0:p;let y=this.frequency.getTimeOfTick(c+p);for(;y<t;){try{s(y,Math.round(this.getTicksAtTime(y)))}catch(_){o=_;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(o)throw o;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}let Y3=class X3 extends Wi{constructor(){const e=Kt(X3.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=hr,this._lastUpdate=0,this._state=new d2("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new b2({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,jr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Wi.getDefaults(),{callback:hr,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){F3(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(a+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const a=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,a);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,a)=>{this.callback(s,a)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};Nf.mixin(Y3);class td extends hn{constructor(){const e=Kt(td.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new ws({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,jr(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(hn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class v2 extends hn{constructor(){const e=Kt(v2.getDefaults(),arguments);super(e),this.name="Destination",this.input=new td({context:this.context}),this.output=new ws({context:this.context}),this.volume=this.input.volume,lf(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(hn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),lf(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Up(n=>{n.destination=new v2({context:n})});Hp(n=>{n.destination.dispose()});class bT extends hn{constructor(){super(...arguments),this.name="Listener",this.positionX=new br({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new br({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new br({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new br({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new br({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new br({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new br({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new br({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new br({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(hn.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Up(n=>{n.listener=new bT({context:n})});Hp(n=>{n.listener.dispose()});class y2 extends Il{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Kt(y2.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:hr,onload:hr,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return en(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=hr,a=hr){return Ll(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Cr(this.baseUrl+t,s,a))):this._buffers.set(e.toString(),new Cr(t,s,a)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class pp extends ua{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return mu(super._frequencyToUnits(e))}_ticksToUnits(e){return mu(super._ticksToUnits(e))}_beatsToUnits(e){return mu(super._beatsToUnits(e))}_secondsToUnits(e){return mu(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return $3(this.toMidi())}transpose(e){return new pp(this.context,this.toMidi()+e)}}class Th extends Zd{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class vT extends Wi{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new La,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Up(n=>{n.draw=new vT({context:n})});Hp(n=>{n.draw.dispose()});class yT extends Il{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){en(Rn(e.time),"Events must have a time property"),en(Rn(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new xT(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,a=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,a=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,a=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,a=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,a=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),a=e.right;a&&(e.right=a.left,a.left=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),a=e.left;a&&(e.left=a.right,a.right=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let a=1;a<t.length;a++)t[a].low>s.low&&(s=t[a]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class xT{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class wT extends Il{constructor(e){super(),this.name="TimelineValue",this._timeline=new La({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Tc extends hn{constructor(){super(Kt(Tc.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return p2(this,e,t,s),this}}class Af extends Tc{constructor(){const e=Kt(Af.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,da(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):GC(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(vr.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let a=0,o=t;a<o;a++){const u=a/(o-1)*2-1;s[a]=e(u,a)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));en(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Gp extends Tc{constructor(){const e=Kt(Gp.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Af({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Tc.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class kc{constructor(e,t){this.id=kc._eventId++,this._remainderTime=0;const s=Object.assign(kc.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:hr,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}kc._eventId=0;class x2 extends kc{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(x2.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},kc.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return fp(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Th(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){fp(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Th(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Uh(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class $p extends Wi{constructor(){const e=Kt($p.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new wT(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new La,this._repeatedEvents=new yT,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Y3({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),jr(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Wi.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(s*Math.PI)*this._swingAmount;e+=new Th(this.context,this._swingTicks*2/3).toSeconds()*a}Z5(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),Z5(!1)}schedule(e,t){const s=new kc(this,{callback:e,time:new Zd(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,a=1/0){const o=new x2(this,{callback:e,duration:new uo(this.context,a).toTicks(),interval:new uo(this.context,t).toTicks(),time:new Zd(this.context,s).toTicks()});return this._addEvent(o,this._repeatedEvents)}scheduleOnce(e,t){const s=new kc(this,{callback:e,once:!0,time:new Zd(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Th(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return Rn(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){da(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new uo(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new uo(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Th(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Th(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),a=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),o=t+a;this.emit("stop",o),this._clock.setTicksAtTime(e,o),this.emit("start",o,this._clock.getSecondsAtTime(o))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),a=e-s%e;return this._clock.nextTickTime(a,t)}}syncSignal(e,t){const s=this.now();let a=this.bpm,o=1/(60/a.getValueAtTime(s)/this.PPQ),u=[];if(e.units==="time"){const h=.015625/o,f=new ws(h),p=new Gp(-1),y=new ws(h);a.chain(f,p,y),a=y,o=1/o,u=[f,p,y]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/o:t=0);const c=new ws(t);return a.connect(c),c.connect(e._param),u.push(c),this._syncedSignals.push({initial:e.value,nodes:u,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(a=>a.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),c2(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Nf.mixin($p);Up(n=>{n.transport=new $p({context:n})});Hp(n=>{n.transport.dispose()});class hi extends hn{constructor(e){super(e),this.input=void 0,this._state=new d2("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=hr,this._syncedStop=hr,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new td({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,jr(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(hn.getDefaults(),{mute:!1,onstop:hr,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let a=Ma(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")en(Uh(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,t,s);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const o=this._state.get(a);o&&(o.offset=this.toSeconds(Lh(t,0)),o.duration=s?this.toSeconds(s):void 0);const u=this.context.transport.schedule(c=>{this._start(c,t,s)},a);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else F3(this.context),this._start(a,t,s);return this}stop(e){let t=Ma(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Rn(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Uh(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const a=t-this.toSeconds(s.time);let o;s.duration&&(o=this.toSeconds(s.duration)-a),this._start(e,this.toSeconds(s.offset)+a,o)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=hr,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Yp extends Hh{constructor(){const e=Kt(Yp.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,ed(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new br({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Cr(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Hh.getDefaults(),{url:new Cr,loop:!1,loopEnd:0,loopStart:0,onload:hr,onerror:hr,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,a=1){en(this.buffer.loaded,"buffer is either not set or not loaded");const o=this.toSeconds(e);this._startGain(o,a),this.loop?t=Lh(t,this.loopStart):t=Lh(t,0);let u=Math.max(this.toSeconds(t),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,h=this.toSeconds(this.loopStart),f=c-h;pg(u,c)&&(u=(u-h)%f+h),ao(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,fp(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(o,u)),Rn(s)){let c=this.toSeconds(s);c=Math.max(c,0),this.stop(o+c)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function ku(n,e){return ys(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new u2(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class w2 extends Hh{constructor(){const e=Kt(w2.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],ed(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new br({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new br({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),jr(this,["frequency","detune"])}static getDefaults(){return Object.assign(Hh.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class vs extends hi{constructor(){const e=Kt(vs.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new vr({context:this.context,units:"frequency",value:e.frequency}),jr(this,"frequency"),this.detune=new vr({context:this.context,units:"cents",value:e.detune}),jr(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(hi.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new w2({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return vs._periodicWaveCache.find(t=>t.phase===this._phase&&rT(t.partials,this._partials));{const e=vs._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(Rn(s)){const{partials:a,wave:o}=s;this._wave=o,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,o]=this._getRealImaginary(e,this._phase),u=this.context.createPeriodicWave(a,o);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),vs._periodicWaveCache.push({imag:o,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),vs._periodicWaveCache.length>100&&vs._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Ol(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const a=new Float32Array(e);this._partials.forEach((o,u)=>a[u]=o),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(e,t){let a=2048;const o=new Float32Array(a),u=new Float32Array(a);let c=1;if(e==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,a=c,this._partials.length===0)return[o,u]}else{const h=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);h?(c=parseInt(h[2],10)+1,this._partialCount=parseInt(h[2],10),e=h[1],c=Math.max(c,2),a=c):this._partialCount=0,this._partials=[]}for(let h=1;h<a;++h){const f=2/(h*Math.PI);let p;switch(e){case"sine":p=h<=c?1:0,this._partials[h-1]=p;break;case"square":p=h&1?2*f:0,this._partials[h-1]=p;break;case"sawtooth":p=f*(h&1?1:-1),this._partials[h-1]=p;break;case"triangle":h&1?p=2*(f*f)*(h-1>>1&1?-1:1):p=0,this._partials[h-1]=p;break;case"custom":p=this._partials[h-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}p!==0?(o[h]=-p*Math.sin(t*h),u[h]=p*Math.cos(t*h)):(o[h]=0,u[h]=0)}return[o,u]}_inverseFFT(e,t,s){let a=0;const o=e.length;for(let u=0;u<o;u++)a+=e[u]*Math.cos(u*s)+t[u]*Math.sin(u*s);return a}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const a=Math.PI*2,o=32;for(let u=0;u<o;u++)s=Math.max(this._inverseFFT(e,t,u/o*a),s);return iT(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}vs._periodicWaveCache=[];class Z3 extends Tc{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Af({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Dl extends vr{constructor(){const e=Kt(Dl.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ws({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(vr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Xp extends hi{constructor(){const e=Kt(Xp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new Z3({context:this.context}),this._modulationNode=new ws({context:this.context}),this._carrier=new vs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new vs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Dl({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),jr(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(vs.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Zp extends hi{constructor(){const e=Kt(Zp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new ws({context:this.context,gain:0}),this._carrier=new vs({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new vr({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new vs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Dl({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Dl({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),jr(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(vs.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Cf extends hi{constructor(){const e=Kt(Cf.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new ws({context:this.context,gain:0}),this._thresh=new Af({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new vr({context:this.context,units:"audioRange",value:e.width}),this._triangle=new vs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),jr(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(hi.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Kp extends hi{constructor(){const e=Kt(Kp.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new vr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new vr({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,jr(this,["frequency","detune"])}static getDefaults(){return Object.assign(vs.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((a,o)=>a.detune.value=t+s*o)}}get count(){return this._oscillators.length}set count(e){if(Ol(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new vs({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):hr});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Qp extends hi{constructor(){const e=Kt(Qp.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Dl({context:this.context,value:2}),this._pulse=new Cf({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new vs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),jr(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(hi.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const K5={am:Xp,fat:Kp,fm:Zp,oscillator:vs,pulse:Cf,pwm:Qp};class jc extends hi{constructor(){const e=Kt(jc.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new vr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new vr({context:this.context,units:"cents",value:e.detune}),jr(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(vs.getDefaults(),Zp.getDefaults(),Xp.getDefaults(),Kp.getDefaults(),Cf.getDefaults(),Qp.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=K5[e],s=this.now();if(this._oscillator){const a=this._oscillator;a.stop(s),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof K5[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Ml(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Ml(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Ll(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ys(this,arguments,void 0,function*(e=1024){return ku(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class _2 extends vr{constructor(){super(Kt(_2.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new ws({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,lf(this._constantSource,this._sum)}static getDefaults(){return Object.assign(vr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class S2 extends Tc{constructor(){const e=Kt(S2.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Dl({context:this.context,value:e.max-e.min}),this._add=this.output=new _2({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Tc.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function K3(n,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){Ol(o,n,e),t.set(this,o)}})}}function Fl(n,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){Ol(this.toSeconds(o),n,e),t.set(this,o)}})}}class Jp extends hi{constructor(){const e=Kt(Jp.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Cr({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(hi.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:hr,onerror:hr,playbackRate:1,reverse:!1})}load(e){return ys(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=hr){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=Lh(t,this._loopStart):t=Lh(t,0);const a=this.toSeconds(t),o=s;s=Lh(s,Math.max(this._buffer.duration-a,0));let u=this.toSeconds(s);u=u/this._playbackRate,e=this.toSeconds(e);const c=new Yp({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+u),this._state.setStateAtTime("stopped",e+u,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&Ma(o)?c.start(e,a):c.start(e,a,u-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const a=this.toSeconds(e);this._stop(s),this._start(s,a)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Ol(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Ol(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}yo([Fl(0)],Jp.prototype,"fadeIn",void 0);yo([Fl(0)],Jp.prototype,"fadeOut",void 0);class fa extends hn{constructor(){const e=Kt(fa.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new vr({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(hn.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Ll(e))return e;{let s;for(s in L1)if(L1[s][t]===e)return s;return e}}_setCurve(e,t,s){if(Ll(s)&&Reflect.has(L1,s)){const a=L1[s];bu(a)?e!=="_decayCurve"&&(this[e]=a[t]):this[e]=a}else if(da(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let a=this.toSeconds(this.attack);const o=this.toSeconds(this.decay),u=this.getValueAtTime(e);if(u>0){const c=1/a;a=(1-u)/c}if(a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,a,e);else{this._sig.cancelAndHoldAtTime(e);let c=this._attackCurve;for(let h=1;h<c.length;h++)if(c[h-1]<=u&&u<=c[h]){c=this._attackCurve.slice(h),c[0]=u;break}this._sig.setValueCurveAtTime(c,e,a,t)}if(o&&this.sustain<1){const c=t*this.sustain,h=e+a;this.log("decay",h),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,o+h):this._sig.exponentialApproachValueAtTime(c,h,o)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(en(da(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return p2(this,e,t,s),this}asArray(){return ys(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,s=new u2(1,t,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),o=a+this.toSeconds(this.release),u=o*.1,c=o+u,h=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/c,decay:t*this.toSeconds(this.decay)/c,release:t*this.toSeconds(this.release)/c,context:s}));return h._sig.toDestination(),h.triggerAttackRelease(t*(a+u)/c,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}yo([Fl(0)],fa.prototype,"attack",void 0);yo([Fl(0)],fa.prototype,"decay",void 0);yo([K3(0,1)],fa.prototype,"sustain",void 0);yo([Fl(0)],fa.prototype,"release",void 0);const L1=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const a=[],o=6.4;for(e=0;e<127;e++){t=e/127;const _=Math.sin(t*(Math.PI*2)*o-Math.PI/2)+1;a[e]=_/10+t*.83}a[127]=1;const u=[],c=5;for(e=0;e<128;e++)u[e]=Math.ceil(e/127*c)/c;const h=[];for(e=0;e<128;e++)t=e/127,h[e]=.5*(1-Math.cos(Math.PI*t));const f=[];for(e=0;e<128;e++){t=e/127;const _=Math.pow(t,3)*4+.2,b=Math.cos(_*Math.PI*2*t);f[e]=Math.abs(b*(1-t))}function p(_){const b=new Array(_.length);for(let A=0;A<_.length;A++)b[A]=1-_[A];return b}function y(_){return _.slice(0).reverse()}return{bounce:{In:p(f),Out:f},cosine:{In:s,Out:y(s)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:p(a)},sine:{In:h,Out:p(h)},step:{In:u,Out:p(u)}}})();class Ec extends hn{constructor(){const e=Kt(Ec.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new td({context:this.context,volume:e.volume}),this.volume=this._volume.volume,jr(this,"volume")}static getDefaults(){return Object.assign(hn.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...a)=>{const o=a[t],u=this.context.transport.schedule(c=>{a[t]=c,s.apply(this,a)},o);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s),u=this.toSeconds(t);return this.triggerAttack(e,o,a),this.triggerRelease(o+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class fo extends Ec{constructor(){const e=Kt(fo.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Ec.getDefaults(),{detune:0,onsilence:hr,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const a=this.toSeconds(t);return this._triggerEnvelopeAttack(a,s),this.setNote(e,a),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),a=e instanceof ua?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const o=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,o,s)}else this.frequency.setValueAtTime(a,s);return this}}yo([Fl(0)],fo.prototype,"portamento",void 0);class e0 extends fa{constructor(){super(Kt(e0.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ws({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Ea extends fo{constructor(){const e=Kt(Ea.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new jc(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new e0(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),jr(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(fo.getDefaults(),{envelope:Object.assign(lo(fa.getDefaults(),Object.keys(hn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(lo(jc.getDefaults(),[...Object.keys(hi.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class cf extends fo{constructor(){const e=Kt(cf.getDefaults(),arguments);super(e),this.name="ModulationSynth",this._carrier=new Ea({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Ea({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new vr({context:this.context,units:"frequency"}),this.detune=new vr({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new Dl({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new ws({context:this.context,gain:0}),jr(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(fo.getDefaults(),{harmonicity:3,oscillator:Object.assign(lo(jc.getDefaults(),[...Object.keys(hi.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(lo(fa.getDefaults(),Object.keys(hn.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(lo(jc.getDefaults(),[...Object.keys(hi.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(lo(fa.getDefaults(),Object.keys(hn.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class mp extends cf{constructor(){super(Kt(mp.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new Z3({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class gp extends hn{constructor(){const e=Kt(gp.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new br({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new br({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new br({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new br({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(hn.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){en(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let u=0;u<e;u++){const h=Math.pow(u/e,2)*19980+20;t[u]=h}const s=new Float32Array(e),a=new Float32Array(e),o=this.context.createBiquadFilter();return o.type=this.type,o.Q.value=this.Q.value,o.frequency.value=this.frequency.value,o.gain.value=this.gain.value,o.getFrequencyResponse(t,s,a),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class bp extends hn{constructor(){const e=Kt(bp.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new ws({context:this.context}),this.output=new ws({context:this.context}),this._filters=[],this._filters=[],this.Q=new vr({context:this.context,units:"positive",value:e.Q}),this.frequency=new vr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new vr({context:this.context,units:"cents",value:e.detune}),this.gain=new vr({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,jr(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(hn.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){en(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=Ml(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let a=s.indexOf(t);en(a!==-1,`rolloff can only be ${s.join(", ")}`),a+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(o=>o.disconnect()),this._filters=new Array(a);for(let o=0;o<a;o++){const u=new gp({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[o]=u}this._internalChannels=this._filters,lf(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new gp({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((o,u)=>s[u]*=o)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),c2(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class vp extends fa{constructor(){const e=Kt(vp.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Gp({context:this.context,value:e.exponent}),this._scale=this.output=new S2({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(fa.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);Ol(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class yp extends fo{constructor(){const e=Kt(yp.getDefaults(),arguments);super(e),this.name="MonoSynth",this.oscillator=new jc(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new bp(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new vp(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new e0(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),jr(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(fo.getDefaults(),{envelope:Object.assign(lo(fa.getDefaults(),Object.keys(hn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(lo(bp.getDefaults(),Object.keys(hn.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(lo(vp.getDefaults(),Object.keys(hn.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(lo(jc.getDefaults(),Object.keys(hi.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Kd extends cf{constructor(){const e=Kt(Kd.getDefaults(),arguments);super(e),this.name="FMSynth",this.modulationIndex=new Dl({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(cf.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class t0 extends Ea{constructor(){const e=Kt(t0.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,jr(this,["oscillator","envelope"])}static getDefaults(){return vu(fo.getDefaults(),Ea.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),a=this.toFrequency(e instanceof ua?e.toFrequency():e),o=a*this.octaves;return this.oscillator.frequency.setValueAtTime(o,s),this.oscillator.frequency.exponentialRampToValueAtTime(a,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}yo([K3(0)],t0.prototype,"octaves",void 0);yo([Fl(0)],t0.prototype,"pitchDecay",void 0);const Q3=new Set;function N2(n){Q3.add(n)}function J3(n,e){const t=`registerProcessor("${n}", ${e})`;Q3.add(t)}const _T=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;N2(_T);const ST=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;N2(ST);const NT=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;N2(NT);const AT="feedback-comb-filter",CT=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;J3(AT,CT);class zi extends Ec{constructor(){const e=Kt(zi.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),en(!Ml(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Ec.getDefaults(),{maxPolyphony:32,options:{},voice:Ea})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return en(e instanceof fo,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else qp("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(a=>{const o=new pp(this.context,a).toMidi(),u=this._getNextAvailableVoice();u&&(u.triggerAttack(a,t,s),this._activeVoices.push({midi:o,voice:u,released:!1}),this.log("triggerAttack",a,t))})}_triggerRelease(e,t){e.forEach(s=>{const a=new pp(this.context,s).toMidi(),o=this._activeVoices.find(({midi:u,released:c})=>u===a&&!c);o&&(o.voice.triggerRelease(t),o.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,a){en(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,a):this._triggerRelease(t,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,s,a)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const a=this.toSeconds(t);return this._scheduleEvent("attack",e,a,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s);if(this.triggerAttack(e,o,a),da(t)){en(da(e),"If the duration is an array, the notes must also be an array"),e=e;for(let u=0;u<e.length;u++){const c=t[Math.min(u,t.length-1)],h=this.toSeconds(c);en(h>0,"The duration must be greater than 0"),this.triggerRelease(e[u],o+h)}}else{const u=this.toSeconds(t);en(u>0,"The duration must be greater than 0"),this.triggerRelease(e,o+u)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=lo(e,["onsilence","context"]);return this.options=vu(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Tf extends Ec{constructor(){const e=Kt(Tf.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(s=>{const a=parseInt(s,10);if(en(M1(s)||Ml(a)&&isFinite(a),`url key is neither a note or midi pitch: ${s}`),M1(s)){const o=new ua(this.context,s).toMidi();t[o]=e.urls[s]}else Ml(a)&&isFinite(a)&&(t[a]=e.urls[a])}),this._buffers=new y2({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Ec.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:hr,onerror:hr,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(a=>{const o=G3(new ua(this.context,a).toFrequency()),u=Math.round(o),c=o-u,h=this._findClosest(u),f=u-h,p=this._buffers.get(f),y=W3(h+c),_=new Yp({url:p,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);_.start(t,0,p.duration/y,s),da(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(_),_.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const b=this._activeSources.get(u),A=b.indexOf(_);A!==-1&&b.splice(A,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const a=new ua(this.context,s).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const o=this._activeSources.get(a);t=this.toSeconds(t),o.forEach(u=>{u.stop(t)}),this._activeSources.set(a,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,a=1){const o=this.toSeconds(s);return this.triggerAttack(e,o,a),da(t)?(en(da(e),"notes must be an array when duration is array"),e.forEach((u,c)=>{const h=t[Math.min(c,t.length-1)];this.triggerRelease(u,o+this.toSeconds(h))})):this.triggerRelease(e,o+this.toSeconds(t)),this}add(e,t,s){if(en(M1(e)||isFinite(e),`note must be a pitch or midi: ${e}`),M1(e)){const a=new ua(this.context,e).toMidi();this._buffers.add(a,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}yo([Fl(0)],Tf.prototype,"attack",void 0);yo([Fl(0)],Tf.prototype,"release",void 0);class A2 extends hn{constructor(){const e=Kt(A2.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new br({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",jr(this,"pan")}static getDefaults(){return Object.assign(hn.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const TT="bit-crusher",kT=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;J3(TT,kT);class bs extends hn{constructor(){const e=Kt(bs.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new ws({context:this.context}),bs._allSolos.has(this.context)||bs._allSolos.set(this.context,new Set),bs._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(hn.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),bs._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){bs._soloed.has(this.context)||bs._soloed.set(this.context,new Set),bs._soloed.get(this.context).add(this)}_removeSolo(){bs._soloed.has(this.context)&&bs._soloed.get(this.context).delete(this)}_isSoloed(){return bs._soloed.has(this.context)&&bs._soloed.get(this.context).has(this)}_noSolos(){return!bs._soloed.has(this.context)||bs._soloed.has(this.context)&&bs._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),bs._allSolos.get(this.context).delete(this),this._removeSolo(),this}}bs._allSolos=new Map;bs._soloed=new Map;class C2 extends hn{constructor(){const e=Kt(C2.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new A2({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new td({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,jr(this,["pan","volume"])}static getDefaults(){return Object.assign(hn.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class kh extends hn{constructor(){const e=Kt(kh.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new bs({solo:e.solo,context:this.context}),this._panVol=this.output=new C2({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),jr(this,["pan","volume"])}static getDefaults(){return Object.assign(hn.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return kh.buses.has(e)||kh.buses.set(e,new ws({context:this.context})),kh.buses.get(e)}send(e,t=0){const s=this._getBus(e),a=new ws({context:this.context,units:"decibels",gain:t});return this.connect(a),a.connect(s),a}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}kh.buses=new Map;const Hi=co().transport,ew=co().destination;co().destination;co().listener;co().draw;const xs=co();function jT(){return Cr.loaded()}const O1=({cx:n,cy:e,innerRadius:t,outerRadius:s,startAngle:a,endAngle:o,color:u,label:c,chord:h,isSelected:f,isDiatonic:p,isSecondary:y=!1,onClick:_,onDoubleClick:b,ringType:A="major",wheelRotation:N=0,romanNumeral:k,voicingSuggestion:T,segmentId:R="seg",onHover:D})=>{const V=BS(n,e,t,s,a,o),F=(a+o)/2,W=Cn.useRef(0),H=Cn.useRef(null),[L,B]=Cn.useState(!1),te=Cn.useRef(null),j=Cn.useRef(!1),I=Cn.useRef(!1),K=-N,P=s-t,ie=t+P*.5,X=t+P*.18,re=Nc(n,e,ie,F),le=Nc(n,e,X,F),fe=s-6,Se=VS(n,e,fe,a+1,o-1),z=`voicing-arc-${R}`,M=`clip-${R}`,G=(()=>{let Re=.35,nt=.5;p?(Re=1,nt=1):y&&(Re=.7,nt=.65);const ct=u.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(ct){const vt=parseInt(ct[1]),It=Math.round(parseInt(ct[2])*nt),St=parseInt(ct[3]);let Ft=St;return A==="minor"?Ft=Math.max(St-8,30):A==="diminished"&&(Ft=Math.max(St-15,25)),{fill:`hsl(${vt}, ${It}%, ${Ft}%)`,opacity:Re}}return{fill:u,opacity:Re}})(),J=()=>A==="diminished"?"10px":A==="minor"?"12px":"14px",ae=p||y,pe=ae?"#000000":"rgba(255,255,255,0.7)",de=p?"bold":y?"600":"normal",xe=A==="diminished"||A==="minor"?"6px":"8px",Ne=A==="major"?ae?6:5:A==="minor"?ae?4:3.25:ae?3.5:3,Be=ae?1:.95,Qe=Re=>{if(B(!0),Re.touches.length>=2){I.current=!0,te.current=null;return}Re.touches.length===1&&!I.current&&(te.current={x:Re.touches[0].clientX,y:Re.touches[0].clientY},j.current=!1)},Xe=Re=>{if(Re.touches.length>=2){I.current=!0,j.current=!0;return}if(te.current&&Re.touches.length===1&&!I.current){const nt=Re.touches[0],ct=nt.clientX-te.current.x,vt=nt.clientY-te.current.y;Math.sqrt(ct*ct+vt*vt)>15&&(j.current=!0)}},st=async Re=>{Re.preventDefault(),Re.stopPropagation(),B(!1);const nt=I.current,ct=j.current;if(te.current=null,j.current=!1,Re.touches.length===0&&(I.current=!1),nt||ct)return;xs.state!=="running"&&await Tu();const vt=Date.now(),It=vt-W.current;H.current&&(clearTimeout(H.current),H.current=null),It<300&&It>0?(W.current=0,b&&b(h)):(W.current=vt,H.current=setTimeout(()=>{_(h),H.current=null},300))},Y=()=>{B(!1),te.current=null,j.current=!1,I.current=!1,H.current&&(clearTimeout(H.current),H.current=null)},Ie=Re=>{Re.stopPropagation(),et.current&&(clearTimeout(et.current),et.current=null),D&&D(null,0,0),_(h)},dt=Re=>{Re.stopPropagation(),et.current&&(clearTimeout(et.current),et.current=null),D&&D(null,0,0),b&&b(h)},et=Cn.useRef(null),ge=Re=>{if(!D)return;const nt=Re.clientX,ct=Re.clientY;et.current=setTimeout(()=>{D("Select a chord slot in the timeline, then double-click a chord or chord voicing to add to the timeline.",nt,ct)},3e3)},qe=()=>{et.current&&(clearTimeout(et.current),et.current=null),D&&D(null,0,0)};return g.jsxs("g",{className:Rt("cursor-pointer transition-all duration-200",!ae&&"hover:opacity-70",L&&"opacity-80"),onClick:Ie,onDoubleClick:dt,onTouchStart:Qe,onTouchMove:Xe,onTouchEnd:st,onTouchCancel:Y,onMouseEnter:ge,onMouseLeave:qe,style:{pointerEvents:"all",WebkitTapHighlightColor:"transparent"},children:[(p||y)&&T&&g.jsx("defs",{children:g.jsx("path",{id:z,d:Se,fill:"none"})}),g.jsx("defs",{children:g.jsx("clipPath",{id:M,children:g.jsx("path",{d:V})})}),g.jsx("path",{d:V,fill:G.fill,opacity:G.opacity,stroke:k==="I"?"rgba(0,0,0,0.6)":"rgba(0,0,0,0.3)",strokeWidth:k==="I"?2.5:1,className:Rt("transition-all duration-200 hover:brightness-110",f&&"brightness-125 stroke-white stroke-2",ae&&"hover:brightness-105"),style:{pointerEvents:"all"}}),f&&g.jsx("path",{d:V,fill:"none",stroke:"white",strokeWidth:Ne,opacity:Be,filter:"url(#segment-glow)",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none",clipPath:`url(#${M})`}),(p||y)&&T&&A==="major"&&g.jsx("text",{fill:"rgba(0,0,0,0.6)",fontSize:"6px",className:"pointer-events-none select-none",children:g.jsx("textPath",{href:`#${z}`,startOffset:"50%",textAnchor:"middle",children:T})}),p&&T&&A==="minor"&&g.jsx("text",{fill:"rgba(0,0,0,0.55)",fontSize:"5px",className:"pointer-events-none select-none",children:g.jsx("textPath",{href:`#${z}`,startOffset:"50%",textAnchor:"middle",children:T})}),p&&T&&A==="diminished"&&g.jsx("text",{fill:"rgba(0,0,0,0.5)",fontSize:"5px",className:"pointer-events-none select-none",children:g.jsx("textPath",{href:`#${z}`,startOffset:"50%",textAnchor:"middle",children:T})}),g.jsx("text",{x:re.x,y:re.y,textAnchor:"middle",dominantBaseline:"middle",fill:pe,fontWeight:de,fontSize:J(),className:"pointer-events-none select-none",transform:`rotate(${K}, ${re.x}, ${re.y})`,children:Ln(c)}),(p||y)&&k&&g.jsx("text",{x:le.x,y:le.y,textAnchor:"middle",dominantBaseline:"middle",fill:"rgba(0,0,0,0.6)",fontSize:xe,fontStyle:"italic",className:"pointer-events-none select-none",transform:`rotate(${K}, ${le.x}, ${le.y})`,children:k})]})};const ET=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MT=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Q5=n=>{const e=MT(n);return e.charAt(0).toUpperCase()+e.slice(1)},tw=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),LT=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var OT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const DT=ee.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:u,...c},h)=>ee.createElement("svg",{ref:h,...OT,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:tw("lucide",a),...!o&&!LT(c)&&{"aria-hidden":"true"},...c},[...u.map(([f,p])=>ee.createElement(f,p)),...Array.isArray(o)?o:[o]]));const cn=(n,e)=>{const t=ee.forwardRef(({className:s,...a},o)=>ee.createElement(DT,{ref:o,iconNode:e,className:tw(`lucide-${ET(Q5(n))}`,`lucide-${n}`,s),...a}));return t.displayName=Q5(n),t};const RT=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],IT=cn("arrow-down",RT);const FT=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],VT=cn("arrow-up",FT);const BT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jh=cn("chevron-down",BT);const PT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Wh=cn("chevron-right",PT);const zT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Gh=cn("chevron-left",zT);const qT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],nw=cn("chevron-up",qT);const UT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Oh=cn("circle-question-mark",UT);const HT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],WT=cn("circle",HT);const GT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$T=cn("clock",GT);const YT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],XT=cn("copy",YT);const ZT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],n0=cn("download",ZT);const KT=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],QT=cn("eraser",KT);const JT=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],ek=cn("file-plus",JT);const tk=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],nk=cn("folder-open",tk);const rk=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],rw=cn("grip-vertical",rk);const sk=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],sw=cn("hand",sk);const ik=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ak=cn("hash",ik);const ok=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],lk=cn("info",ok);const ck=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],uk=cn("layers",ck);const hk=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],iw=cn("list-music",hk);const dk=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fk=cn("loader-circle",dk);const pk=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],xp=cn("map",pk);const mk=[["path",{d:"M5 12h14",key:"1ays0h"}]],gk=cn("minus",mk);const bk=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],vk=cn("mouse-pointer-2",bk);const yk=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],wp=cn("music",yk);const xk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],wk=cn("panel-right-close",xk);const _k=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Sk=cn("panel-right",_k);const Nk=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],aw=cn("pause",Nk);const Ak=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],nd=cn("play",Ak);const Ck=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Mc=cn("plus",Ck);const Tk=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],kk=cn("refresh-cw",Tk);const jk=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],J5=cn("repeat",jk);const Ek=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_p=cn("rotate-ccw",Ek);const Mk=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],$h=cn("rotate-cw",Mk);const Lk=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],mg=cn("save",Lk);const Ok=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ow=cn("settings-2",Ok);const Dk=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],lw=cn("skip-back",Dk);const Rk=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],cw=cn("skip-forward",Rk);const Ik=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Fk=cn("sparkles",Ik);const Vk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],uw=cn("square",Vk);const Bk=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Pk=cn("tag",Bk);const zk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gg=cn("trash-2",zk);const qk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],bg=cn("volume-2",qk);const Uk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],Hk=cn("volume-x",Uk);const Wk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Lc=cn("x",Wk);const Gk=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],$k=cn("zoom-in",Gk);const Yk=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Xk=cn("zoom-out",Yk);let Oc={piano:null,epiano:null,guitar:null,organ:null,synth:null,strings:null,pad:null,brass:null,marimba:null,bell:null,lead:null,bass:null,choir:null},T2="piano",Wd=null,Y1=[],Sp={},ey=!1,qi=null;const k2=()=>{if(qi)return;if("audioSession"in navigator)try{navigator.audioSession.type="playback",console.log("[iOS Audio] Set audioSession.type to playback")}catch(t){console.warn("[iOS Audio] Could not set audioSession type:",t)}const n=["/+NIxAAAAAANIAAAAAExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/","40jEAA8AAAANIAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU"].join("");qi=document.createElement("audio"),qi.src="data:audio/mpeg;base64,"+n,qi.loop=!0,qi.volume=.001,qi.muted=!1,qi.setAttribute("playsinline","true"),qi.setAttribute("x-webkit-airplay","deny"),qi.preload="auto",document.body.appendChild(qi);const e=qi.play();e!==void 0&&e.then(()=>{console.log("[iOS Audio] Silent media started - ringer switch workaround active")}).catch(t=>{console.log("[iOS Audio] Silent audio deferred until user gesture:",t.message)})},j2=async()=>{if(!ey){if(console.log("[iOS Audio] Starting unlock sequence..."),k2(),qi&&qi.paused)try{await qi.play(),console.log("[iOS Audio] Silent audio now playing")}catch(n){console.warn("[iOS Audio] Silent audio play failed:",n)}try{await Tu(),console.log("[iOS Audio] Tone.start() completed, state:",xs.state)}catch(n){console.warn("[iOS Audio] Tone.start() failed:",n)}if(xs.state!=="running")try{await xs.resume(),console.log("[iOS Audio] Context resumed, state:",xs.state)}catch(n){console.warn("[iOS Audio] Context resume failed:",n)}ey=!0,console.log("[iOS Audio] Unlock sequence complete")}},E2=n=>{n in Oc&&(T2=n)},hw=n=>{const e=n<=0?-1/0:20*Math.log10(n);try{ew.volume.rampTo(e,.1)}catch(t){console.error("Error setting volume:",t)}},dw=n=>{ew.mute=n},Vl=async()=>{if(Wd)return Wd;Wd=(async()=>{const n="https://tonejs.github.io/audio/salamander/",e=(t,s)=>{if(!Oc[t])try{const a=s();a&&(Oc[t]=a)}catch(a){console.error(`Failed to init instrument "${t}"`,a)}};e("piano",()=>new Tf({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:n}).toDestination()),e("guitar",()=>new zi(Ea,{oscillator:{type:"triangle"},envelope:{attack:.002,decay:.25,sustain:.3,release:1.2},filter:{type:"lowpass",frequency:2400,rolloff:-12,Q:1.2},filterEnvelope:{attack:.002,decay:.25,sustain:.2,release:.8,baseFrequency:800,octaves:2.5}}).toDestination()),e("organ",()=>new zi(mp,{harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("synth",()=>new zi(Kd,{harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("epiano",()=>new zi(mp,{harmonicity:2,oscillator:{type:"triangle"},envelope:{attack:.01,decay:.2,sustain:.7,release:.8},modulation:{type:"sine"},modulationEnvelope:{attack:.2,decay:.1,sustain:.6,release:.6}}).toDestination()),e("strings",()=>new zi(Ea,{oscillator:{type:"sawtooth"},envelope:{attack:.2,decay:.2,sustain:.8,release:1.2}}).toDestination()),e("pad",()=>new zi(Kd,{harmonicity:1.5,modulationIndex:8,oscillator:{type:"sine"},envelope:{attack:.5,decay:.3,sustain:.9,release:1.5},modulation:{type:"triangle"},modulationEnvelope:{attack:.8,decay:.3,sustain:.8,release:1.2}}).toDestination()),e("brass",()=>new zi(yp,{oscillator:{type:"square"},filter:{Q:2,type:"lowpass",rolloff:-12},envelope:{attack:.02,decay:.25,sustain:.6,release:.7},filterEnvelope:{attack:.01,decay:.2,sustain:.8,release:.4,baseFrequency:200,octaves:2.5}}).toDestination()),e("marimba",()=>new zi(Ea,{oscillator:{type:"triangle"},envelope:{attack:.001,decay:.35,sustain:0,release:.6}}).toDestination()),e("bell",()=>new zi(Kd,{harmonicity:8,modulationIndex:2,oscillator:{type:"sine"},envelope:{attack:.01,decay:1.2,sustain:0,release:1.2},modulation:{type:"square"},modulationEnvelope:{attack:.01,decay:.5,sustain:0,release:1.2}}).toDestination()),e("lead",()=>new zi(Ea,{oscillator:{type:"sawtooth"},envelope:{attack:.005,decay:.15,sustain:.6,release:.35}}).toDestination()),e("bass",()=>new zi(yp,{oscillator:{type:"square"},filter:{type:"lowpass",rolloff:-24,Q:2},envelope:{attack:.01,decay:.2,sustain:.6,release:.4},filterEnvelope:{attack:.001,decay:.15,sustain:.4,release:.2,baseFrequency:80,octaves:3}}).toDestination()),e("choir",()=>new zi(Ea,{oscillator:{type:"sine"},envelope:{attack:.8,decay:.3,sustain:.9,release:1.8}}).toDestination()),await jT()})();try{await Wd}catch(n){Wd=null,console.error("Failed to initialize audio",n)}},ty=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Br=async(n,e="1n",t)=>{if(xs.state!=="running"&&await Tu(),xs.state==="suspended"&&await xs.resume(),await Vl(),!n||n.length===0)return;const s=n[0],a=ty.indexOf(s.replace(/\d/,"")),o=n.map((c,h)=>{if(c.match(/\d/))return c;const f=c,p=ty.indexOf(f);if(h===0)return`${f}3`;let y=3;return(p<a||p-a>6)&&(y=4),h>=4&&(y=4),h>=5&&(y=5),`${f}${y}`});let u=Oc[T2];if(u||(u=Oc.piano),!u){console.error("No instrument available to play!");return}try{u.triggerAttackRelease(o,e,t)}catch(c){console.error("Failed to play chord",c)}},fw=async(n,e=4,t="8n")=>{xs.state!=="running"&&await Tu(),xs.state==="suspended"&&await xs.resume(),await Vl();let s=Oc[T2];if(s||(s=Oc.piano),!s){console.error("No instrument available to play!");return}const a=`${n}${e}`;try{s.triggerAttackRelease(a,t)}catch(o){console.error(`Failed to play note ${a}`,o)}},pw=()=>{Object.values(Oc).forEach(t=>t?.releaseAll()),Hi.stop();const{setPlayingSlot:n,setIsPlaying:e}=ln.getState();n(null,null),e(!1)},uf=n=>{const e=Math.floor(n/4),t=Math.floor(n%4),s=Math.floor(n%1*4);return`${e}:${t}:${s}`},M2=n=>{Hi.cancel(0),Y1=[],Sp={},Hi.timeSignature=4;let e=0;n.sections.forEach(s=>{Sp[s.id]=e,s.measures.forEach(a=>{a.beats.forEach(o=>{const u=uf(e),c=o.duration,h=c*4,f=`${Math.floor(h/16)}:${Math.floor(h%16/4)}:${h%4}`,p=Hi.schedule(y=>{const b=Math.max(0,y-xs.currentTime)*1e3;setTimeout(()=>{ln.getState().setPlayingSlot(s.id,o.id)},b),o.chord&&Br(o.chord.notes,f,y)},u);Y1.push(p),e+=c})})});const t=Hi.schedule(()=>{ln.getState().isLooping||pw()},uf(e));Y1.push(t)},Zk=async()=>{await Vl()},mw=async()=>{await Vl(),xs.state!=="running"&&await xs.resume();const{tempo:n,currentSong:e}=ln.getState();Hi.bpm.value=n,Y1.length===0&&M2(e),Hi.start()},gw=()=>{Hi.pause()},bw=n=>{Hi.bpm.value=n},vw=n=>{const{currentSong:e,playingSectionId:t}=ln.getState(),s=e.sections.map(p=>p.id);let a=t?s.indexOf(t):-1;a===-1&&(a=0);let o=n==="next"?a+1:a-1;o>=s.length&&(o=0),o<0&&(o=0);const u=s[o],c=Sp[u]||0,h=uf(c);Hi.position=h;const f=e.sections[o].measures[0]?.beats[0];f&&ln.getState().setPlayingSlot(u,f.id)},yw=()=>{const{isLooping:n,playingSectionId:e,selectedSectionId:t,currentSong:s}=ln.getState();if(n){const a=e||t,o=s.sections.find(u=>u.id===a);if(o){const u=Sp[o.id]??0;let c=0;o.measures.forEach(f=>f.beats.forEach(p=>c+=p.duration));const h=u+c;Hi.loopStart=uf(u),Hi.loopEnd=uf(h),Hi.loop=!0;return}}Hi.loop=!1},vg=Object.freeze(Object.defineProperty({__proto__:null,initAudio:Vl,pauseSong:gw,playChord:Br,playNote:fw,playSong:mw,preloadAudio:Zk,scheduleSong:M2,setInstrument:E2,setMute:dw,setTempo:bw,setVolume:hw,skipToSection:vw,startSilentAudioForIOS:k2,stopAudio:pw,toggleLoopMode:yw,unlockAudioForIOS:j2},Symbol.toStringTag,{value:"Module"})),Np=768;function L2(){const[n,e]=ee.useState(()=>typeof window<"u"?window.innerWidth<Np:!1);return ee.useEffect(()=>{const t=()=>e(window.innerWidth<Np);return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]),n}function ju(){const[n,e]=ee.useState(()=>typeof window<"u"?window.innerWidth<Np||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[t,s]=ee.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1);return ee.useEffect(()=>{const a=()=>{const o=window.innerWidth,u=window.innerHeight,c=o<Np||u<500&&u<o,h=u<o&&u<500;e(c),s(h)};return window.addEventListener("resize",a),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}},[]),{isMobile:n,isLandscape:t}}var Ho=Px();const Kk=7e3,Qk=({isOpen:n,onClose:e,onSelect:t,onAddToTimeline:s,onOpenDetails:a,chordRoot:o,voicings:u,selectedQuality:c,portraitWithPanel:h=!1})=>{const f=ee.useRef(null),{isMobile:p,isLandscape:y}=ju(),_=p&&y,[b,A]=ee.useState(c),N=ee.useRef(null),k=ee.useRef(null);ee.useEffect(()=>{n&&A(c)},[n,c]);const T=ee.useCallback(()=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{e()},Kk)},[e]);if(ee.useEffect(()=>(n&&T(),()=>{k.current&&clearTimeout(k.current)}),[n,T]),ee.useEffect(()=>{if(!n)return;const D=F=>{f.current&&!f.current.contains(F.target)&&e()},V=setTimeout(()=>{document.addEventListener("mousedown",D),document.addEventListener("touchstart",D)},100);return()=>{clearTimeout(V),document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[n,e]),ee.useEffect(()=>{if(!n)return;const D=V=>{V.key==="Escape"&&e()};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[n,e]),!n)return null;const R=D=>{const V=Date.now();if(T(),N.current&&N.current.quality===D&&V-N.current.time<400){s&&s(D),e(),N.current=null;return}const F=la(o,D);Br(F),A(D),t(D),N.current={quality:D,time:V}};return Ho.createPortal(g.jsxs("div",{ref:f,className:Rt("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row flex-nowrap items-center justify-center","animate-in fade-in zoom-in-95 duration-150",u.length>5||_?"p-1 gap-1":"p-2 gap-2"),style:{bottom:_?"56px":h?"6%":p?"13%":"220px",top:"auto",..._?{left:"24%",transform:"translateX(-50%)",maxWidth:"min(55vw, fit-content)"}:p?{left:"50%",transform:"translateX(-50%)",maxWidth:"calc(100vw - 32px)"}:{right:"340px",left:"auto",transform:"none",maxWidth:"calc(100vw - 400px)"},zIndex:99999},children:[u.map(D=>{const V=D.quality===b,F=u.length>4||_,W=u.length>=6;return g.jsx("button",{onClick:H=>{H.stopPropagation(),R(D.quality)},onTouchEnd:H=>{H.stopPropagation()},className:Rt("flex items-center justify-center rounded-lg transition-all shrink-0",W?"min-w-[32px] h-9 px-0.5":F?"min-w-[40px] h-10 px-1.5":"min-w-[48px] h-12 px-2",V?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`Tap to preview, double-tap to add ${o}${D.label}`,children:g.jsx("span",{className:Rt("font-semibold",W?"text-[10px]":F?"text-xs":V?"text-sm":"text-xs"),children:D.label||"maj"})},D.quality)}),u.length>0&&g.jsx("div",{className:"w-px bg-border-subtle self-stretch my-1 shrink-0"}),a&&g.jsx("button",{onClick:D=>{D.stopPropagation(),a(),e()},onTouchEnd:D=>{D.preventDefault(),D.stopPropagation(),a(),e()},className:Rt("flex items-center justify-center rounded-lg transition-all shrink-0","text-text-tertiary hover:text-text-secondary hover:bg-bg-tertiary",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Open chord details",children:g.jsx(lk,{size:u.length>=6?12:u.length>4||_?14:16})}),s&&g.jsx("button",{onClick:D=>{D.stopPropagation();const V=b||c||u[0]?.quality;V&&(s(V),e())},onTouchEnd:D=>{D.preventDefault(),D.stopPropagation();const V=b||c||u[0]?.quality;V&&(s(V),e())},className:Rt("flex items-center justify-center rounded-lg transition-all shrink-0","text-accent-primary hover:text-white hover:bg-accent-primary/20",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Add to timeline",children:g.jsx(Mc,{size:u.length>=6?14:u.length>4||_?16:18})})]}),document.body)};function Jk(n,e){if(!n)return[];const t=n.split(/,\s*|\s+or\s+/).map(a=>a.trim()).filter(Boolean),s=[];e==="major"?s.push({quality:"major",label:""}):e==="minor"?s.push({quality:"minor",label:"m"}):e==="diminished"&&s.push({quality:"diminished",label:""});for(const a of t){let o=a,u=a;a==="6"?(o="major6",u="6"):a==="m6"?(o="minor6",u="m6"):a==="m75 (7)"?(o="halfDiminished7",u="7"):a==="m7"?(o="minor7",u="m7"):a==="m9"?(o="minor9",u="m9"):a==="m11"?(o="minor11",u="m11"):a==="sus4"?(o="sus4",u="sus4"):a==="7"?(o="dominant7",u="7"):a==="9"?(o="dominant9",u="9"):a==="11"?(o="dominant11",u="11"):a==="13"?(o="dominant13",u="13"):a==="maj7"?(o="major7",u="maj7"):a==="maj9"?(o="major9",u="maj9"):a==="maj13"&&(o="major13",u="maj13"),s.push({quality:o,label:u})}return s}const ej=({zoomScale:n,zoomOriginY:e,onZoomChange:t,panOffset:s,onPanChange:a,rotationOffset:o=0,disableModeToggle:u=!1,footerVisible:c=!0})=>{const{selectedKey:h,setKey:f,wheelRotation:p,wheelMode:y,rotateWheel:_,toggleWheelMode:b,addChordToSlot:A,selectedSectionId:N,selectedSlotId:k,setSelectedChord:T,selectedChord:R,selectNextSlotAfter:D,setSelectedSlot:V,timelineVisible:F,openTimeline:W,chordPanelVisible:H,toggleChordPanel:L,pulseChordPanel:B,chordPanelGuitarExpanded:te,chordPanelVoicingsExpanded:j}=ln(),I=gu.indexOf(h),K=-(I*30);let P;o!==0?P=K+o:y==="rotating"?P=p:P=0;const ie=ee.useRef(null),X=ee.useRef(null),[re,le]=ee.useState(null),[fe,Se]=ee.useState({x:0,y:0}),[z,M]=ee.useState({isOpen:!1,chord:null,voicingSuggestion:"",baseQuality:""}),$=s??fe,G=ee.useCallback(je=>{a?a(je):Se(je)},[a]),J=L2(),{isLandscape:ae}=ju();ee.useEffect(()=>{const je=R?.segmentId??null;le(je)},[R]);const pe=ee.useRef(null),de=ee.useRef(null),[xe,Ne]=ee.useState(!1),Be=ee.useRef(0),Qe=ee.useRef(0),[Xe,st]=ee.useState(!1),Y=ee.useRef(null),Ie=ee.useCallback((je,Pe)=>{if(!de.current)return 0;const Ze=de.current.getBoundingClientRect(),_t=Ze.left+Ze.width/2,gt=Ze.top+Ze.height/2,kt=je-_t,pn=Pe-gt;return Math.atan2(pn,kt)*(180/Math.PI)},[]),dt=ee.useCallback(je=>{for(;je>180;)je-=360;for(;je<-180;)je+=360;return je},[]),et=ee.useCallback(je=>{const Pe=gu.indexOf(h),Ze=je==="cw"?(Pe+1)%12:(Pe-1+12)%12;f(gu[Ze],{skipRotation:!0}),_(je)},[h,f,_]),ge=ee.useRef(null),qe=ee.useRef(!1),Re=ee.useCallback(je=>{if(J||!de.current||!pe.current)return;const Pe=de.current.getBoundingClientRect(),Ze=Pe.width/2,_t=Pe.height/2,gt=je.clientX-Pe.left-Ze,kt=je.clientY-Pe.top-_t,pn=Math.sqrt(gt*gt+kt*kt),un=Pe.width/600*70,sn=Pe.width/600*250;pn>un&&pn<=sn?(Ne(!0),Be.current=Ie(je.clientX,je.clientY),Qe.current=p,je.preventDefault()):pn>sn&&n>1&&(st(!0),Y.current={x:je.clientX,y:je.clientY},je.preventDefault())},[Ie,p,J,n]),nt=ee.useCallback(je=>{if(je.touches.length!==1)return;const Pe=je.touches[0];if(ge.current={x:Pe.clientX,y:Pe.clientY},qe.current=!1,!de.current)return;const Ze=de.current.getBoundingClientRect(),_t=Ze.width/2,gt=Ze.height/2,kt=Pe.clientX-Ze.left-_t,pn=Pe.clientY-Ze.top-gt,un=Math.sqrt(kt*kt+pn*pn),sn=Ze.width/600*70;un>sn&&(Be.current=Ie(Pe.clientX,Pe.clientY),Qe.current=p)},[Ie,p]),ct=ee.useCallback(je=>{if(je.touches.length!==1||!ge.current)return;const Pe=je.touches[0],Ze=Pe.clientX-ge.current.x,_t=Pe.clientY-ge.current.y;if(Math.sqrt(Ze*Ze+_t*_t)>10){if(qe.current=!0,je.preventDefault(),!de.current)return;const kt=de.current.getBoundingClientRect(),pn=kt.width/2,un=kt.height/2,sn=Pe.clientX-kt.left,xn=Pe.clientY-kt.top,Pn=Math.sqrt(Math.pow(sn-pn,2)+Math.pow(xn-un,2)),Tn=kt.width/600*70;if(Pn>Tn&&Be.current!==0){const sr=Ie(Pe.clientX,Pe.clientY),$r=dt(sr-Be.current);if(Math.abs($r)>=15){const Mr=Math.round($r/30);if(Mr!==0){const _s=y==="fixed"?Mr>0?"cw":"ccw":Mr>0?"ccw":"cw",Yi=Math.abs(Mr);for(let Pr=0;Pr<Yi;Pr++)et(_s);Be.current=sr}}}}},[Ie,et,y,dt]),vt=ee.useCallback(je=>{if(!xe)return;const Pe=Ie(je.clientX,je.clientY),Ze=dt(Pe-Be.current);if(Math.abs(Ze)>=15){const _t=Math.round(Ze/30);if(_t!==0){let gt;y==="fixed"?gt=_t>0?"cw":"ccw":gt=_t>0?"ccw":"cw";const kt=Math.abs(_t);for(let pn=0;pn<kt;pn++)et(gt);Be.current=Pe}}},[xe,Ie,et,y,dt]),It=ee.useCallback(()=>{Ne(!1)},[]);ee.useEffect(()=>{if(xe)return document.addEventListener("mousemove",vt),document.addEventListener("mouseup",It),()=>{document.removeEventListener("mousemove",vt),document.removeEventListener("mouseup",It)}},[xe,vt,It]);const St=ee.useCallback((je,Pe,Ze)=>{if(!pe.current||Ze<=1)return{x:0,y:0};const{clientWidth:_t,clientHeight:gt}=pe.current,kt=12,pn=_t*(Ze-1)/2+kt,un=gt*(Ze-1)/2+kt;return{x:Math.max(-pn,Math.min(pn,je)),y:Math.max(-un,Math.min(un,Pe))}},[]);ee.useEffect(()=>{G(St($.x,$.y,n))},[n,St,$.x,$.y,G]);const Ft=ee.useCallback(je=>{if(!Xe||!Y.current)return;const Pe=je.clientX-Y.current.x,Ze=je.clientY-Y.current.y;G(St($.x+Pe,$.y+Ze,n)),Y.current={x:je.clientX,y:je.clientY}},[Xe,n,St,$,G]),jt=ee.useCallback(()=>{st(!1),Y.current=null},[]);ee.useEffect(()=>{if(Xe)return document.addEventListener("mousemove",Ft),document.addEventListener("mouseup",jt),()=>{document.removeEventListener("mousemove",Ft),document.removeEventListener("mouseup",jt)}},[Xe,Ft,jt]);const yt=je=>({x:(je[0].clientX+je[1].clientX)/2,y:(je[0].clientY+je[1].clientY)/2}),xt=ee.useCallback(je=>{if(je.touches.length===2){je.preventDefault();const Pe=je.touches[0].clientX-je.touches[1].clientX,Ze=je.touches[0].clientY-je.touches[1].clientY;ie.current=Math.sqrt(Pe*Pe+Ze*Ze),X.current=yt(je.touches)}},[]),Me=ee.useCallback(je=>{if(je.touches.length===2&&ie.current!==null){je.preventDefault(),je.stopPropagation();const Pe=je.touches[0].clientX-je.touches[1].clientX,Ze=je.touches[0].clientY-je.touches[1].clientY,_t=Math.sqrt(Pe*Pe+Ze*Ze),gt=_t/ie.current,kt=Math.max(1,Math.min(2.5,n*gt)),pn=kt>1.3?38:50,un=yt(je.touches);if(X.current){const sn=un.x-X.current.x,xn=un.y-X.current.y;G(St($.x+sn,$.y+xn,kt))}ie.current=_t,X.current=un,t(kt,pn)}},[n,t,St,$,G]),ut=ee.useCallback(je=>{ie.current=null,X.current=null,je.touches.length===0&&je.preventDefault()},[]),ot=ee.useCallback(je=>{if(je.ctrlKey||je.metaKey){je.preventDefault();const Pe=je.deltaY>0?.9:1.1,Ze=Math.max(1,Math.min(2.5,n*Pe)),_t=Ze>1.3?38:50;t(Ze,_t)}},[n,t]),We=Yh(),at=600,bt=at/2,lt=at/2,tn=60,Ct=tn+8,Vt=145,Jt=Vt,wt=210,pt=wt,qt=250,wn=ee.useMemo(()=>qx(h),[h]),Ee=ee.useMemo(()=>wn.sharps>0?`${wn.sharps}`:wn.flats>0?`${wn.flats}`:"",[wn]),ft=ee.useRef(0),_e=je=>{const Pe=je,Ze=Date.now();if(Ze-ft.current<300)return;ft.current=Ze,Br(je.notes),le(Pe.segmentId??null),T(je);let _t="";Pe.positionIndex!==void 0&&Pe.ringType&&(_t=dn(Pe.positionIndex,Pe.ringType==="major"?"major":Pe.ringType==="minor"?Pe.numeral==="ii"||Pe.numeral==="vi"?"ii":"iii":"dim")),(!(J&&!ae)||!H||!te&&!j)&&M({isOpen:!0,chord:Pe,voicingSuggestion:_t,baseQuality:Pe.quality})},Fe=je=>{const Pe=je;let Ze=N,_t=k;if(!Ze||!_t){W();const kt=ln.getState();if(Ze=kt.selectedSectionId,_t=kt.selectedSlotId,!Ze||!_t)return}A(je,Ze,_t),D(Ze,_t)||(V(Ze,_t),le(Pe.segmentId??null),T(je)),F||W()},ht=je=>(je-I+12)%12,Tt=(je,Pe)=>{const Ze=ht(je);return Pe==="major"?Ze===0||Ze===1||Ze===11:Pe==="ii"||Pe==="iii"||Pe==="dim"?Ze===0:!1},Bt=je=>ht(je)===1,nn=je=>{const Pe=ht(je);return Pe===2||Pe===4},$t=(je,Pe)=>{const Ze=ht(je);if(Pe==="major"){if(Ze===0)return"I";if(Ze===1)return"V";if(Ze===11)return"IV";if(Ze===2)return"II";if(Ze===4)return"III"}if(Pe==="ii"){if(Ze===0)return"ii";if(Ze===1)return"vi"}return Pe==="iii"&&Ze===0?"iii":Pe==="dim"&&Ze===0?"vii":""},dn=(je,Pe)=>{const Ze=ht(je);if(Pe==="major"){if(Ze===0)return"maj7, maj9, maj13 or 6";if(Ze===1)return"7, 9, 11, sus4, 13";if(Ze===11)return"maj7, maj9, maj13 or 6";if(Ze===2||Ze===4)return"7, sus4"}if(Pe==="ii"){if(Ze===0)return"m7, m9, m11, m6";if(Ze===1)return"m7, m9, m11"}return Pe==="iii"&&Ze===0?"m7":Pe==="dim"&&Ze===0?"m75 (7)":""},fn=je=>{if(re)return re===je.segmentId;const Pe=R?.segmentId;return Pe?Pe===je.segmentId:R&&!Pe?R.root===je.root&&R.quality===je.quality:!1},Jn=ee.useCallback(je=>{je.touches.length===2?xt(je):je.touches.length===1&&nt(je)},[xt,nt]),Gn=ee.useCallback(je=>{je.touches.length===2?Me(je):je.touches.length===1&&ct(je)},[Me,ct]),Sn=ee.useCallback(je=>{ge.current=null,qe.current=!1,ut(je)},[ut]),[rn,$n]=ee.useState(null),Er=ee.useCallback((je,Pe,Ze)=>{$n(je?{text:je,x:Pe,y:Ze}:null)},[]),us=rn?{position:"fixed",left:rn.x,top:rn.y,transform:"translate(-50%, -100%) translateY(-12px)",backgroundColor:"rgba(0, 0, 0, 0.9)",color:"white",padding:"8px 12px",borderRadius:"6px",fontSize:"11px",pointerEvents:"none",zIndex:9999,whiteSpace:"normal",textAlign:"center",maxWidth:"220px",lineHeight:"1.4",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}:{};return g.jsxs("div",{ref:pe,"data-chord-wheel":!0,className:`relative flex flex-col items-center justify-center w-full h-full p-1 sm:p-2 select-none ${Xe?"cursor-grabbing":n>1&&!J?"cursor-grab":""}`,onTouchStart:Jn,onTouchMove:Gn,onTouchEnd:Sn,onWheel:ot,onMouseDown:Re,style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",touchAction:"none"},children:[rn&&g.jsx("div",{style:us,children:rn.text}),g.jsx("div",{className:"w-full h-full transition-transform duration-150 ease-out overflow-hidden",style:{transform:`translate(${$.x}px, ${$.y}px) scale(${n})`,transformOrigin:`center ${e}%`},children:g.jsxs("svg",{ref:de,width:"100%",height:"100%",viewBox:`0 0 ${at} ${at}`,className:`w-full h-full select-none ${xe?"cursor-grabbing":"cursor-grab"}`,onMouseDown:Re,style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:[g.jsxs("defs",{children:[g.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[g.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),g.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]}),g.jsx("filter",{id:"segment-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:g.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"4",floodColor:"#ffffff",floodOpacity:"0.9"})})]}),g.jsx("g",{style:{transform:`rotate(${P}deg)`,transformOrigin:`${bt}px ${lt}px`,transition:"transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:NS.map((je,Pe)=>{const _t=Pe*30-15,gt=_t+30,kt=We[je.major]||We.C,pn=je.ii.replace("m",""),un=je.iii.replace("m",""),sn=je.diminished.replace("",""),xn=Tt(Pe,"major"),Pn=nn(Pe),Tn=Tt(Pe,"ii")||Bt(Pe),sr=Tt(Pe,"iii"),$r=Tt(Pe,"dim"),Mr={root:je.major,quality:"major",numeral:$t(Pe,"major"),notes:la(je.major,"major"),symbol:je.major,segmentId:`major-${Pe}`,ringType:"major",positionIndex:Pe},_s={root:pn,quality:"minor",numeral:$t(Pe,"ii"),notes:la(pn,"minor"),symbol:je.ii,segmentId:`ii-${Pe}`,ringType:"minor",positionIndex:Pe},Yi={root:un,quality:"minor",numeral:$t(Pe,"iii"),notes:la(un,"minor"),symbol:je.iii,segmentId:`iii-${Pe}`,ringType:"minor",positionIndex:Pe},Pr={root:sn,quality:"diminished",numeral:$t(Pe,"dim"),notes:la(sn,"diminished"),symbol:je.diminished,segmentId:`dim-${Pe}`,ringType:"diminished",positionIndex:Pe},ni=15,Nn=_t+-7.5,Xi=Nn+ni,Ds=Xi,Si=Ds+ni,_o=15,hs=_t+(30-_o)/2,zr=hs+_o,Lr=je.major,So=je.ii,Bl=je.iii,Qo=je.diminished;return g.jsxs("g",{children:[g.jsx(O1,{cx:bt,cy:lt,innerRadius:Ct,outerRadius:Vt,startAngle:_t,endAngle:gt,color:kt,label:Lr,chord:Mr,isSelected:fn(Mr),isDiatonic:xn,isSecondary:Pn,onClick:_e,onDoubleClick:Fe,ringType:"major",wheelRotation:P,romanNumeral:xn||Pn?$t(Pe,"major"):void 0,voicingSuggestion:xn||Pn?dn(Pe,"major"):void 0,segmentId:`major-${Pe}`,onHover:Er}),g.jsx(O1,{cx:bt,cy:lt,innerRadius:Jt,outerRadius:wt,startAngle:Nn,endAngle:Xi,color:kt,label:So,chord:_s,isSelected:fn(_s),isDiatonic:Tn,onClick:_e,onDoubleClick:Fe,ringType:"minor",wheelRotation:P,romanNumeral:Tn?$t(Pe,"ii"):void 0,voicingSuggestion:Tn?dn(Pe,"ii"):void 0,segmentId:`ii-${Pe}`,onHover:Er}),g.jsx(O1,{cx:bt,cy:lt,innerRadius:Jt,outerRadius:wt,startAngle:Ds,endAngle:Si,color:kt,label:Bl,chord:Yi,isSelected:fn(Yi),isDiatonic:sr,onClick:_e,onDoubleClick:Fe,ringType:"minor",wheelRotation:P,romanNumeral:sr?$t(Pe,"iii"):void 0,voicingSuggestion:sr?dn(Pe,"iii"):void 0,segmentId:`iii-${Pe}`,onHover:Er}),g.jsx(O1,{cx:bt,cy:lt,innerRadius:pt,outerRadius:qt,startAngle:hs,endAngle:zr,color:kt,label:Qo,chord:Pr,isSelected:fn(Pr),isDiatonic:$r,onClick:_e,onDoubleClick:Fe,ringType:"diminished",wheelRotation:P,romanNumeral:$r?$t(Pe,"dim"):void 0,voicingSuggestion:$r?dn(Pe,"dim"):void 0,segmentId:`dim-${Pe}`,onHover:Er})]},je.major)})}),g.jsx("circle",{cx:bt,cy:lt,r:tn,fill:"#1a1a24",stroke:"#3a3a4a",strokeWidth:"2",style:{pointerEvents:"none"}}),g.jsx("text",{x:bt,y:lt-25,textAnchor:"middle",fill:"#6366f1",fontSize:"9",fontWeight:"bold",letterSpacing:"2",children:"KEY"}),g.jsx("text",{x:bt,y:lt+3,textAnchor:"middle",fill:"white",fontSize:"26",fontWeight:"bold",children:Ln(h)}),g.jsx("text",{x:bt,y:lt+21,textAnchor:"middle",fill:"#9898a6",fontSize:"11",children:Ee||"No /"}),g.jsxs("g",{transform:`translate(${bt-22}, ${lt+40})`,onClick:()=>et("ccw"),onTouchEnd:je=>{je.preventDefault(),je.stopPropagation(),et("ccw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[g.jsx("circle",{r:J?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),g.jsx("g",{transform:J?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:g.jsx(_p,{size:J?12:9,color:"#9898a6"})})]}),g.jsxs("g",{transform:`translate(${bt+22}, ${lt+40})`,onClick:()=>et("cw"),onTouchEnd:je=>{je.preventDefault(),je.stopPropagation(),et("cw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[g.jsx("circle",{r:J?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),g.jsx("g",{transform:J?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:g.jsx($h,{size:J?12:9,color:"#9898a6"})})]}),g.jsxs("g",{transform:`translate(${bt}, ${lt+40})`,onClick:u?void 0:b,onTouchEnd:u?void 0:je=>{je.preventDefault(),je.stopPropagation(),b()},className:u?"":"cursor-pointer",style:{pointerEvents:u?"none":"all",cursor:u?"default":"pointer",opacity:u?.5:1},children:[g.jsx("circle",{r:J?16:11,fill:u||y==="rotating"?"#252535":"#3f2e2e",className:"transition-colors",style:{pointerEvents:u?"none":"all",transition:"fill 0.3s ease"},children:g.jsx("title",{children:u?"Mode locked in this view":y==="rotating"?"Lock wheel (C at top)":"Pin current key to top"})}),g.jsxs("g",{style:{pointerEvents:"none",transition:"transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",transform:o!==0?`rotate(${o}deg)`:y==="rotating"?"rotate(0deg)":`rotate(${I*30}deg)`,transformOrigin:"0px 0px"},children:[g.jsx("polygon",{points:J?"0,-10 4,0 0,1.5 -4,0":"0,-7 2.5,0 0,1 -2.5,0",fill:"#ef4444",stroke:"#b91c1c",strokeWidth:"0.5"}),g.jsx("polygon",{points:J?"0,10 4,0 0,-1.5 -4,0":"0,7 2.5,0 0,-1 -2.5,0",fill:"#f1f5f9",stroke:"#94a3b8",strokeWidth:"0.5"}),g.jsx("circle",{cx:0,cy:0,r:J?2:1.5,fill:y==="rotating"?"#fef2f2":"#6b7280"})]})]})]})}),g.jsx(Qk,{isOpen:z.isOpen,onClose:()=>M({...z,isOpen:!1}),onSelect:je=>{if(z.chord){const Pe=la(z.chord.root,je),Ze={...z.chord,quality:je,notes:Pe,symbol:`${z.chord.root}${Mh(je)}`};T(Ze)}},onAddToTimeline:je=>{if(z.chord){const Pe=la(z.chord.root,je),Ze={...z.chord,quality:je,notes:Pe,symbol:`${z.chord.root}${Mh(je)}`};let _t=N,gt=k;if(!_t||!gt){W();const kt=ln.getState();if(_t=kt.selectedSectionId,gt=kt.selectedSlotId,!_t||!gt)return}A(Ze,_t,gt),V(_t,gt),T(Ze),F||W()}},onOpenDetails:()=>{H?B():L()},chordRoot:z.chord?.root||"C",voicings:Jk(z.voicingSuggestion,z.baseQuality),selectedQuality:z.chord?.quality,portraitWithPanel:J&&!ae&&H&&!te&&!j}),J&&!ae&&!H&&R&&(()=>{const je=We[R.root]||"#6366f1",Pe=R.quality;let Ze;return Pe==="major"||Pe==="maj"?Ze=Ln(R.root):Pe==="minor"||Pe==="m"?Ze=Ln(`${R.root}m`):Pe==="diminished"||Pe==="dim"?Ze=Ln(`${R.root}`):Ze=Ln(`${R.root}${Mh(Pe)}`),g.jsxs("div",{className:"fixed flex items-center gap-1 z-10 cursor-pointer touch-feedback active:scale-95",style:{bottom:F?c?"260px":"204px":c?"175px":"119px",right:"12px",backgroundColor:"transparent",color:je,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${je}`,backdropFilter:"blur(8px)",background:"rgba(0, 0, 0, 0.4)",transition:"bottom 0.25s ease-out"},onClick:_t=>{_t.stopPropagation(),_t.preventDefault(),Br(R.notes)},onTouchStart:_t=>{_t.stopPropagation()},onTouchEnd:_t=>{_t.stopPropagation(),_t.preventDefault(),Br(R.notes)},children:[g.jsx("span",{className:"text-sm font-bold leading-none",children:Ze}),R.numeral&&g.jsx("span",{className:"text-xs font-serif italic opacity-70",children:Ln(R.numeral)})]})})()]})},yg=({type:n,size:e=20,className:t})=>{const s=e>16?1.5:1;switch(n){case"whole":return g.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:g.jsx("ellipse",{cx:"12",cy:"12",rx:"6",ry:"4",fill:"none",stroke:"currentColor",strokeWidth:s*1.5})});case"half":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 10, 16)"}),g.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-half":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 8, 16)"}),g.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),g.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"quarter":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"currentColor",transform:"rotate(-20, 10, 16)"}),g.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-quarter":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 8, 16)"}),g.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),g.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"eighth":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),g.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"4",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),g.jsx("path",{d:"M13 4 Q18 6 16 11",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"sixteenth":return g.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[g.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),g.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),g.jsx("path",{d:"M13 3 Q18 5 16 9",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),g.jsx("path",{d:"M13 7 Q18 9 16 13",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]})}};function xg(n,e){const[t]=e;if(t%3===0&&t>3){if(n===1)return"dotted-half";if(n===2)return"dotted-quarter";if(n===3)return"quarter";if(n===6)return"eighth";if(n===12)return"sixteenth"}if(t===3){if(n===1)return"dotted-half";if(n===3)return"quarter";if(n===6)return"eighth";if(n===12)return"sixteenth"}return n===1?"whole":n===2?"half":n===4?"quarter":n===8?"eighth":n===16?"sixteenth":n<=1?"whole":n<=2?"half":n<=4?"quarter":n<=8?"eighth":"sixteenth"}function xw(n){const[e]=n;return e%3===0?[1,3,6].filter(t=>t<=8):[1,2,4,8]}const tj=({value:n,onChange:e,timeSignature:t,isCompact:s=!1})=>{const[a,o]=ee.useState(!1),u=ee.useRef(null),c=ee.useRef(null),h=xw(t);ee.useEffect(()=>{const y=_=>{u.current&&!u.current.contains(_.target)&&c.current&&!c.current.contains(_.target)&&o(!1)};if(a)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[a]),ee.useEffect(()=>{if(a){const y=()=>o(!1);return window.addEventListener("scroll",y,!0),()=>window.removeEventListener("scroll",y,!0)}},[a]);const f=xg(n,t),p=s?12:16;return g.jsxs("div",{className:"relative",children:[g.jsx("button",{ref:u,onClick:()=>o(!a),className:Rt("flex items-center justify-center rounded transition-all","hover:bg-accent-primary/20 active:scale-95","text-text-muted hover:text-accent-primary",s?"w-4 h-5":"w-5 h-6",a&&"bg-accent-primary/20 text-accent-primary"),title:`${n} step${n>1?"s":""} per measure`,children:g.jsx(yg,{type:f,size:p})}),a&&Ho.createPortal(g.jsx("div",{ref:c,className:Rt("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row gap-2 p-2","animate-in fade-in zoom-in-95 duration-150"),style:{top:"60%",left:"50%",transform:"translate(-50%, -50%)",zIndex:99999},children:h.map(y=>{const _=xg(y,t),b=y===n;return g.jsx("button",{onClick:()=>{e(y),o(!1)},className:Rt("flex items-center justify-center rounded-lg transition-all","w-12 h-12",b?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`${y} step${y>1?"s":""}`,children:g.jsx(yg,{type:_,size:26})},y)})}),document.body)]})},ny={intro:{bg:"bg-purple-500/15",border:"border-purple-500/40",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/15",border:"border-blue-500/40",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/15",border:"border-cyan-500/40",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/15",border:"border-amber-500/40",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/15",border:"border-emerald-500/40",accent:"bg-emerald-500"},outro:{bg:"bg-rose-500/15",border:"border-rose-500/40",accent:"bg-rose-500"},custom:{bg:"bg-slate-500/15",border:"border-slate-500/40",accent:"bg-slate-500"}},nj=({section:n,songTimeSignature:e,className:t,onSlotClick:s})=>{const{tempo:a}=ln(),o=Yh(),u=ny[n.type]||ny.custom,c=n.timeSignature||e,h=c[0],f=n.measures.length,[p,y]=ee.useState(!1),[_,b]=ee.useState(null),A=ee.useRef([]),N=252,k=15,T=52,R=Math.floor(N/f),D=Math.max(k,Math.min(T,R)),V=f>8,F=f>12,W=()=>{A.current.forEach(L=>clearTimeout(L)),A.current=[],y(!1),b(null)};ee.useEffect(()=>(W(),()=>{A.current.forEach(L=>clearTimeout(L)),A.current=[]}),[n.id]);const H=async()=>{if(p){W();return}xs.state!=="running"&&await Tu(),xs.state==="suspended"&&await xs.resume(),await Vl(),y(!0);const L=60/a*1e3,B=n.measures[0]?.beats.length||h,te=h/B,j=te*L;let I=0;n.measures.forEach(ie=>{ie.beats.forEach(X=>{const re=I*j,le=window.setTimeout(()=>{b(X.id)},re);if(A.current.push(le),X.chord&&X.chord.notes&&X.chord.notes.length>0){const fe=window.setTimeout(()=>{const M=`${4/Math.min(te,h)}n`;Br(X.chord.notes,M)},re);A.current.push(fe)}I++})});const K=n.measures.reduce((ie,X)=>ie+X.beats.length,0),P=window.setTimeout(()=>{y(!1),b(null),A.current=[]},K*j);A.current.push(P)};return g.jsx("div",{className:Rt("w-full",t),children:g.jsxs("div",{className:Rt("rounded-lg border overflow-hidden transition-all",u.bg,u.border),children:[g.jsx("div",{className:Rt("h-1 w-full",u.accent)}),g.jsx("div",{className:"pl-2 pr-3 py-2 overflow-hidden",style:{maxHeight:F?"80px":V?"100px":"120px"},children:g.jsx("div",{className:"flex gap-0.5",style:{minWidth:"min-content",width:"100%"},children:n.measures.map((L,B)=>{const te=L.beats.length;return g.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",style:{minWidth:`${D}px`,maxWidth:`${D}px`},children:[!F&&g.jsxs("div",{className:"h-3 flex items-center justify-between px-0.5",children:[g.jsx("span",{className:Rt("font-mono text-white/30",V?"text-[6px]":"text-[8px]"),children:B+1}),!V&&g.jsx("div",{className:"flex gap-px",children:Array.from({length:Math.min(te,h)}).map((j,I)=>g.jsx("div",{className:"w-0.5 h-1 bg-white/15 rounded-full"},I))})]}),g.jsx("div",{className:"flex-1 rounded overflow-hidden flex gap-px",style:{minHeight:F?"28px":V?"36px":"48px"},children:L.beats.map(j=>{const I=j.chord&&j.chord.notes&&j.chord.notes.length>0,K=j.chord,P=I&&o[K.root]||"#666",ie=_===j.id,X=L.beats.length;let re="9px";return F?re=X>2?"5px":"6px":V?re=X>2?"6px":"7px":re=X>2?"7px":X>1?"8px":"9px",I?g.jsx("div",{onClick:()=>s?.(j.id),className:Rt("flex-1 min-w-0 rounded-sm flex items-center justify-center font-bold truncate transition-all duration-150",ie&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:brightness-110 active:scale-95"),style:{backgroundColor:ie?P:"rgba(0, 0, 0, 0.35)",border:`1.5px solid ${P}`,color:ie?"#fff":P,fontSize:re,padding:"0 2px",textShadow:ie?"0 1px 3px rgba(0,0,0,0.7)":"0 1px 2px rgba(0,0,0,0.5)",boxShadow:ie?`0 0 12px ${P}, 0 0 4px ${P}`:"none"},title:K.symbol,children:Ln(K.symbol)},j.id):g.jsx("div",{onClick:()=>s?.(j.id),className:Rt("flex-1 min-w-0 rounded-sm flex items-center justify-center transition-all duration-150",ie&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:bg-white/10 active:scale-95"),style:{backgroundColor:ie?"rgba(99, 102, 241, 0.5)":"rgba(255, 255, 255, 0.03)",border:ie?"1.5px solid rgba(99, 102, 241, 0.8)":"1px dashed rgba(255, 255, 255, 0.1)",boxShadow:ie?"0 0 8px rgba(99, 102, 241, 0.5)":"none"},children:g.jsx("span",{className:Rt("transition-colors duration-150",ie?"text-white/60":"text-white/10",V?"text-[6px]":"text-[8px]"),children:""})},j.id)})})]},L.id)})})}),g.jsxs("div",{className:"px-2 py-1.5 bg-black/20 border-t border-white/5 flex items-center gap-2",children:[g.jsx("button",{onClick:H,className:Rt("w-5 h-5 rounded-full flex items-center justify-center transition-all","hover:scale-110 active:scale-95",p?"bg-red-500/80 text-white":"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30"),title:p?"Stop":"Play section once",children:p?g.jsx(uw,{size:8}):g.jsx(nd,{size:10,className:"ml-0.5"})}),g.jsxs("div",{className:"flex-1 flex items-center justify-center gap-3",children:[g.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[c[0],"/",c[1]]}),g.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-white/20"}),g.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[f," bar",f!==1?"s":""]})]})]})]})})};function rj(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return ee.useMemo(()=>s=>{e.forEach(a=>a(s))},e)}const r0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rd(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function O2(n){return"nodeType"in n}function _i(n){var e,t;return n?rd(n)?n:O2(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function D2(n){const{Document:e}=_i(n);return n instanceof e}function kf(n){return rd(n)?!1:n instanceof _i(n).HTMLElement}function ww(n){return n instanceof _i(n).SVGElement}function sd(n){return n?rd(n)?n.document:O2(n)?D2(n)?n:kf(n)||ww(n)?n.ownerDocument:document:document:document}const po=r0?ee.useLayoutEffect:ee.useEffect;function s0(n){const e=ee.useRef(n);return po(()=>{e.current=n}),ee.useCallback(function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e.current==null?void 0:e.current(...s)},[])}function sj(){const n=ee.useRef(null),e=ee.useCallback((s,a)=>{n.current=setInterval(s,a)},[]),t=ee.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function hf(n,e){e===void 0&&(e=[n]);const t=ee.useRef(n);return po(()=>{t.current!==n&&(t.current=n)},e),t}function jf(n,e){const t=ee.useRef();return ee.useMemo(()=>{const s=n(t.current);return t.current=s,s},[...e])}function Ap(n){const e=s0(n),t=ee.useRef(null),s=ee.useCallback(a=>{a!==t.current&&e?.(a,t.current),t.current=a},[]);return[t,s]}function Cp(n){const e=ee.useRef();return ee.useEffect(()=>{e.current=n},[n]),e.current}let Lm={};function Ef(n,e){return ee.useMemo(()=>{if(e)return e;const t=Lm[n]==null?0:Lm[n]+1;return Lm[n]=t,n+"-"+t},[n,e])}function _w(n){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return s.reduce((o,u)=>{const c=Object.entries(u);for(const[h,f]of c){const p=o[h];p!=null&&(o[h]=p+n*f)}return o},{...e})}}const Dh=_w(1),df=_w(-1);function ij(n){return"clientX"in n&&"clientY"in n}function i0(n){if(!n)return!1;const{KeyboardEvent:e}=_i(n.target);return e&&n instanceof e}function aj(n){if(!n)return!1;const{TouchEvent:e}=_i(n.target);return e&&n instanceof e}function Tp(n){if(aj(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return ij(n)?{x:n.clientX,y:n.clientY}:null}const $o=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[$o.Translate.toString(n),$o.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:s}=n;return e+" "+t+"ms "+s}}}),ry="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function oj(n){return n.matches(ry)?n:n.querySelector(ry)}const lj={display:"none"};function cj(n){let{id:e,value:t}=n;return Cn.createElement("div",{id:e,style:lj},t)}function uj(n){let{id:e,announcement:t,ariaLiveType:s="assertive"}=n;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Cn.createElement("div",{id:e,style:a,role:"status","aria-live":s,"aria-atomic":!0},t)}function hj(){const[n,e]=ee.useState("");return{announce:ee.useCallback(s=>{s!=null&&e(s)},[]),announcement:n}}const Sw=ee.createContext(null);function dj(n){const e=ee.useContext(Sw);ee.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function fj(){const[n]=ee.useState(()=>new Set),e=ee.useCallback(s=>(n.add(s),()=>n.delete(s)),[n]);return[ee.useCallback(s=>{let{type:a,event:o}=s;n.forEach(u=>{var c;return(c=u[a])==null?void 0:c.call(u,o)})},[n]),e]}const pj={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},mj={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function gj(n){let{announcements:e=mj,container:t,hiddenTextDescribedById:s,screenReaderInstructions:a=pj}=n;const{announce:o,announcement:u}=hj(),c=Ef("DndLiveRegion"),[h,f]=ee.useState(!1);if(ee.useEffect(()=>{f(!0)},[]),dj(ee.useMemo(()=>({onDragStart(y){let{active:_}=y;o(e.onDragStart({active:_}))},onDragMove(y){let{active:_,over:b}=y;e.onDragMove&&o(e.onDragMove({active:_,over:b}))},onDragOver(y){let{active:_,over:b}=y;o(e.onDragOver({active:_,over:b}))},onDragEnd(y){let{active:_,over:b}=y;o(e.onDragEnd({active:_,over:b}))},onDragCancel(y){let{active:_,over:b}=y;o(e.onDragCancel({active:_,over:b}))}}),[o,e])),!h)return null;const p=Cn.createElement(Cn.Fragment,null,Cn.createElement(cj,{id:s,value:a.draggable}),Cn.createElement(uj,{id:c,announcement:u}));return t?Ho.createPortal(p,t):p}var Ls;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Ls||(Ls={}));function kp(){}function El(n,e){return ee.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function R2(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return ee.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const mo=Object.freeze({x:0,y:0});function Nw(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function bj(n,e){const t=Tp(n);if(!t)return"0 0";const s={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function Aw(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return t-s}function vj(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return s-t}function sy(n){let{left:e,top:t,height:s,width:a}=n;return[{x:e,y:t},{x:e+a,y:t},{x:e,y:t+s},{x:e+a,y:t+s}]}function Cw(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function iy(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const I2=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=iy(e,e.left,e.top),o=[];for(const u of s){const{id:c}=u,h=t.get(c);if(h){const f=Nw(iy(h),a);o.push({id:c,data:{droppableContainer:u,value:f}})}}return o.sort(Aw)},yj=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=sy(e),o=[];for(const u of s){const{id:c}=u,h=t.get(c);if(h){const f=sy(h),p=a.reduce((_,b,A)=>_+Nw(f[A],b),0),y=Number((p/4).toFixed(4));o.push({id:c,data:{droppableContainer:u,value:y}})}}return o.sort(Aw)};function xj(n,e){const t=Math.max(e.top,n.top),s=Math.max(e.left,n.left),a=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),u=a-s,c=o-t;if(s<a&&t<o){const h=e.width*e.height,f=n.width*n.height,p=u*c,y=p/(h+f-p);return Number(y.toFixed(4))}return 0}const wj=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=[];for(const o of s){const{id:u}=o,c=t.get(u);if(c){const h=xj(c,e);h>0&&a.push({id:u,data:{droppableContainer:o,value:h}})}}return a.sort(vj)};function _j(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Tw(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:mo}function Sj(n){return function(t){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((u,c)=>({...u,top:u.top+n*c.y,bottom:u.bottom+n*c.y,left:u.left+n*c.x,right:u.right+n*c.x}),{...t})}}const Nj=Sj(1);function kw(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Aj(n,e,t){const s=kw(e);if(!s)return n;const{scaleX:a,scaleY:o,x:u,y:c}=s,h=n.left-u-(1-a)*parseFloat(t),f=n.top-c-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),p=a?n.width/a:n.width,y=o?n.height/o:n.height;return{width:p,height:y,top:f,right:h+p,bottom:f+y,left:h}}const Cj={ignoreTransform:!1};function id(n,e){e===void 0&&(e=Cj);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:f,transformOrigin:p}=_i(n).getComputedStyle(n);f&&(t=Aj(t,f,p))}const{top:s,left:a,width:o,height:u,bottom:c,right:h}=t;return{top:s,left:a,width:o,height:u,bottom:c,right:h}}function ay(n){return id(n,{ignoreTransform:!0})}function Tj(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function kj(n,e){return e===void 0&&(e=_i(n).getComputedStyle(n)),e.position==="fixed"}function jj(n,e){e===void 0&&(e=_i(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=e[a];return typeof o=="string"?t.test(o):!1})}function a0(n,e){const t=[];function s(a){if(e!=null&&t.length>=e||!a)return t;if(D2(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!kf(a)||ww(a)||t.includes(a))return t;const o=_i(n).getComputedStyle(a);return a!==n&&jj(a,o)&&t.push(a),kj(a,o)?t:s(a.parentNode)}return n?s(n):t}function jw(n){const[e]=a0(n,1);return e??null}function Om(n){return!r0||!n?null:rd(n)?n:O2(n)?D2(n)||n===sd(n).scrollingElement?window:kf(n)?n:null:null}function Ew(n){return rd(n)?n.scrollX:n.scrollLeft}function Mw(n){return rd(n)?n.scrollY:n.scrollTop}function wg(n){return{x:Ew(n),y:Mw(n)}}var Us;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Us||(Us={}));function Lw(n){return!r0||!n?!1:n===document.scrollingElement}function Ow(n){const e={x:0,y:0},t=Lw(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},s={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},a=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,u=n.scrollTop>=s.y,c=n.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:u,isRight:c,maxScroll:s,minScroll:e}}const Ej={x:.2,y:.2};function Mj(n,e,t,s,a){let{top:o,left:u,right:c,bottom:h}=t;s===void 0&&(s=10),a===void 0&&(a=Ej);const{isTop:f,isBottom:p,isLeft:y,isRight:_}=Ow(n),b={x:0,y:0},A={x:0,y:0},N={height:e.height*a.y,width:e.width*a.x};return!f&&o<=e.top+N.height?(b.y=Us.Backward,A.y=s*Math.abs((e.top+N.height-o)/N.height)):!p&&h>=e.bottom-N.height&&(b.y=Us.Forward,A.y=s*Math.abs((e.bottom-N.height-h)/N.height)),!_&&c>=e.right-N.width?(b.x=Us.Forward,A.x=s*Math.abs((e.right-N.width-c)/N.width)):!y&&u<=e.left+N.width&&(b.x=Us.Backward,A.x=s*Math.abs((e.left+N.width-u)/N.width)),{direction:b,speed:A}}function Lj(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:u}=window;return{top:0,left:0,right:o,bottom:u,width:o,height:u}}const{top:e,left:t,right:s,bottom:a}=n.getBoundingClientRect();return{top:e,left:t,right:s,bottom:a,width:n.clientWidth,height:n.clientHeight}}function Dw(n){return n.reduce((e,t)=>Dh(e,wg(t)),mo)}function Oj(n){return n.reduce((e,t)=>e+Ew(t),0)}function Dj(n){return n.reduce((e,t)=>e+Mw(t),0)}function Rw(n,e){if(e===void 0&&(e=id),!n)return;const{top:t,left:s,bottom:a,right:o}=e(n);jw(n)&&(a<=0||o<=0||t>=window.innerHeight||s>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const Rj=[["x",["left","right"],Oj],["y",["top","bottom"],Dj]];class F2{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=a0(t),a=Dw(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,u,c]of Rj)for(const h of u)Object.defineProperty(this,h,{get:()=>{const f=c(s),p=a[o]-f;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Qd{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var a;(a=this.target)==null||a.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function Ij(n){const{EventTarget:e}=_i(n);return n instanceof e?n:sd(n)}function Dm(n,e){const t=Math.abs(n.x),s=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var ja;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(ja||(ja={}));function oy(n){n.preventDefault()}function Fj(n){n.stopPropagation()}var Bn;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Bn||(Bn={}));const Iw={start:[Bn.Space,Bn.Enter],cancel:[Bn.Esc],end:[Bn.Space,Bn.Enter,Bn.Tab]},Vj=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Bn.Right:return{...t,x:t.x+25};case Bn.Left:return{...t,x:t.x-25};case Bn.Down:return{...t,y:t.y+25};case Bn.Up:return{...t,y:t.y-25}}};class Mf{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Qd(sd(t)),this.windowListeners=new Qd(_i(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ja.Resize,this.handleCancel),this.windowListeners.add(ja.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ja.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&Rw(s),t(mo)}handleKeyDown(e){if(i0(e)){const{active:t,context:s,options:a}=this.props,{keyboardCodes:o=Iw,coordinateGetter:u=Vj,scrollBehavior:c="smooth"}=a,{code:h}=e;if(o.end.includes(h)){this.handleEnd(e);return}if(o.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:f}=s.current,p=f?{x:f.left,y:f.top}:mo;this.referenceCoordinates||(this.referenceCoordinates=p);const y=u(e,{active:t,context:s.current,currentCoordinates:p});if(y){const _=df(y,p),b={x:0,y:0},{scrollableAncestors:A}=s.current;for(const N of A){const k=e.code,{isTop:T,isRight:R,isLeft:D,isBottom:V,maxScroll:F,minScroll:W}=Ow(N),H=Lj(N),L={x:Math.min(k===Bn.Right?H.right-H.width/2:H.right,Math.max(k===Bn.Right?H.left:H.left+H.width/2,y.x)),y:Math.min(k===Bn.Down?H.bottom-H.height/2:H.bottom,Math.max(k===Bn.Down?H.top:H.top+H.height/2,y.y))},B=k===Bn.Right&&!R||k===Bn.Left&&!D,te=k===Bn.Down&&!V||k===Bn.Up&&!T;if(B&&L.x!==y.x){const j=N.scrollLeft+_.x,I=k===Bn.Right&&j<=F.x||k===Bn.Left&&j>=W.x;if(I&&!_.y){N.scrollTo({left:j,behavior:c});return}I?b.x=N.scrollLeft-j:b.x=k===Bn.Right?N.scrollLeft-F.x:N.scrollLeft-W.x,b.x&&N.scrollBy({left:-b.x,behavior:c});break}else if(te&&L.y!==y.y){const j=N.scrollTop+_.y,I=k===Bn.Down&&j<=F.y||k===Bn.Up&&j>=W.y;if(I&&!_.x){N.scrollTo({top:j,behavior:c});return}I?b.y=N.scrollTop-j:b.y=k===Bn.Down?N.scrollTop-F.y:N.scrollTop-W.y,b.y&&N.scrollBy({top:-b.y,behavior:c});break}}this.handleMove(e,Dh(df(y,this.referenceCoordinates),b))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Mf.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:s=Iw,onActivation:a}=e,{active:o}=t;const{code:u}=n.nativeEvent;if(s.start.includes(u)){const c=o.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),a?.({event:n.nativeEvent}),!0)}return!1}}];function ly(n){return!!(n&&"distance"in n)}function cy(n){return!!(n&&"delay"in n)}class V2{constructor(e,t,s){var a;s===void 0&&(s=Ij(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:u}=o;this.props=e,this.events=t,this.document=sd(u),this.documentListeners=new Qd(this.document),this.listeners=new Qd(s),this.windowListeners=new Qd(_i(u)),this.initialCoordinates=(a=Tp(o))!=null?a:mo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ja.Resize,this.handleCancel),this.windowListeners.add(ja.DragStart,oy),this.windowListeners.add(ja.VisibilityChange,this.handleCancel),this.windowListeners.add(ja.ContextMenu,oy),this.documentListeners.add(ja.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(cy(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(ly(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:a}=this.props;a(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(ja.Click,Fj,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ja.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:u,options:{activationConstraint:c}}=o;if(!a)return;const h=(t=Tp(e))!=null?t:mo,f=df(a,h);if(!s&&c){if(ly(c)){if(c.tolerance!=null&&Dm(f,c.tolerance))return this.handleCancel();if(Dm(f,c.distance))return this.handleStart()}if(cy(c)&&Dm(f,c.tolerance))return this.handleCancel();this.handlePending(c,f);return}e.cancelable&&e.preventDefault(),u(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Bn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Bj={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Lf extends V2{constructor(e){const{event:t}=e,s=sd(t.target);super(e,Bj,s)}}Lf.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const Pj={move:{name:"mousemove"},end:{name:"mouseup"}};var _g;(function(n){n[n.RightClick=2]="RightClick"})(_g||(_g={}));class zj extends V2{constructor(e){super(e,Pj,sd(e.event.target))}}zj.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return t.button===_g.RightClick?!1:(s?.({event:t}),!0)}}];const Rm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class o0 extends V2{constructor(e){super(e,Rm)}static setup(){return window.addEventListener(Rm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Rm.move.name,e)};function e(){}}}o0.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;const{touches:a}=t;return a.length>1?!1:(s?.({event:t}),!0)}}];var Jd;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Jd||(Jd={}));var jp;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(jp||(jp={}));function qj(n){let{acceleration:e,activator:t=Jd.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:u=5,order:c=jp.TreeOrder,pointerCoordinates:h,scrollableAncestors:f,scrollableAncestorRects:p,delta:y,threshold:_}=n;const b=Hj({delta:y,disabled:!o}),[A,N]=sj(),k=ee.useRef({x:0,y:0}),T=ee.useRef({x:0,y:0}),R=ee.useMemo(()=>{switch(t){case Jd.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Jd.DraggableRect:return a}},[t,a,h]),D=ee.useRef(null),V=ee.useCallback(()=>{const W=D.current;if(!W)return;const H=k.current.x*T.current.x,L=k.current.y*T.current.y;W.scrollBy(H,L)},[]),F=ee.useMemo(()=>c===jp.TreeOrder?[...f].reverse():f,[c,f]);ee.useEffect(()=>{if(!o||!f.length||!R){N();return}for(const W of F){if(s?.(W)===!1)continue;const H=f.indexOf(W),L=p[H];if(!L)continue;const{direction:B,speed:te}=Mj(W,L,R,e,_);for(const j of["x","y"])b[j][B[j]]||(te[j]=0,B[j]=0);if(te.x>0||te.y>0){N(),D.current=W,A(V,u),k.current=te,T.current=B;return}}k.current={x:0,y:0},T.current={x:0,y:0},N()},[e,V,s,N,o,u,JSON.stringify(R),JSON.stringify(b),A,f,F,p,JSON.stringify(_)])}const Uj={x:{[Us.Backward]:!1,[Us.Forward]:!1},y:{[Us.Backward]:!1,[Us.Forward]:!1}};function Hj(n){let{delta:e,disabled:t}=n;const s=Cp(e);return jf(a=>{if(t||!s||!a)return Uj;const o={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Us.Backward]:a.x[Us.Backward]||o.x===-1,[Us.Forward]:a.x[Us.Forward]||o.x===1},y:{[Us.Backward]:a.y[Us.Backward]||o.y===-1,[Us.Forward]:a.y[Us.Forward]||o.y===1}}},[t,e,s])}function Wj(n,e){const t=e!=null?n.get(e):void 0,s=t?t.node.current:null;return jf(a=>{var o;return e==null?null:(o=s??a)!=null?o:null},[s,e])}function Gj(n,e){return ee.useMemo(()=>n.reduce((t,s)=>{const{sensor:a}=s,o=a.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,s)}));return[...t,...o]},[]),[n,e])}var ff;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(ff||(ff={}));var Sg;(function(n){n.Optimized="optimized"})(Sg||(Sg={}));const uy=new Map;function $j(n,e){let{dragging:t,dependencies:s,config:a}=e;const[o,u]=ee.useState(null),{frequency:c,measure:h,strategy:f}=a,p=ee.useRef(n),y=k(),_=hf(y),b=ee.useCallback(function(T){T===void 0&&(T=[]),!_.current&&u(R=>R===null?T:R.concat(T.filter(D=>!R.includes(D))))},[_]),A=ee.useRef(null),N=jf(T=>{if(y&&!t)return uy;if(!T||T===uy||p.current!==n||o!=null){const R=new Map;for(let D of n){if(!D)continue;if(o&&o.length>0&&!o.includes(D.id)&&D.rect.current){R.set(D.id,D.rect.current);continue}const V=D.node.current,F=V?new F2(h(V),V):null;D.rect.current=F,F&&R.set(D.id,F)}return R}return T},[n,o,t,y,h]);return ee.useEffect(()=>{p.current=n},[n]),ee.useEffect(()=>{y||b()},[t,y]),ee.useEffect(()=>{o&&o.length>0&&u(null)},[JSON.stringify(o)]),ee.useEffect(()=>{y||typeof c!="number"||A.current!==null||(A.current=setTimeout(()=>{b(),A.current=null},c))},[c,y,b,...s]),{droppableRects:N,measureDroppableContainers:b,measuringScheduled:o!=null};function k(){switch(f){case ff.Always:return!1;case ff.BeforeDragging:return t;default:return!t}}}function B2(n,e){return jf(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Yj(n,e){return B2(n,e)}function Xj(n){let{callback:e,disabled:t}=n;const s=s0(e),a=ee.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,t]);return ee.useEffect(()=>()=>a?.disconnect(),[a]),a}function l0(n){let{callback:e,disabled:t}=n;const s=s0(e),a=ee.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[t]);return ee.useEffect(()=>()=>a?.disconnect(),[a]),a}function Zj(n){return new F2(id(n),n)}function hy(n,e,t){e===void 0&&(e=Zj);const[s,a]=ee.useState(null);function o(){a(h=>{if(!n)return null;if(n.isConnected===!1){var f;return(f=h??t)!=null?f:null}const p=e(n);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const u=Xj({callback(h){if(n)for(const f of h){const{type:p,target:y}=f;if(p==="childList"&&y instanceof HTMLElement&&y.contains(n)){o();break}}}}),c=l0({callback:o});return po(()=>{o(),n?(c?.observe(n),u?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),u?.disconnect())},[n]),s}function Kj(n){const e=B2(n);return Tw(n,e)}const dy=[];function Qj(n){const e=ee.useRef(n),t=jf(s=>n?s&&s!==dy&&n&&e.current&&n.parentNode===e.current.parentNode?s:a0(n):dy,[n]);return ee.useEffect(()=>{e.current=n},[n]),t}function Jj(n){const[e,t]=ee.useState(null),s=ee.useRef(n),a=ee.useCallback(o=>{const u=Om(o.target);u&&t(c=>c?(c.set(u,wg(u)),new Map(c)):null)},[]);return ee.useEffect(()=>{const o=s.current;if(n!==o){u(o);const c=n.map(h=>{const f=Om(h);return f?(f.addEventListener("scroll",a,{passive:!0}),[f,wg(f)]):null}).filter(h=>h!=null);t(c.length?new Map(c):null),s.current=n}return()=>{u(n),u(o)};function u(c){c.forEach(h=>{const f=Om(h);f?.removeEventListener("scroll",a)})}},[a,n]),ee.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,u)=>Dh(o,u),mo):Dw(n):mo,[n,e])}function fy(n,e){e===void 0&&(e=[]);const t=ee.useRef(null);return ee.useEffect(()=>{t.current=null},e),ee.useEffect(()=>{const s=n!==mo;s&&!t.current&&(t.current=n),!s&&t.current&&(t.current=null)},[n]),t.current?df(n,t.current):mo}function e7(n){ee.useEffect(()=>{if(!r0)return;const e=n.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function t7(n,e){return ee.useMemo(()=>n.reduce((t,s)=>{let{eventName:a,handler:o}=s;return t[a]=u=>{o(u,e)},t},{}),[n,e])}function Fw(n){return ee.useMemo(()=>n?Tj(n):null,[n])}const py=[];function n7(n,e){e===void 0&&(e=id);const[t]=n,s=Fw(t?_i(t):null),[a,o]=ee.useState(py);function u(){o(()=>n.length?n.map(h=>Lw(h)?s:new F2(e(h),h)):py)}const c=l0({callback:u});return po(()=>{c?.disconnect(),u(),n.forEach(h=>c?.observe(h))},[n]),a}function Vw(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return kf(e)?e:n}function r7(n){let{measure:e}=n;const[t,s]=ee.useState(null),a=ee.useCallback(f=>{for(const{target:p}of f)if(kf(p)){s(y=>{const _=e(p);return y?{...y,width:_.width,height:_.height}:_});break}},[e]),o=l0({callback:a}),u=ee.useCallback(f=>{const p=Vw(f);o?.disconnect(),p&&o?.observe(p),s(p?e(p):null)},[e,o]),[c,h]=Ap(u);return ee.useMemo(()=>({nodeRef:c,rect:t,setRef:h}),[t,c,h])}const s7=[{sensor:Lf,options:{}},{sensor:Mf,options:{}}],i7={current:{}},X1={draggable:{measure:ay},droppable:{measure:ay,strategy:ff.WhileDragging,frequency:Sg.Optimized},dragOverlay:{measure:id}};class ef extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const a7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ef,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:kp},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:X1,measureDroppableContainers:kp,windowRect:null,measuringScheduled:!1},Bw={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:kp,draggableNodes:new Map,over:null,measureDroppableContainers:kp},Of=ee.createContext(Bw),Pw=ee.createContext(a7);function o7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ef}}}function l7(n,e){switch(e.type){case Ls.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ls.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Ls.DragEnd:case Ls.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ls.RegisterDroppable:{const{element:t}=e,{id:s}=t,a=new ef(n.droppable.containers);return a.set(s,t),{...n,droppable:{...n.droppable,containers:a}}}case Ls.SetDroppableDisabled:{const{id:t,key:s,disabled:a}=e,o=n.droppable.containers.get(t);if(!o||s!==o.key)return n;const u=new ef(n.droppable.containers);return u.set(t,{...o,disabled:a}),{...n,droppable:{...n.droppable,containers:u}}}case Ls.UnregisterDroppable:{const{id:t,key:s}=e,a=n.droppable.containers.get(t);if(!a||s!==a.key)return n;const o=new ef(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function c7(n){let{disabled:e}=n;const{active:t,activatorEvent:s,draggableNodes:a}=ee.useContext(Of),o=Cp(s),u=Cp(t?.id);return ee.useEffect(()=>{if(!e&&!s&&o&&u!=null){if(!i0(o)||document.activeElement===o.target)return;const c=a.get(u);if(!c)return;const{activatorNode:h,node:f}=c;if(!h.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[h.current,f.current]){if(!p)continue;const y=oj(p);if(y){y.focus();break}}})}},[s,e,a,u,o]),null}function zw(n,e){let{transform:t,...s}=e;return n!=null&&n.length?n.reduce((a,o)=>o({transform:a,...s}),t):t}function u7(n){return ee.useMemo(()=>({draggable:{...X1.draggable,...n?.draggable},droppable:{...X1.droppable,...n?.droppable},dragOverlay:{...X1.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function h7(n){let{activeNode:e,measure:t,initialRect:s,config:a=!0}=n;const o=ee.useRef(!1),{x:u,y:c}=typeof a=="boolean"?{x:a,y:a}:a;po(()=>{if(!u&&!c||!e){o.current=!1;return}if(o.current||!s)return;const f=e?.node.current;if(!f||f.isConnected===!1)return;const p=t(f),y=Tw(p,s);if(u||(y.x=0),c||(y.y=0),o.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const _=jw(f);_&&_.scrollBy({top:y.y,left:y.x})}},[e,u,c,s,t])}const c0=ee.createContext({...mo,scaleX:1,scaleY:1});var Sc;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Sc||(Sc={}));const P2=ee.memo(function(e){var t,s,a,o;let{id:u,accessibility:c,autoScroll:h=!0,children:f,sensors:p=s7,collisionDetection:y=wj,measuring:_,modifiers:b,...A}=e;const N=ee.useReducer(l7,void 0,o7),[k,T]=N,[R,D]=fj(),[V,F]=ee.useState(Sc.Uninitialized),W=V===Sc.Initialized,{draggable:{active:H,nodes:L,translate:B},droppable:{containers:te}}=k,j=H!=null?L.get(H):null,I=ee.useRef({initial:null,translated:null}),K=ee.useMemo(()=>{var wt;return H!=null?{id:H,data:(wt=j?.data)!=null?wt:i7,rect:I}:null},[H,j]),P=ee.useRef(null),[ie,X]=ee.useState(null),[re,le]=ee.useState(null),fe=hf(A,Object.values(A)),Se=Ef("DndDescribedBy",u),z=ee.useMemo(()=>te.getEnabled(),[te]),M=u7(_),{droppableRects:$,measureDroppableContainers:G,measuringScheduled:J}=$j(z,{dragging:W,dependencies:[B.x,B.y],config:M.droppable}),ae=Wj(L,H),pe=ee.useMemo(()=>re?Tp(re):null,[re]),de=Jt(),xe=Yj(ae,M.draggable.measure);h7({activeNode:H!=null?L.get(H):null,config:de.layoutShiftCompensation,initialRect:xe,measure:M.draggable.measure});const Ne=hy(ae,M.draggable.measure,xe),Be=hy(ae?ae.parentElement:null),Qe=ee.useRef({activatorEvent:null,active:null,activeNode:ae,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:te,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Xe=te.getNodeFor((t=Qe.current.over)==null?void 0:t.id),st=r7({measure:M.dragOverlay.measure}),Y=(s=st.nodeRef.current)!=null?s:ae,Ie=W?(a=st.rect)!=null?a:Ne:null,dt=!!(st.nodeRef.current&&st.rect),et=Kj(dt?null:Ne),ge=Fw(Y?_i(Y):null),qe=Qj(W?Xe??ae:null),Re=n7(qe),nt=zw(b,{transform:{x:B.x-et.x,y:B.y-et.y,scaleX:1,scaleY:1},activatorEvent:re,active:K,activeNodeRect:Ne,containerNodeRect:Be,draggingNodeRect:Ie,over:Qe.current.over,overlayNodeRect:st.rect,scrollableAncestors:qe,scrollableAncestorRects:Re,windowRect:ge}),ct=pe?Dh(pe,B):null,vt=Jj(qe),It=fy(vt),St=fy(vt,[Ne]),Ft=Dh(nt,It),jt=Ie?Nj(Ie,nt):null,yt=K&&jt?y({active:K,collisionRect:jt,droppableRects:$,droppableContainers:z,pointerCoordinates:ct}):null,xt=Cw(yt,"id"),[Me,ut]=ee.useState(null),ot=dt?nt:Dh(nt,St),We=_j(ot,(o=Me?.rect)!=null?o:null,Ne),at=ee.useRef(null),bt=ee.useCallback((wt,pt)=>{let{sensor:qt,options:wn}=pt;if(P.current==null)return;const Ee=L.get(P.current);if(!Ee)return;const ft=wt.nativeEvent,_e=new qt({active:P.current,activeNode:Ee,event:ft,options:wn,context:Qe,onAbort(ht){if(!L.get(ht))return;const{onDragAbort:Bt}=fe.current,nn={id:ht};Bt?.(nn),R({type:"onDragAbort",event:nn})},onPending(ht,Tt,Bt,nn){if(!L.get(ht))return;const{onDragPending:dn}=fe.current,fn={id:ht,constraint:Tt,initialCoordinates:Bt,offset:nn};dn?.(fn),R({type:"onDragPending",event:fn})},onStart(ht){const Tt=P.current;if(Tt==null)return;const Bt=L.get(Tt);if(!Bt)return;const{onDragStart:nn}=fe.current,$t={activatorEvent:ft,active:{id:Tt,data:Bt.data,rect:I}};Ho.unstable_batchedUpdates(()=>{nn?.($t),F(Sc.Initializing),T({type:Ls.DragStart,initialCoordinates:ht,active:Tt}),R({type:"onDragStart",event:$t}),X(at.current),le(ft)})},onMove(ht){T({type:Ls.DragMove,coordinates:ht})},onEnd:Fe(Ls.DragEnd),onCancel:Fe(Ls.DragCancel)});at.current=_e;function Fe(ht){return async function(){const{active:Bt,collisions:nn,over:$t,scrollAdjustedTranslate:dn}=Qe.current;let fn=null;if(Bt&&dn){const{cancelDrop:Jn}=fe.current;fn={activatorEvent:ft,active:Bt,collisions:nn,delta:dn,over:$t},ht===Ls.DragEnd&&typeof Jn=="function"&&await Promise.resolve(Jn(fn))&&(ht=Ls.DragCancel)}P.current=null,Ho.unstable_batchedUpdates(()=>{T({type:ht}),F(Sc.Uninitialized),ut(null),X(null),le(null),at.current=null;const Jn=ht===Ls.DragEnd?"onDragEnd":"onDragCancel";if(fn){const Gn=fe.current[Jn];Gn?.(fn),R({type:Jn,event:fn})}})}}},[L]),lt=ee.useCallback((wt,pt)=>(qt,wn)=>{const Ee=qt.nativeEvent,ft=L.get(wn);if(P.current!==null||!ft||Ee.dndKit||Ee.defaultPrevented)return;const _e={active:ft};wt(qt,pt.options,_e)===!0&&(Ee.dndKit={capturedBy:pt.sensor},P.current=wn,bt(qt,pt))},[L,bt]),tn=Gj(p,lt);e7(p),po(()=>{Ne&&V===Sc.Initializing&&F(Sc.Initialized)},[Ne,V]),ee.useEffect(()=>{const{onDragMove:wt}=fe.current,{active:pt,activatorEvent:qt,collisions:wn,over:Ee}=Qe.current;if(!pt||!qt)return;const ft={active:pt,activatorEvent:qt,collisions:wn,delta:{x:Ft.x,y:Ft.y},over:Ee};Ho.unstable_batchedUpdates(()=>{wt?.(ft),R({type:"onDragMove",event:ft})})},[Ft.x,Ft.y]),ee.useEffect(()=>{const{active:wt,activatorEvent:pt,collisions:qt,droppableContainers:wn,scrollAdjustedTranslate:Ee}=Qe.current;if(!wt||P.current==null||!pt||!Ee)return;const{onDragOver:ft}=fe.current,_e=wn.get(xt),Fe=_e&&_e.rect.current?{id:_e.id,rect:_e.rect.current,data:_e.data,disabled:_e.disabled}:null,ht={active:wt,activatorEvent:pt,collisions:qt,delta:{x:Ee.x,y:Ee.y},over:Fe};Ho.unstable_batchedUpdates(()=>{ut(Fe),ft?.(ht),R({type:"onDragOver",event:ht})})},[xt]),po(()=>{Qe.current={activatorEvent:re,active:K,activeNode:ae,collisionRect:jt,collisions:yt,droppableRects:$,draggableNodes:L,draggingNode:Y,draggingNodeRect:Ie,droppableContainers:te,over:Me,scrollableAncestors:qe,scrollAdjustedTranslate:Ft},I.current={initial:Ie,translated:jt}},[K,ae,yt,jt,L,Y,Ie,$,te,Me,qe,Ft]),qj({...de,delta:B,draggingRect:jt,pointerCoordinates:ct,scrollableAncestors:qe,scrollableAncestorRects:Re});const Ct=ee.useMemo(()=>({active:K,activeNode:ae,activeNodeRect:Ne,activatorEvent:re,collisions:yt,containerNodeRect:Be,dragOverlay:st,draggableNodes:L,droppableContainers:te,droppableRects:$,over:Me,measureDroppableContainers:G,scrollableAncestors:qe,scrollableAncestorRects:Re,measuringConfiguration:M,measuringScheduled:J,windowRect:ge}),[K,ae,Ne,re,yt,Be,st,L,te,$,Me,G,qe,Re,M,J,ge]),Vt=ee.useMemo(()=>({activatorEvent:re,activators:tn,active:K,activeNodeRect:Ne,ariaDescribedById:{draggable:Se},dispatch:T,draggableNodes:L,over:Me,measureDroppableContainers:G}),[re,tn,K,Ne,T,Se,L,Me,G]);return Cn.createElement(Sw.Provider,{value:D},Cn.createElement(Of.Provider,{value:Vt},Cn.createElement(Pw.Provider,{value:Ct},Cn.createElement(c0.Provider,{value:We},f)),Cn.createElement(c7,{disabled:c?.restoreFocus===!1})),Cn.createElement(gj,{...c,hiddenTextDescribedById:Se}));function Jt(){const wt=ie?.autoScrollEnabled===!1,pt=typeof h=="object"?h.enabled===!1:h===!1,qt=W&&!wt&&!pt;return typeof h=="object"?{...h,enabled:qt}:{enabled:qt}}}),d7=ee.createContext(null),my="button",f7="Draggable";function p7(n){let{id:e,data:t,disabled:s=!1,attributes:a}=n;const o=Ef(f7),{activators:u,activatorEvent:c,active:h,activeNodeRect:f,ariaDescribedById:p,draggableNodes:y,over:_}=ee.useContext(Of),{role:b=my,roleDescription:A="draggable",tabIndex:N=0}=a??{},k=h?.id===e,T=ee.useContext(k?c0:d7),[R,D]=Ap(),[V,F]=Ap(),W=t7(u,e),H=hf(t);po(()=>(y.set(e,{id:e,key:o,node:R,activatorNode:V,data:H}),()=>{const B=y.get(e);B&&B.key===o&&y.delete(e)}),[y,e]);const L=ee.useMemo(()=>({role:b,tabIndex:N,"aria-disabled":s,"aria-pressed":k&&b===my?!0:void 0,"aria-roledescription":A,"aria-describedby":p.draggable}),[s,b,N,k,A,p.draggable]);return{active:h,activatorEvent:c,activeNodeRect:f,attributes:L,isDragging:k,listeners:s?void 0:W,node:R,over:_,setNodeRef:D,setActivatorNodeRef:F,transform:T}}function qw(){return ee.useContext(Pw)}const m7="Droppable",g7={timeout:25};function b7(n){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:a}=n;const o=Ef(m7),{active:u,dispatch:c,over:h,measureDroppableContainers:f}=ee.useContext(Of),p=ee.useRef({disabled:t}),y=ee.useRef(!1),_=ee.useRef(null),b=ee.useRef(null),{disabled:A,updateMeasurementsFor:N,timeout:k}={...g7,...a},T=hf(N??s),R=ee.useCallback(()=>{if(!y.current){y.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{f(Array.isArray(T.current)?T.current:[T.current]),b.current=null},k)},[k]),D=l0({callback:R,disabled:A||!u}),V=ee.useCallback((L,B)=>{D&&(B&&(D.unobserve(B),y.current=!1),L&&D.observe(L))},[D]),[F,W]=Ap(V),H=hf(e);return ee.useEffect(()=>{!D||!F.current||(D.disconnect(),y.current=!1,D.observe(F.current))},[F,D]),ee.useEffect(()=>(c({type:Ls.RegisterDroppable,element:{id:s,key:o,disabled:t,node:F,rect:_,data:H}}),()=>c({type:Ls.UnregisterDroppable,key:o,id:s})),[s]),ee.useEffect(()=>{t!==p.current.disabled&&(c({type:Ls.SetDroppableDisabled,id:s,key:o,disabled:t}),p.current.disabled=t)},[s,o,t,c]),{active:u,rect:_,isOver:h?.id===s,node:F,over:h,setNodeRef:W}}function v7(n){let{animation:e,children:t}=n;const[s,a]=ee.useState(null),[o,u]=ee.useState(null),c=Cp(t);return!t&&!s&&c&&a(c),po(()=>{if(!o)return;const h=s?.key,f=s?.props.id;if(h==null||f==null){a(null);return}Promise.resolve(e(f,o)).then(()=>{a(null)})},[e,s,o]),Cn.createElement(Cn.Fragment,null,t,s?ee.cloneElement(s,{ref:u}):null)}const y7={x:0,y:0,scaleX:1,scaleY:1};function x7(n){let{children:e}=n;return Cn.createElement(Of.Provider,{value:Bw},Cn.createElement(c0.Provider,{value:y7},e))}const w7={position:"fixed",touchAction:"none"},_7=n=>i0(n)?"transform 250ms ease":void 0,S7=ee.forwardRef((n,e)=>{let{as:t,activatorEvent:s,adjustScale:a,children:o,className:u,rect:c,style:h,transform:f,transition:p=_7}=n;if(!c)return null;const y=a?f:{...f,scaleX:1,scaleY:1},_={...w7,width:c.width,height:c.height,top:c.top,left:c.left,transform:$o.Transform.toString(y),transformOrigin:a&&s?bj(s,c):void 0,transition:typeof p=="function"?p(s):p,...h};return Cn.createElement(t,{className:u,style:_,ref:e},o)}),N7=n=>e=>{let{active:t,dragOverlay:s}=e;const a={},{styles:o,className:u}=n;if(o!=null&&o.active)for(const[c,h]of Object.entries(o.active))h!==void 0&&(a[c]=t.node.style.getPropertyValue(c),t.node.style.setProperty(c,h));if(o!=null&&o.dragOverlay)for(const[c,h]of Object.entries(o.dragOverlay))h!==void 0&&s.node.style.setProperty(c,h);return u!=null&&u.active&&t.node.classList.add(u.active),u!=null&&u.dragOverlay&&s.node.classList.add(u.dragOverlay),function(){for(const[h,f]of Object.entries(a))t.node.style.setProperty(h,f);u!=null&&u.active&&t.node.classList.remove(u.active)}},A7=n=>{let{transform:{initial:e,final:t}}=n;return[{transform:$o.Transform.toString(e)},{transform:$o.Transform.toString(t)}]},C7={duration:250,easing:"ease",keyframes:A7,sideEffects:N7({styles:{active:{opacity:"0"}}})};function T7(n){let{config:e,draggableNodes:t,droppableContainers:s,measuringConfiguration:a}=n;return s0((o,u)=>{if(e===null)return;const c=t.get(o);if(!c)return;const h=c.node.current;if(!h)return;const f=Vw(u);if(!f)return;const{transform:p}=_i(u).getComputedStyle(u),y=kw(p);if(!y)return;const _=typeof e=="function"?e:k7(e);return Rw(h,a.draggable.measure),_({active:{id:o,data:c.data,node:h,rect:a.draggable.measure(h)},draggableNodes:t,dragOverlay:{node:u,rect:a.dragOverlay.measure(f)},droppableContainers:s,measuringConfiguration:a,transform:y})})}function k7(n){const{duration:e,easing:t,sideEffects:s,keyframes:a}={...C7,...n};return o=>{let{active:u,dragOverlay:c,transform:h,...f}=o;if(!e)return;const p={x:c.rect.left-u.rect.left,y:c.rect.top-u.rect.top},y={scaleX:h.scaleX!==1?u.rect.width*h.scaleX/c.rect.width:1,scaleY:h.scaleY!==1?u.rect.height*h.scaleY/c.rect.height:1},_={x:h.x-p.x,y:h.y-p.y,...y},b=a({...f,active:u,dragOverlay:c,transform:{initial:h,final:_}}),[A]=b,N=b[b.length-1];if(JSON.stringify(A)===JSON.stringify(N))return;const k=s?.({active:u,dragOverlay:c,...f}),T=c.node.animate(b,{duration:e,easing:t,fill:"forwards"});return new Promise(R=>{T.onfinish=()=>{k?.(),R()}})}}let gy=0;function j7(n){return ee.useMemo(()=>{if(n!=null)return gy++,gy},[n])}const Uw=Cn.memo(n=>{let{adjustScale:e=!1,children:t,dropAnimation:s,style:a,transition:o,modifiers:u,wrapperElement:c="div",className:h,zIndex:f=999}=n;const{activatorEvent:p,active:y,activeNodeRect:_,containerNodeRect:b,draggableNodes:A,droppableContainers:N,dragOverlay:k,over:T,measuringConfiguration:R,scrollableAncestors:D,scrollableAncestorRects:V,windowRect:F}=qw(),W=ee.useContext(c0),H=j7(y?.id),L=zw(u,{activatorEvent:p,active:y,activeNodeRect:_,containerNodeRect:b,draggingNodeRect:k.rect,over:T,overlayNodeRect:k.rect,scrollableAncestors:D,scrollableAncestorRects:V,transform:W,windowRect:F}),B=B2(_),te=T7({config:s,draggableNodes:A,droppableContainers:N,measuringConfiguration:R}),j=B?k.setRef:void 0;return Cn.createElement(x7,null,Cn.createElement(v7,{animation:te},y&&H?Cn.createElement(S7,{key:H,id:y.id,ref:j,as:c,activatorEvent:p,adjustScale:e,className:h,transition:o,rect:B,style:{zIndex:f,...a},transform:L},t):null))});function Df(n,e,t){const s=n.slice();return s.splice(t<0?s.length+t:t,0,s.splice(e,1)[0]),s}function E7(n,e){return n.reduce((t,s,a)=>{const o=e.get(s);return o&&(t[a]=o),t},Array(n.length))}function D1(n){return n!==null&&n>=0}function M7(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function L7(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const R1={scaleX:1,scaleY:1},z2=n=>{var e;let{rects:t,activeNodeRect:s,activeIndex:a,overIndex:o,index:u}=n;const c=(e=t[a])!=null?e:s;if(!c)return null;const h=O7(t,u,a);if(u===a){const f=t[o];return f?{x:a<o?f.left+f.width-(c.left+c.width):f.left-c.left,y:0,...R1}:null}return u>a&&u<=o?{x:-c.width-h,y:0,...R1}:u<a&&u>=o?{x:c.width+h,y:0,...R1}:{x:0,y:0,...R1}};function O7(n,e,t){const s=n[e],a=n[e-1],o=n[e+1];return!s||!a&&!o?0:t<e?a?s.left-(a.left+a.width):o.left-(s.left+s.width):o?o.left-(s.left+s.width):s.left-(a.left+a.width)}const Hw=n=>{let{rects:e,activeIndex:t,overIndex:s,index:a}=n;const o=Df(e,s,t),u=e[a],c=o[a];return!c||!u?null:{x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height}},Ww="Sortable",Gw=Cn.createContext({activeIndex:-1,containerId:Ww,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Hw,disabled:{draggable:!1,droppable:!1}});function q2(n){let{children:e,id:t,items:s,strategy:a=Hw,disabled:o=!1}=n;const{active:u,dragOverlay:c,droppableRects:h,over:f,measureDroppableContainers:p}=qw(),y=Ef(Ww,t),_=c.rect!==null,b=ee.useMemo(()=>s.map(W=>typeof W=="object"&&"id"in W?W.id:W),[s]),A=u!=null,N=u?b.indexOf(u.id):-1,k=f?b.indexOf(f.id):-1,T=ee.useRef(b),R=!M7(b,T.current),D=k!==-1&&N===-1||R,V=L7(o);po(()=>{R&&A&&p(b)},[R,b,A,p]),ee.useEffect(()=>{T.current=b},[b]);const F=ee.useMemo(()=>({activeIndex:N,containerId:y,disabled:V,disableTransforms:D,items:b,overIndex:k,useDragOverlay:_,sortedRects:E7(b,h),strategy:a}),[N,y,V.draggable,V.droppable,D,b,k,h,_,a]);return Cn.createElement(Gw.Provider,{value:F},e)}const D7=n=>{let{id:e,items:t,activeIndex:s,overIndex:a}=n;return Df(t,s,a).indexOf(e)},R7=n=>{let{containerId:e,isSorting:t,wasDragging:s,index:a,items:o,newIndex:u,previousItems:c,previousContainerId:h,transition:f}=n;return!f||!s||c!==o&&a===u?!1:t?!0:u!==a&&e===h},I7={duration:200,easing:"ease"},$w="transform",F7=$o.Transition.toString({property:$w,duration:0,easing:"linear"}),V7={roleDescription:"sortable"};function B7(n){let{disabled:e,index:t,node:s,rect:a}=n;const[o,u]=ee.useState(null),c=ee.useRef(t);return po(()=>{if(!e&&t!==c.current&&s.current){const h=a.current;if(h){const f=id(s.current,{ignoreTransform:!0}),p={x:h.left-f.left,y:h.top-f.top,scaleX:h.width/f.width,scaleY:h.height/f.height};(p.x||p.y)&&u(p)}}t!==c.current&&(c.current=t)},[e,t,s,a]),ee.useEffect(()=>{o&&u(null)},[o]),o}function U2(n){let{animateLayoutChanges:e=R7,attributes:t,disabled:s,data:a,getNewIndex:o=D7,id:u,strategy:c,resizeObserverConfig:h,transition:f=I7}=n;const{items:p,containerId:y,activeIndex:_,disabled:b,disableTransforms:A,sortedRects:N,overIndex:k,useDragOverlay:T,strategy:R}=ee.useContext(Gw),D=P7(s,b),V=p.indexOf(u),F=ee.useMemo(()=>({sortable:{containerId:y,index:V,items:p},...a}),[y,a,V,p]),W=ee.useMemo(()=>p.slice(p.indexOf(u)),[p,u]),{rect:H,node:L,isOver:B,setNodeRef:te}=b7({id:u,data:F,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:W,...h}}),{active:j,activatorEvent:I,activeNodeRect:K,attributes:P,setNodeRef:ie,listeners:X,isDragging:re,over:le,setActivatorNodeRef:fe,transform:Se}=p7({id:u,data:F,attributes:{...V7,...t},disabled:D.draggable}),z=rj(te,ie),M=!!j,$=M&&!A&&D1(_)&&D1(k),G=!T&&re,J=G&&$?Se:null,pe=$?J??(c??R)({rects:N,activeNodeRect:K,activeIndex:_,overIndex:k,index:V}):null,de=D1(_)&&D1(k)?o({id:u,items:p,activeIndex:_,overIndex:k}):V,xe=j?.id,Ne=ee.useRef({activeId:xe,items:p,newIndex:de,containerId:y}),Be=p!==Ne.current.items,Qe=e({active:j,containerId:y,isDragging:re,isSorting:M,id:u,index:V,items:p,newIndex:Ne.current.newIndex,previousItems:Ne.current.items,previousContainerId:Ne.current.containerId,transition:f,wasDragging:Ne.current.activeId!=null}),Xe=B7({disabled:!Qe,index:V,node:L,rect:H});return ee.useEffect(()=>{M&&Ne.current.newIndex!==de&&(Ne.current.newIndex=de),y!==Ne.current.containerId&&(Ne.current.containerId=y),p!==Ne.current.items&&(Ne.current.items=p)},[M,de,y,p]),ee.useEffect(()=>{if(xe===Ne.current.activeId)return;if(xe!=null&&Ne.current.activeId==null){Ne.current.activeId=xe;return}const Y=setTimeout(()=>{Ne.current.activeId=xe},50);return()=>clearTimeout(Y)},[xe]),{active:j,activeIndex:_,attributes:P,data:F,rect:H,index:V,newIndex:de,items:p,isOver:B,isSorting:M,isDragging:re,listeners:X,node:L,overIndex:k,over:le,setNodeRef:z,setActivatorNodeRef:fe,setDroppableNodeRef:te,setDraggableNodeRef:ie,transform:Xe??pe,transition:st()};function st(){if(Xe||Be&&Ne.current.newIndex===V)return F7;if(!(G&&!i0(I)||!f)&&(M||Qe))return $o.Transition.toString({...f,property:$w})}}function P7(n,e){var t,s;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(s=n?.droppable)!=null?s:e.droppable}}function Ep(n){if(!n)return!1;const e=n.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const z7=[Bn.Down,Bn.Right,Bn.Up,Bn.Left],H2=(n,e)=>{let{context:{active:t,collisionRect:s,droppableRects:a,droppableContainers:o,over:u,scrollableAncestors:c}}=e;if(z7.includes(n.code)){if(n.preventDefault(),!t||!s)return;const h=[];o.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const _=a.get(y.id);if(_)switch(n.code){case Bn.Down:s.top<_.top&&h.push(y);break;case Bn.Up:s.top>_.top&&h.push(y);break;case Bn.Left:s.left>_.left&&h.push(y);break;case Bn.Right:s.left<_.left&&h.push(y);break}});const f=yj({collisionRect:s,droppableRects:a,droppableContainers:h});let p=Cw(f,"id");if(p===u?.id&&f.length>1&&(p=f[1].id),p!=null){const y=o.get(t.id),_=o.get(p),b=_?a.get(_.id):null,A=_?.node.current;if(A&&b&&y&&_){const k=a0(A).some((W,H)=>c[H]!==W),T=Yw(y,_),R=q7(y,_),D=k||!T?{x:0,y:0}:{x:R?s.width-b.width:0,y:R?s.height-b.height:0},V={x:b.left,y:b.top};return D.x&&D.y?V:df(V,D)}}}};function Yw(n,e){return!Ep(n)||!Ep(e)?!1:n.data.current.sortable.containerId===e.data.current.sortable.containerId}function q7(n,e){return!Ep(n)||!Ep(e)||!Yw(n,e)?!1:n.data.current.sortable.index<e.data.current.sortable.index}const U7={intro:"In",verse:"V","pre-chorus":"PC",chorus:"C",bridge:"Br",interlude:"Int",solo:"So",breakdown:"Bd",tag:"Tg",hook:"Hk",outro:"Out"},H7={intro:{bg:"bg-purple-600",border:"border-purple-500",text:"text-purple-100"},verse:{bg:"bg-blue-600",border:"border-blue-500",text:"text-blue-100"},"pre-chorus":{bg:"bg-cyan-600",border:"border-cyan-500",text:"text-cyan-100"},chorus:{bg:"bg-amber-600",border:"border-amber-500",text:"text-amber-100"},bridge:{bg:"bg-emerald-600",border:"border-emerald-500",text:"text-emerald-100"},interlude:{bg:"bg-teal-600",border:"border-teal-500",text:"text-teal-100"},solo:{bg:"bg-orange-600",border:"border-orange-500",text:"text-orange-100"},breakdown:{bg:"bg-red-600",border:"border-red-500",text:"text-red-100"},tag:{bg:"bg-pink-600",border:"border-pink-500",text:"text-pink-100"},hook:{bg:"bg-yellow-600",border:"border-yellow-500",text:"text-yellow-100"},outro:{bg:"bg-rose-600",border:"border-rose-500",text:"text-rose-100"}},W7={bg:"bg-slate-600",text:"text-slate-100"};function G7(n,e){const t=U7[n.type]||n.type.charAt(0).toUpperCase(),s=e.filter(a=>a.type===n.type);if(s.length>1){const a=s.findIndex(o=>o.id===n.id)+1;return`${t}${a}`}return t}const $7=({section:n,allSections:e,totalMeasures:t,isActive:s,isLast:a,onClick:o})=>{const{attributes:u,listeners:c,setNodeRef:h,transform:f,transition:p,isDragging:y}=U2({id:n.id}),_=n.measures.length/t*100,b=H7[n.type]||W7,A=G7(n,e),N=_>5||s,k={transform:$o.Transform.toString(f),transition:p,width:`${_}%`,minWidth:"16px"};return g.jsxs("div",{ref:h,style:k,...u,...c,onClick:T=>{T.stopPropagation(),o?.()},className:Rt("relative h-full flex items-center justify-center overflow-hidden","transition-all duration-200 ease-out","touch-none select-none",b.bg,s&&!y&&"ring-2 ring-white/50 ring-inset z-10",!s&&!y&&"opacity-70 hover:opacity-90",y&&"opacity-100 scale-[1.08] z-50 ring-2 ring-white ring-inset shadow-lg","cursor-grab active:cursor-grabbing",!a&&!y&&"border-r border-black/30"),title:`${n.name||n.type} (${n.measures.length} bars) - Drag to reorder`,children:[N&&g.jsx("span",{className:Rt("text-[9px] font-bold uppercase tracking-tight pointer-events-none","transition-all duration-200",b.text,s&&!y&&"scale-105"),style:{textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:A}),s&&!y&&g.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-white/60",style:{boxShadow:"0 0 6px rgba(255,255,255,0.6)"}})]})},Xw=({sections:n,activeSectionId:e,onSectionClick:t,onReorder:s,onAddSection:a})=>{const o=n.reduce((h,f)=>h+f.measures.length,0),u=R2(El(Lf,{activationConstraint:{distance:5}}),El(o0,{activationConstraint:{delay:150,tolerance:5}}),El(Mf,{coordinateGetter:H2})),c=h=>{const{active:f,over:p}=h;if(p&&f.id!==p.id&&s){const y=n.findIndex(A=>A.id===f.id),_=n.findIndex(A=>A.id===p.id),b=Df(n,y,_);s(b)}};return o===0||n.length===0?a?g.jsx("div",{className:"w-full px-1",children:g.jsx("div",{className:"relative w-full h-6 bg-black/20 rounded-lg border border-white/5 flex items-center justify-center",children:g.jsxs("button",{onClick:a,className:"flex items-center gap-1 px-2 py-0.5 text-[9px] font-medium text-white/50 hover:text-white/80 transition-colors",children:[g.jsx(Mc,{size:10}),"Add Section"]})})}):null:g.jsxs("div",{className:"w-full px-1",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsxs("div",{className:"relative flex-1 h-6 bg-black/20 rounded-lg overflow-hidden border border-white/5",children:[g.jsxs(P2,{sensors:u,collisionDetection:I2,onDragEnd:c,children:[g.jsx(q2,{items:n.map(h=>h.id),strategy:z2,children:g.jsx("div",{className:"absolute inset-0 flex",children:n.map((h,f)=>g.jsx($7,{section:h,allSections:n,totalMeasures:o,isActive:h.id===e,isLast:f===n.length-1,onClick:()=>t?.(h.id)},h.id))})}),g.jsx(Uw,{dropAnimation:{duration:200,easing:"ease-out"},children:null})]}),g.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-white/10 pointer-events-none"})]}),a&&g.jsx("button",{onClick:a,className:Rt("shrink-0 w-6 h-6 rounded-lg","flex items-center justify-center","bg-accent-primary/20 border border-accent-primary/30","text-accent-primary hover:bg-accent-primary/30","transition-all hover:scale-105 active:scale-95"),title:"Add new section",children:g.jsx(Mc,{size:14})})]}),g.jsxs("div",{className:"relative w-full h-1.5 flex justify-between px-0.5 mt-0.5",children:[g.jsx("div",{className:"w-px h-full bg-white/20"}),g.jsx("div",{className:"w-px h-full bg-white/20"})]})]})},Y7=[[4,4],[3,4],[5,4],[2,4],[6,8]],by=[{name:"Intro",type:"intro"},{name:"Verse",type:"verse"},{name:"Pre-Chorus",type:"pre-chorus"},{name:"Chorus",type:"chorus"},{name:"Bridge",type:"bridge"},{name:"Interlude",type:"interlude"},{name:"Solo",type:"solo"},{name:"Breakdown",type:"breakdown"},{name:"Tag",type:"tag"},{name:"Hook",type:"hook"},{name:"Outro",type:"outro"}],X7=({section:n,isOpen:e,onClose:t,onTimeSignatureChange:s,onBarsChange:a,onStepCountChange:o,onNameChange:u,onCopy:c,onClear:h,onDelete:f,songTimeSignature:p,onNavigatePrev:y,onNavigateNext:_,hasPrev:b=!1,hasNext:A=!1,sectionIndex:N,totalSections:k,onSlotClick:T,onMoveUp:R,onMoveDown:D})=>{const V=ee.useRef(null),{currentSong:F,reorderSections:W,addSuggestedSection:H}=ln(),L=n.timeSignature||p,B=`${L[0]}/${L[1]}`,te=n.measures.length,j=n.measures[0]?.beats.length??1,I=xw(L);return ee.useEffect(()=>{if(!e)return;const K=P=>{P.key==="Escape"&&t()};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[e,t]),e?Ho.createPortal(g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:t}),y&&g.jsx("button",{onClick:y,disabled:!b,className:Rt("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",b?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{left:"calc(50% - min(150px, 45vw) - 52px)"},title:"Previous Section",children:g.jsx(Gh,{size:24})}),_&&g.jsx("button",{onClick:_,disabled:!A,className:Rt("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",A?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{right:"calc(50% - min(150px, 45vw) - 52px)"},title:"Next Section",children:g.jsx(Wh,{size:24})}),g.jsxs("div",{ref:V,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"260px",maxWidth:"300px",width:"90vw"},children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[g.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[N!==void 0&&k!==void 0&&g.jsxs("div",{className:"h-5 px-2 rounded-full flex items-center justify-center gap-0.5 font-bold text-white shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 0 8px rgba(99,102,241,0.4)"},title:`Section ${N+1} of ${k}`,children:[g.jsx("span",{className:"text-[10px]",children:N+1}),g.jsx("span",{className:"text-[6px] opacity-60 font-medium",children:"of"}),g.jsx("span",{className:"text-[10px]",children:k})]}),(N===void 0||k===void 0)&&g.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),u?g.jsx("select",{value:n.type,onChange:K=>{const P=by.find(ie=>ie.type===K.target.value);P&&u(P.name,P.type)},className:`bg-transparent text-sm font-bold text-text-primary 
                                           focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                           appearance-none cursor-pointer pr-5`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0 center"},children:by.map(K=>g.jsx("option",{value:K.type,className:"bg-bg-secondary",children:K.name},K.type))}):g.jsx("span",{className:"text-sm font-bold text-text-primary",children:n.name})]}),g.jsx("button",{onClick:t,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:g.jsx(Lc,{size:14})})]}),g.jsx("div",{className:"px-3 py-2 border-b border-border-subtle bg-black/10",children:g.jsx(Xw,{sections:F.sections,activeSectionId:n.id,onReorder:K=>{W(K)},onAddSection:H,onSectionClick:K=>{if(_&&y){const P=F.sections.findIndex(X=>X.id===K),ie=F.sections.findIndex(X=>X.id===n.id);if(P>ie&&_)for(let X=ie;X<P;X++)_();else if(P<ie&&y)for(let X=ie;X>P;X--)y()}}})}),g.jsxs("div",{className:"p-4 space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Time Sig"}),g.jsx("div",{className:"relative",children:g.jsx("select",{value:B,onChange:K=>s(K.target.value),className:`w-full h-8 bg-bg-tertiary text-text-primary text-xs font-bold rounded-lg 
                                               px-3 border border-border-subtle 
                                               focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                               appearance-none cursor-pointer`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",paddingRight:"24px"},children:Y7.map(([K,P])=>g.jsxs("option",{value:`${K}/${P}`,className:"bg-bg-secondary",children:[K,"/",P]},`${K}/${P}`))})})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Length"}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:()=>a(Math.max(1,te-1)),disabled:te<=1,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:""}),g.jsx("span",{className:"flex-1 text-center text-sm font-bold text-text-primary tabular-nums",children:te}),g.jsx("button",{onClick:()=>a(Math.min(32,te+1)),disabled:te>=32,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:"+"})]})]})]}),o&&g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"block text-center text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Steps Per Bar"}),g.jsx("div",{className:"flex items-center gap-1.5 justify-center",children:I.map(K=>{const P=xg(K,L),ie=K===j;return g.jsx("button",{onClick:()=>o(K),className:Rt("flex items-center justify-center rounded-lg transition-all","w-11 h-11 active:scale-95",ie?"bg-accent-primary text-white shadow-lg border-2 border-accent-primary":"bg-bg-tertiary border border-border-subtle text-text-muted hover:text-text-primary hover:bg-bg-secondary"),title:`${K} step${K>1?"s":""} per measure`,children:g.jsx(yg,{type:P,size:24})},K)})})]}),g.jsx(nj,{section:n,songTimeSignature:p,className:"pt-1",onSlotClick:T}),g.jsxs("div",{className:"space-y-2 pt-2",children:[R&&D&&g.jsxs("div",{className:"flex gap-2",children:[g.jsxs("button",{onClick:()=>{R()},disabled:!b,className:Rt("flex-1 flex items-center justify-center gap-1.5","px-2 py-2 rounded-lg","transition-all text-xs font-bold active:scale-95",b?"bg-blue-500/10 border border-blue-500/30 text-blue-400 hover:bg-blue-500/20":"bg-bg-tertiary border border-border-subtle text-text-muted opacity-40 cursor-not-allowed"),title:"Move section earlier in song",children:[g.jsx(VT,{size:14}),"Move Up"]}),g.jsxs("button",{onClick:()=>{D()},disabled:!A,className:Rt("flex-1 flex items-center justify-center gap-1.5","px-2 py-2 rounded-lg","transition-all text-xs font-bold active:scale-95",A?"bg-blue-500/10 border border-blue-500/30 text-blue-400 hover:bg-blue-500/20":"bg-bg-tertiary border border-border-subtle text-text-muted opacity-40 cursor-not-allowed"),title:"Move section later in song",children:[g.jsx(IT,{size:14}),"Move Down"]})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[g.jsxs("button",{onClick:()=>{c()},className:`flex items-center justify-center gap-1.5
                                           px-2 py-2.5 rounded-lg
                                           bg-accent-primary/10 border border-accent-primary/30
                                           text-accent-primary hover:bg-accent-primary/20
                                           transition-all text-xs font-bold active:scale-95`,children:[g.jsx(XT,{size:14}),"Duplicate"]}),g.jsxs("button",{onClick:()=>{h()},className:`flex items-center justify-center gap-1.5
                                           px-2 py-2.5 rounded-lg
                                           bg-yellow-500/10 border border-yellow-500/30
                                           text-yellow-400 hover:bg-yellow-500/20
                                           transition-all text-xs font-bold active:scale-95`,children:[g.jsx(QT,{size:14}),"Clear"]}),g.jsxs("button",{onClick:()=>{f()},className:`flex items-center justify-center gap-1.5
                                           px-2 py-2.5 rounded-lg
                                           bg-red-500/10 border border-red-500/30
                                           text-red-400 hover:bg-red-500/20
                                           transition-all text-xs font-bold active:scale-95`,children:[g.jsx(gg,{size:14}),"Remove"]})]})]})]})]})]}),document.body):null},Z7={intro:"Intro",verse:"Verse","pre-chorus":"Pre-Chorus",chorus:"Chorus",bridge:"Bridge",interlude:"Interlude",solo:"Solo",breakdown:"Breakdown",tag:"Tag",hook:"Hook",outro:"Outro"};function Rh(n,e){const t=Z7[n.type],s=e.filter(o=>o.type===n.type);if(s.length<=1)return t;const a=s.findIndex(o=>o.id===n.id);return`${t} ${a+1}`}const K7=({section:n,allSections:e,isActive:t,isDesktop:s,onActivate:a,onEdit:o,onDelete:u})=>{const{attributes:c,listeners:h,setNodeRef:f,transform:p,transition:y,isDragging:_}=U2({id:n.id}),b={transform:$o.Transform.toString(p),transition:y},A=Rh(n,e),N=A.charAt(0).toUpperCase();return g.jsxs("div",{ref:f,"data-section-id":n.id,className:Rt("relative shrink-0",_&&"opacity-50 scale-95 z-50"),style:b,children:[g.jsx("button",{onClick:()=>{_||(t?o():a())},className:Rt("no-touch-enlarge relative font-semibold transition-all touch-feedback","flex items-center justify-center select-none",t?Rt("rounded-full text-white shadow-lg whitespace-nowrap overflow-hidden",s?"w-32 h-9 text-xs":"w-24 h-8 text-[11px]"):Rt("rounded-full text-text-secondary hover:text-text-primary border border-border-medium hover:border-border-subtle hover:bg-bg-tertiary",s?"w-9 h-9 text-sm":"w-8 h-8 text-xs")),style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",...t?{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 16px rgba(99, 102, 241, 0.5), inset 0 1px 0 rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.2)"}:void 0},title:`${A} - Hold center to drag`,children:t?g.jsxs("span",{className:"flex items-center gap-1 px-2 truncate pointer-events-none",children:[g.jsx("span",{className:"truncate",children:A}),g.jsx("span",{className:"pointer-events-auto cursor-pointer hover:opacity-100 p-0.5 -m-0.5 rounded transition-opacity",onClick:k=>{k.stopPropagation(),o()},children:g.jsx(ow,{size:s?14:12,className:"opacity-70 hover:opacity-100 shrink-0"})})]}):N}),g.jsx("div",{...c,...h,onClick:()=>{_||(t?o():a())},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 touch-none draggable-element cursor-grab active:cursor-grabbing",style:{width:t?s?"60px":"50px":s?"24px":"20px",height:s?"24px":"20px",WebkitTouchCallout:"none",WebkitUserSelect:"none"},title:"Hold to drag"})]})},Ng=({isOpen:n,onToggle:e,hideCloseButton:t=!1,isCompact:s=!1,isLandscape:a=!1})=>{const{currentSong:o,selectedSectionId:u,selectedSlotId:c,setSelectedSlot:h,selectSlotOnly:f,setSelectedChord:p,playingSectionId:y,playingSlotId:_,isPlaying:b,addSuggestedSection:A,setSectionTimeSignature:N,setSectionMeasures:k,setSectionSubdivision:T,removeSection:R,duplicateSection:D,clearSection:V,setMeasureSubdivision:F,selectedChord:W,addChordToSlot:H,toggleSongMap:L,updateSection:B,undo:te,redo:j,canUndo:I,canRedo:K,clearSlot:P,reorderSections:ie}=ln(),X=o.timeSignature,re=Yh(),le=ee.useRef(null),fe=ee.useRef(null),{isMobile:Se}=ju(),z=!Se,[M,$]=Cn.useState(0),G=ee.useRef(0),[J,ae]=Cn.useState(0),pe=ee.useRef(0),[de,xe]=Cn.useState(0),Ne=ee.useRef(!1),[Be,Qe]=Cn.useState(null),Xe=ee.useRef(null),[st,Y]=ee.useState(null),Ie=R2(El(Lf,{activationConstraint:{distance:10}}),El(o0,{activationConstraint:{delay:200,tolerance:20}}),El(Mf,{coordinateGetter:H2})),dt=Me=>{Y(Me.active.id)},et=Me=>{const{active:ut,over:ot}=Me;if(Y(null),ot&&ut.id!==ot.id){const We=o.sections.findIndex(bt=>bt.id===ut.id),at=o.sections.findIndex(bt=>bt.id===ot.id);if(We!==-1&&at!==-1){const bt=Df(o.sections,We,at);ie(bt),$(at);const lt=o.sections[We];lt&&lt.measures[0]?.beats[0]&&h(lt.id,lt.measures[0].beats[0].id)}}};ee.useEffect(()=>{if(!b&&u&&fe.current){const Me=o.sections.findIndex(ut=>ut.id===u);Me!==-1&&($(Me),setTimeout(()=>{if(fe.current){const ut=fe.current.querySelector(`[data-section-id="${u}"]`);ut&&ut.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},100))}},[u,o.sections,b]),ee.useEffect(()=>{if(b&&y){const Me=o.sections.findIndex(ut=>ut.id===y);Me!==-1&&Me!==M&&$(Me)}},[b,y,o.sections,M]),ee.useEffect(()=>{if(_&&le.current){const Me=le.current.querySelector(`[data-slot-id="${_}"]`);Me&&Me.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[_]),ee.useEffect(()=>{if(!n||!c||b)return;const Me=setTimeout(()=>{if(le.current){const ut=le.current.querySelector(`[data-slot-id="${c}"]`);ut&&ut.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},250);return()=>clearTimeout(Me)},[c,b,n]);const ge=Me=>{G.current=Me.touches[0].clientY},qe=Me=>{const ut=Me.touches[0].clientY-G.current;ut>0&&ae(Math.min(ut,100))},Re=()=>{J>50&&e(),ae(0)},nt=Me=>{pe.current=Me.touches[0].clientY},ct=Me=>{const ut=pe.current-Me.touches[0].clientY;ut>0&&xe(Math.min(ut,60))},vt=()=>{de>30&&e(),xe(0)},It=Me=>{Ne.current=!0,pe.current=Me.clientY,Me.preventDefault()};ee.useEffect(()=>{const Me=ot=>{if(!Ne.current)return;const We=pe.current-ot.clientY;We>0&&xe(Math.min(We,60))},ut=()=>{Ne.current&&(de>30&&e(),xe(0),Ne.current=!1)};return document.addEventListener("mousemove",Me),document.addEventListener("mouseup",ut),()=>{document.removeEventListener("mousemove",Me),document.removeEventListener("mouseup",ut)}},[de,e]);const St=Me=>{if(re[Me])return re[Me];const ut=xu(Me);for(const ot of Object.keys(re))if(xu(ot)===ut)return re[ot];return"hsl(230, 60%, 50%)"},Ft=(Me,ut,ot)=>{const We=u===Me&&c===ut,at=Date.now();if(ot&&Xe.current&&Xe.current.slotId===ut&&at-Xe.current.time<400){W&&(H(W,Me,ut),f(Me,ut)),Xe.current=null;return}ot?(ot.notes&&ot.notes.length>0&&Br(ot.notes),We?p(ot):f(Me,ut),Xe.current={slotId:ut,time:at}):(We&&W?H(W,Me,ut):f(Me,ut),Xe.current=null)},jt=Me=>{const ut=Me==="prev"?Math.max(0,M-1):Math.min(o.sections.length-1,M+1);$(ut);const ot=o.sections[ut];ot&&ot.measures[0]?.beats[0]&&h(ot.id,ot.measures[0].beats[0].id)},yt=Me=>{if(!fe.current)return;const ut=fe.current,ot=120,We=ut.scrollWidth-ut.clientWidth,at=ut.scrollLeft;let bt;Me==="left"?bt=Math.max(0,at-ot):bt=Math.min(We,at+ot),ut.scrollTo({left:bt,behavior:"smooth"})},xt=o.sections[M];return n?g.jsxs("div",{"data-mobile-timeline":!0,className:Rt("relative w-full bg-bg-secondary border-t-2 border-border-subtle overflow-hidden flex flex-col mobile-timeline-drawer",a&&"h-full",t&&"h-full border-t-0"),style:{maxHeight:a||t?void 0:"140px",transform:J>0?`translateY(${J}px)`:void 0,opacity:J>0?Math.max(.5,1-J/150):1,transition:J===0?"all 0.2s ease-out":"none"},children:[!t&&g.jsx("div",{className:"flex flex-col items-center pt-2 pb-2.5 cursor-grab active:cursor-grabbing shrink-0",onTouchStart:ge,onTouchMove:qe,onTouchEnd:Re,children:g.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40"})}),s?g.jsxs("div",{className:"relative flex items-center justify-center shrink-0 px-1 py-1",children:[g.jsx("button",{onClick:()=>L(!0),className:"absolute left-1 rounded text-text-muted hover:text-accent-primary touch-feedback flex items-center justify-center w-5 h-5",title:"Song Overview",children:g.jsx(xp,{size:12})}),g.jsxs("div",{className:"flex items-center justify-center gap-1",children:[g.jsx("button",{onClick:()=>jt("prev"),disabled:M===0,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:g.jsx(Gh,{size:14})}),g.jsx("div",{className:"relative",children:g.jsxs("button",{onClick:()=>xt&&Qe(xt.id),className:"flex items-center justify-center gap-0.5 px-2 py-1 rounded-full text-white font-semibold text-[10px]",style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)",border:"1px solid rgba(255,255,255,0.2)"},title:xt?Rh(xt,o.sections):"Section",children:[g.jsxs("span",{className:"flex items-baseline",children:[g.jsx("span",{children:xt?Rh(xt,o.sections).charAt(0).toUpperCase():"S"}),g.jsx("span",{className:"text-[7px] opacity-60 ml-0.5",children:M+1})]}),g.jsx(ow,{size:10,className:"opacity-70 shrink-0"})]})}),g.jsx("button",{onClick:()=>jt("next"),disabled:M===o.sections.length-1,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:g.jsx(Wh,{size:14})})]}),g.jsxs("div",{className:"absolute right-1 flex items-center gap-0.5",children:[g.jsx("button",{onClick:te,disabled:!I,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo",children:g.jsx(_p,{size:10})}),g.jsx("button",{onClick:j,disabled:!K,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo",children:g.jsx($h,{size:10})})]})]}):g.jsxs("div",{className:Rt("flex items-center justify-between shrink-0",z?"px-3 py-1":"px-2 pb-1.5"),children:[g.jsxs("div",{className:"flex items-center shrink-0",children:[g.jsx("button",{onClick:()=>L(!0),className:Rt("no-touch-enlarge rounded text-text-muted hover:text-accent-primary touch-feedback shrink-0 mr-0.5",z?"p-2":"p-1.5"),title:"Song Overview",children:g.jsx(xp,{size:z?18:16})}),g.jsxs("div",{className:"flex items-center gap-0.5 ml-1",children:[g.jsx("button",{onClick:te,disabled:!I,className:Rt("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",z?"w-8 h-8":"w-7 h-7"),title:"Undo",children:g.jsx(_p,{size:z?14:12})}),g.jsx("button",{onClick:j,disabled:!K,className:Rt("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",z?"w-8 h-8":"w-7 h-7"),title:"Redo",children:g.jsx($h,{size:z?14:12})})]})]}),g.jsx("button",{onClick:()=>yt("left"),className:Rt("no-touch-enlarge rounded text-text-muted hover:text-text-primary touch-feedback",z?"p-2":"p-1.5"),title:"Scroll sections left",children:g.jsx(Gh,{size:z?18:16})}),g.jsxs(P2,{sensors:Ie,collisionDetection:I2,onDragStart:dt,onDragEnd:et,children:[g.jsxs("div",{ref:fe,className:Rt("flex-1 flex items-center overflow-x-auto scrollbar-hide px-1 mx-1",z?"gap-2":"gap-1.5"),children:[g.jsx(q2,{items:o.sections.map(Me=>Me.id),strategy:z2,children:o.sections.map((Me,ut)=>g.jsx(K7,{section:Me,allSections:o.sections,isActive:ut===M,isDesktop:z,onActivate:()=>{$(ut),Me.measures[0]?.beats[0]&&h(Me.id,Me.measures[0].beats[0].id)},onEdit:()=>Qe(Me.id),onDelete:()=>R(Me.id)},Me.id))}),g.jsx("button",{onClick:()=>A(),className:Rt("no-touch-enlarge rounded-full text-text-muted hover:text-accent-primary touch-feedback shrink-0 border border-dashed border-border-medium hover:border-accent-primary/50 transition-all hover:bg-accent-primary/10 flex items-center justify-center",z?"w-9 h-9":"w-8 h-8"),title:"Add section",children:g.jsx(Mc,{size:z?14:12})})]}),g.jsx(Uw,{children:st?g.jsx("div",{className:Rt("rounded-full text-white font-semibold shadow-2xl flex items-center justify-center",z?"w-32 h-9 text-xs":"w-24 h-8 text-[11px]"),style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 24px rgba(99, 102, 241, 0.7), inset 0 1px 0 rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",transform:"scale(1.05) rotate(3deg)"},children:(()=>{const Me=o.sections.find(ut=>ut.id===st);return Me?Rh(Me,o.sections):""})()}):null})]}),g.jsx("button",{onClick:()=>yt("right"),className:Rt("no-touch-enlarge rounded text-text-muted hover:text-text-primary touch-feedback",z?"p-2":"p-1.5"),title:"Scroll sections right",children:g.jsx(Wh,{size:z?18:16})})]}),g.jsx("div",{ref:le,className:Rt("flex-1",z?"px-3 pb-2 pt-3":"px-1 pb-1 pt-3",a?"overflow-y-auto overflow-x-hidden":"overflow-x-auto overflow-y-hidden"),children:xt&&g.jsx("div",{className:Rt(a?s?"flex flex-col gap-0":"grid grid-cols-4 gap-0.5":Rt("flex flex-row items-center",z?"gap-1.5":"gap-0.5")),children:xt.measures.map((Me,ut)=>g.jsxs(Cn.Fragment,{children:[g.jsxs("div",{className:Rt("flex items-center",a?s?"gap-0.5 w-full min-w-0":"gap-0.5":z?"gap-1 shrink-0":"gap-0.5 shrink-0"),children:[g.jsxs("div",{className:Rt("flex flex-col items-center justify-center shrink-0",a?"gap-0 w-4":z?"gap-0 w-6":"gap-0 w-5"),children:[g.jsx("span",{className:Rt("font-mono text-text-muted text-center leading-none",z?"text-[9px]":a?"text-[7px]":"text-[8px]"),children:ut+1}),g.jsx(tj,{value:Me.beats.length,onChange:ot=>F(xt.id,Me.id,ot),timeSignature:xt.timeSignature||[4,4],isCompact:a})]}),g.jsx("div",{className:Rt("flex items-center",a?s?`flex-1 gap-0.5 min-w-0 ${Me.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:`flex-1 gap-0.5 min-w-0 ${Me.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:"gap-0.5"),children:Me.beats.map(ot=>{const We=u===xt.id&&c===ot.id,at=b&&y===xt.id&&_===ot.id,bt=ot.chord?St(ot.chord.root):void 0,lt=Me.beats.length;let tn,Ct;a&&lt>4&&(tn=Math.max(22,Math.floor(160/lt)),Ct=Math.max(18,Math.floor(120/lt)));const Vt=z?48:36,Jt=4/lt,wt=Math.round(Vt*Jt),pt=Math.max(z?36:28,Math.min(z?192:144,wt)),qt=z?40:a&&s?lt<=4?26:24:32;return g.jsxs("button",{"data-slot-id":ot.id,onClick:()=>Ft(xt.id,ot.id,ot.chord),className:Rt("no-touch-enlarge relative flex items-center justify-center rounded-md transition-all touch-feedback group",a&&lt<=4?"flex-1 min-w-0":"shrink-0",at&&"ring-2 ring-green-500 ring-offset-1 ring-offset-bg-primary shadow-[0_0_12px_rgba(34,197,94,0.5)] scale-105 z-10",We&&!at&&"ring-2 ring-accent-primary ring-offset-1 ring-offset-bg-primary",!ot.chord&&"border-2 border-dashed border-border-medium bg-bg-elevated hover:border-text-muted"),style:{height:`${qt}px`,...a&&tn?{width:`${tn}px`,minWidth:`${Ct}px`}:{},...a?{}:{width:`${pt}px`,minWidth:`${pt}px`},...ot.chord?{backgroundColor:"rgba(0, 0, 0, 0.3)",border:`2px solid ${bt}`}:{}},children:[ot.chord?g.jsx("span",{className:Rt("font-bold px-0.5 truncate",z?"text-xs":a?lt>=8?"text-[7px]":lt>=4?"text-[8px]":"text-[9px]":"text-[10px]"),style:{color:bt},children:Ln(ot.chord.symbol)}):g.jsx("span",{className:Rt("text-text-muted font-light",a?lt>=8?"text-xs":"text-sm":"text-base"),children:"+"}),at&&g.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-green-500 flex items-center justify-center",children:g.jsx(nd,{size:6,fill:"white",className:"text-white"})}),ot.chord&&!at&&(We||z)&&g.jsx("div",{onClick:wn=>{wn.stopPropagation(),P(xt.id,ot.id)},className:Rt("absolute rounded-full bg-black/70 backdrop-blur-sm flex items-center justify-center cursor-pointer border border-white/30 active:bg-white/30",z?Rt("w-4 h-4 -top-2 -right-2 hover:bg-white/20 hover:border-white/50 transition-all z-30",We?"opacity-100":"opacity-0 group-hover:opacity-100"):"w-5 h-5 -top-2.5 -right-2.5 opacity-100 z-30"),title:"Remove chord",children:g.jsx("span",{className:Rt("text-white/90 font-bold leading-none",z?"text-[10px]":"text-xs"),children:""})})]},ot.id)})})]}),!s&&!a&&ut<xt.measures.length-1&&g.jsx("div",{className:"w-px h-5 bg-border-medium shrink-0"})]},Me.id))})}),Be&&(()=>{const Me=o.sections.findIndex(We=>We.id===Be),ut=Me>0,ot=Me<o.sections.length-1;return g.jsx(X7,{section:o.sections.find(We=>We.id===Be),isOpen:!0,onClose:()=>Qe(null),onTimeSignatureChange:We=>{const[at,bt]=We.split("/").map(lt=>parseInt(lt,10));at&&bt&&Be&&N(Be,[at,bt])},onBarsChange:We=>{Be&&k(Be,We)},onStepCountChange:We=>{Be&&T(Be,We)},onNameChange:(We,at)=>{Be&&B(Be,{name:We,type:at})},onCopy:()=>{Be&&D(Be)},onClear:()=>{Be&&V(Be)},onDelete:()=>{if(Be){const We=o.sections.findIndex(bt=>bt.id===Be);let at=null;if(o.sections.length>1&&(We<o.sections.length-1?at=o.sections[We+1].id:at=o.sections[We-1].id),R(Be),Qe(at),at){o.sections.findIndex(lt=>lt.id===at);const bt=We<o.sections.length-1?We:Math.max(0,We-1);$(bt)}}},songTimeSignature:X||[4,4],onNavigatePrev:()=>{if(ut){const We=o.sections[Me-1];Qe(We.id),$(Me-1)}},onNavigateNext:()=>{if(ot){const We=o.sections[Me+1];Qe(We.id),$(Me+1)}},hasPrev:ut,hasNext:ot,sectionIndex:Me,totalSections:o.sections.length,onSlotClick:We=>{Qe(null),$(Me),f(Be,We)},onMoveUp:()=>{if(ut&&Be){const We=[...o.sections],at=We[Me];We[Me]=We[Me-1],We[Me-1]=at,ie(We),$(Me-1)}},onMoveDown:()=>{if(ot&&Be){const We=[...o.sections],at=We[Me];We[Me]=We[Me+1],We[Me+1]=at,ie(We),$(Me+1)}}})})()]}):g.jsxs("div",{"data-mobile-timeline":!0,className:"w-full h-12 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing touch-feedback select-none",onClick:()=>{!Ne.current&&de===0&&e()},onTouchStart:nt,onTouchMove:ct,onTouchEnd:vt,onMouseDown:It,style:{transform:de>0?`translateY(-${de}px)`:void 0,opacity:de>0?Math.min(1,.7+de/100):1,transition:de===0?"all 0.2s ease-out":"none"},children:[g.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40 mb-1.5"}),g.jsx("span",{className:"text-[10px] font-medium text-text-muted uppercase tracking-wider",children:"Timeline"})]})},Ag=({highlightedNotes:n,rootNote:e,bassNote:t,color:s="#6366f1",octave:a=4,onNotePlay:o})=>{const u=["C","D","E","F","G","A","B"],c=T=>{const R={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},D=T.replace(/\d+/g,"");return R[D]??-1},h=n.map(T=>c(T)),f=e?c(e):-1,p=t?c(t):-1,y=T=>{const R=c(T);return R!==-1&&h.includes(R)},_=T=>f===-1?!1:c(T)===f,b=T=>p===-1?!1:c(T)===p,A=(T,R)=>{o&&o(T,R)},N=()=>{const T=[];for(let D=0;D<2;D++){const V=a+D;u.forEach(F=>{const W=y(F),H=_(F),L=b(F);T.push(g.jsx("div",{className:"h-full rounded-b-md relative border-x border-b border-gray-400 cursor-pointer hover:brightness-95 active:brightness-90 transition-all",style:{width:`${100/14}%`,background:"linear-gradient(180deg, #fafafa 0%, #e8e8e8 70%, #d0d0d0 100%)",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.9), inset 0 -2px 4px rgba(0,0,0,0.08)"},onClick:()=>A(F,V),children:W&&g.jsxs(g.Fragment,{children:[H&&g.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"3px",transform:"translateX(-50%)",width:"18px",height:"18px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),g.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"6px",transform:"translateX(-50%)",width:L?"14px":H?"12px":"9px",height:L?"14px":H?"12px":"9px",background:s,border:L?"3px solid #000":"2px solid #000",boxShadow:L?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`white-${D}-${F}`))})}return T},k=()=>{const T=[],R=[{note:"C#",offset:7.14},{note:"D#",offset:14.28},{note:"F#",offset:28.57},{note:"G#",offset:35.71},{note:"A#",offset:42.85}];for(let D=0;D<2;D++){const V=D*50,F=a+D;R.forEach(({note:W,offset:H})=>{const L=y(W),B=_(W),te=b(W),j=V+H;T.push(g.jsx("div",{className:"absolute top-0 rounded-b-md cursor-pointer hover:brightness-125 active:brightness-150 transition-all",style:{left:`${j}%`,width:"5.5%",height:"58%",transform:"translateX(-50%)",background:"linear-gradient(180deg, #333 0%, #1a1a1a 70%, #0a0a0a 100%)",boxShadow:"0 3px 6px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.08)",pointerEvents:"auto"},onClick:()=>A(W,F),children:L&&g.jsxs(g.Fragment,{children:[B&&g.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"1px",transform:"translateX(-50%)",width:"16px",height:"16px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),g.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"4px",transform:"translateX(-50%)",width:te?"12px":B?"10px":"8px",height:te?"12px":B?"10px":"8px",background:s,border:te?"3px solid #fff":"2px solid #fff",boxShadow:te?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`black-${D}-${W}`))})}return T};return g.jsx("div",{className:"relative w-full rounded-lg select-none overflow-hidden",style:{height:"80px",minHeight:"80px",background:"#1a1a22",boxShadow:"inset 0 2px 8px rgba(0,0,0,0.6)",padding:"3px 2px 2px 2px"},children:g.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[g.jsx("div",{className:"flex w-full h-full gap-[1px]",style:{position:"relative",zIndex:0},children:N()}),g.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,pointerEvents:"none"},children:k()})]})})},Q7={C:{maj:[{frets:[-1,3,2,0,1,0],fingers:[0,3,2,0,1,0],barres:[],baseFret:1}],m:[{frets:[-1,3,1,0,1,3],fingers:[0,3,1,0,2,4],barres:[],baseFret:1}],7:[{frets:[-1,3,2,3,1,0],fingers:[0,3,2,4,1,0],barres:[],baseFret:1}],maj7:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj9:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,3,2,2,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],m7:[{frets:[-1,3,1,3,1,3],fingers:[0,2,1,3,1,4],barres:[1],baseFret:3}],m9:[{frets:[-1,3,1,3,3,3],fingers:[0,2,1,3,4,4],barres:[],baseFret:3}],m11:[{frets:[-1,3,1,3,3,1],fingers:[0,2,1,3,4,1],barres:[1],baseFret:3}],m6:[{frets:[-1,3,1,2,1,3],fingers:[0,3,1,2,1,4],barres:[1],baseFret:1}],sus2:[{frets:[-1,3,0,0,1,3],fingers:[0,2,0,0,1,3],barres:[],baseFret:1}],sus4:[{frets:[-1,3,3,0,1,1],fingers:[0,3,4,0,1,1],barres:[1],baseFret:1}],dim:[{frets:[-1,3,1,-1,1,2],fingers:[0,4,1,0,2,3],barres:[],baseFret:1}],6:[{frets:[-1,3,2,2,1,0],fingers:[0,4,2,3,1,0],barres:[],baseFret:1}],add9:[{frets:[-1,3,2,0,3,0],fingers:[0,2,1,0,3,0],barres:[],baseFret:1}],9:[{frets:[-1,3,2,3,3,0],fingers:[0,2,1,3,4,0],barres:[],baseFret:1}],11:[{frets:[-1,3,2,3,3,3],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],13:[{frets:[-1,3,2,3,3,5],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,3,4,3,4,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},"C#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},Db:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},D:{maj:[{frets:[-1,-1,0,2,3,2],fingers:[0,0,0,1,3,2],barres:[],baseFret:1}],m:[{frets:[-1,-1,0,2,3,1],fingers:[0,0,0,2,3,1],barres:[],baseFret:1}],7:[{frets:[-1,-1,0,2,1,2],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],maj7:[{frets:[-1,-1,0,2,2,2],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],maj9:[{frets:[-1,-1,0,2,2,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],maj13:[{frets:[-1,-1,0,2,2,4],fingers:[0,0,0,1,1,3],barres:[2],baseFret:1}],m7:[{frets:[-1,-1,0,2,1,1],fingers:[0,0,0,2,1,1],barres:[1],baseFret:1}],m9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],m11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m6:[{frets:[-1,-1,0,2,0,1],fingers:[0,0,0,2,0,1],barres:[],baseFret:1}],sus2:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],sus4:[{frets:[-1,-1,0,2,3,3],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,1,3,1],fingers:[0,0,0,1,4,2],barres:[],baseFret:1}],6:[{frets:[-1,-1,0,2,0,2],fingers:[0,0,0,1,0,2],barres:[],baseFret:1}],add9:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],13:[{frets:[-1,-1,0,2,1,4],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,1,1,1],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}]},"D#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},Eb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},E:{maj:[{frets:[0,2,2,1,0,0],fingers:[0,2,3,1,0,0],barres:[],baseFret:1}],m:[{frets:[0,2,2,0,0,0],fingers:[0,2,3,0,0,0],barres:[],baseFret:1}],7:[{frets:[0,2,0,1,0,0],fingers:[0,2,0,1,0,0],barres:[],baseFret:1}],maj7:[{frets:[0,2,1,1,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],maj9:[{frets:[0,2,1,1,0,2],fingers:[0,2,1,1,0,3],barres:[1],baseFret:1}],maj13:[{frets:[0,2,1,1,2,2],fingers:[0,2,1,1,3,3],barres:[],baseFret:1}],m7:[{frets:[0,2,0,0,0,0],fingers:[0,1,0,0,0,0],barres:[],baseFret:1}],m9:[{frets:[0,2,0,0,0,2],fingers:[0,2,0,0,0,3],barres:[],baseFret:1}],m11:[{frets:[0,2,0,0,3,0],fingers:[0,2,0,0,4,0],barres:[],baseFret:1}],m6:[{frets:[0,2,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],sus2:[{frets:[0,2,4,4,0,0],fingers:[0,1,3,4,0,0],barres:[],baseFret:1}],sus4:[{frets:[0,2,2,2,0,0],fingers:[0,2,3,4,0,0],barres:[],baseFret:1}],dim:[{frets:[0,1,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],6:[{frets:[0,2,2,1,2,0],fingers:[0,2,3,1,4,0],barres:[],baseFret:1}],add9:[{frets:[0,2,2,1,0,2],fingers:[0,2,3,1,0,4],barres:[],baseFret:1}],9:[{frets:[0,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],11:[{frets:[0,2,0,1,3,0],fingers:[0,2,0,1,4,0],barres:[],baseFret:1}],13:[{frets:[0,2,0,1,2,2],fingers:[0,2,0,1,3,4],barres:[],baseFret:1}],m7b5:[{frets:[0,1,0,0,2,0],fingers:[0,1,0,0,2,0],barres:[],baseFret:1}]},F:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:1}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:1}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,-1,3,2,1,0],fingers:[0,0,3,2,1,0],barres:[],baseFret:1}],maj9:[{frets:[1,0,3,0,1,0],fingers:[1,0,3,0,2,0],barres:[],baseFret:1}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:1}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:1}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:1}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,-1,3,0,1,1],fingers:[0,0,3,0,1,1],barres:[1],baseFret:1}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:1}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:1}],6:[{frets:[1,-1,0,2,1,1],fingers:[1,0,0,3,1,1],barres:[1],baseFret:1}],add9:[{frets:[-1,-1,3,2,1,3],fingers:[0,0,3,2,1,4],barres:[],baseFret:1}],9:[{frets:[1,3,1,2,1,3],fingers:[1,3,1,2,1,4],barres:[1],baseFret:1}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:1}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:1}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}]},"F#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},Gb:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},G:{maj:[{frets:[3,2,0,0,0,3],fingers:[2,1,0,0,0,3],barres:[],baseFret:1}],m:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],7:[{frets:[3,2,0,0,0,1],fingers:[3,2,0,0,0,1],barres:[],baseFret:1}],maj7:[{frets:[3,2,0,0,0,2],fingers:[3,1,0,0,0,2],barres:[],baseFret:1}],maj9:[{frets:[3,0,0,0,0,2],fingers:[2,0,0,0,0,1],barres:[],baseFret:1}],maj13:[{frets:[3,2,0,0,2,2],fingers:[3,1,0,0,2,2],barres:[2],baseFret:1}],m7:[{frets:[3,1,0,0,3,0],fingers:[2,1,0,0,3,0],barres:[],baseFret:1}],m9:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],m11:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],m6:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],sus2:[{frets:[3,0,0,0,3,3],fingers:[1,0,0,0,2,3],barres:[],baseFret:1}],sus4:[{frets:[3,3,0,0,1,3],fingers:[2,3,0,0,1,4],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],6:[{frets:[3,2,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],add9:[{frets:[3,0,0,0,0,3],fingers:[2,0,0,0,0,3],barres:[],baseFret:1}],9:[{frets:[3,2,0,1,0,1],fingers:[3,2,0,1,0,1],barres:[1],baseFret:1}],11:[{frets:[3,2,0,1,3,1],fingers:[3,2,0,1,4,1],barres:[1],baseFret:1}],13:[{frets:[3,2,0,1,0,5],fingers:[2,1,0,1,0,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}]},"G#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},Ab:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},A:{maj:[{frets:[-1,0,2,2,2,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],m:[{frets:[-1,0,2,2,1,0],fingers:[0,0,2,3,1,0],barres:[],baseFret:1}],7:[{frets:[-1,0,2,0,2,0],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}],maj7:[{frets:[-1,0,2,1,2,0],fingers:[0,0,2,1,3,0],barres:[],baseFret:1}],maj9:[{frets:[-1,0,2,1,0,0],fingers:[0,0,2,1,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,0,2,1,2,4],fingers:[0,0,2,1,3,4],barres:[],baseFret:1}],m7:[{frets:[-1,0,2,0,1,0],fingers:[0,0,2,0,1,0],barres:[],baseFret:1}],m9:[{frets:[-1,0,2,0,1,3],fingers:[0,0,2,0,1,4],barres:[],baseFret:1}],m11:[{frets:[-1,0,0,0,1,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],m6:[{frets:[-1,0,2,2,1,2],fingers:[0,0,2,3,1,4],barres:[],baseFret:1}],sus2:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],sus4:[{frets:[-1,0,2,2,3,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],dim:[{frets:[-1,0,1,2,1,-1],fingers:[0,0,1,3,2,0],barres:[],baseFret:1}],6:[{frets:[-1,0,2,2,2,2],fingers:[0,0,1,1,1,1],barres:[2],baseFret:1}],add9:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],9:[{frets:[-1,0,2,4,2,3],fingers:[0,0,1,3,1,2],barres:[2],baseFret:1}],11:[{frets:[-1,0,0,0,2,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],13:[{frets:[-1,0,2,0,2,4],fingers:[0,0,1,0,2,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,0,1,0,1,-1],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}]},"A#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},Bb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},B:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:2}],7:[{frets:[-1,2,1,2,0,2],fingers:[0,2,1,3,0,4],barres:[],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:2}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:2}],m7:[{frets:[-1,2,0,2,0,2],fingers:[0,1,0,2,0,3],barres:[],baseFret:1}],m9:[{frets:[-1,2,0,2,2,2],fingers:[0,1,0,2,3,4],barres:[],baseFret:1}],m11:[{frets:[-1,2,0,2,0,0],fingers:[0,1,0,2,0,0],barres:[],baseFret:1}],m6:[{frets:[-1,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:2}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:2}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,2,1,2,2,2],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],11:[{frets:[-1,2,1,2,0,0],fingers:[0,2,1,3,0,0],barres:[],baseFret:1}],13:[{frets:[-1,2,1,2,2,4],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:2}]}};function J7(n){return{"C":"C#","D":"Db","D":"D#","E":"Eb","F":"F#","G":"Gb","G":"G#","A":"Ab","A":"A#","B":"Bb"}[n]||n.replace("","#").replace("","b")}function eE(n){return{major:"maj",major7:"maj7",major9:"maj9",major11:"maj11",major13:"maj13",major6:"6",minor:"m",min:"m",minor7:"m7",min7:"m7",minor9:"m9",min9:"m9",minor11:"m11",min11:"m11",minor13:"m13",min13:"m13",minor6:"m6",min6:"m6",dom7:"7",dominant7:"7",dom9:"9",dominant9:"9",dom11:"11",dominant11:"11",dom13:"13",dominant13:"13",suspended2:"sus2",suspended4:"sus4",diminished:"dim","half-diminished":"m7b5",halfDiminished7:"m7b5","m75":"m7b5",sixth:"6",ninth:"9",added9:"add9"}[n]||n}function Zw(n,e){const t=J7(n),s=eE(e),a=Q7[t];if(!a)return null;const o=a[s];return!o||o.length===0?null:o[0]}const Cg=({root:n,quality:e,color:t="#6366f1",onClick:s,onDoubleClick:a})=>{const o=L2(),u=Zw(n,e),c=ee.useRef(0),h=ee.useRef(null),f=Ln(`${n}${Mh(e)}`),p=()=>{const N=Date.now(),k=N-c.current;h.current&&(clearTimeout(h.current),h.current=null),k<300&&k>0?(c.current=0,a&&a()):(c.current=N,h.current=setTimeout(()=>{s&&s(),h.current=null},300))},y=ee.useRef(0),_=ee.useRef(null),b=N=>{N.preventDefault(),N.stopPropagation();const k=Date.now(),T=k-y.current;_.current&&(clearTimeout(_.current),_.current=null),T<300&&T>0?(y.current=0,a&&a()):(y.current=k,_.current=setTimeout(()=>{s&&s(),_.current=null},300))};if(!u)return g.jsxs("div",{className:"flex items-center justify-center text-text-muted text-xs py-4",children:["No guitar diagram available for ",n,e]});const A=s||a;return g.jsxs("div",{className:`flex flex-col items-center ${A?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,onClick:A?p:void 0,onTouchEnd:A?b:void 0,onTouchStart:A?N=>N.stopPropagation():void 0,children:[g.jsx("span",{className:`${o?"text-xs":"text-[11px]"} font-bold mb-1 text-center`,style:{backgroundColor:"transparent",color:t,padding:"4px 12px",borderRadius:"10px",border:`2px solid ${t}`},children:f}),g.jsx("svg",{viewBox:"0 0 100 120",className:`w-full ${o?"max-w-[110px]":"max-w-[120px]"}`,style:{minHeight:o?110:120,pointerEvents:"none"},children:g.jsx(tE,{chord:u,color:t})})]})},tE=({chord:n,color:e})=>{const{frets:t,fingers:s,barres:a,baseFret:o}=n,u=20,c=25,h=12,f=18,p=4,y=6,_=4.5,b=Array.from({length:y},(R,D)=>u+D*h),A=Array.from({length:p+1},(R,D)=>c+D*f),N=o===1,k=h*(y-1)+16,T=f*p+8;return g.jsxs(g.Fragment,{children:[g.jsx("rect",{x:u-8,y:c-4,width:k,height:T,fill:"#3d2817",rx:3}),N?g.jsx("rect",{x:u-2,y:c-3,width:h*(y-1)+4,height:4,fill:"#f5f5f5",rx:1}):g.jsx("text",{x:u-14,y:c+f/2+4,fontSize:"12",fill:"#e0e0e0",textAnchor:"middle",fontWeight:"700",children:o}),A.map((R,D)=>g.jsx("line",{x1:u,y1:R,x2:u+h*(y-1),y2:R,stroke:"#b8b8b8",strokeWidth:D===0&&!N?2:1},`fret-${D}`)),b.map((R,D)=>g.jsx("line",{x1:R,y1:c,x2:R,y2:c+f*p,stroke:"#d4d4d4",strokeWidth:1.2+(5-D)*.25},`string-${D}`)),a.map((R,D)=>{const V=t.map((L,B)=>({fret:L,idx:B})).filter(({fret:L})=>L===R);if(V.length<2)return null;const F=Math.min(...V.map(L=>L.idx)),W=Math.max(...V.map(L=>L.idx)),H=c+(R-.5)*f;return g.jsx("rect",{x:b[F]-_,y:H-_,width:b[W]-b[F]+_*2,height:_*2,fill:"white",stroke:e,strokeWidth:2,rx:_},`barre-${D}`)}),t.map((R,D)=>{const V=b[D];if(R===-1)return g.jsx("text",{x:V,y:c-10,fontSize:"14",fill:"#ff6b6b",textAnchor:"middle",fontWeight:"bold",children:""},`mute-${D}`);if(R===0)return g.jsx("circle",{cx:V,cy:c-8,r:4,fill:"none",stroke:"var(--color-text-secondary)",strokeWidth:1.5},`open-${D}`);const F=a.includes(R),W=s[D];if(F){const L=t.findIndex(B=>B===R);if(D!==L)return null}const H=c+(R-.5)*f;return g.jsxs("g",{children:[g.jsx("circle",{cx:V,cy:H,r:_,fill:"white",stroke:e,strokeWidth:2}),W>0&&!F&&g.jsx("text",{x:V,y:H+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:W})]},`finger-${D}`)}),a.map((R,D)=>{const V=t.map((L,B)=>({fret:L,idx:B})).filter(({fret:L})=>L===R);if(V.length<2)return null;const F=Math.min(...V.map(L=>L.idx)),W=c+(R-.5)*f,H=s[F];return H>0?g.jsx("text",{x:b[F],y:W+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:H},`barre-finger-${D}`):null})]})},vy=({notes:n,rootNote:e,color:t="#6366f1",width:s,numerals:a,onNotePlay:o,compact:u=!1})=>{const c=L2(),h=W=>{const H=W.replace(/[0-9]/g,"");let L=H[0],B="";H.includes("")||H.includes("#")?B="":(H.includes("")||H.includes("b"))&&(B="");let j={C:-6,D:-5,E:-4,F:-3,G:-2,A:-1,B:0}[L]??0;const I="CDEFGAB".indexOf(L),K="CDEFGAB".indexOf(e[0]);return I<K&&K-I>3&&(j+=7),{line:j,accidental:B}},f=W=>{o&&o(W,4)},y=s||(u?180:c?280:340),_=u?70:c?110:115,b=u?6:12,A=b,N=_*(u?.28:.22),k=u?7:10,T=Math.max(80,y-b*2),R=N+(u?32:50),D=N+(u?42:62),V=n.map((W,H)=>{const{line:L,accidental:B}=h(W),te=u?40:60,j=T-te-15,I=u?18:25,K=j/Math.max(n.length-1,1),P=Math.max(K,I),ie=P*Math.max(n.length-1,0),X=(j-ie)/2,re=A+te+X+H*P,le=N-L*k/2;return{note:W,x:re,y:le,line:L,accidental:B,needsLedgerLines:L<-4||L>4}}),F=W=>{const H=[];if(W.line<-4)for(let B=-6;B>=W.line;B-=2)B<-4&&H.push(g.jsx("line",{x1:W.x-28/2,y1:N-B*k/2,x2:W.x+28/2,y2:N-B*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-below-${B}`));else if(W.line>4)for(let B=6;B<=W.line;B+=2)B>4&&H.push(g.jsx("line",{x1:W.x-28/2,y1:N-B*k/2,x2:W.x+28/2,y2:N-B*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-above-${B}`));return H};return g.jsx("div",{className:`flex justify-center items-center ${u?"":"w-full"}`,children:g.jsxs("svg",{viewBox:`0 0 ${y} ${_}`,className:u?"":"w-full",style:{minHeight:u?60:c?95:100,width:u?y:void 0},children:[[-2,-1,0,1,2].map(W=>g.jsx("line",{x1:A,y1:N-W*k,x2:A+T,y2:N-W*k,stroke:"#777",strokeWidth:u?1.5:2},`staff-${W}`)),g.jsx("text",{x:A-(u?2:3),y:N+(u?14:20),fontSize:u?"38":c?"56":"62",fill:t,fontFamily:"serif",fontWeight:"bold",children:""}),V.map(W=>F(W)),V.map((W,H)=>g.jsxs("g",{children:[W.accidental&&g.jsx("text",{x:W.x-(u?12:20),y:W.y+(u?3:5),fontSize:u?"12":c?"18":"20",fill:"#ccc",fontFamily:"serif",fontWeight:"bold",children:W.accidental}),o&&g.jsx("circle",{cx:W.x,cy:W.y,r:16,fill:"transparent",style:{cursor:"pointer"},onClick:()=>f(W.note),onTouchEnd:L=>{L.preventDefault(),f(W.note)}}),g.jsx("ellipse",{cx:W.x,cy:W.y,rx:u?5:7,ry:u?4:5.5,fill:H===0?t:"#ddd",stroke:H===0?t:"#ddd",strokeWidth:1,style:o?{cursor:"pointer"}:void 0,className:o?"hover:opacity-80 active:scale-110 transition-transform":""}),g.jsx("text",{x:W.x,y:R,fontSize:u?"7":c?"10":"11",fill:"#999",textAnchor:"middle",fontWeight:"600",children:W.note}),a&&a[H]&&g.jsx("text",{x:W.x,y:D,fontSize:u?"7":c?"9":"10",fill:H===0?t:"#777",textAnchor:"middle",fontWeight:"700",children:a[H]})]},`note-${H}`))]})})},Tg=({variant:n="sidebar",onScrollChange:e,forceVisible:t=!1})=>{const{selectedChord:s,selectedKey:a,chordPanelVisible:o,toggleChordPanel:u,selectedSectionId:c,selectedSlotId:h,addChordToSlot:f,setSelectedChord:p,setSelectedSlot:y,timelineVisible:_,openTimeline:b,setChordPanelGuitarExpanded:A,setChordPanelVoicingsExpanded:N,chordPanelAttention:k}=ln(),T=Yh(),[R,D]=ee.useState(null),[V,F]=ee.useState([]),[W,H]=ee.useState(320),[L,B]=ee.useState(!1),te=ee.useRef(0),j=n==="drawer",[I,K]=ee.useState(s),P=s??I,{isMobile:ie}=ju(),X=n==="landscape-panel"||n==="landscape-expanded",re=n==="landscape-panel",le=!j&&!X&&W<360,fe=!j&&!X&&W<290,[Se,z]=ee.useState(!1),[M,$]=ee.useState(!1),[G,J]=ee.useState(!1),[ae,pe]=ee.useState(!ie||X),[de,xe]=ee.useState(0),Ne=4,Be=Ee=>{z(Ee),N(Ee)},Qe=Ee=>{pe(Ee),A(Ee)};ee.useEffect(()=>{A(ae),N(Se)},[]);const Xe=ee.useRef(0),st=ee.useRef(0),[Y,Ie]=ee.useState(0),dt=ee.useRef(null),et=ee.useRef(null),ge=ee.useRef(null),qe=ee.useRef(null),Re=ee.useRef(null),nt=Ee=>{if(Ee.current&&Re.current){const ft=Re.current,Fe=Ee.current.offsetTop-ft.offsetTop;ft.scrollTo({top:Fe,behavior:"smooth"})}},ct=ee.useCallback(Ee=>{!j||!ie||(Xe.current=Ee.touches[0].clientY,st.current=Ee.touches[0].clientY)},[j,ie]),vt=ee.useCallback(Ee=>{if(!j||!ie)return;st.current=Ee.touches[0].clientY;const ft=st.current-Xe.current;ft>0&&Ie(Math.min(ft,150))},[j,ie]),It=ee.useCallback(()=>{!j||!ie||(Y>80?(Ie(300),setTimeout(()=>{u(),Ie(0)},200)):Ie(0))},[j,ie,Y,u]),St=()=>{if(!P)return"Chord Details";const Ee=R||P.quality;return Ln(Ee==="major"||Ee==="maj"?P.root:Ee==="minor"||Ee==="m"?`${P.root}m`:Ee==="diminished"||Ee==="dim"?`${P.root}dim`:`${P.root}${Mh(Ee)}`)},Ft=ee.useCallback((Ee,ft)=>{fw(Ee,ft)},[]),jt={maj:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',major:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',maj7:"Smooth and sophisticated, the major 7th adds a dreamy, floating quality. Think Burt Bacharach, neo-soul, and late-night jazz.",maj9:"Builds on maj7 with a crystalline 9th. Modern, airy, and introspective  perfect for R&B ballads and ambient textures.",maj13:"The full major palette: lush, orchestral, and complex. Great for endings or when you want maximum harmonic richness.",6:"Warm and vintage  the major 6th has an old-Hollywood or country sweetness. Softer resolution than maj7.",add9:"A major triad with added sparkle from the 9th, but no 7th. Clean, modern, and ubiquitous in pop and worship music.",7:"The dominant 7th creates bluesy tension begging for resolution. The engine behind the ii-V-I and the soul of rock & blues.",9:"Dominant 7 with a colorful 9th. Funky, jazzy, and sophisticated  think Stevie Wonder, Earth Wind & Fire, and neo-soul.",11:"Suspended, modal quality over dominant function. Creates an open, unresolved tension that floats before landing.",13:"The dominant chord at its richest: soulful 13th on top of bluesy 7th. Perfect for jazz turnarounds and R&B grooves.",m7:"The workhorse minor chord: soulful, laid-back, and endlessly versatile. The default for jazz ii chords and R&B grooves.",minor:"The basic minor triad: melancholic, introspective, and emotionally direct. Minor keys are built on this sound.",m9:"Lush and cinematic  adds depth and width to the minor sound. Evokes late-night cityscapes and emotional introspection.",m11:"Spacious and modal, with an open 11th suspension. Great for grooves, vamps, and creating atmospheric tension.",m6:"Bittersweet with a film-noir quality. The 6th adds sophistication to minor  a nice alternative to m7 for tonic chords.",sus2:"Neither major nor minor  the open 2nd creates an ambient, neutral quality. Ubiquitous in pop, rock, and modern worship.",sus4:"Suspended tension from the 4th wants to fall to the 3rd. Creates expectation and movement  classic resolution technique.",dim:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",diminished:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",m7b5:"Half-diminished: dark and sophisticated. The natural ii chord in minor keys, essential for minor ii-V-i progressions."},yt=["maj","7","maj7","maj9","maj13","6","13","m7","m9","m11","m6","sus2","sus4","dim","m7b5","add9","9","11"],xt=Ee=>{if(!P?.root)return"-";const ft=nn=>nn.replace(/[\d]/g,"").replace(//,"b").replace(//,"#"),_e={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},Fe=_e[ft(P.root)],ht=_e[ft(Ee)];if(Fe===void 0||ht===void 0)return"-";const Tt=(ht-Fe+12)%12;return{0:"R",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[Tt]??"-"},Me=ee.useCallback(Ee=>{j||(Ee.preventDefault(),B(!0))},[j]);ee.useEffect(()=>{if(!L||j)return;const Ee=Fe=>{const ht=window.innerWidth-Fe.clientX;H(Math.max(280,Math.min(500,ht)))},ft=Fe=>{if(Fe.touches.length===1){const ht=window.innerWidth-Fe.touches[0].clientX;H(Math.max(280,Math.min(500,ht)))}},_e=()=>{B(!1)};return document.addEventListener("mousemove",Ee),document.addEventListener("mouseup",_e),document.addEventListener("touchmove",ft),document.addEventListener("touchend",_e),()=>{document.removeEventListener("mousemove",Ee),document.removeEventListener("mouseup",_e),document.removeEventListener("touchmove",ft),document.removeEventListener("touchend",_e)}},[L,j]),ee.useEffect(()=>{s&&K(s)},[s]),ee.useEffect(()=>{D(null),F([]),xe(0)},[P?.root,P?.quality]),ee.useEffect(()=>{X&&ae&&dt.current&&Re.current&&setTimeout(()=>{if(dt.current&&Re.current){const Ee=dt.current,ft=Re.current,_e=Ee.offsetTop-ft.offsetTop;ft.scrollTo({top:_e+35,behavior:"smooth"})}},100)},[X,ae]),ee.useEffect(()=>{if(!j||!e)return;const Ee=Re.current;if(!Ee)return;const ft=()=>{const _e=Ee.scrollHeight-Ee.scrollTop-Ee.clientHeight<20;e(_e)};return Ee.addEventListener("scroll",ft),ft(),()=>Ee.removeEventListener("scroll",ft)},[j,e]);const ut=P&&T[P.root]||"#6366f1",ot=V.length>0?V:P?.notes||[],We=lu(ot,de),at=kS(ot),bt=Ee=>{const ft=Date.now();if(ft-te.current<300||(te.current=ft,!P))return;const _e=la(P.root,Ee),Fe=lu(_e,de);Br(Fe),D(Ee),F(_e)},lt=Ee=>{if(te.current=0,!_){b();return}if(!P||!c||!h)return;const ft=la(P.root,Ee),_e=T5(P.root,Ee,ft,de),Fe={...P,quality:Ee,symbol:_e,notes:ft,inversion:de};f(Fe,c,h),y(c,h),p(Fe)},tn=ee.useCallback(()=>{if(!P)return;const Ee=R||P.quality,ft=la(P.root,Ee),_e=lu(ft,de);Br(_e)},[P,R,de]),Ct=ee.useCallback(()=>{if(!_){b();return}if(!P||!c||!h)return;const Ee=R||P.quality,ft=la(P.root,Ee),_e=T5(P.root,Ee,ft,de),Fe={...P,quality:Ee,symbol:_e,notes:ft,inversion:de};f(Fe,c,h),y(c,h),p(Fe)},[P,R,de,c,h,f,y,p,_,b]),Vt=ee.useRef(0),Jt=ee.useRef(null),wt=ee.useCallback(Ee=>{if(!P)return;Ee.preventDefault(),Ee.stopPropagation();const ft=Date.now(),_e=ft-Vt.current;Jt.current&&(clearTimeout(Jt.current),Jt.current=null),_e<300&&_e>0?(Vt.current=0,Ct()):(Vt.current=ft,Jt.current=setTimeout(()=>{tn(),Jt.current=null},300))},[P,tn,Ct]),pt=()=>{if(!P)return{extensions:[],description:""};let Ee=P.numeral;if(Ee&&Ee.includes("(")){const _e=Ee.match(/^(.+?)\s*\(/);_e&&(Ee=_e[1].trim())}return{I:{extensions:["maj","maj7","maj9","maj13","6"],description:"The tonic  your home base and resting point. This is where phrases resolve and songs often begin and end. Its stability makes it perfect for choruses and moments of arrival."},IV:{extensions:["maj","maj7","maj9","maj13","6"],description:'The subdominant  warm, hopeful, and slightly floating. It gently pulls away from home without creating urgency. Great for pre-choruses and that "lifting" feeling before a chorus.'},V:{extensions:["maj","7","9","11","sus4","13"],description:`The dominant  maximum tension wanting to resolve back to I. This chord creates expectation and forward motion. It's the "question" that begs for an "answer."`},ii:{extensions:["m","m7","m9","m11","m6"],description:"The supertonic  a natural setup chord that leads smoothly to V or IV. It's the workhorse of the ii-V-I progression and adds sophistication to any verse."},iii:{extensions:["m","m7"],description:"The mediant  mysterious and chameleon-like. It can substitute for I (they share two notes) or lead to vi. Use it for unexpected color and emotional complexity."},vi:{extensions:["m","m7","m9","m11"],description:'The relative minor  emotional depth and melancholy without leaving the key. This is the "sad" chord in major keys and the foundation of countless pop progressions (vi-IV-I-V).'},"vii":{extensions:["dim","m75"],description:"The leading tone chord  highly unstable and restless. Every note wants to move somewhere, making it a powerful passing chord that pulls strongly toward I."},II:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of V)  borrowed tension that points toward V. Use it to create a dramatic runway before landing on V."},III:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of vi)  creates an unexpected dramatic pull toward vi. Perfect for adding tension before a minor chord moment."}}[Ee||""]||{extensions:[],description:`This chord doesn't fit in the key of ${a}, but it may add color and interest to your progression.`}};if(!o&&!t)return j?g.jsxs("div",{className:"w-full h-12 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-pointer touch-feedback active:bg-bg-tertiary",onClick:u,onTouchStart:Ee=>{Xe.current=Ee.touches[0].clientY,st.current=Ee.touches[0].clientY},onTouchMove:Ee=>{st.current=Ee.touches[0].clientY},onTouchEnd:()=>{Xe.current-st.current>30&&u()},title:"Swipe up or tap to open",children:[g.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40 mb-1.5"}),g.jsx("span",{className:"text-[10px] font-medium text-text-muted uppercase tracking-wider",children:"Chord Details"})]}):g.jsx("button",{onClick:u,className:"h-full px-2 flex items-center justify-center bg-bg-secondary border-l border-border-subtle hover:bg-bg-tertiary transition-colors shrink-0",title:"Show chord details",children:g.jsx(Sk,{size:18,className:"text-text-muted"})});const qt=n==="landscape-panel",wn=n==="landscape-expanded";return g.jsxs("div",{className:`${wn||qt?"h-full w-full flex flex-col bg-bg-secondary overflow-hidden":j?`${ie?"relative w-full":"fixed inset-x-3 bottom-[88px]"} ${ie?"max-h-[60vh]":"max-h-[70vh]"} bg-bg-secondary ${ie?"border-t-2 border-border-subtle":"border-2 border-border-subtle rounded-2xl"} shadow-2xl overflow-hidden ${ie?"":"z-40"} flex`:"h-full flex bg-bg-secondary border-l border-border-subtle overflow-x-hidden"}${k?" chord-panel-attention":""}`,style:{...!j&&!qt&&!wn?{width:W,minWidth:0,maxWidth:"100%"}:{},...j?{transform:Y>0?`translateY(${Y}px)`:void 0,opacity:Y>0?Math.max(0,1-Y/300):1,transition:Y===0||Y>=150?"all 0.2s ease-out":"none"}:{},...k?{boxShadow:"0 0 20px 4px rgba(99, 102, 241, 0.4), inset 0 0 10px rgba(99, 102, 241, 0.1)",borderColor:"rgba(99, 102, 241, 0.6)",transition:"box-shadow 0.3s ease-out, border-color 0.3s ease-out"}:{}},children:[!j&&!qt&&g.jsx("div",{className:`w-3 flex items-center justify-center cursor-ew-resize hover:bg-bg-tertiary active:bg-accent-primary/20 transition-colors ${L?"bg-accent-primary/20":""} relative z-[60] touch-none`,onMouseDown:Me,onTouchStart:Me,children:g.jsx(rw,{size:12,className:"text-text-muted"})}),g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0 relative",children:[j&&ie&&g.jsx("div",{className:"flex flex-col items-center shrink-0 cursor-grab active:cursor-grabbing",onTouchStart:ct,onTouchMove:vt,onTouchEnd:It,children:g.jsx("div",{className:"pt-2.5 pb-1 flex flex-col items-center",children:g.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40"})})}),g.jsxs("div",{className:`${X?"px-3 py-2":ie&&j?"px-2 py-2":"px-4 py-3"} border-b border-border-subtle ${fe?"flex flex-col gap-2":"grid grid-cols-[1fr_auto_1fr] items-center gap-2"} shrink-0 ${j?"bg-bg-secondary/80 backdrop-blur-md":""}`,children:[g.jsx("div",{className:`flex items-center min-w-0 ${fe?"justify-center":""}`,style:{gap:"8px"},children:re&&P?g.jsx(g.Fragment,{children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xs font-bold cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all",style:{backgroundColor:"transparent",color:ut,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${ut}`},onClick:tn,onDoubleClick:Ct,children:St()}),P.numeral&&g.jsx("span",{className:"text-sm font-serif italic text-text-muted shrink-0",children:Ln(P.numeral)}),g.jsxs("div",{className:"flex items-center shrink-0",title:"Chord inversion",children:[g.jsx("button",{onClick:()=>{const Ee=Math.max(0,de-1);xe(Ee);const ft=lu(ot,Ee);Br(ft)},disabled:de<=0,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:g.jsx(Gh,{size:10})}),g.jsx("span",{className:"text-[9px] font-bold text-text-secondary w-3 text-center",children:de}),g.jsx("button",{onClick:()=>{const Ee=Math.min(at,de+1);xe(Ee);const ft=lu(ot,Ee);Br(ft)},disabled:de>=at,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:g.jsx(Wh,{size:10})})]})]})}):g.jsx(g.Fragment,{children:g.jsxs("span",{className:`flex items-center shrink-0 min-w-0 ${P?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,style:P?{gap:"4px",backgroundColor:"transparent",color:ut,padding:"3px 8px",borderRadius:"6px",border:`1.5px solid ${ut}`}:{gap:"4px"},onClick:P?tn:void 0,onDoubleClick:P?Ct:void 0,onTouchEnd:P?wt:void 0,onTouchStart:P?Ee=>Ee.stopPropagation():void 0,children:[g.jsx("span",{className:`${X?"text-lg":ie?"text-sm":"text-xs sm:text-sm"} font-bold leading-none truncate`,children:ie&&j?St():P?Ln(`${P.root}${Mh(R||P.quality)}`):"Chord Details"}),P?.numeral&&g.jsx("span",{className:`${X?"text-sm":"text-[10px]"} font-serif italic opacity-70 shrink-0`,children:Ln(P.numeral)})]})})}),!fe&&g.jsx("div",{className:"flex items-center justify-center",children:P&&!re&&g.jsxs("div",{className:"flex items-center bg-bg-tertiary/40 rounded-full px-0.5 ml-3",title:"Chord inversion - which note is in the bass",children:[g.jsx("button",{onClick:()=>{const Ee=Math.max(0,de-1);xe(Ee);const ft=lu(ot,Ee);Br(ft)},disabled:de<=0,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous inversion",children:g.jsx(Gh,{size:8})}),g.jsx("span",{className:"text-[11px] font-semibold text-text-secondary min-w-[20px] text-center",children:jS(de)}),g.jsx("button",{onClick:()=>{const Ee=Math.min(at,de+1);xe(Ee);const ft=lu(ot,Ee);Br(ft)},disabled:de>=at,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Next inversion",children:g.jsx(Wh,{size:8})})]})}),g.jsxs("div",{className:`flex items-center gap-2 shrink-0 ${fe?"justify-center w-full":"justify-end"}`,children:[P&&g.jsxs("button",{onClick:Ct,className:`${fe?"flex-1 py-2":ie&&j?"px-8 py-1.5 min-w-[100px]":ie?"px-3 py-1.5":"px-2.5 py-1"} bg-gradient-to-r from-accent-primary to-purple-600 hover:opacity-90 rounded-lg transition-all touch-feedback flex items-center justify-center gap-1.5 shadow-md shadow-accent-primary/20 active:scale-95`,title:"Add chord to timeline",children:[g.jsx(Mc,{size:fe?16:ie?14:12,className:"text-white"}),g.jsx("span",{className:`${fe?"text-sm":ie?"text-xs":"text-[11px]"} font-semibold text-white`,children:"Add"})]}),!X&&!(ie&&j)&&g.jsx("button",{onClick:u,className:`${fe?"p-2 bg-bg-tertiary/60 rounded-lg":ie?"p-2 min-w-[40px] min-h-[40px]":"p-1"} hover:bg-bg-tertiary rounded transition-colors touch-feedback flex items-center justify-center`,title:"Hide panel",children:g.jsx(wk,{size:fe||ie?18:16,className:"text-text-muted"})})]})]}),P?g.jsxs("div",{ref:Re,className:`flex-1 ${wn?"flex flex-row overflow-hidden":"overflow-y-auto overflow-x-hidden"} min-h-0 overscroll-contain`,children:[!wn&&g.jsxs("div",{className:`${ie?"px-5 pt-4 pb-4":"px-5 py-4"} border-b border-border-subtle`,children:[g.jsx(Ag,{highlightedNotes:We,rootNote:P.root,bassNote:We[0],color:ut,octave:Ne,onNotePlay:Ft}),g.jsx("div",{className:`${ie?"mt-4":"mt-5"} w-full`,children:g.jsxs("div",{className:"grid gap-1",style:{gridTemplateColumns:`${ie?"56px":"72px"} repeat(${We.length}, minmax(0, 1fr))`},children:[g.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Notes"}),We.map((Ee,ft)=>g.jsx("div",{className:`text-center ${ie?"text-xs":"text-sm"} font-bold text-text-primary flex items-center justify-center`,style:{height:"16px"},children:Ee},`note-${ft}`)),g.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Absolute"}),We.map((Ee,ft)=>g.jsx("div",{className:`text-center ${ie?"text-[11px]":"text-xs"} text-text-primary font-semibold flex items-center justify-center`,style:{height:"16px"},children:xt(Ee)},`abs-${ft}`)),g.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Relative"}),We.map((Ee,ft)=>g.jsx("div",{className:`text-center ${ie?"text-[11px]":"text-xs"} text-text-secondary flex items-center justify-center`,style:{height:"16px"},children:ES(a,Ee).replace(/^1/,"R")},`rel-${ft}`))]})})]}),g.jsxs("div",{className:`flex flex-col ${wn?"flex-1 overflow-y-auto":""}`,children:[g.jsxs("div",{ref:dt,className:`${X?"px-2 py-1":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[g.jsxs("button",{onClick:()=>{const Ee=!ae;Qe(Ee),Ee&&setTimeout(()=>nt(dt),50)},className:`w-full flex items-center justify-between ${ae?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[g.jsx("h3",{className:`${re?"text-[9px]":ie?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide whitespace-nowrap`,children:re?"Guitar & Suggested":`Guitar & Suggested Voicings for ${Ln(P.numeral||P.symbol)}`}),g.jsx(jh,{size:re?8:ie?14:12,className:`text-text-secondary transition-transform ${ae?"rotate-180":""}`})]}),ae&&g.jsx(g.Fragment,{children:g.jsxs("div",{className:`flex items-start ${re?"gap-1":"gap-2"} px-3`,style:{marginTop:re?"4px":"8px"},children:[g.jsxs("div",{className:"flex flex-col items-center shrink-0",style:{minWidth:re?"70px":"100px"},children:[g.jsx(Cg,{root:P.root,quality:R||P.quality,color:ut,onClick:tn,onDoubleClick:Ct}),!re&&g.jsx("p",{className:`${ie?"text-[10px]":"text-[9px]"} text-text-muted leading-relaxed text-center ${ie?"mb-1 px-1":"mb-1 px-0.5"}`,style:{maxWidth:re?"70px":"100px"},children:jt[R||P.quality]||"Select a voicing to see its description."})]}),g.jsx("div",{className:"w-px bg-border-subtle self-stretch"}),g.jsx("div",{className:"flex-1 flex flex-col justify-start pl-1",children:pt().extensions.length>0?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:`grid ${re||le?"grid-cols-1":"grid-cols-2"}`,style:{gap:re?"3px":le?"4px":ie?"6px":"5px",marginBottom:re?"2px":"4px",marginRight:le?"12px":void 0},children:pt().extensions.map(Ee=>g.jsxs("button",{className:`relative group ${re?"px-1 py-0.5 text-[8px] min-h-[20px]":le?"px-2 py-1.5 text-[9px] min-h-[26px]":ie?"px-2 py-2 text-xs min-h-[36px]":"px-1.5 py-1 text-[10px]"} rounded font-semibold transition-colors touch-feedback text-center`,style:{width:re?"60px":le?"70px":ie?"80px":"70px",...R===Ee?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#f0f0f5",border:"1px solid rgba(255,255,255,0.08)"}},onClick:()=>bt(Ee),onDoubleClick:()=>lt(Ee),children:[Ln(`${P.root}${Ee}`),!ie&&jt[Ee]&&g.jsxs("span",{className:"pointer-events-none absolute -top-6 -translate-y-full left-1/2 -translate-x-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[jt[Ee]?g.jsxs(g.Fragment,{children:[jt[Ee],g.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},Ee))}),!le&&g.jsx("div",{style:{marginTop:re?"2px":"6px"},children:g.jsx(vy,{notes:We,rootNote:P.root,color:ut,numerals:We.map(Ee=>xt(Ee)),onNotePlay:Ft,compact:!0})})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[g.jsx(vy,{notes:We,rootNote:P.root,color:ut,numerals:We.map(Ee=>xt(Ee)),onNotePlay:Ft,compact:!1}),g.jsxs("p",{className:`${re?"text-[8px]":ie?"text-[10px]":"text-[9px]"} text-text-muted italic text-center mt-1`,children:["Out of key  see ",g.jsx("span",{className:"font-semibold text-text-secondary",children:"Voicings"})," below"]})]})})]})})]}),g.jsxs("div",{ref:et,className:`${wn?"px-3 py-1":ie?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[g.jsxs("button",{onClick:()=>{const Ee=!Se;Be(Ee),Ee&&setTimeout(()=>nt(et),50)},className:`w-full flex items-center justify-between ${Se?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[g.jsx("h3",{className:`${re?"text-[9px]":ie?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Voicings"}),g.jsx(jh,{size:re?8:ie?14:12,className:`text-text-secondary transition-transform ${Se?"rotate-180":""}`})]}),Se&&g.jsx("div",{className:`grid ${re?"grid-cols-4":ie?"grid-cols-3":"grid-cols-2 sm:grid-cols-3"} ${re?"gap-2":ie?"gap-3":"gap-2.5"}`,children:yt.map((Ee,ft)=>{const Fe=ft%2===0?{left:"calc(100% + 10px)"}:{right:"calc(100% + 10px)"};return g.jsxs("button",{className:`relative group ${re?"px-1.5 py-1 min-h-[22px] text-[8px]":ie?"px-3 py-3 min-h-[48px] text-xs":"px-2 py-1.5 text-[10px]"} rounded font-medium transition-colors touch-feedback`,style:R===Ee?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#9898a6",border:"1px solid rgba(255,255,255,0.08)"},onClick:()=>bt(Ee),onDoubleClick:()=>lt(Ee),children:[Ee,!ie&&jt[Ee]&&g.jsxs("span",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{...Fe,backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[jt[Ee]?g.jsxs(g.Fragment,{children:[jt[Ee],g.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},Ee)})})]}),g.jsxs("div",{ref:qe,className:`${wn?"px-3 py-1":ie?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[g.jsxs("button",{onClick:()=>{const Ee=!G;J(Ee),Ee&&setTimeout(()=>nt(qe),50)},className:`w-full flex items-center justify-between cursor-pointer ${G?"mb-3":"mb-0"} rounded-none`,style:{backgroundColor:"transparent"},children:[g.jsx("h3",{className:`${re?"text-[9px]":ie?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Theory"}),g.jsx(jh,{size:re?8:ie?14:12,className:`text-text-secondary transition-transform ${G?"rotate-180":""}`})]}),G&&g.jsx("div",{className:`${ie?"p-3":"p-4"} bg-bg-elevated rounded-none`,children:g.jsx("p",{className:`${ie?"text-sm":"text-xs"} text-text-secondary leading-relaxed`,children:pt().description})})]}),g.jsxs("div",{ref:ge,className:`${wn?"px-3 py-1":ie?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[g.jsxs("button",{onClick:()=>{const Ee=!M;$(Ee),Ee&&setTimeout(()=>nt(ge),50)},className:`w-full flex items-center justify-between ${M?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[g.jsxs("h3",{className:`${re?"text-[9px]":ie?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:["Scales in ",Ln(a)]}),g.jsx(jh,{size:re?8:ie?14:12,className:`text-text-secondary transition-transform ${M?"rotate-180":""}`})]}),M&&(()=>{const Ee=sg(a),ft=Fe=>[...Ee.slice(Fe),...Ee.slice(0,Fe)].map(Tt=>Ln(Tt)).join("  "),_e=[{name:"Ionian (I)",degree:0,quality:"MAJ",color:"#EAB308",desc:"Bright, happy"},{name:"Dorian (ii)",degree:1,quality:"min",color:"#8B5CF6",desc:"Hopeful minor, jazzy"},{name:"Phrygian (iii)",degree:2,quality:"min",color:"#F97316",desc:"Spanish, exotic"},{name:"Lydian (IV)",degree:3,quality:"MAJ",color:"#06B6D4",desc:"Dreamy, floating"},{name:"Mixolydian (V)",degree:4,quality:"MAJ",color:"#10B981",desc:"Bluesy, rock"},{name:"Aeolian (vi)",degree:5,quality:"min",color:"#3B82F6",desc:"Sad, melancholic"},{name:"Locrian (vii)",degree:6,quality:"dim",color:"#EF4444",desc:"Dark, unstable"}];return g.jsx("div",{className:"space-y-1.5 pb-2",children:_e.map(Fe=>g.jsxs("div",{className:"bg-bg-tertiary/50 p-2 rounded",style:{borderLeft:`2px solid ${Fe.color}`},children:[g.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[g.jsxs("span",{className:`${ie?"text-[11px]":"text-[10px]"} font-medium text-white`,children:[Ln(Ee[Fe.degree])," ",Fe.name.split(" ")[0]]}),g.jsx("span",{className:"text-[8px] px-1 py-0.5 rounded",style:{color:Fe.color,backgroundColor:`${Fe.color}15`},children:Fe.quality})]}),g.jsx("p",{className:`${ie?"text-[9px]":"text-[8px]"} text-gray-400 mb-1`,children:Fe.desc}),g.jsx("p",{className:`${ie?"text-[10px]":"text-[9px]"} text-gray-500 font-mono tracking-wide`,children:ft(Fe.degree)})]},Fe.name))})})()]})]}),ie&&g.jsx("div",{className:"h-12 shrink-0"})]}):g.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-4",children:[g.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-accent-primary/20 to-purple-600/20 flex items-center justify-center border border-accent-primary/30",children:g.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-accent-primary",children:[g.jsx("circle",{cx:"8",cy:"18",r:"4"}),g.jsx("path",{d:"M12 18V2l7 4"})]})}),g.jsxs("div",{className:"text-center space-y-2",children:[g.jsx("p",{className:`${ie?"text-base":"text-sm"} font-semibold text-text-primary`,children:"No chord selected"}),g.jsx("p",{className:`${ie?"text-sm":"text-xs"} text-text-muted max-w-[200px]`,children:"Tap a chord on the wheel or select one from the timeline"})]})]})]})]})},nE="modulepreload",rE=function(n){return"/"+n},yy={},Ih=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=h(t.map(f=>{if(f=rE(f),f in yy)return;yy[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":nE,p||(_.as="script"),_.crossOrigin="",_.href=f,c&&_.setAttribute("nonce",c),document.head.appendChild(_),p)return new Promise((b,A)=>{_.addEventListener("load",b),_.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},sE=()=>{const{currentSong:n,isPlaying:e,tempo:t,volume:s,setTempo:a,setVolume:o,instrument:u,setInstrument:c,isMuted:h,toggleMute:f,toggleLoop:p,isLooping:y,playingSectionId:_,selectedSectionId:b,setSelectedSlot:A}=ln(),{isMobile:N,isLandscape:k}=ju(),[T,R]=ee.useState(!1),[D,V]=ee.useState(!1),[F,W]=ee.useState(t.toString()),H=ee.useRef(null),[L,B]=ee.useState(!1),te=ee.useRef(null),j=ee.useRef(t),I=ee.useRef(null);ee.useEffect(()=>{M2(n)},[n]),ee.useEffect(()=>{bw(t)},[t]),ee.useEffect(()=>{E2(u)},[u]),ee.useEffect(()=>{yw()},[y,n,_,b]),ee.useEffect(()=>{Ih(()=>Promise.resolve().then(()=>vg),void 0).then(J=>{R(!0),J.preloadAudio().finally(()=>R(!1))})},[]);const K=async()=>{try{await j2(),e?(gw(),ln.getState().setIsPlaying(!1)):(R(!0),await mw(),ln.getState().setIsPlaying(!0))}catch(J){console.error("Playback error:",J)}finally{R(!1)}},P=J=>{vw(J)},ie=()=>{p()},X=()=>{const J=n.sections;if(J.length===0)return;const ae=b?J.findIndex(xe=>xe.id===b):-1,pe=ae>=0?(ae+1)%J.length:0,de=J[pe];de&&de.measures[0]?.beats[0]&&A(de.id,de.measures[0].beats[0].id)},re=[{value:"piano",label:"Piano"},{value:"epiano",label:"Electric Piano"},{value:"organ",label:"Organ"},{value:"pad",label:"Pad"}];re.find(J=>J.value===u)||c("piano");const le=J=>{const ae=re.findIndex(de=>de.value===u);if(ae===-1){c("piano");return}const pe=J==="next"?(ae+1)%re.length:(ae-1+re.length)%re.length;c(re[pe].value)},fe=()=>{W(t.toString()),V(!0),setTimeout(()=>H.current?.focus(),0)},Se=()=>{const J=parseInt(F,10);!isNaN(J)&&J>=40&&J<=240?a(J):W(t.toString()),V(!1)},z=J=>{J.key==="Enter"?Se():J.key==="Escape"&&(W(t.toString()),V(!1))},M=J=>{te.current=J.touches[0].clientX,j.current=t,B(!1),I.current=setTimeout(()=>{I.current=null},150)},$=J=>{if(te.current===null)return;const pe=J.touches[0].clientX-te.current;if(Math.abs(pe)>10){B(!0),I.current&&(clearTimeout(I.current),I.current=null);const de=Math.round(pe/3),xe=Math.min(240,Math.max(40,j.current+de));a(xe)}},G=()=>{!L&&I.current&&(clearTimeout(I.current),fe()),te.current=null,B(!1),I.current=null};return g.jsxs("div",{"data-playback-controls":!0,className:`${N&&k?"h-8":N?"h-11":"h-12"} bg-bg-elevated border-t border-border-subtle flex items-center justify-between ${N?"px-2 gap-1":"px-6"}`,children:[g.jsxs("div",{className:"flex items-center gap-0.5",children:[g.jsx("button",{onClick:()=>P("prev"),className:`${N&&k?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:g.jsx(lw,{size:N&&k?12:16})}),g.jsx("button",{onClick:K,disabled:T,className:`${N&&k?"w-6 h-6":N?"w-8 h-8":"w-9 h-9"} rounded-full bg-accent-primary hover:bg-indigo-500 disabled:bg-accent-primary/50 flex items-center justify-center text-white shadow-md transition-all hover:scale-105 active:scale-95 touch-feedback`,children:T?g.jsx(fk,{size:N&&k?12:N?16:18,className:"animate-spin"}):e?g.jsx(aw,{size:N&&k?12:N?16:18,fill:"currentColor"}):g.jsx(nd,{size:N&&k?12:N?16:18,fill:"currentColor",className:"ml-0.5"})}),g.jsx("button",{onClick:()=>P("next"),className:`${N&&k?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:g.jsx(cw,{size:N&&k?12:16})}),N?g.jsxs(g.Fragment,{children:[g.jsx("button",{onClick:X,className:`${k?"p-1":"p-1.5"} transition-colors text-text-secondary hover:text-text-primary touch-feedback`,title:"Cycle to Next Section",children:g.jsx(kk,{size:k?12:14})}),g.jsx("button",{onClick:ie,className:`${k?"p-1":"p-1.5"} transition-colors touch-feedback ${y?"text-accent-primary":"text-text-secondary hover:text-text-primary"}`,title:"Loop Section",children:g.jsx(J5,{size:k?12:14})})]}):g.jsx("button",{onClick:ie,className:`p-1.5 transition-colors ml-1 ${y?"text-accent-primary":"text-text-secondary hover:text-text-primary"}`,title:"Loop Section",children:g.jsx(J5,{size:14})})]}),g.jsx("div",{className:"flex items-center",children:N?D?g.jsx("input",{ref:H,type:"number",inputMode:"numeric",value:F,onChange:J=>W(J.target.value),onBlur:Se,onKeyDown:z,className:`${k?"w-10 text-[9px] h-4":"w-12 text-[11px] h-5"} bg-bg-tertiary border border-accent-primary rounded-sm px-1 text-center text-text-primary font-medium focus:outline-none`,min:40,max:240}):g.jsxs("div",{onTouchStart:M,onTouchMove:$,onTouchEnd:G,onClick:fe,className:`${k?"text-[9px] px-1.5 h-4":"text-[11px] px-2 h-5"} font-medium ${L?"text-accent-primary":"text-text-secondary"} hover:text-text-primary transition-colors touch-feedback whitespace-nowrap flex items-center cursor-ew-resize select-none`,children:[t," ",g.jsx("span",{className:`${L?"text-accent-primary/70":"text-text-muted"} ml-0.5`,children:"BPM"})]}):g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-text-secondary font-medium",children:"Tempo"}),g.jsx("input",{type:"number",value:t,onChange:J=>a(Number(J.target.value)),className:"w-14 bg-bg-tertiary border border-border-subtle rounded px-2 py-1 text-center text-text-primary text-[11px] font-medium",min:40,max:240}),g.jsx("span",{className:"text-text-muted",children:"BPM"})]})}),g.jsxs("div",{className:`flex items-center ${N?"gap-1.5":"gap-4"}`,children:[g.jsxs("div",{className:"flex items-center gap-1",children:[!N&&g.jsxs("div",{className:"flex items-center rounded bg-bg-tertiary/60 border border-border-subtle/70 h-7",children:[g.jsx("button",{onClick:()=>le("prev"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-l transition-colors flex items-center",title:"Previous instrument",children:g.jsx(Gh,{size:12})}),g.jsx("button",{onClick:()=>le("next"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-r transition-colors flex items-center",title:"Next instrument",children:g.jsx(Wh,{size:12})})]}),N&&!k&&g.jsx(wp,{size:14,className:"text-text-muted"}),g.jsx("select",{value:u,onChange:J=>c(J.target.value),className:`bg-bg-tertiary border border-border-subtle rounded ${N&&k?"px-3 py-1 h-6 text-[7px] min-w-[60px]":N?"px-1.5 h-7 text-[11px] min-w-[70px]":"px-2 h-7 text-[10px] min-w-[130px]"} text-text-secondary focus:outline-none focus:border-accent-primary cursor-pointer`,children:re.map(J=>g.jsx("option",{value:J.value,children:J.label},J.value))})]}),g.jsxs("div",{className:`flex items-center ${N?"":"gap-2 w-28"}`,children:[g.jsx("button",{onClick:f,className:`${N?"p-1.5":"p-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center rounded`,title:h?"Unmute":"Mute",children:h||s===0?g.jsx(Hk,{size:N?16:14}):g.jsx(bg,{size:N?16:14})}),!N&&g.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:h?0:s,onChange:J=>{h&&f(),o(Number(J.target.value))},className:`w-full h-1 bg-bg-tertiary rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:bg-accent-primary [&::-webkit-slider-thumb]:rounded-full ${h?"opacity-50":""}`})]})]})]})},iE={intro:{bg:"bg-purple-500/10",headers:"bg-purple-500/30 text-purple-100",border:"border-purple-500/30",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/10",headers:"bg-blue-500/30 text-blue-100",border:"border-blue-500/30",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/10",headers:"bg-cyan-500/30 text-cyan-100",border:"border-cyan-500/30",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/10",headers:"bg-amber-500/30 text-amber-100",border:"border-amber-500/30",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/10",headers:"bg-emerald-500/30 text-emerald-100",border:"border-emerald-500/30",accent:"bg-emerald-500"},interlude:{bg:"bg-teal-500/10",headers:"bg-teal-500/30 text-teal-100",border:"border-teal-500/30",accent:"bg-teal-500"},solo:{bg:"bg-orange-500/10",headers:"bg-orange-500/30 text-orange-100",border:"border-orange-500/30",accent:"bg-orange-500"},breakdown:{bg:"bg-red-500/10",headers:"bg-red-500/30 text-red-100",border:"border-red-500/30",accent:"bg-red-500"},tag:{bg:"bg-pink-500/10",headers:"bg-pink-500/30 text-pink-100",border:"border-pink-500/30",accent:"bg-pink-500"},hook:{bg:"bg-yellow-500/10",headers:"bg-yellow-500/30 text-yellow-100",border:"border-yellow-500/30",accent:"bg-yellow-500"},outro:{bg:"bg-rose-500/10",headers:"bg-rose-500/30 text-rose-100",border:"border-rose-500/30",accent:"bg-rose-500"}},aE=60,xy=.25,oE={bg:"bg-slate-500/10",headers:"bg-slate-500/30 text-slate-100",border:"border-slate-500/30",accent:"bg-slate-500"},lE=({section:n,allSections:e,onSelectBeat:t,onBeatTap:s,onEmptySlotTap:a,isActive:o,playingSlotId:u,selectedBeatId:c,chordColors:h,measureWidth:f,isCompact:p})=>{const{attributes:y,listeners:_,setNodeRef:b,transform:A,transition:N,isDragging:k}=U2({id:n.id}),T={transform:$o.Transform.toString(A),transition:N},R=iE[n.type]||oE,D=n.measures,V=Rh(n,e),W=Math.max(p?40:100,D.length*f),H=p?60:140;return p?g.jsxs("div",{ref:b,"data-section-id":n.id,style:{...T,width:W,height:H,touchAction:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"},className:Rt("relative flex flex-col rounded-lg overflow-hidden shrink-0 transition-all border cursor-pointer select-none draggable-element",R.bg,R.border,k?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-70 hover:scale-[1.02]",o?"ring-2 ring-white/30":""),onClick:()=>t(n.id,n.measures[0]?.beats[0]?.id),...y,..._,children:[g.jsx("div",{className:Rt("h-1.5 w-full",R.accent)}),g.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-1 py-1",children:[g.jsx("span",{className:"font-bold uppercase tracking-wide text-center leading-tight text-sm",children:n.type.charAt(0).toUpperCase()}),g.jsxs("span",{className:"text-[8px] font-mono text-white/40 mt-0.5",children:[D.length,"b"]})]})]}):g.jsxs("div",{ref:b,"data-section-id":n.id,style:{...T,width:W,height:H},className:Rt("relative flex flex-col pt-8 pb-2 rounded-xl overflow-hidden shrink-0 transition-all border group",R.bg,R.border,k?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-50",o?"ring-2 ring-white/20":""),children:[g.jsxs("div",{className:Rt("absolute top-0 left-0 right-0 h-8 flex items-center justify-between px-3 select-none border-b border-white/5 draggable-element",R.headers,"cursor-grab active:cursor-grabbing"),style:{touchAction:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"},...y,..._,children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(rw,{size:14,className:"opacity-50"}),g.jsx("span",{className:"font-bold text-xs uppercase tracking-wider truncate max-w-[100px]",children:V})]}),f>=70&&g.jsx("div",{className:"flex items-center gap-2 text-[10px] font-mono opacity-80",children:g.jsxs("span",{children:[D.length," bars"]})})]}),g.jsx("div",{className:"flex-1 flex px-2 pt-2 gap-1 overflow-hidden",children:D.map((L,B)=>g.jsxs("div",{className:"flex-1 min-w-[32px] h-full flex flex-col gap-1",children:[g.jsxs("div",{className:"h-4 flex items-end justify-between px-0.5 border-b border-white/10 pb-0.5",children:[g.jsx("span",{className:"text-[9px] font-mono text-white/30",children:B+1}),g.jsx("div",{className:"flex gap-0.5",children:L.beats.map((te,j)=>g.jsx("div",{className:"w-0.5 h-1.5 bg-white/20 rounded-full"},j))})]}),(()=>{const te=L.beats.filter(I=>I.chord),j=te.length;if(j===0){const I=L.beats[0];return g.jsx("div",{className:"flex-1 rounded-sm bg-white/5 border border-dashed border-white/10 flex items-center justify-center cursor-pointer hover:bg-white/10 hover:border-white/20 transition-colors",onClick:K=>{K.stopPropagation(),I&&a(n.id,I.id)},title:"Tap to select this slot",children:g.jsx("span",{className:"text-[10px] text-white/20",children:"+"})})}return g.jsx("div",{className:"flex gap-0.5 flex-1 items-stretch",children:te.map(I=>{const K=h[I.chord.root]||"#666",P=j<=2?"10px":j<=4?"8px":"7px",ie=j<=2?"0 4px":"0 2px",X=c===I.id,re=u===I.id;return g.jsx("div",{onClick:le=>{le.stopPropagation(),s(n.id,I.id,I.chord)},className:Rt("flex-1 min-w-0 rounded-sm flex items-center justify-center font-bold shadow-sm truncate transition-all cursor-pointer",re?"ring-2 ring-green-500 shadow-[0_0_12px_rgba(34,197,94,0.6)] scale-110 z-10":X?"ring-2 ring-accent-primary shadow-[0_0_12px_rgba(99,102,241,0.5)] scale-105 z-10":"hover:ring-1 hover:ring-white/30 hover:scale-105"),style:{backgroundColor:re?"rgba(34, 197, 94, 0.15)":X?"rgba(99, 102, 241, 0.15)":"rgba(0, 0, 0, 0.3)",border:`2px solid ${re?"#22c55e":X?"#6366f1":K}`,color:re?"#4ade80":X?"#a5b4fc":K,fontSize:P,padding:ie,minHeight:"24px"},title:X?`Tap again to go to ${I.chord.symbol}`:`Tap to select ${I.chord.symbol}`,children:Ln(I.chord.symbol)},I.id)})})})()]},L.id))}),g.jsx("div",{className:"absolute inset-0 top-8 bg-black/0 hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 hover:opacity-100 pointer-events-none",children:g.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest text-white/80 bg-black/50 px-2 py-1 rounded backdrop-blur-sm",children:"Go to Section"})})]})},cE=({displayChord:n,chordColors:e,isPlaying:t,selectedMapBeatId:s})=>{const{isMobile:a,isLandscape:o}=ju();if(!n)return null;const u=e[n.root]||"#6366f1";return a&&o?g.jsx("div",{className:"absolute top-2 right-2 z-20",onClick:c=>c.stopPropagation(),children:g.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg backdrop-blur-md cursor-pointer group",style:{background:"rgba(17,17,22,0.95)",border:`1.5px solid ${u}`,boxShadow:`0 2px 12px ${u}40`},onClick:()=>{n.notes&&Br(n.notes)},children:[g.jsx("span",{className:"text-sm font-bold",style:{color:u},children:Ln(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)}),n.numeral&&g.jsx("span",{className:"text-[10px] font-serif italic text-white/40",children:Ln(n.numeral)}),t&&s&&g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-ping"})]})}):a?g.jsx("div",{className:"shrink-0 px-3 py-2",style:{background:"linear-gradient(180deg, rgba(26,26,36,0.98) 0%, rgba(17,17,22,0.98) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},onClick:c=>c.stopPropagation(),children:g.jsxs("div",{className:"flex items-center justify-center gap-3 max-w-sm mx-auto",children:[g.jsxs("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&Br(n.notes)},children:[g.jsx("div",{className:"relative px-3 py-1.5 rounded-lg transition-all group-hover:scale-105 group-active:scale-95",style:{background:`linear-gradient(135deg, ${u}15, ${u}05)`,border:`1.5px solid ${u}`,boxShadow:`0 0 12px ${u}30`},children:g.jsx("span",{className:"text-base font-bold",style:{color:u},children:Ln(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)})}),n.numeral&&g.jsx("span",{className:"text-[10px] font-serif italic text-white/40 mt-1",children:Ln(n.numeral)}),t&&s&&g.jsxs("span",{className:"text-[8px] text-green-400 mt-0.5 animate-pulse flex items-center gap-1",children:[g.jsx("span",{className:"w-1 h-1 rounded-full bg-green-400 animate-ping"}),"Playing"]})]}),g.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),g.jsx("div",{className:"flex-shrink-0 overflow-hidden",style:{width:"140px",transform:"scale(0.85)",transformOrigin:"center"},children:g.jsx(Ag,{highlightedNotes:n.notes||[],rootNote:n.root,color:u,octave:4})}),g.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),g.jsx("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&Br(n.notes)},children:g.jsx("div",{className:"transform scale-50 origin-top group-hover:scale-55 transition-transform",style:{marginTop:"-8px",marginBottom:"-50px"},children:g.jsx(Cg,{root:n.root,quality:n.quality,color:u})})})]})}):g.jsx("div",{className:"shrink-0 px-4 py-3",style:{background:"linear-gradient(180deg, rgba(26,26,36,0.98) 0%, rgba(17,17,22,0.98) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},onClick:c=>c.stopPropagation(),children:g.jsxs("div",{className:"flex items-center justify-center gap-6 max-w-xl mx-auto",children:[g.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",onClick:()=>{n.notes&&Br(n.notes)},children:[g.jsx("div",{className:"relative px-4 py-2 rounded-xl transition-all group-hover:scale-105 group-active:scale-95",style:{background:`linear-gradient(135deg, ${u}15, ${u}05)`,border:`2px solid ${u}`,boxShadow:`0 0 20px ${u}30`},children:g.jsx("span",{className:"text-xl font-bold",style:{color:u},children:Ln(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)})}),n.numeral&&g.jsx("span",{className:"text-xs font-serif italic text-white/40 mt-1.5",children:Ln(n.numeral)}),t&&s&&g.jsxs("span",{className:"text-[9px] text-green-400 mt-1 animate-pulse flex items-center gap-1",children:[g.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-ping"}),"Now Playing"]})]}),g.jsx("div",{className:"w-px h-16 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),g.jsx("div",{className:"flex-shrink-0",style:{width:"200px"},children:g.jsx(Ag,{highlightedNotes:n.notes||[],rootNote:n.root,color:u,octave:4})}),g.jsx("div",{className:"w-px h-16 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),g.jsx("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&Br(n.notes)},children:g.jsx("div",{className:"transform scale-75 origin-top group-hover:scale-80 transition-transform",style:{marginTop:"-8px",marginBottom:"-20px"},children:g.jsx(Cg,{root:n.root,quality:n.quality,color:u})})})]})})},uE=({onSave:n,onExport:e})=>{ju();const{currentSong:t,songMapVisible:s,toggleSongMap:a,toggleSongInfoModal:o,setSelectedSlot:u,reorderSections:c,isPlaying:h,tempo:f,setTempo:p,playingSectionId:y,openTimeline:_,instrument:b,addSuggestedSection:A}=ln(),[N,k]=ee.useState(!1),[T,R]=ee.useState(f.toString()),D=ee.useRef(null),[V,F]=ee.useState(!1),W=ee.useRef(null),H=ee.useRef(f),L=ee.useRef(null),B=()=>{R(f.toString()),k(!0),setTimeout(()=>D.current?.focus(),0)},te=()=>{const ge=parseInt(T,10);!isNaN(ge)&&ge>=40&&ge<=240?p(ge):R(f.toString()),k(!1)},j=ge=>{ge.key==="Enter"?te():ge.key==="Escape"&&(R(f.toString()),k(!1))},I=ge=>{W.current=ge.touches[0].clientX,H.current=f,F(!1),L.current=setTimeout(()=>{L.current=null},150)},K=ge=>{if(W.current===null)return;const Re=ge.touches[0].clientX-W.current;if(Math.abs(Re)>10){F(!0),L.current&&(clearTimeout(L.current),L.current=null);const nt=Math.round(Re/3),ct=Math.min(240,Math.max(40,H.current+nt));p(ct)}},P=()=>{!V&&L.current&&(clearTimeout(L.current),B()),W.current=null,F(!1),L.current=null},[ie,X]=ee.useState(1),re=ee.useRef(null),[le,fe]=ee.useState(null),[Se,z]=ee.useState(null),[M,$]=ee.useState(null),[G,J]=ee.useState(null);ee.useEffect(()=>{if(!h)return;const ge=()=>{const{playingSectionId:Re,playingSlotId:nt}=ln.getState();if(Re&&nt){const ct=t.sections.find(vt=>vt.id===Re);if(ct)for(const vt of ct.measures){const It=vt.beats.find(St=>St.id===nt);if(It?.chord){J(It.chord),fe(It.chord),z(nt),$(Re);return}}}};ge();const qe=setInterval(ge,100);return()=>clearInterval(qe)},[h,t.sections]),ee.useEffect(()=>{!h&&le&&J(le)},[h,le]);const ae=Yh(),pe=t.sections.reduce((ge,qe)=>ge+qe.measures.length,0),xe=t.sections.reduce((ge,qe)=>{const nt=(qe.timeSignature||t.timeSignature)[0];return ge+qe.measures.length*nt},0)/f*60,Ne=Math.floor(xe/60),Be=Math.floor(xe%60),Qe=`${Ne}:${Be.toString().padStart(2,"0")}`,Xe=aE*ie,st=ge=>{X(Number(ge.target.value))},Y=R2(El(Lf,{activationConstraint:{distance:8}}),El(o0,{activationConstraint:{delay:250,tolerance:8}}),El(Mf,{coordinateGetter:H2})),Ie=ge=>{const{active:qe,over:Re}=ge;if(Re&&qe.id!==Re.id){const nt=t.sections.findIndex(vt=>vt.id===qe.id),ct=t.sections.findIndex(vt=>vt.id===Re.id);c(Df(t.sections,nt,ct))}};if(ee.useEffect(()=>{const ge=qe=>{qe.key==="Escape"&&a(!1)};return s&&window.addEventListener("keydown",ge),()=>window.removeEventListener("keydown",ge)},[s,a]),ee.useEffect(()=>{if(!s||!h||!y||!re.current)return;const ge=re.current.querySelector(`[data-section-id="${y}"]`);ge&&ge.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[s,h,y]),!s)return null;const dt=async()=>{const{unlockAudioForIOS:ge,playSong:qe,pauseSong:Re}=await Ih(async()=>{const{unlockAudioForIOS:nt,playSong:ct,pauseSong:vt}=await Promise.resolve().then(()=>vg);return{unlockAudioForIOS:nt,playSong:ct,pauseSong:vt}},void 0);h?(Re(),ln.getState().setIsPlaying(!1)):(await ge(),await qe(),ln.getState().setIsPlaying(!0))},et=async ge=>{const{skipToSection:qe}=await Ih(async()=>{const{skipToSection:Re}=await Promise.resolve().then(()=>vg);return{skipToSection:Re}},void 0);qe(ge)};return s?g.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col bg-[#111116] animate-in fade-in duration-200",onClick:()=>a(!1),children:[g.jsxs("div",{className:"shrink-0 relative z-20",style:{paddingTop:"max(16px, env(safe-area-inset-top))"},onClick:ge=>ge.stopPropagation(),children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-none"}),g.jsxs("div",{className:"relative flex items-center justify-between px-4 py-3 mt-2",children:[g.jsx("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:ge=>{ge.stopPropagation(),o(!0)},children:g.jsxs("div",{children:[g.jsx("h2",{className:"font-bold text-white text-base leading-tight",children:t.title}),t.artist&&t.artist.trim()&&g.jsxs("p",{className:"text-white/40 text-[11px] italic",children:["by ",t.artist]})]})}),g.jsxs("div",{className:"flex items-center gap-2",children:[n&&g.jsx("button",{onClick:ge=>{ge.stopPropagation(),n()},className:"w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 active:bg-white/20 flex items-center justify-center text-white/70 hover:text-white transition-colors",title:"Save song",children:g.jsx(mg,{size:16})}),e&&g.jsxs("button",{onClick:ge=>{ge.stopPropagation(),e()},className:"h-8 px-2.5 rounded-full bg-accent-primary/20 hover:bg-accent-primary/30 active:bg-accent-primary/40 flex items-center justify-center gap-1 text-accent-primary hover:text-white transition-colors",title:"Export PDF",children:[g.jsx(n0,{size:14}),g.jsx("span",{className:"text-[10px] font-bold",children:"PDF"})]}),g.jsx("button",{onClick:()=>a(!1),className:"w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 active:bg-white/20 flex items-center justify-center text-white/70 transition-colors",children:g.jsx(Lc,{size:16})})]})]}),g.jsxs("div",{className:"flex items-center gap-4 px-4 pb-4 text-[10px] font-medium text-white/40 overflow-x-auto no-scrollbar",children:[g.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[g.jsx("span",{className:"text-accent-primary",children:t.sections.length}),g.jsx("span",{children:"Sections"})]}),g.jsx("div",{className:"w-px h-2 bg-white/10 shrink-0"}),g.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[g.jsx("span",{className:"text-accent-primary",children:pe}),g.jsx("span",{children:"Bars"})]}),g.jsx("div",{className:"w-px h-2 bg-white/10 shrink-0"}),g.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[g.jsx("span",{className:"text-accent-primary",children:Qe}),g.jsx("span",{children:"Duration"})]})]}),g.jsx("div",{className:"px-4 pb-4",children:g.jsx(Xw,{sections:t.sections,activeSectionId:y||M||void 0,onReorder:c,onAddSection:A,onSectionClick:ge=>{const qe=re.current?.querySelector(`[data-section-id="${ge}"]`);qe&&qe.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}})})]}),g.jsxs("div",{ref:re,className:"flex-1 overflow-x-auto overflow-y-hidden flex items-center relative scrollbar-hide bg-[#0b0b0f]",onClick:ge=>ge.stopPropagation(),children:[g.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"20px 20px"}}),g.jsx("div",{className:Rt("flex relative h-full items-center px-4 transition-all min-w-full",ie<xy?"gap-2":"gap-4"),style:{paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:g.jsx(P2,{sensors:Y,collisionDetection:I2,onDragEnd:Ie,children:g.jsx(q2,{items:t.sections.map(ge=>ge.id),strategy:z2,children:t.sections.map(ge=>g.jsx(lE,{section:ge,allSections:t.sections,onSelectBeat:(qe,Re)=>{Re&&u(qe,Re),fe(null),z(null),$(null),a(!1)},onBeatTap:(qe,Re,nt)=>{Se===Re&&M===qe?(Re&&u(qe,Re),fe(null),z(null),$(null),a(!1)):(fe(nt),z(Re),$(qe),J(nt),nt?.notes&&Br(nt.notes))},onEmptySlotTap:(qe,Re)=>{u(qe,Re),a(!1),_()},isActive:h&&t.sections.findIndex(qe=>qe.id===ge.id)===t.sections.findIndex(qe=>qe.id===y),playingSlotId:ln.getState().isPlaying?ln.getState().playingSlotId:null,selectedBeatId:Se,chordColors:ae,measureWidth:Xe,isCompact:ie<xy},ge.id))})})})]}),g.jsx(cE,{displayChord:G,chordColors:ae,isPlaying:h,selectedMapBeatId:Se}),g.jsxs("div",{className:"shrink-0 bg-[#1a1a24] border-t border-white/5 z-[110]",style:{paddingBottom:"env(safe-area-inset-bottom)"},onClick:ge=>ge.stopPropagation(),children:[g.jsx("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/5",children:g.jsxs("div",{className:"flex items-center gap-4 w-full",children:[g.jsx("button",{onClick:()=>X(Math.max(.08,ie-.1)),className:"p-2 -m-2 text-text-secondary active:text-white transition-colors",children:g.jsx(Xk,{size:18})}),g.jsx("input",{type:"range",min:"0.08",max:"2",step:"0.05",value:ie,onChange:st,onTouchStart:ge=>ge.stopPropagation(),onTouchMove:ge=>ge.stopPropagation(),className:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer touch-none [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-accent-primary",style:{WebkitAppearance:"none"}}),g.jsx("button",{onClick:()=>X(Math.min(2,ie+.1)),className:"p-2 -m-2 text-text-secondary active:text-white transition-colors",children:g.jsx($k,{size:18})})]})}),g.jsxs("div",{className:"flex items-center justify-center gap-8 px-6 py-4",children:[g.jsxs("div",{className:"flex flex-col items-center gap-1",children:[g.jsx("span",{className:"text-[10px] uppercase tracking-wider text-white/30 font-bold",children:"BPM"}),N?g.jsx("input",{ref:D,type:"number",inputMode:"numeric",value:T,onChange:ge=>R(ge.target.value),onBlur:te,onKeyDown:j,className:"w-16 text-lg bg-bg-tertiary border border-accent-primary rounded px-2 py-1 text-center text-white font-mono font-medium focus:outline-none",min:40,max:240}):g.jsx("div",{onTouchStart:I,onTouchMove:K,onTouchEnd:P,onClick:B,className:Rt("text-lg font-mono font-medium cursor-ew-resize select-none px-3 py-1 rounded transition-colors",V?"text-accent-primary bg-accent-primary/10":"text-accent-primary hover:bg-white/5"),children:f})]}),g.jsxs("div",{className:"flex items-center gap-6",children:[g.jsx("button",{onClick:()=>et("prev"),className:"text-accent-primary/80 hover:text-accent-primary transition-colors p-2 active:scale-95",children:g.jsx(lw,{size:22,fill:"currentColor"})}),g.jsx("button",{onClick:dt,className:Rt("w-14 h-14 rounded-full flex items-center justify-center shadow-xl transition-all active:scale-95",h?"bg-accent-primary text-white shadow-accent-primary/30":"bg-accent-primary/20 text-accent-primary border-2 border-accent-primary"),children:h?g.jsx(aw,{size:24,fill:"currentColor"}):g.jsx(nd,{size:24,fill:"currentColor",className:"ml-1"})}),g.jsx("button",{onClick:()=>et("next"),className:"text-accent-primary/80 hover:text-accent-primary transition-colors p-2 active:scale-95",children:g.jsx(cw,{size:22,fill:"currentColor"})})]}),g.jsxs("div",{className:"flex flex-col items-center gap-1",children:[g.jsxs("span",{className:"text-[10px] uppercase tracking-wider text-white/30 font-bold flex items-center gap-1",children:[g.jsx(wp,{size:10}),"Voice"]}),g.jsxs("select",{value:b,onChange:ge=>setInstrument(ge.target.value),className:"bg-bg-tertiary border border-white/10 rounded px-3 py-1 text-sm text-accent-primary font-medium focus:outline-none focus:border-accent-primary cursor-pointer appearance-none text-center min-w-[100px] hover:bg-bg-elevated transition-colors",onClick:ge=>ge.stopPropagation(),children:[g.jsx("option",{value:"piano",children:"Piano"}),g.jsx("option",{value:"epiano",children:"E. Piano"}),g.jsx("option",{value:"organ",children:"Organ"}),g.jsx("option",{value:"pad",children:"Pad"})]})]})]})]})]}):null},hE=({className:n="",size:e=24})=>g.jsx("div",{className:`relative flex items-center justify-center ${n}`,style:{width:e,height:e},children:g.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((t,s)=>{const a=s*30,o=(a-15-90)*Math.PI/180,u=(a+15-90)*Math.PI/180,c=20,h=48,f=s<=4||s>=10;let p;f?s===0?p="rgba(234, 179, 8, 0.95)":s===1?p="rgba(163, 190, 60, 0.9)":s===2?p="rgba(132, 204, 22, 0.85)":s===3?p="rgba(74, 222, 128, 0.75)":s===4?p="rgba(45, 212, 191, 0.65)":s===11?p="rgba(251, 146, 60, 0.9)":s===10?p="rgba(168, 162, 158, 0.65)":p="rgba(200, 180, 100, 0.7)":p=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][s%3];const y=50+c*Math.cos(o),_=50+c*Math.sin(o),b=50+h*Math.cos(o),A=50+h*Math.sin(o),N=50+h*Math.cos(u),k=50+h*Math.sin(u),T=50+c*Math.cos(u),R=50+c*Math.sin(u);return g.jsx("path",{d:`M ${y} ${_} L ${b} ${A} A ${h} ${h} 0 0 1 ${N} ${k} L ${T} ${R} A ${c} ${c} 0 0 0 ${y} ${_}`,fill:p,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},s)}),g.jsx("circle",{cx:"50",cy:"50",r:"18",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.15)",strokeWidth:"1"})]})});function rr(n){"@babel/helpers - typeof";return rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(n)}var go=Uint8Array,ha=Uint16Array,W2=Int32Array,G2=new go([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$2=new go([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wy=new go([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Kw=function(n,e){for(var t=new ha(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var a=new W2(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},Qw=Kw(G2,2),dE=Qw.b,kg=Qw.r;dE[28]=258,kg[258]=28;var fE=Kw($2,0),_y=fE.r,jg=new ha(32768);for(var Tr=0;Tr<32768;++Tr){var xc=(Tr&43690)>>1|(Tr&21845)<<1;xc=(xc&52428)>>2|(xc&13107)<<2,xc=(xc&61680)>>4|(xc&3855)<<4,jg[Tr]=((xc&65280)>>8|(xc&255)<<8)>>1}var tf=(function(n,e,t){for(var s=n.length,a=0,o=new ha(e);a<s;++a)n[a]&&++o[n[a]-1];var u=new ha(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(t){c=new ha(1<<e);var h=15-e;for(a=0;a<s;++a)if(n[a])for(var f=a<<4|n[a],p=e-n[a],y=u[n[a]-1]++<<p,_=y|(1<<p)-1;y<=_;++y)c[jg[y]>>h]=f}else for(c=new ha(s),a=0;a<s;++a)n[a]&&(c[a]=jg[u[n[a]-1]++]>>15-n[a]);return c}),Su=new go(288);for(var Tr=0;Tr<144;++Tr)Su[Tr]=8;for(var Tr=144;Tr<256;++Tr)Su[Tr]=9;for(var Tr=256;Tr<280;++Tr)Su[Tr]=7;for(var Tr=280;Tr<288;++Tr)Su[Tr]=8;var Mp=new go(32);for(var Tr=0;Tr<32;++Tr)Mp[Tr]=5;var pE=tf(Su,9,0),mE=tf(Mp,5,0),Jw=function(n){return(n+7)/8|0},gE=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new go(n.subarray(e,t))},Al=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},Gd=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},Im=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var a=t.length,o=t.slice();if(!a)return{t:t4,l:0};if(a==1){var u=new go(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(F,W){return F.f-W.f}),t.push({s:-1,f:25001});var c=t[0],h=t[1],f=0,p=1,y=2;for(t[0]={s:-1,f:c.f+h.f,l:c,r:h};p!=a-1;)c=t[t[f].f<t[y].f?f++:y++],h=t[f!=p&&t[f].f<t[y].f?f++:y++],t[p++]={s:-1,f:c.f+h.f,l:c,r:h};for(var _=o[0].s,s=1;s<a;++s)o[s].s>_&&(_=o[s].s);var b=new ha(_+1),A=Eg(t[p-1],b,0);if(A>e){var s=0,N=0,k=A-e,T=1<<k;for(o.sort(function(W,H){return b[H.s]-b[W.s]||W.f-H.f});s<a;++s){var R=o[s].s;if(b[R]>e)N+=T-(1<<A-b[R]),b[R]=e;else break}for(N>>=k;N>0;){var D=o[s].s;b[D]<e?N-=1<<e-b[D]++-1:++s}for(;s>=0&&N;--s){var V=o[s].s;b[V]==e&&(--b[V],++N)}A=e}return{t:new go(b),l:A}},Eg=function(n,e,t){return n.s==-1?Math.max(Eg(n.l,e,t+1),Eg(n.r,e,t+1)):e[n.s]=t},Sy=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ha(++e),s=0,a=n[0],o=1,u=function(h){t[s++]=h},c=1;c<=e;++c)if(n[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=n[c]}return{c:t.subarray(0,s),n:e}},$d=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},e4=function(n,e,t){var s=t.length,a=Jw(e+2);n[a]=s&255,n[a+1]=s>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<s;++o)n[a+o+4]=t[o];return(a+4+s)*8},Ny=function(n,e,t,s,a,o,u,c,h,f,p){Al(e,p++,t),++a[256];for(var y=Im(a,15),_=y.t,b=y.l,A=Im(o,15),N=A.t,k=A.l,T=Sy(_),R=T.c,D=T.n,V=Sy(N),F=V.c,W=V.n,H=new ha(19),L=0;L<R.length;++L)++H[R[L]&31];for(var L=0;L<F.length;++L)++H[F[L]&31];for(var B=Im(H,7),te=B.t,j=B.l,I=19;I>4&&!te[wy[I-1]];--I);var K=f+5<<3,P=$d(a,Su)+$d(o,Mp)+u,ie=$d(a,_)+$d(o,N)+u+14+3*I+$d(H,te)+2*H[16]+3*H[17]+7*H[18];if(h>=0&&K<=P&&K<=ie)return e4(e,p,n.subarray(h,h+f));var X,re,le,fe;if(Al(e,p,1+(ie<P)),p+=2,ie<P){X=tf(_,b,0),re=_,le=tf(N,k,0),fe=N;var Se=tf(te,j,0);Al(e,p,D-257),Al(e,p+5,W-1),Al(e,p+10,I-4),p+=14;for(var L=0;L<I;++L)Al(e,p+3*L,te[wy[L]]);p+=3*I;for(var z=[R,F],M=0;M<2;++M)for(var $=z[M],L=0;L<$.length;++L){var G=$[L]&31;Al(e,p,Se[G]),p+=te[G],G>15&&(Al(e,p,$[L]>>5&127),p+=$[L]>>12)}}else X=pE,re=Su,le=mE,fe=Mp;for(var L=0;L<c;++L){var J=s[L];if(J>255){var G=J>>18&31;Gd(e,p,X[G+257]),p+=re[G+257],G>7&&(Al(e,p,J>>23&31),p+=G2[G]);var ae=J&31;Gd(e,p,le[ae]),p+=fe[ae],ae>3&&(Gd(e,p,J>>5&8191),p+=$2[ae])}else Gd(e,p,X[J]),p+=re[J]}return Gd(e,p,X[256]),p+re[256]},bE=new W2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),t4=new go(0),vE=function(n,e,t,s,a,o){var u=o.z||n.length,c=new go(s+u+5*(1+Math.ceil(u/7e3))+a),h=c.subarray(s,c.length-a),f=o.l,p=(o.r||0)&7;if(e){p&&(h[0]=o.r>>3);for(var y=bE[e-1],_=y>>13,b=y&8191,A=(1<<t)-1,N=o.p||new ha(32768),k=o.h||new ha(A+1),T=Math.ceil(t/3),R=2*T,D=function(st){return(n[st]^n[st+1]<<T^n[st+2]<<R)&A},V=new W2(25e3),F=new ha(288),W=new ha(32),H=0,L=0,B=o.i||0,te=0,j=o.w||0,I=0;B+2<u;++B){var K=D(B),P=B&32767,ie=k[K];if(N[P]=ie,k[K]=P,j<=B){var X=u-B;if((H>7e3||te>24576)&&(X>423||!f)){p=Ny(n,h,0,V,F,W,L,te,I,B-I,p),te=H=L=0,I=B;for(var re=0;re<286;++re)F[re]=0;for(var re=0;re<30;++re)W[re]=0}var le=2,fe=0,Se=b,z=P-ie&32767;if(X>2&&K==D(B-z))for(var M=Math.min(_,X)-1,$=Math.min(32767,B),G=Math.min(258,X);z<=$&&--Se&&P!=ie;){if(n[B+le]==n[B+le-z]){for(var J=0;J<G&&n[B+J]==n[B+J-z];++J);if(J>le){if(le=J,fe=z,J>M)break;for(var ae=Math.min(z,J-2),pe=0,re=0;re<ae;++re){var de=B-z+re&32767,xe=N[de],Ne=de-xe&32767;Ne>pe&&(pe=Ne,ie=de)}}}P=ie,ie=N[P],z+=P-ie&32767}if(fe){V[te++]=268435456|kg[le]<<18|_y[fe];var Be=kg[le]&31,Qe=_y[fe]&31;L+=G2[Be]+$2[Qe],++F[257+Be],++W[Qe],j=B+le,++H}else V[te++]=n[B],++F[n[B]]}}for(B=Math.max(B,j);B<u;++B)V[te++]=n[B],++F[n[B]];p=Ny(n,h,f,V,F,W,L,te,I,B-I,p),f||(o.r=p&7|h[p/8|0]<<3,p-=7,o.h=k,o.p=N,o.i=B,o.w=j)}else{for(var B=o.w||0;B<u+f;B+=65535){var Xe=B+65535;Xe>=u&&(h[p/8|0]=f,Xe=u),p=e4(h,p+1,n.subarray(B,Xe))}o.i=u}return gE(c,0,s+Jw(p)+a)},n4=function(){var n=1,e=0;return{p:function(t){for(var s=n,a=e,o=t.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}n=s,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},yE=function(n,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new go(o.length+n.length);u.set(o),u.set(n,o.length),n=u,a.w=o.length}return vE(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,a)},r4=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},xE=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=n4();a.p(e.dictionary),r4(n,2,a.d())}};function Mg(n,e){e||(e={});var t=n4();t.p(n);var s=yE(n,e,e.dictionary?6:2,4);return xE(s,e),r4(s,s.length-4,t.d()),s}var wE=typeof TextDecoder<"u"&&new TextDecoder,_E=0;try{wE.decode(t4,{stream:!0}),_E=1}catch{}function SE(n){if(Array.isArray(n))return n}function NE(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,a,o,u,c=[],h=!0,f=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(h=(s=o.call(t)).done)&&(c.push(s.value),c.length!==e);h=!0);}catch(p){f=!0,a=p}finally{try{if(!h&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(f)throw a}}return c}}function Ay(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function AE(n,e){if(n){if(typeof n=="string")return Ay(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ay(n,e):void 0}}function CE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cy(n,e){return SE(n)||NE(n,e)||AE(n,e)||CE()}function Ty(n,e="utf8"){return new TextDecoder(e).decode(n)}const TE=new TextEncoder;function kE(n){return TE.encode(n)}const jE=1024*8,EE=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Fm={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Y2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=jE,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof Y2)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=Fm[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===EE&&t!=="uint8"&&t!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+s));c.reverse();const h=new Fm[t](c.buffer);return this.offset+=s,h.reverse(),h}const u=new Fm[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return Ty(this.readBytes(e))}decodeText(e=1,t="utf8"){return Ty(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(kE(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ad(n){let e=n.length;for(;--e>=0;)n[e]=0}const ME=3,LE=258,s4=29,OE=256,DE=OE+1+s4,i4=30,RE=512,IE=new Array((DE+2)*2);ad(IE);const FE=new Array(i4*2);ad(FE);const VE=new Array(RE);ad(VE);const BE=new Array(LE-ME+1);ad(BE);const PE=new Array(s4);ad(PE);const zE=new Array(i4);ad(zE);const qE=(n,e,t,s)=>{let a=n&65535|0,o=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var Lg=qE;const UE=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},HE=new Uint32Array(UE()),WE=(n,e,t,s)=>{const a=HE,o=s+t;n^=-1;for(let u=s;u<o;u++)n=n>>>8^a[(n^e[u])&255];return n^-1};var qo=WE,Og={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},a4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const GE=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var $E=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)GE(t,s)&&(n[s]=t[s])}}return n},YE=n=>{let e=0;for(let s=0,a=n.length;s<a;s++)e+=n[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=n.length;s<o;s++){let u=n[s];t.set(u,a),a+=u.length}return t},o4={assign:$E,flattenChunks:YE};let l4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l4=!1}const pf=new Uint8Array(256);for(let n=0;n<256;n++)pf[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;pf[254]=pf[254]=1;var XE=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,s,a,o,u=n.length,c=0;for(a=0;a<u;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const ZE=(n,e)=>{if(e<65534&&n.subarray&&l4)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(n[s]);return t};var KE=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=n[s++];if(u<128){o[a++]=u;continue}let c=pf[u];if(c>4){o[a++]=65533,s+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&s<t;)u=u<<6|n[s++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return ZE(o,a)},QE=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+pf[n[t]]>e?t:e},Dg={string2buf:XE,buf2string:KE,utf8border:QE};function JE(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var eM=JE;const I1=16209,tM=16191;var nM=function(e,t){let s,a,o,u,c,h,f,p,y,_,b,A,N,k,T,R,D,V,F,W,H,L,B,te;const j=e.state;s=e.next_in,B=e.input,a=s+(e.avail_in-5),o=e.next_out,te=e.output,u=o-(t-e.avail_out),c=o+(e.avail_out-257),h=j.dmax,f=j.wsize,p=j.whave,y=j.wnext,_=j.window,b=j.hold,A=j.bits,N=j.lencode,k=j.distcode,T=(1<<j.lenbits)-1,R=(1<<j.distbits)-1;e:do{A<15&&(b+=B[s++]<<A,A+=8,b+=B[s++]<<A,A+=8),D=N[b&T];t:for(;;){if(V=D>>>24,b>>>=V,A-=V,V=D>>>16&255,V===0)te[o++]=D&65535;else if(V&16){F=D&65535,V&=15,V&&(A<V&&(b+=B[s++]<<A,A+=8),F+=b&(1<<V)-1,b>>>=V,A-=V),A<15&&(b+=B[s++]<<A,A+=8,b+=B[s++]<<A,A+=8),D=k[b&R];n:for(;;){if(V=D>>>24,b>>>=V,A-=V,V=D>>>16&255,V&16){if(W=D&65535,V&=15,A<V&&(b+=B[s++]<<A,A+=8,A<V&&(b+=B[s++]<<A,A+=8)),W+=b&(1<<V)-1,W>h){e.msg="invalid distance too far back",j.mode=I1;break e}if(b>>>=V,A-=V,V=o-u,W>V){if(V=W-V,V>p&&j.sane){e.msg="invalid distance too far back",j.mode=I1;break e}if(H=0,L=_,y===0){if(H+=f-V,V<F){F-=V;do te[o++]=_[H++];while(--V);H=o-W,L=te}}else if(y<V){if(H+=f+y-V,V-=y,V<F){F-=V;do te[o++]=_[H++];while(--V);if(H=0,y<F){V=y,F-=V;do te[o++]=_[H++];while(--V);H=o-W,L=te}}}else if(H+=y-V,V<F){F-=V;do te[o++]=_[H++];while(--V);H=o-W,L=te}for(;F>2;)te[o++]=L[H++],te[o++]=L[H++],te[o++]=L[H++],F-=3;F&&(te[o++]=L[H++],F>1&&(te[o++]=L[H++]))}else{H=o-W;do te[o++]=te[H++],te[o++]=te[H++],te[o++]=te[H++],F-=3;while(F>2);F&&(te[o++]=te[H++],F>1&&(te[o++]=te[H++]))}}else if((V&64)===0){D=k[(D&65535)+(b&(1<<V)-1)];continue n}else{e.msg="invalid distance code",j.mode=I1;break e}break}}else if((V&64)===0){D=N[(D&65535)+(b&(1<<V)-1)];continue t}else if(V&32){j.mode=tM;break e}else{e.msg="invalid literal/length code",j.mode=I1;break e}break}}while(s<a&&o<c);F=A>>3,s-=F,A-=F<<3,b&=(1<<A)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<c?257+(c-o):257-(o-c),j.hold=b,j.bits=A};const xh=15,ky=852,jy=592,Ey=0,Vm=1,My=2,rM=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),sM=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),iM=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),aM=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),oM=(n,e,t,s,a,o,u,c)=>{const h=c.bits;let f=0,p=0,y=0,_=0,b=0,A=0,N=0,k=0,T=0,R=0,D,V,F,W,H,L=null,B;const te=new Uint16Array(xh+1),j=new Uint16Array(xh+1);let I=null,K,P,ie;for(f=0;f<=xh;f++)te[f]=0;for(p=0;p<s;p++)te[e[t+p]]++;for(b=h,_=xh;_>=1&&te[_]===0;_--);if(b>_&&(b=_),_===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(y=1;y<_&&te[y]===0;y++);for(b<y&&(b=y),k=1,f=1;f<=xh;f++)if(k<<=1,k-=te[f],k<0)return-1;if(k>0&&(n===Ey||_!==1))return-1;for(j[1]=0,f=1;f<xh;f++)j[f+1]=j[f]+te[f];for(p=0;p<s;p++)e[t+p]!==0&&(u[j[e[t+p]]++]=p);if(n===Ey?(L=I=u,B=20):n===Vm?(L=rM,I=sM,B=257):(L=iM,I=aM,B=0),R=0,p=0,f=y,H=o,A=b,N=0,F=-1,T=1<<b,W=T-1,n===Vm&&T>ky||n===My&&T>jy)return 1;for(;;){K=f-N,u[p]+1<B?(P=0,ie=u[p]):u[p]>=B?(P=I[u[p]-B],ie=L[u[p]-B]):(P=96,ie=0),D=1<<f-N,V=1<<A,y=V;do V-=D,a[H+(R>>N)+V]=K<<24|P<<16|ie|0;while(V!==0);for(D=1<<f-1;R&D;)D>>=1;if(D!==0?(R&=D-1,R+=D):R=0,p++,--te[f]===0){if(f===_)break;f=e[t+u[p]]}if(f>b&&(R&W)!==F){for(N===0&&(N=b),H+=y,A=f-N,k=1<<A;A+N<_&&(k-=te[A+N],!(k<=0));)A++,k<<=1;if(T+=1<<A,n===Vm&&T>ky||n===My&&T>jy)return 1;F=R&W,a[F]=b<<24|A<<16|H-o|0}}return R!==0&&(a[H+R]=f-N<<24|64<<16|0),c.bits=b,0};var nf=oM;const lM=0,c4=1,u4=2,{Z_FINISH:Ly,Z_BLOCK:cM,Z_TREES:F1,Z_OK:Nu,Z_STREAM_END:uM,Z_NEED_DICT:hM,Z_STREAM_ERROR:Oa,Z_DATA_ERROR:h4,Z_MEM_ERROR:d4,Z_BUF_ERROR:dM,Z_DEFLATED:Oy}=a4,u0=16180,Dy=16181,Ry=16182,Iy=16183,Fy=16184,Vy=16185,By=16186,Py=16187,zy=16188,qy=16189,Lp=16190,Cl=16191,Bm=16192,Uy=16193,Pm=16194,Hy=16195,Wy=16196,Gy=16197,$y=16198,V1=16199,B1=16200,Yy=16201,Xy=16202,Zy=16203,Ky=16204,Qy=16205,zm=16206,Jy=16207,ex=16208,Fr=16209,f4=16210,p4=16211,fM=852,pM=592,mM=15,gM=mM,tx=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function bM(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Eu=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<u0||e.mode>p4?1:0},m4=n=>{if(Eu(n))return Oa;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=u0,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(fM),e.distcode=e.distdyn=new Int32Array(pM),e.sane=1,e.back=-1,Nu},g4=n=>{if(Eu(n))return Oa;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,m4(n)},b4=(n,e)=>{let t;if(Eu(n))return Oa;const s=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Oa:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,g4(n))},v4=(n,e)=>{if(!n)return Oa;const t=new bM;n.state=t,t.strm=n,t.window=null,t.mode=u0;const s=b4(n,e);return s!==Nu&&(n.state=null),s},vM=n=>v4(n,gM);let nx=!0,qm,Um;const yM=n=>{if(nx){qm=new Int32Array(512),Um=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(nf(c4,n.lens,0,288,qm,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;nf(u4,n.lens,0,32,Um,0,n.work,{bits:5}),nx=!1}n.lencode=qm,n.lenbits=9,n.distcode=Um,n.distbits=5},y4=(n,e,t,s)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},xM=(n,e)=>{let t,s,a,o,u,c,h,f,p,y,_,b,A,N,k=0,T,R,D,V,F,W,H,L;const B=new Uint8Array(4);let te,j;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Eu(n)||!n.output||!n.input&&n.avail_in!==0)return Oa;t=n.state,t.mode===Cl&&(t.mode=Bm),u=n.next_out,a=n.output,h=n.avail_out,o=n.next_in,s=n.input,c=n.avail_in,f=t.hold,p=t.bits,y=c,_=h,L=Nu;e:for(;;)switch(t.mode){case u0:if(t.wrap===0){t.mode=Bm;break}for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,B[0]=f&255,B[1]=f>>>8&255,t.check=qo(t.check,B,2,0),f=0,p=0,t.mode=Dy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){n.msg="incorrect header check",t.mode=Fr;break}if((f&15)!==Oy){n.msg="unknown compression method",t.mode=Fr;break}if(f>>>=4,p-=4,H=(f&15)+8,t.wbits===0&&(t.wbits=H),H>15||H>t.wbits){n.msg="invalid window size",t.mode=Fr;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=f&512?qy:Cl,f=0,p=0;break;case Dy:for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.flags=f,(t.flags&255)!==Oy){n.msg="unknown compression method",t.mode=Fr;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Fr;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&(B[0]=f&255,B[1]=f>>>8&255,t.check=qo(t.check,B,2,0)),f=0,p=0,t.mode=Ry;case Ry:for(;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&(B[0]=f&255,B[1]=f>>>8&255,B[2]=f>>>16&255,B[3]=f>>>24&255,t.check=qo(t.check,B,4,0)),f=0,p=0,t.mode=Iy;case Iy:for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&(B[0]=f&255,B[1]=f>>>8&255,t.check=qo(t.check,B,2,0)),f=0,p=0,t.mode=Fy;case Fy:if(t.flags&1024){for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&(B[0]=f&255,B[1]=f>>>8&255,t.check=qo(t.check,B,2,0)),f=0,p=0}else t.head&&(t.head.extra=null);t.mode=Vy;case Vy:if(t.flags&1024&&(b=t.length,b>c&&(b=c),b&&(t.head&&(H=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+b),H)),t.flags&512&&t.wrap&4&&(t.check=qo(t.check,s,b,o)),c-=b,o+=b,t.length-=b),t.length))break e;t.length=0,t.mode=By;case By:if(t.flags&2048){if(c===0)break e;b=0;do H=s[o+b++],t.head&&H&&t.length<65536&&(t.head.name+=String.fromCharCode(H));while(H&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=qo(t.check,s,b,o)),c-=b,o+=b,H)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Py;case Py:if(t.flags&4096){if(c===0)break e;b=0;do H=s[o+b++],t.head&&H&&t.length<65536&&(t.head.comment+=String.fromCharCode(H));while(H&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=qo(t.check,s,b,o)),c-=b,o+=b,H)break e}else t.head&&(t.head.comment=null);t.mode=zy;case zy:if(t.flags&512){for(;p<16;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.wrap&4&&f!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Fr;break}f=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Cl;break;case qy:for(;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}n.adler=t.check=tx(f),f=0,p=0,t.mode=Lp;case Lp:if(t.havedict===0)return n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,hM;n.adler=t.check=1,t.mode=Cl;case Cl:if(e===cM||e===F1)break e;case Bm:if(t.last){f>>>=p&7,p-=p&7,t.mode=zm;break}for(;p<3;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}switch(t.last=f&1,f>>>=1,p-=1,f&3){case 0:t.mode=Uy;break;case 1:if(yM(t),t.mode=V1,e===F1){f>>>=2,p-=2;break e}break;case 2:t.mode=Wy;break;case 3:n.msg="invalid block type",t.mode=Fr}f>>>=2,p-=2;break;case Uy:for(f>>>=p&7,p-=p&7;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Fr;break}if(t.length=f&65535,f=0,p=0,t.mode=Pm,e===F1)break e;case Pm:t.mode=Hy;case Hy:if(b=t.length,b){if(b>c&&(b=c),b>h&&(b=h),b===0)break e;a.set(s.subarray(o,o+b),u),c-=b,o+=b,h-=b,u+=b,t.length-=b;break}t.mode=Cl;break;case Wy:for(;p<14;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.nlen=(f&31)+257,f>>>=5,p-=5,t.ndist=(f&31)+1,f>>>=5,p-=5,t.ncode=(f&15)+4,f>>>=4,p-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Fr;break}t.have=0,t.mode=Gy;case Gy:for(;t.have<t.ncode;){for(;p<3;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.lens[I[t.have++]]=f&7,f>>>=3,p-=3}for(;t.have<19;)t.lens[I[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,te={bits:t.lenbits},L=nf(lM,t.lens,0,19,t.lencode,0,t.work,te),t.lenbits=te.bits,L){n.msg="invalid code lengths set",t.mode=Fr;break}t.have=0,t.mode=$y;case $y:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[f&(1<<t.lenbits)-1],T=k>>>24,R=k>>>16&255,D=k&65535,!(T<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(D<16)f>>>=T,p-=T,t.lens[t.have++]=D;else{if(D===16){for(j=T+2;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(f>>>=T,p-=T,t.have===0){n.msg="invalid bit length repeat",t.mode=Fr;break}H=t.lens[t.have-1],b=3+(f&3),f>>>=2,p-=2}else if(D===17){for(j=T+3;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=T,p-=T,H=0,b=3+(f&7),f>>>=3,p-=3}else{for(j=T+7;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=T,p-=T,H=0,b=11+(f&127),f>>>=7,p-=7}if(t.have+b>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Fr;break}for(;b--;)t.lens[t.have++]=H}}if(t.mode===Fr)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Fr;break}if(t.lenbits=9,te={bits:t.lenbits},L=nf(c4,t.lens,0,t.nlen,t.lencode,0,t.work,te),t.lenbits=te.bits,L){n.msg="invalid literal/lengths set",t.mode=Fr;break}if(t.distbits=6,t.distcode=t.distdyn,te={bits:t.distbits},L=nf(u4,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,te),t.distbits=te.bits,L){n.msg="invalid distances set",t.mode=Fr;break}if(t.mode=V1,e===F1)break e;case V1:t.mode=B1;case B1:if(c>=6&&h>=258){n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,nM(n,_),u=n.next_out,a=n.output,h=n.avail_out,o=n.next_in,s=n.input,c=n.avail_in,f=t.hold,p=t.bits,t.mode===Cl&&(t.back=-1);break}for(t.back=0;k=t.lencode[f&(1<<t.lenbits)-1],T=k>>>24,R=k>>>16&255,D=k&65535,!(T<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(R&&(R&240)===0){for(V=T,F=R,W=D;k=t.lencode[W+((f&(1<<V+F)-1)>>V)],T=k>>>24,R=k>>>16&255,D=k&65535,!(V+T<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=V,p-=V,t.back+=V}if(f>>>=T,p-=T,t.back+=T,t.length=D,R===0){t.mode=Qy;break}if(R&32){t.back=-1,t.mode=Cl;break}if(R&64){n.msg="invalid literal/length code",t.mode=Fr;break}t.extra=R&15,t.mode=Yy;case Yy:if(t.extra){for(j=t.extra;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Xy;case Xy:for(;k=t.distcode[f&(1<<t.distbits)-1],T=k>>>24,R=k>>>16&255,D=k&65535,!(T<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if((R&240)===0){for(V=T,F=R,W=D;k=t.distcode[W+((f&(1<<V+F)-1)>>V)],T=k>>>24,R=k>>>16&255,D=k&65535,!(V+T<=p);){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}f>>>=V,p-=V,t.back+=V}if(f>>>=T,p-=T,t.back+=T,R&64){n.msg="invalid distance code",t.mode=Fr;break}t.offset=D,t.extra=R&15,t.mode=Zy;case Zy:if(t.extra){for(j=t.extra;p<j;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Fr;break}t.mode=Ky;case Ky:if(h===0)break e;if(b=_-h,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Fr;break}b>t.wnext?(b-=t.wnext,A=t.wsize-b):A=t.wnext-b,b>t.length&&(b=t.length),N=t.window}else N=a,A=u-t.offset,b=t.length;b>h&&(b=h),h-=b,t.length-=b;do a[u++]=N[A++];while(--b);t.length===0&&(t.mode=B1);break;case Qy:if(h===0)break e;a[u++]=t.length,h--,t.mode=B1;break;case zm:if(t.wrap){for(;p<32;){if(c===0)break e;c--,f|=s[o++]<<p,p+=8}if(_-=h,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?qo(t.check,a,_,u-_):Lg(t.check,a,_,u-_)),_=h,t.wrap&4&&(t.flags?f:tx(f))!==t.check){n.msg="incorrect data check",t.mode=Fr;break}f=0,p=0}t.mode=Jy;case Jy:if(t.wrap&&t.flags){for(;p<32;){if(c===0)break e;c--,f+=s[o++]<<p,p+=8}if(t.wrap&4&&f!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Fr;break}f=0,p=0}t.mode=ex;case ex:L=uM;break e;case Fr:L=h4;break e;case f4:return d4;case p4:default:return Oa}return n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=c,t.hold=f,t.bits=p,(t.wsize||_!==n.avail_out&&t.mode<Fr&&(t.mode<zm||e!==Ly))&&y4(n,n.output,n.next_out,_-n.avail_out),y-=n.avail_in,_-=n.avail_out,n.total_in+=y,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?qo(t.check,a,_,n.next_out-_):Lg(t.check,a,_,n.next_out-_)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Cl?128:0)+(t.mode===V1||t.mode===Pm?256:0),(y===0&&_===0||e===Ly)&&L===Nu&&(L=dM),L},wM=n=>{if(Eu(n))return Oa;let e=n.state;return e.window&&(e.window=null),n.state=null,Nu},_M=(n,e)=>{if(Eu(n))return Oa;const t=n.state;return(t.wrap&2)===0?Oa:(t.head=e,e.done=!1,Nu)},SM=(n,e)=>{const t=e.length;let s,a,o;return Eu(n)||(s=n.state,s.wrap!==0&&s.mode!==Lp)?Oa:s.mode===Lp&&(a=1,a=Lg(a,e,t,0),a!==s.check)?h4:(o=y4(n,e,t,t),o?(s.mode=f4,d4):(s.havedict=1,Nu))};var NM=g4,AM=b4,CM=m4,TM=vM,kM=v4,jM=xM,EM=wM,MM=_M,LM=SM,OM="pako inflate (from Nodeca project)",kl={inflateReset:NM,inflateReset2:AM,inflateResetKeep:CM,inflateInit:TM,inflateInit2:kM,inflate:jM,inflateEnd:EM,inflateGetHeader:MM,inflateSetDictionary:LM,inflateInfo:OM};function DM(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var RM=DM;const x4=Object.prototype.toString,{Z_NO_FLUSH:IM,Z_FINISH:FM,Z_OK:mf,Z_STREAM_END:Hm,Z_NEED_DICT:Wm,Z_STREAM_ERROR:VM,Z_DATA_ERROR:rx,Z_MEM_ERROR:BM}=a4;function Rf(n){this.options=o4.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eM,this.strm.avail_out=0;let t=kl.inflateInit2(this.strm,e.windowBits);if(t!==mf)throw new Error(Og[t]);if(this.header=new RM,kl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Dg.string2buf(e.dictionary):x4.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=kl.inflateSetDictionary(this.strm,e.dictionary),t!==mf)))throw new Error(Og[t])}Rf.prototype.push=function(n,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?FM:IM,x4.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=kl.inflate(t,u),o===Wm&&a&&(o=kl.inflateSetDictionary(t,a),o===mf?o=kl.inflate(t,u):o===rx&&(o=Wm));t.avail_in>0&&o===Hm&&t.state.wrap>0&&n[t.next_in]!==0;)kl.inflateReset(t),o=kl.inflate(t,u);switch(o){case VM:case rx:case Wm:case BM:return this.onEnd(o),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||o===Hm))if(this.options.to==="string"){let h=Dg.utf8border(t.output,t.next_out),f=t.next_out-h,p=Dg.buf2string(t.output,h);t.next_out=f,t.avail_out=s-f,f&&t.output.set(t.output.subarray(h,h+f),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===mf&&c===0)){if(o===Hm)return o=kl.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Rf.prototype.onData=function(n){this.chunks.push(n)};Rf.prototype.onEnd=function(n){n===mf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o4.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function PM(n,e){const t=new Rf(e);if(t.push(n),t.err)throw t.msg||Og[t.err];return t.result}var zM=Rf,qM=PM,UM={Inflate:zM,inflate:qM};const{Inflate:HM,inflate:WM}=UM;var sx=HM,GM=WM;const w4=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;w4[n]=e}const ix=4294967295;function $M(n,e,t){let s=n;for(let a=0;a<t;a++)s=w4[(s^e[a])&255]^s>>>8;return s}function YM(n,e){return($M(ix,n,e)^ix)>>>0}function ax(n,e,t){const s=n.readUint32(),a=YM(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function _4(n,e,t){for(let s=0;s<t;s++)e[s]=n[s]}function S4(n,e,t,s){let a=0;for(;a<s;a++)e[a]=n[a];for(;a<t;a++)e[a]=n[a]+e[a-s]&255}function N4(n,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=n[a];else for(;a<s;a++)e[a]=n[a]+t[a]&255}function A4(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=n[o]+(e[o-a]+t[o]>>1)&255}}function C4(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=n[o]+t[o]&255;for(;o<s;o++)e[o]=n[o]+XM(e[o-a],t[o],t[o-a])&255}}function XM(n,e,t){const s=n+e-t,a=Math.abs(s-n),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?n:o<=u?e:t}function ZM(n,e,t,s,a,o){switch(n){case 0:_4(e,t,a);break;case 1:S4(e,t,a,o);break;case 2:N4(e,t,s,a);break;case 3:A4(e,t,s,a,o);break;case 4:C4(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const KM=new Uint16Array([255]),QM=new Uint8Array(KM.buffer),JM=QM[0]===255;function eL(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,h=new Uint8Array(s*t*c);let f=0;for(let p=0;p<7;p++){const y=u[p],_=Math.ceil((t-y.x)/y.xStep),b=Math.ceil((s-y.y)/y.yStep);if(_<=0||b<=0)continue;const A=_*c,N=new Uint8Array(A);for(let k=0;k<b;k++){const T=e[f++],R=e.subarray(f,f+A);f+=A;const D=new Uint8Array(A);ZM(T,R,D,N,A,c),N.set(D);for(let V=0;V<_;V++){const F=y.x+V*y.xStep,W=y.y+k*y.yStep;if(!(F>=t||W>=s))for(let H=0;H<c;H++)h[(W*t+F)*c+H]=D[V*c+H]}}}if(o===16){const p=new Uint16Array(h.buffer);if(JM)for(let y=0;y<p.length;y++)p[y]=tL(p[y]);return p}else return h}function tL(n){return(n&255)<<8|n>>8&255}const nL=new Uint16Array([255]),rL=new Uint8Array(nL.buffer),sL=rL[0]===255,iL=new Uint8Array(0);function ox(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*t),h=new Uint8Array(s*c);let f=iL,p=0,y,_;for(let b=0;b<s;b++){switch(y=e.subarray(p+1,p+1+c),_=h.subarray(b*c,(b+1)*c),e[p]){case 0:_4(y,_,c);break;case 1:S4(y,_,c,u);break;case 2:N4(y,_,f,c);break;case 3:A4(y,_,f,c,u);break;case 4:C4(y,_,f,c,u);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}f=_,p+=c+1}if(o===16){const b=new Uint16Array(h.buffer);if(sL)for(let A=0;A<b.length;A++)b[A]=aL(b[A]);return b}else return h}function aL(n){return(n&255)<<8|n>>8&255}const Z1=Uint8Array.of(137,80,78,71,13,10,26,10);function lx(n){if(!oL(n.readBytes(Z1.length)))throw new Error("wrong PNG signature")}function oL(n){if(n.length<Z1.length)return!1;for(let e=0;e<Z1.length;e++)if(n[e]!==Z1[e])return!1;return!0}const lL="tEXt",cL=0,T4=new TextDecoder("latin1");function uL(n){if(dL(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const hL=/^[\u0000-\u00FF]*$/;function dL(n){if(!hL.test(n))throw new Error("invalid latin1 text")}function fL(n,e,t){const s=k4(e);n[s]=pL(e,t-s.length-1)}function k4(n){for(n.mark();n.readByte()!==cL;);const e=n.offset;n.reset();const t=T4.decode(n.readBytes(e-n.offset-1));return n.skip(1),uL(t),t}function pL(n,e){return T4.decode(n.readBytes(e))}const oa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Gm={UNKNOWN:-1,DEFLATE:0},cx={UNKNOWN:-1,ADAPTIVE:0},$m={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},P1={NONE:0,BACKGROUND:1,PREVIOUS:2},Ym={SOURCE:0,OVER:1};class mL extends Y2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new sx,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Gm.UNKNOWN,this._filterMethod=cx.UNKNOWN,this._interlaceMethod=$m.UNKNOWN,this._colorType=oa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(lx(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(lx(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case lL:fL(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?ax(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?ax(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=gL(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case oa.GREYSCALE:s=1;break;case oa.TRUECOLOUR:s=3;break;case oa.INDEXED_COLOUR:s=1;break;case oa.GREYSCALE_ALPHA:s=2;break;case oa.TRUECOLOUR_ALPHA:s=4;break;case oa.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Gm.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<t;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case oa.GREYSCALE:case oa.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case oa.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case oa.UNKNOWN:case oa.GREYSCALE_ALPHA:case oa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=k4(this),s=this.readUint8();if(s!==Gm.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:GM(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=ox({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(s,a,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case P1.NONE:break;case P1.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)s.data[u+c]=0}break;case P1.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,a=(o,u)=>{const c=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,h=(o*t.width+u)*this._png.channels;return{index:c,frameIndex:h}};switch(t.blendOp){case Ym.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:h}=a(o,u);for(let f=0;f<this._png.channels;f++)e.data[c+f]=t.data[h+f]}break;case Ym.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:h}=a(o,u);for(let f=0;f<this._png.channels;f++){const p=t.data[h+this._png.channels-1]/s,y=f%(this._png.channels-1)===0?1:t.data[h+f],_=Math.floor(p*y+(1-p)*e.data[c+f]);e.data[c+f]+=_}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==cx.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===$m.NO_INTERLACE)this._png.data=ox({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===$m.ADAM7)this._png.data=eL({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:P1.NONE,blendOp:Ym.SOURCE,data:e}),this._inflator=new sx,this._writingDataChunks=!1}}function gL(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var ux;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(ux||(ux={}));function bL(n,e){return new mL(n,e).decode()}var on=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Xm(){on.console&&typeof on.console.log=="function"&&on.console.log.apply(on.console,arguments)}var gr={log:Xm,warn:function(n){on.console&&(typeof on.console.warn=="function"?on.console.warn.apply(on.console,arguments):Xm.call(null,arguments))},error:function(n){on.console&&(typeof on.console.error=="function"?on.console.error.apply(on.console,arguments):Xm(n))}};function Zm(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){hu(s.response,e,t)},s.onerror=function(){gr.error("could not download file")},s.send()}function hx(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function z1(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var hu=on.saveAs||((typeof window>"u"?"undefined":rr(window))!=="object"||window!==on?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=on.URL||on.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?hx(a.href)?Zm(n,e,t):z1(a,a.target="_blank"):z1(a)):(a.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){z1(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(hx(n))Zm(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){z1(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:rr(o)!=="object"&&(gr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return Zm(n,e,t);var a=n.type==="application/octet-stream",o=/constructor/i.test(on.HTMLElement)||on.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":rr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=u?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=p:location=p,s=null},c.readAsDataURL(n)}else{var h=on.URL||on.webkitURL,f=h.createObjectURL(n);s?s.location=f:location.href=f,s=null,setTimeout(function(){h.revokeObjectURL(f)},4e4)}});function j4(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(n);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),h=this.g.toString(16),f=this.b.toString(16);return c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),f.length==1&&(f="0"+f),"#"+c+h+f}}var K1=on.atob.bind(on),dx=on.btoa.bind(on);function Km(n,e){var t=n[0],s=n[1],a=n[2],o=n[3];t=oi(t,s,a,o,e[0],7,-680876936),o=oi(o,t,s,a,e[1],12,-389564586),a=oi(a,o,t,s,e[2],17,606105819),s=oi(s,a,o,t,e[3],22,-1044525330),t=oi(t,s,a,o,e[4],7,-176418897),o=oi(o,t,s,a,e[5],12,1200080426),a=oi(a,o,t,s,e[6],17,-1473231341),s=oi(s,a,o,t,e[7],22,-45705983),t=oi(t,s,a,o,e[8],7,1770035416),o=oi(o,t,s,a,e[9],12,-1958414417),a=oi(a,o,t,s,e[10],17,-42063),s=oi(s,a,o,t,e[11],22,-1990404162),t=oi(t,s,a,o,e[12],7,1804603682),o=oi(o,t,s,a,e[13],12,-40341101),a=oi(a,o,t,s,e[14],17,-1502002290),t=li(t,s=oi(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=li(o,t,s,a,e[6],9,-1069501632),a=li(a,o,t,s,e[11],14,643717713),s=li(s,a,o,t,e[0],20,-373897302),t=li(t,s,a,o,e[5],5,-701558691),o=li(o,t,s,a,e[10],9,38016083),a=li(a,o,t,s,e[15],14,-660478335),s=li(s,a,o,t,e[4],20,-405537848),t=li(t,s,a,o,e[9],5,568446438),o=li(o,t,s,a,e[14],9,-1019803690),a=li(a,o,t,s,e[3],14,-187363961),s=li(s,a,o,t,e[8],20,1163531501),t=li(t,s,a,o,e[13],5,-1444681467),o=li(o,t,s,a,e[2],9,-51403784),a=li(a,o,t,s,e[7],14,1735328473),t=ci(t,s=li(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=ci(o,t,s,a,e[8],11,-2022574463),a=ci(a,o,t,s,e[11],16,1839030562),s=ci(s,a,o,t,e[14],23,-35309556),t=ci(t,s,a,o,e[1],4,-1530992060),o=ci(o,t,s,a,e[4],11,1272893353),a=ci(a,o,t,s,e[7],16,-155497632),s=ci(s,a,o,t,e[10],23,-1094730640),t=ci(t,s,a,o,e[13],4,681279174),o=ci(o,t,s,a,e[0],11,-358537222),a=ci(a,o,t,s,e[3],16,-722521979),s=ci(s,a,o,t,e[6],23,76029189),t=ci(t,s,a,o,e[9],4,-640364487),o=ci(o,t,s,a,e[12],11,-421815835),a=ci(a,o,t,s,e[15],16,530742520),t=ui(t,s=ci(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=ui(o,t,s,a,e[7],10,1126891415),a=ui(a,o,t,s,e[14],15,-1416354905),s=ui(s,a,o,t,e[5],21,-57434055),t=ui(t,s,a,o,e[12],6,1700485571),o=ui(o,t,s,a,e[3],10,-1894986606),a=ui(a,o,t,s,e[10],15,-1051523),s=ui(s,a,o,t,e[1],21,-2054922799),t=ui(t,s,a,o,e[8],6,1873313359),o=ui(o,t,s,a,e[15],10,-30611744),a=ui(a,o,t,s,e[6],15,-1560198380),s=ui(s,a,o,t,e[13],21,1309151649),t=ui(t,s,a,o,e[4],6,-145523070),o=ui(o,t,s,a,e[11],10,-1120210379),a=ui(a,o,t,s,e[2],15,718787259),s=ui(s,a,o,t,e[9],21,-343485551),n[0]=Ac(t,n[0]),n[1]=Ac(s,n[1]),n[2]=Ac(a,n[2]),n[3]=Ac(o,n[3])}function h0(n,e,t,s,a,o){return e=Ac(Ac(e,n),Ac(s,o)),Ac(e<<a|e>>>32-a,t)}function oi(n,e,t,s,a,o,u){return h0(e&t|~e&s,n,e,a,o,u)}function li(n,e,t,s,a,o,u){return h0(e&s|t&~s,n,e,a,o,u)}function ci(n,e,t,s,a,o,u){return h0(e^t^s,n,e,a,o,u)}function ui(n,e,t,s,a,o,u){return h0(t^(e|~s),n,e,a,o,u)}function E4(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Km(s,vL(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Km(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,Km(s,a),s}function vL(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var fx="0123456789abcdef".split("");function yL(n){for(var e="",t=0;t<4;t++)e+=fx[n>>8*t+4&15]+fx[n>>8*t&15];return e}function xL(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Rg(n){return E4(n).map(xL).join("")}var wL=(function(n){for(var e=0;e<n.length;e++)n[e]=yL(n[e]);return n.join("")})(E4("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ac(n,e){if(wL){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function Ig(n,e){var t,s,a,o;if(n!==t){for(var u=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),c=[],h=0;h<256;h++)c[h]=h;var f=0;for(h=0;h<256;h++){var p=c[h];f=(f+p+u.charCodeAt(h))%256,c[h]=c[f],c[f]=p}t=n,s=c}else c=s;var y=e.length,_=0,b=0,A="";for(h=0;h<y;h++)b=(b+(p=c[_=(_+1)%256]))%256,c[_]=c[b],c[b]=p,u=c[(c[_]+c[b])%256],A+=String.fromCharCode(e.charCodeAt(h)^u);return A}var px={print:4,modify:8,copy:16,"annot-forms":32};function Nh(n,e,t,s){this.v=1,this.r=2;var a=192;n.forEach(function(c){if(px.perm!==void 0)throw new Error("Invalid permission: "+c);a+=px[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=Rg(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Ig(this.encryptionKey,this.padding)}function Ah(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var a=n.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[s]}return e}function mx(n){if(rr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(n,s)}catch(c){on.console&&gr.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Op(n){if(!(this instanceof Op))return new Op(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function M4(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function fu(n,e,t,s,a){if(!(this instanceof fu))return new fu(n,e,t,s,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,M4.call(this,s,a)}function Eh(n,e,t,s,a){if(!(this instanceof Eh))return new Eh(n,e,t,s,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,M4.call(this,s,a)}function Ut(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,h=16,f="S",p=null;rr(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,a=n.format||a,o=n.compress||n.compressPdf||o,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),f=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var y=n.putOnlyUsedFonts||!1,_={},b={internal:{},__private__:{}};b.__private__.PubSub=mx;var A="1.3",N=b.__private__.getPdfVersion=function(){return A};b.__private__.setPdfVersion=function(S){A=S};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return k};var T=b.__private__.getPageFormat=function(S){return k[S]};a=a||"a4";var R="compat",D="advanced",V=R;function F(){this.saveGraphicsState(),Y(new Fe(xt,0,0,-xt,0,Pa()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),f="n",V=D}function W(){this.restoreGraphicsState(),f="S",V=R}var H=b.__private__.combineFontStyleAndFontWeight=function(S,q){if(S=="bold"&&q=="normal"||S=="bold"&&q==400||S=="normal"&&q=="italic"||S=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(S=q==400||q==="normal"?S==="italic"?"italic":"normal":q!=700&&q!=="bold"||S!=="normal"?(q==700?"bold":q)+""+S:"bold"),S};b.advancedAPI=function(S){var q=V===R;return q&&F.call(this),typeof S!="function"||(S(this),q&&W.call(this)),this},b.compatAPI=function(S){var q=V===D;return q&&W.call(this),typeof S!="function"||(S(this),q&&F.call(this)),this},b.isAdvancedAPI=function(){return V===D};var L,B=function(S){if(V!==D)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},te=b.roundToPrecision=b.__private__.roundToPrecision=function(S,q){var he=e||q;if(isNaN(S)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(he).replace(/0+$/,"")};L=b.hpf=b.__private__.hpf=typeof h=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return te(S,h)}:h==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return te(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return te(S,16)};var j=b.f2=b.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return te(S,2)},I=b.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return te(S,3)},K=b.scale=b.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return V===R?S*xt:V===D?S:void 0},P=function(S){return K((function(q){return V===R?Pa()-q:V===D?q:void 0})(S))};b.__private__.setPrecision=b.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var ie,X="00000000000000000000000000000000",re=b.__private__.getFileId=function(){return X},le=b.__private__.setFileId=function(S){return X=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(zr=new Nh(p.userPermissions,p.userPassword,p.ownerPassword,X)),X};b.setFileId=function(S){return le(S),this},b.getFileId=function(){return re()};var fe=b.__private__.convertDateToPDFDate=function(S){var q=S.getTimezoneOffset(),he=q<0?"+":"-",be=Math.floor(Math.abs(q/60)),Ae=Math.abs(q%60),$e=[he,G(be),"'",G(Ae),"'"].join("");return["D:",S.getFullYear(),G(S.getMonth()+1),G(S.getDate()),G(S.getHours()),G(S.getMinutes()),G(S.getSeconds()),$e].join("")},Se=b.__private__.convertPDFDateToDate=function(S){var q=parseInt(S.substr(2,4),10),he=parseInt(S.substr(6,2),10)-1,be=parseInt(S.substr(8,2),10),Ae=parseInt(S.substr(10,2),10),$e=parseInt(S.substr(12,2),10),rt=parseInt(S.substr(14,2),10);return new Date(q,he,be,Ae,$e,rt,0)},z=b.__private__.setCreationDate=function(S){var q;if(S===void 0&&(S=new Date),S instanceof Date)q=fe(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=S}return ie=q},M=b.__private__.getCreationDate=function(S){var q=ie;return S==="jsDate"&&(q=Se(ie)),q};b.setCreationDate=function(S){return z(S),this},b.getCreationDate=function(S){return M(S)};var $,G=b.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},J=b.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},ae=0,pe=[],de=[],xe=0,Ne=[],Be=[],Qe=!1,Xe=de;b.__private__.setCustomOutputDestination=function(S){Qe=!0,Xe=S};var st=function(S){Qe||(Xe=S)};b.__private__.resetCustomOutputDestination=function(){Qe=!1,Xe=de};var Y=b.__private__.out=function(S){return S=S.toString(),xe+=S.length+1,Xe.push(S),Xe},Ie=b.__private__.write=function(S){return Y(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},dt=b.__private__.getArrayBuffer=function(S){for(var q=S.length,he=new ArrayBuffer(q),be=new Uint8Array(he);q--;)be[q]=S.charCodeAt(q);return he},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return et};var ge=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(S){return ge=V===D?S/xt:S,this};var qe,Re=b.__private__.getFontSize=b.getFontSize=function(){return V===R?ge:ge*xt},nt=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(S){return nt=S,this},b.__private__.getR2L=b.getR2L=function(){return nt};var ct,vt=b.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))qe=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');qe=S}else qe=parseInt(S,10)};b.__private__.getZoomMode=function(){return qe};var It,St=b.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');ct=S};b.__private__.getPageMode=function(){return ct};var Ft=b.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');It=S};b.__private__.getLayoutMode=function(){return It},b.__private__.setDisplayMode=b.setDisplayMode=function(S,q,he){return vt(S),Ft(q),St(he),this};var jt={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(S){if(Object.keys(jt).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return jt[S]},b.__private__.getDocumentProperties=function(){return jt},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(S){for(var q in jt)jt.hasOwnProperty(q)&&S[q]&&(jt[q]=S[q]);return this},b.__private__.setDocumentProperty=function(S,q){if(Object.keys(jt).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return jt[S]=q};var yt,xt,Me,ut,ot,We={},at={},bt=[],lt={},tn={},Ct={},Vt={},Jt=null,wt=0,pt=[],qt=new mx(b),wn=n.hotfixes||[],Ee={},ft={},_e=[],Fe=function S(q,he,be,Ae,$e,rt){if(!(this instanceof S))return new S(q,he,be,Ae,$e,rt);isNaN(q)&&(q=1),isNaN(he)&&(he=0),isNaN(be)&&(be=0),isNaN(Ae)&&(Ae=1),isNaN($e)&&($e=0),isNaN(rt)&&(rt=0),this._matrix=[q,he,be,Ae,$e,rt]};Object.defineProperty(Fe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Fe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Fe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Fe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Fe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Fe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Fe.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Fe.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Fe.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Fe.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Fe.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Fe.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Fe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Fe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Fe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Fe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Fe.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(L).join(S)},Fe.prototype.multiply=function(S){var q=S.sx*this.sx+S.shy*this.shx,he=S.sx*this.shy+S.shy*this.sy,be=S.shx*this.sx+S.sy*this.shx,Ae=S.shx*this.shy+S.sy*this.sy,$e=S.tx*this.sx+S.ty*this.shx+this.tx,rt=S.tx*this.shy+S.ty*this.sy+this.ty;return new Fe(q,he,be,Ae,$e,rt)},Fe.prototype.decompose=function(){var S=this.sx,q=this.shy,he=this.shx,be=this.sy,Ae=this.tx,$e=this.ty,rt=Math.sqrt(S*S+q*q),Mt=(S/=rt)*he+(q/=rt)*be;he-=S*Mt,be-=q*Mt;var Pt=Math.sqrt(he*he+be*be);return Mt/=Pt,S*(be/=Pt)<q*(he/=Pt)&&(S=-S,q=-q,Mt=-Mt,rt=-rt),{scale:new Fe(rt,0,0,Pt,0,0),translate:new Fe(1,0,0,1,Ae,$e),rotate:new Fe(S,q,-q,S,0,0),skew:new Fe(1,0,Mt,1,0,0)}},Fe.prototype.toString=function(S){return this.join(" ")},Fe.prototype.inversed=function(){var S=this.sx,q=this.shy,he=this.shx,be=this.sy,Ae=this.tx,$e=this.ty,rt=1/(S*be-q*he),Mt=be*rt,Pt=-q*rt,Qt=-he*rt,mn=S*rt;return new Fe(Mt,Pt,Qt,mn,-Mt*Ae-Qt*$e,-Pt*Ae-mn*$e)},Fe.prototype.applyToPoint=function(S){var q=S.x*this.sx+S.y*this.shx+this.tx,he=S.x*this.shy+S.y*this.sy+this.ty;return new Ai(q,he)},Fe.prototype.applyToRectangle=function(S){var q=this.applyToPoint(S),he=this.applyToPoint(new Ai(S.x+S.w,S.y+S.h));return new Ra(q.x,q.y,he.x-q.x,he.y-q.y)},Fe.prototype.clone=function(){var S=this.sx,q=this.shy,he=this.shx,be=this.sy,Ae=this.tx,$e=this.ty;return new Fe(S,q,he,be,Ae,$e)},b.Matrix=Fe;var ht=b.matrixMult=function(S,q){return q.multiply(S)},Tt=new Fe(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Tt;var Bt=function(S,q){if(!tn[S]){var he=(q instanceof fu?"Sh":"P")+(Object.keys(lt).length+1).toString(10);q.id=he,tn[S]=he,lt[he]=q,qt.publish("addPattern",q)}};b.ShadingPattern=fu,b.TilingPattern=Eh,b.addShadingPattern=function(S,q){return B("addShadingPattern()"),Bt(S,q),this},b.beginTilingPattern=function(S){B("beginTilingPattern()"),rl(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},b.endTilingPattern=function(S,q){B("endTilingPattern()"),q.stream=Be[$].join(`
`),Bt(S,q),qt.publish("endTilingPattern",q),_e.pop().restore()};var nn,$t=b.__private__.newObject=function(){var S=dn();return fn(S,!0),S},dn=b.__private__.newObjectDeferred=function(){return ae++,pe[ae]=function(){return xe},ae},fn=function(S,q){return q=typeof q=="boolean"&&q,pe[S]=xe,q&&Y(S+" 0 obj"),S},Jn=b.__private__.newAdditionalObject=function(){var S={objId:dn(),content:""};return Ne.push(S),S},Gn=dn(),Sn=dn(),rn=b.__private__.decodeColorString=function(S){var q=S.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var he=parseFloat(q[0]);q=[he,he,he,"r"]}for(var be="#",Ae=0;Ae<3;Ae++)be+=("0"+Math.floor(255*parseFloat(q[Ae])).toString(16)).slice(-2);return be},$n=b.__private__.encodeColorString=function(S){var q;typeof S=="string"&&(S={ch1:S});var he=S.ch1,be=S.ch2,Ae=S.ch3,$e=S.ch4,rt=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var Mt=new j4(he);if(Mt.ok)he=Mt.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var Pt=parseInt(he.substr(1),16);he=Pt>>16&255,be=Pt>>8&255,Ae=255&Pt}if(be===void 0||$e===void 0&&he===be&&be===Ae)q=typeof he=="string"?he+" "+rt[0]:S.precision===2?j(he/255)+" "+rt[0]:I(he/255)+" "+rt[0];else if($e===void 0||rr($e)==="object"){if($e&&!isNaN($e.a)&&$e.a===0)return["1.","1.","1.",rt[1]].join(" ");q=typeof he=="string"?[he,be,Ae,rt[1]].join(" "):S.precision===2?[j(he/255),j(be/255),j(Ae/255),rt[1]].join(" "):[I(he/255),I(be/255),I(Ae/255),rt[1]].join(" ")}else q=typeof he=="string"?[he,be,Ae,$e,rt[2]].join(" "):S.precision===2?[j(he),j(be),j(Ae),j($e),rt[2]].join(" "):[I(he),I(be),I(Ae),I($e),rt[2]].join(" ");return q},Er=b.__private__.getFilters=function(){return u},us=b.__private__.putStream=function(S){var q=(S=S||{}).data||"",he=S.filters||Er(),be=S.alreadyAppliedFilters||[],Ae=S.addLength1||!1,$e=q.length,rt=S.objectId,Mt=function(rs){return rs};if(p!==null&&rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(Mt=zr.encryptor(rt,0));var Pt={};he===!0&&(he=["FlateEncode"]);var Qt=S.additionalKeyValues||[],mn=(Pt=Ut.API.processDataByFilters!==void 0?Ut.API.processDataByFilters(q,he):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Pt.data.length!==0&&(Qt.push({key:"Length",value:Pt.data.length}),Ae===!0&&Qt.push({key:"Length1",value:$e})),mn.length!=0)if(mn.split("/").length-1==1)Qt.push({key:"Filter",value:mn});else{Qt.push({key:"Filter",value:"["+mn+"]"});for(var In=0;In<Qt.length;In+=1)if(Qt[In].key==="DecodeParms"){for(var xr=[],qr=0;qr<Pt.reverseChain.split("/").length-1;qr+=1)xr.push("null");xr.push(Qt[In].value),Qt[In].value="["+xr.join(" ")+"]"}}Y("<<");for(var ir=0;ir<Qt.length;ir++)Y("/"+Qt[ir].key+" "+Qt[ir].value);Y(">>"),Pt.data.length!==0&&(Y("stream"),Y(Mt(Pt.data)),Y("endstream"))},je=b.__private__.putPage=function(S){var q=S.number,he=S.data,be=S.objId,Ae=S.contentsObjId;fn(be,!0),Y("<</Type /Page"),Y("/Parent "+S.rootDictionaryObjId+" 0 R"),Y("/Resources "+S.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(L(S.mediaBox.bottomLeftX))+" "+parseFloat(L(S.mediaBox.bottomLeftY))+" "+L(S.mediaBox.topRightX)+" "+L(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&Y("/CropBox ["+L(S.cropBox.bottomLeftX)+" "+L(S.cropBox.bottomLeftY)+" "+L(S.cropBox.topRightX)+" "+L(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&Y("/BleedBox ["+L(S.bleedBox.bottomLeftX)+" "+L(S.bleedBox.bottomLeftY)+" "+L(S.bleedBox.topRightX)+" "+L(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&Y("/TrimBox ["+L(S.trimBox.bottomLeftX)+" "+L(S.trimBox.bottomLeftY)+" "+L(S.trimBox.topRightX)+" "+L(S.trimBox.topRightY)+"]"),S.artBox!==null&&Y("/ArtBox ["+L(S.artBox.bottomLeftX)+" "+L(S.artBox.bottomLeftY)+" "+L(S.artBox.topRightX)+" "+L(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&Y("/UserUnit "+S.userUnit),qt.publish("putPage",{objId:be,pageContext:pt[q],pageNumber:q,page:he}),Y("/Contents "+Ae+" 0 R"),Y(">>"),Y("endobj");var $e=he.join(`
`);return V===D&&($e+=`
Q`),fn(Ae,!0),us({data:$e,filters:Er(),objectId:Ae}),Y("endobj"),be},Pe=b.__private__.putPages=function(){var S,q,he=[];for(S=1;S<=wt;S++)pt[S].objId=dn(),pt[S].contentsObjId=dn();for(S=1;S<=wt;S++)he.push(je({number:S,data:Be[S],objId:pt[S].objId,contentsObjId:pt[S].contentsObjId,mediaBox:pt[S].mediaBox,cropBox:pt[S].cropBox,bleedBox:pt[S].bleedBox,trimBox:pt[S].trimBox,artBox:pt[S].artBox,userUnit:pt[S].userUnit,rootDictionaryObjId:Gn,resourceDictionaryObjId:Sn}));fn(Gn,!0),Y("<</Type /Pages");var be="/Kids [";for(q=0;q<wt;q++)be+=he[q]+" 0 R ";Y(be+"]"),Y("/Count "+wt),Y(">>"),Y("endobj"),qt.publish("postPutPages")},Ze=function(S){qt.publish("putFont",{font:S,out:Y,newObject:$t,putStream:us}),S.isAlreadyPutted!==!0&&(S.objectNumber=$t(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+Ah(S.postScriptName)),Y("/Subtype /Type1"),typeof S.encoding=="string"&&Y("/Encoding /"+S.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},_t=function(S){S.objectNumber=$t();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[L(S.x),L(S.y),L(S.x+S.width),L(S.y+S.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var he=S.pages[1].join(`
`);us({data:he,additionalKeyValues:q,objectId:S.objectNumber}),Y("endobj")},gt=function(S,q){q||(q=21);var he=$t(),be=(function(rt,Mt){var Pt,Qt=[],mn=1/(Mt-1);for(Pt=0;Pt<1;Pt+=mn)Qt.push(Pt);if(Qt.push(1),rt[0].offset!=0){var In={offset:0,color:rt[0].color};rt.unshift(In)}if(rt[rt.length-1].offset!=1){var xr={offset:1,color:rt[rt.length-1].color};rt.push(xr)}for(var qr="",ir=0,rs=0;rs<Qt.length;rs++){for(Pt=Qt[rs];Pt>rt[ir+1].offset;)ir++;var Yr=rt[ir].offset,Ns=(Pt-Yr)/(rt[ir+1].offset-Yr),za=rt[ir].color,Qi=rt[ir+1].color;qr+=J(Math.round((1-Ns)*za[0]+Ns*Qi[0]).toString(16))+J(Math.round((1-Ns)*za[1]+Ns*Qi[1]).toString(16))+J(Math.round((1-Ns)*za[2]+Ns*Qi[2]).toString(16))}return qr.trim()})(S.colors,q),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+q+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),us({data:be,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),Y("endobj"),S.objectNumber=$t(),Y("<< /ShadingType "+S.type),Y("/ColorSpace /DeviceRGB");var $e="/Coords ["+L(parseFloat(S.coords[0]))+" "+L(parseFloat(S.coords[1]))+" ";S.type===2?$e+=L(parseFloat(S.coords[2]))+" "+L(parseFloat(S.coords[3])):$e+=L(parseFloat(S.coords[2]))+" "+L(parseFloat(S.coords[3]))+" "+L(parseFloat(S.coords[4]))+" "+L(parseFloat(S.coords[5])),Y($e+="]"),S.matrix&&Y("/Matrix ["+S.matrix.toString()+"]"),Y("/Function "+he+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},kt=function(S,q){var he=dn(),be=$t();q.push({resourcesOid:he,objectOid:be}),S.objectNumber=be;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+S.boundingBox.map(L).join(" ")+"]"}),Ae.push({key:"XStep",value:L(S.xStep)}),Ae.push({key:"YStep",value:L(S.yStep)}),Ae.push({key:"Resources",value:he+" 0 R"}),S.matrix&&Ae.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),us({data:S.stream,additionalKeyValues:Ae,objectId:S.objectNumber}),Y("endobj")},pn=function(S){for(var q in S.objectNumber=$t(),Y("<<"),S)switch(q){case"opacity":Y("/ca "+j(S[q]));break;case"stroke-opacity":Y("/CA "+j(S[q]))}Y(">>"),Y("endobj")},un=function(S){fn(S.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var q in Y("/Font <<"),We)We.hasOwnProperty(q)&&(y===!1||y===!0&&_.hasOwnProperty(q))&&Y("/"+q+" "+We[q].objectNumber+" 0 R");Y(">>")})(),(function(){if(Object.keys(lt).length>0){for(var q in Y("/Shading <<"),lt)lt.hasOwnProperty(q)&&lt[q]instanceof fu&&lt[q].objectNumber>=0&&Y("/"+q+" "+lt[q].objectNumber+" 0 R");qt.publish("putShadingPatternDict"),Y(">>")}})(),(function(q){if(Object.keys(lt).length>0){for(var he in Y("/Pattern <<"),lt)lt.hasOwnProperty(he)&&lt[he]instanceof b.TilingPattern&&lt[he].objectNumber>=0&&lt[he].objectNumber<q&&Y("/"+he+" "+lt[he].objectNumber+" 0 R");qt.publish("putTilingPatternDict"),Y(">>")}})(S.objectOid),(function(){if(Object.keys(Ct).length>0){var q;for(q in Y("/ExtGState <<"),Ct)Ct.hasOwnProperty(q)&&Ct[q].objectNumber>=0&&Y("/"+q+" "+Ct[q].objectNumber+" 0 R");qt.publish("putGStateDict"),Y(">>")}})(),(function(){for(var q in Y("/XObject <<"),Ee)Ee.hasOwnProperty(q)&&Ee[q].objectNumber>=0&&Y("/"+q+" "+Ee[q].objectNumber+" 0 R");qt.publish("putXobjectDict"),Y(">>")})(),Y(">>"),Y("endobj")},sn=function(S){at[S.fontName]=at[S.fontName]||{},at[S.fontName][S.fontStyle]=S.id},xn=function(S,q,he,be,Ae){var $e={id:"F"+(Object.keys(We).length+1).toString(10),postScriptName:S,fontName:q,fontStyle:he,encoding:be,isStandardFont:Ae||!1,metadata:{}};return qt.publish("addFont",{font:$e,instance:this}),We[$e.id]=$e,sn($e),$e.id},Pn=b.__private__.pdfEscape=b.pdfEscape=function(S,q){return(function(he,be){var Ae,$e,rt,Mt,Pt,Qt,mn,In,xr;if(rt=(be=be||{}).sourceEncoding||"Unicode",Pt=be.outputEncoding,(be.autoencode||Pt)&&We[yt].metadata&&We[yt].metadata[rt]&&We[yt].metadata[rt].encoding&&(Mt=We[yt].metadata[rt].encoding,!Pt&&We[yt].encoding&&(Pt=We[yt].encoding),!Pt&&Mt.codePages&&(Pt=Mt.codePages[0]),typeof Pt=="string"&&(Pt=Mt[Pt]),Pt)){for(mn=!1,Qt=[],Ae=0,$e=he.length;Ae<$e;Ae++)(In=Pt[he.charCodeAt(Ae)])?Qt.push(String.fromCharCode(In)):Qt.push(he[Ae]),Qt[Ae].charCodeAt(0)>>8&&(mn=!0);he=Qt.join("")}for(Ae=he.length;mn===void 0&&Ae!==0;)he.charCodeAt(Ae-1)>>8&&(mn=!0),Ae--;if(!mn)return he;for(Qt=be.noBOM?[]:[254,255],Ae=0,$e=he.length;Ae<$e;Ae++){if((xr=(In=he.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qt.push(xr),Qt.push(In-(xr<<8))}return String.fromCharCode.apply(void 0,Qt)})(S,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Tn=b.__private__.beginPage=function(S){Be[++wt]=[],pt[wt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Mr(wt),st(Be[$])},sr=function(S,q){var he,be,Ae;switch(t=q||t,typeof S=="string"&&(he=T(S.toLowerCase()),Array.isArray(he)&&(be=he[0],Ae=he[1])),Array.isArray(S)&&(be=S[0]*xt,Ae=S[1]*xt),isNaN(be)&&(be=a[0],Ae=a[1]),(be>14400||Ae>14400)&&(gr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Ae=Math.min(14400,Ae)),a=[be,Ae],t.substr(0,1)){case"l":Ae>be&&(a=[Ae,be]);break;case"p":be>Ae&&(a=[Ae,be])}Tn(a),Yt(el),Y(pi),zl!==0&&Y(zl+" J"),ds!==0&&Y(ds+" j"),qt.publish("addPage",{pageNumber:wt})},$r=function(S){S>0&&S<=wt&&(Be.splice(S,1),pt.splice(S,1),wt--,$>wt&&($=wt),this.setPage($))},Mr=function(S){S>0&&S<=wt&&($=S)},_s=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Be.length-1},Yi=function(S,q,he){var be,Ae=void 0;return he=he||{},S=S!==void 0?S:We[yt].fontName,q=q!==void 0?q:We[yt].fontStyle,be=S.toLowerCase(),at[be]!==void 0&&at[be][q]!==void 0?Ae=at[be][q]:at[S]!==void 0&&at[S][q]!==void 0?Ae=at[S][q]:he.disableWarning===!1&&gr.warn("Unable to look up font label for font '"+S+"', '"+q+"'. Refer to getFontList() for available fonts."),Ae||he.noFallback||(Ae=at.times[q])==null&&(Ae=at.times.normal),Ae},Pr=b.__private__.putInfo=function(){var S=$t(),q=function(be){return be};for(var he in p!==null&&(q=zr.encryptor(S,0)),Y("<<"),Y("/Producer ("+Pn(q("jsPDF "+Ut.version))+")"),jt)jt.hasOwnProperty(he)&&jt[he]&&Y("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+Pn(q(jt[he]))+")");Y("/CreationDate ("+Pn(q(ie))+")"),Y(">>"),Y("endobj")},ni=b.__private__.putCatalog=function(S){var q=(S=S||{}).rootDictionaryObjId||Gn;switch($t(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+q+" 0 R"),qe||(qe="fullwidth"),qe){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+qe;he.substr(he.length-1)==="%"&&(qe=parseInt(qe)/100),typeof qe=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+j(qe)+"]")}switch(It||(It="continuous"),It){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}ct&&Y("/PageMode /"+ct),qt.publish("putCatalog"),Y(">>"),Y("endobj")},Gs=b.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(ae+1)),Y("/Root "+ae+" 0 R"),Y("/Info "+(ae-1)+" 0 R"),p!==null&&Y("/Encrypt "+zr.oid+" 0 R"),Y("/ID [ <"+X+"> <"+X+"> ]"),Y(">>")},Nn=b.__private__.putHeader=function(){Y("%PDF-"+A),Y("%")},Xi=b.__private__.putXRef=function(){var S="0000000000";Y("xref"),Y("0 "+(ae+1)),Y("0000000000 65535 f ");for(var q=1;q<=ae;q++)typeof pe[q]=="function"?Y((S+pe[q]()).slice(-10)+" 00000 n "):pe[q]!==void 0?Y((S+pe[q]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},Ds=b.__private__.buildDocument=function(){var S;ae=0,xe=0,de=[],pe=[],Ne=[],Gn=dn(),Sn=dn(),st(de),qt.publish("buildDocument"),Nn(),Pe(),(function(){qt.publish("putAdditionalObjects");for(var he=0;he<Ne.length;he++){var be=Ne[he];fn(be.objId,!0),Y(be.content),Y("endobj")}qt.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var he in We)We.hasOwnProperty(he)&&(y===!1||y===!0&&_.hasOwnProperty(he))&&Ze(We[he])})(),(function(){var he;for(he in Ct)Ct.hasOwnProperty(he)&&pn(Ct[he])})(),(function(){for(var he in Ee)Ee.hasOwnProperty(he)&&_t(Ee[he])})(),(function(he){var be;for(be in lt)lt.hasOwnProperty(be)&&(lt[be]instanceof fu?gt(lt[be]):lt[be]instanceof Eh&&kt(lt[be],he))})(S),qt.publish("putResources"),S.forEach(un),un({resourcesOid:Sn,objectOid:Number.MAX_SAFE_INTEGER}),qt.publish("postPutResources"),p!==null&&(zr.oid=$t(),Y("<<"),Y("/Filter /Standard"),Y("/V "+zr.v),Y("/R "+zr.r),Y("/U <"+zr.toHexString(zr.U)+">"),Y("/O <"+zr.toHexString(zr.O)+">"),Y("/P "+zr.P),Y(">>"),Y("endobj")),Pr(),ni();var q=xe;return Xi(),Gs(),Y("startxref"),Y(""+q),Y("%%EOF"),st(Be[$]),de.join(`
`)},Si=b.__private__.getBlob=function(S){return new Blob([dt(S)],{type:"application/pdf"})},_o=b.output=b.__private__.output=(nn=function(S,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",S){case void 0:return Ds();case"save":b.save(q.filename);break;case"arraybuffer":return dt(Ds());case"blob":return Si(Ds());case"bloburi":case"bloburl":if(on.URL!==void 0&&typeof on.URL.createObjectURL=="function")return on.URL&&on.URL.createObjectURL(Si(Ds()))||void 0;gr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",be=Ds();try{he=dx(be)}catch{he=dx(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+q.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(on)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$e=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(Ae=q.pdfObjectUrl,$e="");var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+$e+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Mt=on.open();return Mt!==null&&Mt.document.write(rt),Mt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(on)==="[object Window]"){var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',Qt=on.open();if(Qt!==null){Qt.document.write(Pt);var mn=this;Qt.document.documentElement.querySelector("#pdfViewer").onload=function(){Qt.document.title=q.filename,Qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mn.output("bloburl"))}}return Qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(on)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var In='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',xr=on.open();if(xr!==null&&(xr.document.write(In),xr.document.title=q.filename),xr||typeof safari>"u")return xr;break;case"datauri":case"dataurl":return on.document.location.href=this.output("datauristring",q);default:return null}},nn.foo=function(){try{return nn.apply(this,arguments)}catch(he){var S=he.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var q="Error in function "+S.split(`
`)[0].split("<")[0]+": "+he.message;if(!on.console)throw new Error(q);on.console.error(q,he),on.alert&&alert(q)}},nn.foo.bar=nn,nn.foo),hs=function(S){return Array.isArray(wn)===!0&&wn.indexOf(S)>-1};switch(s){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=hs("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);xt=s}var zr=null;z(),le();var Lr=b.__private__.getPageInfo=b.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pt[S].objId,pageNumber:S,pageContext:pt[S]}},So=b.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in pt)if(pt[q].objId===S)break;return Lr(q)},Bl=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:pt[$].objId,pageNumber:$,pageContext:pt[$]}};b.addPage=function(){return sr.apply(this,arguments),this},b.setPage=function(){return Mr.apply(this,arguments),st.call(this,Be[$]),this},b.insertPage=function(S){return this.addPage(),this.movePage($,S),this},b.movePage=function(S,q){var he,be;if(S>q){he=Be[S],be=pt[S];for(var Ae=S;Ae>q;Ae--)Be[Ae]=Be[Ae-1],pt[Ae]=pt[Ae-1];Be[q]=he,pt[q]=be,this.setPage(q)}else if(S<q){he=Be[S],be=pt[S];for(var $e=S;$e<q;$e++)Be[$e]=Be[$e+1],pt[$e]=pt[$e+1];Be[q]=he,pt[q]=be,this.setPage(q)}return this},b.deletePage=function(){return $r.apply(this,arguments),this},b.__private__.text=b.text=function(S,q,he,be,Ae){var $e,rt,Mt,Pt,Qt,mn,In,xr,qr,ir=(be=be||{}).scope||this;if(typeof S=="number"&&typeof q=="number"&&(typeof he=="string"||Array.isArray(he))){var rs=he;he=q,q=S,S=rs}if(arguments[3]instanceof Fe==0?(Mt=arguments[4],Pt=arguments[5],rr(In=arguments[3])==="object"&&In!==null||(typeof Mt=="string"&&(Pt=Mt,Mt=null),typeof In=="string"&&(Pt=In,In=null),typeof In=="number"&&(Mt=In,In=null),be={flags:In,angle:Mt,align:Pt})):(B("The transform parameter of text() with a Matrix value"),qr=Ae),isNaN(q)||isNaN(he)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return ir;var Yr,Ns="",za=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:Da,Qi=ir.internal.scaleFactor;function qa(Hn){return Hn=Hn.split("	").join(Array(be.TabLen||9).join(" ")),Pn(Hn,In)}function Hc(Hn){for(var Fn,ar=Hn.concat(),Hr=[],Sa=ar.length;Sa--;)typeof(Fn=ar.shift())=="string"?Hr.push(Fn):Array.isArray(Hn)&&(Fn.length===1||Fn[1]===void 0&&Fn[2]===void 0)?Hr.push(Fn[0]):Hr.push([Fn[0],Fn[1],Fn[2]]);return Hr}function Ul(Hn,Fn){var ar;if(typeof Hn=="string")ar=Fn(Hn)[0];else if(Array.isArray(Hn)){for(var Hr,Sa,na=Hn.concat(),ol=[],$c=na.length;$c--;)typeof(Hr=na.shift())=="string"?ol.push(Fn(Hr)[0]):Array.isArray(Hr)&&typeof Hr[0]=="string"&&(Sa=Fn(Hr[0],Hr[1],Hr[2]),ol.push([Sa[0],Sa[1],Sa[2]]));ar=ol}return ar}var ga=!1,Ji=!0;if(typeof S=="string")ga=!0;else if(Array.isArray(S)){var il=S.concat();rt=[];for(var Ua,fs=il.length;fs--;)(typeof(Ua=il.shift())!="string"||Array.isArray(Ua)&&typeof Ua[0]!="string")&&(Ji=!1);ga=Ji}if(ga===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var Ao=ge/ir.internal.scaleFactor,Co=Ao*(za-1);switch(be.baseline){case"bottom":he-=Co;break;case"top":he+=Ao-Co;break;case"hanging":he+=Ao-2*Co;break;case"middle":he+=Ao/2-Co}if((mn=be.maxWidth||0)>0&&(typeof S=="string"?S=ir.splitTextToSize(S,mn):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(Hn,Fn){return Hn.concat(ir.splitTextToSize(Fn,mn))},[]))),$e={text:S,x:q,y:he,options:be,mutex:{pdfEscape:Pn,activeFontKey:yt,fonts:We,activeFontSize:ge}},qt.publish("preProcessText",$e),S=$e.text,Mt=(be=$e.options).angle,qr instanceof Fe==0&&Mt&&typeof Mt=="number"){Mt*=Math.PI/180,be.rotationDirection===0&&(Mt=-Mt),V===D&&(Mt=-Mt);var Hl=Math.cos(Mt),ba=Math.sin(Mt);qr=new Fe(Hl,ba,-ba,Hl,0,0)}else Mt&&Mt instanceof Fe&&(qr=Mt);V!==D||qr||(qr=Tt),(Qt=be.charSpace||Ni)!==void 0&&(Ns+=L(K(Qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xr=be.horizontalScale)!==void 0&&(Ns+=L(100*xr)+` Tz
`),be.lang;var Ys=-1,Ha=be.renderingMode!==void 0?be.renderingMode:be.stroke,Wl=ir.internal.getCurrentPageInfo().pageContext;switch(Ha){case 0:case!1:case"fill":Ys=0;break;case 1:case!0:case"stroke":Ys=1;break;case 2:case"fillThenStroke":Ys=2;break;case 3:case"invisible":Ys=3;break;case 4:case"fillAndAddForClipping":Ys=4;break;case 5:case"strokeAndAddPathForClipping":Ys=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ys=6;break;case 7:case"addToPathForClipping":Ys=7}var Wc=Wl.usedRenderingMode!==void 0?Wl.usedRenderingMode:-1;Ys!==-1?Ns+=Ys+` Tr
`:Wc!==-1&&(Ns+=`0 Tr
`),Ys!==-1&&(Wl.usedRenderingMode=Ys),Pt=be.align||"left";var mi,ea=ge*za,Wa=ir.internal.pageSize.getWidth(),Gc=We[yt];Qt=be.charSpace||Ni,mn=be.maxWidth||0,In=Object.assign({autoencode:!0,noBOM:!0},be.flags);var ta=[],To=function(Hn){return ir.getStringUnitWidth(Hn,{font:Gc,charSpace:Qt,fontSize:ge,doKerning:!1})*ge/Qi};if(Object.prototype.toString.call(S)==="[object Array]"){var si;rt=Hc(S),Pt!=="left"&&(mi=rt.map(To));var Xs,va=0;if(Pt==="right"){q-=mi[0],S=[],fs=rt.length;for(var ya=0;ya<fs;ya++)ya===0?(Xs=fi(q),si=Ss(he)):(Xs=K(va-mi[ya]),si=-ea),S.push([rt[ya],Xs,si]),va=mi[ya]}else if(Pt==="center"){q-=mi[0]/2,S=[],fs=rt.length;for(var Ga=0;Ga<fs;Ga++)Ga===0?(Xs=fi(q),si=Ss(he)):(Xs=K((va-mi[Ga])/2),si=-ea),S.push([rt[Ga],Xs,si]),va=mi[Ga]}else if(Pt==="left"){S=[],fs=rt.length;for(var Gl=0;Gl<fs;Gl++)S.push(rt[Gl])}else if(Pt==="justify"&&Gc.encoding==="Identity-H"){S=[],fs=rt.length,mn=mn!==0?mn:Wa;for(var $l=0,Ur=0;Ur<fs;Ur++)if(si=Ur===0?Ss(he):-ea,Xs=Ur===0?fi(q):$l,Ur<fs-1){var Pu=K((mn-mi[Ur])/(rt[Ur].split(" ").length-1)),xa=rt[Ur].split(" ");S.push([xa[0]+" ",Xs,si]),$l=0;for(var wa=1;wa<xa.length;wa++){var As=(To(xa[wa-1]+" "+xa[wa])-To(xa[wa]))*Qi+Pu;wa==xa.length-1?S.push([xa[wa],As,0]):S.push([xa[wa]+" ",As,0]),$l-=As}}else S.push([rt[Ur],Xs,si]);S.push(["",$l,0])}else{if(Pt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],fs=rt.length,mn=mn!==0?mn:Wa,Ur=0;Ur<fs;Ur++){si=Ur===0?Ss(he):-ea,Xs=Ur===0?fi(q):0;var $a=rt[Ur].split(" ").length-1,Yl=$a>0?(mn-mi[Ur])/$a:0;Ur<fs-1?ta.push(L(K(Yl))):ta.push(0),S.push([rt[Ur],Xs,si])}}}(typeof be.R2L=="boolean"?be.R2L:nt)===!0&&(S=Ul(S,function(Hn,Fn,ar){return[Hn.split("").reverse().join(""),Fn,ar]})),$e={text:S,x:q,y:he,options:be,mutex:{pdfEscape:Pn,activeFontKey:yt,fonts:We,activeFontSize:ge}},qt.publish("postProcessText",$e),S=$e.text,Yr=$e.mutex.isHex||!1;var Xl=We[yt].encoding;Xl!=="WinAnsiEncoding"&&Xl!=="StandardEncoding"||(S=Ul(S,function(Hn,Fn,ar){return[qa(Hn),Fn,ar]})),rt=Hc(S),S=[];for(var Ya,Xa,_a,al=Array.isArray(rt[0])?1:0,gi="",Za=function(Hn,Fn,ar){var Hr="";return ar instanceof Fe?(ar=typeof be.angle=="number"?ht(ar,new Fe(1,0,0,1,Hn,Fn)):ht(new Fe(1,0,0,1,Hn,Fn),ar),V===D&&(ar=ht(new Fe(1,0,0,-1,0,0),ar)),Hr=ar.join(" ")+` Tm
`):Hr=L(Hn)+" "+L(Fn)+` Td
`,Hr},Rs=0;Rs<rt.length;Rs++){switch(gi="",al){case 1:_a=(Yr?"<":"(")+rt[Rs][0]+(Yr?">":")"),Ya=parseFloat(rt[Rs][1]),Xa=parseFloat(rt[Rs][2]);break;case 0:_a=(Yr?"<":"(")+rt[Rs]+(Yr?">":")"),Ya=fi(q),Xa=Ss(he)}ta!==void 0&&ta[Rs]!==void 0&&(gi=ta[Rs]+` Tw
`),Rs===0?S.push(gi+Za(Ya,Xa,qr)+_a):al===0?S.push(gi+_a):al===1&&S.push(gi+Za(Ya,Xa,qr)+_a)}S=al===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Ci=`BT
/`;return Ci+=yt+" "+ge+` Tf
`,Ci+=L(ge*za)+` TL
`,Ci+=pa+`
`,Ci+=Ns,Ci+=S,Y(Ci+="ET"),_[yt]=!0,ir};var Qo=b.__private__.clip=b.clip=function(S){return Y(S==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Qo("evenodd")},b.__private__.discardPath=b.discardPath=function(){return Y("n"),this};var $s=b.__private__.isValidStyle=function(S){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(q=!0),q};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(S){return $s(S)&&(f=S),this};var Fc=b.__private__.getStyle=b.getStyle=function(S){var q=f;switch(S){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=S}return q},Vc=b.close=function(){return Y("h"),this};b.stroke=function(){return Y("S"),this},b.fill=function(S){return Zi("f",S),this},b.fillEvenOdd=function(S){return Zi("f*",S),this},b.fillStroke=function(S){return Zi("B",S),this},b.fillStrokeEvenOdd=function(S){return Zi("B*",S),this};var Zi=function(S,q){rr(q)==="object"?Ou(q,S):Y(S)},Jo=function(S){S===null||V===D&&S===void 0||(S=Fc(S),Y(S))};function Lu(S,q,he,be,Ae){var $e=new Eh(q||this.boundingBox,he||this.xStep,be||this.yStep,this.gState,Ae||this.matrix);$e.stream=this.stream;var rt=S+"$$"+this.cloneIndex+++"$$";return Bt(rt,$e),$e}var Ou=function(S,q){var he=tn[S.key],be=lt[he];if(be instanceof fu)Y("q"),Y(Bc(q)),be.gState&&b.setGState(be.gState),Y(S.matrix.toString()+" cm"),Y("/"+he+" sh"),Y("Q");else if(be instanceof Eh){var Ae=new Fe(1,0,0,-1,0,Pa());S.matrix&&(Ae=Ae.multiply(S.matrix||Tt),he=Lu.call(be,S.key,S.boundingBox,S.xStep,S.yStep,Ae).id),Y("q"),Y("/Pattern cs"),Y("/"+he+" scn"),be.gState&&b.setGState(be.gState),Y(q),Y("Q")}},Bc=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Pc=b.moveTo=function(S,q){return Y(L(K(S))+" "+L(P(q))+" m"),this},Du=b.lineTo=function(S,q){return Y(L(K(S))+" "+L(P(q))+" l"),this},ri=b.curveTo=function(S,q,he,be,Ae,$e){return Y([L(K(S)),L(P(q)),L(K(he)),L(P(be)),L(K(Ae)),L(P($e)),"c"].join(" ")),this};b.__private__.line=b.line=function(S,q,he,be,Ae){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(be)||!$s(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return V===R?this.lines([[he-S,be-q]],S,q,[1,1],Ae||"S"):this.lines([[he-S,be-q]],S,q,[1,1]).stroke()},b.__private__.lines=b.lines=function(S,q,he,be,Ae,$e){var rt,Mt,Pt,Qt,mn,In,xr,qr,ir,rs,Yr,Ns;if(typeof S=="number"&&(Ns=he,he=q,q=S,S=Ns),be=be||[1,1],$e=$e||!1,isNaN(q)||isNaN(he)||!Array.isArray(S)||!Array.isArray(be)||!$s(Ae)||typeof $e!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pc(q,he),rt=be[0],Mt=be[1],Qt=S.length,rs=q,Yr=he,Pt=0;Pt<Qt;Pt++)(mn=S[Pt]).length===2?(rs=mn[0]*rt+rs,Yr=mn[1]*Mt+Yr,Du(rs,Yr)):(In=mn[0]*rt+rs,xr=mn[1]*Mt+Yr,qr=mn[2]*rt+rs,ir=mn[3]*Mt+Yr,rs=mn[4]*rt+rs,Yr=mn[5]*Mt+Yr,ri(In,xr,qr,ir,rs,Yr));return $e&&Vc(),Jo(Ae),this},b.path=function(S){for(var q=0;q<S.length;q++){var he=S[q],be=he.c;switch(he.op){case"m":Pc(be[0],be[1]);break;case"l":Du(be[0],be[1]);break;case"c":ri.apply(this,be);break;case"h":Vc()}}return this},b.__private__.rect=b.rect=function(S,q,he,be,Ae){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(be)||!$s(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return V===R&&(be=-be),Y([L(K(S)),L(P(q)),L(K(he)),L(K(be)),"re"].join(" ")),Jo(Ae),this},b.__private__.triangle=b.triangle=function(S,q,he,be,Ae,$e,rt){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(be)||isNaN(Ae)||isNaN($e)||!$s(rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-S,be-q],[Ae-he,$e-be],[S-Ae,q-$e]],S,q,[1,1],rt,!0),this},b.__private__.roundedRect=b.roundedRect=function(S,q,he,be,Ae,$e,rt){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(be)||isNaN(Ae)||isNaN($e)||!$s(rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Mt=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*he),$e=Math.min($e,.5*be),this.lines([[he-2*Ae,0],[Ae*Mt,0,Ae,$e-$e*Mt,Ae,$e],[0,be-2*$e],[0,$e*Mt,-Ae*Mt,$e,-Ae,$e],[2*Ae-he,0],[-Ae*Mt,0,-Ae,-$e*Mt,-Ae,-$e],[0,2*$e-be],[0,-$e*Mt,Ae*Mt,-$e,Ae,-$e]],S+Ae,q,[1,1],rt,!0),this},b.__private__.ellipse=b.ellipse=function(S,q,he,be,Ae){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(be)||!$s(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $e=4/3*(Math.SQRT2-1)*he,rt=4/3*(Math.SQRT2-1)*be;return Pc(S+he,q),ri(S+he,q-rt,S+$e,q-be,S,q-be),ri(S-$e,q-be,S-he,q-rt,S-he,q),ri(S-he,q+rt,S-$e,q+be,S,q+be),ri(S+$e,q+be,S+he,q+rt,S+he,q),Jo(Ae),this},b.__private__.circle=b.circle=function(S,q,he,be){if(isNaN(S)||isNaN(q)||isNaN(he)||!$s(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,q,he,he,be)},b.setFont=function(S,q,he){return he&&(q=H(q,he)),yt=Yi(S,q,{disableWarning:!1}),this};var Ki=b.__private__.getFont=b.getFont=function(){return We[Yi.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var S,q,he={};for(S in at)if(at.hasOwnProperty(S))for(q in he[S]=[],at[S])at[S].hasOwnProperty(q)&&he[S].push(q);return he},b.addFont=function(S,q,he,be,Ae){var $e=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$e.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&$e.indexOf(arguments[3])==-1&&(he=H(he,be)),xn.call(this,S,q,he,Ae=Ae||"Identity-H")};var Da,el=n.lineWidth||.200025,No=b.__private__.getLineWidth=b.getLineWidth=function(){return el},Yt=b.__private__.setLineWidth=b.setLineWidth=function(S){return el=S,Y(L(K(S))+" w"),this};b.__private__.setLineDash=Ut.API.setLineDash=Ut.API.setLineDashPattern=function(S,q){if(S=S||[],q=q||0,isNaN(q)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(he){return L(K(he))}).join(" "),q=L(K(q)),Y("["+S+"] "+q+" d"),this};var Ru=b.__private__.getLineHeight=b.getLineHeight=function(){return ge*Da};b.__private__.getLineHeight=b.getLineHeight=function(){return ge*Da};var zc=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Da=S),this},Iu=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Da};zc(n.lineHeight);var fi=b.__private__.getHorizontalCoordinate=function(S){return K(S)},Ss=b.__private__.getVerticalCoordinate=function(S){return V===D?S:pt[$].mediaBox.topRightY-pt[$].mediaBox.bottomLeftY-K(S)},qc=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(S){return L(fi(S))},tl=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(S){return L(Ss(S))},pi=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return rn(pi)},b.__private__.setStrokeColor=b.setDrawColor=function(S,q,he,be){return pi=$n({ch1:S,ch2:q,ch3:he,ch4:be,pdfColorType:"draw",precision:2}),Y(pi),this};var nl=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return rn(nl)},b.__private__.setFillColor=b.setFillColor=function(S,q,he,be){return nl=$n({ch1:S,ch2:q,ch3:he,ch4:be,pdfColorType:"fill",precision:2}),Y(nl),this};var pa=n.textColor||"0 g",Fu=b.__private__.getTextColor=b.getTextColor=function(){return rn(pa)};b.__private__.setTextColor=b.setTextColor=function(S,q,he,be){return pa=$n({ch1:S,ch2:q,ch3:he,ch4:be,pdfColorType:"text",precision:3}),this};var Ni=n.charSpace,Pl=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Ni||0)};b.__private__.setCharSpace=b.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ni=S,this};var zl=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(S){var q=b.CapJoinStyles[S];if(q===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zl=q,Y(q+" J"),this};var ds=0;b.__private__.setLineJoin=b.setLineJoin=function(S){var q=b.CapJoinStyles[S];if(q===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ds=q,Y(q+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(L(K(S))+" M"),this},b.GState=Op,b.setGState=function(S){(S=typeof S=="string"?Ct[Vt[S]]:ma(null,S)).equals(Jt)||(Y("/"+S.id+" gs"),Jt=S)};var ma=function(S,q){if(!S||!Vt[S]){var he=!1;for(var be in Ct)if(Ct.hasOwnProperty(be)&&Ct[be].equals(q)){he=!0;break}if(he)q=Ct[be];else{var Ae="GS"+(Object.keys(Ct).length+1).toString(10);Ct[Ae]=q,q.id=Ae}return S&&(Vt[S]=q.id),qt.publish("addGState",q),q}};b.addGState=function(S,q){return ma(S,q),this},b.saveGraphicsState=function(){return Y("q"),bt.push({key:yt,size:ge,color:pa}),this},b.restoreGraphicsState=function(){Y("Q");var S=bt.pop();return yt=S.key,ge=S.size,pa=S.color,Jt=null,this},b.setCurrentTransformationMatrix=function(S){return Y(S.toString()+" cm"),this},b.comment=function(S){return Y("#"+S),this};var Ai=function(S,q){var he=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function($e){isNaN($e)||(he=parseFloat($e))}});var be=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function($e){isNaN($e)||(be=parseFloat($e))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function($e){Ae=$e.toString()}}),this},Ra=function(S,q,he,be){Ai.call(this,S,q),this.type="rect";var Ae=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(rt){isNaN(rt)||(Ae=parseFloat(rt))}});var $e=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $e},set:function(rt){isNaN(rt)||($e=parseFloat(rt))}}),this},ql=function(){this.page=wt,this.currentPage=$,this.pages=Be.slice(0),this.pagesContext=pt.slice(0),this.x=Me,this.y=ut,this.matrix=ot,this.width=Fa($),this.height=Uc($),this.outputDestination=Xe,this.id="",this.objectNumber=-1};ql.prototype.restore=function(){wt=this.page,$=this.currentPage,pt=this.pagesContext,Be=this.pages,Me=this.x,ut=this.y,ot=this.matrix,sl($,this.width),Va($,this.height),Xe=this.outputDestination};var rl=function(S,q,he,be,Ae){_e.push(new ql),wt=$=0,Be=[],Me=S,ut=q,ot=Ae,Tn([he,be])};for(var Ia in b.beginFormObject=function(S,q,he,be,Ae){return rl(S,q,he,be,Ae),this},b.endFormObject=function(S){return(function(q){if(ft[q])_e.pop().restore();else{var he=new ql,be="Xo"+(Object.keys(Ee).length+1).toString(10);he.id=be,ft[q]=be,Ee[be]=he,qt.publish("addFormObject",he),_e.pop().restore()}})(S),this},b.doFormObject=function(S,q){var he=Ee[ft[S]];return Y("q"),Y(q.toString()+" cm"),Y("/"+he.id+" Do"),Y("Q"),this},b.getFormObject=function(S){var q=Ee[ft[S]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},b.save=function(S,q){return S=S||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(hu(Si(Ds()),S),typeof hu.unload=="function"&&on.setTimeout&&setTimeout(hu.unload,911),this):new Promise(function(he,be){try{var Ae=hu(Si(Ds()),S);typeof hu.unload=="function"&&on.setTimeout&&setTimeout(hu.unload,911),he(Ae)}catch($e){be($e.message)}})},Ut.API)Ut.API.hasOwnProperty(Ia)&&(Ia==="events"&&Ut.API.events.length?(function(S,q){var he,be,Ae;for(Ae=q.length-1;Ae!==-1;Ae--)he=q[Ae][0],be=q[Ae][1],S.subscribe.apply(S,[he].concat(typeof be=="function"?[be]:be))})(qt,Ut.API.events):b[Ia]=Ut.API[Ia]);function Fa(S){return pt[S].mediaBox.topRightX-pt[S].mediaBox.bottomLeftX}function sl(S,q){pt[S].mediaBox.topRightX=q+pt[S].mediaBox.bottomLeftX}function Uc(S){return pt[S].mediaBox.topRightY-pt[S].mediaBox.bottomLeftY}function Va(S,q){pt[S].mediaBox.topRightY=q+pt[S].mediaBox.bottomLeftY}var Ba=b.getPageWidth=function(S){return Fa(S=S||$)/xt},Vu=b.setPageWidth=function(S,q){sl(S,q*xt)},Pa=b.getPageHeight=function(S){return Uc(S=S||$)/xt},Bu=b.setPageHeight=function(S,q){Va(S,q*xt)};return b.internal={pdfEscape:Pn,getStyle:Fc,getFont:Ki,getFontSize:Re,getCharSpace:Pl,getTextColor:Fu,getLineHeight:Ru,getLineHeightFactor:Iu,getLineWidth:No,write:Ie,getHorizontalCoordinate:fi,getVerticalCoordinate:Ss,getCoordinateString:qc,getVerticalCoordinateString:tl,collections:{},newObject:$t,newAdditionalObject:Jn,newObjectDeferred:dn,newObjectDeferredBegin:fn,getFilters:Er,putStream:us,events:qt,scaleFactor:xt,pageSize:{getWidth:function(){return Ba($)},setWidth:function(S){Vu($,S)},getHeight:function(){return Pa($)},setHeight:function(S){Bu($,S)}},encryptionOptions:p,encryption:zr,getEncryptor:function(S){return p!==null?zr.encryptor(S,0):function(q){return q}},output:_o,getNumberOfPages:_s,get pages(){return Be},out:Y,f2:j,f3:I,getPageInfo:Lr,getPageInfoByObjId:So,getCurrentPageInfo:Bl,getPDFVersion:N,Point:Ai,Rectangle:Ra,Matrix:Fe,hasHotfix:hs},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Ba($)},set:function(S){Vu($,S)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Pa($)},set:function(S){Bu($,S)},enumerable:!0,configurable:!0}),(function(S){for(var q=0,he=et.length;q<he;q++){var be=xn.call(this,S[q][0],S[q][1],S[q][2],et[q][3],!0);y===!1&&(_[be]=!0);var Ae=S[q][0].split("-");sn({id:be,fontName:Ae[0],fontStyle:Ae[1]||""})}qt.publish("addFonts",{fonts:We,dictionary:at})}).call(b,et),yt="F1",sr(a,t),qt.publish("initialized"),b}Nh.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Nh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Nh.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Nh.prototype.processOwnerPassword=function(n,e){return Ig(Rg(e).substr(0,5),n)},Nh.prototype.encryptor=function(n,e){var t=Rg(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Ig(t,s)}},Op.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||rr(n)!==rr(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},Ut.API={events:[]},Ut.version="3.0.4";var ts=Ut.API,X2=1,Mu=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wh=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vn=function(n){return n.toFixed(2)},wc=function(n){return n.toFixed(5)};ts.__acroform__={};var $i=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},gx=function(n){return n*X2},Uo=function(n){var e=new O4,t=Dt.internal.getHeight(n)||0,s=Dt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(vn(s)),Number(vn(t))],e},_L=ts.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},SL=ts.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},NL=ts.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},as=ts.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return NL(n,e-1)},os=ts.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _L(n,e-1)},ls=ts.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return SL(n,e-1)},AL=ts.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=n[0],o=n[1],u=n[2],c=n[3],h={};return h.lowerLeft_X=t(a)||0,h.lowerLeft_Y=s(o+c)||0,h.upperRight_X=t(a+u)||0,h.upperRight_Y=s(o)||0,[Number(vn(h.lowerLeft_X)),Number(vn(h.lowerLeft_Y)),Number(vn(h.upperRight_X)),Number(vn(h.upperRight_Y))]},CL=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=Fg(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+vn(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Uo(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},Fg=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(j){return j.split(`
`)}):a.map(function(j){return[j]});var o=t,u=Dt.internal.getHeight(n)||0;u=u<0?-u:u;var c=Dt.internal.getWidth(n)||0;c=c<0?-c:c;var h=function(j,I,K){if(j+1<a.length){var P=I+" "+a[j+1][0];return q1(P,n,K).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var f,p,y=q1("3",n,o).height,_=n.multiline?u-o:(u-y)/2,b=_+=2,A=0,N=0,k=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+q1(e,n,o=12).width+", FieldWidth:"+c+`
`;break}for(var T="",R=0,D=0;D<a.length;D++)if(a.hasOwnProperty(D)){var V=!1;if(a[D].length!==1&&k!==a[D].length-1){if((y+2)*(R+2)+2>u)continue e;T+=a[D][k],V=!0,N=D,D--}else{T=(T+=a[D][k]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var F=parseInt(D),W=h(F,T,o),H=D>=a.length-1;if(W&&!H){T+=" ",k=0;continue}if(W||H){if(H)N=F;else if(n.multiline&&(y+2)*(R+2)+2>u)continue e}else{if(!n.multiline||(y+2)*(R+2)+2>u)continue e;N=F}}for(var L="",B=A;B<=N;B++){var te=a[B];if(n.multiline){if(B===N){L+=te[k]+" ",k=(k+1)%te.length;continue}if(B===A){L+=te[te.length-1]+" ";continue}}L+=te[0]+" "}switch(L=L.substr(L.length-1)==" "?L.substr(0,L.length-1):L,p=q1(L,n,o).width,n.textAlign){case"right":f=c-p-2;break;case"center":f=(c-p)/2;break;default:f=2}e+=vn(f)+" "+vn(b)+` Td
`,e+="("+Mu(L)+`) Tj
`,e+=-vn(f)+` 0 Td
`,b=-(o+2),p=0,A=V?N:N+1,R++,T=""}break}return s.text=e,s.fontSize=o,s},q1=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},TL={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kL=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},jL=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(xo.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(TL)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");X2=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new D4,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&kL(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var c=s[u],h=[],f=c.Rect;if(c.Rect&&(c.Rect=AL(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Dt.createDefaultAppearanceStream(c),rr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(h=c.getKeyValueListForStream()),c.Rect=f,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=CL(c);h.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var y="";for(var _ in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(_)){var b=c.appearanceStreamContent[_];if(y+="/"+_+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var u in b)if(b.hasOwnProperty(u)){var A=b[u];typeof A=="function"&&(A=A.call(a,c)),y+="/"+u+" "+A+" ",a.internal.acroformPlugin.xForms.indexOf(A)>=0||a.internal.acroformPlugin.xForms.push(A)}}else typeof(A=b)=="function"&&(A=A.call(a,c)),y+="/"+u+" "+A,a.internal.acroformPlugin.xForms.indexOf(A)>=0||a.internal.acroformPlugin.xForms.push(A);y+=">>"}h.push({key:"AP",value:`<<
`+y+">>"})}a.internal.putStream({additionalKeyValues:h,objectId:c.objId}),a.internal.out("endobj")}o&&(function(N,k){for(var T in N)if(N.hasOwnProperty(T)){var R=T,D=N[T];k.internal.newObjectDeferredBegin(D.objId,!0),rr(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete N[R]}})(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},L4=ts.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(u){return u};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),rr(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+Mu(s(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Qm=function(n,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Mu(s(n))+")"},Wo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wo.prototype.toString=function(){return this.objId+" 0 R"},Wo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Wo.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?n.push({key:s,value:L4(a,this.objId,this.scope)}):a instanceof Wo?(a.scope=this.scope,n.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:s,value:a}))}return n};var O4=function(){Wo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};$i(O4,Wo);var D4=function(){Wo.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Mu(t(n))+")"}},set:function(t){n=t}})};$i(D4,Wo);var xo=function n(){Wo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!as(e,3)},set:function(T){T?this.F=os(e,3):this.F=ls(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');t=T}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(T){s=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(T){s[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(T){s[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(T){s[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(T){s[3]=T}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Dp)return;o="FieldObject"+n.FieldNum++}var T=function(R){return R};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Mu(T(o))+")"},set:function(T){o=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(T){o=T}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(T){u=T}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(T){c=T}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(T){h=T}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/X2:f},set:function(T){f=T}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(T){p=T}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Dp||this instanceof yu))return Qm(y,this.objId,this.scope)},set:function(T){T=T.toString(),y=T}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Hs==0?Qm(_,this.objId,this.scope):_},set:function(T){T=T.toString(),_=this instanceof Hs==0?T.substr(0,1)==="("?wh(T.substr(1,T.length-2)):wh(T):T}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hs==1?wh(_.substr(1,_.length-1)):_},set:function(T){T=T.toString(),_=this instanceof Hs==1?"/"+T:T}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Hs==0?Qm(b,this.objId,this.scope):b},set:function(T){T=T.toString(),b=this instanceof Hs==0?T.substr(0,1)==="("?wh(T.substr(1,T.length-2)):wh(T):T}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hs==1?wh(b.substr(1,b.length-1)):b},set:function(T){T=T.toString(),b=this instanceof Hs==1?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(T){T=!!T,N=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(T){A=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,1)},set:function(T){T?this.Ff=os(this.Ff,1):this.Ff=ls(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,2)},set:function(T){T?this.Ff=os(this.Ff,2):this.Ff=ls(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,3)},set:function(T){T?this.Ff=os(this.Ff,3):this.Ff=ls(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');k=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(k){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};$i(xo,Wo);var Fh=function(){xo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return L4(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,c){c||(c=1);for(var h,f=[];h=u.exec(o);)f.push(h[c]);return f})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,18)},set:function(t){t?this.Ff=os(this.Ff,18):this.Ff=ls(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=os(this.Ff,19):this.Ff=ls(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,20)},set:function(t){t?(this.Ff=os(this.Ff,20),e.sort()):this.Ff=ls(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,22)},set:function(t){t?this.Ff=os(this.Ff,22):this.Ff=ls(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,23)},set:function(t){t?this.Ff=os(this.Ff,23):this.Ff=ls(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,27)},set:function(t){t?this.Ff=os(this.Ff,27):this.Ff=ls(this.Ff,27)}}),this.hasAppearanceStream=!1};$i(Fh,xo);var Vh=function(){Fh.call(this),this.fontName="helvetica",this.combo=!1};$i(Vh,Fh);var Bh=function(){Vh.call(this),this.combo=!0};$i(Bh,Vh);var Q1=function(){Bh.call(this),this.edit=!0};$i(Q1,Bh);var Hs=function(){xo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,15)},set:function(t){t?this.Ff=os(this.Ff,15):this.Ff=ls(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,16)},set:function(t){t?this.Ff=os(this.Ff,16):this.Ff=ls(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,17)},set:function(t){t?this.Ff=os(this.Ff,17):this.Ff=ls(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,26)},set:function(t){t?this.Ff=os(this.Ff,26):this.Ff=ls(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+Mu(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){rr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};$i(Hs,xo);var J1=function(){Hs.call(this),this.pushButton=!0};$i(J1,Hs);var Ph=function(){Hs.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};$i(Ph,Hs);var Dp=function(){var n,e;xo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+Mu(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){rr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$i(Dp,xo),Ph.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ph.prototype.createOption=function(n){var e=new Dp;return e.Parent=this,e.optionName=n,this.Kids.push(e),EL.call(this.scope,e),e};var ep=function(){Hs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dt.CheckBox.createAppearanceStream()};$i(ep,Hs);var yu=function(){xo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,13)},set:function(e){e?this.Ff=os(this.Ff,13):this.Ff=ls(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,21)},set:function(e){e?this.Ff=os(this.Ff,21):this.Ff=ls(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,23)},set:function(e){e?this.Ff=os(this.Ff,23):this.Ff=ls(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,24)},set:function(e){e?this.Ff=os(this.Ff,24):this.Ff=ls(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,25)},set:function(e){e?this.Ff=os(this.Ff,25):this.Ff=ls(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,26)},set:function(e){e?this.Ff=os(this.Ff,26):this.Ff=ls(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$i(yu,xo);var tp=function(){yu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,14)},set:function(n){n?this.Ff=os(this.Ff,14):this.Ff=ls(this.Ff,14)}}),this.password=!0};$i(tp,yu);var Dt={CheckBox:{createAppearanceStream:function(){return{N:{On:Dt.CheckBox.YesNormal},D:{On:Dt.CheckBox.YesPushDown,Off:Dt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=Fg(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+vn(Dt.internal.getWidth(n))+" "+vn(Dt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+vn(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Uo(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),a=[],o=Dt.internal.getHeight(n),u=Dt.internal.getWidth(n),c=Fg(n,n.caption);return a.push("1 g"),a.push("0 0 "+vn(u)+" "+vn(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+vn(u-1)+" "+vn(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+vn(c.fontSize)+" Tf "+s),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vn(Dt.internal.getWidth(n))+" "+vn(Dt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Dt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Dt.RadioButton.Circle.YesNormal,e.D[n]=Dt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=Dt.internal.getWidth(n)<=Dt.internal.getHeight(n)?Dt.internal.getWidth(n)/4:Dt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Dt.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+wc(Dt.internal.getWidth(n)/2)+" "+wc(Dt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=Dt.internal.getWidth(n)<=Dt.internal.getHeight(n)?Dt.internal.getWidth(n)/4:Dt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*Dt.internal.Bezier_C).toFixed(5)),u=Number((s*Dt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+wc(Dt.internal.getWidth(n)/2)+" "+wc(Dt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+wc(Dt.internal.getWidth(n)/2)+" "+wc(Dt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=Dt.internal.getWidth(n)<=Dt.internal.getHeight(n)?Dt.internal.getWidth(n)/4:Dt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*Dt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+wc(Dt.internal.getWidth(n)/2)+" "+wc(Dt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Dt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Dt.RadioButton.Cross.YesNormal,e.D[n]=Dt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Uo(n);e.scope=n.scope;var t=[],s=Dt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+vn(Dt.internal.getWidth(n)-2)+" "+vn(Dt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(vn(s.x1.x)+" "+vn(s.x1.y)+" m"),t.push(vn(s.x2.x)+" "+vn(s.x2.y)+" l"),t.push(vn(s.x4.x)+" "+vn(s.x4.y)+" m"),t.push(vn(s.x3.x)+" "+vn(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=Dt.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+vn(Dt.internal.getWidth(n))+" "+vn(Dt.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+vn(Dt.internal.getWidth(n)-2)+" "+vn(Dt.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(vn(t.x1.x)+" "+vn(t.x1.y)+" m"),s.push(vn(t.x2.x)+" "+vn(t.x2.y)+" l"),s.push(vn(t.x4.x)+" "+vn(t.x4.y)+" m"),s.push(vn(t.x3.x)+" "+vn(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Uo(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+vn(Dt.internal.getWidth(n))+" "+vn(Dt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Dt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Dt.internal.getWidth(n),t=Dt.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},Dt.internal.getWidth=function(n){var e=0;return rr(n)==="object"&&(e=gx(n.Rect[2])),e},Dt.internal.getHeight=function(n){var e=0;return rr(n)==="object"&&(e=gx(n.Rect[3])),e};var EL=ts.addField=function(n){if(jL(this,n),!(n instanceof xo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ts.AcroFormChoiceField=Fh,ts.AcroFormListBox=Vh,ts.AcroFormComboBox=Bh,ts.AcroFormEditBox=Q1,ts.AcroFormButton=Hs,ts.AcroFormPushButton=J1,ts.AcroFormRadioButton=Ph,ts.AcroFormCheckBox=ep,ts.AcroFormTextField=yu,ts.AcroFormPasswordField=tp,ts.AcroFormAppearance=Dt,ts.AcroForm={ChoiceField:Fh,ListBox:Vh,ComboBox:Bh,EditBox:Q1,Button:Hs,PushButton:J1,RadioButton:Ph,CheckBox:ep,TextField:yu,PasswordField:tp,Appearance:Dt},Ut.AcroForm={ChoiceField:Fh,ListBox:Vh,ComboBox:Bh,EditBox:Q1,Button:Hs,PushButton:J1,RadioButton:Ph,CheckBox:ep,TextField:yu,PasswordField:tp,Appearance:Dt};Ut.AcroForm;function R4(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(j,I){var K,P,ie,X,re,le=t;if((I=I||t)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(W(j))for(re in s)for(ie=s[re],K=0;K<ie.length;K+=1){for(X=!0,P=0;P<ie[K].length;P+=1)if(ie[K][P]!==void 0&&ie[K][P]!==j[P]){X=!1;break}if(X===!0){le=re;break}}else for(re in s)for(ie=s[re],K=0;K<ie.length;K+=1){for(X=!0,P=0;P<ie[K].length;P+=1)if(ie[K][P]!==void 0&&ie[K][P]!==j.charCodeAt(P)){X=!1;break}if(X===!0){le=re;break}}return le===t&&I!==t&&(le=I),le},o=function j(I){for(var K=this.internal.write,P=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:I.width}),X.push({key:"Height",value:I.height}),I.colorSpace===T.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===T.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var re="",le=0,fe=I.transparency.length;le<fe;le++)re+=I.transparency[le]+" "+I.transparency[le]+" ";X.push({key:"Mask",value:"["+re+"]"})}I.sMask!==void 0&&X.push({key:"SMask",value:I.objectId+1+" 0 R"});var Se=I.filter!==void 0?["/"+I.filter]:void 0;if(P({data:I.data,additionalKeyValues:X,alreadyAppliedFilters:Se,objectId:I.objectId}),K("endobj"),"sMask"in I&&I.sMask!==void 0){var z,M=(z=I.sMaskBitsPerComponent)!==null&&z!==void 0?z:I.bitsPerComponent,$={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:I.sMask};"filter"in I&&($.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(I.width),$.filter=I.filter),j.call(this,$)}if(I.colorSpace===T.INDEXED){var G=this.internal.newObject();P({data:L(new Uint8Array(I.palette)),objectId:G}),K("endobj")}},u=function(){var j=this.internal.collections[e+"images"];for(var I in j)o.call(this,j[I])},c=function(){var j,I=this.internal.collections[e+"images"],K=this.internal.write;for(var P in I)K("/I"+(j=I[P]).index,j.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var j=this.internal.collections[e+"images"];return h.call(this),j},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(j){return typeof n["process"+j.toUpperCase()]=="function"},_=function(j){return rr(j)==="object"&&j.nodeType===1},b=function(j,I){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var K=""+j.getAttribute("src");if(K.indexOf("data:image/")===0)return K1(unescape(K).split("base64,").pop());var P=n.loadFile(K,!0);if(P!==void 0)return P}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var ie;switch(I){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;default:ie="image/jpeg"}return K1(j.toDataURL(ie,1).split("base64,").pop())}},A=function(j){var I=this.internal.collections[e+"images"];if(I){for(var K in I)if(j===I[K].alias)return I[K]}},N=function(j,I,K){return j||I||(j=-96,I=-96),j<0&&(j=-1*K.width*72/j/this.internal.scaleFactor),I<0&&(I=-1*K.height*72/I/this.internal.scaleFactor),j===0&&(j=I*K.width/K.height),I===0&&(I=j*K.height/K.width),[j,I]},k=function(j,I,K,P,ie,X){var re=N.call(this,K,P,ie),le=this.internal.getCoordinateString,fe=this.internal.getVerticalCoordinateString,Se=f.call(this);if(K=re[0],P=re[1],Se[ie.index]=ie,X){X*=Math.PI/180;var z=Math.cos(X),M=Math.sin(X),$=function(J){return J.toFixed(4)},G=[$(z),$(M),$(-1*M),$(z),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,le(j),fe(I+P),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([le(K),"0","0",le(P),"0","0","cm"].join(" "))):this.internal.write([le(K),"0","0",le(P),le(j),fe(I+P),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},T=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=n.__addimage__.sHashCode=function(j){var I,K,P=0;if(typeof j=="string")for(K=j.length,I=0;I<K;I++)P=(P<<5)-P+j.charCodeAt(I),P|=0;else if(W(j))for(K=j.byteLength/2,I=0;I<K;I++)P=(P<<5)-P+j[I],P|=0;return P},V=n.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var I=!0;return j.length===0&&(I=!1),j.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(I=!1),I},F=n.__addimage__.extractImageFromDataUrl=function(j){if(j==null||!(j=j.trim()).startsWith("data:"))return null;var I=j.indexOf(",");return I<0?null:j.substring(0,I).trim().endsWith("base64")?j.substring(I+1):null};n.__addimage__.isArrayBuffer=function(j){return j instanceof ArrayBuffer};var W=n.__addimage__.isArrayBufferView=function(j){return j instanceof Int8Array||j instanceof Uint8Array||j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array},H=n.__addimage__.binaryStringToUint8Array=function(j){for(var I=j.length,K=new Uint8Array(I),P=0;P<I;P++)K[P]=j.charCodeAt(P);return K},L=n.__addimage__.arrayBufferToBinaryString=function(j){for(var I="",K=W(j)?j:new Uint8Array(j),P=0;P<K.length;P+=8192)I+=String.fromCharCode.apply(null,K.subarray(P,P+8192));return I};n.addImage=function(){var j,I,K,P,ie,X,re,le,fe;if(typeof arguments[1]=="number"?(I=t,K=arguments[1],P=arguments[2],ie=arguments[3],X=arguments[4],re=arguments[5],le=arguments[6],fe=arguments[7]):(I=arguments[1],K=arguments[2],P=arguments[3],ie=arguments[4],X=arguments[5],re=arguments[6],le=arguments[7],fe=arguments[8]),rr(j=arguments[0])==="object"&&!_(j)&&"imageData"in j){var Se=j;j=Se.imageData,I=Se.format||I||t,K=Se.x||K||0,P=Se.y||P||0,ie=Se.w||Se.width||ie,X=Se.h||Se.height||X,re=Se.alias||re,le=Se.compression||le,fe=Se.rotation||Se.angle||fe}var z=this.internal.getFilters();if(le===void 0&&z.indexOf("FlateEncode")!==-1&&(le="SLOW"),isNaN(K)||isNaN(P))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var M=B.call(this,j,I,re,le);return k.call(this,K,P,ie,X,M,fe),this};var B=function(j,I,K,P){var ie,X,re;if(typeof j=="string"&&a(j)===t){j=unescape(j);var le=te(j,!1);(le!==""||(le=n.loadFile(j,!0))!==void 0)&&(j=le)}if(_(j)&&(j=b(j,I)),I=a(j,I),!y(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((re=K)==null||re.length===0)&&(K=(function(fe){return typeof fe=="string"||W(fe)?D(fe):W(fe.data)?D(fe.data):null})(j)),(ie=A.call(this,K))||(j instanceof Uint8Array||I==="RGBA"||(X=j,j=H(j)),ie=this["process"+I.toUpperCase()](j,p.call(this),K,(function(fe){return fe&&typeof fe=="string"&&(fe=fe.toUpperCase()),fe in n.image_compression?fe:R.NONE})(P),X)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},te=n.__addimage__.convertBase64ToBinaryString=function(j,I){I=typeof I!="boolean"||I;var K,P="";if(typeof j=="string"){var ie;K=(ie=F(j))!==null&&ie!==void 0?ie:j;try{P=K1(K)}catch(X){if(I)throw V(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return P};n.getImageProperties=function(j){var I,K,P="";if(_(j)&&(j=b(j)),typeof j=="string"&&a(j)===t&&((P=te(j,!1))===""&&(P=n.loadFile(j)||""),j=P),K=a(j),!y(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(j instanceof Uint8Array||(j=H(j)),!(I=this["process"+K.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=K,I}})(Ut.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Ut.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,p=!1,y=0;y<f.length&&!p;y++)switch((s=f[y]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var _=0;_<f.length;_++){s=f[_];var b=this.internal.pdfEscape,A=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(N.objId),R=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y)+"] ")+"/Contents ("+b(T(s.contents))+")",o+=" /Popup "+k.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+b(T(R))+") >>",N.content=o;var D=N.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+c(s.bounds.y)+"] ")+" /Parent "+D,s.open&&(o+=" /Open true"),o+=" >>",k.content=o,this.internal.write(N.objId,"0 R",k.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y+s.bounds.h)+"] ";var V=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(A(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var F=this.annotations._nameMap[s.options.name];s.options.pageNumber=F.page,s.options.top=F.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(A(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var W=c(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+W+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,a,o,u){var c=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:h(t),y:f(s),w:h(t+a),h:f(s+o)},options:u,type:"link"})},n.textWithLink=function(t,s,a,o){var u,c,h=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var p=this.splitTextToSize(t,c).length;u=Math.ceil(f*p)}else c=h,u=f;return this.text(t,s,a,o),a+=.2*f,o.align==="center"&&(s-=h/2),o.align==="right"&&(s-=h),this.link(s,a-f,c,u,o),h},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(Ut.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(N){return e[N.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},c=n.__arabicParser__.isArabicEndLetter=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(N){return u(N)&&a.indexOf(N.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length==4},y=n.__arabicParser__.resolveLigatures=function(N){var k=0,T=t,R="",D=0;for(k=0;k<N.length;k+=1)T[N.charCodeAt(k)]!==void 0?(D++,typeof(T=T[N.charCodeAt(k)])=="number"&&(R+=String.fromCharCode(T),T=t,D=0),k===N.length-1&&(T=t,R+=N.charAt(k-(D-1)),k-=D-1,D=0)):(T=t,R+=N.charAt(k-D),k-=D,D=0);return R};n.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&s[N.charCodeAt(0)]!==void 0};var _=n.__arabicParser__.getCorrectForm=function(N,k,T){return u(N)?o(N)===!1?-1:!f(N)||!u(k)&&!u(T)||!u(T)&&c(k)||c(N)&&!u(k)||c(N)&&h(k)||c(N)&&c(k)?0:p(N)&&u(k)&&!c(k)&&u(T)&&f(T)?3:c(N)||!u(T)?1:2:-1},b=function(N){var k=0,T=0,R=0,D="",V="",F="",W=(N=N||"").split("\\s+"),H=[];for(k=0;k<W.length;k+=1){for(H.push(""),T=0;T<W[k].length;T+=1)D=W[k][T],V=W[k][T-1],F=W[k][T+1],u(D)?(R=_(D,V,F),H[k]+=R!==-1?String.fromCharCode(e[D.charCodeAt(0)][R]):D):H[k]+=D;H[k]=y(H[k])}return H.join(" ")},A=n.__arabicParser__.processArabic=n.processArabic=function(){var N,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(k)){var R=0;for(T=[],R=0;R<k.length;R+=1)Array.isArray(k[R])?T.push([b(k[R][0]),k[R][1],k[R][2]]):T.push([b(k[R])]);N=T}else N=b(k);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};n.events.push(["preProcessText",A])})(Ut.API),Ut.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ut.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(N){h=N}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(N){f=N}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(N){_=N}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(N){b=N}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(N){A=N}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return s.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,f){s.call(this);var p=(f=f||{}).fontSize||this.getFontSize(),y=f.font||this.getFont(),_=f.scaleFactor||this.internal.scaleFactor,b=0,A=0,N=0,k=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var T=f.maxWidth;T>0?typeof h=="string"?h=this.splitTextToSize(h,T):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(D,V){return D.concat(k.splitTextToSize(V,T))},[])):h=Array.isArray(h)?h:[h];for(var R=0;R<h.length;R++)b<(N=this.getStringUnitWidth(h[R],{font:y})*p)&&(b=N);return b!==0&&(A=h.length),{w:b/=_,h:Math.max((A*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/_,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var f=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===h.lineNumber?(h.x=(f.x||0)+(f.width||0),h.y=f.y||0):f.y+f.height+h.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=y.top,b&&_&&(this.printHeaderRow(h.lineNumber,!0),h.y+=_[0].height)):h.y=f.y+f.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-p,h.y+p,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+p,{align:"center",baseline:"top",maxWidth:h.width-p-p}):this.text(h.text,h.x+p,h.y+p,{align:"left",baseline:"top",maxWidth:h.width-p-p})),this.internal.__cell__.lastCell=h,this};n.table=function(h,f,p,y,_){if(s.call(this),!p)throw new Error("No data for PDF table.");var b,A,N,k,T=[],R=[],D=[],V={},F={},W=[],H=[],L=(_=_||{}).autoSize||!1,B=_.printHeaders!==!1,te=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,j=_.margins||Object.assign({width:this.getPageWidth()},e),I=typeof _.padding=="number"?_.padding:3,K=_.headerBackgroundColor||"#c8c8c8",P=_.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=te,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=P,this.setFontSize(te),y==null)R=T=Object.keys(p[0]),D=T.map(function(){return"left"});else if(Array.isArray(y)&&rr(y[0])==="object")for(T=y.map(function(Se){return Se.name}),R=y.map(function(Se){return Se.prompt||Se.name||""}),D=y.map(function(Se){return Se.align||"left"}),b=0;b<y.length;b+=1)F[y[b].name]=.7499990551181103*y[b].width;else Array.isArray(y)&&typeof y[0]=="string"&&(R=T=y,D=T.map(function(){return"left"}));if(L||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<T.length;b+=1){for(V[k=T[b]]=p.map(function(Se){return Se[k]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(R[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=V[k],this.setFont(void 0,"normal"),N=0;N<A.length;N+=1)W.push(this.getTextDimensions(A[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[k]=Math.max.apply(null,W)+I+I,W=[]}if(B){var ie={};for(b=0;b<T.length;b+=1)ie[T[b]]={},ie[T[b]].text=R[b],ie[T[b]].align=D[b];var X=c.call(this,ie,F);H=T.map(function(Se){return new o(h,f,F[Se],X,ie[Se].text,void 0,ie[Se].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var re=y.reduce(function(Se,z){return Se[z.name]=z.align,Se},{});for(b=0;b<p.length;b+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:b,data:p[b]},this);var le=c.call(this,p[b],F);for(N=0;N<T.length;N+=1){var fe=p[b][T[N]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:b,col:N,data:fe},this),u.call(this,new o(h,f,F[T[N]],le,fe,b+2,re[T[N]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=f,this};var c=function(h,f){var p=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(h).map(function(b){var A=h[b];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,f[b]-p-p)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/_+p+p},this).reduce(function(b,A){return Math.max(b,A)},0)};n.setTableHeaderRow=function(h){s.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,f){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){p=this.internal.__cell__.tableHeaderRow[b].clone(),f&&(p.y=this.internal.__cell__.margins.top||0,_.push(p)),p.lineNumber=h;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,p),this.setTextColor(A)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(Ut.API);var I4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},F4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Vg=R4(F4),V4=[100,200,300,400,500,600,700,800,900],ML=R4(V4);function Jm(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return I4[o=o||"normal"]?o:"normal"})(n.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof Vg[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:s,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,s].join(" ")}}}function bx(n,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(n[e[a]])return n[e[a]]}var LL={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},vx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function yx(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function xx(n){return n.trimLeft()}function OL(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function DL(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var U1,wx,_x,_h,H1,Sx,Nx,Ax,eg=["times"];function Cx(n,e,t,s,a){var o=4,u=kx;switch(a){case Ut.API.image_compression.FAST:o=1,u=Tx;break;case Ut.API.image_compression.MEDIUM:o=6,u=jx;break;case Ut.API.image_compression.SLOW:o=9,u=Ex}n=(function(h,f,p,y){for(var _,b=h.length/f,A=new Uint8Array(h.length+b),N=[RL,Tx,kx,jx,Ex],k=0;k<b;k+=1){var T=k*f,R=h.subarray(T,T+f);if(y)A.set(y(R,p,_),T+k);else{for(var D=N.length,V=[],F=0;F<D;F+=1)V[F]=N[F](R,p,_);var W=FL(V.concat());A.set(V[W],T+k)}_=R}return A})(n,e,Math.ceil(t*s/8),u);var c=Mg(n,{level:o});return Ut.API.__addimage__.arrayBufferToBinaryString(c)}function RL(n){var e=Array.apply([],n);return e.unshift(0),e}function Tx(n,e){var t=n.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=n[a-e]||0;s[a+1]=n[a]-o+256&255}return s}function kx(n,e,t){var s=n.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=n[o]-u+256&255}return a}function jx(n,e,t){var s=n.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=n[o-e]||0,c=t&&t[o]||0;a[o+1]=n[o]+256-(u+c>>>1)&255}return a}function Ex(n,e,t){var s=n.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=IL(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=n[o]-u+256&255}return a}function IL(n,e,t){if(n===e&&e===t)return n;var s=Math.abs(e-t),a=Math.abs(n-t),o=Math.abs(n+e-t-t);return s<=a&&s<=o?n:a<=o?e:t}function FL(n){var e=n.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function tg(n,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return B4(n,a)>>o&u}function Mx(n,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),c=(1<<s)-1,h=(e&c)<<u;(function(f,p,y){if(p+1<f.byteLength)f.setUint16(p,y,!1);else{var _=y>>8&255;f.setUint8(p,_)}})(n,o,B4(n,o)&~(c<<u)&65535|h)}function B4(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function VL(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,a=n[e++],o=a>>7,u=1<<1+(7&a);n[e++],n[e++];var c=null,h=null;o&&(c=e,h=u,e+=3*u);var f=!0,p=[],y=0,_=null,b=0,A=null;for(this.width=t,this.height=s;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,A=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var N=n[e++];y=n[e++]|n[e++]<<8,_=n[e++],1&N||(_=null),b=N>>2&7,e++;break;case 254:for(;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var k=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,D=n[e++]|n[e++]<<8,V=n[e++],F=V>>6&1,W=1<<1+(7&V),H=c,L=h,B=!1;V>>7&&(B=!0,H=e,L=W,e+=3*W);var te=e;for(e++;;){var j;if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}p.push({x:k,y:T,width:R,height:D,has_local_palette:B,palette_offset:H,palette_size:L,data_offset:te,data_length:e-te,transparent_index:_,interlaced:!!F,delay:y,disposal:b});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return A},this.frameInfo=function(I){if(I<0||I>=p.length)throw new Error("Frame index out of range.");return p[I]},this.decodeAndBlitFrameBGRA=function(I,K){var P=this.frameInfo(I),ie=P.width*P.height,X=new Uint8Array(ie);Lx(n,P.data_offset,X,ie);var re=P.palette_offset,le=P.transparent_index;le===null&&(le=256);var fe=P.width,Se=t-fe,z=fe,M=4*(P.y*t+P.x),$=4*((P.y+P.height)*t+P.x),G=M,J=4*Se;P.interlaced===!0&&(J+=4*t*7);for(var ae=8,pe=0,de=X.length;pe<de;++pe){var xe=X[pe];if(z===0&&(z=fe,(G+=J)>=$&&(J=4*Se+4*t*(ae-1),G=M+(fe+Se)*(ae<<1),ae>>=1)),xe===le)G+=4;else{var Ne=n[re+3*xe],Be=n[re+3*xe+1],Qe=n[re+3*xe+2];K[G++]=Qe,K[G++]=Be,K[G++]=Ne,K[G++]=255}--z}},this.decodeAndBlitFrameRGBA=function(I,K){var P=this.frameInfo(I),ie=P.width*P.height,X=new Uint8Array(ie);Lx(n,P.data_offset,X,ie);var re=P.palette_offset,le=P.transparent_index;le===null&&(le=256);var fe=P.width,Se=t-fe,z=fe,M=4*(P.y*t+P.x),$=4*((P.y+P.height)*t+P.x),G=M,J=4*Se;P.interlaced===!0&&(J+=4*t*7);for(var ae=8,pe=0,de=X.length;pe<de;++pe){var xe=X[pe];if(z===0&&(z=fe,(G+=J)>=$&&(J=4*Se+4*t*(ae-1),G=M+(fe+Se)*(ae<<1),ae>>=1)),xe===le)G+=4;else{var Ne=n[re+3*xe],Be=n[re+3*xe+1],Qe=n[re+3*xe+2];K[G++]=Ne,K[G++]=Be,K[G++]=Qe,K[G++]=255}--z}}}function Lx(n,e,t,s){for(var a=n[e++],o=1<<a,u=o+1,c=u+1,h=a+1,f=(1<<h)-1,p=0,y=0,_=0,b=n[e++],A=new Int32Array(4096),N=null;;){for(;p<16&&b!==0;)y|=n[e++]<<p,p+=8,b===1?b=n[e++]:--b;if(p<h)break;var k=y&f;if(y>>=h,p-=h,k!==o){if(k===u)break;for(var T=k<c?k:N,R=0,D=T;D>o;)D=A[D]>>8,++R;var V=D;if(_+R+(T!==k?1:0)>s)return void gr.log("Warning, gif stream longer than expected.");t[_++]=V;var F=_+=R;for(T!==k&&(t[_++]=V),D=T;R--;)D=A[D],t[--F]=255&D,D>>=8;N!==null&&c<4096&&(A[c++]=N<<8|V,c>=f+1&&h<12&&(++h,f=f<<1|1)),N=k}else c=u+1,f=(1<<(h=a+1))-1,N=null}return _!==s&&gr.log("Warning, gif stream shorter than expected."),t}function ng(n){var e,t,s,a,o,u=Math.floor,c=new Array(64),h=new Array(64),f=new Array(64),p=new Array(64),y=new Array(65535),_=new Array(65535),b=new Array(64),A=new Array(64),N=[],k=0,T=7,R=new Array(64),D=new Array(64),V=new Array(64),F=new Array(256),W=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(M,$){for(var G=0,J=0,ae=new Array,pe=1;pe<=16;pe++){for(var de=1;de<=M[pe];de++)ae[$[J]]=[],ae[$[J]][0]=G,ae[$[J]][1]=pe,J++,G++;G*=2}return ae}function re(M){for(var $=M[0],G=M[1]-1;G>=0;)$&1<<G&&(k|=1<<T),G--,--T<0&&(k==255?(le(255),le(0)):le(k),T=7,k=0)}function le(M){N.push(M)}function fe(M){le(M>>8&255),le(255&M)}function Se(M,$,G,J,ae){for(var pe,de=ae[0],xe=ae[240],Ne=(function(ge,qe){var Re,nt,ct,vt,It,St,Ft,jt,yt,xt,Me=0;for(yt=0;yt<8;++yt){Re=ge[Me],nt=ge[Me+1],ct=ge[Me+2],vt=ge[Me+3],It=ge[Me+4],St=ge[Me+5],Ft=ge[Me+6];var ut=Re+(jt=ge[Me+7]),ot=Re-jt,We=nt+Ft,at=nt-Ft,bt=ct+St,lt=ct-St,tn=vt+It,Ct=vt-It,Vt=ut+tn,Jt=ut-tn,wt=We+bt,pt=We-bt;ge[Me]=Vt+wt,ge[Me+4]=Vt-wt;var qt=.707106781*(pt+Jt);ge[Me+2]=Jt+qt,ge[Me+6]=Jt-qt;var wn=.382683433*((Vt=Ct+lt)-(pt=at+ot)),Ee=.5411961*Vt+wn,ft=1.306562965*pt+wn,_e=.707106781*(wt=lt+at),Fe=ot+_e,ht=ot-_e;ge[Me+5]=ht+Ee,ge[Me+3]=ht-Ee,ge[Me+1]=Fe+ft,ge[Me+7]=Fe-ft,Me+=8}for(Me=0,yt=0;yt<8;++yt){Re=ge[Me],nt=ge[Me+8],ct=ge[Me+16],vt=ge[Me+24],It=ge[Me+32],St=ge[Me+40],Ft=ge[Me+48];var Tt=Re+(jt=ge[Me+56]),Bt=Re-jt,nn=nt+Ft,$t=nt-Ft,dn=ct+St,fn=ct-St,Jn=vt+It,Gn=vt-It,Sn=Tt+Jn,rn=Tt-Jn,$n=nn+dn,Er=nn-dn;ge[Me]=Sn+$n,ge[Me+32]=Sn-$n;var us=.707106781*(Er+rn);ge[Me+16]=rn+us,ge[Me+48]=rn-us;var je=.382683433*((Sn=Gn+fn)-(Er=$t+Bt)),Pe=.5411961*Sn+je,Ze=1.306562965*Er+je,_t=.707106781*($n=fn+$t),gt=Bt+_t,kt=Bt-_t;ge[Me+40]=kt+Pe,ge[Me+24]=kt-Pe,ge[Me+8]=gt+Ze,ge[Me+56]=gt-Ze,Me++}for(yt=0;yt<64;++yt)xt=ge[yt]*qe[yt],b[yt]=xt>0?xt+.5|0:xt-.5|0;return b})(M,$),Be=0;Be<64;++Be)A[H[Be]]=Ne[Be];var Qe=A[0]-G;G=A[0],Qe==0?re(J[0]):(re(J[_[pe=32767+Qe]]),re(y[pe]));for(var Xe=63;Xe>0&&A[Xe]==0;)Xe--;if(Xe==0)return re(de),G;for(var st,Y=1;Y<=Xe;){for(var Ie=Y;A[Y]==0&&Y<=Xe;)++Y;var dt=Y-Ie;if(dt>=16){st=dt>>4;for(var et=1;et<=st;++et)re(xe);dt&=15}pe=32767+A[Y],re(ae[(dt<<4)+_[pe]]),re(y[pe]),Y++}return Xe!=63&&re(de),G}function z(M){M=Math.min(Math.max(M,1),100),o!=M&&((function($){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var ae=u((G[J]*$+50)/100);ae=Math.min(Math.max(ae,1),255),c[H[J]]=ae}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var xe=u((pe[de]*$+50)/100);xe=Math.min(Math.max(xe,1),255),h[H[de]]=xe}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,Qe=0;Qe<8;Qe++)for(var Xe=0;Xe<8;Xe++)f[Be]=1/(c[H[Be]]*Ne[Qe]*Ne[Xe]*8),p[Be]=1/(h[H[Be]]*Ne[Qe]*Ne[Xe]*8),Be++})(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),o=M)}this.encode=function(M,$){$&&z($),N=new Array,k=0,T=7,fe(65496),fe(65504),fe(16),le(74),le(70),le(73),le(70),le(0),le(1),le(1),le(0),fe(1),fe(1),le(0),le(0),(function(){fe(65499),fe(132),le(0);for(var nt=0;nt<64;nt++)le(c[nt]);le(1);for(var ct=0;ct<64;ct++)le(h[ct])})(),(function(nt,ct){fe(65472),fe(17),le(8),fe(ct),fe(nt),le(3),le(1),le(17),le(0),le(2),le(17),le(1),le(3),le(17),le(1)})(M.width,M.height),(function(){fe(65476),fe(418),le(0);for(var nt=0;nt<16;nt++)le(L[nt+1]);for(var ct=0;ct<=11;ct++)le(B[ct]);le(16);for(var vt=0;vt<16;vt++)le(te[vt+1]);for(var It=0;It<=161;It++)le(j[It]);le(1);for(var St=0;St<16;St++)le(I[St+1]);for(var Ft=0;Ft<=11;Ft++)le(K[Ft]);le(17);for(var jt=0;jt<16;jt++)le(P[jt+1]);for(var yt=0;yt<=161;yt++)le(ie[yt])})(),fe(65498),fe(12),le(3),le(1),le(0),le(2),le(17),le(3),le(17),le(0),le(63),le(0);var G=0,J=0,ae=0;k=0,T=7,this.encode.displayName="_encode_";for(var pe,de,xe,Ne,Be,Qe,Xe,st,Y,Ie=M.data,dt=M.width,et=M.height,ge=4*dt,qe=0;qe<et;){for(pe=0;pe<ge;){for(Be=ge*qe+pe,Xe=-1,st=0,Y=0;Y<64;Y++)Qe=Be+(st=Y>>3)*ge+(Xe=4*(7&Y)),qe+st>=et&&(Qe-=ge*(qe+1+st-et)),pe+Xe>=ge&&(Qe-=pe+Xe-ge+4),de=Ie[Qe++],xe=Ie[Qe++],Ne=Ie[Qe++],R[Y]=(W[de]+W[xe+256|0]+W[Ne+512|0]>>16)-128,D[Y]=(W[de+768|0]+W[xe+1024|0]+W[Ne+1280|0]>>16)-128,V[Y]=(W[de+1280|0]+W[xe+1536|0]+W[Ne+1792|0]>>16)-128;G=Se(R,f,G,e,s),J=Se(D,p,J,t,a),ae=Se(V,p,ae,t,a),pe+=32}qe+=8}if(T>=0){var Re=[];Re[1]=T+1,Re[0]=(1<<T+1)-1,re(Re)}return fe(65497),new Uint8Array(N)},n=n||50,(function(){for(var M=String.fromCharCode,$=0;$<256;$++)F[$]=M($)})(),e=X(L,B),t=X(I,K),s=X(te,j),a=X(P,ie),(function(){for(var M=1,$=2,G=1;G<=15;G++){for(var J=M;J<$;J++)_[32767+J]=G,y[32767+J]=[],y[32767+J][1]=G,y[32767+J][0]=J;for(var ae=-($-1);ae<=-M;ae++)_[32767+ae]=G,y[32767+ae]=[],y[32767+ae][1]=G,y[32767+ae][0]=$-1+ae;M<<=1,$<<=1}})(),(function(){for(var M=0;M<256;M++)W[M]=19595*M,W[M+256|0]=38470*M,W[M+512|0]=7471*M+32768,W[M+768|0]=-11059*M,W[M+1024|0]=-21709*M,W[M+1280|0]=32768*M+8421375,W[M+1536|0]=-27439*M,W[M+1792|0]=-5329*M})(),z(n)}function io(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ox(n){function e(B){if(!B)throw Error("assert :P")}function t(B,te,j){for(var I=0;4>I;I++)if(B[te+I]!=j.charCodeAt(I))return!0;return!1}function s(B,te,j,I,K){for(var P=0;P<K;P++)B[te+P]=j[I+P]}function a(B,te,j,I){for(var K=0;K<I;K++)B[te+K]=j}function o(B){return new Int32Array(B)}function u(B,te){for(var j=[],I=0;I<B;I++)j.push(new te);return j}function c(B,te){var j=[];return(function I(K,P,ie){for(var X=ie[P],re=0;re<X&&(K.push(ie.length>P+1?[]:new te),!(ie.length<P+1));re++)I(K[re],P+1,ie)})(j,0,B),j}var h=function(){var B=this;function te(m,x){for(var C=1<<x-1>>>0;m&C;)C>>>=1;return C?(m&C-1)+C:m}function j(m,x,C,E,U){e(!(E%C));do m[x+(E-=C)]=U;while(0<E)}function I(m,x,C,E,U){if(e(2328>=U),512>=U)var Z=o(512);else if((Z=o(U))==null)return 0;return(function(Q,se,oe,ue,ve,Le){var ce,we,Te=se,He=1<<oe,ke=o(16),Ue=o(16);for(e(ve!=0),e(ue!=null),e(Q!=null),e(0<oe),we=0;we<ve;++we){if(15<ue[we])return 0;++ke[ue[we]]}if(ke[0]==ve)return 0;for(Ue[1]=0,ce=1;15>ce;++ce){if(ke[ce]>1<<ce)return 0;Ue[ce+1]=Ue[ce]+ke[ce]}for(we=0;we<ve;++we)ce=ue[we],0<ue[we]&&(Le[Ue[ce]++]=we);if(Ue[15]==1)return(ue=new K).g=0,ue.value=Le[0],j(Q,Te,1,He,ue),He;var Ye,it=-1,tt=He-1,Ot=0,Nt=1,an=1,Et=1<<oe;for(we=0,ce=1,ve=2;ce<=oe;++ce,ve<<=1){if(Nt+=an<<=1,0>(an-=ke[ce]))return 0;for(;0<ke[ce];--ke[ce])(ue=new K).g=ce,ue.value=Le[we++],j(Q,Te+Ot,ve,Et,ue),Ot=te(Ot,ce)}for(ce=oe+1,ve=2;15>=ce;++ce,ve<<=1){if(Nt+=an<<=1,0>(an-=ke[ce]))return 0;for(;0<ke[ce];--ke[ce]){if(ue=new K,(Ot&tt)!=it){for(Te+=Et,Ye=1<<(it=ce)-oe;15>it&&!(0>=(Ye-=ke[it]));)++it,Ye<<=1;He+=Et=1<<(Ye=it-oe),Q[se+(it=Ot&tt)].g=Ye+oe,Q[se+it].value=Te-se-it}ue.g=ce-oe,ue.value=Le[we++],j(Q,Te+(Ot>>oe),ve,Et,ue),Ot=te(Ot,ce)}}return Nt!=2*Ue[15]-1?0:He})(m,x,C,E,U,Z)}function K(){this.value=this.g=0}function P(){this.value=this.g=0}function ie(){this.G=u(5,K),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(To,P)}function X(m,x,C,E){e(m!=null),e(x!=null),e(2147483648>E),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=x,m.pa=C,m.Jd=x,m.Yc=C+E,m.Zc=4<=E?C+E-4+1:C,de(m)}function re(m,x){for(var C=0;0<x--;)C|=Ne(m,128)<<x;return C}function le(m,x){var C=re(m,x);return xe(m)?-C:C}function fe(m,x,C,E){var U,Z=0;for(e(m!=null),e(x!=null),e(4294967288>E),m.Sb=E,m.Ra=0,m.u=0,m.h=0,4<E&&(E=4),U=0;U<E;++U)Z+=x[C+U]<<8*U;m.Ra=Z,m.bb=E,m.oa=x,m.pa=C}function Se(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<va-8>>>0,++m.bb,m.u-=8;J(m)&&(m.h=1,m.u=0)}function z(m,x){if(e(0<=x),!m.h&&x<=Xs){var C=G(m)&si[x];return m.u+=x,Se(m),C}return m.h=1,m.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(m){return m.Ra>>>(m.u&va-1)>>>0}function J(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>va}function ae(m,x){m.u=x,m.h=J(m)}function pe(m){m.u>=ya&&(e(m.u>=ya),Se(m))}function de(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function xe(m){return re(m,1)}function Ne(m,x){var C=m.Ca;0>m.b&&de(m);var E=m.b,U=C*x>>>8,Z=(m.I>>>E>U)+0;for(Z?(C-=U,m.I-=U+1<<E>>>0):C=U+1,E=C,U=0;256<=E;)U+=8,E>>=8;return E=7^U+Ga[E],m.b-=E,m.Ca=(C<<E)-1,Z}function Be(m,x,C){m[x+0]=C>>24&255,m[x+1]=C>>16&255,m[x+2]=C>>8&255,m[x+3]=255&C}function Qe(m,x){return m[x+0]|m[x+1]<<8}function Xe(m,x){return Qe(m,x)|m[x+2]<<16}function st(m,x){return Qe(m,x)|Qe(m,x+2)<<16}function Y(m,x){var C=1<<x;return e(m!=null),e(0<x),m.X=o(C),m.X==null?0:(m.Mb=32-x,m.Xa=x,1)}function Ie(m,x){e(m!=null),e(x!=null),e(m.Xa==x.Xa),s(x.X,0,m.X,0,1<<x.Xa)}function dt(){this.X=[],this.Xa=this.Mb=0}function et(m,x,C,E){e(C!=null),e(E!=null);var U=C[0],Z=E[0];return U==0&&(U=(m*Z+x/2)/x),Z==0&&(Z=(x*U+m/2)/m),0>=U||0>=Z?0:(C[0]=U,E[0]=Z,1)}function ge(m,x){return m+(1<<x)-1>>>x}function qe(m,x){return((4278255360&m)+(4278255360&x)>>>0&4278255360)+((16711935&m)+(16711935&x)>>>0&16711935)>>>0}function Re(m,x){B[x]=function(C,E,U,Z,Q,se,oe){var ue;for(ue=0;ue<Q;++ue){var ve=B[m](se[oe+ue-1],U,Z+ue);se[oe+ue]=qe(C[E+ue],ve)}}}function nt(){this.ud=this.hd=this.jd=0}function ct(m,x){return((4278124286&(m^x))>>>1)+(m&x)>>>0}function vt(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function It(m,x){return vt(m+(m-x+.5>>1))}function St(m,x,C){return Math.abs(x-C)-Math.abs(m-C)}function Ft(m,x,C,E,U,Z,Q){for(E=Z[Q-1],C=0;C<U;++C)Z[Q+C]=E=qe(m[x+C],E)}function jt(m,x,C,E,U){var Z;for(Z=0;Z<C;++Z){var Q=m[x+Z],se=Q>>8&255,oe=16711935&(oe=(oe=16711935&Q)+((se<<16)+se));E[U+Z]=(4278255360&Q)+oe>>>0}}function yt(m,x){x.jd=255&m,x.hd=m>>8&255,x.ud=m>>16&255}function xt(m,x,C,E,U,Z){var Q;for(Q=0;Q<E;++Q){var se=x[C+Q],oe=se>>>8,ue=se,ve=255&(ve=(ve=se>>>16)+((m.jd<<24>>24)*(oe<<24>>24)>>>5));ue=255&(ue=(ue+=(m.hd<<24>>24)*(oe<<24>>24)>>>5)+((m.ud<<24>>24)*(ve<<24>>24)>>>5)),U[Z+Q]=(4278255360&se)+(ve<<16)+ue}}function Me(m,x,C,E,U){B[x]=function(Z,Q,se,oe,ue,ve,Le,ce,we){for(oe=Le;oe<ce;++oe)for(Le=0;Le<we;++Le)ue[ve++]=U(se[E(Z[Q++])])},B[m]=function(Z,Q,se,oe,ue,ve,Le){var ce=8>>Z.b,we=Z.Ea,Te=Z.K[0],He=Z.w;if(8>ce)for(Z=(1<<Z.b)-1,He=(1<<ce)-1;Q<se;++Q){var ke,Ue=0;for(ke=0;ke<we;++ke)ke&Z||(Ue=E(oe[ue++])),ve[Le++]=U(Te[Ue&He]),Ue>>=ce}else B["VP8LMapColor"+C](oe,ue,Te,He,ve,Le,Q,se,we)}}function ut(m,x,C,E,U){for(C=x+C;x<C;){var Z=m[x++];E[U++]=Z>>16&255,E[U++]=Z>>8&255,E[U++]=255&Z}}function ot(m,x,C,E,U){for(C=x+C;x<C;){var Z=m[x++];E[U++]=Z>>16&255,E[U++]=Z>>8&255,E[U++]=255&Z,E[U++]=Z>>24&255}}function We(m,x,C,E,U){for(C=x+C;x<C;){var Z=(Q=m[x++])>>16&240|Q>>12&15,Q=240&Q|Q>>28&15;E[U++]=Z,E[U++]=Q}}function at(m,x,C,E,U){for(C=x+C;x<C;){var Z=(Q=m[x++])>>16&248|Q>>13&7,Q=Q>>5&224|Q>>3&31;E[U++]=Z,E[U++]=Q}}function bt(m,x,C,E,U){for(C=x+C;x<C;){var Z=m[x++];E[U++]=255&Z,E[U++]=Z>>8&255,E[U++]=Z>>16&255}}function lt(m,x,C,E,U,Z){if(Z==0)for(C=x+C;x<C;)Be(E,((Z=m[x++])[0]>>24|Z[1]>>8&65280|Z[2]<<8&16711680|Z[3]<<24)>>>0),U+=32;else s(E,U,m,x,C)}function tn(m,x){B[x][0]=B[m+"0"],B[x][1]=B[m+"1"],B[x][2]=B[m+"2"],B[x][3]=B[m+"3"],B[x][4]=B[m+"4"],B[x][5]=B[m+"5"],B[x][6]=B[m+"6"],B[x][7]=B[m+"7"],B[x][8]=B[m+"8"],B[x][9]=B[m+"9"],B[x][10]=B[m+"10"],B[x][11]=B[m+"11"],B[x][12]=B[m+"12"],B[x][13]=B[m+"13"],B[x][14]=B[m+"0"],B[x][15]=B[m+"0"]}function Ct(m){return m==Jc||m==Wu||m==Kl||m==Gu}function Vt(){this.eb=[],this.size=this.A=this.fb=0}function Jt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Vt,this.f.kb=new Jt,this.sd=null}function pt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wn(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function Ee(m,x){var C=m.T,E=x.ba.f.RGBA,U=E.eb,Z=E.fb+m.ka*E.A,Q=ks[x.ba.S],se=m.y,oe=m.O,ue=m.f,ve=m.N,Le=m.ea,ce=m.W,we=x.cc,Te=x.dc,He=x.Mc,ke=x.Nc,Ue=m.ka,Ye=m.ka+m.T,it=m.U,tt=it+1>>1;for(Ue==0?Q(se,oe,null,null,ue,ve,Le,ce,ue,ve,Le,ce,U,Z,null,null,it):(Q(x.ec,x.fc,se,oe,we,Te,He,ke,ue,ve,Le,ce,U,Z-E.A,U,Z,it),++C);Ue+2<Ye;Ue+=2)we=ue,Te=ve,He=Le,ke=ce,ve+=m.Rc,ce+=m.Rc,Z+=2*E.A,Q(se,(oe+=2*m.fa)-m.fa,se,oe,we,Te,He,ke,ue,ve,Le,ce,U,Z-E.A,U,Z,it);return oe+=m.fa,m.j+Ye<m.o?(s(x.ec,x.fc,se,oe,it),s(x.cc,x.dc,ue,ve,tt),s(x.Mc,x.Nc,Le,ce,tt),C--):1&Ye||Q(se,oe,null,null,ue,ve,Le,ce,ue,ve,Le,ce,U,Z+E.A,null,null,it),C}function ft(m,x,C){var E=m.F,U=[m.J];if(E!=null){var Z=m.U,Q=x.ba.S,se=Q==Qc||Q==Kl;x=x.ba.f.RGBA;var oe=[0],ue=m.ka;oe[0]=m.T,m.Kb&&(ue==0?--oe[0]:(--ue,U[0]-=m.width),m.j+m.ka+m.T==m.o&&(oe[0]=m.o-m.j-ue));var ve=x.eb;ue=x.fb+ue*x.A,m=Yc(E,U[0],m.width,Z,oe,ve,ue+(se?0:3),x.A),e(C==oe),m&&Ct(Q)&&ll(ve,ue,se,Z,oe,x.A)}return 0}function _e(m){var x=m.ma,C=x.ba.S,E=11>C,U=C==Fs||C==ki||C==Qc||C==Zl||C==12||Ct(C);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!Wa(x.Oa,m,U?11:12))return 0;if(U&&Ct(C)&&Hc(),m.da)alert("todo:use_scaling");else{if(E){if(x.Ib=wn,m.Kb){if(C=m.U+1>>1,x.memory=o(m.U+2*C),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+m.U,x.Mc=x.cc,x.Nc=x.dc+C,x.Ib=Ee,Hc()}}else alert("todo:EmitYUV");U&&(x.Jb=ft,E&&Qi())}if(E&&!Do){for(m=0;256>m;++m)js[m]=89858*(m-128)+ec>>Di,d0[m]=-22014*(m-128)+ec,zf[m]=-45773*(m-128),Ku[m]=113618*(m-128)+ec>>Di;for(m=dl;m<Oo;++m)x=76283*(m-16)+ec>>Di,f0[m-dl]=Pr(x,255),p0[m-dl]=Pr(x+8>>4,15);Do=1}return 1}function Fe(m){var x=m.ma,C=m.U,E=m.T;return e(!(1&m.ka)),0>=C||0>=E?0:(C=x.Ib(m,x),x.Jb!=null&&x.Jb(m,x,C),x.Dc+=C,1)}function ht(m){m.ma.memory=null}function Tt(m,x,C,E){return z(m,8)!=47?0:(x[0]=z(m,14)+1,C[0]=z(m,14)+1,E[0]=z(m,1),z(m,3)!=0?0:!m.h)}function Bt(m,x){if(4>m)return m+1;var C=m-2>>1;return(2+(1&m)<<C)+z(x,C)+1}function nn(m,x){return 120<x?x-120:1<=(C=((C=Ei[x-1])>>4)*m+(8-(15&C)))?C:1;var C}function $t(m,x,C){var E=G(C),U=m[x+=255&E].g-8;return 0<U&&(ae(C,C.u+8),E=G(C),x+=m[x].value,x+=E&(1<<U)-1),ae(C,C.u+m[x].g),m[x].value}function dn(m,x,C){return C.g+=m.g,C.value+=m.value<<x>>>0,e(8>=C.g),m.g}function fn(m,x,C){var E=m.xc;return e((x=E==0?0:m.vc[m.md*(C>>E)+(x>>E)])<m.Wb),m.Ya[x]}function Jn(m,x,C,E){var U=m.ab,Z=m.c*x,Q=m.C;x=Q+x;var se=C,oe=E;for(E=m.Ta,C=m.Ua;0<U--;){var ue=m.gc[U],ve=Q,Le=x,ce=se,we=oe,Te=(oe=E,se=C,ue.Ea);switch(e(ve<Le),e(Le<=ue.nc),ue.hc){case 2:Ur(ce,we,(Le-ve)*Te,oe,se);break;case 0:var He=ve,ke=Le,Ue=oe,Ye=se,it=(Et=ue).Ea;He==0&&(Gl(ce,we,null,null,1,Ue,Ye),Ft(ce,we+1,0,0,it-1,Ue,Ye+1),we+=it,Ye+=it,++He);for(var tt=1<<Et.b,Ot=tt-1,Nt=ge(it,Et.b),an=Et.K,Et=Et.w+(He>>Et.b)*Nt;He<ke;){var kn=an,pr=Et,gn=1;for($l(ce,we,Ue,Ye-it,1,Ue,Ye);gn<it;){var At=(gn&~Ot)+tt;At>it&&(At=it),(0,$a[kn[pr++]>>8&15])(ce,we+ +gn,Ue,Ye+gn-it,At-gn,Ue,Ye+gn),gn=At}we+=it,Ye+=it,++He&Ot||(Et+=Nt)}Le!=ue.nc&&s(oe,se-Te,oe,se+(Le-ve-1)*Te,Te);break;case 1:for(Te=ce,ke=we,it=(ce=ue.Ea)-(Ye=ce&~(Ue=(we=1<<ue.b)-1)),He=ge(ce,ue.b),tt=ue.K,ue=ue.w+(ve>>ue.b)*He;ve<Le;){for(Ot=tt,Nt=ue,an=new nt,Et=ke+Ye,kn=ke+ce;ke<Et;)yt(Ot[Nt++],an),Yl(an,Te,ke,we,oe,se),ke+=we,se+=we;ke<kn&&(yt(Ot[Nt++],an),Yl(an,Te,ke,it,oe,se),ke+=it,se+=it),++ve&Ue||(ue+=He)}break;case 3:if(ce==oe&&we==se&&0<ue.b){for(ke=oe,ce=Te=se+(Le-ve)*Te-(Ye=(Le-ve)*ge(ue.Ea,ue.b)),we=oe,Ue=se,He=[],Ye=(it=Ye)-1;0<=Ye;--Ye)He[Ye]=we[Ue+Ye];for(Ye=it-1;0<=Ye;--Ye)ke[ce+Ye]=He[Ye];Pu(ue,ve,Le,oe,Te,oe,se)}else Pu(ue,ve,Le,ce,we,oe,se)}se=E,oe=C}oe!=C&&s(E,C,se,oe,Z)}function Gn(m,x){var C=m.V,E=m.Ba+m.c*m.C,U=x-m.C;if(e(x<=m.l.o),e(16>=U),0<U){var Z=m.l,Q=m.Ta,se=m.Ua,oe=Z.width;if(Jn(m,U,C,E),U=se=[se],e((C=m.C)<(E=x)),e(Z.v<Z.va),E>Z.o&&(E=Z.o),C<Z.j){var ue=Z.j-C;C=Z.j,U[0]+=ue*oe}if(C>=E?C=0:(U[0]+=4*Z.v,Z.ka=C-Z.j,Z.U=Z.va-Z.v,Z.T=E-C,C=1),C){if(se=se[0],11>(C=m.ca).S){var ve=C.f.RGBA,Le=(E=C.S,U=Z.U,Z=Z.T,ue=ve.eb,ve.A),ce=Z;for(ve=ve.fb+m.Ma*ve.A;0<ce--;){var we=Q,Te=se,He=U,ke=ue,Ue=ve;switch(E){case Uu:Xl(we,Te,He,ke,Ue);break;case Fs:Ya(we,Te,He,ke,Ue);break;case Jc:Ya(we,Te,He,ke,Ue),ll(ke,Ue,0,He,1,0);break;case Hu:al(we,Te,He,ke,Ue);break;case ki:lt(we,Te,He,ke,Ue,1);break;case Wu:lt(we,Te,He,ke,Ue,1),ll(ke,Ue,0,He,1,0);break;case Qc:lt(we,Te,He,ke,Ue,0);break;case Kl:lt(we,Te,He,ke,Ue,0),ll(ke,Ue,1,He,1,0);break;case Zl:Xa(we,Te,He,ke,Ue);break;case Gu:Xa(we,Te,He,ke,Ue),Ti(ke,Ue,He,1,0);break;case ko:_a(we,Te,He,ke,Ue);break;default:e(0)}se+=oe,ve+=Le}m.Ma+=Z}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=C.height)}}m.C=x,e(m.C<=m.i)}function Sn(m){var x;if(0<m.ua)return 0;for(x=0;x<m.Wb;++x){var C=m.Ya[x].G,E=m.Ya[x].H;if(0<C[1][E[1]+0].g||0<C[2][E[2]+0].g||0<C[3][E[3]+0].g)return 0}return 1}function rn(m,x,C,E,U,Z){if(m.Z!=0){var Q=m.qd,se=m.rd;for(e(Qa[m.Z]!=null);x<C;++x)Qa[m.Z](Q,se,E,U,E,U,Z),Q=E,se=U,U+=Z;m.qd=Q,m.rd=se}}function $n(m,x){var C=m.l.ma,E=C.Z==0||C.Z==1?m.l.j:m.C;if(E=m.C<E?E:m.C,e(x<=m.l.o),x>E){var U=m.l.width,Z=C.ca,Q=C.tb+U*E,se=m.V,oe=m.Ba+m.c*E,ue=m.gc;e(m.ab==1),e(ue[0].hc==3),wa(ue[0],E,x,se,oe,Z,Q),rn(C,E,x,Z,Q,U)}m.C=m.Ma=x}function Er(m,x,C,E,U,Z,Q){var se=m.$/E,oe=m.$%E,ue=m.m,ve=m.s,Le=C+m.$,ce=Le;U=C+E*U;var we=C+E*Z,Te=280+ve.ua,He=m.Pb?se:16777216,ke=0<ve.ua?ve.Wa:null,Ue=ve.wc,Ye=Le<we?fn(ve,oe,se):null;e(m.C<Z),e(we<=U);var it=!1;e:for(;;){for(;it||Le<we;){var tt=0;if(se>=He){var Ot=Le-C;e((He=m).Pb),He.wd=He.m,He.xd=Ot,0<He.s.ua&&Ie(He.s.Wa,He.s.vb),He=se+jo}if(oe&Ue||(Ye=fn(ve,oe,se)),e(Ye!=null),Ye.Qb&&(x[Le]=Ye.qb,it=!0),!it)if(pe(ue),Ye.jc){tt=ue,Ot=x;var Nt=Le,an=Ye.pd[G(tt)&To-1];e(Ye.jc),256>an.g?(ae(tt,tt.u+an.g),Ot[Nt]=an.value,tt=0):(ae(tt,tt.u+an.g-256),e(256<=an.value),tt=an.value),tt==0&&(it=!0)}else tt=$t(Ye.G[0],Ye.H[0],ue);if(ue.h)break;if(it||256>tt){if(!it)if(Ye.nd)x[Le]=(Ye.qb|tt<<8)>>>0;else{if(pe(ue),it=$t(Ye.G[1],Ye.H[1],ue),pe(ue),Ot=$t(Ye.G[2],Ye.H[2],ue),Nt=$t(Ye.G[3],Ye.H[3],ue),ue.h)break;x[Le]=(Nt<<24|it<<16|tt<<8|Ot)>>>0}if(it=!1,++Le,++oe>=E&&(oe=0,++se,Q!=null&&se<=Z&&!(se%16)&&Q(m,se),ke!=null))for(;ce<Le;)tt=x[ce++],ke.X[(506832829*tt&4294967295)>>>ke.Mb]=tt}else if(280>tt){if(tt=Bt(tt-256,ue),Ot=$t(Ye.G[4],Ye.H[4],ue),pe(ue),Ot=nn(E,Ot=Bt(Ot,ue)),ue.h)break;if(Le-C<Ot||U-Le<tt)break e;for(Nt=0;Nt<tt;++Nt)x[Le+Nt]=x[Le+Nt-Ot];for(Le+=tt,oe+=tt;oe>=E;)oe-=E,++se,Q!=null&&se<=Z&&!(se%16)&&Q(m,se);if(e(Le<=U),oe&Ue&&(Ye=fn(ve,oe,se)),ke!=null)for(;ce<Le;)tt=x[ce++],ke.X[(506832829*tt&4294967295)>>>ke.Mb]=tt}else{if(!(tt<Te))break e;for(it=tt-280,e(ke!=null);ce<Le;)tt=x[ce++],ke.X[(506832829*tt&4294967295)>>>ke.Mb]=tt;tt=Le,e(!(it>>>(Ot=ke).Xa)),x[tt]=Ot.X[it],it=!0}it||e(ue.h==J(ue))}if(m.Pb&&ue.h&&Le<U)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&Ie(m.s.vb,m.s.Wa);else{if(ue.h)break e;Q?.(m,se>Z?Z:se),m.a=0,m.$=Le-C}return 1}return m.a=3,0}function us(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var x=m.Wa;x!=null&&(x.X=null),m.vb=null,e(m!=null)}function je(){var m=new Qt;return m==null?null:(m.a=0,m.xb=hd,tn("Predictor","VP8LPredictors"),tn("Predictor","VP8LPredictors_C"),tn("PredictorAdd","VP8LPredictorsAdd"),tn("PredictorAdd","VP8LPredictorsAdd_C"),Ur=jt,Yl=xt,Xl=ut,Ya=ot,Xa=We,_a=at,al=bt,B.VP8LMapColor32b=xa,B.VP8LMapColor8b=As,m)}function Pe(m,x,C,E,U){var Z=1,Q=[m],se=[x],oe=E.m,ue=E.s,ve=null,Le=0;e:for(;;){if(C)for(;Z&&z(oe,1);){var ce=Q,we=se,Te=E,He=1,ke=Te.m,Ue=Te.gc[Te.ab],Ye=z(ke,2);if(Te.Oc&1<<Ye)Z=0;else{switch(Te.Oc|=1<<Ye,Ue.hc=Ye,Ue.Ea=ce[0],Ue.nc=we[0],Ue.K=[null],++Te.ab,e(4>=Te.ab),Ye){case 0:case 1:Ue.b=z(ke,3)+2,He=Pe(ge(Ue.Ea,Ue.b),ge(Ue.nc,Ue.b),0,Te,Ue.K),Ue.K=Ue.K[0];break;case 3:var it,tt=z(ke,8)+1,Ot=16<tt?0:4<tt?1:2<tt?2:3;if(ce[0]=ge(Ue.Ea,Ot),Ue.b=Ot,it=He=Pe(tt,1,0,Te,Ue.K)){var Nt,an=tt,Et=Ue,kn=1<<(8>>Et.b),pr=o(kn);if(pr==null)it=0;else{var gn=Et.K[0],At=Et.w;for(pr[0]=Et.K[0][0],Nt=1;Nt<1*an;++Nt)pr[Nt]=qe(gn[At+Nt],pr[Nt-1]);for(;Nt<4*kn;++Nt)pr[Nt]=0;Et.K[0]=null,Et.K[0]=pr,it=1}}He=it;break;case 2:break;default:e(0)}Z=He}}if(Q=Q[0],se=se[0],Z&&z(oe,1)&&!(Z=1<=(Le=z(oe,4))&&11>=Le)){E.a=3;break e}var mt;if(mt=Z)t:{var wr,Xt,yn,Zn=E,ss=Q,Es=se,or=Le,Xr=C,Vs=Zn.m,Zr=Zn.s,An=[null],zn=1,_r=0,Wn=Mi[or];n:for(;;){if(Xr&&z(Vs,1)){var is=z(Vs,3)+2,Sr=ge(ss,is),qn=ge(Es,is),Gr=Sr*qn;if(!Pe(Sr,qn,0,Zn,An))break n;for(An=An[0],Zr.xc=is,wr=0;wr<Gr;++wr){var Kn=An[wr]>>8&65535;An[wr]=Kn,Kn>=zn&&(zn=Kn+1)}}if(Vs.h)break n;for(Xt=0;5>Xt;++Xt){var Kr=ul[Xt];!Xt&&0<or&&(Kr+=1<<or),_r<Kr&&(_r=Kr)}var Qr=u(zn*Wn,K),er=zn,Vn=u(er,ie);if(Vn==null)var Bs=null;else e(65536>=er),Bs=Vn;var Dr=o(_r);if(Bs==null||Dr==null||Qr==null){Zn.a=1;break n}var Ht=Qr;for(wr=yn=0;wr<zn;++wr){var Wt=Bs[wr],Un=Wt.G,ii=Wt.H,Ri=0,Ks=1,Jr=0;for(Xt=0;5>Xt;++Xt){Kr=ul[Xt],Un[Xt]=Ht,ii[Xt]=yn,!Xt&&0<or&&(Kr+=1<<or);s:{var Ro,Io=Kr,Ju=Zn,lr=Dr,fd=Ht,pd=yn,eh=0,Ja=Ju.m,m0=z(Ja,1);if(a(lr,0,0,Io),m0){var md=z(Ja,1)+1,gd=z(Ja,1),th=z(Ja,gd==0?1:8);lr[th]=1,md==2&&(lr[th=z(Ja,8)]=1);var ps=1}else{var Rr=o(19),ru=z(Ja,4)+4;if(19<ru){Ju.a=3;var Fo=0;break s}for(Ro=0;Ro<ru;++Ro)Rr[eu[Ro]]=z(Ja,3);var nc=void 0,fl=void 0,Aa=Ju,nh=Rr,rc=Io,rh=lr,sh=0,eo=Aa.m,bd=8,vd=u(128,K);r:for(;I(vd,0,7,nh,19);){if(z(eo,1)){var qf=2+2*z(eo,3);if((nc=2+z(eo,qf))>rc)break r}else nc=rc;for(fl=0;fl<rc&&nc--;){pe(eo);var yd=vd[0+(127&G(eo))];ae(eo,eo.u+yd.g);var Vo=yd.value;if(16>Vo)rh[fl++]=Vo,Vo!=0&&(bd=Vo);else{var Uf=Vo==16,Hf=Vo-16,Wf=Ql[Hf],xd=z(eo,ji[Hf])+Wf;if(fl+xd>rc)break r;for(var Gf=Uf?bd:0;0<xd--;)rh[fl++]=Gf}}sh=1;break r}sh||(Aa.a=3),ps=sh}(ps=ps&&!Ja.h)&&(eh=I(fd,pd,8,lr,Io)),ps&&eh!=0?Fo=eh:(Ju.a=3,Fo=0)}if(Fo==0)break n;if(Ks&&$u[Xt]==1&&(Ks=Ht[yn].g==0),Ri+=Ht[yn].g,yn+=Fo,3>=Xt){var pl,ih=Dr[0];for(pl=1;pl<Kr;++pl)Dr[pl]>ih&&(ih=Dr[pl]);Jr+=ih}}if(Wt.nd=Ks,Wt.Qb=0,Ks&&(Wt.qb=(Un[3][ii[3]+0].value<<24|Un[1][ii[1]+0].value<<16|Un[2][ii[2]+0].value)>>>0,Ri==0&&256>Un[0][ii[0]+0].value&&(Wt.Qb=1,Wt.qb+=Un[0][ii[0]+0].value<<8)),Wt.jc=!Wt.Qb&&6>Jr,Wt.jc){var su,Ca=Wt;for(su=0;su<To;++su){var to=su,no=Ca.pd[to],ah=Ca.G[0][Ca.H[0]+to];256<=ah.value?(no.g=ah.g+256,no.value=ah.value):(no.g=0,no.value=0,to>>=dn(ah,8,no),to>>=dn(Ca.G[1][Ca.H[1]+to],16,no),to>>=dn(Ca.G[2][Ca.H[2]+to],0,no),dn(Ca.G[3][Ca.H[3]+to],24,no))}}}Zr.vc=An,Zr.Wb=zn,Zr.Ya=Bs,Zr.yc=Qr,mt=1;break t}mt=0}if(!(Z=mt)){E.a=3;break e}if(0<Le){if(ue.ua=1<<Le,!Y(ue.Wa,Le)){E.a=1,Z=0;break e}}else ue.ua=0;var oh=E,ml=Q,$f=se,sc=oh.s,ic=sc.xc;if(oh.c=ml,oh.i=$f,sc.md=ge(ml,ic),sc.wc=ic==0?-1:(1<<ic)-1,C){E.xb=Eo;break e}if((ve=o(Q*se))==null){E.a=1,Z=0;break e}Z=(Z=Er(E,ve,0,Q,se,se,null))&&!oe.h;break e}return Z?(U!=null?U[0]=ve:(e(ve==null),e(C)),E.$=0,C||us(ue)):us(ue),Z}function Ze(m,x){var C=m.c*m.i,E=C+x+16*x;return e(m.c<=x),m.V=o(E),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+C+x,1)}function _t(m,x){var C=m.C,E=x-C,U=m.V,Z=m.Ba+m.c*C;for(e(x<=m.l.o);0<E;){var Q=16<E?16:E,se=m.l.ma,oe=m.l.width,ue=oe*Q,ve=se.ca,Le=se.tb+oe*C,ce=m.Ta,we=m.Ua;Jn(m,Q,U,Z),bi(ce,we,ve,Le,ue),rn(se,C,C+Q,ve,Le,oe),E-=Q,U+=Q*m.c,C+=Q}e(C==x),m.C=m.Ma=x}function gt(){this.ub=this.yd=this.td=this.Rb=0}function kt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pn(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function un(){this.Yb=(function(){var m=[];return(function x(C,E,U){for(var Z=U[E],Q=0;Q<Z&&(C.push(U.length>E+1?[]:0),!(U.length<E+1));Q++)x(C[Q],E+1,U)})(m,0,[3,11]),m})()}function sn(){this.jb=o(3),this.Wc=c([4,8],un),this.Xc=c([4,17],un)}function xn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Pn(){this.ld=this.La=this.dd=this.tc=0}function Tn(){this.Na=this.la=0}function sr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $r(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Mr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Pn),this.Y=0,this.ya=Array(new $r),this.aa=0,this.l=new ni}function _s(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Yi(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new gt,this.Kc=new kt,this.ed=new xn,this.Qa=new pn,this.Ic=this.$c=this.Aa=0,this.D=new Mr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,M),this.ia=0,this.pb=u(4,sr),this.Pa=new sn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new _s),this.Hd=0,this.rb=Array(new Tn),this.sb=0,this.wa=Array(new Pn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $r),this.L=this.aa=0,this.gd=c([4,2],Pn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Pr(m,x){return 0>m?0:m>x?x:m}function ni(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gs(){var m=new Yi;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,vi||(vi=Si)),m}function Nn(m,x,C){return m.a==0&&(m.a=x,m.sc=C,m.cb=0),0}function Xi(m,x,C){return 3<=C&&m[x+0]==157&&m[x+1]==1&&m[x+2]==42}function Ds(m,x){if(m==null)return 0;if(m.a=0,m.sc="OK",x==null)return Nn(m,2,"null VP8Io passed to VP8GetHeaders()");var C=x.data,E=x.w,U=x.ha;if(4>U)return Nn(m,7,"Truncated header.");var Z=C[E+0]|C[E+1]<<8|C[E+2]<<16,Q=m.Od;if(Q.Rb=!(1&Z),Q.td=Z>>1&7,Q.yd=Z>>4&1,Q.ub=Z>>5,3<Q.td)return Nn(m,3,"Incorrect keyframe parameters.");if(!Q.yd)return Nn(m,4,"Frame not displayable.");E+=3,U-=3;var se=m.Kc;if(Q.Rb){if(7>U)return Nn(m,7,"cannot parse picture header");if(!Xi(C,E,U))return Nn(m,3,"Bad code word");se.c=16383&(C[E+4]<<8|C[E+3]),se.Td=C[E+4]>>6,se.i=16383&(C[E+6]<<8|C[E+5]),se.Ud=C[E+6]>>6,E+=7,U-=7,m.za=se.c+15>>4,m.Ub=se.i+15>>4,x.width=se.c,x.height=se.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,a((Z=m.Pa).jb,0,255,Z.jb.length),e((Z=m.Qa)!=null),Z.Cb=0,Z.Bb=0,Z.Fb=1,a(Z.Zb,0,0,Z.Zb.length),a(Z.Lb,0,0,Z.Lb)}if(Q.ub>U)return Nn(m,7,"bad partition length");X(Z=m.m,C,E,Q.ub),E+=Q.ub,U-=Q.ub,Q.Rb&&(se.Ld=xe(Z),se.Kd=xe(Z)),se=m.Qa;var oe,ue=m.Pa;if(e(Z!=null),e(se!=null),se.Cb=xe(Z),se.Cb){if(se.Bb=xe(Z),xe(Z)){for(se.Fb=xe(Z),oe=0;4>oe;++oe)se.Zb[oe]=xe(Z)?le(Z,7):0;for(oe=0;4>oe;++oe)se.Lb[oe]=xe(Z)?le(Z,6):0}if(se.Bb)for(oe=0;3>oe;++oe)ue.jb[oe]=xe(Z)?re(Z,8):255}else se.Bb=0;if(Z.Ka)return Nn(m,3,"cannot parse segment header");if((se=m.ed).zd=xe(Z),se.Tb=re(Z,6),se.wb=re(Z,3),se.Pc=xe(Z),se.Pc&&xe(Z)){for(ue=0;4>ue;++ue)xe(Z)&&(se.vd[ue]=le(Z,6));for(ue=0;4>ue;++ue)xe(Z)&&(se.od[ue]=le(Z,6))}if(m.L=se.Tb==0?0:se.zd?1:2,Z.Ka)return Nn(m,3,"cannot parse filter header");var ve=U;if(U=oe=E,E=oe+ve,se=ve,m.Xb=(1<<re(m.m,2))-1,ve<3*(ue=m.Xb))C=7;else{for(oe+=3*ue,se-=3*ue,ve=0;ve<ue;++ve){var Le=C[U+0]|C[U+1]<<8|C[U+2]<<16;Le>se&&(Le=se),X(m.Jc[+ve],C,oe,Le),oe+=Le,se-=Le,U+=3}X(m.Jc[+ue],C,oe,se),C=oe<E?0:5}if(C!=0)return Nn(m,C,"cannot parse partitions");for(C=re(oe=m.m,7),U=xe(oe)?le(oe,4):0,E=xe(oe)?le(oe,4):0,se=xe(oe)?le(oe,4):0,ue=xe(oe)?le(oe,4):0,oe=xe(oe)?le(oe,4):0,ve=m.Qa,Le=0;4>Le;++Le){if(ve.Cb){var ce=ve.Zb[Le];ve.Fb||(ce+=C)}else{if(0<Le){m.pb[Le]=m.pb[0];continue}ce=C}var we=m.pb[Le];we.Sc[0]=Li[Pr(ce+U,127)],we.Sc[1]=Oi[Pr(ce+0,127)],we.Eb[0]=2*Li[Pr(ce+E,127)],we.Eb[1]=101581*Oi[Pr(ce+se,127)]>>16,8>we.Eb[1]&&(we.Eb[1]=8),we.Qc[0]=Li[Pr(ce+ue,117)],we.Qc[1]=Oi[Pr(ce+oe,127)],we.lc=ce+oe}if(!Q.Rb)return Nn(m,4,"Not a key frame.");for(xe(Z),Q=m.Pa,C=0;4>C;++C){for(U=0;8>U;++U)for(E=0;3>E;++E)for(se=0;11>se;++se)ue=Ne(Z,fr[C][U][E][se])?re(Z,8):Pf[C][U][E][se],Q.Wc[C][U].Yb[E][se]=ue;for(U=0;17>U;++U)Q.Xc[C][U]=Q.Wc[C][jn[U]]}return m.kc=xe(Z),m.kc&&(m.Bd=re(Z,8)),m.cb=1}function Si(m,x,C,E,U,Z,Q){var se=x[U].Yb[C];for(C=0;16>U;++U){if(!Ne(m,se[C+0]))return U;for(;!Ne(m,se[C+1]);)if(se=x[++U].Yb[0],C=0,U==16)return 16;var oe=x[U+1].Yb;if(Ne(m,se[C+2])){var ue=m,ve=0;if(Ne(ue,(ce=se)[(Le=C)+3]))if(Ne(ue,ce[Le+6])){for(se=0,Le=2*(ve=Ne(ue,ce[Le+8]))+(ce=Ne(ue,ce[Le+9+ve])),ve=0,ce=Bf[Le];ce[se];++se)ve+=ve+Ne(ue,ce[se]);ve+=3+(8<<Le)}else Ne(ue,ce[Le+7])?(ve=7+2*Ne(ue,165),ve+=Ne(ue,145)):ve=5+Ne(ue,159);else ve=Ne(ue,ce[Le+4])?3+Ne(ue,ce[Le+5]):2;se=oe[2]}else ve=1,se=oe[1];oe=Q+ud[U],0>(ue=m).b&&de(ue);var Le,ce=ue.b,we=(Le=ue.Ca>>1)-(ue.I>>ce)>>31;--ue.b,ue.Ca+=we,ue.Ca|=1,ue.I-=(Le+1&we)<<ce,Z[oe]=((ve^we)-we)*E[(0<U)+0]}return 16}function _o(m){var x=m.rb[m.sb-1];x.la=0,x.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function hs(m,x,C,E,U){U=m[x+C+32*E]+(U>>3),m[x+C+32*E]=-256&U?0>U?0:255:U}function zr(m,x,C,E,U,Z){hs(m,x,0,C,E+U),hs(m,x,1,C,E+Z),hs(m,x,2,C,E-Z),hs(m,x,3,C,E-U)}function Lr(m){return(20091*m>>16)+m}function So(m,x,C,E){var U,Z=0,Q=o(16);for(U=0;4>U;++U){var se=m[x+0]+m[x+8],oe=m[x+0]-m[x+8],ue=(35468*m[x+4]>>16)-Lr(m[x+12]),ve=Lr(m[x+4])+(35468*m[x+12]>>16);Q[Z+0]=se+ve,Q[Z+1]=oe+ue,Q[Z+2]=oe-ue,Q[Z+3]=se-ve,Z+=4,x++}for(U=Z=0;4>U;++U)se=(m=Q[Z+0]+4)+Q[Z+8],oe=m-Q[Z+8],ue=(35468*Q[Z+4]>>16)-Lr(Q[Z+12]),hs(C,E,0,0,se+(ve=Lr(Q[Z+4])+(35468*Q[Z+12]>>16))),hs(C,E,1,0,oe+ue),hs(C,E,2,0,oe-ue),hs(C,E,3,0,se-ve),Z++,E+=32}function Bl(m,x,C,E){var U=m[x+0]+4,Z=35468*m[x+4]>>16,Q=Lr(m[x+4]),se=35468*m[x+1]>>16;zr(C,E,0,U+Q,m=Lr(m[x+1]),se),zr(C,E,1,U+Z,m,se),zr(C,E,2,U-Z,m,se),zr(C,E,3,U-Q,m,se)}function Qo(m,x,C,E,U){So(m,x,C,E),U&&So(m,x+16,C,E+4)}function $s(m,x,C,E){Za(m,x+0,C,E,1),Za(m,x+32,C,E+128,1)}function Fc(m,x,C,E){var U;for(m=m[x+0]+4,U=0;4>U;++U)for(x=0;4>x;++x)hs(C,E,x,U,m)}function Vc(m,x,C,E){m[x+0]&&Hn(m,x+0,C,E),m[x+16]&&Hn(m,x+16,C,E+4),m[x+32]&&Hn(m,x+32,C,E+128),m[x+48]&&Hn(m,x+48,C,E+128+4)}function Zi(m,x,C,E){var U,Z=o(16);for(U=0;4>U;++U){var Q=m[x+0+U]+m[x+12+U],se=m[x+4+U]+m[x+8+U],oe=m[x+4+U]-m[x+8+U],ue=m[x+0+U]-m[x+12+U];Z[0+U]=Q+se,Z[8+U]=Q-se,Z[4+U]=ue+oe,Z[12+U]=ue-oe}for(U=0;4>U;++U)Q=(m=Z[0+4*U]+3)+Z[3+4*U],se=Z[1+4*U]+Z[2+4*U],oe=Z[1+4*U]-Z[2+4*U],ue=m-Z[3+4*U],C[E+0]=Q+se>>3,C[E+16]=ue+oe>>3,C[E+32]=Q-se>>3,C[E+48]=ue-oe>>3,E+=64}function Jo(m,x,C){var E,U=x-32,Z=Is,Q=255-m[U-1];for(E=0;E<C;++E){var se,oe=Z,ue=Q+m[x-1];for(se=0;se<C;++se)m[x+se]=oe[ue+m[U+se]];x+=32}}function Lu(m,x){Jo(m,x,4)}function Ou(m,x){Jo(m,x,8)}function Bc(m,x){Jo(m,x,16)}function Pc(m,x){var C;for(C=0;16>C;++C)s(m,x+32*C,m,x-32,16)}function Du(m,x){var C;for(C=16;0<C;--C)a(m,x,m[x-1],16),x+=32}function ri(m,x,C){var E;for(E=0;16>E;++E)a(x,C+32*E,m,16)}function Ki(m,x){var C,E=16;for(C=0;16>C;++C)E+=m[x-1+32*C]+m[x+C-32];ri(E>>5,m,x)}function Da(m,x){var C,E=8;for(C=0;16>C;++C)E+=m[x-1+32*C];ri(E>>4,m,x)}function el(m,x){var C,E=8;for(C=0;16>C;++C)E+=m[x+C-32];ri(E>>4,m,x)}function No(m,x){ri(128,m,x)}function Yt(m,x,C){return m+2*x+C+2>>2}function Ru(m,x){var C,E=x-32;for(E=new Uint8Array([Yt(m[E-1],m[E+0],m[E+1]),Yt(m[E+0],m[E+1],m[E+2]),Yt(m[E+1],m[E+2],m[E+3]),Yt(m[E+2],m[E+3],m[E+4])]),C=0;4>C;++C)s(m,x+32*C,E,0,E.length)}function zc(m,x){var C=m[x-1],E=m[x-1+32],U=m[x-1+64],Z=m[x-1+96];Be(m,x+0,16843009*Yt(m[x-1-32],C,E)),Be(m,x+32,16843009*Yt(C,E,U)),Be(m,x+64,16843009*Yt(E,U,Z)),Be(m,x+96,16843009*Yt(U,Z,Z))}function Iu(m,x){var C,E=4;for(C=0;4>C;++C)E+=m[x+C-32]+m[x-1+32*C];for(E>>=3,C=0;4>C;++C)a(m,x+32*C,E,4)}function fi(m,x){var C=m[x-1+0],E=m[x-1+32],U=m[x-1+64],Z=m[x-1-32],Q=m[x+0-32],se=m[x+1-32],oe=m[x+2-32],ue=m[x+3-32];m[x+0+96]=Yt(E,U,m[x-1+96]),m[x+1+96]=m[x+0+64]=Yt(C,E,U),m[x+2+96]=m[x+1+64]=m[x+0+32]=Yt(Z,C,E),m[x+3+96]=m[x+2+64]=m[x+1+32]=m[x+0+0]=Yt(Q,Z,C),m[x+3+64]=m[x+2+32]=m[x+1+0]=Yt(se,Q,Z),m[x+3+32]=m[x+2+0]=Yt(oe,se,Q),m[x+3+0]=Yt(ue,oe,se)}function Ss(m,x){var C=m[x+1-32],E=m[x+2-32],U=m[x+3-32],Z=m[x+4-32],Q=m[x+5-32],se=m[x+6-32],oe=m[x+7-32];m[x+0+0]=Yt(m[x+0-32],C,E),m[x+1+0]=m[x+0+32]=Yt(C,E,U),m[x+2+0]=m[x+1+32]=m[x+0+64]=Yt(E,U,Z),m[x+3+0]=m[x+2+32]=m[x+1+64]=m[x+0+96]=Yt(U,Z,Q),m[x+3+32]=m[x+2+64]=m[x+1+96]=Yt(Z,Q,se),m[x+3+64]=m[x+2+96]=Yt(Q,se,oe),m[x+3+96]=Yt(se,oe,oe)}function qc(m,x){var C=m[x-1+0],E=m[x-1+32],U=m[x-1+64],Z=m[x-1-32],Q=m[x+0-32],se=m[x+1-32],oe=m[x+2-32],ue=m[x+3-32];m[x+0+0]=m[x+1+64]=Z+Q+1>>1,m[x+1+0]=m[x+2+64]=Q+se+1>>1,m[x+2+0]=m[x+3+64]=se+oe+1>>1,m[x+3+0]=oe+ue+1>>1,m[x+0+96]=Yt(U,E,C),m[x+0+64]=Yt(E,C,Z),m[x+0+32]=m[x+1+96]=Yt(C,Z,Q),m[x+1+32]=m[x+2+96]=Yt(Z,Q,se),m[x+2+32]=m[x+3+96]=Yt(Q,se,oe),m[x+3+32]=Yt(se,oe,ue)}function tl(m,x){var C=m[x+0-32],E=m[x+1-32],U=m[x+2-32],Z=m[x+3-32],Q=m[x+4-32],se=m[x+5-32],oe=m[x+6-32],ue=m[x+7-32];m[x+0+0]=C+E+1>>1,m[x+1+0]=m[x+0+64]=E+U+1>>1,m[x+2+0]=m[x+1+64]=U+Z+1>>1,m[x+3+0]=m[x+2+64]=Z+Q+1>>1,m[x+0+32]=Yt(C,E,U),m[x+1+32]=m[x+0+96]=Yt(E,U,Z),m[x+2+32]=m[x+1+96]=Yt(U,Z,Q),m[x+3+32]=m[x+2+96]=Yt(Z,Q,se),m[x+3+64]=Yt(Q,se,oe),m[x+3+96]=Yt(se,oe,ue)}function pi(m,x){var C=m[x-1+0],E=m[x-1+32],U=m[x-1+64],Z=m[x-1+96];m[x+0+0]=C+E+1>>1,m[x+2+0]=m[x+0+32]=E+U+1>>1,m[x+2+32]=m[x+0+64]=U+Z+1>>1,m[x+1+0]=Yt(C,E,U),m[x+3+0]=m[x+1+32]=Yt(E,U,Z),m[x+3+32]=m[x+1+64]=Yt(U,Z,Z),m[x+3+64]=m[x+2+64]=m[x+0+96]=m[x+1+96]=m[x+2+96]=m[x+3+96]=Z}function nl(m,x){var C=m[x-1+0],E=m[x-1+32],U=m[x-1+64],Z=m[x-1+96],Q=m[x-1-32],se=m[x+0-32],oe=m[x+1-32],ue=m[x+2-32];m[x+0+0]=m[x+2+32]=C+Q+1>>1,m[x+0+32]=m[x+2+64]=E+C+1>>1,m[x+0+64]=m[x+2+96]=U+E+1>>1,m[x+0+96]=Z+U+1>>1,m[x+3+0]=Yt(se,oe,ue),m[x+2+0]=Yt(Q,se,oe),m[x+1+0]=m[x+3+32]=Yt(C,Q,se),m[x+1+32]=m[x+3+64]=Yt(E,C,Q),m[x+1+64]=m[x+3+96]=Yt(U,E,C),m[x+1+96]=Yt(Z,U,E)}function pa(m,x){var C;for(C=0;8>C;++C)s(m,x+32*C,m,x-32,8)}function Fu(m,x){var C;for(C=0;8>C;++C)a(m,x,m[x-1],8),x+=32}function Ni(m,x,C){var E;for(E=0;8>E;++E)a(x,C+32*E,m,8)}function Pl(m,x){var C,E=8;for(C=0;8>C;++C)E+=m[x+C-32]+m[x-1+32*C];Ni(E>>4,m,x)}function zl(m,x){var C,E=4;for(C=0;8>C;++C)E+=m[x+C-32];Ni(E>>3,m,x)}function ds(m,x){var C,E=4;for(C=0;8>C;++C)E+=m[x-1+32*C];Ni(E>>3,m,x)}function ma(m,x){Ni(128,m,x)}function Ai(m,x,C){var E=m[x-C],U=m[x+0],Z=3*(U-E)+Ka[1020+m[x-2*C]-m[x+C]],Q=Kc[112+(Z+4>>3)];m[x-C]=Is[255+E+Kc[112+(Z+3>>3)]],m[x+0]=Is[255+U-Q]}function Ra(m,x,C,E){var U=m[x+0],Z=m[x+C];return Cs[255+m[x-2*C]-m[x-C]]>E||Cs[255+Z-U]>E}function ql(m,x,C,E){return 4*Cs[255+m[x-C]-m[x+0]]+Cs[255+m[x-2*C]-m[x+C]]<=E}function rl(m,x,C,E,U){var Z=m[x-3*C],Q=m[x-2*C],se=m[x-C],oe=m[x+0],ue=m[x+C],ve=m[x+2*C],Le=m[x+3*C];return 4*Cs[255+se-oe]+Cs[255+Q-ue]>E?0:Cs[255+m[x-4*C]-Z]<=U&&Cs[255+Z-Q]<=U&&Cs[255+Q-se]<=U&&Cs[255+Le-ve]<=U&&Cs[255+ve-ue]<=U&&Cs[255+ue-oe]<=U}function Ia(m,x,C,E){var U=2*E+1;for(E=0;16>E;++E)ql(m,x+E,C,U)&&Ai(m,x+E,C)}function Fa(m,x,C,E){var U=2*E+1;for(E=0;16>E;++E)ql(m,x+E*C,1,U)&&Ai(m,x+E*C,1)}function sl(m,x,C,E){var U;for(U=3;0<U;--U)Ia(m,x+=4*C,C,E)}function Uc(m,x,C,E){var U;for(U=3;0<U;--U)Fa(m,x+=4,C,E)}function Va(m,x,C,E,U,Z,Q,se){for(Z=2*Z+1;0<U--;){if(rl(m,x,C,Z,Q))if(Ra(m,x,C,se))Ai(m,x,C);else{var oe=m,ue=x,ve=C,Le=oe[ue-2*ve],ce=oe[ue-ve],we=oe[ue+0],Te=oe[ue+ve],He=oe[ue+2*ve],ke=27*(Ye=Ka[1020+3*(we-ce)+Ka[1020+Le-Te]])+63>>7,Ue=18*Ye+63>>7,Ye=9*Ye+63>>7;oe[ue-3*ve]=Is[255+oe[ue-3*ve]+Ye],oe[ue-2*ve]=Is[255+Le+Ue],oe[ue-ve]=Is[255+ce+ke],oe[ue+0]=Is[255+we-ke],oe[ue+ve]=Is[255+Te-Ue],oe[ue+2*ve]=Is[255+He-Ye]}x+=E}}function Ba(m,x,C,E,U,Z,Q,se){for(Z=2*Z+1;0<U--;){if(rl(m,x,C,Z,Q))if(Ra(m,x,C,se))Ai(m,x,C);else{var oe=m,ue=x,ve=C,Le=oe[ue-ve],ce=oe[ue+0],we=oe[ue+ve],Te=Kc[112+(4+(He=3*(ce-Le))>>3)],He=Kc[112+(He+3>>3)],ke=Te+1>>1;oe[ue-2*ve]=Is[255+oe[ue-2*ve]+ke],oe[ue-ve]=Is[255+Le+He],oe[ue+0]=Is[255+ce-Te],oe[ue+ve]=Is[255+we-ke]}x+=E}}function Vu(m,x,C,E,U,Z){Va(m,x,C,1,16,E,U,Z)}function Pa(m,x,C,E,U,Z){Va(m,x,1,C,16,E,U,Z)}function Bu(m,x,C,E,U,Z){var Q;for(Q=3;0<Q;--Q)Ba(m,x+=4*C,C,1,16,E,U,Z)}function S(m,x,C,E,U,Z){var Q;for(Q=3;0<Q;--Q)Ba(m,x+=4,1,C,16,E,U,Z)}function q(m,x,C,E,U,Z,Q,se){Va(m,x,U,1,8,Z,Q,se),Va(C,E,U,1,8,Z,Q,se)}function he(m,x,C,E,U,Z,Q,se){Va(m,x,1,U,8,Z,Q,se),Va(C,E,1,U,8,Z,Q,se)}function be(m,x,C,E,U,Z,Q,se){Ba(m,x+4*U,U,1,8,Z,Q,se),Ba(C,E+4*U,U,1,8,Z,Q,se)}function Ae(m,x,C,E,U,Z,Q,se){Ba(m,x+4,1,U,8,Z,Q,se),Ba(C,E+4,1,U,8,Z,Q,se)}function $e(){this.ba=new wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Mt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Pt(){this.ua=0,this.Wa=new dt,this.vb=new dt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new K}function Qt(){this.xb=this.a=0,this.l=new ni,this.ca=new wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $,this.Pb=0,this.wd=new $,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Pt,this.ab=0,this.gc=u(4,Mt),this.Oc=0}function mn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ni,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function In(m,x,C,E,U,Z,Q){for(m=m==null?0:m[x+0],x=0;x<Q;++x)U[Z+x]=m+C[E+x]&255,m=U[Z+x]}function xr(m,x,C,E,U,Z,Q){var se;if(m==null)In(null,null,C,E,U,Z,Q);else for(se=0;se<Q;++se)U[Z+se]=m[x+se]+C[E+se]&255}function qr(m,x,C,E,U,Z,Q){if(m==null)In(null,null,C,E,U,Z,Q);else{var se,oe=m[x+0],ue=oe,ve=oe;for(se=0;se<Q;++se)ue=ve+(oe=m[x+se])-ue,ve=C[E+se]+(-256&ue?0>ue?0:255:ue)&255,ue=oe,U[Z+se]=ve}}function ir(m,x,C,E){var U=x.width,Z=x.o;if(e(m!=null&&x!=null),0>C||0>=E||C+E>Z)return null;if(!m.Cc){if(m.ga==null){var Q;if(m.ga=new mn,(Q=m.ga==null)||(Q=x.width*x.o,e(m.Gb.length==0),m.Gb=o(Q),m.Uc=0,m.Gb==null?Q=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,Q=1),Q=!Q),!Q){Q=m.ga;var se=m.Fa,oe=m.P,ue=m.qc,ve=m.mb,Le=m.nb,ce=oe+1,we=ue-1,Te=Q.l;if(e(se!=null&&ve!=null&&x!=null),Qa[0]=null,Qa[1]=In,Qa[2]=xr,Qa[3]=qr,Q.ca=ve,Q.tb=Le,Q.c=x.width,Q.i=x.height,e(0<Q.c&&0<Q.i),1>=ue)x=0;else if(Q.$a=3&se[oe+0],Q.Z=se[oe+0]>>2&3,Q.Lc=se[oe+0]>>4&3,oe=se[oe+0]>>6&3,0>Q.$a||1<Q.$a||4<=Q.Z||1<Q.Lc||oe)x=0;else if(Te.put=Fe,Te.ac=_e,Te.bc=ht,Te.ma=Q,Te.width=x.width,Te.height=x.height,Te.Da=x.Da,Te.v=x.v,Te.va=x.va,Te.j=x.j,Te.o=x.o,Q.$a)e:{e(Q.$a==1),x=je();t:for(;;){if(x==null){x=0;break e}if(e(Q!=null),Q.mc=x,x.c=Q.c,x.i=Q.i,x.l=Q.l,x.l.ma=Q,x.l.width=Q.c,x.l.height=Q.i,x.a=0,fe(x.m,se,ce,we),!Pe(Q.c,Q.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Sn(x.s)?(Q.ic=1,se=x.c*x.i,x.Ta=null,x.Ua=0,x.V=o(se),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Q.ic=0,x=Ze(x,Q.c)),!x))break t;x=1;break e}Q.mc=null,x=0}else x=we>=Q.c*Q.i;Q=!x}if(Q)return null;m.ga.Lc!=1?m.Ga=0:E=Z-C}e(m.ga!=null),e(C+E<=Z);e:{if(x=(se=m.ga).c,Z=se.l.o,se.$a==0){if(ce=m.rc,we=m.Vc,Te=m.Fa,oe=m.P+1+C*x,ue=m.mb,ve=m.nb+C*x,e(oe<=m.P+m.qc),se.Z!=0)for(e(Qa[se.Z]!=null),Q=0;Q<E;++Q)Qa[se.Z](ce,we,Te,oe,ue,ve,x),ce=ue,we=ve,ve+=x,oe+=x;else for(Q=0;Q<E;++Q)s(ue,ve,Te,oe,x),ce=ue,we=ve,ve+=x,oe+=x;m.rc=ce,m.Vc=we}else{if(e(se.mc!=null),x=C+E,e((Q=se.mc)!=null),e(x<=Q.i),Q.C>=x)x=1;else if(se.ic||Qi(),se.ic){se=Q.V,ce=Q.Ba,we=Q.c;var He=Q.i,ke=(Te=1,oe=Q.$/we,ue=Q.$%we,ve=Q.m,Le=Q.s,Q.$),Ue=we*He,Ye=we*x,it=Le.wc,tt=ke<Ye?fn(Le,ue,oe):null;e(ke<=Ue),e(x<=He),e(Sn(Le));t:for(;;){for(;!ve.h&&ke<Ye;){if(ue&it||(tt=fn(Le,ue,oe)),e(tt!=null),pe(ve),256>(He=$t(tt.G[0],tt.H[0],ve)))se[ce+ke]=He,++ke,++ue>=we&&(ue=0,++oe<=x&&!(oe%16)&&$n(Q,oe));else{if(!(280>He)){Te=0;break t}He=Bt(He-256,ve);var Ot,Nt=$t(tt.G[4],tt.H[4],ve);if(pe(ve),!(ke>=(Nt=nn(we,Nt=Bt(Nt,ve)))&&Ue-ke>=He)){Te=0;break t}for(Ot=0;Ot<He;++Ot)se[ce+ke+Ot]=se[ce+ke+Ot-Nt];for(ke+=He,ue+=He;ue>=we;)ue-=we,++oe<=x&&!(oe%16)&&$n(Q,oe);ke<Ye&&ue&it&&(tt=fn(Le,ue,oe))}e(ve.h==J(ve))}$n(Q,oe>x?x:oe);break t}!Te||ve.h&&ke<Ue?(Te=0,Q.a=ve.h?5:3):Q.$=ke,x=Te}else x=Er(Q,Q.V,Q.Ba,Q.c,Q.i,x,_t);if(!x){E=0;break e}}C+E>=Z&&(m.Cc=1),E=1}if(!E)return null;if(m.Cc&&((E=m.ga)!=null&&(E.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+C*U}function rs(m,x,C,E,U,Z){for(;0<U--;){var Q,se=m,oe=x+(C?1:0),ue=m,ve=x+(C?0:3);for(Q=0;Q<E;++Q){var Le=ue[ve+4*Q];Le!=255&&(Le*=32897,se[oe+4*Q+0]=se[oe+4*Q+0]*Le>>23,se[oe+4*Q+1]=se[oe+4*Q+1]*Le>>23,se[oe+4*Q+2]=se[oe+4*Q+2]*Le>>23)}x+=Z}}function Yr(m,x,C,E,U){for(;0<E--;){var Z;for(Z=0;Z<C;++Z){var Q=m[x+2*Z+0],se=15&(ue=m[x+2*Z+1]),oe=4369*se,ue=(240&ue|ue>>4)*oe>>16;m[x+2*Z+0]=(240&Q|Q>>4)*oe>>16&240|(15&Q|Q<<4)*oe>>16>>4&15,m[x+2*Z+1]=240&ue|se}x+=U}}function Ns(m,x,C,E,U,Z,Q,se){var oe,ue,ve=255;for(ue=0;ue<U;++ue){for(oe=0;oe<E;++oe){var Le=m[x+oe];Z[Q+4*oe]=Le,ve&=Le}x+=C,Q+=se}return ve!=255}function za(m,x,C,E,U){var Z;for(Z=0;Z<U;++Z)C[E+Z]=m[x+Z]>>8}function Qi(){ll=rs,Ti=Yr,Yc=Ns,bi=za}function qa(m,x,C){B[m]=function(E,U,Z,Q,se,oe,ue,ve,Le,ce,we,Te,He,ke,Ue,Ye,it){var tt,Ot=it-1>>1,Nt=se[oe+0]|ue[ve+0]<<16,an=Le[ce+0]|we[Te+0]<<16;e(E!=null);var Et=3*Nt+an+131074>>2;for(x(E[U+0],255&Et,Et>>16,He,ke),Z!=null&&(Et=3*an+Nt+131074>>2,x(Z[Q+0],255&Et,Et>>16,Ue,Ye)),tt=1;tt<=Ot;++tt){var kn=se[oe+tt]|ue[ve+tt]<<16,pr=Le[ce+tt]|we[Te+tt]<<16,gn=Nt+kn+an+pr+524296,At=gn+2*(kn+an)>>3;Et=At+Nt>>1,Nt=(gn=gn+2*(Nt+pr)>>3)+kn>>1,x(E[U+2*tt-1],255&Et,Et>>16,He,ke+(2*tt-1)*C),x(E[U+2*tt-0],255&Nt,Nt>>16,He,ke+(2*tt-0)*C),Z!=null&&(Et=gn+an>>1,Nt=At+pr>>1,x(Z[Q+2*tt-1],255&Et,Et>>16,Ue,Ye+(2*tt-1)*C),x(Z[Q+2*tt+0],255&Nt,Nt>>16,Ue,Ye+(2*tt+0)*C)),Nt=kn,an=pr}1&it||(Et=3*Nt+an+131074>>2,x(E[U+it-1],255&Et,Et>>16,He,ke+(it-1)*C),Z!=null&&(Et=3*an+Nt+131074>>2,x(Z[Q+it-1],255&Et,Et>>16,Ue,Ye+(it-1)*C)))}}function Hc(){ks[Uu]=hl,ks[Fs]=Jl,ks[Hu]=dd,ks[ki]=Xu,ks[Qc]=Mo,ks[Zl]=Na,ks[ko]=Lo,ks[Jc]=Jl,ks[Wu]=Xu,ks[Kl]=Mo,ks[Gu]=Na}function Ul(m){return m&-16384?0>m?0:255:m>>Zu}function ga(m,x){return Ul((19077*m>>8)+(26149*x>>8)-14234)}function Ji(m,x,C){return Ul((19077*m>>8)-(6419*x>>8)-(13320*C>>8)+8708)}function il(m,x){return Ul((19077*m>>8)+(33050*x>>8)-17685)}function Ua(m,x,C,E,U){E[U+0]=ga(m,C),E[U+1]=Ji(m,x,C),E[U+2]=il(m,x)}function fs(m,x,C,E,U){E[U+0]=il(m,x),E[U+1]=Ji(m,x,C),E[U+2]=ga(m,C)}function Ao(m,x,C,E,U){var Z=Ji(m,x,C);x=Z<<3&224|il(m,x)>>3,E[U+0]=248&ga(m,C)|Z>>5,E[U+1]=x}function Co(m,x,C,E,U){var Z=240&il(m,x)|15;E[U+0]=240&ga(m,C)|Ji(m,x,C)>>4,E[U+1]=Z}function Hl(m,x,C,E,U){E[U+0]=255,Ua(m,x,C,E,U+1)}function ba(m,x,C,E,U){fs(m,x,C,E,U),E[U+3]=255}function Ys(m,x,C,E,U){Ua(m,x,C,E,U),E[U+3]=255}function Ha(m,x,C){B[m]=function(E,U,Z,Q,se,oe,ue,ve,Le){for(var ce=ve+(-2&Le)*C;ve!=ce;)x(E[U+0],Z[Q+0],se[oe+0],ue,ve),x(E[U+1],Z[Q+0],se[oe+0],ue,ve+C),U+=2,++Q,++oe,ve+=2*C;1&Le&&x(E[U+0],Z[Q+0],se[oe+0],ue,ve)}}function Wl(m,x,C){return C==0?m==0?x==0?6:5:x==0?4:0:C}function Wc(m,x,C,E,U){switch(m>>>30){case 3:Za(x,C,E,U,0);break;case 2:Rs(x,C,E,U);break;case 1:Hn(x,C,E,U)}}function mi(m,x){var C,E,U=x.M,Z=x.Nb,Q=m.oc,se=m.pc+40,oe=m.oc,ue=m.pc+584,ve=m.oc,Le=m.pc+600;for(C=0;16>C;++C)Q[se+32*C-1]=129;for(C=0;8>C;++C)oe[ue+32*C-1]=129,ve[Le+32*C-1]=129;for(0<U?Q[se-1-32]=oe[ue-1-32]=ve[Le-1-32]=129:(a(Q,se-32-1,127,21),a(oe,ue-32-1,127,9),a(ve,Le-32-1,127,9)),E=0;E<m.za;++E){var ce=x.ya[x.aa+E];if(0<E){for(C=-1;16>C;++C)s(Q,se+32*C-4,Q,se+32*C+12,4);for(C=-1;8>C;++C)s(oe,ue+32*C-4,oe,ue+32*C+4,4),s(ve,Le+32*C-4,ve,Le+32*C+4,4)}var we=m.Gd,Te=m.Hd+E,He=ce.ad,ke=ce.Hc;if(0<U&&(s(Q,se-32,we[Te].y,0,16),s(oe,ue-32,we[Te].f,0,8),s(ve,Le-32,we[Te].ea,0,8)),ce.Za){var Ue=Q,Ye=se-32+16;for(0<U&&(E>=m.za-1?a(Ue,Ye,we[Te].y[15],4):s(Ue,Ye,we[Te+1].y,0,4)),C=0;4>C;C++)Ue[Ye+128+C]=Ue[Ye+256+C]=Ue[Ye+384+C]=Ue[Ye+0+C];for(C=0;16>C;++C,ke<<=2)Ue=Q,Ye=se+Wr[C],Or[ce.Ob[C]](Ue,Ye),Wc(ke,He,16*+C,Ue,Ye)}else if(Ue=Wl(E,U,ce.Ob[0]),Zs[Ue](Q,se),ke!=0)for(C=0;16>C;++C,ke<<=2)Wc(ke,He,16*+C,Q,se+Wr[C]);for(C=ce.Gc,Ue=Wl(E,U,ce.Dd),ra[Ue](oe,ue),ra[Ue](ve,Le),ke=He,Ue=oe,Ye=ue,255&(ce=0|C)&&(170&ce?Ci(ke,256,Ue,Ye):Fn(ke,256,Ue,Ye)),ce=ve,ke=Le,255&(C>>=8)&&(170&C?Ci(He,320,ce,ke):Fn(He,320,ce,ke)),U<m.Ub-1&&(s(we[Te].y,0,Q,se+480,16),s(we[Te].f,0,oe,ue+224,8),s(we[Te].ea,0,ve,Le+224,8)),C=8*Z*m.B,we=m.sa,Te=m.ta+16*E+16*Z*m.R,He=m.qa,ce=m.ra+8*E+C,ke=m.Ha,Ue=m.Ia+8*E+C,C=0;16>C;++C)s(we,Te+C*m.R,Q,se+32*C,16);for(C=0;8>C;++C)s(He,ce+C*m.B,oe,ue+32*C,8),s(ke,Ue+C*m.B,ve,Le+32*C,8)}}function ea(m,x,C,E,U,Z,Q,se,oe){var ue=[0],ve=[0],Le=0,ce=oe!=null?oe.kd:0,we=oe??new rt;if(m==null||12>C)return 7;we.data=m,we.w=x,we.ha=C,x=[x],C=[C],we.gb=[we.gb];e:{var Te=x,He=C,ke=we.gb;if(e(m!=null),e(He!=null),e(ke!=null),ke[0]=0,12<=He[0]&&!t(m,Te[0],"RIFF")){if(t(m,Te[0]+8,"WEBP")){ke=3;break e}var Ue=st(m,Te[0]+4);if(12>Ue||4294967286<Ue){ke=3;break e}if(ce&&Ue>He[0]-8){ke=7;break e}ke[0]=Ue,Te[0]+=12,He[0]-=12}ke=0}if(ke!=0)return ke;for(Ue=0<we.gb[0],C=C[0];;){e:{var Ye=m;He=x,ke=C;var it=ue,tt=ve,Ot=Te=[0];if((Et=Le=[Le])[0]=0,8>ke[0])ke=7;else{if(!t(Ye,He[0],"VP8X")){if(st(Ye,He[0]+4)!=10){ke=3;break e}if(18>ke[0]){ke=7;break e}var Nt=st(Ye,He[0]+8),an=1+Xe(Ye,He[0]+12);if(2147483648<=an*(Ye=1+Xe(Ye,He[0]+15))){ke=3;break e}Ot!=null&&(Ot[0]=Nt),it!=null&&(it[0]=an),tt!=null&&(tt[0]=Ye),He[0]+=18,ke[0]-=18,Et[0]=1}ke=0}}if(Le=Le[0],Te=Te[0],ke!=0)return ke;if(He=!!(2&Te),!Ue&&Le)return 3;if(Z!=null&&(Z[0]=!!(16&Te)),Q!=null&&(Q[0]=He),se!=null&&(se[0]=0),Q=ue[0],Te=ve[0],Le&&He&&oe==null){ke=0;break}if(4>C){ke=7;break}if(Ue&&Le||!Ue&&!Le&&!t(m,x[0],"ALPH")){C=[C],we.na=[we.na],we.P=[we.P],we.Sa=[we.Sa];e:{Nt=m,ke=x,Ue=C;var Et=we.gb;it=we.na,tt=we.P,Ot=we.Sa,an=22,e(Nt!=null),e(Ue!=null),Ye=ke[0];var kn=Ue[0];for(e(it!=null),e(Ot!=null),it[0]=null,tt[0]=null,Ot[0]=0;;){if(ke[0]=Ye,Ue[0]=kn,8>kn){ke=7;break e}var pr=st(Nt,Ye+4);if(4294967286<pr){ke=3;break e}var gn=8+pr+1&-2;if(an+=gn,0<Et&&an>Et){ke=3;break e}if(!t(Nt,Ye,"VP8 ")||!t(Nt,Ye,"VP8L")){ke=0;break e}if(kn[0]<gn){ke=7;break e}t(Nt,Ye,"ALPH")||(it[0]=Nt,tt[0]=Ye+8,Ot[0]=pr),Ye+=gn,kn-=gn}}if(C=C[0],we.na=we.na[0],we.P=we.P[0],we.Sa=we.Sa[0],ke!=0)break}C=[C],we.Ja=[we.Ja],we.xa=[we.xa];e:if(Et=m,ke=x,Ue=C,it=we.gb[0],tt=we.Ja,Ot=we.xa,Nt=ke[0],Ye=!t(Et,Nt,"VP8 "),an=!t(Et,Nt,"VP8L"),e(Et!=null),e(Ue!=null),e(tt!=null),e(Ot!=null),8>Ue[0])ke=7;else{if(Ye||an){if(Et=st(Et,Nt+4),12<=it&&Et>it-12){ke=3;break e}if(ce&&Et>Ue[0]-8){ke=7;break e}tt[0]=Et,ke[0]+=8,Ue[0]-=8,Ot[0]=an}else Ot[0]=5<=Ue[0]&&Et[Nt+0]==47&&!(Et[Nt+4]>>5),tt[0]=Ue[0];ke=0}if(C=C[0],we.Ja=we.Ja[0],we.xa=we.xa[0],x=x[0],ke!=0)break;if(4294967286<we.Ja)return 3;if(se==null||He||(se[0]=we.xa?2:1),Q=[Q],Te=[Te],we.xa){if(5>C){ke=7;break}se=Q,ce=Te,He=Z,m==null||5>C?m=0:5<=C&&m[x+0]==47&&!(m[x+4]>>5)?(Ue=[0],Et=[0],it=[0],fe(tt=new $,m,x,C),Tt(tt,Ue,Et,it)?(se!=null&&(se[0]=Ue[0]),ce!=null&&(ce[0]=Et[0]),He!=null&&(He[0]=it[0]),m=1):m=0):m=0}else{if(10>C){ke=7;break}se=Te,m==null||10>C||!Xi(m,x+3,C-3)?m=0:(ce=m[x+0]|m[x+1]<<8|m[x+2]<<16,He=16383&(m[x+7]<<8|m[x+6]),m=16383&(m[x+9]<<8|m[x+8]),1&ce||3<(ce>>1&7)||!(ce>>4&1)||ce>>5>=we.Ja||!He||!m?m=0:(Q&&(Q[0]=He),se&&(se[0]=m),m=1))}if(!m||(Q=Q[0],Te=Te[0],Le&&(ue[0]!=Q||ve[0]!=Te)))return 3;oe!=null&&(oe[0]=we,oe.offset=x-oe.w,e(4294967286>x-oe.w),e(oe.offset==oe.ha-C));break}return ke==0||ke==7&&Le&&oe==null?(Z!=null&&(Z[0]|=we.na!=null&&0<we.na.length),E!=null&&(E[0]=Q),U!=null&&(U[0]=Te),0):ke}function Wa(m,x,C){var E=x.width,U=x.height,Z=0,Q=0,se=E,oe=U;if(x.Da=m!=null&&0<m.Da,x.Da&&(se=m.cd,oe=m.bd,Z=m.v,Q=m.j,11>C||(Z&=-2,Q&=-2),0>Z||0>Q||0>=se||0>=oe||Z+se>E||Q+oe>U))return 0;if(x.v=Z,x.j=Q,x.va=Z+se,x.o=Q+oe,x.U=se,x.T=oe,x.da=m!=null&&0<m.da,x.da){if(!et(se,oe,C=[m.ib],Z=[m.hb]))return 0;x.ib=C[0],x.hb=Z[0]}return x.ob=m!=null&&m.ob,x.Kb=m==null||!m.Sd,x.da&&(x.ob=x.ib<3*E/4&&x.hb<3*U/4,x.Kb=0),1}function Gc(m){if(m==null)return 2;if(11>m.S){var x=m.f.RGBA;x.fb+=(m.height-1)*x.A,x.A=-x.A}else x=m.f.kb,m=m.height,x.O+=(m-1)*x.fa,x.fa=-x.fa,x.N+=(m-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(m-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(m-1)*x.lb,x.lb=-x.lb);return 0}function ta(m,x,C,E){if(E==null||0>=m||0>=x)return 2;if(C!=null){if(C.Da){var U=C.cd,Z=C.bd,Q=-2&C.v,se=-2&C.j;if(0>Q||0>se||0>=U||0>=Z||Q+U>m||se+Z>x)return 2;m=U,x=Z}if(C.da){if(!et(m,x,U=[C.ib],Z=[C.hb]))return 2;m=U[0],x=Z[0]}}E.width=m,E.height=x;e:{var oe=E.width,ue=E.height;if(m=E.S,0>=oe||0>=ue||!(m>=Uu&&13>m))m=2;else{if(0>=E.Rd&&E.sd==null){Q=Z=U=x=0;var ve=(se=oe*Qu[m])*ue;if(11>m||(Z=(ue+1)/2*(x=(oe+1)/2),m==12&&(Q=(U=oe)*ue)),(ue=o(ve+2*Z+Q))==null){m=1;break e}E.sd=ue,11>m?((oe=E.f.RGBA).eb=ue,oe.fb=0,oe.A=se,oe.size=ve):((oe=E.f.kb).y=ue,oe.O=0,oe.fa=se,oe.Fd=ve,oe.f=ue,oe.N=0+ve,oe.Ab=x,oe.Cd=Z,oe.ea=ue,oe.W=0+ve+Z,oe.Db=x,oe.Ed=Z,m==12&&(oe.F=ue,oe.J=0+ve+2*Z),oe.Tc=Q,oe.lb=U)}if(x=1,U=E.S,Z=E.width,Q=E.height,U>=Uu&&13>U)if(11>U)m=E.f.RGBA,x&=(se=Math.abs(m.A))*(Q-1)+Z<=m.size,x&=se>=Z*Qu[U],x&=m.eb!=null;else{m=E.f.kb,se=(Z+1)/2,ve=(Q+1)/2,oe=Math.abs(m.fa),ue=Math.abs(m.Ab);var Le=Math.abs(m.Db),ce=Math.abs(m.lb),we=ce*(Q-1)+Z;x&=oe*(Q-1)+Z<=m.Fd,x&=ue*(ve-1)+se<=m.Cd,x=(x&=Le*(ve-1)+se<=m.Ed)&oe>=Z&ue>=se&Le>=se,x&=m.y!=null,x&=m.f!=null,x&=m.ea!=null,U==12&&(x&=ce>=Z,x&=we<=m.Tc,x&=m.F!=null)}else x=0;m=x?0:2}}return m!=0||C!=null&&C.fd&&(m=Gc(E)),m}var To=64,si=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xs=24,va=32,ya=8,Ga=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Re("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(m){return m},B.Predictor2=function(m,x,C){return x[C+0]},B.Predictor3=function(m,x,C){return x[C+1]},B.Predictor4=function(m,x,C){return x[C-1]},B.Predictor5=function(m,x,C){return ct(ct(m,x[C+1]),x[C+0])},B.Predictor6=function(m,x,C){return ct(m,x[C-1])},B.Predictor7=function(m,x,C){return ct(m,x[C+0])},B.Predictor8=function(m,x,C){return ct(x[C-1],x[C+0])},B.Predictor9=function(m,x,C){return ct(x[C+0],x[C+1])},B.Predictor10=function(m,x,C){return ct(ct(m,x[C-1]),ct(x[C+0],x[C+1]))},B.Predictor11=function(m,x,C){var E=x[C+0];return 0>=St(E>>24&255,m>>24&255,(x=x[C-1])>>24&255)+St(E>>16&255,m>>16&255,x>>16&255)+St(E>>8&255,m>>8&255,x>>8&255)+St(255&E,255&m,255&x)?E:m},B.Predictor12=function(m,x,C){var E=x[C+0];return(vt((m>>24&255)+(E>>24&255)-((x=x[C-1])>>24&255))<<24|vt((m>>16&255)+(E>>16&255)-(x>>16&255))<<16|vt((m>>8&255)+(E>>8&255)-(x>>8&255))<<8|vt((255&m)+(255&E)-(255&x)))>>>0},B.Predictor13=function(m,x,C){var E=x[C-1];return(It((m=ct(m,x[C+0]))>>24&255,E>>24&255)<<24|It(m>>16&255,E>>16&255)<<16|It(m>>8&255,E>>8&255)<<8|It(255&m,255&E))>>>0};var Gl=B.PredictorAdd0;B.PredictorAdd1=Ft,Re("Predictor2","PredictorAdd2"),Re("Predictor3","PredictorAdd3"),Re("Predictor4","PredictorAdd4"),Re("Predictor5","PredictorAdd5"),Re("Predictor6","PredictorAdd6"),Re("Predictor7","PredictorAdd7"),Re("Predictor8","PredictorAdd8"),Re("Predictor9","PredictorAdd9"),Re("Predictor10","PredictorAdd10"),Re("Predictor11","PredictorAdd11"),Re("Predictor12","PredictorAdd12"),Re("Predictor13","PredictorAdd13");var $l=B.PredictorAdd2;Me("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),Me("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Ur,Pu=B.ColorIndexInverseTransform,xa=B.MapARGB,wa=B.VP8LColorIndexInverseTransformAlpha,As=B.MapAlpha,$a=B.VP8LPredictorsAdd=[];$a.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var Yl,Xl,Ya,Xa,_a,al,gi,Za,Rs,Ci,Hn,Fn,ar,Hr,Sa,na,ol,$c,od,If,Ff,Vf,ld,cd,ll,Ti,Yc,bi,cl=o(511),zu=o(2041),Xc=o(225),Zc=o(767),qu=0,Ka=zu,Kc=Xc,Is=Zc,Cs=cl,Uu=0,Fs=1,Hu=2,ki=3,Qc=4,Zl=5,ko=6,Jc=7,Wu=8,Kl=9,Gu=10,ji=[2,3,7],Ql=[3,3,11],ul=[280,256,256,256,40],$u=[0,1,1,1,0],eu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ei=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Mi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jo=8,Li=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Oi=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vi=null,Bf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ud=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Yu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Pf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ts=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],jn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zs=[],Or=[],ra=[],Eo=1,hd=2,Qa=[],ks=[];qa("UpsampleRgbLinePair",Ua,3),qa("UpsampleBgrLinePair",fs,3),qa("UpsampleRgbaLinePair",Ys,4),qa("UpsampleBgraLinePair",ba,4),qa("UpsampleArgbLinePair",Hl,4),qa("UpsampleRgba4444LinePair",Co,2),qa("UpsampleRgb565LinePair",Ao,2);var hl=B.UpsampleRgbLinePair,dd=B.UpsampleBgrLinePair,Jl=B.UpsampleRgbaLinePair,Xu=B.UpsampleBgraLinePair,Mo=B.UpsampleArgbLinePair,Na=B.UpsampleRgba4444LinePair,Lo=B.UpsampleRgb565LinePair,Di=16,ec=1<<Di-1,dl=-227,Oo=482,Zu=6,Do=0,js=o(256),Ku=o(256),zf=o(256),d0=o(256),f0=o(Oo-dl),p0=o(Oo-dl);Ha("YuvToRgbRow",Ua,3),Ha("YuvToBgrRow",fs,3),Ha("YuvToRgbaRow",Ys,4),Ha("YuvToBgraRow",ba,4),Ha("YuvToArgbRow",Hl,4),Ha("YuvToRgba4444Row",Co,2),Ha("YuvToRgb565Row",Ao,2);var Wr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tc=[0,2,8],tu=[8,7,6,4,4,2,2,2,1,1,1,1],nu=1;this.WebPDecodeRGBA=function(m,x,C,E,U){var Z=Fs,Q=new $e,se=new wt;Q.ba=se,se.S=Z,se.width=[se.width],se.height=[se.height];var oe=se.width,ue=se.height,ve=new pt;if(ve==null||m==null)var Le=2;else e(ve!=null),Le=ea(m,x,C,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Le!=0?oe=0:(oe!=null&&(oe[0]=ve.width[0]),ue!=null&&(ue[0]=ve.height[0]),oe=1),oe){se.width=se.width[0],se.height=se.height[0],E!=null&&(E[0]=se.width),U!=null&&(U[0]=se.height);e:{if(E=new ni,(U=new rt).data=m,U.w=x,U.ha=C,U.kd=1,x=[0],e(U!=null),((m=ea(U.data,U.w,U.ha,null,null,null,x,null,U))==0||m==7)&&x[0]&&(m=4),(x=m)==0){if(e(Q!=null),E.data=U.data,E.w=U.w+U.offset,E.ha=U.ha-U.offset,E.put=Fe,E.ac=_e,E.bc=ht,E.ma=Q,U.xa){if((m=je())==null){Q=1;break e}if((function(ce,we){var Te=[0],He=[0],ke=[0];t:for(;;){if(ce==null)return 0;if(we==null)return ce.a=2,0;if(ce.l=we,ce.a=0,fe(ce.m,we.data,we.w,we.ha),!Tt(ce.m,Te,He,ke)){ce.a=3;break t}if(ce.xb=hd,we.width=Te[0],we.height=He[0],!Pe(Te[0],He[0],1,ce,null))break t;return 1}return e(ce.a!=0),0})(m,E)){if(E=(x=ta(E.width,E.height,Q.Oa,Q.ba))==0){t:{E=m;n:for(;;){if(E==null){E=0;break t}if(e(E.s.yc!=null),e(E.s.Ya!=null),e(0<E.s.Wb),e((C=E.l)!=null),e((U=C.ma)!=null),E.xb!=0){if(E.ca=U.ba,E.tb=U.tb,e(E.ca!=null),!Wa(U.Oa,C,ki)){E.a=2;break n}if(!Ze(E,C.width)||C.da)break n;if((C.da||Ct(E.ca.S))&&Qi(),11>E.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),E.ca.f.kb.F!=null&&Qi()),E.Pb&&0<E.s.ua&&E.s.vb.X==null&&!Y(E.s.vb,E.s.Wa.Xa)){E.a=1;break n}E.xb=0}if(!Er(E,E.V,E.Ba,E.c,E.i,C.o,Gn))break n;U.Dc=E.Ma,E=1;break t}e(E.a!=0),E=0}E=!E}E&&(x=m.a)}else x=m.a}else{if((m=new Gs)==null){Q=1;break e}if(m.Fa=U.na,m.P=U.P,m.qc=U.Sa,Ds(m,E)){if((x=ta(E.width,E.height,Q.Oa,Q.ba))==0){if(m.Aa=0,C=Q.Oa,e((U=m)!=null),C!=null){if(0<(oe=0>(oe=C.Md)?0:100<oe?255:255*oe/100)){for(ue=ve=0;4>ue;++ue)12>(Le=U.pb[ue]).lc&&(Le.ia=oe*tu[0>Le.lc?0:Le.lc]>>3),ve|=Le.ia;ve&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=C.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}(function(ce,we){if(ce==null)return 0;if(we==null)return Nn(ce,2,"NULL VP8Io parameter in VP8Decode().");if(!ce.cb&&!Ds(ce,we))return 0;if(e(ce.cb),we.ac==null||we.ac(we)){we.ob&&(ce.L=0);var Te=tc[ce.L];if(ce.L==2?(ce.yb=0,ce.zb=0):(ce.yb=we.v-Te>>4,ce.zb=we.j-Te>>4,0>ce.yb&&(ce.yb=0),0>ce.zb&&(ce.zb=0)),ce.Va=we.o+15+Te>>4,ce.Hb=we.va+15+Te>>4,ce.Hb>ce.za&&(ce.Hb=ce.za),ce.Va>ce.Ub&&(ce.Va=ce.Ub),0<ce.L){var He=ce.ed;for(Te=0;4>Te;++Te){var ke;if(ce.Qa.Cb){var Ue=ce.Qa.Lb[Te];ce.Qa.Fb||(Ue+=He.Tb)}else Ue=He.Tb;for(ke=0;1>=ke;++ke){var Ye=ce.gd[Te][ke],it=Ue;if(He.Pc&&(it+=He.vd[0],ke&&(it+=He.od[0])),0<(it=0>it?0:63<it?63:it)){var tt=it;0<He.wb&&(tt=4<He.wb?tt>>2:tt>>1)>9-He.wb&&(tt=9-He.wb),1>tt&&(tt=1),Ye.dd=tt,Ye.tc=2*it+tt,Ye.ld=40<=it?2:15<=it?1:0}else Ye.tc=0;Ye.La=ke}}}Te=0}else Nn(ce,6,"Frame setup failed"),Te=ce.a;if(Te=Te==0){if(Te){ce.$c=0,0<ce.Aa||(ce.Ic=nu);t:{Te=ce.Ic,He=4*(tt=ce.za);var Ot=32*tt,Nt=tt+1,an=0<ce.L?tt*(0<ce.Aa?2:1):0,Et=(ce.Aa==2?2:1)*tt;if((Ye=He+832+(ke=3*(16*Te+tc[ce.L])/2*Ot)+(Ue=ce.Fa!=null&&0<ce.Fa.length?ce.Kc.c*ce.Kc.i:0))!=Ye)Te=0;else{if(Ye>ce.Vb){if(ce.Vb=0,ce.Ec=o(Ye),ce.Fc=0,ce.Ec==null){Te=Nn(ce,1,"no memory during frame initialization.");break t}ce.Vb=Ye}Ye=ce.Ec,it=ce.Fc,ce.Ac=Ye,ce.Bc=it,it+=He,ce.Gd=u(Ot,_s),ce.Hd=0,ce.rb=u(Nt+1,Tn),ce.sb=1,ce.wa=an?u(an,Pn):null,ce.Y=0,ce.D.Nb=0,ce.D.wa=ce.wa,ce.D.Y=ce.Y,0<ce.Aa&&(ce.D.Y+=tt),e(!0),ce.oc=Ye,ce.pc=it,it+=832,ce.ya=u(Et,$r),ce.aa=0,ce.D.ya=ce.ya,ce.D.aa=ce.aa,ce.Aa==2&&(ce.D.aa+=tt),ce.R=16*tt,ce.B=8*tt,tt=(Ot=tc[ce.L])*ce.R,Ot=Ot/2*ce.B,ce.sa=Ye,ce.ta=it+tt,ce.qa=ce.sa,ce.ra=ce.ta+16*Te*ce.R+Ot,ce.Ha=ce.qa,ce.Ia=ce.ra+8*Te*ce.B+Ot,ce.$c=0,it+=ke,ce.mb=Ue?Ye:null,ce.nb=Ue?it:null,e(it+Ue<=ce.Fc+ce.Vb),_o(ce),a(ce.Ac,ce.Bc,0,He),Te=1}}if(Te){if(we.ka=0,we.y=ce.sa,we.O=ce.ta,we.f=ce.qa,we.N=ce.ra,we.ea=ce.Ha,we.Vd=ce.Ia,we.fa=ce.R,we.Rc=ce.B,we.F=null,we.J=0,!qu){for(Te=-255;255>=Te;++Te)cl[255+Te]=0>Te?-Te:Te;for(Te=-1020;1020>=Te;++Te)zu[1020+Te]=-128>Te?-128:127<Te?127:Te;for(Te=-112;112>=Te;++Te)Xc[112+Te]=-16>Te?-16:15<Te?15:Te;for(Te=-255;510>=Te;++Te)Zc[255+Te]=0>Te?0:255<Te?255:Te;qu=1}gi=Zi,Za=Qo,Ci=$s,Hn=Fc,Fn=Vc,Rs=Bl,ar=Vu,Hr=Pa,Sa=q,na=he,ol=Bu,$c=S,od=be,If=Ae,Ff=Ia,Vf=Fa,ld=sl,cd=Uc,Or[0]=Iu,Or[1]=Lu,Or[2]=Ru,Or[3]=zc,Or[4]=fi,Or[5]=qc,Or[6]=Ss,Or[7]=tl,Or[8]=nl,Or[9]=pi,Zs[0]=Ki,Zs[1]=Bc,Zs[2]=Pc,Zs[3]=Du,Zs[4]=Da,Zs[5]=el,Zs[6]=No,ra[0]=Pl,ra[1]=Ou,ra[2]=pa,ra[3]=Fu,ra[4]=ds,ra[5]=zl,ra[6]=ma,Te=1}else Te=0}Te&&(Te=(function(kn,pr){for(kn.M=0;kn.M<kn.Va;++kn.M){var gn,At=kn.Jc[kn.M&kn.Xb],mt=kn.m,wr=kn;for(gn=0;gn<wr.za;++gn){var Xt=mt,yn=wr,Zn=yn.Ac,ss=yn.Bc+4*gn,Es=yn.zc,or=yn.ya[yn.aa+gn];if(yn.Qa.Bb?or.$b=Ne(Xt,yn.Pa.jb[0])?2+Ne(Xt,yn.Pa.jb[2]):Ne(Xt,yn.Pa.jb[1]):or.$b=0,yn.kc&&(or.Ad=Ne(Xt,yn.Bd)),or.Za=!Ne(Xt,145)+0,or.Za){var Xr=or.Ob,Vs=0;for(yn=0;4>yn;++yn){var Zr,An=Es[0+yn];for(Zr=0;4>Zr;++Zr){An=Ts[Zn[ss+Zr]][An];for(var zn=Yu[Ne(Xt,An[0])];0<zn;)zn=Yu[2*zn+Ne(Xt,An[zn])];An=-zn,Zn[ss+Zr]=An}s(Xr,Vs,Zn,ss,4),Vs+=4,Es[0+yn]=An}}else An=Ne(Xt,156)?Ne(Xt,128)?1:3:Ne(Xt,163)?2:0,or.Ob[0]=An,a(Zn,ss,An,4),a(Es,0,An,4);or.Dd=Ne(Xt,142)?Ne(Xt,114)?Ne(Xt,183)?1:3:2:0}if(wr.m.Ka)return Nn(kn,7,"Premature end-of-partition0 encountered.");for(;kn.ja<kn.za;++kn.ja){if(wr=At,Xt=(mt=kn).rb[mt.sb-1],Zn=mt.rb[mt.sb+mt.ja],gn=mt.ya[mt.aa+mt.ja],ss=mt.kc?gn.Ad:0)Xt.la=Zn.la=0,gn.Za||(Xt.Na=Zn.Na=0),gn.Hc=0,gn.Gc=0,gn.ia=0;else{var _r,Wn;if(Xt=Zn,Zn=wr,ss=mt.Pa.Xc,Es=mt.ya[mt.aa+mt.ja],or=mt.pb[Es.$b],yn=Es.ad,Xr=0,Vs=mt.rb[mt.sb-1],An=Zr=0,a(yn,Xr,0,384),Es.Za)var is=0,Sr=ss[3];else{zn=o(16);var qn=Xt.Na+Vs.Na;if(qn=vi(Zn,ss[1],qn,or.Eb,0,zn,0),Xt.Na=Vs.Na=(0<qn)+0,1<qn)gi(zn,0,yn,Xr);else{var Gr=zn[0]+3>>3;for(zn=0;256>zn;zn+=16)yn[Xr+zn]=Gr}is=1,Sr=ss[0]}var Kn=15&Xt.la,Kr=15&Vs.la;for(zn=0;4>zn;++zn){var Qr=1&Kr;for(Gr=Wn=0;4>Gr;++Gr)Kn=Kn>>1|(Qr=(qn=vi(Zn,Sr,qn=Qr+(1&Kn),or.Sc,is,yn,Xr))>is)<<7,Wn=Wn<<2|(3<qn?3:1<qn?2:yn[Xr+0]!=0),Xr+=16;Kn>>=4,Kr=Kr>>1|Qr<<7,Zr=(Zr<<8|Wn)>>>0}for(Sr=Kn,is=Kr>>4,_r=0;4>_r;_r+=2){for(Wn=0,Kn=Xt.la>>4+_r,Kr=Vs.la>>4+_r,zn=0;2>zn;++zn){for(Qr=1&Kr,Gr=0;2>Gr;++Gr)qn=Qr+(1&Kn),Kn=Kn>>1|(Qr=0<(qn=vi(Zn,ss[2],qn,or.Qc,0,yn,Xr)))<<3,Wn=Wn<<2|(3<qn?3:1<qn?2:yn[Xr+0]!=0),Xr+=16;Kn>>=2,Kr=Kr>>1|Qr<<5}An|=Wn<<4*_r,Sr|=Kn<<4<<_r,is|=(240&Kr)<<_r}Xt.la=Sr,Vs.la=is,Es.Hc=Zr,Es.Gc=An,Es.ia=43690&An?0:or.ia,ss=!(Zr|An)}if(0<mt.L&&(mt.wa[mt.Y+mt.ja]=mt.gd[gn.$b][gn.Za],mt.wa[mt.Y+mt.ja].La|=!ss),wr.Ka)return Nn(kn,7,"Premature end-of-file encountered.")}if(_o(kn),mt=pr,wr=1,gn=(At=kn).D,Xt=0<At.L&&At.M>=At.zb&&At.M<=At.Va,At.Aa==0)t:{if(gn.M=At.M,gn.uc=Xt,mi(At,gn),wr=1,gn=(Wn=At.D).Nb,Xt=(An=tc[At.L])*At.R,Zn=An/2*At.B,zn=16*gn*At.R,Gr=8*gn*At.B,ss=At.sa,Es=At.ta-Xt+zn,or=At.qa,yn=At.ra-Zn+Gr,Xr=At.Ha,Vs=At.Ia-Zn+Gr,Kr=(Kn=Wn.M)==0,Zr=Kn>=At.Va-1,At.Aa==2&&mi(At,Wn),Wn.uc)for(Qr=(qn=At).D.M,e(qn.D.uc),Wn=qn.yb;Wn<qn.Hb;++Wn){is=Wn,Sr=Qr;var er=(Vn=(Jr=qn).D).Nb;_r=Jr.R;var Vn=Vn.wa[Vn.Y+is],Bs=Jr.sa,Dr=Jr.ta+16*er*_r+16*is,Ht=Vn.dd,Wt=Vn.tc;if(Wt!=0)if(e(3<=Wt),Jr.L==1)0<is&&Vf(Bs,Dr,_r,Wt+4),Vn.La&&cd(Bs,Dr,_r,Wt),0<Sr&&Ff(Bs,Dr,_r,Wt+4),Vn.La&&ld(Bs,Dr,_r,Wt);else{var Un=Jr.B,ii=Jr.qa,Ri=Jr.ra+8*er*Un+8*is,Ks=Jr.Ha,Jr=Jr.Ia+8*er*Un+8*is;er=Vn.ld,0<is&&(Hr(Bs,Dr,_r,Wt+4,Ht,er),na(ii,Ri,Ks,Jr,Un,Wt+4,Ht,er)),Vn.La&&($c(Bs,Dr,_r,Wt,Ht,er),If(ii,Ri,Ks,Jr,Un,Wt,Ht,er)),0<Sr&&(ar(Bs,Dr,_r,Wt+4,Ht,er),Sa(ii,Ri,Ks,Jr,Un,Wt+4,Ht,er)),Vn.La&&(ol(Bs,Dr,_r,Wt,Ht,er),od(ii,Ri,Ks,Jr,Un,Wt,Ht,er))}}if(At.ia&&alert("todo:DitherRow"),mt.put!=null){if(Wn=16*Kn,Kn=16*(Kn+1),Kr?(mt.y=At.sa,mt.O=At.ta+zn,mt.f=At.qa,mt.N=At.ra+Gr,mt.ea=At.Ha,mt.W=At.Ia+Gr):(Wn-=An,mt.y=ss,mt.O=Es,mt.f=or,mt.N=yn,mt.ea=Xr,mt.W=Vs),Zr||(Kn-=An),Kn>mt.o&&(Kn=mt.o),mt.F=null,mt.J=null,At.Fa!=null&&0<At.Fa.length&&Wn<Kn&&(mt.J=ir(At,mt,Wn,Kn-Wn),mt.F=At.mb,mt.F==null&&mt.F.length==0)){wr=Nn(At,3,"Could not decode alpha data.");break t}Wn<mt.j&&(An=mt.j-Wn,Wn=mt.j,e(!(1&An)),mt.O+=At.R*An,mt.N+=At.B*(An>>1),mt.W+=At.B*(An>>1),mt.F!=null&&(mt.J+=mt.width*An)),Wn<Kn&&(mt.O+=mt.v,mt.N+=mt.v>>1,mt.W+=mt.v>>1,mt.F!=null&&(mt.J+=mt.v),mt.ka=Wn-mt.j,mt.U=mt.va-mt.v,mt.T=Kn-Wn,wr=mt.put(mt))}gn+1!=At.Ic||Zr||(s(At.sa,At.ta-Xt,ss,Es+16*At.R,Xt),s(At.qa,At.ra-Zn,or,yn+8*At.B,Zn),s(At.Ha,At.Ia-Zn,Xr,Vs+8*At.B,Zn))}if(!wr)return Nn(kn,6,"Output aborted.")}return 1})(ce,we)),we.bc!=null&&we.bc(we),Te&=1}return Te?(ce.cb=0,Te):0})(m,E)||(x=m.a)}}else x=m.a}x==0&&Q.Oa!=null&&Q.Oa.fd&&(x=Gc(Q.ba))}Q=x}Z=Q!=0?null:11>Z?se.f.RGBA.eb:se.f.kb.y}else Z=null;return Z};var Qu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(B,te){for(var j="",I=0;I<4;I++)j+=String.fromCharCode(B[te++]);return j}function p(B,te){return B[te+0]|B[te+1]<<8}function y(B,te){return(B[te+0]|B[te+1]<<8|B[te+2]<<16)>>>0}function _(B,te){return(B[te+0]|B[te+1]<<8|B[te+2]<<16|B[te+3]<<24)>>>0}new h;var b=[0],A=[0],N=[],k=new h,T=n,R=(function(B,te){var j={},I=0,K=!1,P=0,ie=0;if(j.frames=[],!(function(M,$){for(var G=0;G<4;G++)if(M[$+G]!="RIFF".charCodeAt(G))return!0;return!1})(B,te)){for(_(B,te+=4),te+=8;te<B.length;){var X=f(B,te),re=_(B,te+=4);te+=4;var le=re+(1&re);switch(X){case"VP8 ":case"VP8L":j.frames[I]===void 0&&(j.frames[I]={}),(z=j.frames[I]).src_off=K?ie:te-8,z.src_size=P+re+8,I++,K&&(K=!1,P=0,ie=0);break;case"VP8X":(z=j.header={}).feature_flags=B[te];var fe=te+4;z.canvas_width=1+y(B,fe),fe+=3,z.canvas_height=1+y(B,fe),fe+=3;break;case"ALPH":K=!0,P=le+8,ie=te-8;break;case"ANIM":(z=j.header).bgcolor=_(B,te),fe=te+4,z.loop_count=p(B,fe),fe+=2;break;case"ANMF":var Se,z;(z=j.frames[I]={}).offset_x=2*y(B,te),te+=3,z.offset_y=2*y(B,te),te+=3,z.width=1+y(B,te),te+=3,z.height=1+y(B,te),te+=3,z.duration=y(B,te),te+=3,Se=B[te++],z.dispose=1&Se,z.blend=Se>>1&1}X!="ANMF"&&(te+=le)}return j}})(T,0);R.response=T,R.rgbaoutput=!0,R.dataurl=!1;var D=R.header?R.header:null,V=R.frames?R.frames:null;if(D){D.loop_counter=D.loop_count,b=[D.canvas_height],A=[D.canvas_width];for(var F=0;F<V.length&&V[F].blend!=0;F++);}var W=V[0],H=k.WebPDecodeRGBA(T,W.src_off,W.src_size,A,b);W.rgba=H,W.imgwidth=A[0],W.imgheight=b[0];for(var L=0;L<A[0]*b[0]*4;L++)N[L]=H[L];return this.width=A,this.height=b,this.data=N,this}(function(n){var e,t,s,a,o,u,c,h,f,p=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new h,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new u,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new u,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,h=this.internal.Matrix,f=new p}]);var y=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=M;Object.defineProperty(this,"pdf",{get:function(){return $}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(Y){G=!!Y}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(Y){J=!!Y}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Y){isNaN(Y)||(ae=Y)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(Y){isNaN(Y)||(pe=Y)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(Y){var Ie;typeof Y=="number"?Ie=[Y,Y,Y,Y]:((Ie=new Array(4))[0]=Y[0],Ie[1]=Y.length>=2?Y[1]:Ie[0],Ie[2]=Y.length>=3?Y[2]:Ie[0],Ie[3]=Y.length>=4?Y[3]:Ie[1]),f.margin=Ie}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(Y){de=Y}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(Y){xe=Y}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(Y){Ne=Y}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(Y){Y instanceof p&&(f=Y)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(Y){f.path=Y}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(Y){Be=Y}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Y){var Ie;Ie=_(Y),this.ctx.fillStyle=Ie.style,this.ctx.isFillTransparent=Ie.a===0,this.ctx.fillOpacity=Ie.a,this.pdf.setFillColor(Ie.r,Ie.g,Ie.b,{a:Ie.a}),this.pdf.setTextColor(Ie.r,Ie.g,Ie.b,{a:Ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Y){var Ie=_(Y);this.ctx.strokeStyle=Ie.style,this.ctx.isStrokeTransparent=Ie.a===0,this.ctx.strokeOpacity=Ie.a,Ie.a===0?this.pdf.setDrawColor(255,255,255):(Ie.a,this.pdf.setDrawColor(Ie.r,Ie.g,Ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Y){["butt","round","square"].indexOf(Y)!==-1&&(this.ctx.lineCap=Y,this.pdf.setLineCap(Y))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Y){isNaN(Y)||(this.ctx.lineWidth=Y,this.pdf.setLineWidth(Y))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Y){["bevel","round","miter"].indexOf(Y)!==-1&&(this.ctx.lineJoin=Y,this.pdf.setLineJoin(Y))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Y){isNaN(Y)||(this.ctx.miterLimit=Y,this.pdf.setMiterLimit(Y))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Y){this.ctx.textBaseline=Y}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Y){["right","end","center","left","start"].indexOf(Y)!==-1&&(this.ctx.textAlign=Y)}});var Qe=null,Xe=null,st=null;Object.defineProperty(this,"fontFaces",{get:function(){return st},set:function(Y){Qe=null,Xe=null,st=Y}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Y){var Ie;if(this.ctx.font=Y,(Ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Y))!==null){var dt=Ie[1];Ie[2];var et=Ie[3],ge=Ie[4];Ie[5];var qe=Ie[6],Re=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ge)[2];ge=Math.floor(Re==="px"?parseFloat(ge)*this.pdf.internal.scaleFactor:Re==="em"?parseFloat(ge)*this.pdf.getFontSize():parseFloat(ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ge);var nt=(function(Me){var ut,ot,We=[],at=Me.trim();if(at==="")return eg;if(at in vx)return[vx[at]];for(;at!=="";){switch(ot=null,ut=(at=xx(at)).charAt(0)){case'"':case"'":ot=OL(at.substring(1),ut);break;default:ot=DL(at)}if(ot===null||(We.push(ot[0]),(at=xx(ot[1]))!==""&&at.charAt(0)!==","))return eg;at=at.replace(/^,/,"")}return We})(qe);if(this.fontFaces){var ct=(function(Me,ut){var ot=Me.getFontList(),We=JSON.stringify(ot);if(Qe===null||Xe!==We){var at=(function(bt){var lt=[];return Object.keys(bt).forEach(function(tn){bt[tn].forEach(function(Ct){var Vt=null;switch(Ct){case"bold":Vt={family:tn,weight:"bold"};break;case"italic":Vt={family:tn,style:"italic"};break;case"bolditalic":Vt={family:tn,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:tn}}Vt!==null&&(Vt.ref={name:tn,style:Ct},lt.push(Vt))})}),lt})(ot);Qe=(function(bt){for(var lt={},tn=0;tn<bt.length;++tn){var Ct=Jm(bt[tn]),Vt=Ct.family,Jt=Ct.stretch,wt=Ct.style,pt=Ct.weight;lt[Vt]=lt[Vt]||{},lt[Vt][Jt]=lt[Vt][Jt]||{},lt[Vt][Jt][wt]=lt[Vt][Jt][wt]||{},lt[Vt][Jt][wt][pt]=Ct}return lt})(at.concat(ut)),Xe=We}return Qe})(this.pdf,this.fontFaces),vt=nt.map(function(Me){return{family:Me,stretch:"normal",weight:et,style:dt}}),It=(function(Me,ut,ot){for(var We=(ot=ot||{}).defaultFontFamily||"times",at=Object.assign({},LL,ot.genericFontFamilies||{}),bt=null,lt=null,tn=0;tn<ut.length;++tn)if(at[(bt=Jm(ut[tn])).family]&&(bt.family=at[bt.family]),Me.hasOwnProperty(bt.family)){lt=Me[bt.family];break}if(!(lt=lt||Me[We]))throw new Error("Could not find a font-family for the rule '"+yx(bt)+"' and default family '"+We+"'.");if(lt=(function(Ct,Vt){if(Vt[Ct])return Vt[Ct];var Jt=Vg[Ct],wt=Jt<=Vg.normal?-1:1,pt=bx(Vt,F4,Jt,wt);if(!pt)throw new Error("Could not find a matching font-stretch value for "+Ct);return pt})(bt.stretch,lt),lt=(function(Ct,Vt){if(Vt[Ct])return Vt[Ct];for(var Jt=I4[Ct],wt=0;wt<Jt.length;++wt)if(Vt[Jt[wt]])return Vt[Jt[wt]];throw new Error("Could not find a matching font-style for "+Ct)})(bt.style,lt),!(lt=(function(Ct,Vt){if(Vt[Ct])return Vt[Ct];if(Ct===400&&Vt[500])return Vt[500];if(Ct===500&&Vt[400])return Vt[400];var Jt=ML[Ct],wt=bx(Vt,V4,Jt,Ct<400?-1:1);if(!wt)throw new Error("Could not find a matching font-weight for value "+Ct);return wt})(bt.weight,lt)))throw new Error("Failed to resolve a font for the rule '"+yx(bt)+"'.");return lt})(ct,vt);this.pdf.setFont(It.ref.name,It.ref.style)}else{var St="";(et==="bold"||parseInt(et,10)>=700||dt==="bold")&&(St="bold"),dt==="italic"&&(St+="italic"),St.length===0&&(St="normal");for(var Ft="",jt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yt=0;yt<nt.length;yt++){if(this.pdf.internal.getFont(nt[yt],St,{noFallback:!0,disableWarning:!0})!==void 0){Ft=nt[yt];break}if(St==="bolditalic"&&this.pdf.internal.getFont(nt[yt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ft=nt[yt],St="bold";else if(this.pdf.internal.getFont(nt[yt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ft=nt[yt],St="normal";break}}if(Ft===""){for(var xt=0;xt<nt.length;xt++)if(jt[nt[xt]]){Ft=jt[nt[xt]];break}}Ft=Ft===""?"Times":Ft,this.pdf.setFont(Ft,St)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Y){this.ctx.globalCompositeOperation=Y}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Y){this.ctx.globalAlpha=Y}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Y){this.ctx.lineDashOffset=Y,z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Y){this.ctx.lineDash=Y,z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Y){this.ctx.ignoreClearRect=!!Y}})};y.prototype.setLineDash=function(M){this.lineDash=M},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){V.call(this,"fill",!1)},y.prototype.stroke=function(){V.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(M,$){if(isNaN(M)||isNaN($))throw gr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new u(M,$));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new u(M,$)},y.prototype.closePath=function(){var M=new u(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&rr(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){M=new u(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(M.x,M.y)},y.prototype.lineTo=function(M,$){if(isNaN(M)||isNaN($))throw gr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new u(M,$));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new u(G.x,G.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},y.prototype.quadraticCurveTo=function(M,$,G,J){if(isNaN(G)||isNaN(J)||isNaN(M)||isNaN($))throw gr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new u(G,J)),pe=this.ctx.transform.applyToPoint(new u(M,$));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new u(ae.x,ae.y)},y.prototype.bezierCurveTo=function(M,$,G,J,ae,pe){if(isNaN(ae)||isNaN(pe)||isNaN(M)||isNaN($)||isNaN(G)||isNaN(J))throw gr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new u(ae,pe)),xe=this.ctx.transform.applyToPoint(new u(M,$)),Ne=this.ctx.transform.applyToPoint(new u(G,J));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Ne.x,y2:Ne.y,x:de.x,y:de.y}),this.ctx.lastPoint=new u(de.x,de.y)},y.prototype.arc=function(M,$,G,J,ae,pe){if(isNaN(M)||isNaN($)||isNaN(G)||isNaN(J)||isNaN(ae))throw gr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new u(M,$));M=de.x,$=de.y;var xe=this.ctx.transform.applyToPoint(new u(0,G)),Ne=this.ctx.transform.applyToPoint(new u(0,0));G=Math.sqrt(Math.pow(xe.x-Ne.x,2)+Math.pow(xe.y-Ne.y,2))}Math.abs(ae-J)>=2*Math.PI&&(J=0,ae=2*Math.PI),this.path.push({type:"arc",x:M,y:$,radius:G,startAngle:J,endAngle:ae,counterclockwise:pe})},y.prototype.arcTo=function(M,$,G,J,ae){throw new Error("arcTo not implemented.")},y.prototype.rect=function(M,$,G,J){if(isNaN(M)||isNaN($)||isNaN(G)||isNaN(J))throw gr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,$),this.lineTo(M+G,$),this.lineTo(M+G,$+J),this.lineTo(M,$+J),this.lineTo(M,$),this.lineTo(M+G,$),this.lineTo(M,$)},y.prototype.fillRect=function(M,$,G,J){if(isNaN(M)||isNaN($)||isNaN(G)||isNaN(J))throw gr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,$,G,J),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},y.prototype.strokeRect=function(M,$,G,J){if(isNaN(M)||isNaN($)||isNaN(G)||isNaN(J))throw gr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(M,$,G,J),this.stroke())},y.prototype.clearRect=function(M,$,G,J){if(isNaN(M)||isNaN($)||isNaN(G)||isNaN(J))throw gr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,$,G,J))},y.prototype.save=function(M){M=typeof M!="boolean"||M;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage($),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},y.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage($),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(M){var $,G,J,ae;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))$=0,G=0,J=0,ae=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(pe!==null)$=parseInt(pe[1]),G=parseInt(pe[2]),J=parseInt(pe[3]),ae=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)$=parseInt(pe[1]),G=parseInt(pe[2]),J=parseInt(pe[3]),ae=parseFloat(pe[4]);else{if(ae=1,typeof M=="string"&&M.charAt(0)!=="#"){var de=new j4(M);M=de.ok?de.toHex():"#000000"}M.length===4?($=M.substring(1,2),$+=$,G=M.substring(2,3),G+=G,J=M.substring(3,4),J+=J):($=M.substring(1,3),G=M.substring(3,5),J=M.substring(5,7)),$=parseInt($,16),G=parseInt(G,16),J=parseInt(J,16)}}return{r:$,g:G,b:J,a:ae,style:M}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(M,$,G,J){if(isNaN($)||isNaN(G)||typeof M!="string")throw gr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!b.call(this)){var ae=le(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;I.call(this,{text:M,x:$,y:G,scale:pe,angle:ae,align:this.textAlign,maxWidth:J})}},y.prototype.strokeText=function(M,$,G,J){if(isNaN($)||isNaN(G)||typeof M!="string")throw gr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){J=isNaN(J)?void 0:J;var ae=le(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;I.call(this,{text:M,x:$,y:G,scale:pe,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:J})}},y.prototype.measureText=function(M){if(typeof M!="string")throw gr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,G=this.pdf.internal.scaleFactor,J=$.internal.getFontSize(),ae=$.getStringUnitWidth(M)*J/$.internal.scaleFactor;return new function(pe){var de=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this}({width:ae*=Math.round(96*G/72*1e4)/1e4})},y.prototype.scale=function(M,$){if(isNaN(M)||isNaN($))throw gr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new h(M,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},y.prototype.rotate=function(M){if(isNaN(M))throw gr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new h(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply($)},y.prototype.translate=function(M,$){if(isNaN(M)||isNaN($))throw gr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new h(1,0,0,1,M,$);this.ctx.transform=this.ctx.transform.multiply(G)},y.prototype.transform=function(M,$,G,J,ae,pe){if(isNaN(M)||isNaN($)||isNaN(G)||isNaN(J)||isNaN(ae)||isNaN(pe))throw gr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new h(M,$,G,J,ae,pe);this.ctx.transform=this.ctx.transform.multiply(de)},y.prototype.setTransform=function(M,$,G,J,ae,pe){M=isNaN(M)?1:M,$=isNaN($)?0:$,G=isNaN(G)?0:G,J=isNaN(J)?1:J,ae=isNaN(ae)?0:ae,pe=isNaN(pe)?0:pe,this.ctx.transform=new h(M,$,G,J,ae,pe)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(M,$,G,J,ae,pe,de,xe,Ne){var Be=this.pdf.getImageProperties(M),Qe=1,Xe=1,st=1,Y=1;J!==void 0&&xe!==void 0&&(st=xe/J,Y=Ne/ae,Qe=Be.width/J*xe/J,Xe=Be.height/ae*Ne/ae),pe===void 0&&(pe=$,de=G,$=0,G=0),J!==void 0&&xe===void 0&&(xe=J,Ne=ae),J===void 0&&xe===void 0&&(xe=Be.width,Ne=Be.height);var Ie=this.ctx.transform.decompose(),dt=le(Ie.rotate.shx),et=new h,ge=(et=(et=(et=et.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new c(pe-$*st,de-G*Y,J*Qe,ae*Xe));if(this.autoPaging){for(var qe,Re=k.call(this,ge),nt=[],ct=0;ct<Re.length;ct+=1)nt.indexOf(Re[ct])===-1&&nt.push(Re[ct]);D(nt);for(var vt=nt[0],It=nt[nt.length-1],St=vt;St<It+1;St++){this.pdf.setPage(St);var Ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],jt=St===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Me=St===1?0:yt+(St-2)*xt;if(this.ctx.clip_path.length!==0){var ut=this.path;qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(qe,this.posX+this.margin[3],-Me+jt+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=ut}var ot=JSON.parse(JSON.stringify(ge));ot=R([ot],this.posX+this.margin[3],-Me+jt+this.ctx.prevPageLastElemOffset)[0];var We=(St>vt||St<It)&&N.call(this);We&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ft,xt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,dt),We&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,dt)};var k=function(M,$,G){var J=[];$=$||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":J.push(Math.floor((M.y+ae)/G)+1);break;case"arc":J.push(Math.floor((M.y+ae-M.radius)/G)+1),J.push(Math.floor((M.y+ae+M.radius)/G)+1);break;case"qct":var pe=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);J.push(Math.floor((pe.y+ae)/G)+1),J.push(Math.floor((pe.y+pe.h+ae)/G)+1);break;case"bct":var de=Se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);J.push(Math.floor((de.y+ae)/G)+1),J.push(Math.floor((de.y+de.h+ae)/G)+1);break;case"rect":J.push(Math.floor((M.y+ae)/G)+1),J.push(Math.floor((M.y+M.h+ae)/G)+1)}for(var xe=0;xe<J.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<J[xe];)T.call(this);return J},T=function(){var M=this.fillStyle,$=this.strokeStyle,G=this.font,J=this.lineCap,ae=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=$,this.font=G,this.lineCap=J,this.lineWidth=ae,this.lineJoin=pe},R=function(M,$,G){for(var J=0;J<M.length;J++)switch(M[J].type){case"bct":M[J].x2+=$,M[J].y2+=G;case"qct":M[J].x1+=$,M[J].y1+=G;default:M[J].x+=$,M[J].y+=G}return M},D=function(M){return M.sort(function($,G){return $-G})},V=function(M,$){var G=this.fillStyle,J=this.strokeStyle,ae=this.lineCap,pe=this.lineWidth,de=Math.abs(pe*this.ctx.transform.scaleX),xe=this.lineJoin;if(this.autoPaging){for(var Ne,Be,Qe=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),st=[],Y=0;Y<Xe.length;Y++)if(Xe[Y].x!==void 0)for(var Ie=k.call(this,Xe[Y]),dt=0;dt<Ie.length;dt+=1)st.indexOf(Ie[dt])===-1&&st.push(Ie[dt]);for(var et=0;et<st.length;et++)for(;this.pdf.internal.getNumberOfPages()<st[et];)T.call(this);D(st);for(var ge=st[0],qe=st[st.length-1],Re=ge;Re<qe+1;Re++){this.pdf.setPage(Re),this.fillStyle=G,this.strokeStyle=J,this.lineCap=ae,this.lineWidth=de,this.lineJoin=xe;var nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=Re===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],St=Re===1?0:vt+(Re-2)*It;if(this.ctx.clip_path.length!==0){var Ft=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Ne,this.posX+this.margin[3],-St+ct+this.ctx.prevPageLastElemOffset),F.call(this,M,!0),this.path=Ft}if(Be=JSON.parse(JSON.stringify(Qe)),this.path=R(Be,this.posX+this.margin[3],-St+ct+this.ctx.prevPageLastElemOffset),$===!1||Re===0){var jt=(Re>ge||Re<qe)&&N.call(this);jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nt,It,null).clip().discardPath()),F.call(this,M,$),jt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}this.path=Qe}else this.lineWidth=de,F.call(this,M,$),this.lineWidth=pe},F=function(M,$){if((M!=="stroke"||$||!A.call(this))&&(M==="stroke"||$||!b.call(this))){for(var G,J,ae=[],pe=this.path,de=0;de<pe.length;de++){var xe=pe[de];switch(xe.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:xe,deltas:[],abs:[]});break;case"lt":var Ne=ae.length;if(pe[de-1]&&!isNaN(pe[de-1].x)&&(G=[xe.x-pe[de-1].x,xe.y-pe[de-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ae[Ne-1].close!==!0&&ae[Ne-1].begin!==!0){ae[Ne-1].deltas.push(G),ae[Ne-1].abs.push(xe);break}}break;case"bct":G=[xe.x1-pe[de-1].x,xe.y1-pe[de-1].y,xe.x2-pe[de-1].x,xe.y2-pe[de-1].y,xe.x-pe[de-1].x,xe.y-pe[de-1].y],ae[ae.length-1].deltas.push(G);break;case"qct":var Be=pe[de-1].x+2/3*(xe.x1-pe[de-1].x),Qe=pe[de-1].y+2/3*(xe.y1-pe[de-1].y),Xe=xe.x+2/3*(xe.x1-xe.x),st=xe.y+2/3*(xe.y1-xe.y),Y=xe.x,Ie=xe.y;G=[Be-pe[de-1].x,Qe-pe[de-1].y,Xe-pe[de-1].x,st-pe[de-1].y,Y-pe[de-1].x,Ie-pe[de-1].y],ae[ae.length-1].deltas.push(G);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(xe)}}J=$?null:M==="stroke"?"stroke":"fill";for(var dt=!1,et=0;et<ae.length;et++)if(ae[et].arc)for(var ge=ae[et].abs,qe=0;qe<ge.length;qe++){var Re=ge[qe];Re.type==="arc"?L.call(this,Re.x,Re.y,Re.radius,Re.startAngle,Re.endAngle,Re.counterclockwise,void 0,$,!dt):K.call(this,Re.x,Re.y),dt=!0}else if(ae[et].close===!0)this.pdf.internal.out("h"),dt=!1;else if(ae[et].begin!==!0){var nt=ae[et].start.x,ct=ae[et].start.y;P.call(this,ae[et].deltas,nt,ct),dt=!0}J&&B.call(this,J),$&&te.call(this)}},W=function(M){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-G;case"top":return M+$-G;case"hanging":return M+$-2*G;case"middle":return M+$/2-G;default:return M}},H=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function($,G){this.colorStops.push([$,G])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var L=function(M,$,G,J,ae,pe,de,xe,Ne){for(var Be=X.call(this,G,J,ae,pe),Qe=0;Qe<Be.length;Qe++){var Xe=Be[Qe];Qe===0&&(Ne?j.call(this,Xe.x1+M,Xe.y1+$):K.call(this,Xe.x1+M,Xe.y1+$)),ie.call(this,M,$,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}xe?te.call(this):B.call(this,de)},B=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},te=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(M,$){this.pdf.internal.out(t(M)+" "+s($)+" m")},I=function(M){var $;switch(M.align){case"right":case"end":$="right";break;case"center":$="center";break;default:$="left"}var G,J,ae,pe=this.pdf.getTextDimensions(M.text),de=W.call(this,M.y),xe=H.call(this,de)-pe.h,Ne=this.ctx.transform.applyToPoint(new u(M.x,de));if(this.autoPaging){var Be=this.ctx.transform.decompose(),Qe=new h;Qe=(Qe=(Qe=Qe.multiply(Be.translate)).multiply(Be.skew)).multiply(Be.scale);for(var Xe=this.ctx.transform.applyToRectangle(new c(M.x,de,pe.w,pe.h)),st=Qe.applyToRectangle(new c(M.x,xe,pe.w,pe.h)),Y=k.call(this,st),Ie=[],dt=0;dt<Y.length;dt+=1)Ie.indexOf(Y[dt])===-1&&Ie.push(Y[dt]);D(Ie);for(var et=Ie[0],ge=Ie[Ie.length-1],qe=et;qe<ge+1;qe++){this.pdf.setPage(qe);var Re=qe===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[2],vt=ct-this.margin[0],It=this.pdf.internal.pageSize.width-this.margin[1],St=It-this.margin[3],Ft=qe===1?0:nt+(qe-2)*vt;if(this.ctx.clip_path.length!==0){var jt=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(G,this.posX+this.margin[3],-1*Ft+Re),F.call(this,"fill",!0),this.path=jt}var yt=R([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-Ft+Re+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(J=this.pdf.internal.getFontSize(),this.pdf.setFontSize(J*M.scale),ae=this.lineWidth,this.lineWidth=ae*M.scale);var xt=this.autoPaging!=="text";if(xt||yt.y+yt.h<=ct){if(xt||yt.y>=Re&&yt.x<=It){var Me=xt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||It-yt.x)[0],ut=R([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-Ft+Re+this.ctx.prevPageLastElemOffset)[0],ot=xt&&(qe>et||qe<ge)&&N.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,vt,null).clip().discardPath()),this.pdf.text(Me,ut.x,ut.y,{angle:M.angle,align:$,renderingMode:M.renderingMode}),ot&&this.pdf.restoreGraphicsState()}}else yt.y<ct&&(this.ctx.prevPageLastElemOffset+=ct-yt.y);M.scale>=.01&&(this.pdf.setFontSize(J),this.lineWidth=ae)}}else M.scale>=.01&&(J=this.pdf.internal.getFontSize(),this.pdf.setFontSize(J*M.scale),ae=this.lineWidth,this.lineWidth=ae*M.scale),this.pdf.text(M.text,Ne.x+this.posX,Ne.y+this.posY,{angle:M.angle,align:$,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(J),this.lineWidth=ae)},K=function(M,$,G,J){G=G||0,J=J||0,this.pdf.internal.out(t(M+G)+" "+s($+J)+" l")},P=function(M,$,G){return this.pdf.lines(M,$,G,null,null)},ie=function(M,$,G,J,ae,pe,de,xe){this.pdf.internal.out([e(a(G+M)),e(o(J+$)),e(a(ae+M)),e(o(pe+$)),e(a(de+M)),e(o(xe+$)),"c"].join(" "))},X=function(M,$,G,J){for(var ae=2*Math.PI,pe=Math.PI/2;$>G;)$-=ae;var de=Math.abs(G-$);de<ae&&J&&(de=ae-de);for(var xe=[],Ne=J?-1:1,Be=$;de>1e-5;){var Qe=Be+Ne*Math.min(de,pe);xe.push(re.call(this,M,Be,Qe)),de-=Math.abs(Qe-Be),Be=Qe}return xe},re=function(M,$,G){var J=(G-$)/2,ae=M*Math.cos(J),pe=M*Math.sin(J),de=ae,xe=-pe,Ne=de*de+xe*xe,Be=Ne+de*ae+xe*pe,Qe=4/3*(Math.sqrt(2*Ne*Be)-Be)/(de*pe-xe*ae),Xe=de-Qe*xe,st=xe+Qe*de,Y=Xe,Ie=-st,dt=J+$,et=Math.cos(dt),ge=Math.sin(dt);return{x1:M*Math.cos($),y1:M*Math.sin($),x2:Xe*et-st*ge,y2:Xe*ge+st*et,x3:Y*et-Ie*ge,y3:Y*ge+Ie*et,x4:M*Math.cos(G),y4:M*Math.sin(G)}},le=function(M){return 180*M/Math.PI},fe=function(M,$,G,J,ae,pe){var de=M+.5*(G-M),xe=$+.5*(J-$),Ne=ae+.5*(G-ae),Be=pe+.5*(J-pe),Qe=Math.min(M,ae,de,Ne),Xe=Math.max(M,ae,de,Ne),st=Math.min($,pe,xe,Be),Y=Math.max($,pe,xe,Be);return new c(Qe,st,Xe-Qe,Y-st)},Se=function(M,$,G,J,ae,pe,de,xe){var Ne,Be,Qe,Xe,st,Y,Ie,dt,et,ge,qe,Re,nt,ct,vt=G-M,It=J-$,St=ae-G,Ft=pe-J,jt=de-ae,yt=xe-pe;for(Be=0;Be<41;Be++)et=(Ie=(Qe=M+(Ne=Be/40)*vt)+Ne*((st=G+Ne*St)-Qe))+Ne*(st+Ne*(ae+Ne*jt-st)-Ie),ge=(dt=(Xe=$+Ne*It)+Ne*((Y=J+Ne*Ft)-Xe))+Ne*(Y+Ne*(pe+Ne*yt-Y)-dt),Be==0?(qe=et,Re=ge,nt=et,ct=ge):(qe=Math.min(qe,et),Re=Math.min(Re,ge),nt=Math.max(nt,et),ct=Math.max(ct,ge));return new c(Math.round(qe),Math.round(Re),Math.round(nt-qe),Math.round(ct-Re))},z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,$,G=(M=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:$}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(Ut.API),(function(n){var e=function(u){var c,h,f,p,y,_,b,A,N,k;for(h=[],f=0,p=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;p>f;f+=4)(y=(u.charCodeAt(f)<<24)+(u.charCodeAt(f+1)<<16)+(u.charCodeAt(f+2)<<8)+u.charCodeAt(f+3))!==0?(_=(y=((y=((y=((y=(y-(k=y%85))/85)-(N=y%85))/85)-(A=y%85))/85)-(b=y%85))/85)%85,h.push(_+33,b+33,A+33,N+33,k+33)):h.push(122);return(function(T,R){for(var D=R;D>0;D--)T.pop()})(h,c.length),String.fromCharCode.apply(String,h)+"~>"},t=function(u){var c,h,f,p,y,_=String,b="length",A=255,N="charCodeAt",k="slice",T="replace";for(u[k](-2),u=u[k](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),f=[],p=0,y=(u+=c="uuuuu"[k](u[b]%5||5))[b];y>p;p+=5)h=52200625*(u[N](p)-33)+614125*(u[N](p+1)-33)+7225*(u[N](p+2)-33)+85*(u[N](p+3)-33)+(u[N](p+4)-33),f.push(A&h>>24,A&h>>16,A&h>>8,A&h);return(function(R,D){for(var V=D;V>0;V--)R.pop()})(f,c[b]),_.fromCharCode.apply(_,f)},s=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var h="",f=0;f<u.length;f+=2)h+=String.fromCharCode("0x"+(u[f]+u[f+1]));return h},o=function(u){for(var c=new Uint8Array(u.length),h=u.length;h--;)c[h]=u.charCodeAt(h);return(c=Mg(c)).reduce(function(f,p){return f+String.fromCharCode(p)},"")};n.processDataByFilters=function(u,c){var h=0,f=u||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),h=0;h<c.length;h+=1)switch(c[h]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=a(f),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=s(f),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=o(f),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[h]+'" is not implemented')}return{data:f,reverseChain:p.reverse().join(" ")}}})(Ut.API),(function(n){n.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(h,f,p){var y=new XMLHttpRequest,_=0,b=function(A){var N=A.length,k=[],T=String.fromCharCode;for(_=0;_<N;_+=1)k.push(T(255&A.charCodeAt(_)));return k.join("")};if(y.open("GET",h,!f),y.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(y.onload=function(){y.status===200?p(b(this.responseText)):p(void 0)}),y.send(null),f&&y.status===200)return b(y.responseText)})(a,o,u)}catch{}return c})(e,t,s)},n.loadImageFile=n.loadFile})(Ut.API),(function(n){function e(){return(on.html2canvas?Promise.resolve(on.html2canvas):Ih(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(on.DOMPurify?Promise.resolve(on.DOMPurify):Ih(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var s=function(c){var h=rr(c);return h==="undefined"?"undefined":h==="string"||c instanceof String?"string":h==="number"||c instanceof Number?"number":h==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":h==="object"?"object":"unknown"},a=function(c,h){var f=document.createElement(c);for(var p in h.className&&(f.className=h.className),h.innerHTML&&h.dompurify&&(f.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)f.style[p]=h.style[p];return f},o=function c(h,f){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),y=h.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(c(y,f));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p},u=function c(h){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),f);return(p=p.setProgress(1,c,1,[c])).set(h)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,h){return c.__proto__=h||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,h){return this.then(function(){switch(h=h||(function(f){switch(s(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),h){case"string":return this.then(t).then(function(f){return this.set({src:a("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(h){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,h(this.prop.container,f)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(h){var f=this.opt.jsPDF,p=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=p,p)for(var b=0;b<p.length;++b){var A=p[b],N=A.src.find(function(k){return k.format==="truetype"});N&&f.addFont(N.url,A.ref.name,A.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,f.context2d.save(!0),h(this.prop.container,_)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,h,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,h):this.outputPdf(c,h)},u.prototype.outputPdf=function(c,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,h)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(s(c)!=="object")return this;var h=Object.keys(c||{}).map(function(f){if(f in u.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(h)})},u.prototype.get=function(c,h){return this.then(function(){var f=c in u.template.prop?this.prop[c]:this.opt[c];return h?h(f):f})},u.prototype.setMargin=function(c){return this.then(function(){switch(s(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function h(f,p){return Math.floor(f*p/72*96)}return this.then(function(){(c=c||Ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:h(c.inner.width,c.k),height:h(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,h,f,p){return c!=null&&(this.progress.val=c),h!=null&&(this.progress.state=h),f!=null&&(this.progress.n=f),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,h,f,p){return this.setProgress(c?this.progress.val+c:null,h||null,f?this.progress.n+f:null,p?this.progress.stack.concat(p):null)},u.prototype.then=function(c,h){var f=this;return this.thenCore(c,h,function(p,y){return f.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(_){return f.updateProgress(null,p),_}).then(p,y).then(function(_){return f.updateProgress(1),_})})},u.prototype.thenCore=function(c,h,f){f=f||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),h&&(h=h.bind(p));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:u.convert(Object.assign({},p),Promise.prototype),_=f.call(y,c,h);return u.convert(_,p.__proto__)},u.prototype.thenExternal=function(c,h){return Promise.prototype.then.call(this,c,h)},u.prototype.thenList=function(c){var h=this;return c.forEach(function(f){h=h.thenCore(f)}),h},u.prototype.catch=function(c){c&&(c=c.bind(this));var h=Promise.prototype.catch.call(this,c);return u.convert(h,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Ut.getPageSize=function(c,h,f){if(rr(c)==="object"){var p=c;c=p.orientation,h=p.unit||h,f=p.format||f}h=h||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var y,_=(""+f).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+h}var A,N=0,k=0;if(b.hasOwnProperty(_))N=b[_][1]/y,k=b[_][0]/y;else try{N=f[1],k=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",k>N&&(A=k,k=N,N=A);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",N>k&&(A=k,k=N,N=A)}return{width:k,height:N,unit:h,k:y,orientation:c}},n.html=function(c,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(Jm):null;var f=new u(h);return h.worker?f:f.from(c).doCallback()}})(Ut.API),Ut.API.addJS=function(n){return _x=n,this.internal.events.subscribe("postPutResources",function(){U1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(U1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_x+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){U1!==void 0&&wx!==void 0&&this.internal.out("/Names <</JavaScript "+U1+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=s.exec(u);if(c!=null){var h=c[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,p=[];for(o=0;o<f;o++){var y=t.internal.newObject();p.push(y);var _=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<p.length;o++)t.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var h=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var f=0;f<s.children.length;f++)this.renderItems(s.children[f])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(Ut.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,a,o,u,c){var h,f=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(y){for(var _,b=256*y.charCodeAt(4)+y.charCodeAt(5),A=y.length,N={width:0,height:0,numcomponents:1},k=4;k<A;k+=2){if(k+=b,e.indexOf(y.charCodeAt(k+1))!==-1){_=256*y.charCodeAt(k+5)+y.charCodeAt(k+6),N={width:256*y.charCodeAt(k+7)+y.charCodeAt(k+8),height:_,numcomponents:y.charCodeAt(k+9)};break}b=256*y.charCodeAt(k+2)+y.charCodeAt(k+3)}return N})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:t,width:h.width,height:h.height,colorSpace:c,bitsPerComponent:8,filter:f,index:s,alias:a}}return p}})(Ut.API),Ut.API.processPNG=function(n,e,t,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=bL(n,{checkCrc:!0}),u=o.width,c=o.height,h=o.channels,f=o.palette,p=o.depth;a=f&&h===1?(function(L){for(var B=L.width,te=L.height,j=L.data,I=L.palette,K=L.depth,P=!1,ie=[],X=[],re=void 0,le=!1,fe=0,Se=0;Se<I.length;Se++){var z=Cy(I[Se],4),M=z[0],$=z[1],G=z[2],J=z[3];ie.push(M,$,G),J!=null&&(J===0?(fe++,X.length<1&&X.push(Se)):J<255&&(le=!0))}if(le||fe>1){P=!0,X=void 0;var ae=B*te;re=new Uint8Array(ae);for(var pe=new DataView(j.buffer),de=0;de<ae;de++){var xe=tg(pe,de,K),Ne=Cy(I[xe],4)[3];re[de]=Ne}}else fe===0&&(X=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:P?8:void 0,colorBytes:j,alphaBytes:re,needSMask:P,palette:ie,mask:X}})(o):h===2||h===4?(function(L){for(var B=L.data,te=L.width,j=L.height,I=L.channels,K=L.depth,P=I===2?"DeviceGray":"DeviceRGB",ie=I-1,X=te*j,re=ie,le=X*re,fe=1*X,Se=Math.ceil(le*K/8),z=Math.ceil(fe*K/8),M=new Uint8Array(Se),$=new Uint8Array(z),G=new DataView(B.buffer),J=new DataView(M.buffer),ae=new DataView($.buffer),pe=!1,de=0;de<X;de++){for(var xe=de*I,Ne=0;Ne<re;Ne++)Mx(J,tg(G,xe+Ne,K),de*re+Ne,K);var Be=tg(G,xe+re,K);Be<(1<<K)-1&&(pe=!0),Mx(ae,Be,1*de,K)}return{colorSpace:P,colorsPerPixel:ie,sMaskBitsPerComponent:pe?K:void 0,colorBytes:M,alphaBytes:$,needSMask:pe}})(o):(function(L){var B=L.data,te=L.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:te,colorsPerPixel:te==="DeviceGray"?1:3,colorBytes:B instanceof Uint16Array?(function(j){for(var I=j.length,K=new Uint8Array(2*I),P=new DataView(K.buffer,K.byteOffset,K.byteLength),ie=0;ie<I;ie++)P.setUint16(2*ie,j[ie],!1);return K})(B):B,needSMask:!1}})(o);var y,_,b,A=a,N=A.colorSpace,k=A.colorsPerPixel,T=A.sMaskBitsPerComponent,R=A.colorBytes,D=A.alphaBytes,V=A.needSMask,F=A.palette,W=A.mask,H=null;return s!==Ut.API.image_compression.NONE&&typeof Mg=="function"?(H=(function(L){var B;switch(L){case Ut.API.image_compression.FAST:B=11;break;case Ut.API.image_compression.MEDIUM:B=13;break;case Ut.API.image_compression.SLOW:B=14;break;default:B=12}return B})(s),y=this.decode.FLATE_DECODE,_="/Predictor ".concat(H," /Colors ").concat(k," /BitsPerComponent ").concat(p," /Columns ").concat(u),n=Cx(R,Math.ceil(u*k*p/8),k,p,s),V&&(b=Cx(D,Math.ceil(u*T/8),1,T,s))):(y=void 0,_=void 0,n=R,V&&(b=D)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:n,index:e,filter:y,decodeParameters:_,transparency:W,palette:F,sMask:b,predictor:H,width:u,height:c,bitsPerComponent:p,sMaskBitsPerComponent:T,colorSpace:N}}},(function(n){n.processGIF89A=function(e,t,s,a){var o=new VL(e),u=o.width,c=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var f={data:h,width:u,height:c},p=new ng(100).encode(f,100);return n.processJPEG.call(this,p,t,s,a)},n.processGIF87A=n.processGIF89A})(Ut.API),io.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},io.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){gr.log("bit decode error:"+t)}},io.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var h=this.palette[o>>7-c&1];this.data[u+4*c]=h.blue,this.data[u+4*c+1]=h.green,this.data[u+4*c+2]=h.red,this.data[u+4*c+3]=255}t!==0&&(this.pos+=4-t)}},io.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,c=o>>4,h=15&o,f=this.palette[c];if(this.data[u]=f.blue,this.data[u+1]=f.green,this.data[u+2]=f.red,this.data[u+3]=255,2*a+1>=this.width)break;f=this.palette[h],this.data[u+4]=f.blue,this.data[u+4+1]=f.green,this.data[u+4+2]=f.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},io.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},io.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,f=o>>15?255:0,p=s*this.width*4+4*a;this.data[p]=h,this.data[p+1]=c,this.data[p+2]=u,this.data[p+3]=f}this.pos+=n}},io.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,h=(u>>5&t)/t*255|0,f=(u>>11)/e*255|0,p=a*this.width*4+4*o;this.data[p]=f,this.data[p+1]=h,this.data[p+2]=c,this.data[p+3]=255}this.pos+=n}},io.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},io.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=u}},io.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,s,a){var o=new io(e,!1),u=o.width,c=o.height,h={data:o.getData(),width:u,height:c},f=new ng(100).encode(h,100);return n.processJPEG.call(this,f,t,s,a)}})(Ut.API),Ox.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,s,a){var o=new Ox(e),u=o.width,c=o.height,h={data:o.getData(),width:u,height:c},f=new ng(100).encode(h,100);return n.processJPEG.call(this,f,t,s,a)}})(Ut.API),Ut.API.processRGBA=function(n,e,t){for(var s=n.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,h=0,f=0;f<a;f+=4){var p=s[f],y=s[f+1],_=s[f+2],b=s[f+3];o[c++]=p,o[c++]=y,o[c++]=_,u[h++]=b}var A=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:A,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ut.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_h=Ut.API,H1=_h.getCharWidthsArray=function(n,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,h=c.fof?c.fof:1,f=e.kerning?e.kerning:a.metadata.Unicode.kerning,p=f.fof?f.fof:1,y=e.doKerning!==!1,_=0,b=n.length,A=0,N=c[0]||h,k=[];for(t=0;t<b;t++)s=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?k.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(_=y&&rr(f[s])==="object"&&!isNaN(parseInt(f[s][A],10))?f[s][A]/p:0,k.push((c[s]||N)/h+_)),A=s;return k},Sx=_h.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return _h.processArabic&&(n=_h.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,a)/t:H1.apply(this,arguments).reduce(function(o,u){return o+u},0)},Nx=function(n,e,t,s){for(var a=[],o=0,u=n.length,c=0;o!==u&&c+e[o]<t;)c+=e[o],o++;a.push(n.slice(0,o));var h=o;for(c=0;o!==u;)c+e[o]>s&&(a.push(n.slice(h,o)),c=0,h=o),c+=e[o],o++;return h!==o&&a.push(n.slice(h,o)),a},Ax=function(n,e,t){t||(t={});var s,a,o,u,c,h,f,p=[],y=[p],_=t.textIndent||0,b=0,A=0,N=n.split(" "),k=H1.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?N[0].length+2:t.lineIndent||0){var T=Array(h).join(" "),R=[];N.map(function(V){(V=V.split(/\s*\n/)).length>1?R=R.concat(V.map(function(F,W){return(W&&F.length?`
`:"")+F})):R.push(V[0])}),N=R,h=Sx.apply(this,[T,t])}for(o=0,u=N.length;o<u;o++){var D=0;if(s=N[o],h&&s[0]==`
`&&(s=s.substr(1),D=1),_+b+(A=(a=H1.apply(this,[s,t])).reduce(function(V,F){return V+F},0))>e||D){if(A>e){for(c=Nx.apply(this,[s,a,e-(_+b),e]),p.push(c.shift()),p=[c.pop()];c.length;)y.push([c.shift()]);A=a.slice(s.length-(p[0]?p[0].length:0)).reduce(function(V,F){return V+F},0)}else p=[s];y.push(p),_=A+h,b=k}else p.push(s),_+=b+A,b=k}return f=h?function(V,F){return(F?T:"")+V.join(" ")}:function(V){return V.join(" ")},y.map(f)},_h.splitTextToSize=function(n,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var y=this.internal.getFont(p.fontName,p.fontStyle),_="Unicode";return y.metadata[_]?{widths:y.metadata[_].widths||{0:1},kerning:y.metadata[_].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var c,h,f=[];for(c=0,h=s.length;c<h;c++)f=f.concat(Ax.apply(this,[s[c],u,o]));return f},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(_){return"0x"+parseInt(_,10).toString(16)},c=n.__fontmetrics__.compress=function(_){var b,A,N,k,T=["{"];for(var R in _){if(b=_[R],isNaN(parseInt(R,10))?A="'"+R+"'":(R=parseInt(R,10),A=(A=u(R).slice(2)).slice(0,-1)+a[A.slice(-1)]),typeof b=="number")b<0?(N=u(b).slice(3),k="-"):(N=u(b).slice(2),k=""),N=k+N.slice(0,-1)+a[N.slice(-1)];else{if(rr(b)!=="object")throw new Error("Don't know what to do with value type "+rr(b)+".");N=c(b)}T.push(A+N)}return T.push("}"),T.join("")},h=n.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,A,N,k,T={},R=1,D=T,V=[],F="",W="",H=_.length-1,L=1;L<H;L+=1)(k=_[L])=="'"?b?(N=b.join(""),b=void 0):b=[]:b?b.push(k):k=="{"?(V.push([D,N]),D={},N=void 0):k=="}"?((A=V.pop())[0][A[1]]=D,N=void 0,D=A[0]):k=="-"?R=-1:N===void 0?s.hasOwnProperty(k)?(F+=s[k],N=parseInt(F,16)*R,R=1,F=""):F+=k:s.hasOwnProperty(k)?(W+=s[k],D[N]=parseInt(W,16)*R,R=1,N=void 0,W=""):W+=k;return T},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},y={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(_){var b=_.font,A=y.Unicode[b.postScriptName];A&&(b.metadata.Unicode={},b.metadata.Unicode.widths=A.widths,b.metadata.Unicode.kerning=A.kerning);var N=p.Unicode[b.postScriptName];N&&(b.metadata.Unicode.encoding=N,b.encoding=N.codePages[0])}])})(Ut.API),(function(n){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};n.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(K1(c)),u.metadata=n.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})(Ut),Ut.API.addSvgAsImage=function(n,e,t,s,a,o,u,c){if(isNaN(e)||isNaN(t))throw gr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw gr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=a;var f=h.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,h.width,h.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(on.canvg?Promise.resolve(on.canvg):Ih(()=>import("./index.es-Bxz5C6_M.js"),[])).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(f,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(p)}).then(function(){y.addImage(h.toDataURL("image/jpeg",1),e,t,s,a,u,c)})},Ut.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},Ut.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),h=[],f=0,p=0,y=0;function _(A,N){var k,T=!1;for(k=0;k<A.length;k+=1)A[k]===N&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var b=c.length;for(y=0;y<b;y+=1)t[c[y]].value=t[c[y]].defaultValue,t[c[y]].explicitSet=!1}if(rr(n)==="object"){for(a in n)if(o=n[a],_(c,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&_(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(f=0;f<o.length;f+=1)if(s=!0,o[f].length===1&&typeof o[f][0]=="number")h.push(String(o[f]-1));else if(o[f].length>1){for(p=0;p<o[f].length;p+=1)typeof o[f][p]!="number"&&(s=!1);s===!0&&h.push([o[f][0]-1,o[f][1]-1].join(" "))}t[a].value="["+h.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,N=[];for(A in t)t[A].explicitSet===!0&&(t[A].type==="name"?N.push("/"+A+" /"+t[A].value):N.push("/"+A+" "+t[A].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),f=o.length+u.length+c.length+a.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ut.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,u){for(var c,h=u.metadata.Unicode.widths,f=["","0","00","000","0000"],p=[""],y=0,_=o.length;y<_;++y){if(c=u.metadata.characterToGlyph(o.charCodeAt(y)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(y),h.indexOf(c)==-1&&(h.push(c),h.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(f[4-c.length],c)}return p.join("")},s=function(o){var u,c,h,f,p,y,_;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],y=0,_=(c=Object.keys(o).sort(function(b,A){return b-A})).length;y<_;y++)u=c[y],h.length>=100&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(f=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),h.push("<"+u+"><"+f+">"));return h.length&&(p+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var c=u.font,h=u.out,f=u.newObject,p=u.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="Identity-H"){for(var y=c.metadata.Unicode.widths,_=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),b="",A=0;A<_.length;A++)b+=String.fromCharCode(_[A]);var N=f();p({data:b,addLength1:!0,objectId:N}),h("endobj");var k=f();p({data:s(c.metadata.toUnicode),addLength1:!0,objectId:k}),h("endobj");var T=f();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Ah(c.fontName)),h("/FontFile2 "+N+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),h("/Flags "+c.metadata.flags),h("/StemV "+c.metadata.stemV),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h(">>"),h("endobj");var R=f();h("<<"),h("/Type /Font"),h("/BaseFont /"+Ah(c.fontName)),h("/FontDescriptor "+T+" 0 R"),h("/W "+n.API.PDFObject.convert(y)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+c.encoding+")"),h(">>"),h(">>"),h("endobj"),c.objectNumber=f(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+k+" 0 R"),h("/BaseFont /"+Ah(c.fontName)),h("/Encoding /"+c.encoding),h("/DescendantFonts ["+R+" 0 R]"),h(">>"),h("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var c=u.font,h=u.out,f=u.newObject,p=u.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var y=c.metadata.rawData,_="",b=0;b<y.length;b++)_+=String.fromCharCode(y[b]);var A=f();p({data:_,addLength1:!0,objectId:A}),h("endobj");var N=f();p({data:s(c.metadata.toUnicode),addLength1:!0,objectId:N}),h("endobj");var k=f();h("<<"),h("/Descent "+c.metadata.decender),h("/CapHeight "+c.metadata.capHeight),h("/StemV "+c.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+A+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),h("/FontName /"+Ah(c.fontName)),h("/ItalicAngle "+c.metadata.italicAngle),h("/Ascent "+c.metadata.ascender),h(">>"),h("endobj"),c.objectNumber=f();for(var T=0;T<c.metadata.hmtx.widths.length;T++)c.metadata.hmtx.widths[T]=parseInt(c.metadata.hmtx.widths[T]*(1e3/c.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+Ah(c.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),h("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",h=o.x,f=o.y,p=o.options||{},y=o.mutex||{},_=y.pdfEscape,b=y.activeFontKey,A=y.fonts,N=b,k="",T=0,R="",D=A[N].encoding;if(A[N].encoding!=="Identity-H")return{text:c,x:h,y:f,options:p,mutex:y};for(R=c,N=b,Array.isArray(c)&&(R=c[0]),T=0;T<R.length;T+=1)A[N].metadata.hasOwnProperty("cmap")&&(u=A[N].metadata.cmap.unicode.codeMap[R[T].charCodeAt(0)]),u||R[T].charCodeAt(0)<256&&A[N].metadata.hasOwnProperty("Unicode")?k+=R[T]:k+="";var V="";return parseInt(N.slice(1))<14||D==="WinAnsiEncoding"?V=_(k,N).split("").map(function(F){return F.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(V=t(k,A[N])),y.isHex=!0,{text:V,x:h,y:f,options:p,mutex:y}};e.events.push(["postProcessText",function(o){var u=o.text||"",c=[],h={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var f=0;for(f=0;f<u.length;f+=1)Array.isArray(u[f])&&u[f].length===3?c.push([a(Object.assign({},h,{text:u[f][0]})).text,u[f][1],u[f][2]]):c.push(a(Object.assign({},h,{text:u[f]})).text);o.text=c}else o.text=a(Object.assign({},h,{text:u})).text}])})(Ut),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ut.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var a,o,u,c,h,f,p,y=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,D=0;this.__bidiEngine__={};var V=function(j){var I=j.charCodeAt(),K=I>>8,P=N[K];return P!==void 0?y[256*P+(255&I)]:K===252||K===253?"AL":T.test(K)?"L":K===8?"R":"N"},F=function(j){for(var I,K=0;K<j.length;K++){if((I=V(j.charAt(K)))==="L")return!1;if(I==="R")return!0}return!1},W=function(j,I,K,P){var ie,X,re,le,fe=I[P];switch(fe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"N":case"AN":break;case"EN":R&&(fe="AN");break;case"AL":R=!0,fe="R";break;case"WS":case"BN":fe="N";break;case"CS":P<1||P+1>=I.length||(ie=K[P-1])!=="EN"&&ie!=="AN"||(X=I[P+1])!=="EN"&&X!=="AN"?fe="N":R&&(X="AN"),fe=X===ie?X:"N";break;case"ES":fe=(ie=P>0?K[P-1]:"B")==="EN"&&P+1<I.length&&I[P+1]==="EN"?"EN":"N";break;case"ET":if(P>0&&K[P-1]==="EN"){fe="EN";break}if(R){fe="N";break}for(re=P+1,le=I.length;re<le&&I[re]==="ET";)re++;fe=re<le&&I[re]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(le=I.length,re=P+1;re<le&&I[re]==="NSM";)re++;if(re<le){var Se=j[P],z=Se>=1425&&Se<=2303||Se===64286;if(ie=I[re],z&&(ie==="R"||ie==="AL")){fe="R";break}}}fe=P<1||(ie=I[P-1])==="B"?"N":K[P-1];break;case"B":R=!1,a=!0,fe=D;break;case"S":o=!0,fe="N"}return fe},H=function(j,I,K){var P=j.split("");return K&&L(P,K,{hiLevel:D}),P.reverse(),I&&I.reverse(),P.join("")},L=function(j,I,K){var P,ie,X,re,le,fe=-1,Se=j.length,z=0,M=[],$=D?b:_,G=[];for(R=!1,a=!1,o=!1,ie=0;ie<Se;ie++)G[ie]=V(j[ie]);for(X=0;X<Se;X++){if(le=z,M[X]=W(j,G,M,X),P=240&(z=$[le][A[M[X]]]),z&=15,I[X]=re=$[z][5],P>0)if(P===16){for(ie=fe;ie<X;ie++)I[ie]=1;fe=-1}else fe=-1;if($[z][6])fe===-1&&(fe=X);else if(fe>-1){for(ie=fe;ie<X;ie++)I[ie]=re;fe=-1}G[X]==="B"&&(I[X]=0),K.hiLevel|=re}o&&(function(J,ae,pe){for(var de=0;de<pe;de++)if(J[de]==="S"){ae[de]=D;for(var xe=de-1;xe>=0&&J[xe]==="WS";xe--)ae[xe]=D}})(G,I,Se)},B=function(j,I,K,P,ie){if(!(ie.hiLevel<j)){if(j===1&&D===1&&!a)return I.reverse(),void(K&&K.reverse());for(var X,re,le,fe,Se=I.length,z=0;z<Se;){if(P[z]>=j){for(le=z+1;le<Se&&P[le]>=j;)le++;for(fe=z,re=le-1;fe<re;fe++,re--)X=I[fe],I[fe]=I[re],I[re]=X,K&&(X=K[fe],K[fe]=K[re],K[re]=X);z=le}z++}}},te=function(j,I,K){var P=j.split(""),ie={hiLevel:D};return K||(K=[]),L(P,K,ie),(function(X,re,le){if(le.hiLevel!==0&&p)for(var fe,Se=0;Se<X.length;Se++)re[Se]===1&&(fe=k.indexOf(X[Se]))>=0&&(X[Se]=k[fe+1])})(P,K,ie),B(2,P,I,K,ie),B(1,P,I,K,ie),P.join("")};return this.__bidiEngine__.doBidiReorder=function(j,I,K){if((function(ie,X){if(X)for(var re=0;re<ie.length;re++)X[re]=re;c===void 0&&(c=F(ie)),f===void 0&&(f=F(ie))})(j,I),u||!h||f)if(u&&h&&c^f)D=c?1:0,j=H(j,I,K);else if(!u&&h&&f)D=c?1:0,j=te(j,I,K),j=H(j,I);else if(!u||c||h||f){if(u&&!h&&c^f)j=H(j,I),c?(D=0,j=te(j,I,K)):(D=1,j=te(j,I,K),j=H(j,I));else if(u&&c&&!h&&f)D=1,j=te(j,I,K),j=H(j,I);else if(!u&&!h&&c^f){var P=p;c?(D=1,j=te(j,I,K),D=0,p=!1,j=te(j,I,K),p=P):(D=0,j=te(j,I,K),j=H(j,I),D=1,p=!1,j=te(j,I,K),p=P,j=H(j,I))}}else D=0,j=te(j,I,K);else D=c?1:0,j=te(j,I,K);return j},this.__bidiEngine__.setOptions=function(j){j&&(u=j.isInputVisual,h=j.isOutputVisual,c=j.isInputRtl,f=j.isOutputRtl,p=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([t.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([t.doBidiReorder(a[c])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(Ut),Ut.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Dc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new JL(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new BL(this.contents),this.head=new zL(this),this.name=new GL(this),this.cmap=new P4(this),this.toUnicode={},this.hhea=new qL(this),this.maxp=new $L(this),this.hmtx=new YL(this),this.post=new HL(this),this.os2=new UL(this),this.loca=new QL(this),this.glyf=new XL(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,h,f;for(f=[],u=0,c=(h=this.bbox).length;u<c;u++)e=h[u],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var a,o,u,c;for(u=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n})();var wo,Dc=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,a,o,u,c,h;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*c+h},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},n})(),BL=(function(){var n;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,c,h,f,p,y,_,b,A,N;for(N in b=Object.keys(t).length,h=Math.log(2),y=16*Math.floor(Math.log(b)/h),u=Math.floor(y/h),p=16*b-y,(a=new Dc).writeInt(this.scalarType),a.writeShort(b),a.writeShort(y),a.writeShort(u),a.writeShort(p),o=16*b,f=a.pos+o,c=null,A=[],t)for(_=t[N],a.writeString(N),a.writeInt(n(_)),a.writeInt(f),a.writeInt(_.length),A=A.concat(_),N==="head"&&(c=f),f+=_.length;f%4;)A.push(0),f++;return a.write(A),s=2981146554-n(a.data),a.pos=c+8,a.writeUInt32(s),a.data},n=function(t){var s,a,o,u;for(t=z4.call(t);t.length%4;)t.push(0);for(o=new Dc(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),PL={}.hasOwnProperty,Ko=function(n,e){for(var t in e)PL.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};wo=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var zL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new Dc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),Dx=(function(){function n(e,t){var s,a,o,u,c,h,f,p,y,_,b,A,N,k,T,R,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(b=e.readUInt16(),_=b/2,e.pos+=6,o=(function(){var V,F;for(F=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)F.push(e.readUInt16());return F})(),e.pos+=2,N=(function(){var V,F;for(F=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)F.push(e.readUInt16());return F})(),f=(function(){var V,F;for(F=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)F.push(e.readUInt16());return F})(),p=(function(){var V,F;for(F=[],h=V=0;0<=_?V<_:V>_;h=0<=_?++V:--V)F.push(e.readUInt16());return F})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var V,F;for(F=[],h=V=0;0<=a?V<a:V>a;h=0<=a?++V:--V)F.push(e.readUInt16());return F})(),h=T=0,D=o.length;T<D;h=++T)for(k=o[h],s=R=A=N[h];A<=k?R<=k:R>=k;s=A<=k?++R:--R)p[h]===0?u=s+f[h]:(u=c[p[h]/2+(s-A)-(_-h)]||0)!==0&&(u+=f[h]),this.codeMap[s]=65535&u}e.pos=y}return n.encode=function(e,t){var s,a,o,u,c,h,f,p,y,_,b,A,N,k,T,R,D,V,F,W,H,L,B,te,j,I,K,P,ie,X,re,le,fe,Se,z,M,$,G,J,ae,pe,de,xe,Ne,Be,Qe;switch(P=new Dc,u=Object.keys(e).sort(function(Xe,st){return Xe-st}),t){case"macroman":for(N=0,k=(function(){var Xe=[];for(A=0;A<256;++A)Xe.push(0);return Xe})(),R={0:0},o={},ie=0,fe=u.length;ie<fe;ie++)R[xe=e[a=u[ie]]]==null&&(R[xe]=++N),o[a]={old:e[a],new:R[e[a]]},k[a]=R[e[a]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(k),{charMap:o,subtable:P.data,maxGlyphID:N+1};case"unicode":for(I=[],y=[],D=0,R={},s={},T=f=null,X=0,Se=u.length;X<Se;X++)R[F=e[a=u[X]]]==null&&(R[F]=++D),s[a]={old:F,new:R[F]},c=R[F]-a,T!=null&&c===f||(T&&y.push(T),I.push(a),f=c),T=a;for(T&&y.push(T),y.push(65535),I.push(65535),te=2*(B=I.length),L=2*Math.pow(Math.log(B)/Math.LN2,2),_=Math.log(L/2)/Math.LN2,H=2*B-L,h=[],W=[],b=[],A=re=0,z=I.length;re<z;A=++re){if(j=I[A],p=y[A],j===65535){h.push(0),W.push(0);break}if(j-(K=s[j].new)>=32768)for(h.push(0),W.push(2*(b.length+B-A)),a=le=j;j<=p?le<=p:le>=p;a=j<=p?++le:--le)b.push(s[a].new);else h.push(K-j),W.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*B+2*b.length),P.writeUInt16(0),P.writeUInt16(te),P.writeUInt16(L),P.writeUInt16(_),P.writeUInt16(H),pe=0,M=y.length;pe<M;pe++)a=y[pe],P.writeUInt16(a);for(P.writeUInt16(0),de=0,$=I.length;de<$;de++)a=I[de],P.writeUInt16(a);for(Ne=0,G=h.length;Ne<G;Ne++)c=h[Ne],P.writeUInt16(c);for(Be=0,J=W.length;Be<J;Be++)V=W[Be],P.writeUInt16(V);for(Qe=0,ae=b.length;Qe<ae;Qe++)N=b[Qe],P.writeUInt16(N);return{charMap:s,subtable:P.data,maxGlyphID:D+1}}},n})(),P4=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new Dx(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=Dx.encode(e,t),(a=new Dc).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},n})(),qL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),UL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),HL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="post",n.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,c,h;for(h=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)h.push(e.readUInt32());return h}).call(this)}},n})(),WL=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},GL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="name",n.prototype.parse=function(e){var t,s,a,o,u,c,h,f,p,y,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),c=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(h={},o=p=0,y=s.length;p<y;o=++p)a=s[o],e.pos=a.offset,f=e.readString(a.length),u=new WL(f,a),h[_=a.nameID]==null&&(h[_]=[]),h[a.nameID].push(u);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),$L=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),YL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,s,a,o,u,c,h;for(e.pos=this.offset,this.metrics=[],t=0,c=this.file.hhea.numberOfMetrics;0<=c?t<c:t>c;t=0<=c?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,p;for(p=[],t=f=0;0<=a?f<a:f>a;t=0<=a?++f:--f)p.push(e.readInt16());return p})(),this.widths=(function(){var f,p,y,_;for(_=[],f=0,p=(y=this.metrics).length;f<p;f++)o=y[f],_.push(o.advance);return _}).call(this),s=this.widths[this.widths.length-1],h=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)h.push(this.widths.push(s));return h},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),z4=[].slice,XL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,s,a,o,u,c,h,f,p,y;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(c=new Dc(t.read(a))).readShort(),f=c.readShort(),y=c.readShort(),h=c.readShort(),p=c.readShort(),this.cache[e]=u===-1?new KL(c,f,y,h,p):new ZL(c,u,f,y,h,p),this.cache[e]))},n.prototype.encode=function(e,t,s){var a,o,u,c,h;for(u=[],o=[],c=0,h=t.length;c<h;c++)a=e[t[c]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},n})(),ZL=(function(){function n(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),KL=(function(){function n(e,t,s,a,o){var u,c;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new Dc(z4.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),QL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Ko(n,wo),n.prototype.tag="loca",n.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var c=this.offsets[u],h=this.offsets[u+1]-c;h>0&&(a+=h)}for(var f=new Array(4*s.length),p=0;p<s.length;++p)f[4*p+3]=255&s[p],f[4*p+2]=(65280&s[p])>>8,f[4*p+1]=(16711680&s[p])>>16,f[4*p]=(4278190080&s[p])>>24;return f},n})(),JL=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},n.prototype.glyphsFor=function(e){var t,s,a,o,u,c,h;for(a={},u=0,c=e.length;u<c;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))s=h[o],a[o]=s;return a},n.prototype.encode=function(e,t){var s,a,o,u,c,h,f,p,y,_,b,A,N,k,T;for(a in s=P4.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),b={0:0},T=s.charMap)b[(h=T[a]).old]=h.new;for(A in _=s.maxGlyphID,u)A in b||(b[A]=_++);return p=(function(R){var D,V;for(D in V={},R)V[R[D]]=D;return V})(b),y=Object.keys(p).sort(function(R,D){return R-D}),N=(function(){var R,D,V;for(V=[],R=0,D=y.length;R<D;R++)c=y[R],V.push(p[c]);return V})(),o=this.font.glyf.encode(u,N,b),f=this.font.loca.encode(o.offsets,N),k={cmap:this.font.cmap.raw(),glyf:o.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},n})();Ut.API.PDFObject=(function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var c,h,f;for(f=[],c=0,h=t.length;c<h;c++)s=t[c],f.push(e.convert(s));return f})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();var np={exports:{}},eO=np.exports,Rx;function tO(){return Rx||(Rx=1,(function(n,e){(function(t,s){s()})(eO,function(){function t(f,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function s(f,p,y){var _=new XMLHttpRequest;_.open("GET",f),_.responseType="blob",_.onload=function(){h(_.response,p,y)},_.onerror=function(){console.error("could not download file")},_.send()}function a(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function o(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof k1=="object"&&k1.global===k1?k1:void 0,c=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(f,p,y){var _=u.URL||u.webkitURL,b=document.createElement("a");p=p||f.name||"download",b.download=p,b.rel="noopener",typeof f=="string"?(b.href=f,b.origin===location.origin?o(b):a(b.href)?s(f,p,y):o(b,b.target="_blank")):(b.href=_.createObjectURL(f),setTimeout(function(){_.revokeObjectURL(b.href)},4e4),setTimeout(function(){o(b)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,y){if(p=p||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(t(f,y),p);else if(a(f))s(f,p,y);else{var _=document.createElement("a");_.href=f,_.target="_blank",setTimeout(function(){o(_)})}}:function(f,p,y,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof f=="string")return s(f,p,y);var b=f.type==="application/octet-stream",A=/constructor/i.test(u.HTMLElement)||u.safari,N=/CriOS\/[\d]+/.test(navigator.userAgent);if((N||b&&A||c)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var D=k.result;D=N?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=D:location=D,_=null},k.readAsDataURL(f)}else{var T=u.URL||u.webkitURL,R=T.createObjectURL(f);_?_.location=R:location.href=R,_=null,setTimeout(function(){T.revokeObjectURL(R)},4e4)}});u.saveAs=h.saveAs=h,n.exports=h})})(np)),np.exports}var nO=tO();const Z2="chordWheelSongs",Bg="chordWheelCurrentSongId",rf=()=>{try{const n=localStorage.getItem(Z2);return n?JSON.parse(n).map(t=>({...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)})):[]}catch(n){return console.error("Error loading saved songs:",n),[]}},Ix=n=>{try{const e=rf(),t=e.findIndex(a=>a.id===n.id),s={...n,updatedAt:new Date().toISOString(),createdAt:n.createdAt instanceof Date?n.createdAt.toISOString():n.createdAt};t>=0?e[t]=s:e.push({...s,createdAt:new Date().toISOString()}),localStorage.setItem(Z2,JSON.stringify(e)),localStorage.setItem(Bg,n.id)}catch(e){console.error("Error saving song:",e)}},rO=n=>{try{const t=rf().filter(s=>s.id!==n);localStorage.setItem(Z2,JSON.stringify(t)),localStorage.getItem(Bg)===n&&localStorage.removeItem(Bg)}catch(e){console.error("Error deleting song:",e)}},sO=({isOpen:n,onClose:e,onConfirm:t,title:s,message:a,confirmLabel:o="Confirm",cancelLabel:u="Cancel",isDestructive:c=!1})=>(ee.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),ee.useEffect(()=>{const h=f=>{f.key==="Escape"&&n&&e()};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[n,e]),n?g.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[g.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:e}),g.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-sm w-full overflow-hidden flex flex-col scale-100 opacity-100 transition-all",children:[g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:s}),g.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:a})]}),g.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-[#22222e] border-t border-border-subtle",children:[g.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:u}),g.jsx("button",{onClick:()=>{t(),e()},className:`px-4 py-2 text-sm font-bold text-white rounded-lg shadow-lg transition-transform active:scale-95 ${c?"bg-red-500 hover:bg-red-600":"bg-accent-primary hover:bg-accent-secondary"}`,children:o})]})]})]}):null),q4={I:{degree:0,quality:"major"},ii:{degree:1,quality:"minor"},iii:{degree:2,quality:"minor"},IV:{degree:3,quality:"major"},V:{degree:4,quality:"major"},vi:{degree:5,quality:"minor"},"vii":{degree:6,quality:"diminished"},iv:{degree:3,quality:"minor"},"VI":{degree:8,quality:"major"},bVI:{degree:8,quality:"major"},"VII":{degree:10,quality:"major"},bVII:{degree:10,quality:"major"}},iO=[0,2,4,5,7,9,11];function aO(n,e){const t=xu(e),s=oo.indexOf(t);if(s===-1)return e;const a=q4[n];if(!a)return console.warn(`Unknown roman numeral: ${n}`),e;let o;a.degree<7?o=iO[a.degree]:o=a.degree;const u=(s+o)%12;return oo[u]}function Pg(n,e){const t=q4[n]||{quality:"major"},s=aO(n,e),a=la(s,t.quality);return{root:s,quality:t.quality,numeral:n,notes:a,symbol:`${s}${t.quality==="major"?"":t.quality==="minor"?"m":""}`}}function K2(n,e){return n.map(t=>Pg(t,e))}let rp=!1,Rp=[];function Q2(){rp=!1,Rp.forEach(n=>clearTimeout(n)),Rp=[]}async function U4(n,e,t=120,s=2,a){Q2(),rp=!0,xs.state!=="running"&&await Tu(),xs.state==="suspended"&&await xs.resume(),await Vl();const o=K2(n,e),c=60/t*1e3*s,f=`${4/s}n`;return new Promise(p=>{o.forEach((y,_)=>{const b=window.setTimeout(()=>{if(rp&&(a?.(_,y),Br(y.notes,f),_===o.length-1)){const A=window.setTimeout(()=>{rp=!1,p()},c);Rp.push(A)}},_*c);Rp.push(b)})})}const oO=[{id:"pop-anthem",name:"Pop/Rock Anthem",description:"The most popular progression in modern music. Uplifting and anthemic.",numerals:["I","V","vi","IV"],genre:"Pop/Rock",artists:"U2, The Beatles, Blink-182",color:"accent-primary",sectionType:"chorus",sectionName:"Anthem",beatsPerChord:4},{id:"emotional-ballad",name:"Emotional Ballad",description:"Starts on the minor chord for a melancholic, emotional feel.",numerals:["vi","IV","I","V"],genre:"Ballad",artists:"Adele, John Legend",color:"purple-400",sectionType:"verse",sectionName:"Ballad",beatsPerChord:4},{id:"jazz-ii-v-i",name:"Jazz / R&B",description:"The foundation of jazz harmony. Smooth and sophisticated.",numerals:["ii","V","I"],genre:"Jazz/R&B",artists:"Maroon 5, Jazz Standards",color:"blue-400",sectionType:"verse",sectionName:"ii-V-I",beatsPerChord:4,totalBars:4},{id:"50s-progression",name:"50s Doo-Wop",description:"Classic rock and roll. Nostalgic and feel-good.",numerals:["I","vi","IV","V"],genre:"Oldies",artists:"Stand By Me, Earth Angel",color:"yellow-400",sectionType:"verse",sectionName:"Doo-Wop",beatsPerChord:4},{id:"andalusian",name:"Andalusian Cadence",description:"Dramatic descending progression. Spanish/Flamenco influenced.",numerals:["vi","V","IV","III"],genre:"Dramatic",artists:"Hit the Road Jack, Sultans of Swing",color:"red-400",sectionType:"verse",sectionName:"Andal.",beatsPerChord:4},{id:"pachelbel",name:"Pachelbel Canon",description:"The classical progression that influenced centuries of music.",numerals:["I","V","vi","iii","IV","I","IV","V"],genre:"Classical/Pop",artists:"Canon in D, Basket Case",color:"green-400",sectionType:"verse",sectionName:"Canon",beatsPerChord:2}],lO=[{id:"perfect",name:"Perfect Cadence",description:'The "Full Stop". Strongest resolution.',numerals:["V","I"],color:"green-500",emotion:"Conclusive"},{id:"plagal",name:"Plagal Cadence",description:'The "Amen". Softer, church-like resolution.',numerals:["IV","I"],color:"blue-500",emotion:"Peaceful"},{id:"half",name:"Half Cadence",description:'The "Comma". Leaves listeners wanting more.',numerals:["I","V"],color:"yellow-500",emotion:"Suspenseful"},{id:"deceptive",name:"Deceptive Cadence",description:'The "Surprise". Expecting I, getting vi.',numerals:["V","vi"],color:"purple-500",emotion:"Unexpected"}],cO=({preset:n,showAddButton:e=!0,compact:t=!1,onAddToTimeline:s})=>{const{selectedKey:a,currentSong:o,openTimeline:u}=ln(),c=ln(R=>R.addCustomSection),[h,f]=ee.useState(!1),[p,y]=ee.useState(null),[_,b]=ee.useState(!1),A=K2(n.numerals,a),N=async()=>{if(h){Q2(),f(!1),y(null);return}f(!0),y(0);try{await U4(n.numerals,a,o.tempo,n.beatsPerChord,R=>{y(R)})}finally{f(!1),y(null)}},k=async(R,D)=>{if(h)return;y(D);const V=n.beatsPerChord>=4?"1n":"2n";await Br(R.notes,V),setTimeout(()=>y(null),400)},T=()=>{c&&(c(n.sectionName,n.sectionType,A,{beatsPerChord:n.beatsPerChord,totalBars:n.totalBars}),u(),b(!0),setTimeout(()=>b(!1),1500),s?.())};return g.jsxs("div",{className:`
                p-2.5 rounded bg-bg-tertiary transition-all duration-300 overflow-hidden
                ${t?"text-xs":"text-sm"}
                ${_?"ring-2 ring-green-500 bg-green-500/10":""}
            `,children:[g.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[g.jsxs("div",{className:"min-w-0",children:[g.jsx("span",{className:"font-bold text-white",children:n.name}),n.artists&&g.jsx("span",{className:"block text-xs text-gray-500 truncate",children:n.artists})]}),e&&g.jsxs("button",{onClick:T,className:`
                            flex items-center gap-1 px-2 py-1 rounded text-xs font-medium shrink-0
                            transition-all duration-200
                            ${_?"bg-green-500 text-white":"bg-bg-elevated hover:bg-accent-primary/20 text-gray-400 hover:text-accent-primary"}
                        `,title:"Add to timeline",children:[g.jsx(Mc,{size:12}),g.jsx("span",{className:"hidden sm:inline",children:_?"Added!":"Add"})]})]}),g.jsxs("div",{className:"grid gap-1.5",style:{gridTemplateColumns:"auto repeat(4, minmax(0, max-content))",justifyContent:"start"},children:[g.jsx("button",{onClick:N,className:`
                        flex items-center justify-center w-7 h-7 rounded-full shrink-0
                        transition-all duration-200
                        ${h?"bg-red-500 hover:bg-red-600 text-white":"bg-accent-primary/20 hover:bg-accent-primary/40 text-accent-primary"}
                    `,title:h?"Stop":"Play progression",children:h?g.jsx(uw,{size:12}):g.jsx(nd,{size:12,className:"ml-0.5"})}),n.numerals.map((R,D)=>{const V=A[D],F=p===D,W=D<4?void 0:D%4+2;return g.jsx("button",{onClick:()=>k(V,D),disabled:h,className:`
                                text-xs px-2 py-1 rounded font-medium
                                transition-all duration-150
                                ${F?`bg-${n.color} text-white scale-110 shadow-lg shadow-${n.color}/30`:`bg-black/40 text-${n.color} hover:bg-black/60 hover:scale-105`}
                                ${h&&!F?"opacity-50":""}
                                disabled:cursor-not-allowed
                            `,style:{...F?{backgroundColor:`var(--color-${n.color})`}:{},...W?{gridColumn:W}:{}},title:`Play ${V.symbol}`,children:R},`${R}-${D}`)})]})]})},uO=({preset:n})=>{const{selectedKey:e,currentSong:t}=ln(),[s,a]=ee.useState(!1),[o,u]=ee.useState(null),c=K2(n.numerals,e),h=async()=>{if(s){Q2(),a(!1),u(null);return}a(!0),u(0);try{await U4(n.numerals,e,t.tempo,2,y=>{u(y)})}finally{a(!1),u(null)}},f=async(y,_)=>{s||(u(_),await Br(y.notes,"2n"),setTimeout(()=>u(null),400))},p=`text-${n.color.replace("-500","-400")}`;return g.jsxs("div",{className:`
                group p-3 rounded bg-bg-tertiary hover:bg-bg-tertiary/80 
                transition-all duration-200 border-l-2
            `,style:{borderColor:`var(--color-${n.color}, currentColor)`},children:[g.jsxs("div",{className:"flex justify-between items-center mb-1 gap-2",children:[g.jsx("span",{className:"font-bold text-white",children:n.name}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("button",{onClick:h,className:`
                            w-6 h-6 rounded-full flex items-center justify-center
                            transition-all duration-200
                            ${s?"bg-red-500 text-white":"bg-white/10 hover:bg-white/20 text-white/70 hover:text-white"}
                        `,title:s?"Stop":"Play cadence",children:s?g.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"}):g.jsx(nd,{size:10,className:"ml-0.5"})}),g.jsx("div",{className:"flex gap-0.5",children:n.numerals.map((y,_)=>{const b=c[_],A=o===_;return g.jsxs(Cn.Fragment,{children:[g.jsx("button",{onClick:()=>f(b,_),disabled:s,className:`
                                            text-xs px-1.5 py-0.5 rounded
                                            transition-all duration-150
                                            ${A?"bg-white text-black scale-110":`bg-black/30 ${p} hover:bg-black/50 hover:scale-105`}
                                        `,style:A?{backgroundColor:`var(--color-${n.color})`,color:"white"}:void 0,title:`Play ${b.symbol}`,children:y}),_<n.numerals.length-1&&g.jsx("span",{className:"text-gray-500 text-xs flex items-center",children:""})]},`${y}-${_}`)})})]})]}),g.jsx("p",{className:"text-gray-400 text-xs",children:n.description})]})},Fx=({size:n=32})=>g.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",style:{width:n,height:n},children:[[...Array(12)].map((e,t)=>{const s=t*30,a=(s-15-90)*Math.PI/180,o=(s+15-90)*Math.PI/180,u=18,c=46,h=t<=4||t>=10;let f;h?t===0?f="rgba(234, 179, 8, 0.9)":t===1?f="rgba(163, 190, 60, 0.85)":t===2?f="rgba(132, 204, 22, 0.8)":t===3?f="rgba(74, 222, 128, 0.7)":t===4?f="rgba(45, 212, 191, 0.6)":t===11?f="rgba(251, 146, 60, 0.85)":t===10?f="rgba(168, 162, 158, 0.6)":f="rgba(200, 180, 100, 0.7)":f=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][t%3];const p=50+u*Math.cos(a),y=50+u*Math.sin(a),_=50+c*Math.cos(a),b=50+c*Math.sin(a),A=50+c*Math.cos(o),N=50+c*Math.sin(o),k=50+u*Math.cos(o),T=50+u*Math.sin(o);return g.jsx("path",{d:`M ${p} ${y} L ${_} ${b} A ${c} ${c} 0 0 1 ${A} ${N} L ${k} ${T} A ${u} ${u} 0 0 0 ${p} ${y}`,fill:f,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},t)}),g.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]}),hO=({selectedKey:n})=>{const[e,t]=ee.useState(null),s=async u=>{try{await Vl();const c=Pg(u,n);t(u),await Br(c.notes,"2n"),setTimeout(()=>t(null),400)}catch(c){console.error("Error playing chord:",c),t(null)}},a=["I","ii","iii","IV","V","vi","vii"],o=["Tonic (Home)","Mediant","Mediant","Subdom. (Away)","Dominant (Tension)","Rel. Minor","Leading Tone"];return g.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:a.map((u,c)=>{const h=e===u,f=["I","IV","V"].includes(u),p=u==="vii",_=Pg(u,n).symbol;return g.jsxs("button",{onClick:()=>s(u),className:`rounded p-2 flex flex-col items-center justify-between h-20 cursor-pointer 
                            transition-all duration-150 active:scale-95
                            ${f?"bg-accent-primary/20 border border-accent-primary/30 hover:bg-accent-primary/30":p?"bg-red-500/10 border border-red-500/20 hover:bg-red-500/20":"bg-violet-500/15 border border-violet-500/25 hover:bg-violet-500/25"}
                            ${h?"ring-2 ring-white/50 scale-[1.02]":""}`,children:[g.jsx("span",{className:`font-bold mb-1 transition-colors ${h?"text-accent-primary":"text-white"}`,children:u}),g.jsx("span",{className:`text-[9px] font-medium transition-colors ${h?"text-accent-primary":"text-gray-300"}`,children:_}),g.jsx("span",{className:"text-[10px] text-gray-400 leading-tight",children:o[c]})]},u)})})},Vx=({onClose:n})=>{const{selectedKey:e}=ln();return g.jsxs(g.Fragment,{children:[g.jsxs("section",{className:"relative",children:[g.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-accent-primary/20 rounded-full blur-3xl pointer-events-none"}),g.jsx("div",{className:"absolute -bottom-5 -right-5 w-24 h-24 bg-purple-500/15 rounded-full blur-3xl pointer-events-none"}),g.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2 relative",children:[g.jsx(WT,{size:12,className:"fill-accent-primary"}),"Quick Start"]}),g.jsxs("div",{className:"relative bg-gradient-to-b from-bg-elevated/60 to-bg-elevated/40 rounded-xl p-5 border border-white/5 space-y-4",children:[g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:g.jsx(sw,{size:18,className:"text-accent-primary"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",g.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:g.jsx($h,{size:18,className:"text-purple-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[g.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate, or ",g.jsx("strong",{className:"text-gray-300",children:"tap the key"})," in the header to change keys. Highlighted chords always sound good together."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:g.jsx(iw,{size:18,className:"text-emerald-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",g.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",g.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:g.jsx(xp,{size:18,className:"text-amber-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",g.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:g.jsx(n0,{size:18,className:"text-sky-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[g.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),g.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"shrink-0 w-14 h-14 relative",children:g.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((t,s)=>{const a=s*30,o=(a-15-90)*Math.PI/180,u=(a+15-90)*Math.PI/180,c=18,h=46,f=s<=4||s>=10;let p;f?s===0?p="rgba(234, 179, 8, 0.9)":s===1?p="rgba(163, 190, 60, 0.85)":s===2?p="rgba(132, 204, 22, 0.8)":s===3?p="rgba(74, 222, 128, 0.7)":s===4?p="rgba(45, 212, 191, 0.6)":s===11?p="rgba(251, 146, 60, 0.85)":s===10?p="rgba(168, 162, 158, 0.6)":p="rgba(200, 180, 100, 0.7)":p=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][s%3];const y=50+c*Math.cos(o),_=50+c*Math.sin(o),b=50+h*Math.cos(o),A=50+h*Math.sin(o),N=50+h*Math.cos(u),k=50+h*Math.sin(u),T=50+c*Math.cos(u),R=50+c*Math.sin(u);return g.jsx("path",{d:`M ${y} ${_} L ${b} ${A} A ${h} ${h} 0 0 1 ${N} ${k} L ${T} ${R} A ${c} ${c} 0 0 0 ${y} ${_}`,fill:p,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},s)}),g.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("strong",{className:"text-xs text-white block mb-1",children:"Understanding the Wheel"}),g.jsxs("div",{className:"text-[11px] text-gray-400 leading-snug space-y-0.5",children:[g.jsxs("div",{children:[g.jsx("strong",{className:"text-gray-300",children:"Highlighted"})," = in key"]}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-gray-300",children:"Inner"})," = Major (I, IV, V)"]}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-gray-300",children:"Middle"})," = Minor (ii, iii, vi)"]}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-gray-300",children:"Outer"})," = Dim (vii)"]})]})]})]})}),g.jsx("div",{className:"space-y-2",children:g.jsx("div",{className:"p-3 rounded-xl bg-accent-primary/5 border border-accent-primary/20",children:g.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[g.jsx(Oh,{size:14,className:"text-accent-primary shrink-0"}),g.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[g.jsx("strong",{className:"text-accent-primary",children:"Tip:"})," Tap the",g.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 rounded-full text-text-muted border border-border-subtle/60",children:g.jsx(Oh,{size:10})}),"button anytime to reopen this guide."]})]})})})]})]}),g.jsxs("section",{children:[g.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[g.jsx(ak,{size:12}),"The Language of Music (Roman Numerals)"]}),g.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-4",children:[g.jsx("p",{className:"text-sm text-gray-300",children:'Musicians use roman numerals to talk about chords regardless of the specific key. This reveals the "DNA" of a song.'}),g.jsx(hO,{selectedKey:e}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-gray-400",children:[g.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[g.jsx("strong",{className:"text-accent-primary block mb-1",children:"Tonic (I, vi, iii)"}),"Stable, home base. Where songs usually start and end."]}),g.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[g.jsx("strong",{className:"text-accent-primary block mb-1",children:"Subdominant (IV, ii)"}),"Movement, drifting away from home. Creates interest."]}),g.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[g.jsx("strong",{className:"text-accent-primary block mb-1",children:"Dominant (V, vii)"}),"Tension, needing resolution. Pulls strongly back to I."]})]})]})]}),g.jsxs("section",{children:[g.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[g.jsx(uk,{size:12}),"Songwriting Toolkit"]}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[g.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Emotional Cadences (How Phrases End)",g.jsx(bg,{size:12,className:"text-accent-primary/50"}),g.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e]})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:lO.map(t=>g.jsx(uO,{preset:t},t.id))})]}),g.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[g.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Famous Progressions",g.jsx(bg,{size:12,className:"text-accent-primary/50"}),g.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e,"  tap to play  click + to add"]})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:oO.map(t=>g.jsx(cO,{preset:t,onAddToTimeline:n},t.id))})]})]})]}),g.jsxs("section",{children:[g.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[g.jsx(wp,{size:12}),"Adding Spice (Advanced)"]}),g.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-6",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-white mb-2 text-sm flex items-center gap-2",children:"1. Modal Interchange (Borrowed Chords)"}),g.jsx("p",{className:"text-sm text-gray-400 mb-3",children:'Steal chords from the parallel minor key to add "cinematic" emotion.'}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[g.jsx("strong",{className:"text-white block",children:"Minor IV (iv)"}),g.jsx("span",{className:"text-gray-500",children:'"The Beatles Cadence". Gives a nostalgic, bittersweet ending. (Fm in key of C).'})]}),g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[g.jsx("strong",{className:"text-white block",children:"Flat VI (VI)"}),g.jsx("span",{className:"text-gray-500",children:'Epic, heroic, fantasy feeling. "Lord of the Rings" sound. (Ab in key of C).'})]}),g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[g.jsx("strong",{className:"text-white block",children:"Picardy Third"}),g.jsx("span",{className:"text-gray-500",children:"Ending a sad, minor song on a happy Major I chord. Pure sunshine."})]})]})]}),g.jsx("div",{className:"w-full h-px bg-white/5"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"2. Secondary Dominants"}),g.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Make a minor chord Major to create a magnetic pull to another chord."}),g.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"In C Major, play ',g.jsx("strong",{className:"text-white",children:"E Major (III)"}),". It pulls hard to ",g.jsx("strong",{className:"text-white",children:"Am"}),'. (Radiohead - Creep)"']})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"3. Tritone Substitution"}),g.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Jazz trick: Replace the V chord with a dominant chord exactly halfway around the circle (a tritone away)."}),g.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"Instead of G7  C, try ',g.jsx("strong",{className:"text-white",children:"Db7  C"}),'. Smooth chromatic slide."']})]})]}),g.jsx("div",{className:"w-full h-px bg-white/5"}),g.jsxs("div",{children:[g.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["4. Secrets of the Pros",g.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-400 px-1.5 py-0.5 rounded uppercase font-bold",children:"Expert"})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[g.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"A"}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-white text-sm block",children:"Pedal Point"}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Keep the bass note the same while changing chords on top. Creates massive tension and "floaty" feelings. (e.g., C/C  F/C  G/C).'})]})]}),g.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[g.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"B"}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-white text-sm block",children:"Line Clich"}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'A single note moving down chromatically inside a static chord. think "Stairway to Heaven" or James Bond theme (Am  Am(maj7)  Am7  Am6).'})]})]}),g.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[g.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"C"}),g.jsxs("div",{children:[g.jsx("strong",{className:"text-white text-sm block",children:"Relative Major/Minor Modulation"}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Switching focus between I and vi. Use the exact same notes, but center your melody around Am instead of C to instantly change the mood from happy to sad."})]})]})]})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"5. Building Better Chords (Extensions)"}),g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-center",children:[g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[g.jsx("strong",{className:"text-white block",children:"maj7"}),g.jsx("span",{className:"text-gray-500",children:"Dreamy, Jazz, Lo-fi"})]}),g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[g.jsx("strong",{className:"text-white block",children:"dom7"}),g.jsx("span",{className:"text-gray-500",children:"Blues, Funk, Tension"})]}),g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[g.jsx("strong",{className:"text-white block",children:"sus4"}),g.jsx("span",{className:"text-gray-500",children:"Open, airy, delayed"})]}),g.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[g.jsx("strong",{className:"text-white block",children:"add9"}),g.jsx("span",{className:"text-gray-500",children:"Rich, cinematic pop"})]})]})]})]})]}),g.jsxs("section",{children:[g.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[g.jsx(wp,{size:12}),"Scales & Modes"]}),g.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-4",children:[g.jsx("p",{className:"text-sm text-gray-300",children:g.jsx("strong",{className:"text-white",children:"Same notes, different starting points, totally different vibes."})}),g.jsxs("p",{className:"text-xs text-gray-400",children:['Think of modes as different "camera angles" on the same scale. Start a ',Ln(e)," major scale from different notes, and you unlock seven distinct musical personalities  each with its own emotional flavor."]}),(()=>{const t=sg(e),s=o=>[...t.slice(o),...t.slice(0,o)].map(c=>Ln(c)).join("  "),a=[{name:"Ionian (I)",degree:0,quality:"MAJOR",color:"yellow",desc:"The standard major scale. Bright, happy, resolved.",note:'This is your "home base."'},{name:"Dorian (ii)",degree:1,quality:"minor",color:"violet",desc:"Minor with a raised 6th.",highlight:"Hopeful minor",note:'  less sad, more cool. Think jazz, funk, and "So What".'},{name:"Phrygian (iii)",degree:2,quality:"minor",color:"orange",desc:"Minor with a flat 2nd.",highlight:"Spanish, exotic, intense.",note:" Classic in Flamenco and metal."},{name:"Lydian (IV)",degree:3,quality:"MAJOR",color:"cyan",desc:"Major with a raised 4th.",highlight:"Dreamy, floating, magical.",note:" Film composers love this for wonder and awe."},{name:"Mixolydian (V)",degree:4,quality:"MAJOR",color:"emerald",desc:"Major with a flat 7th.",highlight:"Bluesy, rock 'n roll.",note:" Common over dominant (V) chords."},{name:"Aeolian (vi)",degree:5,quality:"minor",color:"blue",desc:"The natural minor scale.",highlight:"Sad, introspective, melancholic.",note:" The basis of most minor-key music."},{name:"Locrian (vii)",degree:6,quality:"dim",color:"red",dimmed:!0,desc:"Flat 2nd and flat 5th.",highlight:"Dark, unstable, unsettling.",note:" Rarely used  its tonic chord is diminished!"}];return g.jsx("div",{className:"space-y-2",children:a.map(o=>g.jsxs("div",{className:`bg-bg-tertiary p-3 rounded border-l-2 border-${o.color}-500${o.dimmed?"/50":""}`,children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsx("strong",{className:"text-white text-sm",children:o.name}),g.jsx("span",{className:`text-[10px] text-${o.color}-400 bg-${o.color}-500/10 px-1.5 py-0.5 rounded`,children:o.quality})]}),g.jsxs("p",{className:"text-xs text-gray-400",children:[o.desc,o.highlight&&g.jsxs("span",{className:"text-gray-300",children:[" ",o.highlight]}),o.note&&g.jsx("span",{className:"text-gray-500",children:o.note})]}),g.jsx("p",{className:"text-[10px] text-gray-500 mt-1.5 font-mono tracking-wide",children:s(o.degree)})]},o.name))})})(),g.jsx("div",{className:"p-3 rounded-xl bg-accent-primary/5 border border-accent-primary/20 mt-4",children:g.jsxs("div",{className:"flex items-start gap-2 text-xs text-gray-400",children:[g.jsx(Oh,{size:14,className:"text-accent-primary shrink-0 mt-0.5"}),g.jsxs("span",{children:[g.jsx("strong",{className:"text-accent-primary",children:"Key insight:"})," Every mode shares the same notes as its parent major scale. ",Ln(sg(e)[1])," Dorian uses the same notes as ",Ln(e),' major. The magic is in which note feels like "home."']})]})})]})]})]})},dO=({isOpen:n,onClose:e,isEmbedded:t=!1})=>n?t?g.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col bg-[#1a1a24]",children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-[#22222e] shrink-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-6 h-6",children:g.jsx(Fx,{size:24})}),g.jsx("h2",{className:"text-sm font-bold text-white",children:"Guide"})]}),g.jsx("button",{onClick:e,className:"p-1 hover:bg-bg-tertiary rounded transition-colors text-text-muted hover:text-white",children:g.jsx(Lc,{size:16})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-6 sm:py-6 space-y-8",children:g.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:g.jsx(Vx,{onClose:e})})})]}):g.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center pointer-events-none",style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[g.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm cursor-pointer pointer-events-auto",onClick:e}),g.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-4xl w-full max-h-full overflow-hidden flex flex-col pointer-events-auto",children:[g.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border-subtle bg-[#22222e]",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8",children:g.jsx(Fx,{size:32})}),g.jsx("h2",{className:"text-lg font-bold text-white",children:"Songwriter Wheel Guide"})]}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-bg-tertiary rounded-lg transition-colors text-text-muted hover:text-white",children:g.jsx(Lc,{size:20})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-8 sm:py-8 space-y-8",children:g.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:g.jsx(Vx,{onClose:e})})})]})]}):null,Bx="chordwheel_onboarding_seen",fO=({onDismiss:n,onOpenHelp:e})=>{const[t,s]=ee.useState(!1),[a,o]=ee.useState(!1);ee.useEffect(()=>{if(!localStorage.getItem(Bx)){const h=setTimeout(()=>s(!0),800);return()=>clearTimeout(h)}},[]);const u=()=>{o(!0),localStorage.setItem(Bx,"true"),setTimeout(()=>{s(!1),n?.()},300)};return t?g.jsxs("div",{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-300 ${a?"opacity-0":"opacity-100"}`,style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[g.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md cursor-pointer",onClick:u}),g.jsxs("div",{className:`relative max-w-md w-full bg-gradient-to-b from-[#1e1e2a] to-[#151520] border border-white/10 rounded-2xl shadow-2xl overflow-hidden transition-all duration-300 ${a?"scale-95 opacity-0":"scale-100 opacity-100"}`,children:[g.jsx("div",{className:"absolute -top-20 -left-20 w-40 h-40 bg-accent-primary/30 rounded-full blur-3xl pointer-events-none"}),g.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-purple-500/20 rounded-full blur-3xl pointer-events-none"}),g.jsxs("div",{className:"relative px-6 pt-6 pb-4 flex items-center justify-between border-b border-white/5",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-accent-primary to-purple-600 flex items-center justify-center shadow-lg shadow-accent-primary/25",children:g.jsx(Fk,{size:20,className:"text-white"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-bold text-white",children:"Welcome!"}),g.jsx("p",{className:"text-xs text-gray-400",children:"Quick start guide"})]})]}),g.jsx("button",{onClick:u,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",children:g.jsx(Lc,{size:20})})]}),g.jsxs("div",{className:"relative px-6 py-5 space-y-4",children:[g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:g.jsx(sw,{size:18,className:"text-accent-primary"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",g.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:g.jsx($h,{size:18,className:"text-purple-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[g.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate and change keys. Highlighted chords always sound good together."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:g.jsx(iw,{size:18,className:"text-emerald-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",g.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",g.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:g.jsx(xp,{size:18,className:"text-amber-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",g.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),g.jsxs("div",{className:"flex items-start gap-4 group",children:[g.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:g.jsx(n0,{size:18,className:"text-sky-400"})}),g.jsxs("div",{className:"pt-0.5",children:[g.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),g.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[g.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),g.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:g.jsxs("div",{className:"flex items-center justify-between gap-3",children:[g.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[g.jsx(vk,{size:14,className:"text-accent-primary shrink-0",style:{transform:"scaleX(-1)"}}),g.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[g.jsx("strong",{className:"text-gray-300",children:"Tip:"})," Tap the",g.jsx("button",{onClick:()=>{u(),setTimeout(()=>e?.(),350)},className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 hover:bg-bg-tertiary rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/60",title:"Open full guide",children:g.jsx(Oh,{size:12})}),"button anytime for the full guide."]})]}),g.jsx("div",{className:"shrink-0 w-16 h-16 relative",children:g.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((c,h)=>{const f=h*30,p=(f-15-90)*Math.PI/180,y=(f+15-90)*Math.PI/180,_=18,b=46,A=h<=4||h>=10;let N;A?h===0?N="rgba(234, 179, 8, 0.9)":h===1?N="rgba(163, 190, 60, 0.85)":h===2?N="rgba(132, 204, 22, 0.8)":h===3?N="rgba(74, 222, 128, 0.7)":h===4?N="rgba(45, 212, 191, 0.6)":h===11?N="rgba(251, 146, 60, 0.85)":h===10?N="rgba(168, 162, 158, 0.6)":N="rgba(200, 180, 100, 0.7)":N=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][h%3];const k=50+_*Math.cos(p),T=50+_*Math.sin(p),R=50+b*Math.cos(p),D=50+b*Math.sin(p),V=50+b*Math.cos(y),F=50+b*Math.sin(y),W=50+_*Math.cos(y),H=50+_*Math.sin(y);return g.jsx("path",{d:`M ${k} ${T} L ${R} ${D} A ${b} ${b} 0 0 1 ${V} ${F} L ${W} ${H} A ${_} ${_} 0 0 0 ${k} ${T}`,fill:N,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},h)}),g.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]})})]})})]}),g.jsx("div",{className:"relative px-6 pb-6",children:g.jsx("button",{onClick:u,className:"w-full py-3 px-4 rounded-xl bg-gradient-to-r from-accent-primary to-purple-600 text-white font-semibold text-sm hover:opacity-90 transition-opacity shadow-lg shadow-accent-primary/25 active:scale-[0.98]",children:"Got it, let's go!"})})]})]}):null},pO=({isOpen:n,onClose:e,title:t,artist:s,tags:a,timeSignature:o,onSave:u})=>{const c=ee.useRef(null),h=ee.useRef(null),[f,p]=ee.useState(t),[y,_]=ee.useState(s),[b,A]=ee.useState(a),[N,k]=ee.useState(o),[T,R]=ee.useState("");if(ee.useEffect(()=>{n&&(p(t),_(s),A(a),k(o),R(""),setTimeout(()=>{h.current?.focus(),h.current?.select()},100))},[n,t,s,a,o]),ee.useEffect(()=>{if(!n)return;const L=B=>{B.key==="Escape"&&e()};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[n,e]),!n)return null;const D=()=>{const L=f.trim()||"Untitled Song";u(L,y.trim(),b,N),e()},V=()=>{const L=T.trim();L&&!b.includes(L)&&(A([...b,L]),R(""))},F=L=>{A(b.filter(B=>B!==L))},W=L=>{L.key==="Enter"&&(L.preventDefault(),V())},H=L=>{L.key==="Enter"&&(L.preventDefault(),D())};return Ho.createPortal(g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:e}),g.jsxs("div",{ref:c,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"280px",maxWidth:"340px",width:"90vw"},children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[g.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[g.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),g.jsx("span",{className:"text-sm font-bold text-text-primary",children:"Song Info"})]}),g.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:g.jsx(Lc,{size:14})})]}),g.jsxs("div",{className:"p-4 space-y-4",children:[g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Song Title"}),g.jsx("input",{ref:h,type:"text",value:f,onChange:L=>p(L.target.value),onKeyDown:H,placeholder:"Untitled Song",maxLength:100,className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"By (Optional)"}),g.jsx("input",{type:"text",value:y,onChange:L=>_(L.target.value),onKeyDown:H,placeholder:"Artist or songwriter name",maxLength:100,className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Time Signature"}),g.jsxs("select",{value:`${N[0]}/${N[1]}`,onChange:L=>{const[B,te]=L.target.value.split("/").map(j=>parseInt(j,10));k([B,te])},className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`,children:[g.jsx("option",{value:"4/4",children:"4/4 (Common Time)"}),g.jsx("option",{value:"3/4",children:"3/4 (Waltz)"}),g.jsx("option",{value:"2/4",children:"2/4 (March)"}),g.jsx("option",{value:"5/4",children:"5/4"}),g.jsx("option",{value:"6/8",children:"6/8 (Compound)"}),g.jsx("option",{value:"7/8",children:"7/8"}),g.jsx("option",{value:"12/8",children:"12/8"})]}),g.jsx("p",{className:"text-[10px] text-text-muted",children:"Default for new sections. Sections can override this."})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider flex items-center gap-1.5",children:[g.jsx(Pk,{size:10}),"Tags (Optional)"]}),b.length>0&&g.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:b.map(L=>g.jsxs("span",{className:Rt("inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium","bg-accent-primary/15 text-accent-primary border border-accent-primary/30"),children:[L,g.jsx("button",{onClick:()=>F(L),className:"hover:text-red-400 transition-colors",title:`Remove "${L}"`,children:g.jsx(Lc,{size:12})})]},L))}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{type:"text",value:T,onChange:L=>R(L.target.value),onKeyDown:W,placeholder:"Add a tag...",maxLength:30,className:`flex-1 h-8 bg-bg-tertiary text-text-primary text-xs rounded-lg 
                                           px-3 border border-border-subtle 
                                           focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`}),g.jsxs("button",{onClick:V,disabled:!T.trim(),className:Rt("h-8 px-3 rounded-lg text-xs font-medium transition-all","flex items-center gap-1",T.trim()?"bg-accent-primary/10 border border-accent-primary/30 text-accent-primary hover:bg-accent-primary/20 active:scale-95":"bg-bg-tertiary border border-border-subtle text-text-muted cursor-not-allowed"),children:[g.jsx(Mc,{size:12}),"Add"]})]}),g.jsx("p",{className:"text-[10px] text-text-muted",children:"Tags help you organize and filter your songs"})]}),g.jsx("button",{onClick:D,className:`w-full py-2.5 rounded-lg
                                   bg-accent-primary text-white font-bold text-sm
                                   hover:bg-accent-primary/90 active:scale-[0.98]
                                   transition-all shadow-lg shadow-accent-primary/25`,children:"Save"})]})]})]}),document.body)},mO=({isOpen:n,onClose:e})=>{const t=ee.useRef(null),{selectedKey:s,setKey:a,setSelectedChord:o}=ln(),u=Yh();if(ee.useEffect(()=>{if(!n)return;const f=p=>{p.key==="Escape"&&e()};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[n,e]),!n)return null;const c=f=>{a(f);const p=la(f,"major");o({root:f,quality:"major",numeral:"I",notes:p,symbol:f}),e()},h=f=>{const p=qx(f);return p.sharps>0?`${p.sharps}`:p.flats>0?`${p.flats}`:""};return Ho.createPortal(g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/50 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:e}),g.jsxs("div",{ref:t,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"280px",maxWidth:"360px",width:"90vw"},children:[g.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[g.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[g.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),g.jsx("span",{className:"text-sm font-bold text-text-primary",children:"Select Key"})]}),g.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:g.jsx(Lc,{size:14})})]}),g.jsxs("div",{className:"p-4",children:[g.jsxs("div",{className:"text-center mb-4",children:[g.jsx("span",{className:"text-xs text-text-muted uppercase tracking-wider",children:"Current Key"}),g.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[g.jsx("span",{className:"text-2xl font-bold",style:{color:u[s]||"#6366f1"},children:Ln(s)}),g.jsx("span",{className:"text-sm text-text-muted",children:h(s)||"No /"})]})]}),g.jsx("div",{className:"grid grid-cols-4 gap-2",children:gu.map(f=>{const p=f===s,y=u[f]||"#6366f1",_=h(f);return g.jsxs("button",{onClick:()=>c(f),className:`
                                        relative flex flex-col items-center justify-center
                                        py-3 px-2 rounded-lg
                                        transition-all duration-150 active:scale-95
                                        ${p?"ring-2 ring-offset-2 ring-offset-bg-elevated shadow-lg":"hover:bg-bg-tertiary"}
                                    `,style:{backgroundColor:p?y:"transparent",borderColor:y,border:`2px solid ${p?y:"rgba(255,255,255,0.1)"}`,"--tw-ring-color":p?y:void 0},children:[g.jsx("span",{className:`text-lg font-bold ${p?"text-black":""}`,style:{color:p?void 0:y},children:Ln(f)}),g.jsx("span",{className:`text-[10px] ${p?"text-black/70":"text-text-muted"}`,children:_||""})]},f)})}),g.jsx("p",{className:"text-[10px] text-text-muted text-center mt-4",children:"Tap a key to change. The wheel will rotate and the I chord will be selected."})]})]})]}),document.body)},gO=({mobileTimelineOpen:n,setMobileTimelineOpen:e,chordPanelVisible:t,setChordPanelScrolledToBottom:s})=>{const a=ee.useRef(0),[o,u]=ee.useState(0),c=ee.useRef(!1),h=t,f=!t,p=450,y=V=>{a.current=V.touches[0].clientY,c.current=!0,u(0)},_=V=>{if(!c.current)return;const F=a.current-V.touches[0].clientY;u(F)},b=()=>{if(!c.current)return;c.current=!1;const V=40;h&&o<-V&&(t&&ln.getState().toggleChordPanel(),n&&e(!1)),f&&o>V&&(n||e(!0),t||ln.getState().toggleChordPanel()),u(0)},A=()=>{Math.abs(o)<15&&(h?(t&&ln.getState().toggleChordPanel(),n&&e(!1)):(n||e(!0),t||ln.getState().toggleChordPanel()))},N=o!==0,k=h&&o<0?Math.min(400,-o*1.5):0,T=f&&o>0?Math.min(p,o*2):0,R=T>0,D=k>0;return g.jsxs("div",{className:"shrink-0 flex flex-col overflow-hidden",style:{maxHeight:D?`calc(65vh - ${k}px)`:"65vh",opacity:D?Math.max(.3,1-k/500):1,transition:N?"none":"all 0.25s ease-out"},children:[g.jsx("div",{className:"h-6 flex items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing select-none",onTouchStart:y,onTouchMove:_,onTouchEnd:b,onClick:A,children:g.jsx(nw,{size:16,className:`text-text-muted transition-transform duration-200 ${h?"rotate-180":""}`})}),g.jsxs("div",{className:"flex-1 overflow-hidden",style:{maxHeight:R?`${T}px`:void 0,transition:N?"none":"max-height 0.25s ease-out"},children:[g.jsx(Ng,{isOpen:n||R,onToggle:()=>e(!n)}),g.jsx("div",{"data-chord-details":!0,className:"shrink-0 bg-bg-primary overflow-hidden",style:{maxHeight:n||R?"45vh":"55vh"},children:g.jsx(Tg,{variant:"drawer",onScrollChange:s,forceVisible:R})})]})]})};function bO(){const{currentSong:n,selectedKey:e,timelineVisible:t,toggleTimeline:s,selectedSectionId:a,selectedSlotId:o,clearSlot:u,clearTimeline:c,setTitle:h,setArtist:f,setTags:p,setSongTimeSignature:y,loadSong:_,newSong:b,instrument:A,volume:N,isMuted:k,undo:T,redo:R,canUndo:D,canRedo:V,chordPanelVisible:F,isPlaying:W,songInfoModalVisible:H,toggleSongInfoModal:L}=ln();ee.useEffect(()=>{E2(A)},[A]),ee.useEffect(()=>{hw(N)},[N]),ee.useEffect(()=>{dw(k)},[k]);const[B,te]=ee.useState(!1),[j,I]=ee.useState(!1),[K,P]=ee.useState(()=>{if(typeof window>"u")return 1;const _e=window.innerWidth,Fe=window.innerHeight;return _e<768||Fe<500&&Fe<_e?1.25:1}),[ie,X]=ee.useState(50),[re,le]=ee.useState({x:0,y:0}),fe=ee.useRef(null),[Se,z]=ee.useState(()=>typeof window>"u"?200:Math.max(200,Math.floor(window.innerWidth*.33))),[M,$]=ee.useState(()=>{if(typeof window>"u")return 500;const _e=window.innerWidth,ht=window.innerHeight-48-56-152-32,Tt=_e-380-40;return Math.max(300,Math.min(Tt,ht))}),[G,J]=ee.useState(()=>typeof window<"u"?window.innerWidth<768||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[ae,pe]=ee.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1),de=ee.useRef(!1),xe=ee.useRef(!1),[Ne,Be]=ee.useState(!1),Qe=ee.useRef(null),[Xe,st]=ee.useState(!1),[Y,Ie]=ee.useState(!1),dt=ee.useRef(null),et=ee.useRef(!1);ee.useEffect(()=>{if(!G)return;if(ae&&!et.current)et.current=!0,dt.current=ln.getState().chordPanelVisible,Be(!0),st(!0),ln.getState().chordPanelVisible||ln.getState().toggleChordPanel();else if(!ae&&et.current){et.current=!1;const Tt=ln.getState().chordPanelVisible,Bt=dt.current;Bt!==null&&Tt!==Bt&&ln.getState().toggleChordPanel(),st(!1),dt.current=null}const _e=()=>{Be(!0)},Fe=()=>{Qe.current&&clearTimeout(Qe.current),Qe.current=setTimeout(_e,1e4)},ht=Tt=>{const Bt=Tt.target,nn=Bt.closest("[data-chord-details]"),$t=Bt.closest("[data-playback-controls]"),dn=Bt.closest("[data-mobile-timeline]"),fn=Bt.closest("header"),Jn=Bt.closest("[data-wheel-background]"),Gn=Bt.closest("button"),Sn=Bt.tagName==="path"||Bt.tagName==="circle"||Bt.tagName==="text"||Bt.tagName==="polygon"||Bt.tagName==="g"&&Bt.style.cursor==="pointer"||Bt.closest('g[style*="cursor: pointer"]')||Bt.closest('g[class*="cursor-pointer"]'),rn=!ae&&ln.getState().chordPanelVisible;Jn&&!nn&&!$t&&!dn&&!fn&&!Gn&&!Sn&&!rn&&(Be($n=>!$n),Qe.current&&clearTimeout(Qe.current),Fe())};return document.addEventListener("touchstart",ht),Fe(),()=>{document.removeEventListener("touchstart",ht),Qe.current&&clearTimeout(Qe.current)}},[G,ae]);const[ge,qe]=ee.useState(!1),Re=ee.useRef(null),nt=ee.useCallback(()=>{!G||!ae||(qe(!0),Re.current&&clearTimeout(Re.current),Re.current=setTimeout(()=>{qe(!1)},3e3))},[G,ae]);ee.useEffect(()=>()=>{Re.current&&clearTimeout(Re.current)},[]),ee.useEffect(()=>{if(!G)return;const _e=()=>{st(!0)};return window.addEventListener("openMobileTimeline",_e),()=>window.removeEventListener("openMobileTimeline",_e)},[G]),ee.useEffect(()=>{if(!G)return;const _e=ln.getState();Xe&&!_e.timelineVisible?ln.setState({timelineVisible:!0}):!Xe&&_e.timelineVisible&&ln.setState({timelineVisible:!1})},[G,Xe]),ee.useEffect(()=>{const _e=()=>{const Fe=window.innerWidth,ht=window.innerHeight,Tt=Fe<768||ht<500&&ht<Fe,Bt=ht<Fe&&ht<500;if(J(Tt),pe(Bt),Tt&&Bt){const $t=Math.max(200,Math.floor(Fe*.33));z($t)}if(!Tt){const $t=ln.getState().timelineVisible?152:24,dn=ht-48-56-$t-32,fn=Fe-380-40;$(Math.max(300,Math.min(fn,dn)))}const nn=ln.getState();Tt&&!xe.current&&(nn.timelineVisible&&nn.toggleTimeline(),nn.chordPanelVisible&&nn.toggleChordPanel(),xe.current=!0),!Tt&&de.current&&!nn.chordPanelVisible&&(nn.toggleChordPanel(),de.current=!1)};return _e(),window.addEventListener("resize",_e),window.addEventListener("orientationchange",_e),()=>{window.removeEventListener("resize",_e),window.removeEventListener("orientationchange",_e)}},[]),ee.useEffect(()=>{if(G)return;const _e=window.innerWidth,Fe=window.innerHeight,ht=t?152:24,Tt=Fe-48-56-ht-32,Bt=_e-380-40;$(Math.max(300,Math.min(Bt,Tt)))},[t,G]);const ct=ee.useCallback((_e,Fe)=>{P(_e),X(Fe)},[]),vt=ee.useCallback(()=>{const _e=Math.min(2.5,K+.2);P(_e),X(_e>1.3?38:50)},[K]),It=ee.useCallback(()=>{const _e=Math.max(.2,K-.2);P(_e),X(_e>1.3?38:50)},[K]),St=ee.useCallback(_e=>{le(_e)},[]),Ft=ee.useMemo(()=>G&&(ae||F)?90:0,[G,ae,F]),jt=G&&(ae||F);ee.useEffect(()=>{if(G)if(jt)if(fe.current||(fe.current={zoom:K,origin:ie,pan:{...re}}),ae){const _e=window.innerHeight,Fe=1.65,ht=Math.max(.9,Math.min(1.1,_e/400)),Tt=Fe*ht;P(Tt),X(48),le({x:-35,y:0})}else P(1.42),X(42),le({x:-35,y:-30});else fe.current&&(P(fe.current.zoom),X(fe.current.origin),le(fe.current.pan),fe.current=null)},[jt,ae,G]);const yt=()=>{L(!0)},xt=(_e,Fe,ht,Tt)=>{h(_e),f(Fe),p(ht),y(Tt)},Me=ee.useMemo(()=>{const _e=n.sections.reduce((nn,$t)=>{const dn=$t.measures.reduce((fn,Jn)=>fn+Jn.beats.reduce((Gn,Sn)=>Gn+Sn.duration,0),0);return nn+dn},0),Fe=n.tempo/60,ht=_e/Fe,Tt=Math.floor(ht/60),Bt=Math.floor(ht%60);return`${Tt}:${Bt.toString().padStart(2,"0")}`},[n.sections,n.tempo]),[ut,ot]=ee.useState(!1);ee.useEffect(()=>{const _e=async()=>{try{k2(),await Tu(),await Vl(),ot(!0)}catch(ht){console.error("Audio initialization failed:",ht)}},Fe=async()=>{ut||(await j2(),_e())};return document.addEventListener("touchstart",Fe,{once:!0}),document.addEventListener("click",Fe,{once:!0}),()=>{document.removeEventListener("touchstart",Fe),document.removeEventListener("click",Fe)}},[ut]),ee.useEffect(()=>{const _e=Fe=>{if((Fe.key==="Delete"||Fe.key==="Backspace")&&a&&o){if(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA")return;Fe.preventDefault(),u(a,o)}};return window.addEventListener("keydown",_e),()=>window.removeEventListener("keydown",_e)},[a,o,u]),ee.useEffect(()=>{const _e=Fe=>{const ht=Fe.target;ht?.tagName==="INPUT"||ht?.tagName==="TEXTAREA"||ht?.isContentEditable||Fe.metaKey&&Fe.key.toLowerCase()==="z"&&(Fe.preventDefault(),Fe.shiftKey?V&&R():D&&T())};return window.addEventListener("keydown",_e),()=>window.removeEventListener("keydown",_e)},[T,R,D,V]);const[We,at]=ee.useState(!1),[bt,lt]=ee.useState([]),tn=ee.useRef(null);ee.useEffect(()=>{lt(rf())},[]),ee.useEffect(()=>{const _e=Fe=>{tn.current&&!tn.current.contains(Fe.target)&&at(!1)};return document.addEventListener("mousedown",_e),()=>document.removeEventListener("mousedown",_e)},[]);const Ct=()=>{if(n.title==="Untitled Song"||!n.title.trim()){const _e=prompt("Please name your song:",n.title);if(_e===null)return;const Fe=_e.trim()||"Untitled Song";h(Fe);const ht={...n,title:Fe};Ix(ht)}else Ix(n);lt(rf()),at(!1)},Vt=_e=>{_(_e),at(!1)},[Jt,wt]=ee.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),pt=()=>{wt({isOpen:!0,title:"New Song",message:"Start a new song? Unsaved changes will be lost.",confirmLabel:"Start New",isDestructive:!0,onConfirm:()=>{b(),at(!1)}})},qt=(_e,Fe,ht)=>{ht.stopPropagation(),wt({isOpen:!0,title:"Delete Song",message:`Are you sure you want to delete "${Fe}"? This cannot be undone.`,confirmLabel:"Delete",isDestructive:!0,onConfirm:()=>{rO(_e),lt(rf())}})},wn=152,Ee=()=>{const _e=new Ut,Fe=_e.internal.pageSize.getWidth(),ht=20,Tt=4,nn=n.sections.reduce((gt,kt)=>{const un=(kt.timeSignature||n.timeSignature)[0];return gt+kt.measures.length*un},0)/n.tempo*60,$t=Math.floor(nn/60),dn=Math.floor(nn%60),fn=`${$t}:${dn.toString().padStart(2,"0")}`,Jn=n.sections.reduce((gt,kt)=>gt+kt.measures.length,0),Gn=n.sections.length;if(_e.setFontSize(22),_e.setFont("helvetica","bold"),_e.setTextColor(0,0,0),_e.text(n.title,ht,18),n.artist&&n.artist.trim()){const gt=_e.getTextWidth(n.title);_e.setFontSize(14),_e.setFont("helvetica","italic"),_e.setTextColor(100,100,100),_e.text(`by ${n.artist}`,ht+gt+6,18),_e.setTextColor(0,0,0)}_e.setDrawColor(0,0,0),_e.setLineWidth(.5),_e.line(ht,22,Fe-ht,22),_e.setFontSize(10),_e.setFont("helvetica","normal");const Sn=[`Key: ${Ln(e)}`,`${n.timeSignature[0]}/${n.timeSignature[1]}`,`Tempo: ${n.tempo} BPM`,`Duration: ${fn}`,`${Gn} sections`,`${Jn} bars`];_e.text(Sn.join("      "),ht,30);let rn=48;const $n=new Set;if(n.sections.forEach(gt=>{const kt=gt.measures.map(xn=>{const Pn=xn.beats.length;return xn.beats.forEach(Tn=>{if(Tn.chord){const sr=Tn.chord.root,Mr={major:"maj",minor:"m",diminished:"dim",augmented:"aug",major7:"maj7",minor7:"m7",dominant7:"7",halfDiminished7:"m7b5",sus2:"sus2",sus4:"sus4"}[Tn.chord.quality]||Tn.chord.quality||"maj";$n.add(`${sr}|${Mr}`)}}),Pn===1?xn.beats[0]?.chord?.symbol||"":Pn===2?xn.beats.map(Tn=>Tn.chord?.symbol||"").join(" "):xn.beats.map(Tn=>Tn.chord?.symbol||"").join(" ")}),pn=kt.length===0?1:Math.ceil(kt.length/Tt),sn=10+(kt.length===0?12:pn*10)+6;if(rn>48&&rn+sn>280&&(_e.addPage(),rn=20),_e.setFontSize(14),_e.setFont("helvetica","bold"),_e.setTextColor(0,0,0),_e.text(`[${Rh(gt,n.sections)}]`,ht,rn),rn+=10,_e.setFontSize(14),_e.setFont("helvetica","normal"),kt.length===0)_e.text("(No chords)",ht,rn),rn+=12;else for(let xn=0;xn<kt.length;xn+=Tt){const Tn=kt.slice(xn,xn+Tt).join("  |  ");_e.text(Tn,ht,rn),rn+=10}rn+=6}),$n.size>0){const gt=Array.from($n),kt=245,pn=5,xn=gt.length*(22+pn)>kt,Pn=xn?18:22,Tn=xn?18:20,sr=xn?22:25,$r=xn?155:170;let Mr=0,_s=35;const Yi=xn?Math.ceil(gt.length/2):gt.length;_e.setPage(1),gt.forEach((Pr,ni)=>{const[Gs,Nn]=Pr.split("|"),Xi=Zw(Gs,Nn);if(!Xi)return;xn&&ni===Yi&&(Mr=1,_s=35);const Ds=Mr*sr,Si=`${Gs}${Nn==="maj"?"":Nn}`;_e.setFontSize(xn?6:7),_e.setFont("helvetica","bold"),_e.setTextColor(0,0,0),_e.text(Si,$r+Ds+Tn/2+2,_s,{align:"center"}),ft(_e,Xi,$r+Ds,_s+3,xn),_s+=Pn+pn})}const Er=(gt,kt)=>{const un={intro:"In",verse:"V","pre-chorus":"PC",chorus:"C",bridge:"Br",interlude:"Int",solo:"So",breakdown:"Bd",tag:"Tg",hook:"Hk",outro:"Out"}[gt.type]||gt.type.charAt(0).toUpperCase(),sn=kt.filter(xn=>xn.type===gt.type);if(sn.length>1){const xn=sn.findIndex(Pn=>Pn.id===gt.id)+1;return`${un}${xn}`}return un},us=gt=>{const sn=Fe-ht*2,xn=n.sections.reduce((Tn,sr)=>Tn+sr.measures.length,0);if(xn===0)return;let Pn=ht;gt.setDrawColor(0,0,0),gt.setLineWidth(.4),n.sections.forEach(Tn=>{const sr=Tn.measures.length/xn*sn,$r=Pn+2,Mr=Pn+sr-2;gt.line($r,285,Mr,285),gt.line($r,281,$r,289),gt.line(Mr,281,Mr,289);const _s=Er(Tn,n.sections);gt.setFontSize(7),gt.setFont("helvetica","normal"),gt.setTextColor(0,0,0),gt.text(_s,Pn+sr/2,278,{align:"center"}),Pn+=sr})},je=_e.getNumberOfPages();for(let gt=1;gt<=je;gt++)_e.setPage(gt),us(_e);const Pe=`${n.title.replace(/\s+/g,"-").toLowerCase()}.pdf`,Ze=_e.output("blob");if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const gt=URL.createObjectURL(Ze);window.open(gt,"_blank"),setTimeout(()=>URL.revokeObjectURL(gt),1e4)}else nO.saveAs(Ze,Pe)},ft=(_e,Fe,ht,Tt,Bt=!1)=>{const{frets:nn,barres:$t,baseFret:dn}=Fe,fn=Bt?2.5:3,Jn=Bt?3:4,Gn=4,Sn=6,rn=Bt?1:1.2,$n=Array.from({length:Sn},(Ze,_t)=>ht+_t*fn),Er=Array.from({length:Gn+1},(Ze,_t)=>Tt+_t*Jn),us=dn===1,je=fn*(Sn-1),Pe=Jn*Gn;_e.setDrawColor(0,0,0),us?(_e.setLineWidth(1),_e.line(ht,Tt,ht+je,Tt)):(_e.setLineWidth(.3),_e.line(ht,Tt,ht+je,Tt),_e.setFontSize(Bt?6:7),_e.setFont("helvetica","bold"),_e.text(dn.toString(),ht-3,Tt+Jn/2+1)),_e.setLineWidth(.2),Er.slice(1).forEach(Ze=>{_e.line(ht,Ze,ht+je,Ze)}),$n.forEach(Ze=>{_e.line(Ze,Tt,Ze,Tt+Pe)}),$t.forEach(Ze=>{const _t=nn.map((un,sn)=>({fret:un,idx:sn})).filter(({fret:un})=>un===Ze);if(_t.length<2)return;const gt=Math.min(..._t.map(un=>un.idx)),kt=Math.max(..._t.map(un=>un.idx)),pn=Tt+(Ze-.5)*Jn;_e.setLineWidth(rn*1.4),_e.line($n[gt],pn,$n[kt],pn),_e.setLineWidth(.2)}),nn.forEach((Ze,_t)=>{const gt=$n[_t];if(Ze===-1){_e.setFontSize(Bt?6:7),_e.setFont("helvetica","bold"),_e.text("x",gt,Tt-1,{align:"center"});return}if(Ze===0){_e.setLineWidth(.3),_e.circle(gt,Tt-1.5,.8,"S");return}if($t.includes(Ze)){const un=nn.findIndex(sn=>sn===Ze);if(_t!==un)return}const pn=Tt+(Ze-.5)*Jn;_e.setFillColor(0,0,0),_e.circle(gt,pn,rn,"F")})};return g.jsxs("div",{className:"h-full w-full flex flex-col bg-bg-primary text-text-primary overflow-hidden",children:[g.jsxs("header",{className:`${G?"h-14":"h-12"} border-b border-border-subtle grid grid-cols-[1fr_auto_1fr] items-center ${G?"px-4":"px-3"} bg-bg-secondary shrink-0 z-20 transition-all duration-300 ease-out ${G&&!ae&&(Ne||F)||G&&ae&&!ge?"opacity-0 -translate-y-full pointer-events-none absolute top-0 left-0 right-0":"relative"}`,children:[g.jsx("div",{className:"flex items-center gap-2 shrink-0",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"relative",children:g.jsx(hE,{size:G?32:24})}),g.jsx("span",{className:`font-bold ${G?"text-xs":"text-sm"} tracking-tight hidden sm:block text-text-muted`,children:"Songwriter Wheel"})]})}),g.jsx("div",{className:"flex items-center justify-center overflow-hidden",children:g.jsx("span",{onClick:yt,className:`${G?"text-xs":"text-sm"} font-medium text-text-primary cursor-pointer hover:text-accent-primary transition-colors px-2 py-1 rounded text-center truncate max-w-[70vw]`,title:"Click to edit song info",children:n.title})}),g.jsxs("div",{className:`flex items-center ${G?"gap-3":"gap-4"} shrink-0 justify-self-end`,children:[!G&&g.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-muted",children:[g.jsx($T,{size:11,className:"shrink-0"}),g.jsx("span",{className:"leading-none",children:Me})]}),g.jsxs("button",{onClick:()=>I(!0),className:`flex items-center gap-2 p-[10px] ${G?"text-xs":"text-[10px]"} text-text-muted hover:bg-bg-tertiary rounded-lg transition-colors touch-feedback`,children:[g.jsx("span",{className:"uppercase font-bold",children:"Key"}),g.jsx("span",{className:`font-bold text-accent-primary ${G?"text-base":"text-sm"} min-w-[1.5rem] text-center inline-block`,children:Ln(e)})]}),g.jsxs("div",{className:"relative",ref:tn,children:[g.jsxs("button",{onClick:()=>at(!We),className:`flex items-center gap-1.5 ${G?"text-xs px-2 py-1.5 min-w-[44px]":"text-[11px] px-2 py-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback`,children:[g.jsx(mg,{size:G?16:12}),g.jsx("span",{className:"hidden sm:inline",children:"Save"}),g.jsx(jh,{size:G?12:10,className:`transition-transform ${We?"rotate-180":""}`})]}),We&&g.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-[#1a1a24] border border-border-medium rounded-lg shadow-2xl z-50 overflow-hidden",children:[g.jsxs("div",{className:"p-1.5 border-b border-border-subtle bg-[#22222e]",children:[g.jsxs("button",{onClick:Ct,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[g.jsx(mg,{size:14,className:"text-accent-primary"}),"Save Current Song"]}),g.jsxs("button",{onClick:pt,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[g.jsx(ek,{size:14,className:"text-green-400"}),"New Song"]})]}),g.jsx("div",{className:"max-h-48 overflow-y-auto bg-[#1a1a24]",children:bt.length===0?g.jsx("p",{className:"px-3 py-4 text-[10px] text-gray-500 text-center",children:"No saved songs yet"}):g.jsxs("div",{className:"p-1.5",children:[g.jsx("p",{className:"px-2 py-1 text-[9px] text-gray-500 uppercase tracking-wider",children:"Saved Songs"}),bt.map(_e=>g.jsxs("div",{onClick:()=>Vt(_e),className:`flex items-center justify-between px-3 py-2 text-xs rounded cursor-pointer transition-colors ${_e.id===n.id?"bg-accent-primary/20 text-accent-primary":"text-gray-300 hover:bg-[#2a2a3a]"}`,children:[g.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[g.jsx(nk,{size:12,className:"shrink-0"}),g.jsx("span",{className:"truncate",children:_e.title})]}),g.jsx("button",{onClick:Fe=>qt(_e.id,_e.title,Fe),className:"p-1 hover:bg-red-500/20 rounded text-gray-500 hover:text-red-400 shrink-0",children:g.jsx(gg,{size:10})})]},_e.id))]})})]})]}),g.jsxs("button",{onClick:Ee,className:`flex items-center justify-center ${G?"text-xs px-3 py-1.5 min-w-[44px] min-h-[44px] gap-1":"text-[11px] px-2.5 py-1 gap-1.5"} bg-text-primary text-bg-primary rounded font-medium hover:bg-white transition-colors touch-feedback`,children:[g.jsx(n0,{size:G?16:12}),g.jsx("span",{className:G?"text-[10px] font-bold":"hidden sm:inline",children:"PDF"})]})]})]}),g.jsxs("div",{className:`flex-1 flex ${G?ae?"flex-row":"flex-col":"flex-row"} overflow-hidden min-h-0`,children:[g.jsxs("div",{"data-wheel-background":!0,className:`flex flex-col min-w-0 min-h-0 bg-gradient-to-b from-bg-primary to-bg-secondary/30 ${G&&ae?"shrink-0":"flex-1"} ${G?"overflow-hidden":""} relative`,style:G&&ae?{width:`${Se}px`,minWidth:"200px",height:"100%"}:void 0,children:[g.jsxs("div",{className:`flex-1 flex flex-col ${G&&!ae?"justify-center":G&&ae?"justify-center items-center":"justify-center items-center pt-2"} ${G?"overflow-hidden":"overflow-visible"}`,children:[G?null:g.jsxs("div",{className:"flex justify-end gap-2 px-2 shrink-0 w-full",children:[g.jsxs("div",{className:"flex items-center bg-bg-secondary/60 backdrop-blur-sm rounded-full px-0.5 border border-border-subtle/40",children:[g.jsx("button",{onClick:It,disabled:K<=.2,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom out",children:g.jsx(gk,{size:8})}),g.jsxs("span",{className:"text-[7px] w-5 text-text-muted text-center font-medium",children:[Math.round(K*100),"%"]}),g.jsx("button",{onClick:vt,disabled:K>=2.5,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom in",children:g.jsx(Mc,{size:8})})]}),g.jsx("button",{onClick:()=>te(!0),className:"no-touch-enlarge w-8 h-8 flex items-center justify-center bg-bg-secondary/60 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/40",title:"Songwriter Wheel Guide",children:g.jsx(Oh,{size:16})})]}),g.jsx("div",{className:`flex-1 flex justify-center ${G?"items-center":""} ${G&&ae?"p-1 overflow-hidden":G&&!ae?"px-0 py-0":"p-2 overflow-visible"}`,onClick:nt,children:g.jsx("div",{className:"relative flex items-center justify-center",style:G&&ae?{width:"calc(100dvh - 60px)",height:"calc(100dvh - 60px)",maxWidth:"100%",maxHeight:"100%",aspectRatio:"1 / 1"}:G&&!ae?{width:Ne?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",height:Ne?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxWidth:Ne?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxHeight:Ne?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",aspectRatio:"1 / 1"}:{width:`${M}px`,height:`${M}px`,aspectRatio:"1 / 1"},children:g.jsx(ej,{zoomScale:K,zoomOriginY:ie,onZoomChange:ct,panOffset:re,onPanChange:St,rotationOffset:Ft,disableModeToggle:Ft!==0,footerVisible:W||!(G&&!ae&&(Ne||F&&!Y))})})})]}),G&&g.jsx("button",{onClick:()=>te(!0),onTouchEnd:_e=>{_e.preventDefault(),_e.stopPropagation(),te(!0)},className:`absolute ${ae?"top-2 right-2 w-8 h-8":"top-3 right-3 w-11 h-11"} flex items-center justify-center bg-bg-secondary/90 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors shadow-lg border border-border-subtle z-50`,style:{touchAction:"auto",pointerEvents:"auto"},title:"Songwriter Wheel Guide",children:g.jsx(Oh,{size:ae?14:20})}),G?null:t?g.jsx(g.Fragment,{children:g.jsxs("div",{className:"shrink-0 bg-bg-secondary border-t border-border-subtle overflow-hidden flex flex-col",style:{height:wn},children:[g.jsxs("div",{className:"shrink-0 flex items-center justify-between px-2 py-1 border-b border-border-subtle/50 bg-bg-elevated/80",children:[g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsxs("button",{onClick:T,disabled:!D,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo (Z)",children:[g.jsx(_p,{size:12}),g.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Undo"})]}),g.jsxs("button",{onClick:R,disabled:!V,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo (Z)",children:[g.jsx($h,{size:12}),g.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Redo"})]})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsxs("button",{onClick:()=>{wt({isOpen:!0,title:"Clear Timeline",message:"Are you sure you want to clear all chords from the timeline? This action cannot be undone.",confirmLabel:"Clear",isDestructive:!0,onConfirm:c})},className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-red-400 rounded hover:bg-red-400/10 transition-colors flex items-center gap-0.5",title:"Clear all chords from timeline",children:[g.jsx(gg,{size:8}),g.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Clear"})]}),g.jsxs("button",{onClick:s,className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-text-primary rounded hover:bg-bg-tertiary transition-colors flex items-center gap-0.5",title:"Hide timeline",children:[g.jsx(jh,{size:8}),g.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Hide"})]})]})]}),g.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:g.jsx(Ng,{isOpen:!0,onToggle:s,hideCloseButton:!0,isCompact:!1,isLandscape:!1})})]})}):g.jsx("div",{className:"h-6 bg-bg-secondary border-t border-border-subtle flex items-center justify-center shrink-0",children:g.jsxs("button",{onClick:s,className:"px-3 h-full flex items-center gap-1 text-[8px] text-text-muted hover:text-text-primary hover:bg-bg-tertiary transition-colors",title:"Show timeline",children:[g.jsx(nw,{size:10}),g.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Timeline"})]})})]}),G&&ae?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:`flex h-full ${Xe?"flex-1":"justify-end"} shrink-0`,style:{minWidth:Xe?"100px":"28px",transition:"all 0.25s ease-out"},children:[g.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${Xe?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{Xe&&!F&&ln.getState().toggleChordPanel(),st(!Xe)},children:[g.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),g.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:Xe?"":"Timeline"})]}),Xe&&g.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle",children:g.jsx(Ng,{isOpen:!0,onToggle:()=>st(!1),hideCloseButton:!0,isCompact:F,isLandscape:!0})})]}),g.jsxs("div",{className:`flex h-full ${F?"flex-1":""} shrink-0`,style:{minWidth:F?"100px":"28px",transition:"all 0.25s ease-out"},children:[F&&g.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle","data-chord-details":!0,children:g.jsx(Tg,{variant:Xe?"landscape-panel":"landscape-expanded"})}),g.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${F?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{F&&!Xe&&st(!0),ln.getState().toggleChordPanel()},children:[g.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),g.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:F?"":"Details"})]})]})]}):G?null:g.jsx(Tg,{variant:"sidebar"})]}),G&&!ae&&g.jsx(gO,{mobileTimelineOpen:Xe,setMobileTimelineOpen:st,chordPanelVisible:F,setChordPanelScrolledToBottom:Ie}),(W||!(G&&!ae&&(Ne||F&&!Y)))&&g.jsx("div",{className:"shrink-0 z-30 relative",style:{paddingBottom:G?"env(safe-area-inset-bottom)":void 0},children:g.jsx(sE,{})}),g.jsx(sO,{isOpen:Jt.isOpen,onClose:()=>wt(_e=>({..._e,isOpen:!1})),onConfirm:Jt.onConfirm,title:Jt.title,message:Jt.message,confirmLabel:Jt.confirmLabel,isDestructive:Jt.isDestructive}),g.jsx(uE,{onSave:Ct,onExport:Ee}),g.jsx(dO,{isOpen:B,onClose:()=>te(!1)}),g.jsx(mO,{isOpen:j,onClose:()=>I(!1)}),g.jsx(pO,{isOpen:H,onClose:()=>L(!1),title:n.title,artist:n.artist||"",tags:n.tags||[],timeSignature:n.timeSignature,onSave:xt}),g.jsx(fO,{onOpenHelp:()=>te(!0)})]})}aS.createRoot(document.getElementById("root")).render(g.jsxs(ee.StrictMode,{children:[g.jsx(bO,{}),g.jsx(mS,{})]}));export{rr as _,k1 as c,K_ as g};
