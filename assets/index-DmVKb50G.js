(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var w1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var hm={exports:{}},Of={};var e5;function k_(){if(e5)return Of;e5=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:r,type:s,key:u,ref:a!==void 0?a:null,props:o}}return Of.Fragment=e,Of.jsx=t,Of.jsxs=t,Of}var t5;function j_(){return t5||(t5=1,hm.exports=k_()),hm.exports}var x=j_(),fm={exports:{}},cn={};var n5;function E_(){if(n5)return cn;n5=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function b(G){return G===null||typeof G!="object"?null:(G=_&&G[_]||G["@@iterator"],typeof G=="function"?G:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,k={};function T(G,j,P){this.props=G,this.context=j,this.refs=k,this.updater=P||N}T.prototype.isReactComponent={},T.prototype.setState=function(G,j){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,j,"setState")},T.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function R(){}R.prototype=T.prototype;function D(G,j,P){this.props=G,this.context=j,this.refs=k,this.updater=P||N}var F=D.prototype=new R;F.constructor=D,A(F,T.prototype),F.isPureReactComponent=!0;var B=Array.isArray;function W(){}var Y={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function z(G,j,P){var ee=P.ref;return{$$typeof:r,type:G,key:j,ref:ee!==void 0?ee:null,props:P}}function Q(G,j){return z(G.type,j,G.props)}function M(G){return typeof G=="object"&&G!==null&&G.$$typeof===r}function V(G){var j={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(P){return j[P]})}var H=/\/+/g;function X(G,j){return typeof G=="object"&&G!==null&&G.key!=null?V(""+G.key):j.toString(36)}function he(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(W,W):(G.status="pending",G.then(function(j){G.status==="pending"&&(G.status="fulfilled",G.value=j)},function(j){G.status==="pending"&&(G.status="rejected",G.reason=j)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function I(G,j,P,ee,J){var oe=typeof G;(oe==="undefined"||oe==="boolean")&&(G=null);var fe=!1;if(G===null)fe=!0;else switch(oe){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(G.$$typeof){case r:case e:fe=!0;break;case m:return fe=G._init,I(fe(G._payload),j,P,ee,J)}}if(fe)return J=J(G),fe=ee===""?"."+X(G,0):ee,B(J)?(P="",fe!=null&&(P=fe.replace(H,"$&/")+"/"),I(J,j,P,"",function(ye){return ye})):J!=null&&(M(J)&&(J=Q(J,P+(J.key==null||G&&G.key===J.key?"":(""+J.key).replace(H,"$&/")+"/")+fe)),j.push(J)),1;fe=0;var me=ee===""?".":ee+":";if(B(G))for(var Se=0;Se<G.length;Se++)ee=G[Se],oe=me+X(ee,Se),fe+=I(ee,j,P,oe,J);else if(Se=b(G),typeof Se=="function")for(G=Se.call(G),Se=0;!(ee=G.next()).done;)ee=ee.value,oe=me+X(ee,Se++),fe+=I(ee,j,P,oe,J);else if(oe==="object"){if(typeof G.then=="function")return I(he(G),j,P,ee,J);throw j=String(G),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return fe}function se(G,j,P){if(G==null)return G;var ee=[],J=0;return I(G,ee,"","",function(oe){return j.call(P,oe,J++)}),ee}function ie(G){if(G._status===-1){var j=G._result;j=j(),j.then(function(P){(G._status===0||G._status===-1)&&(G._status=1,G._result=P)},function(P){(G._status===0||G._status===-1)&&(G._status=2,G._result=P)}),G._status===-1&&(G._status=0,G._result=j)}if(G._status===1)return G._result.default;throw G._result}var de=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},pe={map:se,forEach:function(G,j,P){se(G,function(){j.apply(this,arguments)},P)},count:function(G){var j=0;return se(G,function(){j++}),j},toArray:function(G){return se(G,function(j){return j})||[]},only:function(G){if(!M(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return cn.Activity=y,cn.Children=pe,cn.Component=T,cn.Fragment=t,cn.Profiler=a,cn.PureComponent=D,cn.StrictMode=s,cn.Suspense=f,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,cn.__COMPILER_RUNTIME={__proto__:null,c:function(G){return Y.H.useMemoCache(G)}},cn.cache=function(G){return function(){return G.apply(null,arguments)}},cn.cacheSignal=function(){return null},cn.cloneElement=function(G,j,P){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var ee=A({},G.props),J=G.key;if(j!=null)for(oe in j.key!==void 0&&(J=""+j.key),j)!O.call(j,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&j.ref===void 0||(ee[oe]=j[oe]);var oe=arguments.length-2;if(oe===1)ee.children=P;else if(1<oe){for(var fe=Array(oe),me=0;me<oe;me++)fe[me]=arguments[me+2];ee.children=fe}return z(G.type,J,ee)},cn.createContext=function(G){return G={$$typeof:u,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:o,_context:G},G},cn.createElement=function(G,j,P){var ee,J={},oe=null;if(j!=null)for(ee in j.key!==void 0&&(oe=""+j.key),j)O.call(j,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(J[ee]=j[ee]);var fe=arguments.length-2;if(fe===1)J.children=P;else if(1<fe){for(var me=Array(fe),Se=0;Se<fe;Se++)me[Se]=arguments[Se+2];J.children=me}if(G&&G.defaultProps)for(ee in fe=G.defaultProps,fe)J[ee]===void 0&&(J[ee]=fe[ee]);return z(G,oe,J)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(G){return{$$typeof:c,render:G}},cn.isValidElement=M,cn.lazy=function(G){return{$$typeof:m,_payload:{_status:-1,_result:G},_init:ie}},cn.memo=function(G,j){return{$$typeof:d,type:G,compare:j===void 0?null:j}},cn.startTransition=function(G){var j=Y.T,P={};Y.T=P;try{var ee=G(),J=Y.S;J!==null&&J(P,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(W,de)}catch(oe){de(oe)}finally{j!==null&&P.types!==null&&(j.types=P.types),Y.T=j}},cn.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},cn.use=function(G){return Y.H.use(G)},cn.useActionState=function(G,j,P){return Y.H.useActionState(G,j,P)},cn.useCallback=function(G,j){return Y.H.useCallback(G,j)},cn.useContext=function(G){return Y.H.useContext(G)},cn.useDebugValue=function(){},cn.useDeferredValue=function(G,j){return Y.H.useDeferredValue(G,j)},cn.useEffect=function(G,j){return Y.H.useEffect(G,j)},cn.useEffectEvent=function(G){return Y.H.useEffectEvent(G)},cn.useId=function(){return Y.H.useId()},cn.useImperativeHandle=function(G,j,P){return Y.H.useImperativeHandle(G,j,P)},cn.useInsertionEffect=function(G,j){return Y.H.useInsertionEffect(G,j)},cn.useLayoutEffect=function(G,j){return Y.H.useLayoutEffect(G,j)},cn.useMemo=function(G,j){return Y.H.useMemo(G,j)},cn.useOptimistic=function(G,j){return Y.H.useOptimistic(G,j)},cn.useReducer=function(G,j,P){return Y.H.useReducer(G,j,P)},cn.useRef=function(G){return Y.H.useRef(G)},cn.useState=function(G){return Y.H.useState(G)},cn.useSyncExternalStore=function(G,j,P){return Y.H.useSyncExternalStore(G,j,P)},cn.useTransition=function(){return Y.H.useTransition()},cn.version="19.2.0",cn}var r5;function Tg(){return r5||(r5=1,fm.exports=E_()),fm.exports}var re=Tg();const Xn=T_(re);var dm={exports:{}},Df={},pm={exports:{}},mm={};var s5;function M_(){return s5||(s5=1,(function(r){function e(I,se){var ie=I.length;I.push(se);e:for(;0<ie;){var de=ie-1>>>1,pe=I[de];if(0<a(pe,se))I[de]=se,I[ie]=pe,ie=de;else break e}}function t(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var se=I[0],ie=I.pop();if(ie!==se){I[0]=ie;e:for(var de=0,pe=I.length,G=pe>>>1;de<G;){var j=2*(de+1)-1,P=I[j],ee=j+1,J=I[ee];if(0>a(P,ie))ee<pe&&0>a(J,P)?(I[de]=J,I[ee]=ie,de=ee):(I[de]=P,I[j]=ie,de=j);else if(ee<pe&&0>a(J,ie))I[de]=J,I[ee]=ie,de=ee;else break e}}return se}function a(I,se){var ie=I.sortIndex-se.sortIndex;return ie!==0?ie:I.id-se.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var f=[],d=[],m=1,y=null,_=3,b=!1,N=!1,A=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function F(I){for(var se=t(d);se!==null;){if(se.callback===null)s(d);else if(se.startTime<=I)s(d),se.sortIndex=se.expirationTime,e(f,se);else break;se=t(d)}}function B(I){if(A=!1,F(I),!N)if(t(f)!==null)N=!0,W||(W=!0,V());else{var se=t(d);se!==null&&he(B,se.startTime-I)}}var W=!1,Y=-1,O=5,z=-1;function Q(){return k?!0:!(r.unstable_now()-z<O)}function M(){if(k=!1,W){var I=r.unstable_now();z=I;var se=!0;try{e:{N=!1,A&&(A=!1,R(Y),Y=-1),b=!0;var ie=_;try{t:{for(F(I),y=t(f);y!==null&&!(y.expirationTime>I&&Q());){var de=y.callback;if(typeof de=="function"){y.callback=null,_=y.priorityLevel;var pe=de(y.expirationTime<=I);if(I=r.unstable_now(),typeof pe=="function"){y.callback=pe,F(I),se=!0;break t}y===t(f)&&s(f),F(I)}else s(f);y=t(f)}if(y!==null)se=!0;else{var G=t(d);G!==null&&he(B,G.startTime-I),se=!1}}break e}finally{y=null,_=ie,b=!1}se=void 0}}finally{se?V():W=!1}}}var V;if(typeof D=="function")V=function(){D(M)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,X=H.port2;H.port1.onmessage=M,V=function(){X.postMessage(null)}}else V=function(){T(M,0)};function he(I,se){Y=T(function(){I(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(I){I.callback=null},r.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<I?Math.floor(1e3/I):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_next=function(I){switch(_){case 1:case 2:case 3:var se=3;break;default:se=_}var ie=_;_=se;try{return I()}finally{_=ie}},r.unstable_requestPaint=function(){k=!0},r.unstable_runWithPriority=function(I,se){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var ie=_;_=I;try{return se()}finally{_=ie}},r.unstable_scheduleCallback=function(I,se,ie){var de=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?de+ie:de):ie=de,I){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ie+pe,I={id:m++,callback:se,priorityLevel:I,startTime:ie,expirationTime:pe,sortIndex:-1},ie>de?(I.sortIndex=ie,e(d,I),t(f)===null&&I===t(d)&&(A?(R(Y),Y=-1):A=!0,he(B,ie-de))):(I.sortIndex=pe,e(f,I),N||b||(N=!0,W||(W=!0,V()))),I},r.unstable_shouldYield=Q,r.unstable_wrapCallback=function(I){var se=_;return function(){var ie=_;_=se;try{return I.apply(this,arguments)}finally{_=ie}}}})(mm)),mm}var i5;function L_(){return i5||(i5=1,pm.exports=M_()),pm.exports}var gm={exports:{}},ii={};var a5;function O_(){if(a5)return ii;a5=1;var r=Tg();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,d,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:f,containerInfo:d,implementation:m}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ii.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ii.createPortal=function(f,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,m)},ii.flushSync=function(f){var d=u.T,m=s.p;try{if(u.T=null,s.p=2,f)return f()}finally{u.T=d,s.p=m,s.d.f()}},ii.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(f,d))},ii.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},ii.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin),_=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?s.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):m==="script"&&s.d.X(f,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ii.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);s.d.M(f,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(f)},ii.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,y=c(m,d.crossOrigin);s.d.L(f,m,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ii.preloadModule=function(f,d){if(typeof f=="string")if(d){var m=c(d.as,d.crossOrigin);s.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(f)},ii.requestFormReset=function(f){s.d.r(f)},ii.unstable_batchedUpdates=function(f,d){return f(d)},ii.useFormState=function(f,d,m){return u.H.useFormState(f,d,m)},ii.useFormStatus=function(){return u.H.useHostTransitionStatus()},ii.version="19.2.0",ii}var o5;function Nx(){if(o5)return gm.exports;o5=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),gm.exports=O_(),gm.exports}var l5;function D_(){if(l5)return Df;l5=1;var r=L_(),e=Tg(),t=Nx();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function c(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(o(n)!==n)throw Error(s(188))}function d(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(s(188));return i!==n?null:n}for(var l=n,h=i;;){var g=l.return;if(g===null)break;var w=g.alternate;if(w===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===l)return f(g),n;if(w===h)return f(g),i;w=w.sibling}throw Error(s(188))}if(l.return!==h.return)l=g,h=w;else{for(var L=!1,te=g.child;te;){if(te===l){L=!0,l=g,h=w;break}if(te===h){L=!0,h=g,l=w;break}te=te.sibling}if(!L){for(te=w.child;te;){if(te===l){L=!0,l=w,h=g;break}if(te===h){L=!0,h=w,l=g;break}te=te.sibling}if(!L)throw Error(s(189))}}if(l.alternate!==h)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?n:i}function m(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=m(n),i!==null)return i;n=n.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var H=Symbol.for("react.client.reference");function X(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===H?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case A:return"Fragment";case T:return"Profiler";case k:return"StrictMode";case B:return"Suspense";case W:return"SuspenseList";case z:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case D:return n.displayName||"Context";case R:return(n._context.displayName||"Context")+".Consumer";case F:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Y:return i=n.displayName||null,i!==null?i:X(n.type)||"Memo";case O:i=n._payload,n=n._init;try{return X(n(i))}catch{}}return null}var he=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},de=[],pe=-1;function G(n){return{current:n}}function j(n){0>pe||(n.current=de[pe],de[pe]=null,pe--)}function P(n,i){pe++,de[pe]=n.current,n.current=i}var ee=G(null),J=G(null),oe=G(null),fe=G(null);function me(n,i){switch(P(oe,i),P(J,n),P(ee,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Sv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Sv(i),n=Nv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}j(ee),P(ee,n)}function Se(){j(ee),j(J),j(oe)}function ye(n){n.memoizedState!==null&&P(fe,n);var i=ee.current,l=Nv(i,n.type);i!==l&&(P(J,n),P(ee,l))}function Fe(n){J.current===n&&(j(ee),j(J)),fe.current===n&&(j(fe),jf._currentValue=ie)}var Ye,Je;function ct(n){if(Ye===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Ye=i&&i[1]||"",Je=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+n+Je}var $=!1;function Re(n,i){if(!n||$)return"";$=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var Ze=function(){throw Error()};if(Object.defineProperty(Ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ze,[])}catch(Ve){var De=Ve}Reflect.construct(n,[],Ze)}else{try{Ze.call()}catch(Ve){De=Ve}n.call(Ze.prototype)}}else{try{throw Error()}catch(Ve){De=Ve}(Ze=n())&&typeof Ze.catch=="function"&&Ze.catch(function(){})}}catch(Ve){if(Ve&&De&&typeof Ve.stack=="string")return[Ve.stack,De.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),L=w[0],te=w[1];if(L&&te){var ge=L.split(`
`),Me=te.split(`
`);for(g=h=0;h<ge.length&&!ge[h].includes("DetermineComponentFrameRoot");)h++;for(;g<Me.length&&!Me[g].includes("DetermineComponentFrameRoot");)g++;if(h===ge.length||g===Me.length)for(h=ge.length-1,g=Me.length-1;1<=h&&0<=g&&ge[h]!==Me[g];)g--;for(;1<=h&&0<=g;h--,g--)if(ge[h]!==Me[g]){if(h!==1||g!==1)do if(h--,g--,0>g||ge[h]!==Me[g]){var He=`
`+ge[h].replace(" at new "," at ");return n.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",n.displayName)),He}while(1<=h&&0<=g);break}}}finally{$=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?ct(l):""}function pt(n,i){switch(n.tag){case 26:case 27:case 5:return ct(n.type);case 16:return ct("Lazy");case 13:return n.child!==i&&i!==null?ct("Suspense Fallback"):ct("Suspense");case 19:return ct("SuspenseList");case 0:case 15:return Re(n.type,!1);case 11:return Re(n.type.render,!1);case 1:return Re(n.type,!0);case 31:return ct("Activity");default:return""}}function Ke(n){try{var i="",l=null;do i+=pt(n,l),l=n,n=n.return;while(n);return i}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Le=Object.prototype.hasOwnProperty,tt=r.unstable_scheduleCallback,Ue=r.unstable_cancelCallback,ot=r.unstable_shouldYield,it=r.unstable_requestPaint,Be=r.unstable_now,at=r.unstable_getCurrentPriorityLevel,nt=r.unstable_ImmediatePriority,ut=r.unstable_UserBlockingPriority,gt=r.unstable_NormalPriority,dt=r.unstable_LowPriority,xt=r.unstable_IdlePriority,ht=r.log,rn=r.unstable_setDisableYieldValue,Vt=null,bt=null;function jt(n){if(typeof ht=="function"&&rn(n),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(Vt,n)}catch{}}var qt=Math.clz32?Math.clz32:vt,yt=Math.log,Ft=Math.LN2;function vt(n){return n>>>=0,n===0?32:31-(yt(n)/Ft|0)|0}var Dt=256,dn=262144,St=4194304;function mt(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Rt(n,i,l){var h=n.pendingLanes;if(h===0)return 0;var g=0,w=n.suspendedLanes,L=n.pingedLanes;n=n.warmLanes;var te=h&134217727;return te!==0?(h=te&~w,h!==0?g=mt(h):(L&=te,L!==0?g=mt(L):l||(l=te&~n,l!==0&&(g=mt(l))))):(te=h&~w,te!==0?g=mt(te):L!==0?g=mt(L):l||(l=h&~n,l!==0&&(g=mt(l)))),g===0?0:i!==0&&i!==g&&(i&w)===0&&(w=g&-g,l=i&-i,w>=l||w===32&&(l&4194048)!==0)?i:g}function Oe(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function xe(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(){var n=St;return St<<=1,(St&62914560)===0&&(St=4194304),n}function lt(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function Xe(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Mt(n,i,l,h,g,w){var L=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var te=n.entanglements,ge=n.expirationTimes,Me=n.hiddenUpdates;for(l=L&~l;0<l;){var He=31-qt(l),Ze=1<<He;te[He]=0,ge[He]=-1;var De=Me[He];if(De!==null)for(Me[He]=null,He=0;He<De.length;He++){var Ve=De[He];Ve!==null&&(Ve.lane&=-536870913)}l&=~Ze}h!==0&&pn(n,h,0),w!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=w&~(L&~i))}function pn(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var h=31-qt(i);n.entangledLanes|=i,n.entanglements[h]=n.entanglements[h]|1073741824|l&261930}function sn(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var h=31-qt(l),g=1<<h;g&i|n[h]&i&&(n[h]|=i),l&=~g}}function hn(n,i){var l=i&-i;return l=(l&42)!==0?1:en(l),(l&(n.suspendedLanes|i))!==0?0:l}function en(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function yn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Qt(){var n=se.p;return n!==0?n:(n=window.event,n===void 0?32:Yv(n.type))}function xn(n,i){var l=se.p;try{return se.p=n,i()}finally{se.p=l}}var Sn=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Sn,qn="__reactProps$"+Sn,vr="__reactContainer$"+Sn,wn="__reactEvents$"+Sn,nn="__reactListeners$"+Sn,mn="__reactHandles$"+Sn,tr="__reactResources$"+Sn,Ne="__reactMarker$"+Sn;function Ie(n){delete n[Ln],delete n[qn],delete n[wn],delete n[nn],delete n[mn]}function rt(n){var i=n[Ln];if(i)return i;for(var l=n.parentNode;l;){if(i=l[vr]||l[Ln]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=Mv(n);n!==null;){if(l=n[Ln])return l;n=Mv(n)}return i}n=l,l=n.parentNode}return null}function Yt(n){if(n=n[Ln]||n[vr]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function $n(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function an(n){var i=n[tr];return i||(i=n[tr]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function $t(n){n[Ne]=!0}var nr=new Set,Zn={};function Ir(n,i){ms(n,i),ms(n+"Capture",i)}function ms(n,i){for(Zn[n]=i,n=0;n<i.length;n++)nr.add(i[n])}var ei=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ms={},Us={};function Hs(n){return Le.call(Us,n)?!0:Le.call(Ms,n)?!1:ei.test(n)?Us[n]=!0:(Ms[n]=!0,!1)}function qr(n,i,l){if(Hs(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function ti(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function gs(n,i,l,h){if(h===null)n.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+h)}}function Tn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Il(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function fi(n,i,l){var h=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,w=h.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(L){l=""+L,w.call(this,L)}}),Object.defineProperty(n,i,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(L){l=""+L},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Xi(n){if(!n._valueTracker){var i=Il(n)?"checked":"value";n._valueTracker=fi(n,i,""+n[i])}}function yo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return n&&(h=Il(n)?n.checked?"true":"false":n.value),n=h,n!==l?(i.setValue(n),!0):!1}function bs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var jr=/[\n"\\]/g;function yr(n){return n.replace(jr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function xo(n,i,l,h,g,w,L,te){n.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?n.type=L:n.removeAttribute("type"),i!=null?L==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Tn(i)):n.value!==""+Tn(i)&&(n.value=""+Tn(i)):L!=="submit"&&L!=="reset"||n.removeAttribute("value"),i!=null?$o(n,L,Tn(i)):l!=null?$o(n,L,Tn(l)):h!=null&&n.removeAttribute("value"),g==null&&w!=null&&(n.defaultChecked=!!w),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?n.name=""+Tn(te):n.removeAttribute("name")}function Vl(n,i,l,h,g,w,L,te){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),i!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){Xi(n);return}l=l!=null?""+Tn(l):"",i=i!=null?""+Tn(i):l,te||i===n.value||(n.value=i),n.defaultValue=i}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,n.checked=te?n.checked:!!h,n.defaultChecked=!!h,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(n.name=L),Xi(n)}function $o(n,i,l){i==="number"&&bs(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function vs(n,i,l,h){if(n=n.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=i.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&h&&(n[l].defaultSelected=!0)}else{for(l=""+Tn(l),i=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function Zo(n,i,l){if(i!=null&&(i=""+Tn(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+Tn(l):""}function Dc(n,i,l,h){if(i==null){if(h!=null){if(l!=null)throw Error(s(92));if(he(h)){if(1<h.length)throw Error(s(93));h=h[0]}l=h}l==null&&(l=""),i=l}l=Tn(i),n.defaultValue=l,h=n.textContent,h===l&&h!==""&&h!==null&&(n.value=h),Xi(n)}function $i(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Qo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cu(n,i,l){var h=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":h?n.setProperty(i,l):typeof l!="number"||l===0||Qo.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function Tu(n,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?n.setProperty(h,""):h==="float"?n.cssFloat="":n[h]="");for(var g in i)h=i[g],i.hasOwnProperty(g)&&l[g]!==h&&Cu(n,g,h)}else for(var w in i)i.hasOwnProperty(w)&&Cu(n,w,i[w])}function Rc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ic=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ku=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ni(n){return ku.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Zi(){}var Oa=null;function Ko(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var wo=null,Ut=null;function ju(n){var i=Yt(n);if(i&&(n=i.stateNode)){var l=n[qn]||null;e:switch(n=i.stateNode,i.type){case"input":if(xo(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+yr(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==n&&h.form===n.form){var g=h[qn]||null;if(!g)throw Error(s(90));xo(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<l.length;i++)h=l[i],h.form===n.form&&yo(h)}break e;case"textarea":Zo(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&vs(n,!!l.multiple,i,!1)}}}var Vc=!1;function Eu(n,i,l){if(Vc)return n(i,l);Vc=!0;try{var h=n(i);return h}finally{if(Vc=!1,(wo!==null||Ut!==null)&&(Jd(),wo&&(i=wo,n=Ut,Ut=wo=null,ju(i),n)))for(i=0;i<n.length;i++)ju(n[i])}}function di(n,i){var l=n.stateNode;if(l===null)return null;var h=l[qn]||null;if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fc=!1;if(ys)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){Fc=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{Fc=!1}var pi=null,el=null,fa=null;function Mu(){if(fa)return fa;var n,i=el,l=i.length,h,g="value"in pi?pi.value:pi.textContent,w=g.length;for(n=0;n<l&&i[n]===g[n];n++);var L=l-n;for(h=1;h<=L&&i[l-h]===g[w-h];h++);return fa=g.slice(n,1<h?1-h:void 0)}function Ni(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Fl(){return!0}function Bl(){return!1}function as(n){function i(l,h,g,w,L){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=w,this.target=L,this.currentTarget=null;for(var te in n)n.hasOwnProperty(te)&&(l=n[te],this[te]=l?l(w):w[te]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Fl:Bl,this.isPropagationStopped=Bl,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),i}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ai=as(da),Da=y({},da,{view:0,detail:0}),zl=as(Da),tl,Ra,Ia,nl=y({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xt,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ia&&(Ia&&n.type==="mousemove"?(tl=n.screenX-Ia.screenX,Ra=n.screenY-Ia.screenY):Ra=tl=0,Ia=n),tl)},movementY:function(n){return"movementY"in n?n.movementY:Ra}}),Bc=as(nl),Va=y({},nl,{dataTransfer:0}),Fa=as(Va),Lu=y({},Da,{relatedTarget:0}),Ba=as(Lu),Ou=y({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),S=as(Ou),q=y({},da,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ue=as(q),be=y({},da,{data:0}),Ae=as(be),Ge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},et={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},At={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lt(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=At[n])?!!i[n]:!1}function Xt(){return Lt}var on=y({},Da,{key:function(n){if(n.key){var i=Ge[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ni(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?et[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xt,charCode:function(n){return n.type==="keypress"?Ni(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ni(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),On=as(on),xr=y({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vr=as(xr),rr=y({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xt}),Jr=as(rr),Ur=y({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),xs=as(Ur),za=y({},nl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Qi=as(za),Pa=y({},da,{newState:0,oldState:0}),zc=as(Pa),Pl=[9,13,27,32],pa=ys&&"CompositionEvent"in window,Ki=null;ys&&"documentMode"in document&&(Ki=document.documentMode);var rl=ys&&"TextEvent"in window&&!Ki,qa=ys&&(!pa||Ki&&8<Ki&&11>=Ki),os=" ",_o=!1;function So(n,i){switch(n){case"keyup":return Pl.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ql(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ma=!1;function Gs(n,i){switch(n){case"compositionend":return ql(i);case"keypress":return i.which!==32?null:(_o=!0,os);case"textInput":return n=i.data,n===os&&_o?null:n;default:return null}}function Ua(n,i){if(ma)return n==="compositionend"||!pa&&So(n,i)?(n=Mu(),fa=el=pi=null,ma=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return qa&&i.locale!=="ko"?null:i.data;default:return null}}var Ul={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ul[n.type]:i==="textarea"}function mi(n,i,l,h){wo?Ut?Ut.push(h):Ut=[h]:wo=h,i=a1(i,"onChange"),0<i.length&&(l=new Ai("onChange","change",null,l,h),n.push({event:l,listeners:i}))}var Ji=null,Ha=null;function qc(n){bv(n,0)}function ea(n){var i=$n(n);if(yo(i))return n}function No(n,i){if(n==="change")return i}var ri=!1;if(ys){var Ws;if(ys){var ga="oninput"in document;if(!ga){var ba=document.createElement("div");ba.setAttribute("oninput","return;"),ga=typeof ba.oninput=="function"}Ws=ga}else Ws=!1;ri=Ws&&(!document.documentMode||9<document.documentMode)}function Ga(){Ji&&(Ji.detachEvent("onpropertychange",Hl),Ha=Ji=null)}function Hl(n){if(n.propertyName==="value"&&ea(Ha)){var i=[];mi(i,Ha,n,Ko(n)),Eu(qc,i)}}function Gl(n,i,l){n==="focusin"?(Ga(),Ji=i,Ha=l,Ji.attachEvent("onpropertychange",Hl)):n==="focusout"&&Ga()}function Fr(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ea(Ha)}function Du(n,i){if(n==="click")return ea(i)}function va(n,i){if(n==="input"||n==="change")return ea(i)}function ya(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var ws=typeof Object.is=="function"?Object.is:ya;function Wa(n,i){if(ws(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!Le.call(i,g)||!ws(n[g],i[g]))return!1}return!0}function Wl(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Yl(n,i){var l=Wl(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=i&&h>=i)return{node:l,offset:i-n};n=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Wl(l)}}function Ya(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ya(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Xa(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=bs(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=bs(n.document)}return i}function xa(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var sl=ys&&"documentMode"in document&&11>=document.documentMode,gi=null,$a=null,Ls=null,Ci=!1;function zn(n,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ci||gi==null||gi!==bs(h)||(h=gi,"selectionStart"in h&&xa(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ls&&Wa(Ls,h)||(Ls=h,h=a1($a,"onSelect"),0<h.length&&(i=new Ai("onSelect","select",null,i,l),n.push({event:i,listeners:h}),i.target=gi)))}function Dn(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var sr={animationend:Dn("Animation","AnimationEnd"),animationiteration:Dn("Animation","AnimationIteration"),animationstart:Dn("Animation","AnimationStart"),transitionrun:Dn("Transition","TransitionRun"),transitionstart:Dn("Transition","TransitionStart"),transitioncancel:Dn("Transition","TransitionCancel"),transitionend:Dn("Transition","TransitionEnd")},Br={},wa={};ys&&(wa=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function ta(n){if(Br[n])return Br[n];if(!sr[n])return n;var i=sr[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in wa)return Br[n]=i[l];return n}var il=ta("animationend"),Uc=ta("animationiteration"),Qh=ta("animationstart"),jd=ta("transitionrun"),Ed=ta("transitionstart"),Md=ta("transitioncancel"),Kh=ta("transitionend"),Jh=new Map,al="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");al.push("scrollEnd");function Ti(n,i){Jh.set(n,i),Ir(i,[n])}var Hc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},bi=[],ol=0,Ru=0;function Gc(){for(var n=ol,i=Ru=ol=0;i<n;){var l=bi[i];bi[i++]=null;var h=bi[i];bi[i++]=null;var g=bi[i];bi[i++]=null;var w=bi[i];if(bi[i++]=null,h!==null&&g!==null){var L=h.pending;L===null?g.next=g:(g.next=L.next,L.next=g),h.pending=g}w!==0&&Yc(l,g,w)}}function Wc(n,i,l,h){bi[ol++]=n,bi[ol++]=i,bi[ol++]=l,bi[ol++]=h,Ru|=h,n.lanes|=h,n=n.alternate,n!==null&&(n.lanes|=h)}function Iu(n,i,l,h){return Wc(n,i,l,h),Os(n)}function Za(n,i){return Wc(n,null,null,i),Os(n)}function Yc(n,i,l){n.lanes|=l;var h=n.alternate;h!==null&&(h.lanes|=l);for(var g=!1,w=n.return;w!==null;)w.childLanes|=l,h=w.alternate,h!==null&&(h.childLanes|=l),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(g=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,g&&i!==null&&(g=31-qt(l),n=w.hiddenUpdates,h=n[g],h===null?n[g]=[i]:h.push(i),i.lane=l|536870912),w):null}function Os(n){if(50<_f)throw _f=0,R0=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var _s={};function Vu(n,i,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(n,i,l,h){return new Vu(n,i,l,h)}function Fu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ki(n,i){var l=n.alternate;return l===null?(l=Ds(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Xc(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Xl(n,i,l,h,g,w){var L=0;if(h=n,typeof n=="function")Fu(n)&&(L=1);else if(typeof n=="string")L=m_(n,l,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case z:return n=Ds(31,l,i,g),n.elementType=z,n.lanes=w,n;case A:return Ao(l.children,g,w,i);case k:L=8,g|=24;break;case T:return n=Ds(12,l,i,g|2),n.elementType=T,n.lanes=w,n;case B:return n=Ds(13,l,i,g),n.elementType=B,n.lanes=w,n;case W:return n=Ds(19,l,i,g),n.elementType=W,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:L=10;break e;case R:L=9;break e;case F:L=11;break e;case Y:L=14;break e;case O:L=16,h=null;break e}L=29,l=Error(s(130,n===null?"null":typeof n,"")),h=null}return i=Ds(L,l,i,g),i.elementType=n,i.type=h,i.lanes=w,i}function Ao(n,i,l,h){return n=Ds(7,n,h,i),n.lanes=l,n}function $c(n,i,l){return n=Ds(6,n,null,i),n.lanes=l,n}function Bu(n){var i=Ds(18,null,null,0);return i.stateNode=n,i}function $l(n,i,l){return i=Ds(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var zu=new WeakMap;function ji(n,i){if(typeof n=="object"&&n!==null){var l=zu.get(n);return l!==void 0?l:(i={value:n,source:i,stack:Ke(i)},zu.set(n,i),i)}return{value:n,source:i,stack:Ke(i)}}var Zl=[],ll=0,Pu=null,Zc=0,Ei=[],Mi=0,Co=null,Li=1,Oi="";function vi(n,i){Zl[ll++]=Zc,Zl[ll++]=Pu,Pu=n,Zc=i}function Ld(n,i,l){Ei[Mi++]=Li,Ei[Mi++]=Oi,Ei[Mi++]=Co,Co=n;var h=Li;n=Oi;var g=32-qt(h)-1;h&=~(1<<g),l+=1;var w=32-qt(i)+g;if(30<w){var L=g-g%5;w=(h&(1<<L)-1).toString(32),h>>=L,g-=L,Li=1<<32-qt(i)+g|l<<g|h,Oi=w+n}else Li=1<<w|l<<g|h,Oi=n}function ef(n){n.return!==null&&(vi(n,1),Ld(n,1,0))}function qu(n){for(;n===Pu;)Pu=Zl[--ll],Zl[ll]=null,Zc=Zl[--ll],Zl[ll]=null;for(;n===Co;)Co=Ei[--Mi],Ei[Mi]=null,Oi=Ei[--Mi],Ei[Mi]=null,Li=Ei[--Mi],Ei[Mi]=null}function Od(n,i){Ei[Mi++]=Li,Ei[Mi++]=Oi,Ei[Mi++]=Co,Li=i.id,Oi=i.overflow,Co=n}var Ss=null,hr=null,Nn=!1,Ys=null,Er=!1,na=Error(s(519));function To(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ql(ji(i,n)),na}function tf(n){var i=n.stateNode,l=n.type,h=n.memoizedProps;switch(i[Ln]=n,i[qn]=h,l){case"dialog":Cn("cancel",i),Cn("close",i);break;case"iframe":case"object":case"embed":Cn("load",i);break;case"video":case"audio":for(l=0;l<Nf.length;l++)Cn(Nf[l],i);break;case"source":Cn("error",i);break;case"img":case"image":case"link":Cn("error",i),Cn("load",i);break;case"details":Cn("toggle",i);break;case"input":Cn("invalid",i),Vl(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Cn("invalid",i);break;case"textarea":Cn("invalid",i),Dc(i,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||h.suppressHydrationWarning===!0||wv(i.textContent,l)?(h.popover!=null&&(Cn("beforetoggle",i),Cn("toggle",i)),h.onScroll!=null&&Cn("scroll",i),h.onScrollEnd!=null&&Cn("scrollend",i),h.onClick!=null&&(i.onclick=Zi),i=!0):i=!1,i||To(n,!0)}function Qa(n){for(Ss=n.return;Ss;)switch(Ss.tag){case 5:case 31:case 13:Er=!1;return;case 27:case 3:Er=!0;return;default:Ss=Ss.return}}function Ns(n){if(n!==Ss)return!1;if(!Nn)return Qa(n),Nn=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Z0(n.type,n.memoizedProps)),l=!l),l&&hr&&To(n),Qa(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));hr=Ev(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));hr=Ev(n)}else i===27?(i=hr,hc(n.type)?(n=tm,tm=null,hr=n):hr=i):hr=Ss?Aa(n.stateNode.nextSibling):null;return!0}function cl(){hr=Ss=null,Nn=!1}function nf(){var n=Ys;return n!==null&&(Bi===null?Bi=n:Bi.push.apply(Bi,n),Ys=null),n}function Ql(n){Ys===null?Ys=[n]:Ys.push(n)}var Uu=G(null),ko=null,_a=null;function jo(n,i,l){P(Uu,i._currentValue),i._currentValue=l}function Di(n){n._currentValue=Uu.current,j(Uu)}function Kl(n,i,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),n===l)break;n=n.return}}function ul(n,i,l,h){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var w=g.dependencies;if(w!==null){var L=g.child;w=w.firstContext;e:for(;w!==null;){var te=w;w=g;for(var ge=0;ge<i.length;ge++)if(te.context===i[ge]){w.lanes|=l,te=w.alternate,te!==null&&(te.lanes|=l),Kl(w.return,l,n),h||(L=null);break e}w=te.next}}else if(g.tag===18){if(L=g.return,L===null)throw Error(s(341));L.lanes|=l,w=L.alternate,w!==null&&(w.lanes|=l),Kl(L,l,n),L=null}else L=g.child;if(L!==null)L.return=g;else for(L=g;L!==null;){if(L===n){L=null;break}if(g=L.sibling,g!==null){g.return=L.return,L=g;break}L=L.return}g=L}}function Eo(n,i,l,h){n=null;for(var g=i,w=!1;g!==null;){if(!w){if((g.flags&524288)!==0)w=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var L=g.alternate;if(L===null)throw Error(s(387));if(L=L.memoizedProps,L!==null){var te=g.type;ws(g.pendingProps.value,L.value)||(n!==null?n.push(te):n=[te])}}else if(g===fe.current){if(L=g.alternate,L===null)throw Error(s(387));L.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(jf):n=[jf])}g=g.return}n!==null&&ul(i,n,l,h),i.flags|=262144}function Hu(n){for(n=n.firstContext;n!==null;){if(!ws(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Mo(n){ko=n,_a=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function As(n){return Dd(ko,n)}function Gu(n,i){return ko===null&&Mo(n),Dd(n,i)}function Dd(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},_a===null){if(n===null)throw Error(s(308));_a=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else _a=_a.next=i;return l}var e0=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,h){n.push(h)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},t0=r.unstable_scheduleCallback,n0=r.unstable_NormalPriority,zr={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jl(){return{controller:new e0,data:new Map,refCount:0}}function Qc(n){n.refCount--,n.refCount===0&&t0(n0,function(){n.controller.abort()})}var Kc=null,Wu=0,p=0,v=null;function C(n,i){if(Kc===null){var l=Kc=[];Wu=0,p=P0(),v={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Wu++,i.then(E,E),i}function E(){if(--Wu===0&&Kc!==null){v!==null&&(v.status="fulfilled");var n=Kc;Kc=null,p=0,v=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function U(n,i){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return n.then(function(){h.status="fulfilled",h.value=i;for(var g=0;g<l.length;g++)(0,l[g])(i)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var Z=I.S;I.S=function(n,i){Gb=Be(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&C(n,i),Z!==null&&Z(n,i)};var K=G(null);function ne(){var n=K.current;return n!==null?n:dr.pooledCache}function ae(n,i){i===null?P(K,K.current):P(K,i.pool)}function ce(){var n=ne();return n===null?null:{parent:zr._currentValue,pool:n}}var ve=Error(s(460)),je=Error(s(474)),le=Error(s(542)),_e={then:function(){}};function Te(n){return n=n.status,n==="fulfilled"||n==="rejected"}function qe(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(Zi,Zi),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,st(n),n;default:if(typeof i.status=="string")i.then(Zi,Zi);else{if(n=dr,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(h){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=h}},function(h){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,st(n),n}throw ze=i,ve}}function ke(n){try{var i=n._init;return i(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ze=l,ve):l}}var ze=null;function We(){if(ze===null)throw Error(s(459));var n=ze;return ze=null,n}function st(n){if(n===ve||n===le)throw Error(s(483))}var Qe=null,Tt=0;function wt(n){var i=Tt;return Tt+=1,Qe===null&&(Qe=[]),qe(Qe,n,i)}function Kt(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Nt(n,i){throw i.$$typeof===_?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function _n(n){function i(Ce,we){if(n){var Ee=Ce.deletions;Ee===null?(Ce.deletions=[we],Ce.flags|=16):Ee.push(we)}}function l(Ce,we){if(!n)return null;for(;we!==null;)i(Ce,we),we=we.sibling;return null}function h(Ce){for(var we=new Map;Ce!==null;)Ce.key!==null?we.set(Ce.key,Ce):we.set(Ce.index,Ce),Ce=Ce.sibling;return we}function g(Ce,we){return Ce=ki(Ce,we),Ce.index=0,Ce.sibling=null,Ce}function w(Ce,we,Ee){return Ce.index=Ee,n?(Ee=Ce.alternate,Ee!==null?(Ee=Ee.index,Ee<we?(Ce.flags|=67108866,we):Ee):(Ce.flags|=67108866,we)):(Ce.flags|=1048576,we)}function L(Ce){return n&&Ce.alternate===null&&(Ce.flags|=67108866),Ce}function te(Ce,we,Ee,$e){return we===null||we.tag!==6?(we=$c(Ee,Ce.mode,$e),we.return=Ce,we):(we=g(we,Ee),we.return=Ce,we)}function ge(Ce,we,Ee,$e){var Pt=Ee.type;return Pt===A?He(Ce,we,Ee.props.children,$e,Ee.key):we!==null&&(we.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===O&&ke(Pt)===we.type)?(we=g(we,Ee.props),Kt(we,Ee),we.return=Ce,we):(we=Xl(Ee.type,Ee.key,Ee.props,null,Ce.mode,$e),Kt(we,Ee),we.return=Ce,we)}function Me(Ce,we,Ee,$e){return we===null||we.tag!==4||we.stateNode.containerInfo!==Ee.containerInfo||we.stateNode.implementation!==Ee.implementation?(we=$l(Ee,Ce.mode,$e),we.return=Ce,we):(we=g(we,Ee.children||[]),we.return=Ce,we)}function He(Ce,we,Ee,$e,Pt){return we===null||we.tag!==7?(we=Ao(Ee,Ce.mode,$e,Pt),we.return=Ce,we):(we=g(we,Ee),we.return=Ce,we)}function Ze(Ce,we,Ee){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=$c(""+we,Ce.mode,Ee),we.return=Ce,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case b:return Ee=Xl(we.type,we.key,we.props,null,Ce.mode,Ee),Kt(Ee,we),Ee.return=Ce,Ee;case N:return we=$l(we,Ce.mode,Ee),we.return=Ce,we;case O:return we=ke(we),Ze(Ce,we,Ee)}if(he(we)||V(we))return we=Ao(we,Ce.mode,Ee,null),we.return=Ce,we;if(typeof we.then=="function")return Ze(Ce,wt(we),Ee);if(we.$$typeof===D)return Ze(Ce,Gu(Ce,we),Ee);Nt(Ce,we)}return null}function De(Ce,we,Ee,$e){var Pt=we!==null?we.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Pt!==null?null:te(Ce,we,""+Ee,$e);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case b:return Ee.key===Pt?ge(Ce,we,Ee,$e):null;case N:return Ee.key===Pt?Me(Ce,we,Ee,$e):null;case O:return Ee=ke(Ee),De(Ce,we,Ee,$e)}if(he(Ee)||V(Ee))return Pt!==null?null:He(Ce,we,Ee,$e,null);if(typeof Ee.then=="function")return De(Ce,we,wt(Ee),$e);if(Ee.$$typeof===D)return De(Ce,we,Gu(Ce,Ee),$e);Nt(Ce,Ee)}return null}function Ve(Ce,we,Ee,$e,Pt){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Ce=Ce.get(Ee)||null,te(we,Ce,""+$e,Pt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case b:return Ce=Ce.get($e.key===null?Ee:$e.key)||null,ge(we,Ce,$e,Pt);case N:return Ce=Ce.get($e.key===null?Ee:$e.key)||null,Me(we,Ce,$e,Pt);case O:return $e=ke($e),Ve(Ce,we,Ee,$e,Pt)}if(he($e)||V($e))return Ce=Ce.get(Ee)||null,He(we,Ce,$e,Pt,null);if(typeof $e.then=="function")return Ve(Ce,we,Ee,wt($e),Pt);if($e.$$typeof===D)return Ve(Ce,we,Ee,Gu(we,$e),Pt);Nt(we,$e)}return null}function Ct(Ce,we,Ee,$e){for(var Pt=null,Un=null,Ot=we,gn=we=0,jn=null;Ot!==null&&gn<Ee.length;gn++){Ot.index>gn?(jn=Ot,Ot=null):jn=Ot.sibling;var Hn=De(Ce,Ot,Ee[gn],$e);if(Hn===null){Ot===null&&(Ot=jn);break}n&&Ot&&Hn.alternate===null&&i(Ce,Ot),we=w(Hn,we,gn),Un===null?Pt=Hn:Un.sibling=Hn,Un=Hn,Ot=jn}if(gn===Ee.length)return l(Ce,Ot),Nn&&vi(Ce,gn),Pt;if(Ot===null){for(;gn<Ee.length;gn++)Ot=Ze(Ce,Ee[gn],$e),Ot!==null&&(we=w(Ot,we,gn),Un===null?Pt=Ot:Un.sibling=Ot,Un=Ot);return Nn&&vi(Ce,gn),Pt}for(Ot=h(Ot);gn<Ee.length;gn++)jn=Ve(Ot,Ce,gn,Ee[gn],$e),jn!==null&&(n&&jn.alternate!==null&&Ot.delete(jn.key===null?gn:jn.key),we=w(jn,we,gn),Un===null?Pt=jn:Un.sibling=jn,Un=jn);return n&&Ot.forEach(function(gc){return i(Ce,gc)}),Nn&&vi(Ce,gn),Pt}function Gt(Ce,we,Ee,$e){if(Ee==null)throw Error(s(151));for(var Pt=null,Un=null,Ot=we,gn=we=0,jn=null,Hn=Ee.next();Ot!==null&&!Hn.done;gn++,Hn=Ee.next()){Ot.index>gn?(jn=Ot,Ot=null):jn=Ot.sibling;var gc=De(Ce,Ot,Hn.value,$e);if(gc===null){Ot===null&&(Ot=jn);break}n&&Ot&&gc.alternate===null&&i(Ce,Ot),we=w(gc,we,gn),Un===null?Pt=gc:Un.sibling=gc,Un=gc,Ot=jn}if(Hn.done)return l(Ce,Ot),Nn&&vi(Ce,gn),Pt;if(Ot===null){for(;!Hn.done;gn++,Hn=Ee.next())Hn=Ze(Ce,Hn.value,$e),Hn!==null&&(we=w(Hn,we,gn),Un===null?Pt=Hn:Un.sibling=Hn,Un=Hn);return Nn&&vi(Ce,gn),Pt}for(Ot=h(Ot);!Hn.done;gn++,Hn=Ee.next())Hn=Ve(Ot,Ce,gn,Hn.value,$e),Hn!==null&&(n&&Hn.alternate!==null&&Ot.delete(Hn.key===null?gn:Hn.key),we=w(Hn,we,gn),Un===null?Pt=Hn:Un.sibling=Hn,Un=Hn);return n&&Ot.forEach(function(C_){return i(Ce,C_)}),Nn&&vi(Ce,gn),Pt}function lr(Ce,we,Ee,$e){if(typeof Ee=="object"&&Ee!==null&&Ee.type===A&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case b:e:{for(var Pt=Ee.key;we!==null;){if(we.key===Pt){if(Pt=Ee.type,Pt===A){if(we.tag===7){l(Ce,we.sibling),$e=g(we,Ee.props.children),$e.return=Ce,Ce=$e;break e}}else if(we.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===O&&ke(Pt)===we.type){l(Ce,we.sibling),$e=g(we,Ee.props),Kt($e,Ee),$e.return=Ce,Ce=$e;break e}l(Ce,we);break}else i(Ce,we);we=we.sibling}Ee.type===A?($e=Ao(Ee.props.children,Ce.mode,$e,Ee.key),$e.return=Ce,Ce=$e):($e=Xl(Ee.type,Ee.key,Ee.props,null,Ce.mode,$e),Kt($e,Ee),$e.return=Ce,Ce=$e)}return L(Ce);case N:e:{for(Pt=Ee.key;we!==null;){if(we.key===Pt)if(we.tag===4&&we.stateNode.containerInfo===Ee.containerInfo&&we.stateNode.implementation===Ee.implementation){l(Ce,we.sibling),$e=g(we,Ee.children||[]),$e.return=Ce,Ce=$e;break e}else{l(Ce,we);break}else i(Ce,we);we=we.sibling}$e=$l(Ee,Ce.mode,$e),$e.return=Ce,Ce=$e}return L(Ce);case O:return Ee=ke(Ee),lr(Ce,we,Ee,$e)}if(he(Ee))return Ct(Ce,we,Ee,$e);if(V(Ee)){if(Pt=V(Ee),typeof Pt!="function")throw Error(s(150));return Ee=Pt.call(Ee),Gt(Ce,we,Ee,$e)}if(typeof Ee.then=="function")return lr(Ce,we,wt(Ee),$e);if(Ee.$$typeof===D)return lr(Ce,we,Gu(Ce,Ee),$e);Nt(Ce,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,we!==null&&we.tag===6?(l(Ce,we.sibling),$e=g(we,Ee),$e.return=Ce,Ce=$e):(l(Ce,we),$e=$c(Ee,Ce.mode,$e),$e.return=Ce,Ce=$e),L(Ce)):l(Ce,we)}return function(Ce,we,Ee,$e){try{Tt=0;var Pt=lr(Ce,we,Ee,$e);return Qe=null,Pt}catch(Ot){if(Ot===ve||Ot===le)throw Ot;var Un=Ds(29,Ot,null,Ce.mode);return Un.lanes=$e,Un.return=Ce,Un}finally{}}}var fr=_n(!0),ln=_n(!1),_t=!1;function ft(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wr(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ht(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function fn(n,i,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Yn&2)!==0){var g=h.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),h.pending=i,i=Os(n),Yc(n,null,l),i}return Wc(n,h,i,l),Os(n)}function Gn(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,sn(n,l)}}function es(n,i){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var L={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?g=w=L:w=w.next=L,l=l.next}while(l!==null);w===null?g=w=i:w=w.next=i}else g=w=i;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var Cs=!1;function ir(){if(Cs){var n=v;if(n!==null)throw n}}function Hr(n,i,l,h){Cs=!1;var g=n.updateQueue;_t=!1;var w=g.firstBaseUpdate,L=g.lastBaseUpdate,te=g.shared.pending;if(te!==null){g.shared.pending=null;var ge=te,Me=ge.next;ge.next=null,L===null?w=Me:L.next=Me,L=ge;var He=n.alternate;He!==null&&(He=He.updateQueue,te=He.lastBaseUpdate,te!==L&&(te===null?He.firstBaseUpdate=Me:te.next=Me,He.lastBaseUpdate=ge))}if(w!==null){var Ze=g.baseState;L=0,He=Me=ge=null,te=w;do{var De=te.lane&-536870913,Ve=De!==te.lane;if(Ve?(kn&De)===De:(h&De)===De){De!==0&&De===p&&(Cs=!0),He!==null&&(He=He.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var Ct=n,Gt=te;De=i;var lr=l;switch(Gt.tag){case 1:if(Ct=Gt.payload,typeof Ct=="function"){Ze=Ct.call(lr,Ze,De);break e}Ze=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Gt.payload,De=typeof Ct=="function"?Ct.call(lr,Ze,De):Ct,De==null)break e;Ze=y({},Ze,De);break e;case 2:_t=!0}}De=te.callback,De!==null&&(n.flags|=64,Ve&&(n.flags|=8192),Ve=g.callbacks,Ve===null?g.callbacks=[De]:Ve.push(De))}else Ve={lane:De,tag:te.tag,payload:te.payload,callback:te.callback,next:null},He===null?(Me=He=Ve,ge=Ze):He=He.next=Ve,L|=De;if(te=te.next,te===null){if(te=g.shared.pending,te===null)break;Ve=te,te=Ve.next,Ve.next=null,g.lastBaseUpdate=Ve,g.shared.pending=null}}while(!0);He===null&&(ge=Ze),g.baseState=ge,g.firstBaseUpdate=Me,g.lastBaseUpdate=He,w===null&&(g.shared.lanes=0),ac|=L,n.lanes=L,n.memoizedState=Ze}}function Rs(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Gr(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Rs(l[n],i)}var vn=G(null),Vn=G(0);function _r(n,i){n=xl,P(Vn,n),P(vn,i),xl=n|i.baseLanes}function Pn(){P(Vn,xl),P(vn,vn.current)}function ts(){xl=Vn.current,j(vn),j(Vn)}var Sr=G(null),Fn=null;function Pr(n){var i=n.alternate;P(Rn,Rn.current&1),P(Sr,n),Fn===null&&(i===null||vn.current!==null||i.memoizedState!==null)&&(Fn=n)}function Wn(n){P(Rn,Rn.current),P(Sr,n),Fn===null&&(Fn=n)}function Wr(n){n.tag===22?(P(Rn,Rn.current),P(Sr,n),Fn===null&&(Fn=n)):Yr()}function Yr(){P(Rn,Rn.current),P(Sr,Sr.current)}function Qn(n){j(Sr),Fn===n&&(Fn=null),j(Rn)}var Rn=G(0);function Is(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||J0(l)||em(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Mr=0,Bt=null,zt=null,Bn=null,si=!1,Ri=!1,Xs=!1,Xr=0,Lo=0,Oo=null,Yu=0;function ar(){throw Error(s(321))}function rf(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!ws(n[l],i[l]))return!1;return!0}function sf(n,i,l,h,g,w){return Mr=w,Bt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,I.H=n===null||n.memoizedState===null?nb:u0,Xs=!1,w=l(h,g),Xs=!1,Ri&&(w=Ka(i,l,h,g)),Xu(n),w}function Xu(n){I.H=df;var i=zt!==null&&zt.next!==null;if(Mr=0,Bn=zt=Bt=null,si=!1,Lo=0,Oo=null,i)throw Error(s(300));n===null||cs||(n=n.dependencies,n!==null&&Hu(n)&&(cs=!0))}function Ka(n,i,l,h){Bt=n;var g=0;do{if(Ri&&(Oo=null),Lo=0,Ri=!1,25<=g)throw Error(s(301));if(g+=1,Bn=zt=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}I.H=rb,w=i(l,h)}while(Ri);return w}function r0(){var n=I.H,i=n.useState()[0];return i=typeof i.then=="function"?Do(i):i,n=n.useState()[0],(zt!==null?zt.memoizedState:null)!==n&&(Bt.flags|=1024),i}function af(){var n=Xr!==0;return Xr=0,n}function of(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function $u(n){if(si){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}si=!1}Mr=0,Bn=zt=Bt=null,Ri=!1,Lo=Xr=0,Oo=null}function ls(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?Bt.memoizedState=Bn=n:Bn=Bn.next=n,Bn}function Lr(){if(zt===null){var n=Bt.alternate;n=n!==null?n.memoizedState:null}else n=zt.next;var i=Bn===null?Bt.memoizedState:Bn.next;if(i!==null)Bn=i,zt=n;else{if(n===null)throw Bt.alternate===null?Error(s(467)):Error(s(310));zt=n,n={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Bn===null?Bt.memoizedState=Bn=n:Bn=Bn.next=n}return Bn}function Jc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Do(n){var i=Lo;return Lo+=1,Oo===null&&(Oo=[]),n=qe(Oo,n,i),i=Bt,(Bn===null?i.memoizedState:Bn.next)===null&&(i=i.alternate,I.H=i===null||i.memoizedState===null?nb:u0),n}function ec(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Do(n);if(n.$$typeof===D)return As(n)}throw Error(s(438,String(n)))}function hl(n){var i=null,l=Bt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var h=Bt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Jc(),Bt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),h=0;h<n;h++)l[h]=Q;return i.index++,l}function Sa(n,i){return typeof i=="function"?i(n):i}function Zu(n){var i=Lr();return tc(i,zt,n)}function tc(n,i,l){var h=n.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=l;var g=n.baseQueue,w=h.pending;if(w!==null){if(g!==null){var L=g.next;g.next=w.next,w.next=L}i.baseQueue=g=w,h.pending=null}if(w=n.baseState,g===null)n.memoizedState=w;else{i=g.next;var te=L=null,ge=null,Me=i,He=!1;do{var Ze=Me.lane&-536870913;if(Ze!==Me.lane?(kn&Ze)===Ze:(Mr&Ze)===Ze){var De=Me.revertLane;if(De===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,gesture:null,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),Ze===p&&(He=!0);else if((Mr&De)===De){Me=Me.next,De===p&&(He=!0);continue}else Ze={lane:0,revertLane:Me.revertLane,gesture:null,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null},ge===null?(te=ge=Ze,L=w):ge=ge.next=Ze,Bt.lanes|=De,ac|=De;Ze=Me.action,Xs&&l(w,Ze),w=Me.hasEagerState?Me.eagerState:l(w,Ze)}else De={lane:Ze,revertLane:Me.revertLane,gesture:Me.gesture,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null},ge===null?(te=ge=De,L=w):ge=ge.next=De,Bt.lanes|=Ze,ac|=Ze;Me=Me.next}while(Me!==null&&Me!==i);if(ge===null?L=w:ge.next=te,!ws(w,n.memoizedState)&&(cs=!0,He&&(l=v,l!==null)))throw l;n.memoizedState=w,n.baseState=L,n.baseQueue=ge,h.lastRenderedState=w}return g===null&&(h.lanes=0),[n.memoizedState,h.dispatch]}function Qu(n){var i=Lr(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=n;var h=l.dispatch,g=l.pending,w=i.memoizedState;if(g!==null){l.pending=null;var L=g=g.next;do w=n(w,L.action),L=L.next;while(L!==g);ws(w,i.memoizedState)||(cs=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),l.lastRenderedState=w}return[w,h]}function Ku(n,i,l){var h=Bt,g=Lr(),w=Nn;if(w){if(l===void 0)throw Error(s(407));l=l()}else l=i();var L=!ws((zt||g).memoizedState,l);if(L&&(g.memoizedState=l,cs=!0),g=g.queue,s0(cf.bind(null,h,g,n),[n]),g.getSnapshot!==i||L||Bn!==null&&Bn.memoizedState.tag&1){if(h.flags|=2048,dl(9,{destroy:void 0},lf.bind(null,h,g,l,i),null),dr===null)throw Error(s(349));w||(Mr&127)!==0||Ja(h,i,l)}return l}function Ja(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=Bt.updateQueue,i===null?(i=Jc(),Bt.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function lf(n,i,l,h){i.value=l,i.getSnapshot=h,Rd(i)&&uf(n)}function cf(n,i,l){return l(function(){Rd(i)&&uf(n)})}function Rd(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!ws(n,l)}catch{return!0}}function uf(n){var i=Za(n,2);i!==null&&zi(i,n,2)}function Ro(n){var i=ls();if(typeof n=="function"){var l=n;if(n=l(),Xs){jt(!0);try{l()}finally{jt(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:n},i}function Id(n,i,l,h){return n.baseState=l,tc(n,zt,typeof h=="function"?h:Sa)}function Vd(n,i,l,h,g){if(Pd(n))throw Error(s(485));if(n=i.action,n!==null){var w={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){w.listeners.push(L)}};I.T!==null?l(!0):w.isTransition=!1,h(w),l=i.pending,l===null?(w.next=i.pending=w,Fd(i,w)):(w.next=l.next,i.pending=l.next=w)}}function Fd(n,i){var l=i.action,h=i.payload,g=n.state;if(i.isTransition){var w=I.T,L={};I.T=L;try{var te=l(g,h),ge=I.S;ge!==null&&ge(L,te),hf(n,i,te)}catch(Me){fl(n,i,Me)}finally{w!==null&&L.types!==null&&(w.types=L.types),I.T=w}}else try{w=l(g,h),hf(n,i,w)}catch(Me){fl(n,i,Me)}}function hf(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Bd(n,i,h)},function(h){return fl(n,i,h)}):Bd(n,i,l)}function Bd(n,i,l){i.status="fulfilled",i.value=l,Ju(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,Fd(n,l)))}function fl(n,i,l){var h=n.pending;if(n.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=l,Ju(i),i=i.next;while(i!==h)}n.action=null}function Ju(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function eu(n,i){return i}function Na(n,i){if(Nn){var l=dr.formState;if(l!==null){e:{var h=Bt;if(Nn){if(hr){t:{for(var g=hr,w=Er;g.nodeType!==8;){if(!w){g=null;break t}if(g=Aa(g.nextSibling),g===null){g=null;break t}}w=g.data,g=w==="F!"||w==="F"?g:null}if(g){hr=Aa(g.nextSibling),h=g.data==="F!";break e}}To(h)}h=!1}h&&(i=l[0])}}return l=ls(),l.memoizedState=l.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:i},l.queue=h,l=J2.bind(null,Bt,h),h.dispatch=l,h=Ro(!1),w=c0.bind(null,Bt,!1,h.queue),h=ls(),g={state:i,dispatch:null,action:n,pending:null},h.queue=g,l=Vd.bind(null,Bt,g,w,l),g.dispatch=l,h.memoizedState=n,[i,l,!1]}function eo(n){var i=Lr();return to(i,zt,n)}function to(n,i,l){if(i=tc(n,i,eu)[0],n=Zu(Sa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var h=Do(i)}catch(L){throw L===ve?le:L}else h=i;i=Lr();var g=i.queue,w=g.dispatch;return l!==i.memoizedState&&(Bt.flags|=2048,dl(9,{destroy:void 0},eh.bind(null,g,l),null)),[h,w,n]}function eh(n,i){n.action=i}function th(n){var i=Lr(),l=zt;if(l!==null)return to(i,l,n);Lr(),i=i.memoizedState,l=Lr();var h=l.queue.dispatch;return l.memoizedState=n,[i,h,!1]}function dl(n,i,l,h){return n={tag:n,create:l,deps:h,inst:i,next:null},i=Bt.updateQueue,i===null&&(i=Jc(),Bt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,i.lastEffect=n),n}function zd(){return Lr().memoizedState}function nc(n,i,l,h){var g=ls();Bt.flags|=n,g.memoizedState=dl(1|i,{destroy:void 0},l,h===void 0?null:h)}function rc(n,i,l,h){var g=Lr();h=h===void 0?null:h;var w=g.memoizedState.inst;zt!==null&&h!==null&&rf(h,zt.memoizedState.deps)?g.memoizedState=dl(i,w,l,h):(Bt.flags|=n,g.memoizedState=dl(1|i,w,l,h))}function B2(n,i){nc(8390656,8,n,i)}function s0(n,i){rc(2048,8,n,i)}function x4(n){Bt.flags|=4;var i=Bt.updateQueue;if(i===null)i=Jc(),Bt.updateQueue=i,i.events=[n];else{var l=i.events;l===null?i.events=[n]:l.push(n)}}function z2(n){var i=Lr().memoizedState;return x4({ref:i,nextImpl:n}),function(){if((Yn&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function P2(n,i){return rc(4,2,n,i)}function q2(n,i){return rc(4,4,n,i)}function U2(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function H2(n,i,l){l=l!=null?l.concat([n]):null,rc(4,4,U2.bind(null,i,n),l)}function i0(){}function G2(n,i){var l=Lr();i=i===void 0?null:i;var h=l.memoizedState;return i!==null&&rf(i,h[1])?h[0]:(l.memoizedState=[n,i],n)}function W2(n,i){var l=Lr();i=i===void 0?null:i;var h=l.memoizedState;if(i!==null&&rf(i,h[1]))return h[0];if(h=n(),Xs){jt(!0);try{n()}finally{jt(!1)}}return l.memoizedState=[h,i],h}function a0(n,i,l){return l===void 0||(Mr&1073741824)!==0&&(kn&261930)===0?n.memoizedState=i:(n.memoizedState=l,n=Yb(),Bt.lanes|=n,ac|=n,l)}function Y2(n,i,l,h){return ws(l,i)?l:vn.current!==null?(n=a0(n,l,h),ws(n,i)||(cs=!0),n):(Mr&42)===0||(Mr&1073741824)!==0&&(kn&261930)===0?(cs=!0,n.memoizedState=l):(n=Yb(),Bt.lanes|=n,ac|=n,i)}function X2(n,i,l,h,g){var w=se.p;se.p=w!==0&&8>w?w:8;var L=I.T,te={};I.T=te,c0(n,!1,i,l);try{var ge=g(),Me=I.S;if(Me!==null&&Me(te,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var He=U(ge,h);ff(n,i,He,ia(n))}else ff(n,i,h,ia(n))}catch(Ze){ff(n,i,{then:function(){},status:"rejected",reason:Ze},ia())}finally{se.p=w,L!==null&&te.types!==null&&(L.types=te.types),I.T=L}}function w4(){}function o0(n,i,l,h){if(n.tag!==5)throw Error(s(476));var g=$2(n).queue;X2(n,g,i,ie,l===null?w4:function(){return Z2(n),l(h)})}function $2(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:ie},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Z2(n){var i=$2(n);i.next===null&&(i=n.alternate.memoizedState),ff(n,i.next.queue,{},ia())}function l0(){return As(jf)}function Q2(){return Lr().memoizedState}function K2(){return Lr().memoizedState}function _4(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=ia();n=Ht(l);var h=fn(i,n,l);h!==null&&(zi(h,i,l),Gn(h,i,l)),i={cache:Jl()},n.payload=i;return}i=i.return}}function S4(n,i,l){var h=ia();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Pd(n)?eb(i,l):(l=Iu(n,i,l,h),l!==null&&(zi(l,n,h),tb(l,i,h)))}function J2(n,i,l){var h=ia();ff(n,i,l,h)}function ff(n,i,l,h){var g={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Pd(n))eb(i,g);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var L=i.lastRenderedState,te=w(L,l);if(g.hasEagerState=!0,g.eagerState=te,ws(te,L))return Wc(n,i,g,0),dr===null&&Gc(),!1}catch{}finally{}if(l=Iu(n,i,g,h),l!==null)return zi(l,n,h),tb(l,i,h),!0}return!1}function c0(n,i,l,h){if(h={lane:2,revertLane:P0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Pd(n)){if(i)throw Error(s(479))}else i=Iu(n,l,h,2),i!==null&&zi(i,n,2)}function Pd(n){var i=n.alternate;return n===Bt||i!==null&&i===Bt}function eb(n,i){Ri=si=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function tb(n,i,l){if((l&4194048)!==0){var h=i.lanes;h&=n.pendingLanes,l|=h,i.lanes=l,sn(n,l)}}var df={readContext:As,use:ec,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useLayoutEffect:ar,useInsertionEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useSyncExternalStore:ar,useId:ar,useHostTransitionStatus:ar,useFormState:ar,useActionState:ar,useOptimistic:ar,useMemoCache:ar,useCacheRefresh:ar};df.useEffectEvent=ar;var nb={readContext:As,use:ec,useCallback:function(n,i){return ls().memoizedState=[n,i===void 0?null:i],n},useContext:As,useEffect:B2,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,nc(4194308,4,U2.bind(null,i,n),l)},useLayoutEffect:function(n,i){return nc(4194308,4,n,i)},useInsertionEffect:function(n,i){nc(4,2,n,i)},useMemo:function(n,i){var l=ls();i=i===void 0?null:i;var h=n();if(Xs){jt(!0);try{n()}finally{jt(!1)}}return l.memoizedState=[h,i],h},useReducer:function(n,i,l){var h=ls();if(l!==void 0){var g=l(i);if(Xs){jt(!0);try{l(i)}finally{jt(!1)}}}else g=i;return h.memoizedState=h.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},h.queue=n,n=n.dispatch=S4.bind(null,Bt,n),[h.memoizedState,n]},useRef:function(n){var i=ls();return n={current:n},i.memoizedState=n},useState:function(n){n=Ro(n);var i=n.queue,l=J2.bind(null,Bt,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:i0,useDeferredValue:function(n,i){var l=ls();return a0(l,n,i)},useTransition:function(){var n=Ro(!1);return n=X2.bind(null,Bt,n.queue,!0,!1),ls().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var h=Bt,g=ls();if(Nn){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),dr===null)throw Error(s(349));(kn&127)!==0||Ja(h,i,l)}g.memoizedState=l;var w={value:l,getSnapshot:i};return g.queue=w,B2(cf.bind(null,h,w,n),[n]),h.flags|=2048,dl(9,{destroy:void 0},lf.bind(null,h,w,l,i),null),l},useId:function(){var n=ls(),i=dr.identifierPrefix;if(Nn){var l=Oi,h=Li;l=(h&~(1<<32-qt(h)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Xr++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=Yu++,i="_"+i+"r_"+l.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:l0,useFormState:Na,useActionState:Na,useOptimistic:function(n){var i=ls();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=c0.bind(null,Bt,!0,l),l.dispatch=i,[n,i]},useMemoCache:hl,useCacheRefresh:function(){return ls().memoizedState=_4.bind(null,Bt)},useEffectEvent:function(n){var i=ls(),l={impl:n};return i.memoizedState=l,function(){if((Yn&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},u0={readContext:As,use:ec,useCallback:G2,useContext:As,useEffect:s0,useImperativeHandle:H2,useInsertionEffect:P2,useLayoutEffect:q2,useMemo:W2,useReducer:Zu,useRef:zd,useState:function(){return Zu(Sa)},useDebugValue:i0,useDeferredValue:function(n,i){var l=Lr();return Y2(l,zt.memoizedState,n,i)},useTransition:function(){var n=Zu(Sa)[0],i=Lr().memoizedState;return[typeof n=="boolean"?n:Do(n),i]},useSyncExternalStore:Ku,useId:Q2,useHostTransitionStatus:l0,useFormState:eo,useActionState:eo,useOptimistic:function(n,i){var l=Lr();return Id(l,zt,n,i)},useMemoCache:hl,useCacheRefresh:K2};u0.useEffectEvent=z2;var rb={readContext:As,use:ec,useCallback:G2,useContext:As,useEffect:s0,useImperativeHandle:H2,useInsertionEffect:P2,useLayoutEffect:q2,useMemo:W2,useReducer:Qu,useRef:zd,useState:function(){return Qu(Sa)},useDebugValue:i0,useDeferredValue:function(n,i){var l=Lr();return zt===null?a0(l,n,i):Y2(l,zt.memoizedState,n,i)},useTransition:function(){var n=Qu(Sa)[0],i=Lr().memoizedState;return[typeof n=="boolean"?n:Do(n),i]},useSyncExternalStore:Ku,useId:Q2,useHostTransitionStatus:l0,useFormState:th,useActionState:th,useOptimistic:function(n,i){var l=Lr();return zt!==null?Id(l,zt,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:hl,useCacheRefresh:K2};rb.useEffectEvent=z2;function h0(n,i,l,h){i=n.memoizedState,l=l(h,i),l=l==null?i:y({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var f0={enqueueSetState:function(n,i,l){n=n._reactInternals;var h=ia(),g=Ht(h);g.payload=i,l!=null&&(g.callback=l),i=fn(n,g,h),i!==null&&(zi(i,n,h),Gn(i,n,h))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var h=ia(),g=Ht(h);g.tag=1,g.payload=i,l!=null&&(g.callback=l),i=fn(n,g,h),i!==null&&(zi(i,n,h),Gn(i,n,h))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=ia(),h=Ht(l);h.tag=2,i!=null&&(h.callback=i),i=fn(n,h,l),i!==null&&(zi(i,n,l),Gn(i,n,l))}};function sb(n,i,l,h,g,w,L){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,w,L):i.prototype&&i.prototype.isPureReactComponent?!Wa(l,h)||!Wa(g,w):!0}function ib(n,i,l,h){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==n&&f0.enqueueReplaceState(i,i.state,null)}function tu(n,i){var l=i;if("ref"in i){l={};for(var h in i)h!=="ref"&&(l[h]=i[h])}if(n=n.defaultProps){l===i&&(l=y({},l));for(var g in n)l[g]===void 0&&(l[g]=n[g])}return l}function ab(n){Hc(n)}function ob(n){console.error(n)}function lb(n){Hc(n)}function qd(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function cb(n,i,l){try{var h=n.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function d0(n,i,l){return l=Ht(l),l.tag=3,l.payload={element:null},l.callback=function(){qd(n,i)},l}function ub(n){return n=Ht(n),n.tag=3,n}function hb(n,i,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var w=h.value;n.payload=function(){return g(w)},n.callback=function(){cb(i,l,h)}}var L=l.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(n.callback=function(){cb(i,l,h),typeof g!="function"&&(oc===null?oc=new Set([this]):oc.add(this));var te=h.stack;this.componentDidCatch(h.value,{componentStack:te!==null?te:""})})}function N4(n,i,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=l.alternate,i!==null&&Eo(i,l,g,!0),l=Sr.current,l!==null){switch(l.tag){case 31:case 13:return Fn===null?e1():l.alternate===null&&$r===0&&($r=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===_e?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([h]):i.add(h),F0(n,h,g)),!1;case 22:return l.flags|=65536,h===_e?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([h]):l.add(h)),F0(n,h,g)),!1}throw Error(s(435,l.tag))}return F0(n,h,g),e1(),!1}if(Nn)return i=Sr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,h!==na&&(n=Error(s(422),{cause:h}),Ql(ji(n,l)))):(h!==na&&(i=Error(s(423),{cause:h}),Ql(ji(i,l))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,h=ji(h,l),g=d0(n.stateNode,h,g),es(n,g),$r!==4&&($r=2)),!1;var w=Error(s(520),{cause:h});if(w=ji(w,l),wf===null?wf=[w]:wf.push(w),$r!==4&&($r=2),i===null)return!0;h=ji(h,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=g&-g,l.lanes|=n,n=d0(l.stateNode,h,n),es(l,n),!1;case 1:if(i=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(oc===null||!oc.has(w))))return l.flags|=65536,g&=-g,l.lanes|=g,g=ub(g),hb(g,n,l,h),es(l,g),!1}l=l.return}while(l!==null);return!1}var p0=Error(s(461)),cs=!1;function $s(n,i,l,h){i.child=n===null?ln(i,null,l,h):fr(i,n.child,l,h)}function fb(n,i,l,h,g){l=l.render;var w=i.ref;if("ref"in h){var L={};for(var te in h)te!=="ref"&&(L[te]=h[te])}else L=h;return Mo(i),h=sf(n,i,l,L,w,g),te=af(),n!==null&&!cs?(of(n,i,g),pl(n,i,g)):(Nn&&te&&ef(i),i.flags|=1,$s(n,i,h,g),i.child)}function db(n,i,l,h,g){if(n===null){var w=l.type;return typeof w=="function"&&!Fu(w)&&w.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=w,pb(n,i,w,h,g)):(n=Xl(l.type,null,h,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(w=n.child,!_0(n,g)){var L=w.memoizedProps;if(l=l.compare,l=l!==null?l:Wa,l(L,h)&&n.ref===i.ref)return pl(n,i,g)}return i.flags|=1,n=ki(w,h),n.ref=i.ref,n.return=i,i.child=n}function pb(n,i,l,h,g){if(n!==null){var w=n.memoizedProps;if(Wa(w,h)&&n.ref===i.ref)if(cs=!1,i.pendingProps=h=w,_0(n,g))(n.flags&131072)!==0&&(cs=!0);else return i.lanes=n.lanes,pl(n,i,g)}return m0(n,i,l,h,g)}function mb(n,i,l,h){var g=h.children,w=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|l:l,n!==null){for(h=i.child=n.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~w}else h=0,i.child=null;return gb(n,i,w,l,h)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&ae(i,w!==null?w.cachePool:null),w!==null?_r(i,w):Pn(),Wr(i);else return h=i.lanes=536870912,gb(n,i,w!==null?w.baseLanes|l:l,l,h)}else w!==null?(ae(i,w.cachePool),_r(i,w),Yr(),i.memoizedState=null):(n!==null&&ae(i,null),Pn(),Yr());return $s(n,i,g,l),i.child}function pf(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function gb(n,i,l,h,g){var w=ne();return w=w===null?null:{parent:zr._currentValue,pool:w},i.memoizedState={baseLanes:l,cachePool:w},n!==null&&ae(i,null),Pn(),Wr(i),n!==null&&Eo(n,i,h,!0),i.childLanes=g,null}function Ud(n,i){return i=Gd({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function bb(n,i,l){return fr(i,n.child,null,l),n=Ud(i,i.pendingProps),n.flags|=2,Qn(i),i.memoizedState=null,n}function A4(n,i,l){var h=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Nn){if(h.mode==="hidden")return n=Ud(i,h),i.lanes=536870912,pf(null,n);if(Wn(i),(n=hr)?(n=jv(n,Er),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Co!==null?{id:Li,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},l=Bu(n),l.return=i,i.child=l,Ss=i,hr=null)):n=null,n===null)throw To(i);return i.lanes=536870912,null}return Ud(i,h)}var w=n.memoizedState;if(w!==null){var L=w.dehydrated;if(Wn(i),g)if(i.flags&256)i.flags&=-257,i=bb(n,i,l);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(cs||Eo(n,i,l,!1),g=(l&n.childLanes)!==0,cs||g){if(h=dr,h!==null&&(L=hn(h,l),L!==0&&L!==w.retryLane))throw w.retryLane=L,Za(n,L),zi(h,n,L),p0;e1(),i=bb(n,i,l)}else n=w.treeContext,hr=Aa(L.nextSibling),Ss=i,Nn=!0,Ys=null,Er=!1,n!==null&&Od(i,n),i=Ud(i,h),i.flags|=4096;return i}return n=ki(n.child,{mode:h.mode,children:h.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Hd(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function m0(n,i,l,h,g){return Mo(i),l=sf(n,i,l,h,void 0,g),h=af(),n!==null&&!cs?(of(n,i,g),pl(n,i,g)):(Nn&&h&&ef(i),i.flags|=1,$s(n,i,l,g),i.child)}function vb(n,i,l,h,g,w){return Mo(i),i.updateQueue=null,l=Ka(i,h,l,g),Xu(n),h=af(),n!==null&&!cs?(of(n,i,w),pl(n,i,w)):(Nn&&h&&ef(i),i.flags|=1,$s(n,i,l,w),i.child)}function yb(n,i,l,h,g){if(Mo(i),i.stateNode===null){var w=_s,L=l.contextType;typeof L=="object"&&L!==null&&(w=As(L)),w=new l(h,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=f0,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=h,w.state=i.memoizedState,w.refs={},ft(i),L=l.contextType,w.context=typeof L=="object"&&L!==null?As(L):_s,w.state=i.memoizedState,L=l.getDerivedStateFromProps,typeof L=="function"&&(h0(i,l,L,h),w.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(L=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),L!==w.state&&f0.enqueueReplaceState(w,w.state,null),Hr(i,h,w,g),ir(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(n===null){w=i.stateNode;var te=i.memoizedProps,ge=tu(l,te);w.props=ge;var Me=w.context,He=l.contextType;L=_s,typeof He=="object"&&He!==null&&(L=As(He));var Ze=l.getDerivedStateFromProps;He=typeof Ze=="function"||typeof w.getSnapshotBeforeUpdate=="function",te=i.pendingProps!==te,He||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(te||Me!==L)&&ib(i,w,h,L),_t=!1;var De=i.memoizedState;w.state=De,Hr(i,h,w,g),ir(),Me=i.memoizedState,te||De!==Me||_t?(typeof Ze=="function"&&(h0(i,l,Ze,h),Me=i.memoizedState),(ge=_t||sb(i,l,ge,h,De,Me,L))?(He||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=Me),w.props=h,w.state=Me,w.context=L,h=ge):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,wr(n,i),L=i.memoizedProps,He=tu(l,L),w.props=He,Ze=i.pendingProps,De=w.context,Me=l.contextType,ge=_s,typeof Me=="object"&&Me!==null&&(ge=As(Me)),te=l.getDerivedStateFromProps,(Me=typeof te=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(L!==Ze||De!==ge)&&ib(i,w,h,ge),_t=!1,De=i.memoizedState,w.state=De,Hr(i,h,w,g),ir();var Ve=i.memoizedState;L!==Ze||De!==Ve||_t||n!==null&&n.dependencies!==null&&Hu(n.dependencies)?(typeof te=="function"&&(h0(i,l,te,h),Ve=i.memoizedState),(He=_t||sb(i,l,He,h,De,Ve,ge)||n!==null&&n.dependencies!==null&&Hu(n.dependencies))?(Me||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Ve,ge),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Ve,ge)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||L===n.memoizedProps&&De===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&De===n.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=Ve),w.props=h,w.state=Ve,w.context=ge,h=He):(typeof w.componentDidUpdate!="function"||L===n.memoizedProps&&De===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||L===n.memoizedProps&&De===n.memoizedState||(i.flags|=1024),h=!1)}return w=h,Hd(n,i),h=(i.flags&128)!==0,w||h?(w=i.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,n!==null&&h?(i.child=fr(i,n.child,null,g),i.child=fr(i,null,l,g)):$s(n,i,l,g),i.memoizedState=w.state,n=i.child):n=pl(n,i,g),n}function xb(n,i,l,h){return cl(),i.flags|=256,$s(n,i,l,h),i.child}var g0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function b0(n){return{baseLanes:n,cachePool:ce()}}function v0(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=sa),n}function wb(n,i,l){var h=i.pendingProps,g=!1,w=(i.flags&128)!==0,L;if((L=w)||(L=n!==null&&n.memoizedState===null?!1:(Rn.current&2)!==0),L&&(g=!0,i.flags&=-129),L=(i.flags&32)!==0,i.flags&=-33,n===null){if(Nn){if(g?Pr(i):Yr(),(n=hr)?(n=jv(n,Er),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Co!==null?{id:Li,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},l=Bu(n),l.return=i,i.child=l,Ss=i,hr=null)):n=null,n===null)throw To(i);return em(n)?i.lanes=32:i.lanes=536870912,null}var te=h.children;return h=h.fallback,g?(Yr(),g=i.mode,te=Gd({mode:"hidden",children:te},g),h=Ao(h,g,l,null),te.return=i,h.return=i,te.sibling=h,i.child=te,h=i.child,h.memoizedState=b0(l),h.childLanes=v0(n,L,l),i.memoizedState=g0,pf(null,h)):(Pr(i),y0(i,te))}var ge=n.memoizedState;if(ge!==null&&(te=ge.dehydrated,te!==null)){if(w)i.flags&256?(Pr(i),i.flags&=-257,i=x0(n,i,l)):i.memoizedState!==null?(Yr(),i.child=n.child,i.flags|=128,i=null):(Yr(),te=h.fallback,g=i.mode,h=Gd({mode:"visible",children:h.children},g),te=Ao(te,g,l,null),te.flags|=2,h.return=i,te.return=i,h.sibling=te,i.child=h,fr(i,n.child,null,l),h=i.child,h.memoizedState=b0(l),h.childLanes=v0(n,L,l),i.memoizedState=g0,i=pf(null,h));else if(Pr(i),em(te)){if(L=te.nextSibling&&te.nextSibling.dataset,L)var Me=L.dgst;L=Me,h=Error(s(419)),h.stack="",h.digest=L,Ql({value:h,source:null,stack:null}),i=x0(n,i,l)}else if(cs||Eo(n,i,l,!1),L=(l&n.childLanes)!==0,cs||L){if(L=dr,L!==null&&(h=hn(L,l),h!==0&&h!==ge.retryLane))throw ge.retryLane=h,Za(n,h),zi(L,n,h),p0;J0(te)||e1(),i=x0(n,i,l)}else J0(te)?(i.flags|=192,i.child=n.child,i=null):(n=ge.treeContext,hr=Aa(te.nextSibling),Ss=i,Nn=!0,Ys=null,Er=!1,n!==null&&Od(i,n),i=y0(i,h.children),i.flags|=4096);return i}return g?(Yr(),te=h.fallback,g=i.mode,ge=n.child,Me=ge.sibling,h=ki(ge,{mode:"hidden",children:h.children}),h.subtreeFlags=ge.subtreeFlags&65011712,Me!==null?te=ki(Me,te):(te=Ao(te,g,l,null),te.flags|=2),te.return=i,h.return=i,h.sibling=te,i.child=h,pf(null,h),h=i.child,te=n.child.memoizedState,te===null?te=b0(l):(g=te.cachePool,g!==null?(ge=zr._currentValue,g=g.parent!==ge?{parent:ge,pool:ge}:g):g=ce(),te={baseLanes:te.baseLanes|l,cachePool:g}),h.memoizedState=te,h.childLanes=v0(n,L,l),i.memoizedState=g0,pf(n.child,h)):(Pr(i),l=n.child,n=l.sibling,l=ki(l,{mode:"visible",children:h.children}),l.return=i,l.sibling=null,n!==null&&(L=i.deletions,L===null?(i.deletions=[n],i.flags|=16):L.push(n)),i.child=l,i.memoizedState=null,l)}function y0(n,i){return i=Gd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Gd(n,i){return n=Ds(22,n,null,i),n.lanes=0,n}function x0(n,i,l){return fr(i,n.child,null,l),n=y0(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function _b(n,i,l){n.lanes|=i;var h=n.alternate;h!==null&&(h.lanes|=i),Kl(n.return,i,l)}function w0(n,i,l,h,g,w){var L=n.memoizedState;L===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g,treeForkCount:w}:(L.isBackwards=i,L.rendering=null,L.renderingStartTime=0,L.last=h,L.tail=l,L.tailMode=g,L.treeForkCount=w)}function Sb(n,i,l){var h=i.pendingProps,g=h.revealOrder,w=h.tail;h=h.children;var L=Rn.current,te=(L&2)!==0;if(te?(L=L&1|2,i.flags|=128):L&=1,P(Rn,L),$s(n,i,h,l),h=Nn?Zc:0,!te&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_b(n,l,i);else if(n.tag===19)_b(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(l=i.child,g=null;l!==null;)n=l.alternate,n!==null&&Is(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),w0(i,!1,g,l,w,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&Is(n)===null){i.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}w0(i,!0,l,null,w,h);break;case"together":w0(i,!1,null,null,void 0,h);break;default:i.memoizedState=null}return i.child}function pl(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),ac|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(Eo(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,l=ki(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=ki(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function _0(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Hu(n)))}function C4(n,i,l){switch(i.tag){case 3:me(i,i.stateNode.containerInfo),jo(i,zr,n.memoizedState.cache),cl();break;case 27:case 5:ye(i);break;case 4:me(i,i.stateNode.containerInfo);break;case 10:jo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Wn(i),null;break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?(Pr(i),i.flags|=128,null):(l&i.child.childLanes)!==0?wb(n,i,l):(Pr(i),n=pl(n,i,l),n!==null?n.sibling:null);Pr(i);break;case 19:var g=(n.flags&128)!==0;if(h=(l&i.childLanes)!==0,h||(Eo(n,i,l,!1),h=(l&i.childLanes)!==0),g){if(h)return Sb(n,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),P(Rn,Rn.current),h)break;return null;case 22:return i.lanes=0,mb(n,i,l,i.pendingProps);case 24:jo(i,zr,n.memoizedState.cache)}return pl(n,i,l)}function Nb(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)cs=!0;else{if(!_0(n,l)&&(i.flags&128)===0)return cs=!1,C4(n,i,l);cs=(n.flags&131072)!==0}else cs=!1,Nn&&(i.flags&1048576)!==0&&Ld(i,Zc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var h=i.pendingProps;if(n=ke(i.elementType),i.type=n,typeof n=="function")Fu(n)?(h=tu(n,h),i.tag=1,i=yb(null,i,n,h,l)):(i.tag=0,i=m0(null,i,n,h,l));else{if(n!=null){var g=n.$$typeof;if(g===F){i.tag=11,i=fb(null,i,n,h,l);break e}else if(g===Y){i.tag=14,i=db(null,i,n,h,l);break e}}throw i=X(n)||n,Error(s(306,i,""))}}return i;case 0:return m0(n,i,i.type,i.pendingProps,l);case 1:return h=i.type,g=tu(h,i.pendingProps),yb(n,i,h,g,l);case 3:e:{if(me(i,i.stateNode.containerInfo),n===null)throw Error(s(387));h=i.pendingProps;var w=i.memoizedState;g=w.element,wr(n,i),Hr(i,h,null,l);var L=i.memoizedState;if(h=L.cache,jo(i,zr,h),h!==w.cache&&ul(i,[zr],l,!0),ir(),h=L.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:L.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=xb(n,i,h,l);break e}else if(h!==g){g=ji(Error(s(424)),i),Ql(g),i=xb(n,i,h,l);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(hr=Aa(n.firstChild),Ss=i,Nn=!0,Ys=null,Er=!0,l=ln(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(cl(),h===g){i=pl(n,i,l);break e}$s(n,i,h,l)}i=i.child}return i;case 26:return Hd(n,i),n===null?(l=Rv(i.type,null,i.pendingProps,null))?i.memoizedState=l:Nn||(l=i.type,n=i.pendingProps,h=o1(oe.current).createElement(l),h[Ln]=i,h[qn]=n,Zs(h,l,n),$t(h),i.stateNode=h):i.memoizedState=Rv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ye(i),n===null&&Nn&&(h=i.stateNode=Lv(i.type,i.pendingProps,oe.current),Ss=i,Er=!0,g=hr,hc(i.type)?(tm=g,hr=Aa(h.firstChild)):hr=g),$s(n,i,i.pendingProps.children,l),Hd(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Nn&&((g=h=hr)&&(h=n_(h,i.type,i.pendingProps,Er),h!==null?(i.stateNode=h,Ss=i,hr=Aa(h.firstChild),Er=!1,g=!0):g=!1),g||To(i)),ye(i),g=i.type,w=i.pendingProps,L=n!==null?n.memoizedProps:null,h=w.children,Z0(g,w)?h=null:L!==null&&Z0(g,L)&&(i.flags|=32),i.memoizedState!==null&&(g=sf(n,i,r0,null,null,l),jf._currentValue=g),Hd(n,i),$s(n,i,h,l),i.child;case 6:return n===null&&Nn&&((n=l=hr)&&(l=r_(l,i.pendingProps,Er),l!==null?(i.stateNode=l,Ss=i,hr=null,n=!0):n=!1),n||To(i)),null;case 13:return wb(n,i,l);case 4:return me(i,i.stateNode.containerInfo),h=i.pendingProps,n===null?i.child=fr(i,null,h,l):$s(n,i,h,l),i.child;case 11:return fb(n,i,i.type,i.pendingProps,l);case 7:return $s(n,i,i.pendingProps,l),i.child;case 8:return $s(n,i,i.pendingProps.children,l),i.child;case 12:return $s(n,i,i.pendingProps.children,l),i.child;case 10:return h=i.pendingProps,jo(i,i.type,h.value),$s(n,i,h.children,l),i.child;case 9:return g=i.type._context,h=i.pendingProps.children,Mo(i),g=As(g),h=h(g),i.flags|=1,$s(n,i,h,l),i.child;case 14:return db(n,i,i.type,i.pendingProps,l);case 15:return pb(n,i,i.type,i.pendingProps,l);case 19:return Sb(n,i,l);case 31:return A4(n,i,l);case 22:return mb(n,i,l,i.pendingProps);case 24:return Mo(i),h=As(zr),n===null?(g=ne(),g===null&&(g=dr,w=Jl(),g.pooledCache=w,w.refCount++,w!==null&&(g.pooledCacheLanes|=l),g=w),i.memoizedState={parent:h,cache:g},ft(i),jo(i,zr,g)):((n.lanes&l)!==0&&(wr(n,i),Hr(i,null,null,l),ir()),g=n.memoizedState,w=i.memoizedState,g.parent!==h?(g={parent:h,cache:h},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),jo(i,zr,h)):(h=w.cache,jo(i,zr,h),h!==g.cache&&ul(i,[zr],l,!0))),$s(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ml(n){n.flags|=4}function S0(n,i,l,h,g){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(Qb())n.flags|=8192;else throw ze=_e,je}else n.flags&=-16777217}function Ab(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!zv(i))if(Qb())n.flags|=8192;else throw ze=_e,je}function Wd(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Pe():536870912,n.lanes|=i,ih|=i)}function mf(n,i){if(!Nn)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Nr(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(i)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=l,i}function T4(n,i,l){var h=i.pendingProps;switch(qu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(i),null;case 1:return Nr(i),null;case 3:return l=i.stateNode,h=null,n!==null&&(h=n.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),Di(zr),Se(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Ns(i)?ml(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,nf())),Nr(i),null;case 26:var g=i.type,w=i.memoizedState;return n===null?(ml(i),w!==null?(Nr(i),Ab(i,w)):(Nr(i),S0(i,g,null,h,l))):w?w!==n.memoizedState?(ml(i),Nr(i),Ab(i,w)):(Nr(i),i.flags&=-16777217):(n=n.memoizedProps,n!==h&&ml(i),Nr(i),S0(i,g,n,h,l)),null;case 27:if(Fe(i),l=oe.current,g=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==h&&ml(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return Nr(i),null}n=ee.current,Ns(i)?tf(i):(n=Lv(g,h,l),i.stateNode=n,ml(i))}return Nr(i),null;case 5:if(Fe(i),g=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==h&&ml(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return Nr(i),null}if(w=ee.current,Ns(i))tf(i);else{var L=o1(oe.current);switch(w){case 1:w=L.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:w=L.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":w=L.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":w=L.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":w=L.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?L.createElement("select",{is:h.is}):L.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?L.createElement(g,{is:h.is}):L.createElement(g)}}w[Ln]=i,w[qn]=h;e:for(L=i.child;L!==null;){if(L.tag===5||L.tag===6)w.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===i)break e;for(;L.sibling===null;){if(L.return===null||L.return===i)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}i.stateNode=w;e:switch(Zs(w,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ml(i)}}return Nr(i),S0(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,l),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==h&&ml(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(s(166));if(n=oe.current,Ns(i)){if(n=i.stateNode,l=i.memoizedProps,h=null,g=Ss,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}n[Ln]=i,n=!!(n.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||wv(n.nodeValue,l)),n||To(i,!0)}else n=o1(n).createTextNode(h),n[Ln]=i,i.stateNode=n}return Nr(i),null;case 31:if(l=i.memoizedState,n===null||n.memoizedState!==null){if(h=Ns(i),l!==null){if(n===null){if(!h)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Ln]=i}else cl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nr(i),n=!1}else l=nf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return i.flags&256?(Qn(i),i):(Qn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Nr(i),null;case 13:if(h=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Ns(i),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Ln]=i}else cl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nr(i),g=!1}else g=nf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(Qn(i),i):(Qn(i),null)}return Qn(i),(i.flags&128)!==0?(i.lanes=l,i):(l=h!==null,n=n!==null&&n.memoizedState!==null,l&&(h=i.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==g&&(h.flags|=2048)),l!==n&&l&&(i.child.flags|=8192),Wd(i,i.updateQueue),Nr(i),null);case 4:return Se(),n===null&&G0(i.stateNode.containerInfo),Nr(i),null;case 10:return Di(i.type),Nr(i),null;case 19:if(j(Rn),h=i.memoizedState,h===null)return Nr(i),null;if(g=(i.flags&128)!==0,w=h.rendering,w===null)if(g)mf(h,!1);else{if($r!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Is(n),w!==null){for(i.flags|=128,mf(h,!1),n=w.updateQueue,i.updateQueue=n,Wd(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)Xc(l,n),l=l.sibling;return P(Rn,Rn.current&1|2),Nn&&vi(i,h.treeForkCount),i.child}n=n.sibling}h.tail!==null&&Be()>Qd&&(i.flags|=128,g=!0,mf(h,!1),i.lanes=4194304)}else{if(!g)if(n=Is(w),n!==null){if(i.flags|=128,g=!0,n=n.updateQueue,i.updateQueue=n,Wd(i,n),mf(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!Nn)return Nr(i),null}else 2*Be()-h.renderingStartTime>Qd&&l!==536870912&&(i.flags|=128,g=!0,mf(h,!1),i.lanes=4194304);h.isBackwards?(w.sibling=i.child,i.child=w):(n=h.last,n!==null?n.sibling=w:i.child=w,h.last=w)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Be(),n.sibling=null,l=Rn.current,P(Rn,g?l&1|2:l&1),Nn&&vi(i,h.treeForkCount),n):(Nr(i),null);case 22:case 23:return Qn(i),ts(),h=i.memoizedState!==null,n!==null?n.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?(l&536870912)!==0&&(i.flags&128)===0&&(Nr(i),i.subtreeFlags&6&&(i.flags|=8192)):Nr(i),l=i.updateQueue,l!==null&&Wd(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==l&&(i.flags|=2048),n!==null&&j(K),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Di(zr),Nr(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function k4(n,i){switch(qu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Di(zr),Se(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Fe(i),null;case 31:if(i.memoizedState!==null){if(Qn(i),i.alternate===null)throw Error(s(340));cl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Qn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));cl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return j(Rn),null;case 4:return Se(),null;case 10:return Di(i.type),null;case 22:case 23:return Qn(i),ts(),n!==null&&j(K),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Di(zr),null;case 25:return null;default:return null}}function Cb(n,i){switch(qu(i),i.tag){case 3:Di(zr),Se();break;case 26:case 27:case 5:Fe(i);break;case 4:Se();break;case 31:i.memoizedState!==null&&Qn(i);break;case 13:Qn(i);break;case 19:j(Rn);break;case 10:Di(i.type);break;case 22:case 23:Qn(i),ts(),n!==null&&j(K);break;case 24:Di(zr)}}function gf(n,i){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&n)===n){h=void 0;var w=l.create,L=l.inst;h=w(),L.destroy=h}l=l.next}while(l!==g)}}catch(te){Jn(i,i.return,te)}}function sc(n,i,l){try{var h=i.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var w=g.next;h=w;do{if((h.tag&n)===n){var L=h.inst,te=L.destroy;if(te!==void 0){L.destroy=void 0,g=i;var ge=l,Me=te;try{Me()}catch(He){Jn(g,ge,He)}}}h=h.next}while(h!==w)}}catch(He){Jn(i,i.return,He)}}function Tb(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{Gr(i,l)}catch(h){Jn(n,n.return,h)}}}function kb(n,i,l){l.props=tu(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(h){Jn(n,i,h)}}function bf(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var h=n.stateNode;break;case 30:h=n.stateNode;break;default:h=n.stateNode}typeof l=="function"?n.refCleanup=l(h):l.current=h}}catch(g){Jn(n,i,g)}}function Io(n,i){var l=n.ref,h=n.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Jn(n,i,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Jn(n,i,g)}else l.current=null}function jb(n){var i=n.type,l=n.memoizedProps,h=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Jn(n,n.return,g)}}function N0(n,i,l){try{var h=n.stateNode;Z4(h,n.type,l,i),h[qn]=i}catch(g){Jn(n,n.return,g)}}function Eb(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&hc(n.type)||n.tag===4}function A0(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Eb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&hc(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function C0(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Zi));else if(h!==4&&(h===27&&hc(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(C0(n,i,l),n=n.sibling;n!==null;)C0(n,i,l),n=n.sibling}function Yd(n,i,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(h!==4&&(h===27&&hc(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Yd(n,i,l),n=n.sibling;n!==null;)Yd(n,i,l),n=n.sibling}function Mb(n){var i=n.stateNode,l=n.memoizedProps;try{for(var h=n.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Zs(i,h,l),i[Ln]=n,i[qn]=l}catch(w){Jn(n,n.return,w)}}var gl=!1,us=!1,T0=!1,Lb=typeof WeakSet=="function"?WeakSet:Set,Vs=null;function j4(n,i){if(n=n.containerInfo,X0=p1,n=Xa(n),xa(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var L=0,te=-1,ge=-1,Me=0,He=0,Ze=n,De=null;t:for(;;){for(var Ve;Ze!==l||g!==0&&Ze.nodeType!==3||(te=L+g),Ze!==w||h!==0&&Ze.nodeType!==3||(ge=L+h),Ze.nodeType===3&&(L+=Ze.nodeValue.length),(Ve=Ze.firstChild)!==null;)De=Ze,Ze=Ve;for(;;){if(Ze===n)break t;if(De===l&&++Me===g&&(te=L),De===w&&++He===h&&(ge=L),(Ve=Ze.nextSibling)!==null)break;Ze=De,De=Ze.parentNode}Ze=Ve}l=te===-1||ge===-1?null:{start:te,end:ge}}else l=null}l=l||{start:0,end:0}}else l=null;for($0={focusedElem:n,selectionRange:l},p1=!1,Vs=i;Vs!==null;)if(i=Vs,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Vs=n;else for(;Vs!==null;){switch(i=Vs,w=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)g=n[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,l=i,g=w.memoizedProps,w=w.memoizedState,h=l.stateNode;try{var Ct=tu(l.type,g);n=h.getSnapshotBeforeUpdate(Ct,w),h.__reactInternalSnapshotBeforeUpdate=n}catch(Gt){Jn(l,l.return,Gt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)K0(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":K0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Vs=n;break}Vs=i.return}}function Ob(n,i,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:vl(n,l),h&4&&gf(5,l);break;case 1:if(vl(n,l),h&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(L){Jn(l,l.return,L)}else{var g=tu(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(g,i,n.__reactInternalSnapshotBeforeUpdate)}catch(L){Jn(l,l.return,L)}}h&64&&Tb(l),h&512&&bf(l,l.return);break;case 3:if(vl(n,l),h&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Gr(n,i)}catch(L){Jn(l,l.return,L)}}break;case 27:i===null&&h&4&&Mb(l);case 26:case 5:vl(n,l),i===null&&h&4&&jb(l),h&512&&bf(l,l.return);break;case 12:vl(n,l);break;case 31:vl(n,l),h&4&&Ib(n,l);break;case 13:vl(n,l),h&4&&Vb(n,l),h&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=F4.bind(null,l),s_(n,l))));break;case 22:if(h=l.memoizedState!==null||gl,!h){i=i!==null&&i.memoizedState!==null||us,g=gl;var w=us;gl=h,(us=i)&&!w?yl(n,l,(l.subtreeFlags&8772)!==0):vl(n,l),gl=g,us=w}break;case 30:break;default:vl(n,l)}}function Db(n){var i=n.alternate;i!==null&&(n.alternate=null,Db(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ie(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Or=null,Ii=!1;function bl(n,i,l){for(l=l.child;l!==null;)Rb(n,i,l),l=l.sibling}function Rb(n,i,l){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Vt,l)}catch{}switch(l.tag){case 26:us||Io(l,i),bl(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:us||Io(l,i);var h=Or,g=Ii;hc(l.type)&&(Or=l.stateNode,Ii=!1),bl(n,i,l),Cf(l.stateNode),Or=h,Ii=g;break;case 5:us||Io(l,i);case 6:if(h=Or,g=Ii,Or=null,bl(n,i,l),Or=h,Ii=g,Or!==null)if(Ii)try{(Or.nodeType===9?Or.body:Or.nodeName==="HTML"?Or.ownerDocument.body:Or).removeChild(l.stateNode)}catch(w){Jn(l,i,w)}else try{Or.removeChild(l.stateNode)}catch(w){Jn(l,i,w)}break;case 18:Or!==null&&(Ii?(n=Or,Tv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),dh(n)):Tv(Or,l.stateNode));break;case 4:h=Or,g=Ii,Or=l.stateNode.containerInfo,Ii=!0,bl(n,i,l),Or=h,Ii=g;break;case 0:case 11:case 14:case 15:sc(2,l,i),us||sc(4,l,i),bl(n,i,l);break;case 1:us||(Io(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"&&kb(l,i,h)),bl(n,i,l);break;case 21:bl(n,i,l);break;case 22:us=(h=us)||l.memoizedState!==null,bl(n,i,l),us=h;break;default:bl(n,i,l)}}function Ib(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{dh(n)}catch(l){Jn(i,i.return,l)}}}function Vb(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{dh(n)}catch(l){Jn(i,i.return,l)}}function E4(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Lb),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Lb),i;default:throw Error(s(435,n.tag))}}function Xd(n,i){var l=E4(n);i.forEach(function(h){if(!l.has(h)){l.add(h);var g=B4.bind(null,n,h);h.then(g,g)}})}function Vi(n,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],w=n,L=i,te=L;e:for(;te!==null;){switch(te.tag){case 27:if(hc(te.type)){Or=te.stateNode,Ii=!1;break e}break;case 5:Or=te.stateNode,Ii=!1;break e;case 3:case 4:Or=te.stateNode.containerInfo,Ii=!0;break e}te=te.return}if(Or===null)throw Error(s(160));Rb(w,L,g),Or=null,Ii=!1,w=g.alternate,w!==null&&(w.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Fb(i,n),i=i.sibling}var no=null;function Fb(n,i){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Vi(i,n),Fi(n),h&4&&(sc(3,n,n.return),gf(3,n),sc(5,n,n.return));break;case 1:Vi(i,n),Fi(n),h&512&&(us||l===null||Io(l,l.return)),h&64&&gl&&(n=n.updateQueue,n!==null&&(h=n.callbacks,h!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=no;if(Vi(i,n),Fi(n),h&512&&(us||l===null||Io(l,l.return)),h&4){var w=l!==null?l.memoizedState:null;if(h=n.memoizedState,l===null)if(h===null)if(n.stateNode===null){e:{h=n.type,l=n.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":w=g.getElementsByTagName("title")[0],(!w||w[Ne]||w[Ln]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=g.createElement(h),g.head.insertBefore(w,g.querySelector("head > title"))),Zs(w,h,l),w[Ln]=n,$t(w),h=w;break e;case"link":var L=Fv("link","href",g).get(h+(l.href||""));if(L){for(var te=0;te<L.length;te++)if(w=L[te],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){L.splice(te,1);break t}}w=g.createElement(h),Zs(w,h,l),g.head.appendChild(w);break;case"meta":if(L=Fv("meta","content",g).get(h+(l.content||""))){for(te=0;te<L.length;te++)if(w=L[te],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){L.splice(te,1);break t}}w=g.createElement(h),Zs(w,h,l),g.head.appendChild(w);break;default:throw Error(s(468,h))}w[Ln]=n,$t(w),h=w}n.stateNode=h}else Bv(g,n.type,n.stateNode);else n.stateNode=Vv(g,h,n.memoizedProps);else w!==h?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,h===null?Bv(g,n.type,n.stateNode):Vv(g,h,n.memoizedProps)):h===null&&n.stateNode!==null&&N0(n,n.memoizedProps,l.memoizedProps)}break;case 27:Vi(i,n),Fi(n),h&512&&(us||l===null||Io(l,l.return)),l!==null&&h&4&&N0(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Vi(i,n),Fi(n),h&512&&(us||l===null||Io(l,l.return)),n.flags&32){g=n.stateNode;try{$i(g,"")}catch(Ct){Jn(n,n.return,Ct)}}h&4&&n.stateNode!=null&&(g=n.memoizedProps,N0(n,g,l!==null?l.memoizedProps:g)),h&1024&&(T0=!0);break;case 6:if(Vi(i,n),Fi(n),h&4){if(n.stateNode===null)throw Error(s(162));h=n.memoizedProps,l=n.stateNode;try{l.nodeValue=h}catch(Ct){Jn(n,n.return,Ct)}}break;case 3:if(u1=null,g=no,no=l1(i.containerInfo),Vi(i,n),no=g,Fi(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{dh(i.containerInfo)}catch(Ct){Jn(n,n.return,Ct)}T0&&(T0=!1,Bb(n));break;case 4:h=no,no=l1(n.stateNode.containerInfo),Vi(i,n),Fi(n),no=h;break;case 12:Vi(i,n),Fi(n);break;case 31:Vi(i,n),Fi(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Xd(n,h)));break;case 13:Vi(i,n),Fi(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Zd=Be()),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Xd(n,h)));break;case 22:g=n.memoizedState!==null;var ge=l!==null&&l.memoizedState!==null,Me=gl,He=us;if(gl=Me||g,us=He||ge,Vi(i,n),us=He,gl=Me,Fi(n),h&8192)e:for(i=n.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(l===null||ge||gl||us||nu(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){ge=l=i;try{if(w=ge.stateNode,g)L=w.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{te=ge.stateNode;var Ze=ge.memoizedProps.style,De=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null;te.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(Ct){Jn(ge,ge.return,Ct)}}}else if(i.tag===6){if(l===null){ge=i;try{ge.stateNode.nodeValue=g?"":ge.memoizedProps}catch(Ct){Jn(ge,ge.return,Ct)}}}else if(i.tag===18){if(l===null){ge=i;try{var Ve=ge.stateNode;g?kv(Ve,!0):kv(ge.stateNode,!1)}catch(Ct){Jn(ge,ge.return,Ct)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=n.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Xd(n,l))));break;case 19:Vi(i,n),Fi(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,Xd(n,h)));break;case 30:break;case 21:break;default:Vi(i,n),Fi(n)}}function Fi(n){var i=n.flags;if(i&2){try{for(var l,h=n.return;h!==null;){if(Eb(h)){l=h;break}h=h.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,w=A0(n);Yd(n,w,g);break;case 5:var L=l.stateNode;l.flags&32&&($i(L,""),l.flags&=-33);var te=A0(n);Yd(n,te,L);break;case 3:case 4:var ge=l.stateNode.containerInfo,Me=A0(n);C0(n,Me,ge);break;default:throw Error(s(161))}}catch(He){Jn(n,n.return,He)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Bb(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Bb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function vl(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ob(n,i.alternate,i),i=i.sibling}function nu(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:sc(4,i,i.return),nu(i);break;case 1:Io(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&kb(i,i.return,l),nu(i);break;case 27:Cf(i.stateNode);case 26:case 5:Io(i,i.return),nu(i);break;case 22:i.memoizedState===null&&nu(i);break;case 30:nu(i);break;default:nu(i)}n=n.sibling}}function yl(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,g=n,w=i,L=w.flags;switch(w.tag){case 0:case 11:case 15:yl(g,w,l),gf(4,w);break;case 1:if(yl(g,w,l),h=w,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Me){Jn(h,h.return,Me)}if(h=w,g=h.updateQueue,g!==null){var te=h.stateNode;try{var ge=g.shared.hiddenCallbacks;if(ge!==null)for(g.shared.hiddenCallbacks=null,g=0;g<ge.length;g++)Rs(ge[g],te)}catch(Me){Jn(h,h.return,Me)}}l&&L&64&&Tb(w),bf(w,w.return);break;case 27:Mb(w);case 26:case 5:yl(g,w,l),l&&h===null&&L&4&&jb(w),bf(w,w.return);break;case 12:yl(g,w,l);break;case 31:yl(g,w,l),l&&L&4&&Ib(g,w);break;case 13:yl(g,w,l),l&&L&4&&Vb(g,w);break;case 22:w.memoizedState===null&&yl(g,w,l),bf(w,w.return);break;case 30:break;default:yl(g,w,l)}i=i.sibling}}function k0(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Qc(l))}function j0(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Qc(n))}function ro(n,i,l,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)zb(n,i,l,h),i=i.sibling}function zb(n,i,l,h){var g=i.flags;switch(i.tag){case 0:case 11:case 15:ro(n,i,l,h),g&2048&&gf(9,i);break;case 1:ro(n,i,l,h);break;case 3:ro(n,i,l,h),g&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Qc(n)));break;case 12:if(g&2048){ro(n,i,l,h),n=i.stateNode;try{var w=i.memoizedProps,L=w.id,te=w.onPostCommit;typeof te=="function"&&te(L,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(ge){Jn(i,i.return,ge)}}else ro(n,i,l,h);break;case 31:ro(n,i,l,h);break;case 13:ro(n,i,l,h);break;case 23:break;case 22:w=i.stateNode,L=i.alternate,i.memoizedState!==null?w._visibility&2?ro(n,i,l,h):vf(n,i):w._visibility&2?ro(n,i,l,h):(w._visibility|=2,nh(n,i,l,h,(i.subtreeFlags&10256)!==0||!1)),g&2048&&k0(L,i);break;case 24:ro(n,i,l,h),g&2048&&j0(i.alternate,i);break;default:ro(n,i,l,h)}}function nh(n,i,l,h,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=n,L=i,te=l,ge=h,Me=L.flags;switch(L.tag){case 0:case 11:case 15:nh(w,L,te,ge,g),gf(8,L);break;case 23:break;case 22:var He=L.stateNode;L.memoizedState!==null?He._visibility&2?nh(w,L,te,ge,g):vf(w,L):(He._visibility|=2,nh(w,L,te,ge,g)),g&&Me&2048&&k0(L.alternate,L);break;case 24:nh(w,L,te,ge,g),g&&Me&2048&&j0(L.alternate,L);break;default:nh(w,L,te,ge,g)}i=i.sibling}}function vf(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,h=i,g=h.flags;switch(h.tag){case 22:vf(l,h),g&2048&&k0(h.alternate,h);break;case 24:vf(l,h),g&2048&&j0(h.alternate,h);break;default:vf(l,h)}i=i.sibling}}var yf=8192;function rh(n,i,l){if(n.subtreeFlags&yf)for(n=n.child;n!==null;)Pb(n,i,l),n=n.sibling}function Pb(n,i,l){switch(n.tag){case 26:rh(n,i,l),n.flags&yf&&n.memoizedState!==null&&g_(l,no,n.memoizedState,n.memoizedProps);break;case 5:rh(n,i,l);break;case 3:case 4:var h=no;no=l1(n.stateNode.containerInfo),rh(n,i,l),no=h;break;case 22:n.memoizedState===null&&(h=n.alternate,h!==null&&h.memoizedState!==null?(h=yf,yf=16777216,rh(n,i,l),yf=h):rh(n,i,l));break;default:rh(n,i,l)}}function qb(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function xf(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var h=i[l];Vs=h,Hb(h,n)}qb(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ub(n),n=n.sibling}function Ub(n){switch(n.tag){case 0:case 11:case 15:xf(n),n.flags&2048&&sc(9,n,n.return);break;case 3:xf(n);break;case 12:xf(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,$d(n)):xf(n);break;default:xf(n)}}function $d(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var h=i[l];Vs=h,Hb(h,n)}qb(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:sc(8,i,i.return),$d(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,$d(i));break;default:$d(i)}n=n.sibling}}function Hb(n,i){for(;Vs!==null;){var l=Vs;switch(l.tag){case 0:case 11:case 15:sc(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Qc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Vs=h;else e:for(l=n;Vs!==null;){h=Vs;var g=h.sibling,w=h.return;if(Db(h),h===l){Vs=null;break e}if(g!==null){g.return=w,Vs=g;break e}Vs=w}}}var M4={getCacheForType:function(n){var i=As(zr),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l},cacheSignal:function(){return As(zr).controller.signal}},L4=typeof WeakMap=="function"?WeakMap:Map,Yn=0,dr=null,An=null,kn=0,Kn=0,ra=null,ic=!1,sh=!1,E0=!1,xl=0,$r=0,ac=0,ru=0,M0=0,sa=0,ih=0,wf=null,Bi=null,L0=!1,Zd=0,Gb=0,Qd=1/0,Kd=null,oc=null,Ts=0,lc=null,ah=null,wl=0,O0=0,D0=null,Wb=null,_f=0,R0=null;function ia(){return(Yn&2)!==0&&kn!==0?kn&-kn:I.T!==null?P0():Qt()}function Yb(){if(sa===0)if((kn&536870912)===0||Nn){var n=dn;dn<<=1,(dn&3932160)===0&&(dn=262144),sa=n}else sa=536870912;return n=Sr.current,n!==null&&(n.flags|=32),sa}function zi(n,i,l){(n===dr&&(Kn===2||Kn===9)||n.cancelPendingCommit!==null)&&(oh(n,0),cc(n,kn,sa,!1)),Xe(n,l),((Yn&2)===0||n!==dr)&&(n===dr&&((Yn&2)===0&&(ru|=l),$r===4&&cc(n,kn,sa,!1)),Vo(n))}function Xb(n,i,l){if((Yn&6)!==0)throw Error(s(327));var h=!l&&(i&127)===0&&(i&n.expiredLanes)===0||Oe(n,i),g=h?R4(n,i):V0(n,i,!0),w=h;do{if(g===0){sh&&!h&&cc(n,i,0,!1);break}else{if(l=n.current.alternate,w&&!O4(l)){g=V0(n,i,!1),w=!1;continue}if(g===2){if(w=i,n.errorRecoveryDisabledLanes&w)var L=0;else L=n.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){i=L;e:{var te=n;g=wf;var ge=te.current.memoizedState.isDehydrated;if(ge&&(oh(te,L).flags|=256),L=V0(te,L,!1),L!==2){if(E0&&!ge){te.errorRecoveryDisabledLanes|=w,ru|=w,g=4;break e}w=Bi,Bi=g,w!==null&&(Bi===null?Bi=w:Bi.push.apply(Bi,w))}g=L}if(w=!1,g!==2)continue}}if(g===1){oh(n,0),cc(n,i,0,!0);break}e:{switch(h=n,w=g,w){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:cc(h,i,sa,!ic);break e;case 2:Bi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(g=Zd+300-Be(),10<g)){if(cc(h,i,sa,!ic),Rt(h,0,!0)!==0)break e;wl=i,h.timeoutHandle=Av($b.bind(null,h,l,Bi,Kd,L0,i,sa,ru,ih,ic,w,"Throttled",-0,0),g);break e}$b(h,l,Bi,Kd,L0,i,sa,ru,ih,ic,w,null,-0,0)}}break}while(!0);Vo(n)}function $b(n,i,l,h,g,w,L,te,ge,Me,He,Ze,De,Ve){if(n.timeoutHandle=-1,Ze=i.subtreeFlags,Ze&8192||(Ze&16785408)===16785408){Ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zi},Pb(i,w,Ze);var Ct=(w&62914560)===w?Zd-Be():(w&4194048)===w?Gb-Be():0;if(Ct=b_(Ze,Ct),Ct!==null){wl=w,n.cancelPendingCommit=Ct(rv.bind(null,n,i,w,l,h,g,L,te,ge,He,Ze,null,De,Ve)),cc(n,w,L,!Me);return}}rv(n,i,w,l,h,g,L,te,ge)}function O4(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],w=g.getSnapshot;g=g.value;try{if(!ws(w(),g))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function cc(n,i,l,h){i&=~M0,i&=~ru,n.suspendedLanes|=i,n.pingedLanes&=~i,h&&(n.warmLanes|=i),h=n.expirationTimes;for(var g=i;0<g;){var w=31-qt(g),L=1<<w;h[w]=-1,g&=~L}l!==0&&pn(n,l,i)}function Jd(){return(Yn&6)===0?(Sf(0),!1):!0}function I0(){if(An!==null){if(Kn===0)var n=An.return;else n=An,_a=ko=null,$u(n),Qe=null,Tt=0,n=An;for(;n!==null;)Cb(n.alternate,n),n=n.return;An=null}}function oh(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,J4(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),wl=0,I0(),dr=n,An=l=ki(n.current,null),kn=i,Kn=0,ra=null,ic=!1,sh=Oe(n,i),E0=!1,ih=sa=M0=ru=ac=$r=0,Bi=wf=null,L0=!1,(i&8)!==0&&(i|=i&32);var h=n.entangledLanes;if(h!==0)for(n=n.entanglements,h&=i;0<h;){var g=31-qt(h),w=1<<g;i|=n[g],h&=~w}return xl=i,Gc(),l}function Zb(n,i){Bt=null,I.H=df,i===ve||i===le?(i=We(),Kn=3):i===je?(i=We(),Kn=4):Kn=i===p0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ra=i,An===null&&($r=1,qd(n,ji(i,n.current)))}function Qb(){var n=Sr.current;return n===null?!0:(kn&4194048)===kn?Fn===null:(kn&62914560)===kn||(kn&536870912)!==0?n===Fn:!1}function Kb(){var n=I.H;return I.H=df,n===null?df:n}function Jb(){var n=I.A;return I.A=M4,n}function e1(){$r=4,ic||(kn&4194048)!==kn&&Sr.current!==null||(sh=!0),(ac&134217727)===0&&(ru&134217727)===0||dr===null||cc(dr,kn,sa,!1)}function V0(n,i,l){var h=Yn;Yn|=2;var g=Kb(),w=Jb();(dr!==n||kn!==i)&&(Kd=null,oh(n,i)),i=!1;var L=$r;e:do try{if(Kn!==0&&An!==null){var te=An,ge=ra;switch(Kn){case 8:I0(),L=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(i=!0);var Me=Kn;if(Kn=0,ra=null,lh(n,te,ge,Me),l&&sh){L=0;break e}break;default:Me=Kn,Kn=0,ra=null,lh(n,te,ge,Me)}}D4(),L=$r;break}catch(He){Zb(n,He)}while(!0);return i&&n.shellSuspendCounter++,_a=ko=null,Yn=h,I.H=g,I.A=w,An===null&&(dr=null,kn=0,Gc()),L}function D4(){for(;An!==null;)ev(An)}function R4(n,i){var l=Yn;Yn|=2;var h=Kb(),g=Jb();dr!==n||kn!==i?(Kd=null,Qd=Be()+500,oh(n,i)):sh=Oe(n,i);e:do try{if(Kn!==0&&An!==null){i=An;var w=ra;t:switch(Kn){case 1:Kn=0,ra=null,lh(n,i,w,1);break;case 2:case 9:if(Te(w)){Kn=0,ra=null,tv(i);break}i=function(){Kn!==2&&Kn!==9||dr!==n||(Kn=7),Vo(n)},w.then(i,i);break e;case 3:Kn=7;break e;case 4:Kn=5;break e;case 7:Te(w)?(Kn=0,ra=null,tv(i)):(Kn=0,ra=null,lh(n,i,w,7));break;case 5:var L=null;switch(An.tag){case 26:L=An.memoizedState;case 5:case 27:var te=An;if(L?zv(L):te.stateNode.complete){Kn=0,ra=null;var ge=te.sibling;if(ge!==null)An=ge;else{var Me=te.return;Me!==null?(An=Me,t1(Me)):An=null}break t}}Kn=0,ra=null,lh(n,i,w,5);break;case 6:Kn=0,ra=null,lh(n,i,w,6);break;case 8:I0(),$r=6;break e;default:throw Error(s(462))}}I4();break}catch(He){Zb(n,He)}while(!0);return _a=ko=null,I.H=h,I.A=g,Yn=l,An!==null?0:(dr=null,kn=0,Gc(),$r)}function I4(){for(;An!==null&&!ot();)ev(An)}function ev(n){var i=Nb(n.alternate,n,xl);n.memoizedProps=n.pendingProps,i===null?t1(n):An=i}function tv(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=vb(l,i,i.pendingProps,i.type,void 0,kn);break;case 11:i=vb(l,i,i.pendingProps,i.type.render,i.ref,kn);break;case 5:$u(i);default:Cb(l,i),i=An=Xc(i,xl),i=Nb(l,i,xl)}n.memoizedProps=n.pendingProps,i===null?t1(n):An=i}function lh(n,i,l,h){_a=ko=null,$u(i),Qe=null,Tt=0;var g=i.return;try{if(N4(n,g,i,l,kn)){$r=1,qd(n,ji(l,n.current)),An=null;return}}catch(w){if(g!==null)throw An=g,w;$r=1,qd(n,ji(l,n.current)),An=null;return}i.flags&32768?(Nn||h===1?n=!0:sh||(kn&536870912)!==0?n=!1:(ic=n=!0,(h===2||h===9||h===3||h===6)&&(h=Sr.current,h!==null&&h.tag===13&&(h.flags|=16384))),nv(i,n)):t1(i)}function t1(n){var i=n;do{if((i.flags&32768)!==0){nv(i,ic);return}n=i.return;var l=T4(i.alternate,i,xl);if(l!==null){An=l;return}if(i=i.sibling,i!==null){An=i;return}An=i=n}while(i!==null);$r===0&&($r=5)}function nv(n,i){do{var l=k4(n.alternate,n);if(l!==null){l.flags&=32767,An=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){An=n;return}An=n=l}while(n!==null);$r=6,An=null}function rv(n,i,l,h,g,w,L,te,ge){n.cancelPendingCommit=null;do n1();while(Ts!==0);if((Yn&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(w=i.lanes|i.childLanes,w|=Ru,Mt(n,l,w,L,te,ge),n===dr&&(An=dr=null,kn=0),ah=i,lc=n,wl=l,O0=w,D0=g,Wb=h,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,z4(gt,function(){return lv(),null})):(n.callbackNode=null,n.callbackPriority=0),h=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||h){h=I.T,I.T=null,g=se.p,se.p=2,L=Yn,Yn|=4;try{j4(n,i,l)}finally{Yn=L,se.p=g,I.T=h}}Ts=1,sv(),iv(),av()}}function sv(){if(Ts===1){Ts=0;var n=lc,i=ah,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=I.T,I.T=null;var h=se.p;se.p=2;var g=Yn;Yn|=4;try{Fb(i,n);var w=$0,L=Xa(n.containerInfo),te=w.focusedElem,ge=w.selectionRange;if(L!==te&&te&&te.ownerDocument&&Ya(te.ownerDocument.documentElement,te)){if(ge!==null&&xa(te)){var Me=ge.start,He=ge.end;if(He===void 0&&(He=Me),"selectionStart"in te)te.selectionStart=Me,te.selectionEnd=Math.min(He,te.value.length);else{var Ze=te.ownerDocument||document,De=Ze&&Ze.defaultView||window;if(De.getSelection){var Ve=De.getSelection(),Ct=te.textContent.length,Gt=Math.min(ge.start,Ct),lr=ge.end===void 0?Gt:Math.min(ge.end,Ct);!Ve.extend&&Gt>lr&&(L=lr,lr=Gt,Gt=L);var Ce=Yl(te,Gt),we=Yl(te,lr);if(Ce&&we&&(Ve.rangeCount!==1||Ve.anchorNode!==Ce.node||Ve.anchorOffset!==Ce.offset||Ve.focusNode!==we.node||Ve.focusOffset!==we.offset)){var Ee=Ze.createRange();Ee.setStart(Ce.node,Ce.offset),Ve.removeAllRanges(),Gt>lr?(Ve.addRange(Ee),Ve.extend(we.node,we.offset)):(Ee.setEnd(we.node,we.offset),Ve.addRange(Ee))}}}}for(Ze=[],Ve=te;Ve=Ve.parentNode;)Ve.nodeType===1&&Ze.push({element:Ve,left:Ve.scrollLeft,top:Ve.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<Ze.length;te++){var $e=Ze[te];$e.element.scrollLeft=$e.left,$e.element.scrollTop=$e.top}}p1=!!X0,$0=X0=null}finally{Yn=g,se.p=h,I.T=l}}n.current=i,Ts=2}}function iv(){if(Ts===2){Ts=0;var n=lc,i=ah,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=I.T,I.T=null;var h=se.p;se.p=2;var g=Yn;Yn|=4;try{Ob(n,i.alternate,i)}finally{Yn=g,se.p=h,I.T=l}}Ts=3}}function av(){if(Ts===4||Ts===3){Ts=0,it();var n=lc,i=ah,l=wl,h=Wb;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ts=5:(Ts=0,ah=lc=null,ov(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(oc=null),yn(l),i=i.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Vt,i,void 0,(i.current.flags&128)===128)}catch{}if(h!==null){i=I.T,g=se.p,se.p=2,I.T=null;try{for(var w=n.onRecoverableError,L=0;L<h.length;L++){var te=h[L];w(te.value,{componentStack:te.stack})}}finally{I.T=i,se.p=g}}(wl&3)!==0&&n1(),Vo(n),g=n.pendingLanes,(l&261930)!==0&&(g&42)!==0?n===R0?_f++:(_f=0,R0=n):_f=0,Sf(0)}}function ov(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Qc(i)))}function n1(){return sv(),iv(),av(),lv()}function lv(){if(Ts!==5)return!1;var n=lc,i=O0;O0=0;var l=yn(wl),h=I.T,g=se.p;try{se.p=32>l?32:l,I.T=null,l=D0,D0=null;var w=lc,L=wl;if(Ts=0,ah=lc=null,wl=0,(Yn&6)!==0)throw Error(s(331));var te=Yn;if(Yn|=4,Ub(w.current),zb(w,w.current,L,l),Yn=te,Sf(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Vt,w)}catch{}return!0}finally{se.p=g,I.T=h,ov(n,i)}}function cv(n,i,l){i=ji(l,i),i=d0(n.stateNode,i,2),n=fn(n,i,2),n!==null&&(Xe(n,2),Vo(n))}function Jn(n,i,l){if(n.tag===3)cv(n,n,l);else for(;i!==null;){if(i.tag===3){cv(i,n,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(oc===null||!oc.has(h))){n=ji(l,n),l=ub(2),h=fn(i,l,2),h!==null&&(hb(l,h,i,n),Xe(h,2),Vo(h));break}}i=i.return}}function F0(n,i,l){var h=n.pingCache;if(h===null){h=n.pingCache=new L4;var g=new Set;h.set(i,g)}else g=h.get(i),g===void 0&&(g=new Set,h.set(i,g));g.has(l)||(E0=!0,g.add(l),n=V4.bind(null,n,i,l),i.then(n,n))}function V4(n,i,l){var h=n.pingCache;h!==null&&h.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,dr===n&&(kn&l)===l&&($r===4||$r===3&&(kn&62914560)===kn&&300>Be()-Zd?(Yn&2)===0&&oh(n,0):M0|=l,ih===kn&&(ih=0)),Vo(n)}function uv(n,i){i===0&&(i=Pe()),n=Za(n,i),n!==null&&(Xe(n,i),Vo(n))}function F4(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),uv(n,l)}function B4(n,i){var l=0;switch(n.tag){case 31:case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=n.stateNode;break;case 22:h=n.stateNode._retryCache;break;default:throw Error(s(314))}h!==null&&h.delete(i),uv(n,l)}function z4(n,i){return tt(n,i)}var r1=null,ch=null,B0=!1,s1=!1,z0=!1,uc=0;function Vo(n){n!==ch&&n.next===null&&(ch===null?r1=ch=n:ch=ch.next=n),s1=!0,B0||(B0=!0,q4())}function Sf(n,i){if(!z0&&s1){z0=!0;do for(var l=!1,h=r1;h!==null;){if(n!==0){var g=h.pendingLanes;if(g===0)var w=0;else{var L=h.suspendedLanes,te=h.pingedLanes;w=(1<<31-qt(42|n)+1)-1,w&=g&~(L&~te),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,pv(h,w))}else w=kn,w=Rt(h,h===dr?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Oe(h,w)||(l=!0,pv(h,w));h=h.next}while(l);z0=!1}}function P4(){hv()}function hv(){s1=B0=!1;var n=0;uc!==0&&K4()&&(n=uc);for(var i=Be(),l=null,h=r1;h!==null;){var g=h.next,w=fv(h,i);w===0?(h.next=null,l===null?r1=g:l.next=g,g===null&&(ch=l)):(l=h,(n!==0||(w&3)!==0)&&(s1=!0)),h=g}Ts!==0&&Ts!==5||Sf(n),uc!==0&&(uc=0)}function fv(n,i){for(var l=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var L=31-qt(w),te=1<<L,ge=g[L];ge===-1?((te&l)===0||(te&h)!==0)&&(g[L]=xe(te,i)):ge<=i&&(n.expiredLanes|=te),w&=~te}if(i=dr,l=kn,l=Rt(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h=n.callbackNode,l===0||n===i&&(Kn===2||Kn===9)||n.cancelPendingCommit!==null)return h!==null&&h!==null&&Ue(h),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Oe(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(h!==null&&Ue(h),yn(l)){case 2:case 8:l=ut;break;case 32:l=gt;break;case 268435456:l=xt;break;default:l=gt}return h=dv.bind(null,n),l=tt(l,h),n.callbackPriority=i,n.callbackNode=l,i}return h!==null&&h!==null&&Ue(h),n.callbackPriority=2,n.callbackNode=null,2}function dv(n,i){if(Ts!==0&&Ts!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(n1()&&n.callbackNode!==l)return null;var h=kn;return h=Rt(n,n===dr?h:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h===0?null:(Xb(n,h,i),fv(n,Be()),n.callbackNode!=null&&n.callbackNode===l?dv.bind(null,n):null)}function pv(n,i){if(n1())return null;Xb(n,i,!0)}function q4(){e_(function(){(Yn&6)!==0?tt(nt,P4):hv()})}function P0(){if(uc===0){var n=p;n===0&&(n=Dt,Dt<<=1,(Dt&261888)===0&&(Dt=256)),uc=n}return uc}function mv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ni(""+n)}function gv(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function U4(n,i,l,h,g){if(i==="submit"&&l&&l.stateNode===g){var w=mv((g[qn]||null).action),L=h.submitter;L&&(i=(i=L[qn]||null)?mv(i.formAction):L.getAttribute("formAction"),i!==null&&(w=i,L=null));var te=new Ai("action","action",null,h,g);n.push({event:te,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(uc!==0){var ge=L?gv(g,L):new FormData(g);o0(l,{pending:!0,data:ge,method:g.method,action:w},null,ge)}}else typeof w=="function"&&(te.preventDefault(),ge=L?gv(g,L):new FormData(g),o0(l,{pending:!0,data:ge,method:g.method,action:w},w,ge))},currentTarget:g}]})}}for(var q0=0;q0<al.length;q0++){var U0=al[q0],H4=U0.toLowerCase(),G4=U0[0].toUpperCase()+U0.slice(1);Ti(H4,"on"+G4)}Ti(il,"onAnimationEnd"),Ti(Uc,"onAnimationIteration"),Ti(Qh,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(jd,"onTransitionRun"),Ti(Ed,"onTransitionStart"),Ti(Md,"onTransitionCancel"),Ti(Kh,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nf));function bv(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],g=h.event;h=h.listeners;e:{var w=void 0;if(i)for(var L=h.length-1;0<=L;L--){var te=h[L],ge=te.instance,Me=te.currentTarget;if(te=te.listener,ge!==w&&g.isPropagationStopped())break e;w=te,g.currentTarget=Me;try{w(g)}catch(He){Hc(He)}g.currentTarget=null,w=ge}else for(L=0;L<h.length;L++){if(te=h[L],ge=te.instance,Me=te.currentTarget,te=te.listener,ge!==w&&g.isPropagationStopped())break e;w=te,g.currentTarget=Me;try{w(g)}catch(He){Hc(He)}g.currentTarget=null,w=ge}}}}function Cn(n,i){var l=i[wn];l===void 0&&(l=i[wn]=new Set);var h=n+"__bubble";l.has(h)||(vv(i,n,2,!1),l.add(h))}function H0(n,i,l){var h=0;i&&(h|=4),vv(l,n,h,i)}var i1="_reactListening"+Math.random().toString(36).slice(2);function G0(n){if(!n[i1]){n[i1]=!0,nr.forEach(function(l){l!=="selectionchange"&&(W4.has(l)||H0(l,!1,n),H0(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[i1]||(i[i1]=!0,H0("selectionchange",!1,i))}}function vv(n,i,l,h){switch(Yv(i)){case 2:var g=x_;break;case 8:g=w_;break;default:g=am}l=g.bind(null,i,l,n),g=void 0,!Fc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(i,l,{capture:!0,passive:g}):n.addEventListener(i,l,!0):g!==void 0?n.addEventListener(i,l,{passive:g}):n.addEventListener(i,l,!1)}function W0(n,i,l,h,g){var w=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var L=h.tag;if(L===3||L===4){var te=h.stateNode.containerInfo;if(te===g)break;if(L===4)for(L=h.return;L!==null;){var ge=L.tag;if((ge===3||ge===4)&&L.stateNode.containerInfo===g)return;L=L.return}for(;te!==null;){if(L=rt(te),L===null)return;if(ge=L.tag,ge===5||ge===6||ge===26||ge===27){h=w=L;continue e}te=te.parentNode}}h=h.return}Eu(function(){var Me=w,He=Ko(l),Ze=[];e:{var De=Jh.get(n);if(De!==void 0){var Ve=Ai,Ct=n;switch(n){case"keypress":if(Ni(l)===0)break e;case"keydown":case"keyup":Ve=On;break;case"focusin":Ct="focus",Ve=Ba;break;case"focusout":Ct="blur",Ve=Ba;break;case"beforeblur":case"afterblur":Ve=Ba;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Fa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=Jr;break;case il:case Uc:case Qh:Ve=S;break;case Kh:Ve=xs;break;case"scroll":case"scrollend":Ve=zl;break;case"wheel":Ve=Qi;break;case"copy":case"cut":case"paste":Ve=ue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Vr;break;case"toggle":case"beforetoggle":Ve=zc}var Gt=(i&4)!==0,lr=!Gt&&(n==="scroll"||n==="scrollend"),Ce=Gt?De!==null?De+"Capture":null:De;Gt=[];for(var we=Me,Ee;we!==null;){var $e=we;if(Ee=$e.stateNode,$e=$e.tag,$e!==5&&$e!==26&&$e!==27||Ee===null||Ce===null||($e=di(we,Ce),$e!=null&&Gt.push(Af(we,$e,Ee))),lr)break;we=we.return}0<Gt.length&&(De=new Ve(De,Ct,null,l,He),Ze.push({event:De,listeners:Gt}))}}if((i&7)===0){e:{if(De=n==="mouseover"||n==="pointerover",Ve=n==="mouseout"||n==="pointerout",De&&l!==Oa&&(Ct=l.relatedTarget||l.fromElement)&&(rt(Ct)||Ct[vr]))break e;if((Ve||De)&&(De=He.window===He?He:(De=He.ownerDocument)?De.defaultView||De.parentWindow:window,Ve?(Ct=l.relatedTarget||l.toElement,Ve=Me,Ct=Ct?rt(Ct):null,Ct!==null&&(lr=o(Ct),Gt=Ct.tag,Ct!==lr||Gt!==5&&Gt!==27&&Gt!==6)&&(Ct=null)):(Ve=null,Ct=Me),Ve!==Ct)){if(Gt=Bc,$e="onMouseLeave",Ce="onMouseEnter",we="mouse",(n==="pointerout"||n==="pointerover")&&(Gt=Vr,$e="onPointerLeave",Ce="onPointerEnter",we="pointer"),lr=Ve==null?De:$n(Ve),Ee=Ct==null?De:$n(Ct),De=new Gt($e,we+"leave",Ve,l,He),De.target=lr,De.relatedTarget=Ee,$e=null,rt(He)===Me&&(Gt=new Gt(Ce,we+"enter",Ct,l,He),Gt.target=Ee,Gt.relatedTarget=lr,$e=Gt),lr=$e,Ve&&Ct)t:{for(Gt=Y4,Ce=Ve,we=Ct,Ee=0,$e=Ce;$e;$e=Gt($e))Ee++;$e=0;for(var Pt=we;Pt;Pt=Gt(Pt))$e++;for(;0<Ee-$e;)Ce=Gt(Ce),Ee--;for(;0<$e-Ee;)we=Gt(we),$e--;for(;Ee--;){if(Ce===we||we!==null&&Ce===we.alternate){Gt=Ce;break t}Ce=Gt(Ce),we=Gt(we)}Gt=null}else Gt=null;Ve!==null&&yv(Ze,De,Ve,Gt,!1),Ct!==null&&lr!==null&&yv(Ze,lr,Ct,Gt,!0)}}e:{if(De=Me?$n(Me):window,Ve=De.nodeName&&De.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&De.type==="file")var Un=No;else if(Pc(De))if(ri)Un=va;else{Un=Fr;var Ot=Gl}else Ve=De.nodeName,!Ve||Ve.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Me&&Rc(Me.elementType)&&(Un=No):Un=Du;if(Un&&(Un=Un(n,Me))){mi(Ze,Un,l,He);break e}Ot&&Ot(n,De,Me),n==="focusout"&&Me&&De.type==="number"&&Me.memoizedProps.value!=null&&$o(De,"number",De.value)}switch(Ot=Me?$n(Me):window,n){case"focusin":(Pc(Ot)||Ot.contentEditable==="true")&&(gi=Ot,$a=Me,Ls=null);break;case"focusout":Ls=$a=gi=null;break;case"mousedown":Ci=!0;break;case"contextmenu":case"mouseup":case"dragend":Ci=!1,zn(Ze,l,He);break;case"selectionchange":if(sl)break;case"keydown":case"keyup":zn(Ze,l,He)}var gn;if(pa)e:{switch(n){case"compositionstart":var jn="onCompositionStart";break e;case"compositionend":jn="onCompositionEnd";break e;case"compositionupdate":jn="onCompositionUpdate";break e}jn=void 0}else ma?So(n,l)&&(jn="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(jn="onCompositionStart");jn&&(qa&&l.locale!=="ko"&&(ma||jn!=="onCompositionStart"?jn==="onCompositionEnd"&&ma&&(gn=Mu()):(pi=He,el="value"in pi?pi.value:pi.textContent,ma=!0)),Ot=a1(Me,jn),0<Ot.length&&(jn=new Ae(jn,n,null,l,He),Ze.push({event:jn,listeners:Ot}),gn?jn.data=gn:(gn=ql(l),gn!==null&&(jn.data=gn)))),(gn=rl?Gs(n,l):Ua(n,l))&&(jn=a1(Me,"onBeforeInput"),0<jn.length&&(Ot=new Ae("onBeforeInput","beforeinput",null,l,He),Ze.push({event:Ot,listeners:jn}),Ot.data=gn)),U4(Ze,n,Me,l,He)}bv(Ze,i)})}function Af(n,i,l){return{instance:n,listener:i,currentTarget:l}}function a1(n,i){for(var l=i+"Capture",h=[];n!==null;){var g=n,w=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||w===null||(g=di(n,l),g!=null&&h.unshift(Af(n,g,w)),g=di(n,i),g!=null&&h.push(Af(n,g,w))),n.tag===3)return h;n=n.return}return[]}function Y4(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function yv(n,i,l,h,g){for(var w=i._reactName,L=[];l!==null&&l!==h;){var te=l,ge=te.alternate,Me=te.stateNode;if(te=te.tag,ge!==null&&ge===h)break;te!==5&&te!==26&&te!==27||Me===null||(ge=Me,g?(Me=di(l,w),Me!=null&&L.unshift(Af(l,Me,ge))):g||(Me=di(l,w),Me!=null&&L.push(Af(l,Me,ge)))),l=l.return}L.length!==0&&n.push({event:i,listeners:L})}var X4=/\r\n?/g,$4=/\u0000|\uFFFD/g;function xv(n){return(typeof n=="string"?n:""+n).replace(X4,`
`).replace($4,"")}function wv(n,i){return i=xv(i),xv(n)===i}function or(n,i,l,h,g,w){switch(l){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||$i(n,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&$i(n,""+h);break;case"className":ti(n,"class",h);break;case"tabIndex":ti(n,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(n,l,h);break;case"style":Tu(n,h,w);break;case"data":if(i!=="object"){ti(n,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(l);break}h=ni(""+h),n.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(i!=="input"&&or(n,i,"name",g.name,g,null),or(n,i,"formEncType",g.formEncType,g,null),or(n,i,"formMethod",g.formMethod,g,null),or(n,i,"formTarget",g.formTarget,g,null)):(or(n,i,"encType",g.encType,g,null),or(n,i,"method",g.method,g,null),or(n,i,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(l);break}h=ni(""+h),n.setAttribute(l,h);break;case"onClick":h!=null&&(n.onclick=Zi);break;case"onScroll":h!=null&&Cn("scroll",n);break;case"onScrollEnd":h!=null&&Cn("scrollend",n);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"multiple":n.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":n.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){n.removeAttribute("xlink:href");break}l=ni(""+h),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(l,""+h):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":h===!0?n.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(l,h):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?n.setAttribute(l,h):n.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?n.removeAttribute(l):n.setAttribute(l,h);break;case"popover":Cn("beforetoggle",n),Cn("toggle",n),qr(n,"popover",h);break;case"xlinkActuate":gs(n,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":gs(n,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":gs(n,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":gs(n,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":gs(n,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":gs(n,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":gs(n,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":gs(n,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":gs(n,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":qr(n,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ic.get(l)||l,qr(n,l,h))}}function Y0(n,i,l,h,g,w){switch(l){case"style":Tu(n,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"children":typeof h=="string"?$i(n,h):(typeof h=="number"||typeof h=="bigint")&&$i(n,""+h);break;case"onScroll":h!=null&&Cn("scroll",n);break;case"onScrollEnd":h!=null&&Cn("scrollend",n);break;case"onClick":h!=null&&(n.onclick=Zi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zn.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),i=l.slice(2,g?l.length-7:void 0),w=n[qn]||null,w=w!=null?w[l]:null,typeof w=="function"&&n.removeEventListener(i,w,g),typeof h=="function")){typeof w!="function"&&w!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,h,g);break e}l in n?n[l]=h:h===!0?n.setAttribute(l,""):qr(n,l,h)}}}function Zs(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cn("error",n),Cn("load",n);var h=!1,g=!1,w;for(w in l)if(l.hasOwnProperty(w)){var L=l[w];if(L!=null)switch(w){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:or(n,i,w,L,l,null)}}g&&or(n,i,"srcSet",l.srcSet,l,null),h&&or(n,i,"src",l.src,l,null);return;case"input":Cn("invalid",n);var te=w=L=g=null,ge=null,Me=null;for(h in l)if(l.hasOwnProperty(h)){var He=l[h];if(He!=null)switch(h){case"name":g=He;break;case"type":L=He;break;case"checked":ge=He;break;case"defaultChecked":Me=He;break;case"value":w=He;break;case"defaultValue":te=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(s(137,i));break;default:or(n,i,h,He,l,null)}}Vl(n,w,te,ge,Me,L,g,!1);return;case"select":Cn("invalid",n),h=L=w=null;for(g in l)if(l.hasOwnProperty(g)&&(te=l[g],te!=null))switch(g){case"value":w=te;break;case"defaultValue":L=te;break;case"multiple":h=te;default:or(n,i,g,te,l,null)}i=w,l=L,n.multiple=!!h,i!=null?vs(n,!!h,i,!1):l!=null&&vs(n,!!h,l,!0);return;case"textarea":Cn("invalid",n),w=g=h=null;for(L in l)if(l.hasOwnProperty(L)&&(te=l[L],te!=null))switch(L){case"value":h=te;break;case"defaultValue":g=te;break;case"children":w=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(91));break;default:or(n,i,L,te,l,null)}Dc(n,h,g,w);return;case"option":for(ge in l)if(l.hasOwnProperty(ge)&&(h=l[ge],h!=null))switch(ge){case"selected":n.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:or(n,i,ge,h,l,null)}return;case"dialog":Cn("beforetoggle",n),Cn("toggle",n),Cn("cancel",n),Cn("close",n);break;case"iframe":case"object":Cn("load",n);break;case"video":case"audio":for(h=0;h<Nf.length;h++)Cn(Nf[h],n);break;case"image":Cn("error",n),Cn("load",n);break;case"details":Cn("toggle",n);break;case"embed":case"source":case"link":Cn("error",n),Cn("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Me in l)if(l.hasOwnProperty(Me)&&(h=l[Me],h!=null))switch(Me){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:or(n,i,Me,h,l,null)}return;default:if(Rc(i)){for(He in l)l.hasOwnProperty(He)&&(h=l[He],h!==void 0&&Y0(n,i,He,h,l,void 0));return}}for(te in l)l.hasOwnProperty(te)&&(h=l[te],h!=null&&or(n,i,te,h,l,null))}function Z4(n,i,l,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,w=null,L=null,te=null,ge=null,Me=null,He=null;for(Ve in l){var Ze=l[Ve];if(l.hasOwnProperty(Ve)&&Ze!=null)switch(Ve){case"checked":break;case"value":break;case"defaultValue":ge=Ze;default:h.hasOwnProperty(Ve)||or(n,i,Ve,null,h,Ze)}}for(var De in h){var Ve=h[De];if(Ze=l[De],h.hasOwnProperty(De)&&(Ve!=null||Ze!=null))switch(De){case"type":w=Ve;break;case"name":g=Ve;break;case"checked":Me=Ve;break;case"defaultChecked":He=Ve;break;case"value":L=Ve;break;case"defaultValue":te=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(s(137,i));break;default:Ve!==Ze&&or(n,i,De,Ve,h,Ze)}}xo(n,L,te,ge,Me,He,w,g);return;case"select":Ve=L=te=De=null;for(w in l)if(ge=l[w],l.hasOwnProperty(w)&&ge!=null)switch(w){case"value":break;case"multiple":Ve=ge;default:h.hasOwnProperty(w)||or(n,i,w,null,h,ge)}for(g in h)if(w=h[g],ge=l[g],h.hasOwnProperty(g)&&(w!=null||ge!=null))switch(g){case"value":De=w;break;case"defaultValue":te=w;break;case"multiple":L=w;default:w!==ge&&or(n,i,g,w,h,ge)}i=te,l=L,h=Ve,De!=null?vs(n,!!l,De,!1):!!h!=!!l&&(i!=null?vs(n,!!l,i,!0):vs(n,!!l,l?[]:"",!1));return;case"textarea":Ve=De=null;for(te in l)if(g=l[te],l.hasOwnProperty(te)&&g!=null&&!h.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:or(n,i,te,null,h,g)}for(L in h)if(g=h[L],w=l[L],h.hasOwnProperty(L)&&(g!=null||w!=null))switch(L){case"value":De=g;break;case"defaultValue":Ve=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==w&&or(n,i,L,g,h,w)}Zo(n,De,Ve);return;case"option":for(var Ct in l)if(De=l[Ct],l.hasOwnProperty(Ct)&&De!=null&&!h.hasOwnProperty(Ct))switch(Ct){case"selected":n.selected=!1;break;default:or(n,i,Ct,null,h,De)}for(ge in h)if(De=h[ge],Ve=l[ge],h.hasOwnProperty(ge)&&De!==Ve&&(De!=null||Ve!=null))switch(ge){case"selected":n.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:or(n,i,ge,De,h,Ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in l)De=l[Gt],l.hasOwnProperty(Gt)&&De!=null&&!h.hasOwnProperty(Gt)&&or(n,i,Gt,null,h,De);for(Me in h)if(De=h[Me],Ve=l[Me],h.hasOwnProperty(Me)&&De!==Ve&&(De!=null||Ve!=null))switch(Me){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(s(137,i));break;default:or(n,i,Me,De,h,Ve)}return;default:if(Rc(i)){for(var lr in l)De=l[lr],l.hasOwnProperty(lr)&&De!==void 0&&!h.hasOwnProperty(lr)&&Y0(n,i,lr,void 0,h,De);for(He in h)De=h[He],Ve=l[He],!h.hasOwnProperty(He)||De===Ve||De===void 0&&Ve===void 0||Y0(n,i,He,De,h,Ve);return}}for(var Ce in l)De=l[Ce],l.hasOwnProperty(Ce)&&De!=null&&!h.hasOwnProperty(Ce)&&or(n,i,Ce,null,h,De);for(Ze in h)De=h[Ze],Ve=l[Ze],!h.hasOwnProperty(Ze)||De===Ve||De==null&&Ve==null||or(n,i,Ze,De,h,Ve)}function _v(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Q4(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var g=l[h],w=g.transferSize,L=g.initiatorType,te=g.duration;if(w&&te&&_v(L)){for(L=0,te=g.responseEnd,h+=1;h<l.length;h++){var ge=l[h],Me=ge.startTime;if(Me>te)break;var He=ge.transferSize,Ze=ge.initiatorType;He&&_v(Ze)&&(ge=ge.responseEnd,L+=He*(ge<te?1:(te-Me)/(ge-Me)))}if(--h,i+=8*(w+L)/(g.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var X0=null,$0=null;function o1(n){return n.nodeType===9?n:n.ownerDocument}function Sv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Z0(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Q0=null;function K4(){var n=window.event;return n&&n.type==="popstate"?n===Q0?!1:(Q0=n,!0):(Q0=null,!1)}var Av=typeof setTimeout=="function"?setTimeout:void 0,J4=typeof clearTimeout=="function"?clearTimeout:void 0,Cv=typeof Promise=="function"?Promise:void 0,e_=typeof queueMicrotask=="function"?queueMicrotask:typeof Cv<"u"?function(n){return Cv.resolve(null).then(n).catch(t_)}:Av;function t_(n){setTimeout(function(){throw n})}function hc(n){return n==="head"}function Tv(n,i){var l=i,h=0;do{var g=l.nextSibling;if(n.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(h===0){n.removeChild(g),dh(i);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")Cf(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Cf(l);for(var w=l.firstChild;w;){var L=w.nextSibling,te=w.nodeName;w[Ne]||te==="SCRIPT"||te==="STYLE"||te==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=L}}else l==="body"&&Cf(n.ownerDocument.body);l=g}while(l);dh(i)}function kv(n,i){var l=n;n=0;do{var h=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=h}while(l)}function K0(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":K0(l),Ie(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function n_(n,i,l,h){for(;n.nodeType===1;){var g=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(h){if(!n[Ne])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var w=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=Aa(n.nextSibling),n===null)break}return null}function r_(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Aa(n.nextSibling),n===null))return null;return n}function jv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Aa(n.nextSibling),n===null))return null;return n}function J0(n){return n.data==="$?"||n.data==="$~"}function em(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function s_(n,i){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||l.readyState!=="loading")i();else{var h=function(){i(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),n._reactRetry=h}}function Aa(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var tm=null;function Ev(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(i===0)return Aa(n.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}n=n.nextSibling}return null}function Mv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return n;i--}else l!=="/$"&&l!=="/&"||i++}n=n.previousSibling}return null}function Lv(n,i,l){switch(i=o1(l),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Cf(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ie(n)}var Ca=new Map,Ov=new Set;function l1(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var _l=se.d;se.d={f:i_,r:a_,D:o_,C:l_,L:c_,m:u_,X:f_,S:h_,M:d_};function i_(){var n=_l.f(),i=Jd();return n||i}function a_(n){var i=Yt(n);i!==null&&i.tag===5&&i.type==="form"?Z2(i):_l.r(n)}var uh=typeof document>"u"?null:document;function Dv(n,i,l){var h=uh;if(h&&typeof i=="string"&&i){var g=yr(i);g='link[rel="'+n+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Ov.has(g)||(Ov.add(g),n={rel:n,crossOrigin:l,href:i},h.querySelector(g)===null&&(i=h.createElement("link"),Zs(i,"link",n),$t(i),h.head.appendChild(i)))}}function o_(n){_l.D(n),Dv("dns-prefetch",n,null)}function l_(n,i){_l.C(n,i),Dv("preconnect",n,i)}function c_(n,i,l){_l.L(n,i,l);var h=uh;if(h&&n&&i){var g='link[rel="preload"][as="'+yr(i)+'"]';i==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+yr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+yr(l.imageSizes)+'"]')):g+='[href="'+yr(n)+'"]';var w=g;switch(i){case"style":w=hh(n);break;case"script":w=fh(n)}Ca.has(w)||(n=y({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),Ca.set(w,n),h.querySelector(g)!==null||i==="style"&&h.querySelector(Tf(w))||i==="script"&&h.querySelector(kf(w))||(i=h.createElement("link"),Zs(i,"link",n),$t(i),h.head.appendChild(i)))}}function u_(n,i){_l.m(n,i);var l=uh;if(l&&n){var h=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+yr(h)+'"][href="'+yr(n)+'"]',w=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=fh(n)}if(!Ca.has(w)&&(n=y({rel:"modulepreload",href:n},i),Ca.set(w,n),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(kf(w)))return}h=l.createElement("link"),Zs(h,"link",n),$t(h),l.head.appendChild(h)}}}function h_(n,i,l){_l.S(n,i,l);var h=uh;if(h&&n){var g=an(h).hoistableStyles,w=hh(n);i=i||"default";var L=g.get(w);if(!L){var te={loading:0,preload:null};if(L=h.querySelector(Tf(w)))te.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":i},l),(l=Ca.get(w))&&nm(n,l);var ge=L=h.createElement("link");$t(ge),Zs(ge,"link",n),ge._p=new Promise(function(Me,He){ge.onload=Me,ge.onerror=He}),ge.addEventListener("load",function(){te.loading|=1}),ge.addEventListener("error",function(){te.loading|=2}),te.loading|=4,c1(L,i,h)}L={type:"stylesheet",instance:L,count:1,state:te},g.set(w,L)}}}function f_(n,i){_l.X(n,i);var l=uh;if(l&&n){var h=an(l).hoistableScripts,g=fh(n),w=h.get(g);w||(w=l.querySelector(kf(g)),w||(n=y({src:n,async:!0},i),(i=Ca.get(g))&&rm(n,i),w=l.createElement("script"),$t(w),Zs(w,"link",n),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(g,w))}}function d_(n,i){_l.M(n,i);var l=uh;if(l&&n){var h=an(l).hoistableScripts,g=fh(n),w=h.get(g);w||(w=l.querySelector(kf(g)),w||(n=y({src:n,async:!0,type:"module"},i),(i=Ca.get(g))&&rm(n,i),w=l.createElement("script"),$t(w),Zs(w,"link",n),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(g,w))}}function Rv(n,i,l,h){var g=(g=oe.current)?l1(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=hh(l.href),l=an(g).hoistableStyles,h=l.get(i),h||(h={type:"style",instance:null,count:0,state:null},l.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=hh(l.href);var w=an(g).hoistableStyles,L=w.get(n);if(L||(g=g.ownerDocument||g,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,L),(w=g.querySelector(Tf(n)))&&!w._p&&(L.instance=w,L.state.loading=5),Ca.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ca.set(n,l),w||p_(g,n,l,L.state))),i&&h===null)throw Error(s(528,""));return L}if(i&&h!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=fh(l),l=an(g).hoistableScripts,h=l.get(i),h||(h={type:"script",instance:null,count:0,state:null},l.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function hh(n){return'href="'+yr(n)+'"'}function Tf(n){return'link[rel="stylesheet"]['+n+"]"}function Iv(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function p_(n,i,l,h){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=n.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),Zs(i,"link",l),$t(i),n.head.appendChild(i))}function fh(n){return'[src="'+yr(n)+'"]'}function kf(n){return"script[async]"+n}function Vv(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var h=n.querySelector('style[data-href~="'+yr(l.href)+'"]');if(h)return i.instance=h,$t(h),h;var g=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(n.ownerDocument||n).createElement("style"),$t(h),Zs(h,"style",g),c1(h,l.precedence,n),i.instance=h;case"stylesheet":g=hh(l.href);var w=n.querySelector(Tf(g));if(w)return i.state.loading|=4,i.instance=w,$t(w),w;h=Iv(l),(g=Ca.get(g))&&nm(h,g),w=(n.ownerDocument||n).createElement("link"),$t(w);var L=w;return L._p=new Promise(function(te,ge){L.onload=te,L.onerror=ge}),Zs(w,"link",h),i.state.loading|=4,c1(w,l.precedence,n),i.instance=w;case"script":return w=fh(l.src),(g=n.querySelector(kf(w)))?(i.instance=g,$t(g),g):(h=l,(g=Ca.get(w))&&(h=y({},l),rm(h,g)),n=n.ownerDocument||n,g=n.createElement("script"),$t(g),Zs(g,"link",h),n.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(h=i.instance,i.state.loading|=4,c1(h,l.precedence,n));return i.instance}function c1(n,i,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,w=g,L=0;L<h.length;L++){var te=h[L];if(te.dataset.precedence===i)w=te;else if(w!==g)break}w?w.parentNode.insertBefore(n,w.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function nm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function rm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var u1=null;function Fv(n,i,l){if(u1===null){var h=new Map,g=u1=new Map;g.set(l,h)}else g=u1,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(n))return h;for(h.set(n,null),l=l.getElementsByTagName(n),g=0;g<l.length;g++){var w=l[g];if(!(w[Ne]||w[Ln]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var L=w.getAttribute(i)||"";L=n+L;var te=h.get(L);te?te.push(w):h.set(L,[w])}}return h}function Bv(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function m_(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function zv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function g_(n,i,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=hh(h.href),w=i.querySelector(Tf(g));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=h1.bind(n),i.then(n,n)),l.state.loading|=4,l.instance=w,$t(w);return}w=i.ownerDocument||i,h=Iv(h),(g=Ca.get(g))&&nm(h,g),w=w.createElement("link"),$t(w);var L=w;L._p=new Promise(function(te,ge){L.onload=te,L.onerror=ge}),Zs(w,"link",h),l.instance=w}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=h1.bind(n),i.addEventListener("load",l),i.addEventListener("error",l))}}var sm=0;function b_(n,i){return n.stylesheets&&n.count===0&&d1(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var h=setTimeout(function(){if(n.stylesheets&&d1(n,n.stylesheets),n.unsuspend){var w=n.unsuspend;n.unsuspend=null,w()}},6e4+i);0<n.imgBytes&&sm===0&&(sm=62500*Q4());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&d1(n,n.stylesheets),n.unsuspend)){var w=n.unsuspend;n.unsuspend=null,w()}},(n.imgBytes>sm?50:800)+i);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function h1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)d1(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var f1=null;function d1(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,f1=new Map,i.forEach(v_,n),f1=null,h1.call(n))}function v_(n,i){if(!(i.state.loading&4)){var l=f1.get(n);if(l)var h=l.get(null);else{l=new Map,f1.set(n,l);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<g.length;w++){var L=g[w];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(l.set(L.dataset.precedence,L),h=L)}h&&l.set(null,h)}g=i.instance,L=g.getAttribute("data-precedence"),w=l.get(L)||h,w===h&&l.set(null,g),l.set(L,g),this.count++,h=h1.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),w?w.parentNode.insertBefore(g,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),i.state.loading|=4}}var jf={$$typeof:D,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function y_(n,i,l,h,g,w,L,te,ge){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lt(0),this.hiddenUpdates=lt(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=w,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function Pv(n,i,l,h,g,w,L,te,ge,Me,He,Ze){return n=new y_(n,i,l,L,ge,Me,He,Ze,te),i=1,w===!0&&(i|=24),w=Ds(3,null,null,i),n.current=w,w.stateNode=n,i=Jl(),i.refCount++,n.pooledCache=i,i.refCount++,w.memoizedState={element:h,isDehydrated:l,cache:i},ft(w),n}function qv(n){return n?(n=_s,n):_s}function Uv(n,i,l,h,g,w){g=qv(g),h.context===null?h.context=g:h.pendingContext=g,h=Ht(i),h.payload={element:l},w=w===void 0?null:w,w!==null&&(h.callback=w),l=fn(n,h,i),l!==null&&(zi(l,n,i),Gn(l,n,i))}function Hv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function im(n,i){Hv(n,i),(n=n.alternate)&&Hv(n,i)}function Gv(n){if(n.tag===13||n.tag===31){var i=Za(n,67108864);i!==null&&zi(i,n,67108864),im(n,67108864)}}function Wv(n){if(n.tag===13||n.tag===31){var i=ia();i=en(i);var l=Za(n,i);l!==null&&zi(l,n,i),im(n,i)}}var p1=!0;function x_(n,i,l,h){var g=I.T;I.T=null;var w=se.p;try{se.p=2,am(n,i,l,h)}finally{se.p=w,I.T=g}}function w_(n,i,l,h){var g=I.T;I.T=null;var w=se.p;try{se.p=8,am(n,i,l,h)}finally{se.p=w,I.T=g}}function am(n,i,l,h){if(p1){var g=om(h);if(g===null)W0(n,i,h,m1,l),Xv(n,h);else if(S_(g,n,i,l,h))h.stopPropagation();else if(Xv(n,h),i&4&&-1<__.indexOf(n)){for(;g!==null;){var w=Yt(g);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var L=mt(w.pendingLanes);if(L!==0){var te=w;for(te.pendingLanes|=2,te.entangledLanes|=2;L;){var ge=1<<31-qt(L);te.entanglements[1]|=ge,L&=~ge}Vo(w),(Yn&6)===0&&(Qd=Be()+500,Sf(0))}}break;case 31:case 13:te=Za(w,2),te!==null&&zi(te,w,2),Jd(),im(w,2)}if(w=om(h),w===null&&W0(n,i,h,m1,l),w===g)break;g=w}g!==null&&h.stopPropagation()}else W0(n,i,h,null,l)}}function om(n){return n=Ko(n),lm(n)}var m1=null;function lm(n){if(m1=null,n=rt(n),n!==null){var i=o(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=u(i),n!==null)return n;n=null}else if(l===31){if(n=c(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return m1=n,null}function Yv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case nt:return 2;case ut:return 8;case gt:case dt:return 32;case xt:return 268435456;default:return 32}default:return 32}}var cm=!1,fc=null,dc=null,pc=null,Ef=new Map,Mf=new Map,mc=[],__="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xv(n,i){switch(n){case"focusin":case"focusout":fc=null;break;case"dragenter":case"dragleave":dc=null;break;case"mouseover":case"mouseout":pc=null;break;case"pointerover":case"pointerout":Ef.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mf.delete(i.pointerId)}}function Lf(n,i,l,h,g,w){return n===null||n.nativeEvent!==w?(n={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:w,targetContainers:[g]},i!==null&&(i=Yt(i),i!==null&&Gv(i)),n):(n.eventSystemFlags|=h,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function S_(n,i,l,h,g){switch(i){case"focusin":return fc=Lf(fc,n,i,l,h,g),!0;case"dragenter":return dc=Lf(dc,n,i,l,h,g),!0;case"mouseover":return pc=Lf(pc,n,i,l,h,g),!0;case"pointerover":var w=g.pointerId;return Ef.set(w,Lf(Ef.get(w)||null,n,i,l,h,g)),!0;case"gotpointercapture":return w=g.pointerId,Mf.set(w,Lf(Mf.get(w)||null,n,i,l,h,g)),!0}return!1}function $v(n){var i=rt(n.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=u(l),i!==null){n.blockedOn=i,xn(n.priority,function(){Wv(l)});return}}else if(i===31){if(i=c(l),i!==null){n.blockedOn=i,xn(n.priority,function(){Wv(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function g1(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=om(n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Oa=h,l.target.dispatchEvent(h),Oa=null}else return i=Yt(l),i!==null&&Gv(i),n.blockedOn=l,!1;i.shift()}return!0}function Zv(n,i,l){g1(n)&&l.delete(i)}function N_(){cm=!1,fc!==null&&g1(fc)&&(fc=null),dc!==null&&g1(dc)&&(dc=null),pc!==null&&g1(pc)&&(pc=null),Ef.forEach(Zv),Mf.forEach(Zv)}function b1(n,i){n.blockedOn===i&&(n.blockedOn=null,cm||(cm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,N_)))}var v1=null;function Qv(n){v1!==n&&(v1=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){v1===n&&(v1=null);for(var i=0;i<n.length;i+=3){var l=n[i],h=n[i+1],g=n[i+2];if(typeof h!="function"){if(lm(h||l)===null)continue;break}var w=Yt(l);w!==null&&(n.splice(i,3),i-=3,o0(w,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function dh(n){function i(ge){return b1(ge,n)}fc!==null&&b1(fc,n),dc!==null&&b1(dc,n),pc!==null&&b1(pc,n),Ef.forEach(i),Mf.forEach(i);for(var l=0;l<mc.length;l++){var h=mc[l];h.blockedOn===n&&(h.blockedOn=null)}for(;0<mc.length&&(l=mc[0],l.blockedOn===null);)$v(l),l.blockedOn===null&&mc.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],w=l[h+1],L=g[qn]||null;if(typeof w=="function")L||Qv(l);else if(L){var te=null;if(w&&w.hasAttribute("formAction")){if(g=w,L=w[qn]||null)te=L.formAction;else if(lm(g)!==null)continue}else te=L.action;typeof te=="function"?l[h+1]=te:(l.splice(h,3),h-=3),Qv(l)}}}function Kv(){function n(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(L){return g=L})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function um(n){this._internalRoot=n}y1.prototype.render=um.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,h=ia();Uv(l,h,n,i,null,null)},y1.prototype.unmount=um.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Uv(n.current,2,null,n,null,null),Jd(),i[vr]=null}};function y1(n){this._internalRoot=n}y1.prototype.unstable_scheduleHydration=function(n){if(n){var i=Qt();n={blockedOn:null,target:n,priority:i};for(var l=0;l<mc.length&&i!==0&&i<mc[l].priority;l++);mc.splice(l,0,n),l===0&&$v(n)}};var Jv=e.version;if(Jv!=="19.2.0")throw Error(s(527,Jv,"19.2.0"));se.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=d(i),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var A_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var x1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!x1.isDisabled&&x1.supportsFiber)try{Vt=x1.inject(A_),bt=x1}catch{}}return Df.createRoot=function(n,i){if(!a(n))throw Error(s(299));var l=!1,h="",g=ab,w=ob,L=lb;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(L=i.onRecoverableError)),i=Pv(n,1,!1,null,null,l,h,null,g,w,L,Kv),n[vr]=i.current,G0(n),new um(i)},Df.hydrateRoot=function(n,i,l){if(!a(n))throw Error(s(299));var h=!1,g="",w=ab,L=ob,te=lb,ge=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(L=l.onCaughtError),l.onRecoverableError!==void 0&&(te=l.onRecoverableError),l.formState!==void 0&&(ge=l.formState)),i=Pv(n,1,!0,i,l??null,h,g,ge,w,L,te,Kv),i.context=qv(null),l=i.current,h=ia(),h=en(h),g=Ht(h),g.callback=null,fn(l,g,h),l=h,i.current.lanes=l,Xe(i,l),Vo(i),n[vr]=i.current,G0(n),new y1(i)},Df.version="19.2.0",Df}var c5;function R_(){if(c5)return dm.exports;c5=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dm.exports=D_(),dm.exports}var I_=R_(),Po=Nx();const u5=r=>{let e;const t=new Set,s=(d,m)=>{const y=typeof d=="function"?d(e):d;if(!Object.is(y,e)){const _=e;e=m??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,_))}},a=()=>e,c={setState:s,getState:a,getInitialState:()=>f,subscribe:d=>(t.add(d),()=>t.delete(d))},f=e=r(s,a,c);return c},V_=(r=>r?u5(r):u5),F_=r=>r;function B_(r,e=F_){const t=Xn.useSyncExternalStore(r.subscribe,Xn.useCallback(()=>e(r.getState()),[r,e]),Xn.useCallback(()=>e(r.getInitialState()),[r,e]));return Xn.useDebugValue(t),t}const z_=r=>{const e=V_(r),t=s=>B_(e,s);return Object.assign(t,e),t},P_=(r=>z_);function q_(r,e){let t;try{t=r()}catch{return}return{getItem:a=>{var o;const u=f=>f===null?null:JSON.parse(f,void 0),c=(o=t.getItem(a))!=null?o:null;return c instanceof Promise?c.then(u):u(c)},setItem:(a,o)=>t.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>t.removeItem(a)}}const Ym=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(s){return Ym(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return Ym(s)(t)}}}},U_=(r,e)=>(t,s,a)=>{let o={storage:q_(()=>localStorage),partialize:A=>A,version:0,merge:(A,k)=>({...k,...A}),...e},u=!1;const c=new Set,f=new Set;let d=o.storage;if(!d)return r((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...A)},s,a);const m=()=>{const A=o.partialize({...s()});return d.setItem(o.name,{state:A,version:o.version})},y=a.setState;a.setState=(A,k)=>(y(A,k),m());const _=r((...A)=>(t(...A),m()),s,a);a.getInitialState=()=>_;let b;const N=()=>{var A,k;if(!d)return;u=!1,c.forEach(R=>{var D;return R((D=s())!=null?D:_)});const T=((k=o.onRehydrateStorage)==null?void 0:k.call(o,(A=s())!=null?A:_))||void 0;return Ym(d.getItem.bind(d))(o.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==o.version){if(o.migrate){const D=o.migrate(R.state,R.version);return D instanceof Promise?D.then(F=>[!0,F]):[!0,D]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var D;const[F,B]=R;if(b=o.merge(B,(D=s())!=null?D:_),t(b,!0),F)return m()}).then(()=>{T?.(b,void 0),b=s(),u=!0,f.forEach(R=>R(b))}).catch(R=>{T?.(void 0,R)})};return a.persist={setOptions:A=>{o={...o,...A},A.storage&&(d=A.storage)},clearStorage:()=>{d?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>N(),hasHydrated:()=>u,onHydrate:A=>(c.add(A),()=>{c.delete(A)}),onFinishHydration:A=>(f.add(A),()=>{f.delete(A)})},o.skipHydration||N(),b||_},H_=U_,Tl=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Pf=["C","G","D","A","E","B","F#","Db","Ab","Eb","Bb","F"],G_=[{major:"C",ii:"Dm",iii:"Em",diminished:"B"},{major:"G",ii:"Am",iii:"Bm",diminished:"F#"},{major:"D",ii:"Em",iii:"F#m",diminished:"C#"},{major:"A",ii:"Bm",iii:"C#m",diminished:"G#"},{major:"E",ii:"F#m",iii:"G#m",diminished:"D#"},{major:"B",ii:"C#m",iii:"D#m",diminished:"A#"},{major:"F#",ii:"G#m",iii:"A#m",diminished:"E#"},{major:"Db",ii:"Ebm",iii:"Fm",diminished:"C"},{major:"Ab",ii:"Bbm",iii:"Cm",diminished:"G"},{major:"Eb",ii:"Fm",iii:"Gm",diminished:"D"},{major:"Bb",ii:"Cm",iii:"Dm",diminished:"A"},{major:"F",ii:"Gm",iii:"Am",diminished:"E"}];function Eh(r){return r.includes("b")&&{Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#",Cb:"B",Fb:"E"}[r]||r}const W_={7:"dominant7",9:"dominant9",11:"dominant11",13:"dominant13",maj7:"major7",maj9:"major9",maj11:"major11",maj13:"major13",6:"major6",add9:"add9",m7:"minor7",m9:"minor9",m11:"minor11",m13:"minor13",m6:"minor6",dim:"diminished",dim7:"diminished7",m7b5:"halfDiminished7","m75":"halfDiminished7",7:"halfDiminished7",sus2:"sus2",sus4:"sus4","7sus4":"dominant7sus4"},Y_={major:[0,4,7],minor:[0,3,7],diminished:[0,3,6],augmented:[0,4,8],sus2:[0,2,7],sus4:[0,5,7],major6:[0,4,7,9],minor6:[0,3,7,9],major7:[0,4,7,11],minor7:[0,3,7,10],dominant7:[0,4,7,10],diminished7:[0,3,6,9],halfDiminished7:[0,3,6,10],dominant7sus4:[0,5,7,10],add9:[0,4,7,14],major9:[0,4,7,11,14],minor9:[0,3,7,10,14],dominant9:[0,4,7,10,14],major11:[0,4,7,11,14,17],minor11:[0,3,7,10,14,17],dominant11:[0,4,7,10,14,17],major13:[0,4,7,11,14,21],minor13:[0,3,7,10,14,21],dominant13:[0,4,7,10,14,21]};function ka(r,e){const t=Eh(r),s=Tl.indexOf(t);if(s===-1)return[];const a=W_[e]||e,o=Y_[a];return o?o.map(u=>Tl[(s+u)%12]):(console.warn(`Unknown chord quality: ${e} (resolved to ${a})`),Tl.slice(s,s+1).concat([Tl[(s+4)%12],Tl[(s+7)%12]]))}function su(r,e){if(!r||r.length===0)return r;const t=r.length-1,s=Math.max(0,Math.min(e,t));return s===0?r:[...r.slice(s),...r.slice(0,s)]}function X_(r){return Math.max(0,(r?.length||1)-1)}function $_(r){return["Root","1st","2nd","3rd","4th","5th","6th"][r]||`${r}th`}function h5(r,e,t,s){const o=`${r}${e==="major"||e==="maj"?"":e}`;if(!s||s===0||!t||t.length===0)return o;const u=t[s%t.length];return`${o}/${u}`}function Z_(r){const e=["G","D","A","E","B","F#","C#"],t=["F","Bb","Eb","Ab","Db","Gb","Cb"],s=e.indexOf(r),a=t.indexOf(r);return s>=0?{sharps:s+1,flats:0}:a>=0?{sharps:0,flats:a+1}:{sharps:0,flats:0}}function fd(){return{C:"hsl(48, 95%, 58%)",G:"hsl(72, 75%, 50%)",D:"hsl(95, 65%, 48%)",A:"hsl(160, 60%, 45%)",E:"hsl(185, 70%, 50%)",B:"hsl(205, 75%, 55%)","F#":"hsl(235, 60%, 58%)",Gb:"hsl(235, 60%, 58%)",Db:"hsl(265, 55%, 55%)",Ab:"hsl(285, 50%, 52%)",Eb:"hsl(315, 60%, 55%)",Bb:"hsl(350, 70%, 58%)",F:"hsl(28, 85%, 55%)"}}function Q_(r,e){const t=Eh(r),s=Eh(e),a=Tl.indexOf(t),o=Tl.indexOf(s);if(a===-1||o===-1)return"?";let u=(o-a+12)%12;return{0:"1",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[u]||"?"}function Ks(r){return r&&r.replace(/([A-G])b/g,"$1")}const Qs=[];for(let r=0;r<256;++r)Qs.push((r+256).toString(16).slice(1));function K_(r,e=0){return(Qs[r[e+0]]+Qs[r[e+1]]+Qs[r[e+2]]+Qs[r[e+3]]+"-"+Qs[r[e+4]]+Qs[r[e+5]]+"-"+Qs[r[e+6]]+Qs[r[e+7]]+"-"+Qs[r[e+8]]+Qs[r[e+9]]+"-"+Qs[r[e+10]]+Qs[r[e+11]]+Qs[r[e+12]]+Qs[r[e+13]]+Qs[r[e+14]]+Qs[r[e+15]]).toLowerCase()}let bm;const J_=new Uint8Array(16);function eS(){if(!bm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");bm=crypto.getRandomValues.bind(crypto)}return bm(J_)}const tS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),f5={randomUUID:tS};function nS(r,e,t){r=r||{};const s=r.random??r.rng?.()??eS();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,K_(s)}function Fs(r,e,t){return f5.randomUUID&&!r?f5.randomUUID():nS(r)}function d5(r){if(r.length===0)return"intro";const e=r.map(o=>o.type),t=e[e.length-1],s=e.slice(-4),a=e.reduce((o,u)=>(o[u]=(o[u]||0)+1,o),{});if(t==="intro")return"verse";if(s.length>=4){const[o,u,c,f]=s;if(o==="verse"&&u==="chorus"&&c==="verse"&&f==="chorus"||o==="chorus"&&u==="verse"&&c==="chorus"&&f==="verse")return"bridge"}if(t==="bridge"||t==="verse")return"chorus";if(t==="chorus"){const o=e.includes("bridge"),u=a.chorus||0;return o&&u>=3?"outro":"verse"}return t==="outro"?"verse":t==="pre-chorus"||t==="custom"?"chorus":"verse"}const Bs=[4,4],Bf=(r=Bs)=>{const[e,t]=r;return!e||!t?4:e*(4/t)},lu=r=>{const e=Bf(r);return{id:Fs(),beats:[{id:Fs(),chord:null,duration:e}]}},Fo=r=>r?`${r.sectionId}:${r.slotId}`:"",kg=r=>{const e=[];return r.forEach(t=>{t.measures.forEach(s=>{s.beats.forEach(a=>{e.push({sectionId:t.id,slotId:a.id,chord:a.chord??null})})})}),e},iu=(r,e)=>{if(!e)return null;for(const t of r)if(t.id===e.sectionId){for(const s of t.measures)for(const a of s.beats)if(a.id===e.slotId)return a.chord??null}return null},p5=(r,e)=>e?kg(r).findIndex(s=>s.sectionId===e.sectionId&&s.slotId===e.slotId):-1,rS=(r,e,t)=>{const s=kg(r),a=s.findIndex(f=>f.sectionId===e.sectionId&&f.slotId===e.slotId),o=s.findIndex(f=>f.sectionId===t.sectionId&&f.slotId===t.slotId);if(a===-1||o===-1)return[];const[u,c]=a<=o?[a,o]:[o,a];return s.slice(u,c+1).map(({sectionId:f,slotId:d})=>({sectionId:f,slotId:d}))},F1=(r,e)=>e?r.some(t=>t.id===e.sectionId&&t.measures.some(s=>s.beats.some(a=>a.id===e.slotId))):!1,au=(r,e,t,s,a)=>{const o=e&&t?{sectionId:e,slotId:t}:null,u=s.filter(m=>F1(r,m)),c=F1(r,o),f=u[u.length-1]||(c?o:null),d=a&&F1(r,a);return{selectedSectionId:f?.sectionId??null,selectedSlotId:f?.slotId??null,selectedSlots:u,selectionAnchor:d?a:u[0]??f??null}},Xm=100,zf=r=>typeof structuredClone=="function"?structuredClone(r):JSON.parse(JSON.stringify(r)),Zr=r=>{const e=zf(r.currentSong),t=[...r.historyPast,e].slice(-Xm);return{historyPast:t,historyFuture:[],canUndo:t.length>0,canRedo:!1}},m5=(r,e,t,s,a)=>{const o=au(r.sections,e,t,s,a),u=o.selectedSectionId&&o.selectedSlotId?{sectionId:o.selectedSectionId,slotId:o.selectedSlotId}:null,c=u?iu(r.sections,u):null;return{...o,selectedChord:c}},sS=(r,e,t)=>{let s=!1;for(const a of r)for(const o of a.measures)for(const u of o.beats){if(s)return{sectionId:a.id,slotId:u.id};a.id===e&&u.id===t&&(s=!0)}return null},Rf={id:"default",title:"Untitled Song",artist:"",key:"C",tempo:120,timeSignature:[4,4],sections:[{id:"verse-1",name:"Verse 1",type:"verse",timeSignature:Bs,measures:Array(4).fill(null).map(()=>lu(Bs))},{id:"chorus-1",name:"Chorus",type:"chorus",timeSignature:Bs,measures:Array(4).fill(null).map(()=>lu(Bs))}],notes:"",createdAt:new Date,updatedAt:new Date},vm={root:"C",quality:"major",numeral:"I",notes:["C","E","G"],symbol:"C"},En=P_()(H_(r=>({currentSong:Rf,historyPast:[],historyFuture:[],canUndo:!1,canRedo:!1,selectedKey:"C",wheelRotation:0,wheelMode:"fixed",chordPanelVisible:!0,timelineVisible:!0,songMapVisible:!1,collapsedSections:{},chordPanelGuitarExpanded:!1,chordPanelVoicingsExpanded:!1,selectedChord:vm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,isPlaying:!1,playingSectionId:null,playingSlotId:null,isLooping:!1,tempo:120,volume:.8,instrument:"piano",isMuted:!1,setKey:e=>r({selectedKey:e}),rotateWheel:e=>r(t=>({wheelRotation:t.wheelMode==="rotating"?t.wheelRotation+(e==="cw"?-30:30):0})),toggleWheelMode:()=>r(e=>{const t=e.wheelMode==="rotating"?"fixed":"rotating";let s=0;if(t==="rotating"){const a=Pf.indexOf(e.selectedKey);a!==-1&&(s=-(a*30))}return{wheelMode:t,wheelRotation:s}}),toggleChordPanel:()=>r(e=>({chordPanelVisible:!e.chordPanelVisible})),toggleTimeline:()=>r(e=>({timelineVisible:!e.timelineVisible})),openTimeline:()=>r(()=>(typeof window<"u"&&window.dispatchEvent(new CustomEvent("openMobileTimeline")),{timelineVisible:!0})),toggleSongMap:e=>r(t=>({songMapVisible:e!==void 0?e:!t.songMapVisible})),toggleSectionCollapsed:e=>r(t=>{const s={...t.collapsedSections,[e]:!t.collapsedSections?.[e]};return s[e]||delete s[e],{collapsedSections:s}}),setChordPanelGuitarExpanded:e=>r({chordPanelGuitarExpanded:e}),setChordPanelVoicingsExpanded:e=>r({chordPanelVoicingsExpanded:e}),setSelectedChord:e=>r({selectedChord:e}),setSelectedSlot:(e,t)=>r(s=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,selectedChord:null};const a={sectionId:e,slotId:t},o=iu(s.currentSong.sections,a);return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[a],selectionAnchor:a,selectedChord:o??null}}),selectSlotOnly:(e,t)=>r(()=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null};const s={sectionId:e,slotId:t};return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[s],selectionAnchor:s}}),setSelectedSlots:e=>r(t=>{const s=e.filter(Boolean),a=s[s.length-1]??null,o=iu(t.currentSong.sections,a);return{selectedSlots:s,selectedSectionId:a?.sectionId??null,selectedSlotId:a?.slotId??null,selectionAnchor:s[0]??a??null,selectedChord:o??null}}),toggleSlotSelection:(e,t)=>r(s=>{const a=s.selectedSlots.some(d=>d.sectionId===e&&d.slotId===t),o=a?s.selectedSlots.filter(d=>!(d.sectionId===e&&d.slotId===t)):[...s.selectedSlots,{sectionId:e,slotId:t}],u=o[o.length-1]??null,c=iu(s.currentSong.sections,u),f=a&&s.selectionAnchor&&Fo(s.selectionAnchor)===Fo({sectionId:e,slotId:t});return{selectedSlots:o,selectedSectionId:u?.sectionId??null,selectedSlotId:u?.slotId??null,selectionAnchor:f?o[0]??u??null:s.selectionAnchor??u??null,selectedChord:c??null}}),selectRangeTo:(e,t)=>r(s=>{const a={sectionId:e,slotId:t},o=s.selectionAnchor||s.selectedSlots[s.selectedSlots.length-1]||(s.selectedSectionId&&s.selectedSlotId?{sectionId:s.selectedSectionId,slotId:s.selectedSlotId}:a),c=F1(s.currentSong.sections,o)?o:a,f=rS(s.currentSong.sections,c,a),d=f.length?f:[a],m=iu(s.currentSong.sections,a);return{selectedSlots:d,selectedSectionId:a.sectionId,selectedSlotId:a.slotId,selectionAnchor:c,selectedChord:m??null}}),moveSelection:(e,t,s="move")=>{let a=!1;return r(o=>{const u=kg(o.currentSong.sections),c=p5(o.currentSong.sections,e),f=p5(o.currentSong.sections,t);if(c===-1||f===-1)return{};const m=(o.selectedSlots.length?o.selectedSlots:[e]).map(O=>{const z=u.findIndex(Q=>Q.sectionId===O.sectionId&&Q.slotId===O.slotId);return z>=0?{idx:z,slot:u[z]}:null}).filter(O=>!!O).sort((O,z)=>O.idx-z.idx);if(!m.length)return{};const y=f-c,_=m.map(({idx:O})=>O+y);if(_.some(O=>O<0||O>=u.length))return{};const b=_.map(O=>u[O]);if(m.length===1&&s==="move"){const O=m[0].slot,z=b[0],Q=Zr(o),M=o.currentSong.sections.map(I=>({...I,measures:I.measures.map(se=>({...se,beats:se.beats.map(ie=>ie.id===O.slotId&&I.id===O.sectionId?{...ie,chord:z.chord}:ie.id===z.slotId&&I.id===z.sectionId?{...ie,chord:O.chord}:ie)}))}));a=!0;const V=o.selectionAnchor&&Fo(o.selectionAnchor)===Fo(e),H=au(M,t.sectionId,t.slotId,[{sectionId:z.sectionId,slotId:z.slotId}],V?{sectionId:z.sectionId,slotId:z.slotId}:o.selectionAnchor),X=H.selectedSectionId&&H.selectedSlotId?{sectionId:H.selectedSectionId,slotId:H.selectedSlotId}:null,he=iu(M,X);return{...Q,currentSong:{...o.currentSong,sections:M},selectedSectionId:H.selectedSectionId,selectedSlotId:H.selectedSlotId,selectedSlots:H.selectedSlots,selectionAnchor:H.selectionAnchor,selectedChord:he??null}}const N=new Map;m.forEach((O,z)=>{N.set(Fo(b[z]),O.slot.chord??null)});const A=new Set;s==="move"&&m.forEach((O,z)=>{const Q=Fo(O.slot),M=Fo(b[z]);Q!==M&&A.add(Q)});const k=Zr(o),T=o.currentSong.sections.map(O=>({...O,measures:O.measures.map(z=>({...z,beats:z.beats.map(Q=>{const M=Fo({sectionId:O.id,slotId:Q.id});return N.has(M)?{...Q,chord:N.get(M)??null}:A.has(M)?{...Q,chord:null}:Q})}))}));a=!0;const R=Fo(o.selectionAnchor),D=m.find(O=>Fo(O.slot)===R),F=D?{sectionId:b[m.indexOf(D)].sectionId,slotId:b[m.indexOf(D)].slotId}:o.selectionAnchor,B=au(T,t.sectionId,t.slotId,b.map(O=>({sectionId:O.sectionId,slotId:O.slotId})),F??null),W=B.selectedSectionId&&B.selectedSlotId?{sectionId:B.selectedSectionId,slotId:B.selectedSlotId}:null,Y=iu(T,W);return{...k,currentSong:{...o.currentSong,sections:T},selectedSectionId:B.selectedSectionId,selectedSlotId:B.selectedSlotId,selectedSlots:B.selectedSlots,selectionAnchor:B.selectionAnchor,selectedChord:Y??null}}),a},selectNextSlotAfter:(e,t)=>{let s=!1;return r(a=>{const o=sS(a.currentSong.sections,e,t);if(!o)return{};const u=a.currentSong.sections.find(c=>c.id===o.sectionId)?.measures.flatMap(c=>c.beats).find(c=>c.id===o.slotId)?.chord??null;return s=!0,{selectedSectionId:o.sectionId,selectedSlotId:o.slotId,selectedChord:u,selectedSlots:[{sectionId:o.sectionId,slotId:o.slotId}],selectionAnchor:{sectionId:o.sectionId,slotId:o.slotId}}}),s},setTempo:e=>r(t=>({...Zr(t),tempo:e,currentSong:{...t.currentSong,tempo:e}})),setVolume:e=>r({volume:e}),setInstrument:e=>r({instrument:e}),setIsPlaying:e=>r({isPlaying:e}),setPlayingSlot:(e,t)=>r({playingSectionId:e,playingSlotId:t}),toggleLoop:()=>r(e=>({isLooping:!e.isLooping})),toggleMute:()=>r(e=>({isMuted:!e.isMuted})),setTitle:e=>r(t=>({...Zr(t),currentSong:{...t.currentSong,title:e}})),loadSong:e=>r(t=>{const s=e.key||"C",a=e.tempo??Rf.tempo;let o=0;if(t.wheelMode==="rotating"){const c=Pf.indexOf(s);c!==-1&&(o=-(c*30))}return{...Zr(t),currentSong:{...e,tempo:a},selectedKey:s,wheelRotation:o,selectedChord:vm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:a}}),newSong:()=>r(e=>({...Zr(e),currentSong:{...Rf,id:Fs(),title:"Untitled Song",createdAt:new Date,updatedAt:new Date,tempo:Rf.tempo,sections:[{id:Fs(),name:"Verse 1",type:"verse",timeSignature:Bs,measures:Array(4).fill(null).map(()=>lu(Bs))},{id:Fs(),name:"Chorus",type:"chorus",timeSignature:Bs,measures:Array(4).fill(null).map(()=>lu(Bs))}]},selectedKey:"C",wheelRotation:0,selectedChord:vm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:Rf.tempo})),addSection:e=>r(t=>{const s={id:Fs(),name:e.charAt(0).toUpperCase()+e.slice(1),type:e,timeSignature:t.currentSong.timeSignature||Bs,measures:Array(4).fill(null).map(()=>lu(t.currentSong.timeSignature||Bs))};return{...Zr(t),currentSong:{...t.currentSong,sections:[...t.currentSong.sections,s]}}}),addSuggestedSection:()=>r(e=>{const t=d5(e.currentSong.sections),s={id:Fs(),name:t.charAt(0).toUpperCase()+t.slice(1),type:t,timeSignature:e.currentSong.timeSignature||Bs,measures:Array(4).fill(null).map(()=>lu(e.currentSong.timeSignature||Bs))};return{...Zr(e),currentSong:{...e.currentSong,sections:[...e.currentSong.sections,s]}}}),addCustomSection:(e,t,s,a)=>r(o=>{const u=o.currentSong.timeSignature||Bs,c=Bf(u),f=a?.beatsPerChord??4,d=c/f;let m;a?.totalBars?m=a.totalBars:d>=1?m=Math.ceil(s.length/d):m=s.length*Math.ceil(1/d);const y=[];if(d>=1)for(let k=0;k<m;k++){const T=[];for(let R=0;R<d;R++){const D=Math.floor(k*d+R);T.push({id:Fs(),chord:s[D]||null,duration:f})}y.push({id:Fs(),beats:T})}else for(let k=0;k<m;k++)y.push({id:Fs(),beats:[{id:Fs(),chord:s[k]||null,duration:c}]});const _={id:Fs(),name:e,type:t,timeSignature:u,measures:y},b=Zr(o),N=y[0]?.beats[0]?.id,A=y[0]?.beats[0]?.chord??null;return{...b,currentSong:{...o.currentSong,sections:[...o.currentSong.sections,_]},selectedSectionId:_.id,selectedSlotId:N??null,selectedSlots:N?[{sectionId:_.id,slotId:N}]:[],selectionAnchor:N?{sectionId:_.id,slotId:N}:null,selectedChord:A}}),getSuggestedSectionType:()=>{const e=En.getState();return d5(e.currentSong.sections)},updateSection:(e,t)=>r(s=>({...Zr(s),currentSong:{...s.currentSong,sections:s.currentSong.sections.map(o=>o.id===e?{...o,...t}:o)}})),removeSection:e=>r(t=>{const s=Zr(t),{[e]:a,...o}=t.collapsedSections||{};return{...s,currentSong:{...t.currentSong,sections:t.currentSong.sections.filter(u=>u.id!==e)},collapsedSections:o}}),clearSection:e=>r(t=>{const s=t.currentSong.sections.find(c=>c.id===e);if(!s)return{};if(!s.measures.some(c=>c.beats.some(f=>f.chord!==null)))return{};const o=Zr(t),u=t.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(f=>({...f,beats:f.beats.map(d=>({...d,chord:null}))}))});return{...o,currentSong:{...t.currentSong,sections:u}}}),duplicateSection:e=>r(t=>{const s=t.currentSong.sections.find(f=>f.id===e);if(!s)return{};const a=Zr(t),o={...s,id:Fs(),name:`${s.name} (Copy)`,timeSignature:s.timeSignature||t.currentSong.timeSignature||Bs,measures:s.measures.map(f=>({...f,id:Fs(),beats:f.beats.map(d=>({...d,id:Fs()}))}))},u=t.currentSong.sections.findIndex(f=>f.id===e),c=[...t.currentSong.sections];return c.splice(u+1,0,o),{...a,currentSong:{...t.currentSong,sections:c}}}),reorderSections:e=>r(t=>({...Zr(t),currentSong:{...t.currentSong,sections:e}})),setSectionMeasures:(e,t)=>r(s=>{const a=Math.max(1,Math.min(16,Math.round(t))),o=s.currentSong.sections.map(f=>{if(f.id!==e)return f;const d=f.timeSignature||s.currentSong.timeSignature||Bs;let m=[...f.measures];if(m.length<a)for(;m.length<a;)m.push(lu(d));else m.length>a&&(m=m.slice(0,a));return{...f,measures:m}}),u=au(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Zr(s),currentSong:{...s.currentSong,sections:o},...u}}),setSectionTimeSignature:(e,t)=>r(s=>{const a=s.currentSong.sections.map(c=>{if(c.id!==e)return c;const f=Bf(t);return{...c,timeSignature:t,measures:c.measures.map(d=>({...d,beats:[{id:Fs(),chord:null,duration:f}]}))}}),o=au(a,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Zr(s),currentSong:{...s.currentSong,sections:a},...o}}),setMeasureSubdivision:(e,t,s)=>r(a=>{const o=Math.max(1,Math.min(16,Math.round(s))),u=a.currentSong.sections.map(d=>{if(d.id!==e)return d;const m=d.timeSignature||a.currentSong.timeSignature||Bs,y=Bf(m);return{...d,measures:d.measures.map(_=>{if(_.id!==t)return _;const b=y/o,N=Array.from({length:o}).map((A,k)=>{const T=_.beats[k];return{id:T?.id??Fs(),chord:T?.chord??null,duration:b}});return{..._,beats:N}})}}),c=au(u,a.selectedSectionId,a.selectedSlotId,a.selectedSlots,a.selectionAnchor);return{...Zr(a),currentSong:{...a.currentSong,sections:u},...c}}),setSectionSubdivision:(e,t)=>r(s=>{const a=Math.max(1,Math.min(16,Math.round(t))),o=s.currentSong.sections.map(f=>{if(f.id!==e)return f;const d=f.timeSignature||s.currentSong.timeSignature||Bs,y=Bf(d)/a;return{...f,measures:f.measures.map(_=>{const b=Array.from({length:a}).map((N,A)=>{const k=_.beats[A];return{id:k?.id??Fs(),chord:k?.chord??null,duration:y}});return{..._,beats:b}})}}),u=au(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Zr(s),currentSong:{...s.currentSong,sections:o},...u}}),addChordToSlot:(e,t,s)=>r(a=>{const o=Zr(a),u=a.currentSong.sections.map(c=>c.id!==t?c:{...c,measures:c.measures.map(f=>({...f,beats:f.beats.map(d=>d.id!==s?d:{...d,chord:e})}))});return{...o,currentSong:{...a.currentSong,sections:u}}}),clearSlot:(e,t)=>r(s=>{if(!s.currentSong.sections.some(c=>c.id===e&&c.measures.some(f=>f.beats.some(d=>d.id===t&&d.chord))))return{};const o=Zr(s),u=s.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(f=>({...f,beats:f.beats.map(d=>d.id!==t?d:{...d,chord:null})}))});return{...o,currentSong:{...s.currentSong,sections:u}}}),clearTimeline:()=>r(e=>{if(!e.currentSong.sections.some(o=>o.measures.some(u=>u.beats.some(c=>c.chord!==null))))return{};const s=Zr(e),a=e.currentSong.sections.map(o=>({...o,measures:o.measures.map(u=>({...u,beats:u.beats.map(c=>({...c,chord:null}))}))}));return{...s,currentSong:{...e.currentSong,sections:a},selectedChord:null}}),moveChord:(e,t,s,a)=>r(o=>{let u=null,c=null;if(o.currentSong.sections.forEach(m=>{m.measures.forEach(y=>{y.beats.forEach(_=>{_.id===t&&(u=_.chord),_.id===a&&(c=_.chord)})})}),!u&&!c)return{};const f=Zr(o),d=o.currentSong.sections.map(m=>({...m,measures:m.measures.map(y=>({...y,beats:y.beats.map(_=>_.id===t?{..._,chord:c}:_.id===a?{..._,chord:u}:_)}))}));return{...f,currentSong:{...o.currentSong,sections:d}}}),undo:()=>r(e=>{if(!e.historyPast.length)return{};const t=e.historyPast[e.historyPast.length-1],s=e.historyPast.slice(0,-1),a=[zf(e.currentSong),...e.historyFuture].slice(0,Xm),o=m5(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:zf(t),historyPast:s,historyFuture:a,canUndo:s.length>0,canRedo:a.length>0,tempo:t.tempo??e.tempo,...o}}),redo:()=>r(e=>{if(!e.historyFuture.length)return{};const t=e.historyFuture[0],s=e.historyFuture.slice(1),a=[...e.historyPast,zf(e.currentSong)].slice(-Xm),o=m5(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:zf(t),historyPast:a,historyFuture:s,canUndo:a.length>0,canRedo:s.length>0,tempo:t.tempo??e.tempo,...o}})}),{name:"songwriter-wheel-storage",partialize:r=>({currentSong:r.currentSong,tempo:r.tempo,volume:r.volume,instrument:r.instrument,isMuted:r.isMuted})}));function _c(r,e,t,s){const a=(s-90)*Math.PI/180;return{x:r+t*Math.cos(a),y:e+t*Math.sin(a)}}function iS(r,e,t,s,a){const o=_c(r,e,t,s),u=_c(r,e,t,a),c=a-s<=180?"0":"1";return["M",o.x,o.y,"A",t,t,0,c,1,u.x,u.y].join(" ")}function aS(r,e,t,s,a,o){const u=_c(r,e,s,o),c=_c(r,e,s,a),f=_c(r,e,t,o),d=_c(r,e,t,a),m=o-a<=180?"0":"1";return["M",u.x,u.y,"A",s,s,0,m,0,c.x,c.y,"L",d.x,d.y,"A",t,t,0,m,1,f.x,f.y,"Z"].join(" ")}function Ax(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var a=r.length;for(e=0;e<a;e++)r[e]&&(t=Ax(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function Et(){for(var r,e,t=0,s="",a=arguments.length;t<a;t++)(r=arguments[t])&&(e=Ax(r))&&(s&&(s+=" "),s+=e);return s}const Cx="15.1.22",g5=(r,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:r}),b5=(r,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:r}),$m=(r,e)=>({startTime:e,type:"setValue",value:r}),Tx=(r,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:r}),kx=(r,e,{startTime:t,target:s,timeConstant:a})=>s+(e-s)*Math.exp((t-r)/a),xh=r=>r.type==="exponentialRampToValue",K1=r=>r.type==="linearRampToValue",xc=r=>xh(r)||K1(r),jg=r=>r.type==="setValue",Al=r=>r.type==="setValueCurve",J1=(r,e,t,s)=>{const a=r[e];return a===void 0?s:xc(a)||jg(a)?a.value:Al(a)?a.values[a.values.length-1]:kx(t,J1(r,e-1,a.startTime,s),a)},v5=(r,e,t,s,a)=>t===void 0?[s.insertTime,a]:xc(t)?[t.endTime,t.value]:jg(t)?[t.startTime,t.value]:Al(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,J1(r,e-1,t.startTime,a)],Zm=r=>r.type==="cancelAndHold",Qm=r=>r.type==="cancelScheduledValues",bc=r=>Zm(r)||Qm(r)?r.cancelTime:xh(r)||K1(r)?r.endTime:r.startTime,y5=(r,e,t,{endTime:s,value:a})=>t===a?a:0<t&&0<a||t<0&&a<0?t*(a/t)**((r-e)/(s-e)):0,x5=(r,e,t,{endTime:s,value:a})=>t+(r-e)/(s-e)*(a-t),oS=(r,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?r[t]:(1-(e-t))*r[t]+(1-(s-e))*r[s]},lS=(r,{duration:e,startTime:t,values:s})=>{const a=(r-t)/e*(s.length-1);return oS(s,a)},_1=r=>r.type==="setTarget";class cS{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=bc(e);if(Zm(e)||Qm(e)){const s=this._automationEvents.findIndex(o=>Qm(e)&&Al(o)?o.startTime+o.duration>=t:bc(o)>=t),a=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Zm(e)){const o=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&xc(a)){if(o!==void 0&&_1(o))throw new Error("The internal list is malformed.");const u=o===void 0?a.insertTime:Al(o)?o.startTime+o.duration:bc(o),c=o===void 0?this._defaultValue:Al(o)?o.values[o.values.length-1]:o.value,f=xh(a)?y5(t,u,c,a):x5(t,u,c,a),d=xh(a)?g5(f,t,this._currenTime):b5(f,t,this._currenTime);this._automationEvents.push(d)}if(o!==void 0&&_1(o)&&this._automationEvents.push($m(this.getValue(t),t)),o!==void 0&&Al(o)&&o.startTime+o.duration>t){const u=t-o.startTime,c=(o.values.length-1)/o.duration,f=Math.max(2,1+Math.ceil(u*c)),d=u/(f-1)*c,m=o.values.slice(0,f);if(d<1)for(let y=1;y<f;y+=1){const _=d*y%1;m[y]=o.values[y-1]*(1-_)+o.values[y]*_}this._automationEvents[this._automationEvents.length-1]=Tx(m,o.startTime,u)}}}else{const s=this._automationEvents.findIndex(u=>bc(u)>t),a=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(a!==void 0&&Al(a)&&bc(a)+a.duration>t)return!1;const o=xh(e)?g5(e.value,e.endTime,this._currenTime):K1(e)?b5(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(o);else{if(Al(e)&&t+e.duration>bc(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,o)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>bc(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),a=s[0];_1(a)&&s.unshift($m(J1(this._automationEvents,t-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(u=>bc(u)>e),s=this._automationEvents[t],a=(t===-1?this._automationEvents.length:t)-1,o=this._automationEvents[a];if(o!==void 0&&_1(o)&&(s===void 0||!xc(s)||s.insertTime>e))return kx(e,J1(this._automationEvents,a-1,o.startTime,this._defaultValue),o);if(o!==void 0&&jg(o)&&(s===void 0||!xc(s)))return o.value;if(o!==void 0&&Al(o)&&(s===void 0||!xc(s)||o.startTime+o.duration>e))return e<o.startTime+o.duration?lS(e,o):o.values[o.values.length-1];if(o!==void 0&&xc(o)&&(s===void 0||!xc(s)))return o.value;if(s!==void 0&&xh(s)){const[u,c]=v5(this._automationEvents,a,o,s,this._defaultValue);return y5(e,u,c,s)}if(s!==void 0&&K1(s)){const[u,c]=v5(this._automationEvents,a,o,s,this._defaultValue);return x5(e,u,c,s)}return this._defaultValue}}const uS=r=>({cancelTime:r,type:"cancelAndHold"}),hS=r=>({cancelTime:r,type:"cancelScheduledValues"}),fS=(r,e)=>({endTime:e,type:"exponentialRampToValue",value:r}),dS=(r,e)=>({endTime:e,type:"linearRampToValue",value:r}),pS=(r,e,t)=>({startTime:e,target:r,timeConstant:t,type:"setTarget"}),mS=()=>new DOMException("","AbortError"),gS=r=>(e,t,[s,a,o],u)=>{r(e[a],[t,s,o],c=>c[0]===t&&c[1]===s,u)},bS=r=>(e,t,s)=>{const a=[];for(let o=0;o<s.numberOfInputs;o+=1)a.push(new Set);r.set(e,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},vS=r=>(e,t)=>{r.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Mh=new WeakSet,jx=new WeakMap,Eg=new WeakMap,Ex=new WeakMap,Mg=new WeakMap,Tp=new WeakMap,Mx=new WeakMap,Km=new WeakMap,Jm=new WeakMap,eg=new WeakMap,Lx={construct(){return Lx}},yS=r=>{try{const e=new Proxy(r,Lx);new e}catch{return!1}return!0},w5=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,_5=(r,e)=>{const t=[];let s=r.replace(/^[\s]+/,""),a=s.match(w5);for(;a!==null;){const o=a[1].slice(1,-1),u=a[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());t.push(u),s=s.slice(a[0].length).replace(/^[\s]+/,""),a=s.match(w5)}return[t.join(";"),s]},S5=r=>{if(r!==void 0&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},N5=r=>{if(!yS(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(r.prototype===null||typeof r.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},xS=(r,e,t,s,a,o,u,c,f,d,m,y,_)=>{let b=0;return(N,A,k={credentials:"omit"})=>{const T=m.get(N);if(T!==void 0&&T.has(A))return Promise.resolve();const R=d.get(N);if(R!==void 0){const B=R.get(A);if(B!==void 0)return B}const D=o(N),F=D.audioWorklet===void 0?a(A).then(([B,W])=>{const[Y,O]=_5(B,W),z=`${Y};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${O}
})})(window,'_AWGS')`;return t(z)}).then(()=>{const B=_._AWGS.pop();if(B===void 0)throw new SyntaxError;s(D.currentTime,D.sampleRate,()=>B(class{},void 0,(W,Y)=>{if(W.trim()==="")throw e();const O=Jm.get(D);if(O!==void 0){if(O.has(W))throw e();N5(Y),S5(Y.parameterDescriptors),O.set(W,Y)}else N5(Y),S5(Y.parameterDescriptors),Jm.set(D,new Map([[W,Y]]))},D.sampleRate,void 0,void 0))}):Promise.all([a(A),Promise.resolve(r(y,y))]).then(([[B,W],Y])=>{const O=b+1;b=O;const[z,Q]=_5(B,W),X=`${z};((AudioWorkletProcessor,registerProcessor)=>{${Q}
})(${Y?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${Y?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${Y?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${O}',class extends AudioWorkletProcessor{process(){return !1}})`,he=new Blob([X],{type:"application/javascript; charset=utf-8"}),I=URL.createObjectURL(he);return D.audioWorklet.addModule(I,k).then(()=>{if(c(D))return D;const se=u(D);return se.audioWorklet.addModule(I,k).then(()=>se)}).then(se=>{if(f===null)throw new SyntaxError;try{new f(se,`__sac${O}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(I))});return R===void 0?d.set(N,new Map([[A,F]])):R.set(A,F),F.then(()=>{const B=m.get(N);B===void 0?m.set(N,new Set([A])):B.add(A)}).finally(()=>{const B=d.get(N);B!==void 0&&B.delete(A)}),F}},co=(r,e)=>{const t=r.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},kp=(r,e)=>{const t=Array.from(r).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return r.delete(s),s},Ox=(r,e,t,s)=>{const a=co(r,e),o=kp(a,u=>u[0]===t&&u[1]===s);return a.size===0&&r.delete(e),o},dd=r=>co(Mx,r),Lh=r=>{if(Mh.has(r))throw new Error("The AudioNode is already stored.");Mh.add(r),dd(r).forEach(e=>e(!0))},Dx=r=>"port"in r,pd=r=>{if(!Mh.has(r))throw new Error("The AudioNode is not stored.");Mh.delete(r),dd(r).forEach(e=>e(!1))},tg=(r,e)=>{!Dx(r)&&e.every(t=>t.size===0)&&pd(r)},wS=(r,e,t,s,a,o,u,c,f,d,m,y,_)=>{const b=new WeakMap;return(N,A,k,T,R)=>{const{activeInputs:D,passiveInputs:F}=o(A),{outputs:B}=o(N),W=c(N),Y=O=>{const z=f(A),Q=f(N);if(O){const M=Ox(F,N,k,T);r(D,N,M,!1),!R&&!y(N)&&t(Q,z,k,T),_(A)&&Lh(A)}else{const M=s(D,N,k,T);e(F,T,M,!1),!R&&!y(N)&&a(Q,z,k,T);const V=u(A);if(V===0)m(A)&&tg(A,D);else{const H=b.get(A);H!==void 0&&clearTimeout(H),b.set(A,setTimeout(()=>{m(A)&&tg(A,D)},V*1e3))}}};return d(B,[A,k,T],O=>O[0]===A&&O[1]===k&&O[2]===T,!0)?(W.add(Y),m(N)?r(D,N,[k,T,Y],!0):e(F,T,[N,k,Y],!0),!0):!1}},_S=r=>(e,t,[s,a,o],u)=>{const c=e.get(s);c===void 0?e.set(s,new Set([[a,t,o]])):r(c,[a,t,o],f=>f[0]===a&&f[1]===t,u)},SS=r=>(e,t)=>{const s=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const a=()=>{t.removeEventListener("ended",a),t.disconnect(s),s.disconnect()};t.addEventListener("ended",a)},NS=r=>(e,t)=>{r(e).add(t)},AS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},CS=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=a(c),m={...AS,...f},y=s(d,m),_=o(d)?e():null;super(c,!1,y,_),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const f=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=f,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const f=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=f,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},hi=(r,e)=>r.context===e,TS=(r,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!hi(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=r(u,d)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},ep=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Go=()=>new DOMException("","IndexSizeError"),Lg=r=>{r.getChannelData=(e=>t=>{try{return e.call(r,t)}catch(s){throw s.code===12?Go():s}})(r.getChannelData)},kS={numberOfChannels:1},jS=(r,e,t,s,a,o,u,c)=>{let f=null;return class Rx{constructor(m){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:_,sampleRate:b}={...kS,...m};f===null&&(f=new a(1,1,44100));const N=s!==null&&e(o,o)?new s({length:y,numberOfChannels:_,sampleRate:b}):f.createBuffer(_,y,b);if(N.numberOfChannels===0)throw t();return typeof N.copyFromChannel!="function"?(u(N),Lg(N)):e(ep,()=>ep(N))||c(N),r.add(N),N}static[Symbol.hasInstance](m){return m!==null&&typeof m=="object"&&Object.getPrototypeOf(m)===Rx.prototype||r.has(m)}}},Ui=-34028234663852886e22,yi=-Ui,kl=r=>Mh.has(r),ES={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},MS=(r,e,t,s,a,o,u,c)=>class extends r{constructor(d,m){const y=o(d),_={...ES,...m},b=a(y,_),N=u(y),A=N?e():null;super(d,!1,b,A),this._audioBufferSourceNodeRenderer=A,this._isBufferNullified=!1,this._isBufferSet=_.buffer!==null,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=t(this,N,b.playbackRate,yi,Ui)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(d){if(this._nativeAudioBufferSourceNode.buffer=d,d!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(d){this._nativeAudioBufferSourceNode.loop=d}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(d){this._nativeAudioBufferSourceNode.loopEnd=d}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(d){this._nativeAudioBufferSourceNode.loopStart=d}get onended(){return this._onended}set onended(d){const m=typeof d=="function"?c(this,d):null;this._nativeAudioBufferSourceNode.onended=m;const y=this._nativeAudioBufferSourceNode.onended;this._onended=y!==null&&y===m?d:y}get playbackRate(){return this._playbackRate}start(d=0,m=0,y){if(this._nativeAudioBufferSourceNode.start(d,m,y),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=y===void 0?[d,m]:[d,m,y]),this.context.state!=="closed"){Lh(this);const _=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",_),kl(this)&&pd(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",_)}}stop(d=0){this._nativeAudioBufferSourceNode.stop(d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=d)}},LS=(r,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const f=async(d,m)=>{let y=t(d);const _=hi(y,m);if(!_){const b={buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value};y=e(m,b),u!==null&&y.start(...u),c!==null&&y.stop(c)}return o.set(m,y),_?await r(m,d.playbackRate,y.playbackRate):await s(m,d.playbackRate,y.playbackRate),await a(d,m,y),y};return{set start(d){u=d},set stop(d){c=d},render(d,m){const y=o.get(m);return y!==void 0?Promise.resolve(y):f(d,m)}}},OS=r=>"playbackRate"in r,DS=r=>"frequency"in r&&"gain"in r,RS=r=>"offset"in r,IS=r=>!("frequency"in r)&&"gain"in r,VS=r=>"detune"in r&&"frequency"in r&&!("gain"in r),FS=r=>"pan"in r,wi=r=>co(jx,r),md=r=>co(Ex,r),ng=(r,e)=>{const{activeInputs:t}=wi(r);t.forEach(a=>a.forEach(([o])=>{e.includes(r)||ng(o,[...e,r])}));const s=OS(r)?[r.playbackRate]:Dx(r)?Array.from(r.parameters.values()):DS(r)?[r.Q,r.detune,r.frequency,r.gain]:RS(r)?[r.offset]:IS(r)?[r.gain]:VS(r)?[r.detune,r.frequency]:FS(r)?[r.pan]:[];for(const a of s){const o=md(a);o!==void 0&&o.activeInputs.forEach(([u])=>ng(u,e))}kl(r)&&pd(r)},Ix=r=>{ng(r.destination,[])},BS=r=>r===void 0||typeof r=="number"||typeof r=="string"&&(r==="balanced"||r==="interactive"||r==="playback"),zS=(r,e,t,s,a,o,u,c,f)=>class extends r{constructor(m={}){if(f===null)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new f(m)}catch(N){throw N.code===12&&N.message==="sampleRate is not in range"?t():N}if(y===null)throw s();if(!BS(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(m.sampleRate!==void 0&&y.sampleRate!==m.sampleRate)throw t();super(y,2);const{latencyHint:_}=m,{sampleRate:b}=y;if(this._baseLatency=typeof y.baseLatency=="number"?y.baseLatency:_==="balanced"?512/b:_==="interactive"||_===void 0?256/b:_==="playback"?1024/b:Math.max(2,Math.min(128,Math.round(_*b/128)))*128/b,this._nativeAudioContext=y,f.name==="webkitAudioContext"?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,y.state==="running"){this._state="suspended";const N=()=>{this._state==="suspended"&&(this._state=null),y.removeEventListener("statechange",N)};y.addEventListener("statechange",N)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Ix(this)}))}createMediaElementSource(m){return new a(this,{mediaElement:m})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(m){return new u(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new c(this,{mediaStreamTrack:m})}resume(){return this._state==="suspended"?new Promise((m,y)=>{const _=()=>{this._nativeAudioContext.removeEventListener("statechange",_),this._nativeAudioContext.state==="running"?m():this.resume().then(m,y)};this._nativeAudioContext.addEventListener("statechange",_)}):this._nativeAudioContext.resume().catch(m=>{throw m===void 0||m.code===15?e():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw m===void 0?e():m})}},PS=(r,e,t,s,a,o,u,c)=>class extends r{constructor(d,m){const y=o(d),_=u(y),b=a(y,m,_),N=_?e(c):null;super(d,!1,b,N),this._isNodeOfNativeOfflineAudioContext=_,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(d){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(d>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=d}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(d){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=d}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},qS=r=>{const e=new WeakMap,t=async(s,a)=>{const o=a.destination;return e.set(a,o),await r(s,a,o),o};return{render(s,a){const o=e.get(a);return o!==void 0?Promise.resolve(o):t(s,a)}}},US=(r,e,t,s,a,o,u,c)=>(f,d)=>{const m=d.listener,y=()=>{const B=new Float32Array(1),W=e(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),Y=u(d);let O=!1,z=[0,0,-1,0,1,0],Q=[0,0,0];const M=()=>{if(O)return;O=!0;const he=s(d,256,9,0);he.onaudioprocess=({inputBuffer:I})=>{const se=[o(I,B,0),o(I,B,1),o(I,B,2),o(I,B,3),o(I,B,4),o(I,B,5)];se.some((de,pe)=>de!==z[pe])&&(m.setOrientation(...se),z=se);const ie=[o(I,B,6),o(I,B,7),o(I,B,8)];ie.some((de,pe)=>de!==Q[pe])&&(m.setPosition(...ie),Q=ie)},W.connect(he)},V=he=>I=>{I!==z[he]&&(z[he]=I,m.setOrientation(...z))},H=he=>I=>{I!==Q[he]&&(Q[he]=I,m.setPosition(...Q))},X=(he,I,se)=>{const ie=t(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:I});ie.connect(W,0,he),ie.start(),Object.defineProperty(ie.offset,"defaultValue",{get(){return I}});const de=r({context:f},Y,ie.offset,yi,Ui);return c(de,"value",pe=>()=>pe.call(de),pe=>G=>{try{pe.call(de,G)}catch(j){if(j.code!==9)throw j}M(),Y&&se(G)}),de.cancelAndHoldAtTime=(pe=>Y?()=>{throw a()}:(...G)=>{const j=pe.apply(de,G);return M(),j})(de.cancelAndHoldAtTime),de.cancelScheduledValues=(pe=>Y?()=>{throw a()}:(...G)=>{const j=pe.apply(de,G);return M(),j})(de.cancelScheduledValues),de.exponentialRampToValueAtTime=(pe=>Y?()=>{throw a()}:(...G)=>{const j=pe.apply(de,G);return M(),j})(de.exponentialRampToValueAtTime),de.linearRampToValueAtTime=(pe=>Y?()=>{throw a()}:(...G)=>{const j=pe.apply(de,G);return M(),j})(de.linearRampToValueAtTime),de.setTargetAtTime=(pe=>Y?()=>{throw a()}:(...G)=>{const j=pe.apply(de,G);return M(),j})(de.setTargetAtTime),de.setValueAtTime=(pe=>Y?()=>{throw a()}:(...G)=>{const j=pe.apply(de,G);return M(),j})(de.setValueAtTime),de.setValueCurveAtTime=(pe=>Y?()=>{throw a()}:(...G)=>{const j=pe.apply(de,G);return M(),j})(de.setValueCurveAtTime),de};return{forwardX:X(0,0,V(0)),forwardY:X(1,0,V(1)),forwardZ:X(2,-1,V(2)),positionX:X(6,0,H(0)),positionY:X(7,0,H(1)),positionZ:X(8,0,H(2)),upX:X(3,0,V(3)),upY:X(4,1,V(4)),upZ:X(5,0,V(5))}},{forwardX:_,forwardY:b,forwardZ:N,positionX:A,positionY:k,positionZ:T,upX:R,upY:D,upZ:F}=m.forwardX===void 0?y():m;return{get forwardX(){return _},get forwardY(){return b},get forwardZ(){return N},get positionX(){return A},get positionY(){return k},get positionZ(){return T},get upX(){return R},get upY(){return D},get upZ(){return F}}},tp=r=>"context"in r,gd=r=>tp(r[0]),xu=(r,e,t,s)=>{for(const a of r)if(t(a)){if(s)return!1;throw Error("The set contains at least one similar element.")}return r.add(e),!0},A5=(r,e,[t,s],a)=>{xu(r,[e,t,s],o=>o[0]===e&&o[1]===t,a)},C5=(r,[e,t,s],a)=>{const o=r.get(e);o===void 0?r.set(e,new Set([[t,s]])):xu(o,[t,s],u=>u[0]===t,a)},Fh=r=>"inputs"in r,np=(r,e,t,s)=>{if(Fh(e)){const a=e.inputs[s];return r.connect(a,t,0),[a,t,0]}return r.connect(e,t,s),[e,t,s]},Vx=(r,e,t)=>{for(const s of r)if(s[0]===e&&s[1]===t)return r.delete(s),s;return null},HS=(r,e,t)=>kp(r,s=>s[0]===e&&s[1]===t),Fx=(r,e)=>{if(!dd(r).delete(e))throw new Error("Missing the expected event listener.")},Bx=(r,e,t)=>{const s=co(r,e),a=kp(s,o=>o[0]===t);return s.size===0&&r.delete(e),a},rp=(r,e,t,s)=>{Fh(e)?r.disconnect(e.inputs[s],t,0):r.disconnect(e,t,s)},Tr=r=>co(Eg,r),Qf=r=>co(Mg,r),mu=r=>Km.has(r),B1=r=>!Mh.has(r),T5=(r,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=r.createScriptProcessor(256,1,1),a=r.createGain(),o=r.createBuffer(1,2,44100),u=o.getChannelData(0);u[0]=1,u[1]=1;const c=r.createBufferSource();c.buffer=o,c.loop=!0,c.connect(s).connect(r.destination),c.connect(a),c.disconnect(a),s.onaudioprocess=f=>{const d=f.inputBuffer.getChannelData(0);Array.prototype.some.call(d,m=>m===1)?t(!0):t(!1),c.stop(),s.onaudioprocess=null,c.disconnect(s),s.disconnect(r.destination)},c.start()}}),ym=(r,e)=>{const t=new Map;for(const s of r)for(const a of s){const o=t.get(a);t.set(a,o===void 0?1:o+1)}t.forEach((s,a)=>e(a,s))},sp=r=>"context"in r,GS=r=>{const e=new Map;r.connect=(t=>(s,a=0,o=0)=>{const u=sp(s)?t(s,a,o):t(s,a),c=e.get(s);return c===void 0?e.set(s,[{input:o,output:a}]):c.every(f=>f.input!==o||f.output!==a)&&c.push({input:o,output:a}),u})(r.connect.bind(r)),r.disconnect=(t=>(s,a,o)=>{if(t.apply(r),s===void 0)e.clear();else if(typeof s=="number")for(const[u,c]of e){const f=c.filter(d=>d.output!==s);f.length===0?e.delete(u):e.set(u,f)}else if(e.has(s))if(a===void 0)e.delete(s);else{const u=e.get(s);if(u!==void 0){const c=u.filter(f=>f.output!==a&&(f.input!==o||o===void 0));c.length===0?e.delete(s):e.set(s,c)}}for(const[u,c]of e)c.forEach(f=>{sp(u)?r.connect(u,f.output,f.input):r.connect(u,f.output)})})(r.disconnect)},WS=(r,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=md(e),{outputs:u}=wi(r),c=dd(r),f=d=>{const m=Tr(r),y=Qf(e);if(d){const _=Bx(o,r,t);A5(a,r,_,!1),!s&&!mu(r)&&m.connect(y,t)}else{const _=HS(a,r,t);C5(o,_,!1),!s&&!mu(r)&&m.disconnect(y,t)}};return xu(u,[e,t],d=>d[0]===e&&d[1]===t,!0)?(c.add(f),kl(r)?A5(a,r,[t,f],!0):C5(o,[r,t,f],!0),!0):!1},YS=(r,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=wi(e),u=Vx(a[s],r,t);return u===null?[Ox(o,r,t,s)[2],!1]:[u[2],!0]},XS=(r,e,t)=>{const{activeInputs:s,passiveInputs:a}=md(e),o=Vx(s,r,t);return o===null?[Bx(a,r,t)[1],!1]:[o[2],!0]},Og=(r,e,t,s,a)=>{const[o,u]=YS(r,t,s,a);if(o!==null&&(Fx(r,o),u&&!e&&!mu(r)&&rp(Tr(r),Tr(t),s,a)),kl(t)){const{activeInputs:c}=wi(t);tg(t,c)}},Dg=(r,e,t,s)=>{const[a,o]=XS(r,t,s);a!==null&&(Fx(r,a),o&&!e&&!mu(r)&&Tr(r).disconnect(Qf(t),s))},$S=(r,e)=>{const t=wi(r),s=[];for(const a of t.outputs)gd(a)?Og(r,e,...a):Dg(r,e,...a),s.push(a[0]);return t.outputs.clear(),s},ZS=(r,e,t)=>{const s=wi(r),a=[];for(const o of s.outputs)o[1]===t&&(gd(o)?Og(r,e,...o):Dg(r,e,...o),a.push(o[0]),s.outputs.delete(o));return a},QS=(r,e,t,s,a)=>{const o=wi(r);return Array.from(o.outputs).filter(u=>u[0]===t&&(s===void 0||u[1]===s)&&(a===void 0||u[2]===a)).map(u=>(gd(u)?Og(r,e,...u):Dg(r,e,...u),o.outputs.delete(u),u[0]))},KS=(r,e,t,s,a,o,u,c,f,d,m,y,_,b,N,A)=>class extends d{constructor(T,R,D,F){super(D),this._context=T,this._nativeAudioNode=D;const B=m(T);y(B)&&t(T5,()=>T5(B,A))!==!0&&GS(D),Eg.set(this,D),Mx.set(this,new Set),T.state!=="closed"&&R&&Lh(this),r(this,F,D)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(T){this._nativeAudioNode.channelCount=T}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(T){this._nativeAudioNode.channelCountMode=T}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(T){this._nativeAudioNode.channelInterpretation=T}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(T,R=0,D=0){if(R<0||R>=this._nativeAudioNode.numberOfOutputs)throw a();const F=m(this._context),B=N(F);if(_(T)||b(T))throw o();if(tp(T)){const O=Tr(T);try{const Q=np(this._nativeAudioNode,O,R,D),M=B1(this);(B||M)&&this._nativeAudioNode.disconnect(...Q),this.context.state!=="closed"&&!M&&B1(T)&&Lh(T)}catch(Q){throw Q.code===12?o():Q}if(e(this,T,R,D,B)){const Q=f([this],T);ym(Q,s(B))}return T}const W=Qf(T);if(W.name==="playbackRate"&&W.maxValue===1024)throw u();try{this._nativeAudioNode.connect(W,R),(B||B1(this))&&this._nativeAudioNode.disconnect(W,R)}catch(O){throw O.code===12?o():O}if(WS(this,T,R,B)){const O=f([this],T);ym(O,s(B))}}disconnect(T,R,D){let F;const B=m(this._context),W=N(B);if(T===void 0)F=$S(this,W);else if(typeof T=="number"){if(T<0||T>=this.numberOfOutputs)throw a();F=ZS(this,W,T)}else{if(R!==void 0&&(R<0||R>=this.numberOfOutputs)||tp(T)&&D!==void 0&&(D<0||D>=T.numberOfInputs))throw a();if(F=QS(this,W,T,R,D),F.length===0)throw o()}for(const Y of F){const O=f([this],Y);ym(O,c)}}},JS=(r,e,t,s,a,o,u,c,f,d,m,y,_)=>(b,N,A,k=null,T=null)=>{const R=A.value,D=new cS(R),F=N?s(D):null,B={get defaultValue(){return R},get maxValue(){return k===null?A.maxValue:k},get minValue(){return T===null?A.minValue:T},get value(){return A.value},set value(W){A.value=W,B.setValueAtTime(W,b.context.currentTime)},cancelAndHoldAtTime(W){if(typeof A.cancelAndHoldAtTime=="function")F===null&&D.flush(b.context.currentTime),D.add(a(W)),A.cancelAndHoldAtTime(W);else{const Y=Array.from(D).pop();F===null&&D.flush(b.context.currentTime),D.add(a(W));const O=Array.from(D).pop();A.cancelScheduledValues(W),Y!==O&&O!==void 0&&(O.type==="exponentialRampToValue"?A.exponentialRampToValueAtTime(O.value,O.endTime):O.type==="linearRampToValue"?A.linearRampToValueAtTime(O.value,O.endTime):O.type==="setValue"?A.setValueAtTime(O.value,O.startTime):O.type==="setValueCurve"&&A.setValueCurveAtTime(O.values,O.startTime,O.duration))}return B},cancelScheduledValues(W){return F===null&&D.flush(b.context.currentTime),D.add(o(W)),A.cancelScheduledValues(W),B},exponentialRampToValueAtTime(W,Y){if(W===0)throw new RangeError;if(!Number.isFinite(Y)||Y<0)throw new RangeError;const O=b.context.currentTime;return F===null&&D.flush(O),Array.from(D).length===0&&(D.add(d(R,O)),A.setValueAtTime(R,O)),D.add(u(W,Y)),A.exponentialRampToValueAtTime(W,Y),B},linearRampToValueAtTime(W,Y){const O=b.context.currentTime;return F===null&&D.flush(O),Array.from(D).length===0&&(D.add(d(R,O)),A.setValueAtTime(R,O)),D.add(c(W,Y)),A.linearRampToValueAtTime(W,Y),B},setTargetAtTime(W,Y,O){return F===null&&D.flush(b.context.currentTime),D.add(f(W,Y,O)),A.setTargetAtTime(W,Y,O),B},setValueAtTime(W,Y){return F===null&&D.flush(b.context.currentTime),D.add(d(W,Y)),A.setValueAtTime(W,Y),B},setValueCurveAtTime(W,Y,O){const z=W instanceof Float32Array?W:new Float32Array(W);if(y!==null&&y.name==="webkitAudioContext"){const Q=Y+O,M=b.context.sampleRate,V=Math.ceil(Y*M),H=Math.floor(Q*M),X=H-V,he=new Float32Array(X);for(let se=0;se<X;se+=1){const ie=(z.length-1)/O*((V+se)/M-Y),de=Math.floor(ie),pe=Math.ceil(ie);he[se]=de===pe?z[de]:(1-(ie-de))*z[de]+(1-(pe-ie))*z[pe]}F===null&&D.flush(b.context.currentTime),D.add(m(he,Y,O)),A.setValueCurveAtTime(he,Y,O);const I=H/M;I<Q&&_(B,he[he.length-1],I),_(B,z[z.length-1],Q)}else F===null&&D.flush(b.context.currentTime),D.add(m(z,Y,O)),A.setValueCurveAtTime(z,Y,O);return B}};return t.set(B,A),e.set(B,b),r(B,F),B},e6=r=>({replay(e){for(const t of r)if(t.type==="exponentialRampToValue"){const{endTime:s,value:a}=t;e.exponentialRampToValueAtTime(a,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:a}=t;e.linearRampToValueAtTime(a,s)}else if(t.type==="setTarget"){const{startTime:s,target:a,timeConstant:o}=t;e.setTargetAtTime(a,s,o)}else if(t.type==="setValue"){const{startTime:s,value:a}=t;e.setValueAtTime(a,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:a,values:o}=t;e.setValueCurveAtTime(o,a,s)}else throw new Error("Can't apply an unknown automation.")}});class zx{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,a)=>e.call(t,s,a,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const t6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},n6=(r,e,t,s,a,o,u,c,f,d,m,y,_,b)=>class extends e{constructor(A,k,T){var R;const D=c(A),F=f(D),B=m({...t6,...T});_(B);const W=Jm.get(D),Y=W?.get(k),O=F||D.state!=="closed"?D:(R=u(D))!==null&&R!==void 0?R:D,z=a(O,F?null:A.baseLatency,d,k,Y,B),Q=F?s(k,B,Y):null;super(A,!0,z,Q);const M=[];z.parameters.forEach((H,X)=>{const he=t(this,F,H);M.push([X,he])}),this._nativeAudioWorkletNode=z,this._onprocessorerror=null,this._parameters=new zx(M),F&&r(D,this);const{activeInputs:V}=o(this);y(z,V)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(A){const k=typeof A=="function"?b(this,A):null;this._nativeAudioWorkletNode.onprocessorerror=k;const T=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=T!==null&&T===k?A:T}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function ip(r,e,t,s,a){if(typeof r.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),r.copyFromChannel(e[t],s,a);else{const o=r.getChannelData(s);if(e[t].byteLength===0)e[t]=o.slice(a,a+128);else{const u=new Float32Array(o.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(u)}}}const Px=(r,e,t,s,a)=>{typeof r.copyToChannel=="function"?e[t].byteLength!==0&&r.copyToChannel(e[t],s,a):e[t].byteLength!==0&&r.getChannelData(s).set(e[t],a)},ap=(r,e)=>{const t=[];for(let s=0;s<r;s+=1){const a=[],o=typeof e=="number"?e:e[s];for(let u=0;u<o;u+=1)a.push(new Float32Array(128));t.push(a)}return t},r6=(r,e)=>{const t=co(eg,r),s=Tr(e);return co(t,s)},s6=async(r,e,t,s,a,o,u)=>{const c=e===null?Math.ceil(r.context.length/128)*128:e.length,f=s.channelCount*s.numberOfInputs,d=a.reduce((k,T)=>k+T,0),m=d===0?null:t.createBuffer(d,c,t.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const y=wi(r),_=await r6(t,r),b=ap(s.numberOfInputs,s.channelCount),N=ap(s.numberOfOutputs,a),A=Array.from(r.parameters.keys()).reduce((k,T)=>({...k,[T]:new Float32Array(128)}),{});for(let k=0;k<c;k+=128){if(s.numberOfInputs>0&&e!==null)for(let T=0;T<s.numberOfInputs;T+=1)for(let R=0;R<s.channelCount;R+=1)ip(e,b[T],R,R,k);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:T},R)=>{ip(e,A,T,f+R,k)});for(let T=0;T<s.numberOfInputs;T+=1)for(let R=0;R<a[T];R+=1)N[T][R].byteLength===0&&(N[T][R]=new Float32Array(128));try{const T=b.map((D,F)=>y.activeInputs[F].size===0?[]:D),R=u(k/t.sampleRate,t.sampleRate,()=>_.process(T,N,A));if(m!==null)for(let D=0,F=0;D<s.numberOfOutputs;D+=1){for(let B=0;B<a[D];B+=1)Px(m,N[D],B,F+B,k);F+=a[D]}if(!R)break}catch(T){r.dispatchEvent(new ErrorEvent("processorerror",{colno:T.colno,filename:T.filename,lineno:T.lineno,message:T.message}));break}}return m},i6=(r,e,t,s,a,o,u,c,f,d,m,y,_,b,N,A)=>(k,T,R)=>{const D=new WeakMap;let F=null;const B=async(W,Y)=>{let O=m(W),z=null;const Q=hi(O,Y),M=Array.isArray(T.outputChannelCount)?T.outputChannelCount:Array.from(T.outputChannelCount);if(y===null){const V=M.reduce((I,se)=>I+se,0),H=a(Y,{channelCount:Math.max(1,V),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,V)}),X=[];for(let I=0;I<W.numberOfOutputs;I+=1)X.push(s(Y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:M[I]}));const he=u(Y,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1});he.connect=e.bind(null,X),he.disconnect=f.bind(null,X),z=[H,X,he]}else Q||(O=new y(Y,k));if(D.set(Y,z===null?O:z[2]),z!==null){if(F===null){if(R===void 0)throw new Error("Missing the processor constructor.");if(_===null)throw new Error("Missing the native OfflineAudioContext constructor.");const se=W.channelCount*W.numberOfInputs,ie=R.parameterDescriptors===void 0?0:R.parameterDescriptors.length,de=se+ie;F=s6(W,de===0?null:await(async()=>{const G=new _(de,Math.ceil(W.context.length/128)*128,Y.sampleRate),j=[],P=[];for(let oe=0;oe<T.numberOfInputs;oe+=1)j.push(u(G,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1})),P.push(a(G,{channelCount:T.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:T.channelCount}));const ee=await Promise.all(Array.from(W.parameters.values()).map(async oe=>{const fe=o(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:oe.value});return await b(G,oe,fe.offset),fe})),J=s(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,se+ie)});for(let oe=0;oe<T.numberOfInputs;oe+=1){j[oe].connect(P[oe]);for(let fe=0;fe<T.channelCount;fe+=1)P[oe].connect(J,fe,oe*T.channelCount+fe)}for(const[oe,fe]of ee.entries())fe.connect(J,0,se+oe),fe.start(0);return J.connect(G.destination),await Promise.all(j.map(oe=>N(W,G,oe))),A(G)})(),Y,T,M,R,d)}const V=await F,H=t(Y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[X,he,I]=z;V!==null&&(H.buffer=V,H.start(0)),H.connect(X);for(let se=0,ie=0;se<W.numberOfOutputs;se+=1){const de=he[se];for(let pe=0;pe<M[se];pe+=1)X.connect(de,ie+pe,pe);ie+=M[se]}return I}if(Q)for(const[V,H]of W.parameters.entries())await r(Y,H,O.parameters.get(V));else for(const[V,H]of W.parameters.entries())await b(Y,H,O.parameters.get(V));return await N(W,Y,O),O};return{render(W,Y){c(Y,W);const O=D.get(Y);return O!==void 0?Promise.resolve(O):B(W,Y)}}},a6=(r,e,t,s,a,o,u,c,f,d,m,y,_,b,N,A,k,T,R,D)=>class extends N{constructor(B,W){super(B,W),this._nativeContext=B,this._audioWorklet=r===void 0?void 0:{addModule:(Y,O)=>r(this,Y,O)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new a(this)}createBuffer(B,W,Y){return new t({length:W,numberOfChannels:B,sampleRate:Y})}createBufferSource(){return new s(this)}createChannelMerger(B=6){return new o(this,{numberOfInputs:B})}createChannelSplitter(B=6){return new u(this,{numberOfOutputs:B})}createConstantSource(){return new c(this)}createConvolver(){return new f(this)}createDelay(B=1){return new m(this,{maxDelayTime:B})}createDynamicsCompressor(){return new y(this)}createGain(){return new _(this)}createIIRFilter(B,W){return new b(this,{feedback:W,feedforward:B})}createOscillator(){return new A(this)}createPanner(){return new k(this)}createPeriodicWave(B,W,Y={disableNormalization:!1}){return new T(this,{...Y,imag:W,real:B})}createStereoPanner(){return new R(this)}createWaveShaper(){return new D(this)}decodeAudioData(B,W,Y){return d(this._nativeContext,B).then(O=>(typeof W=="function"&&W(O),O),O=>{throw typeof Y=="function"&&Y(O),O})}},o6={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},l6=(r,e,t,s,a,o,u,c)=>class extends r{constructor(d,m){const y=o(d),_={...o6,...m},b=a(y,_),N=u(y),A=N?t():null;super(d,!1,b,A),this._Q=e(this,N,b.Q,yi,Ui),this._detune=e(this,N,b.detune,1200*Math.log2(yi),-1200*Math.log2(yi)),this._frequency=e(this,N,b.frequency,d.sampleRate/2,0),this._gain=e(this,N,b.gain,40*Math.log10(yi),Ui),this._nativeBiquadFilterNode=b,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(d){this._nativeBiquadFilterNode.type=d}getFrequencyResponse(d,m,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(d,m,y)}catch(_){throw _.code===11?s():_}if(d.length!==m.length||m.length!==y.length)throw s()}},c6=(r,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const m=hi(d,f);if(!m){const y={Q:d.Q.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,gain:d.gain.value,type:d.type};d=e(f,y)}return o.set(f,d),m?(await r(f,c.Q,d.Q),await r(f,c.detune,d.detune),await r(f,c.frequency,d.frequency),await r(f,c.gain,d.gain)):(await s(f,c.Q,d.Q),await s(f,c.detune,d.detune),await s(f,c.frequency,d.frequency),await s(f,c.gain,d.gain)),await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},u6=(r,e)=>(t,s)=>{const a=e.get(t);if(a!==void 0)return a;const o=r.get(t);if(o!==void 0)return o;try{const u=s();return u instanceof Promise?(r.set(t,u),u.catch(()=>!1).then(c=>(r.delete(t),e.set(t,c),c))):(e.set(t,u),u)}catch{return e.set(t,!1),!1}},h6={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},f6=(r,e,t,s,a)=>class extends r{constructor(u,c){const f=s(u),d={...h6,...c},m=t(f,d),y=a(f)?e():null;super(u,!1,m,y)}},d6=(r,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!hi(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=r(u,d)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},p6={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},m6=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=s(c),m=o({...p6,...f}),y=t(d,m),_=a(d)?e():null;super(c,!1,y,_)}},g6=(r,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!hi(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=r(u,d)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},b6=r=>(e,t,s)=>r(t,e,s),v6=r=>(e,t,s=0,a=0)=>{const o=e[s];if(o===void 0)throw r();return sp(t)?o.connect(t,0,a):o.connect(t,0)},y6=r=>(e,t)=>{const s=r(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=e.createBuffer(1,2,44100);return s.buffer=a,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},x6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},w6=(r,e,t,s,a,o,u)=>class extends r{constructor(f,d){const m=a(f),y={...x6,...d},_=s(m,y),b=o(m),N=b?t():null;super(f,!1,_,N),this._constantSourceNodeRenderer=N,this._nativeConstantSourceNode=_,this._offset=e(this,b,_.offset,yi,Ui),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(f){const d=typeof f=="function"?u(this,f):null;this._nativeConstantSourceNode.onended=d;const m=this._nativeConstantSourceNode.onended;this._onended=m!==null&&m===d?f:m}start(f=0){if(this._nativeConstantSourceNode.start(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=f),this.context.state!=="closed"){Lh(this);const d=()=>{this._nativeConstantSourceNode.removeEventListener("ended",d),kl(this)&&pd(this)};this._nativeConstantSourceNode.addEventListener("ended",d)}}stop(f=0){this._nativeConstantSourceNode.stop(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=f)}},_6=(r,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const f=async(d,m)=>{let y=t(d);const _=hi(y,m);if(!_){const b={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value};y=e(m,b),u!==null&&y.start(u),c!==null&&y.stop(c)}return o.set(m,y),_?await r(m,d.offset,y.offset):await s(m,d.offset,y.offset),await a(d,m,y),y};return{set start(d){u=d},set stop(d){c=d},render(d,m){const y=o.get(m);return y!==void 0?Promise.resolve(y):f(d,m)}}},S6=r=>e=>(r[0]=e,r[0]),N6={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},A6=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=s(c),m={...N6,...f},y=t(d,m),b=a(d)?e():null;super(c,!1,y,b),this._isBufferNullified=!1,this._nativeConvolverNode=y,m.buffer!==null&&o(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const f=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=f.createBuffer(1,1,f.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},C6=(r,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!hi(c,u)){const d={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=r(u,d)}return s.set(u,c),Fh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},T6=(r,e)=>(t,s,a)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,a)}catch(o){throw o.name==="SyntaxError"?r():o}},k6=()=>new DOMException("","DataCloneError"),k5=r=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const a=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>a();try{e.postMessage(r,[r])}catch{}finally{a()}})},j6=(r,e,t,s,a,o,u,c,f,d,m)=>(y,_)=>{const b=u(y)?y:o(y);if(a.has(_)){const N=t();return Promise.reject(N)}try{a.add(_)}catch{}return e(f,()=>f(b))?b.decodeAudioData(_).then(N=>(k5(_).catch(()=>{}),e(c,()=>c(N))||m(N),r.add(N),N)):new Promise((N,A)=>{const k=async()=>{try{await k5(_)}catch{}},T=R=>{A(R),k()};try{b.decodeAudioData(_,R=>{typeof R.copyFromChannel!="function"&&(d(R),Lg(R)),r.add(R),k().then(()=>N(R))},R=>{T(R===null?s():R)})}catch(R){T(R)}})},E6=(r,e,t,s,a,o,u,c)=>(f,d)=>{const m=e.get(f);if(m===void 0)throw new Error("Missing the expected cycle count.");const y=o(f.context),_=c(y);if(m===d){if(e.delete(f),!_&&u(f)){const b=s(f),{outputs:N}=t(f);for(const A of N)if(gd(A)){const k=s(A[0]);r(b,k,A[1],A[2])}else{const k=a(A[0]);b.connect(k,A[1])}}}else e.set(f,m-d)},M6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},L6=(r,e,t,s,a,o,u)=>class extends r{constructor(f,d){const m=a(f),y={...M6,...d},_=s(m,y),b=o(m),N=b?t(y.maxDelayTime):null;super(f,!1,_,N),this._delayTime=e(this,b,_.delayTime),u(this,y.maxDelayTime)}get delayTime(){return this._delayTime}},O6=(r,e,t,s,a)=>o=>{const u=new WeakMap,c=async(f,d)=>{let m=t(f);const y=hi(m,d);if(!y){const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,delayTime:m.delayTime.value,maxDelayTime:o};m=e(d,_)}return u.set(d,m),y?await r(d,f.delayTime,m.delayTime):await s(d,f.delayTime,m.delayTime),await a(f,d,m),m};return{render(f,d){const m=u.get(d);return m!==void 0?Promise.resolve(m):c(f,d)}}},D6=r=>(e,t,s,a)=>r(e[a],o=>o[0]===t&&o[1]===s),R6=r=>(e,t)=>{r(e).delete(t)},I6=r=>"delayTime"in r,V6=(r,e,t)=>function s(a,o){const u=tp(o)?o:t(r,o);if(I6(u))return[];if(a[0]===u)return[a];if(a.includes(u))return[];const{outputs:c}=e(u);return Array.from(c).map(f=>s([...a,u],f[0])).reduce((f,d)=>f.concat(d),[])},S1=(r,e,t)=>{const s=e[t];if(s===void 0)throw r();return s},F6=r=>(e,t=void 0,s=void 0,a=0)=>t===void 0?e.forEach(o=>o.disconnect()):typeof t=="number"?S1(r,e,t).disconnect():sp(t)?s===void 0?e.forEach(o=>o.disconnect(t)):a===void 0?S1(r,e,s).disconnect(t,0):S1(r,e,s).disconnect(t,0,a):s===void 0?e.forEach(o=>o.disconnect(t)):S1(r,e,s).disconnect(t,0),B6={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},z6=(r,e,t,s,a,o,u,c)=>class extends r{constructor(d,m){const y=o(d),_={...B6,...m},b=s(y,_),N=u(y),A=N?t():null;super(d,!1,b,A),this._attack=e(this,N,b.attack),this._knee=e(this,N,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=e(this,N,b.ratio),this._release=e(this,N,b.release),this._threshold=e(this,N,b.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(d){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=d,d>2)throw this._nativeDynamicsCompressorNode.channelCount=m,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(d){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=d,d==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=m,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},P6=(r,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const m=hi(d,f);if(!m){const y={attack:d.attack.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,knee:d.knee.value,ratio:d.ratio.value,release:d.release.value,threshold:d.threshold.value};d=e(f,y)}return o.set(f,d),m?(await r(f,c.attack,d.attack),await r(f,c.knee,d.knee),await r(f,c.ratio,d.ratio),await r(f,c.release,d.release),await r(f,c.threshold,d.threshold)):(await s(f,c.attack,d.attack),await s(f,c.knee,d.knee),await s(f,c.ratio,d.ratio),await s(f,c.release,d.release),await s(f,c.threshold,d.threshold)),await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},q6=()=>new DOMException("","EncodingError"),U6=r=>e=>new Promise((t,s)=>{if(r===null){s(new SyntaxError);return}const a=r.document.head;if(a===null)s(new SyntaxError);else{const o=r.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(u),f=r.onerror,d=()=>{r.onerror=f,URL.revokeObjectURL(c)};r.onerror=(m,y,_,b,N)=>{if(y===c||y===r.location.href&&_===1&&b===1)return d(),s(N),!1;if(f!==null)return f(m,y,_,b,N)},o.onerror=()=>{d(),s(new SyntaxError)},o.onload=()=>{d(),t()},o.src=c,o.type="module",a.appendChild(o)}}),H6=r=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,a){if(s!==null){let o=this._listeners.get(s);o===void 0&&(o=r(this,s),typeof s=="function"&&this._listeners.set(s,o)),this._nativeEventTarget.addEventListener(t,o,a)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,a){const o=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,o===void 0?null:o,a)}},G6=r=>(e,t,s)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{r!==null&&(delete r.currentFrame,delete r.currentTime)}},W6=r=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw r()},Y6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},X6=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=a(c),m={...Y6,...f},y=s(d,m),_=o(d),b=_?t():null;super(c,!1,y,b),this._gain=e(this,_,y.gain,yi,Ui)}get gain(){return this._gain}},$6=(r,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const m=hi(d,f);if(!m){const y={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:d.gain.value};d=e(f,y)}return o.set(f,d),m?await r(f,c.gain,d.gain):await s(f,c.gain,d.gain),await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},Z6=(r,e)=>t=>e(r,t),Q6=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},K6=r=>e=>{var t;return(t=r.get(e))!==null&&t!==void 0?t:0},J6=r=>e=>{const t=r(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},eN=r=>e=>r.get(e),qs=()=>new DOMException("","InvalidStateError"),tN=r=>e=>{const t=r.get(e);if(t===void 0)throw qs();return t},nN=(r,e)=>t=>{let s=r.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),r.set(t,s),s},rN=r=>e=>{const t=r.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},jp=()=>new DOMException("","InvalidAccessError"),sN=r=>{r.getFrequencyResponse=(e=>(t,s,a)=>{if(t.length!==s.length||s.length!==a.length)throw jp();return e.call(r,t,s,a)})(r.getFrequencyResponse)},iN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},aN=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=s(c),m=a(d),y={...iN,...f},_=e(d,m?null:c.baseLatency,y),b=m?t(y.feedback,y.feedforward):null;super(c,!1,_,b),sN(_),this._nativeIIRFilterNode=_,o(this,1)}getFrequencyResponse(c,f,d){return this._nativeIIRFilterNode.getFrequencyResponse(c,f,d)}},qx=(r,e,t,s,a,o,u,c,f,d,m)=>{const y=d.length;let _=c;for(let b=0;b<y;b+=1){let N=t[0]*d[b];for(let A=1;A<a;A+=1){const k=_-A&f-1;N+=t[A]*o[k],N-=r[A]*u[k]}for(let A=a;A<s;A+=1)N+=t[A]*o[_-A&f-1];for(let A=a;A<e;A+=1)N-=r[A]*u[_-A&f-1];o[_]=d[b],u[_]=N,_=_+1&f-1,m[b]=N}return _},oN=(r,e,t,s)=>{const a=t instanceof Float64Array?t:new Float64Array(t),o=s instanceof Float64Array?s:new Float64Array(s),u=a.length,c=o.length,f=Math.min(u,c);if(a[0]!==1){for(let N=0;N<u;N+=1)o[N]/=a[0];for(let N=1;N<c;N+=1)a[N]/=a[0]}const d=32,m=new Float32Array(d),y=new Float32Array(d),_=e.createBuffer(r.numberOfChannels,r.length,r.sampleRate),b=r.numberOfChannels;for(let N=0;N<b;N+=1){const A=r.getChannelData(N),k=_.getChannelData(N);m.fill(0),y.fill(0),qx(a,u,o,c,f,m,y,0,d,A,k)}return _},lN=(r,e,t,s,a)=>(o,u)=>{const c=new WeakMap;let f=null;const d=async(m,y)=>{let _=null,b=e(m);const N=hi(b,y);if(y.createIIRFilter===void 0?_=r(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):N||(b=y.createIIRFilter(u,o)),c.set(y,_===null?b:_),_!==null){if(f===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new t(m.context.destination.channelCount,m.context.length,y.sampleRate);f=(async()=>{await s(m,k,k.destination);const T=await a(k);return oN(T,y,o,u)})()}const A=await f;return _.buffer=A,_.start(0),_}return await s(m,y,b),b};return{render(m,y){const _=c.get(y);return _!==void 0?Promise.resolve(_):d(m,y)}}},cN=(r,e,t,s,a,o)=>u=>(c,f)=>{const d=r.get(c);if(d===void 0){if(!u&&o(c)){const m=s(c),{outputs:y}=t(c);for(const _ of y)if(gd(_)){const b=s(_[0]);e(m,b,_[1],_[2])}else{const b=a(_[0]);m.disconnect(b,_[1])}}r.set(c,f)}else r.set(c,d+f)},uN=(r,e)=>t=>{const s=r.get(t);return e(s)||e(t)},hN=(r,e)=>t=>r.has(t)||e(t),fN=(r,e)=>t=>r.has(t)||e(t),dN=(r,e)=>t=>{const s=r.get(t);return e(s)||e(t)},pN=r=>e=>r!==null&&e instanceof r,mN=r=>e=>r!==null&&typeof r.AudioNode=="function"&&e instanceof r.AudioNode,gN=r=>e=>r!==null&&typeof r.AudioParam=="function"&&e instanceof r.AudioParam,bN=(r,e)=>t=>r(t)||e(t),vN=r=>e=>r!==null&&e instanceof r,yN=r=>r!==null&&r.isSecureContext,xN=(r,e,t,s)=>class extends r{constructor(o,u){const c=t(o),f=e(c,u);if(s(c))throw TypeError();super(o,!0,f,null),this._nativeMediaElementAudioSourceNode=f}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},wN={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},_N=(r,e,t,s)=>class extends r{constructor(o,u){const c=t(o);if(s(c))throw new TypeError;const f={...wN,...u},d=e(c,f);super(o,!1,d,null),this._nativeMediaStreamAudioDestinationNode=d}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},SN=(r,e,t,s)=>class extends r{constructor(o,u){const c=t(o),f=e(c,u);if(s(c))throw new TypeError;super(o,!0,f,null),this._nativeMediaStreamAudioSourceNode=f}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},NN=(r,e,t)=>class extends r{constructor(a,o){const u=t(a),c=e(u,o);super(a,!0,c,null)}},AN=(r,e,t,s,a,o)=>class extends t{constructor(c,f){super(c),this._nativeContext=c,Tp.set(this,c),s(c)&&a.set(c,new Set),this._destination=new r(this,f),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const f=typeof c=="function"?o(this,c):null;this._nativeContext.onstatechange=f;const d=this._nativeContext.onstatechange;this._onstatechange=d!==null&&d===f?c:d}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Kf=r=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=r.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},CN=(r,e)=>(t,s,a)=>{const o=new Set;return t.connect=(u=>(c,f=0,d=0)=>{const m=o.size===0;if(e(c))return u.call(t,c,f,d),r(o,[c,f,d],y=>y[0]===c&&y[1]===f&&y[2]===d,!0),m&&s(),c;u.call(t,c,f),r(o,[c,f],y=>y[0]===c&&y[1]===f,!0),m&&s()})(t.connect),t.disconnect=(u=>(c,f,d)=>{const m=o.size>0;if(c===void 0)u.apply(t),o.clear();else if(typeof c=="number"){u.call(t,c);for(const _ of o)_[1]===c&&o.delete(_)}else{e(c)?u.call(t,c,f,d):u.call(t,c,f);for(const _ of o)_[0]===c&&(f===void 0||_[1]===f)&&(d===void 0||_[2]===d)&&o.delete(_)}const y=o.size===0;m&&y&&a()})(t.disconnect),t},Rr=(r,e,t)=>{const s=e[t];s!==void 0&&s!==r[t]&&(r[t]=s)},Es=(r,e)=>{Rr(r,e,"channelCount"),Rr(r,e,"channelCountMode"),Rr(r,e,"channelInterpretation")},j5=r=>typeof r.getFloatTimeDomainData=="function",TN=r=>{r.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);r.getByteTimeDomainData(t);const s=Math.max(t.length,r.fftSize);for(let a=0;a<s;a+=1)e[a]=(t[a]-128)*.0078125;return e}},kN=(r,e)=>(t,s)=>{const a=t.createAnalyser();if(Es(a,s),!(s.maxDecibels>s.minDecibels))throw e();return Rr(a,s,"fftSize"),Rr(a,s,"maxDecibels"),Rr(a,s,"minDecibels"),Rr(a,s,"smoothingTimeConstant"),r(j5,()=>j5(a))||TN(a),a},jN=r=>r===null?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null,Kr=(r,e,t)=>{const s=e[t];s!==void 0&&s!==r[t].value&&(r[t].value=s)},EN=r=>{r.start=(e=>{let t=!1;return(s=0,a=0,o)=>{if(t)throw qs();e.call(r,s,a,o),t=!0}})(r.start)},Rg=r=>{r.start=(e=>(t=0,s=0,a)=>{if(typeof a=="number"&&a<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(r,t,s,a)})(r.start)},Ig=r=>{r.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(r,t)})(r.stop)},MN=(r,e,t,s,a,o,u,c,f,d,m)=>(y,_)=>{const b=y.createBufferSource();return Es(b,_),Kr(b,_,"playbackRate"),Rr(b,_,"buffer"),Rr(b,_,"loop"),Rr(b,_,"loopEnd"),Rr(b,_,"loopStart"),e(t,()=>t(y))||EN(b),e(s,()=>s(y))||f(b),e(a,()=>a(y))||d(b,y),e(o,()=>o(y))||Rg(b),e(u,()=>u(y))||m(b,y),e(c,()=>c(y))||Ig(b),r(y,b),b},LN=r=>r===null?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null,ON=(r,e)=>(t,s,a)=>{const o=t.destination;if(o.channelCount!==s)try{o.channelCount=s}catch{}a&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:s});const u=r(t,{channelCount:s,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(u,"channelCount",c=>()=>c.call(u),c=>f=>{c.call(u,f);try{o.channelCount=f}catch(d){if(f>o.maxChannelCount)throw d}}),e(u,"channelCountMode",c=>()=>c.call(u),c=>f=>{c.call(u,f),o.channelCountMode=f}),e(u,"channelInterpretation",c=>()=>c.call(u),c=>f=>{c.call(u,f),o.channelInterpretation=f}),Object.defineProperty(u,"maxChannelCount",{get:()=>o.maxChannelCount}),u.connect(o),u},DN=r=>r===null?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null,RN=r=>{const{port1:e}=new MessageChannel;try{e.postMessage(r)}finally{e.close()}},IN=(r,e,t,s,a)=>(o,u,c,f,d,m)=>{if(c!==null)try{const y=new c(o,f,m),_=new Map;let b=null;if(Object.defineProperties(y,{channelCount:{get:()=>m.channelCount,set:()=>{throw r()}},channelCountMode:{get:()=>"explicit",set:()=>{throw r()}},onprocessorerror:{get:()=>b,set:N=>{typeof b=="function"&&y.removeEventListener("processorerror",b),b=typeof N=="function"?N:null,typeof b=="function"&&y.addEventListener("processorerror",b)}}}),y.addEventListener=(N=>(...A)=>{if(A[0]==="processorerror"){const k=typeof A[1]=="function"?A[1]:typeof A[1]=="object"&&A[1]!==null&&typeof A[1].handleEvent=="function"?A[1].handleEvent:null;if(k!==null){const T=_.get(A[1]);T!==void 0?A[1]=T:(A[1]=R=>{R.type==="error"?(Object.defineProperties(R,{type:{value:"processorerror"}}),k(R)):k(new ErrorEvent(A[0],{...R}))},_.set(k,A[1]))}}return N.call(y,"error",A[1],A[2]),N.call(y,...A)})(y.addEventListener),y.removeEventListener=(N=>(...A)=>{if(A[0]==="processorerror"){const k=_.get(A[1]);k!==void 0&&(_.delete(A[1]),A[1]=k)}return N.call(y,"error",A[1],A[2]),N.call(y,A[0],A[1],A[2])})(y.removeEventListener),m.numberOfOutputs!==0){const N=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(N).connect(o.destination),a(y,()=>N.disconnect(),()=>N.connect(o.destination))}return y}catch(y){throw y.code===11?s():y}if(d===void 0)throw s();return RN(m),e(o,u,d,m)},Ux=(r,e)=>r===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*e))))),VN=r=>new Promise((e,t)=>{const{port1:s,port2:a}=new MessageChannel;s.onmessage=({data:o})=>{s.close(),a.close(),e(o)},s.onmessageerror=({data:o})=>{s.close(),a.close(),t(o)},a.postMessage(r)}),FN=async(r,e)=>{const t=await VN(e);return new r(t)},BN=(r,e,t,s)=>{let a=eg.get(r);a===void 0&&(a=new WeakMap,eg.set(r,a));const o=FN(t,s);return a.set(e,o),o},zN=(r,e,t,s,a,o,u,c,f,d,m,y,_)=>(b,N,A,k)=>{if(k.numberOfInputs===0&&k.numberOfOutputs===0)throw f();const T=Array.isArray(k.outputChannelCount)?k.outputChannelCount:Array.from(k.outputChannelCount);if(T.some($=>$<1))throw f();if(T.length!==k.numberOfOutputs)throw e();if(k.channelCountMode!=="explicit")throw f();const R=k.channelCount*k.numberOfInputs,D=T.reduce(($,Re)=>$+Re,0),F=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length;if(R+F>6||D>6)throw f();const B=new MessageChannel,W=[],Y=[];for(let $=0;$<k.numberOfInputs;$+=1)W.push(u(b,{channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation,gain:1})),Y.push(a(b,{channelCount:k.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:k.channelCount}));const O=[];if(A.parameterDescriptors!==void 0)for(const{defaultValue:$,maxValue:Re,minValue:pt,name:Ke}of A.parameterDescriptors){const Le=o(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k.parameterData[Ke]!==void 0?k.parameterData[Ke]:$===void 0?0:$});Object.defineProperties(Le.offset,{defaultValue:{get:()=>$===void 0?0:$},maxValue:{get:()=>Re===void 0?yi:Re},minValue:{get:()=>pt===void 0?Ui:pt}}),O.push(Le)}const z=s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+F)}),Q=Ux(N,b.sampleRate),M=c(b,Q,R+F,Math.max(1,D)),V=a(b,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),H=[];for(let $=0;$<k.numberOfOutputs;$+=1)H.push(s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[$]}));for(let $=0;$<k.numberOfInputs;$+=1){W[$].connect(Y[$]);for(let Re=0;Re<k.channelCount;Re+=1)Y[$].connect(z,Re,$*k.channelCount+Re)}const X=new zx(A.parameterDescriptors===void 0?[]:A.parameterDescriptors.map(({name:$},Re)=>{const pt=O[Re];return pt.connect(z,0,R+Re),pt.start(0),[$,pt.offset]}));z.connect(M);let he=k.channelInterpretation,I=null;const se=k.numberOfOutputs===0?[M]:H,ie={get bufferSize(){return Q},get channelCount(){return k.channelCount},set channelCount($){throw t()},get channelCountMode(){return k.channelCountMode},set channelCountMode($){throw t()},get channelInterpretation(){return he},set channelInterpretation($){for(const Re of W)Re.channelInterpretation=$;he=$},get context(){return M.context},get inputs(){return W},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get onprocessorerror(){return I},set onprocessorerror($){typeof I=="function"&&ie.removeEventListener("processorerror",I),I=typeof $=="function"?$:null,typeof I=="function"&&ie.addEventListener("processorerror",I)},get parameters(){return X},get port(){return B.port2},addEventListener(...$){return M.addEventListener($[0],$[1],$[2])},connect:r.bind(null,se),disconnect:d.bind(null,se),dispatchEvent(...$){return M.dispatchEvent($[0])},removeEventListener(...$){return M.removeEventListener($[0],$[1],$[2])}},de=new Map;B.port1.addEventListener=($=>(...Re)=>{if(Re[0]==="message"){const pt=typeof Re[1]=="function"?Re[1]:typeof Re[1]=="object"&&Re[1]!==null&&typeof Re[1].handleEvent=="function"?Re[1].handleEvent:null;if(pt!==null){const Ke=de.get(Re[1]);Ke!==void 0?Re[1]=Ke:(Re[1]=Le=>{m(b.currentTime,b.sampleRate,()=>pt(Le))},de.set(pt,Re[1]))}}return $.call(B.port1,Re[0],Re[1],Re[2])})(B.port1.addEventListener),B.port1.removeEventListener=($=>(...Re)=>{if(Re[0]==="message"){const pt=de.get(Re[1]);pt!==void 0&&(de.delete(Re[1]),Re[1]=pt)}return $.call(B.port1,Re[0],Re[1],Re[2])})(B.port1.removeEventListener);let pe=null;Object.defineProperty(B.port1,"onmessage",{get:()=>pe,set:$=>{typeof pe=="function"&&B.port1.removeEventListener("message",pe),pe=typeof $=="function"?$:null,typeof pe=="function"&&(B.port1.addEventListener("message",pe),B.port1.start())}}),A.prototype.port=B.port1;let G=null;BN(b,ie,A,k).then($=>G=$);const P=ap(k.numberOfInputs,k.channelCount),ee=ap(k.numberOfOutputs,T),J=A.parameterDescriptors===void 0?[]:A.parameterDescriptors.reduce(($,{name:Re})=>({...$,[Re]:new Float32Array(128)}),{});let oe=!0;const fe=()=>{k.numberOfOutputs>0&&M.disconnect(V);for(let $=0,Re=0;$<k.numberOfOutputs;$+=1){const pt=H[$];for(let Ke=0;Ke<T[$];Ke+=1)V.disconnect(pt,Re+Ke,Ke);Re+=T[$]}},me=new Map;M.onaudioprocess=({inputBuffer:$,outputBuffer:Re})=>{if(G!==null){const pt=y(ie);for(let Ke=0;Ke<Q;Ke+=128){for(let Le=0;Le<k.numberOfInputs;Le+=1)for(let tt=0;tt<k.channelCount;tt+=1)ip($,P[Le],tt,tt,Ke);A.parameterDescriptors!==void 0&&A.parameterDescriptors.forEach(({name:Le},tt)=>{ip($,J,Le,R+tt,Ke)});for(let Le=0;Le<k.numberOfInputs;Le+=1)for(let tt=0;tt<T[Le];tt+=1)ee[Le][tt].byteLength===0&&(ee[Le][tt]=new Float32Array(128));try{const Le=P.map((Ue,ot)=>{if(pt[ot].size>0)return me.set(ot,Q/128),Ue;const Be=me.get(ot);return Be===void 0?[]:(Ue.every(at=>at.every(nt=>nt===0))&&(Be===1?me.delete(ot):me.set(ot,Be-1)),Ue)});oe=m(b.currentTime+Ke/b.sampleRate,b.sampleRate,()=>G.process(Le,ee,J));for(let Ue=0,ot=0;Ue<k.numberOfOutputs;Ue+=1){for(let it=0;it<T[Ue];it+=1)Px(Re,ee[Ue],it,ot+it,Ke);ot+=T[Ue]}}catch(Le){oe=!1,ie.dispatchEvent(new ErrorEvent("processorerror",{colno:Le.colno,filename:Le.filename,lineno:Le.lineno,message:Le.message}))}if(!oe){for(let Le=0;Le<k.numberOfInputs;Le+=1){W[Le].disconnect(Y[Le]);for(let tt=0;tt<k.channelCount;tt+=1)Y[Ke].disconnect(z,tt,Le*k.channelCount+tt)}if(A.parameterDescriptors!==void 0){const Le=A.parameterDescriptors.length;for(let tt=0;tt<Le;tt+=1){const Ue=O[tt];Ue.disconnect(z,0,R+tt),Ue.stop()}}z.disconnect(M),M.onaudioprocess=null,Se?fe():Ye();break}}}};let Se=!1;const ye=u(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Fe=()=>M.connect(ye).connect(b.destination),Ye=()=>{M.disconnect(ye),ye.disconnect()},Je=()=>{if(oe){Ye(),k.numberOfOutputs>0&&M.connect(V);for(let $=0,Re=0;$<k.numberOfOutputs;$+=1){const pt=H[$];for(let Ke=0;Ke<T[$];Ke+=1)V.connect(pt,Re+Ke,Ke);Re+=T[$]}}Se=!0},ct=()=>{oe&&(Fe(),fe()),Se=!1};return Fe(),_(ie,Je,ct)},Hx=(r,e)=>{const t=r.createBiquadFilter();return Es(t,e),Kr(t,e,"Q"),Kr(t,e,"detune"),Kr(t,e,"frequency"),Kr(t,e,"gain"),Rr(t,e,"type"),t},PN=(r,e)=>(t,s)=>{const a=t.createChannelMerger(s.numberOfInputs);return r!==null&&r.name==="webkitAudioContext"&&e(t,a),Es(a,s),a},qN=r=>{const e=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw qs()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw qs()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw qs()}})},bd=(r,e)=>{const t=r.createChannelSplitter(e.numberOfOutputs);return Es(t,e),qN(t),t},UN=(r,e,t,s,a)=>(o,u)=>{if(o.createConstantSource===void 0)return t(o,u);const c=o.createConstantSource();return Es(c,u),Kr(c,u,"offset"),e(s,()=>s(o))||Rg(c),e(a,()=>a(o))||Ig(c),r(o,c),c},Bh=(r,e)=>(r.connect=e.connect.bind(e),r.disconnect=e.disconnect.bind(e),r),HN=(r,e,t,s)=>(a,{offset:o,...u})=>{const c=a.createBuffer(1,2,44100),f=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=t(a,{...u,gain:o}),m=c.getChannelData(0);m[0]=1,m[1]=1,f.buffer=c,f.loop=!0;const y={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(N){d.channelCount=N},get channelCountMode(){return d.channelCountMode},set channelCountMode(N){d.channelCountMode=N},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(N){d.channelInterpretation=N},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return f.onended},set onended(N){f.onended=N},addEventListener(...N){return f.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return f.dispatchEvent(N[0])},removeEventListener(...N){return f.removeEventListener(N[0],N[1],N[2])},start(N=0){f.start.call(f,N)},stop(N=0){f.stop.call(f,N)}},_=()=>f.connect(d),b=()=>f.disconnect(d);return r(a,f),s(Bh(y,d),_,b)},GN=(r,e)=>(t,s)=>{const a=t.createConvolver();if(Es(a,s),s.disableNormalization===a.normalize&&(a.normalize=!s.disableNormalization),Rr(a,s,"buffer"),s.channelCount>2||(e(a,"channelCount",o=>()=>o.call(a),o=>u=>{if(u>2)throw r();return o.call(a,u)}),s.channelCountMode==="max"))throw r();return e(a,"channelCountMode",o=>()=>o.call(a),o=>u=>{if(u==="max")throw r();return o.call(a,u)}),a},Gx=(r,e)=>{const t=r.createDelay(e.maxDelayTime);return Es(t,e),Kr(t,e,"delayTime"),t},WN=r=>(e,t)=>{const s=e.createDynamicsCompressor();if(Es(s,t),t.channelCount>2||t.channelCountMode==="max")throw r();return Kr(s,t,"attack"),Kr(s,t,"knee"),Kr(s,t,"ratio"),Kr(s,t,"release"),Kr(s,t,"threshold"),s},Gi=(r,e)=>{const t=r.createGain();return Es(t,e),Kr(t,e,"gain"),t},YN=r=>(e,t,s)=>{if(e.createIIRFilter===void 0)return r(e,t,s);const a=e.createIIRFilter(s.feedforward,s.feedback);return Es(a,s),a};function XN(r,e){const t=e[0]*e[0]+e[1]*e[1];return[(r[0]*e[0]+r[1]*e[1])/t,(r[1]*e[0]-r[0]*e[1])/t]}function $N(r,e){return[r[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]]}function E5(r,e){let t=[0,0];for(let s=r.length-1;s>=0;s-=1)t=$N(t,e),t[0]+=r[s];return t}const ZN=(r,e,t,s)=>(a,o,{channelCount:u,channelCountMode:c,channelInterpretation:f,feedback:d,feedforward:m})=>{const y=Ux(o,a.sampleRate),_=d instanceof Float64Array?d:new Float64Array(d),b=m instanceof Float64Array?m:new Float64Array(m),N=_.length,A=b.length,k=Math.min(N,A);if(N===0||N>20)throw s();if(_[0]===0)throw e();if(A===0||A>20)throw s();if(b[0]===0)throw e();if(_[0]!==1){for(let O=0;O<A;O+=1)b[O]/=_[0];for(let O=1;O<N;O+=1)_[O]/=_[0]}const T=t(a,y,u,u);T.channelCount=u,T.channelCountMode=c,T.channelInterpretation=f;const R=32,D=[],F=[],B=[];for(let O=0;O<u;O+=1){D.push(0);const z=new Float32Array(R),Q=new Float32Array(R);z.fill(0),Q.fill(0),F.push(z),B.push(Q)}T.onaudioprocess=O=>{const z=O.inputBuffer,Q=O.outputBuffer,M=z.numberOfChannels;for(let V=0;V<M;V+=1){const H=z.getChannelData(V),X=Q.getChannelData(V);D[V]=qx(_,N,b,A,k,F[V],B[V],D[V],R,H,X)}};const W=a.sampleRate/2;return Bh({get bufferSize(){return y},get channelCount(){return T.channelCount},set channelCount(O){T.channelCount=O},get channelCountMode(){return T.channelCountMode},set channelCountMode(O){T.channelCountMode=O},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(O){T.channelInterpretation=O},get context(){return T.context},get inputs(){return[T]},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},addEventListener(...O){return T.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return T.dispatchEvent(O[0])},getFrequencyResponse(O,z,Q){if(O.length!==z.length||z.length!==Q.length)throw r();const M=O.length;for(let V=0;V<M;V+=1){const H=-Math.PI*(O[V]/W),X=[Math.cos(H),Math.sin(H)],he=E5(b,X),I=E5(_,X),se=XN(he,I);z[V]=Math.sqrt(se[0]*se[0]+se[1]*se[1]),Q[V]=Math.atan2(se[1],se[0])}},removeEventListener(...O){return T.removeEventListener(O[0],O[1],O[2])}},T)},QN=(r,e)=>r.createMediaElementSource(e.mediaElement),KN=(r,e)=>{const t=r.createMediaStreamDestination();return Es(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},JN=(r,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((o,u)=>o.id<u.id?-1:o.id>u.id?1:0);const s=t.slice(0,1),a=r.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(a,"mediaStream",{value:e}),a},eA=(r,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const a=new MediaStream([s]),o=t.createMediaStreamSource(a);if(s.kind!=="audio")throw r();if(e(t))throw new TypeError;return o},tA=r=>r===null?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null,nA=(r,e,t,s,a,o)=>(u,c)=>{const f=u.createOscillator();return Es(f,c),Kr(f,c,"detune"),Kr(f,c,"frequency"),c.periodicWave!==void 0?f.setPeriodicWave(c.periodicWave):Rr(f,c,"type"),e(t,()=>t(u))||Rg(f),e(s,()=>s(u))||o(f,u),e(a,()=>a(u))||Ig(f),r(u,f),f},rA=r=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?r(e,t):(Es(s,t),Kr(s,t,"orientationX"),Kr(s,t,"orientationY"),Kr(s,t,"orientationZ"),Kr(s,t,"positionX"),Kr(s,t,"positionY"),Kr(s,t,"positionZ"),Rr(s,t,"coneInnerAngle"),Rr(s,t,"coneOuterAngle"),Rr(s,t,"coneOuterGain"),Rr(s,t,"distanceModel"),Rr(s,t,"maxDistance"),Rr(s,t,"panningModel"),Rr(s,t,"refDistance"),Rr(s,t,"rolloffFactor"),s)},sA=(r,e,t,s,a,o,u,c,f,d)=>(m,{coneInnerAngle:y,coneOuterAngle:_,coneOuterGain:b,distanceModel:N,maxDistance:A,orientationX:k,orientationY:T,orientationZ:R,panningModel:D,positionX:F,positionY:B,positionZ:W,refDistance:Y,rolloffFactor:O,...z})=>{const Q=m.createPanner();if(z.channelCount>2||z.channelCountMode==="max")throw u();Es(Q,z);const M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},V=t(m,{...M,channelInterpretation:"speakers",numberOfInputs:6}),H=s(m,{...z,gain:1}),X=s(m,{...M,gain:1}),he=s(m,{...M,gain:0}),I=s(m,{...M,gain:0}),se=s(m,{...M,gain:0}),ie=s(m,{...M,gain:0}),de=s(m,{...M,gain:0}),pe=a(m,256,6,1),G=o(m,{...M,curve:new Float32Array([1,1]),oversample:"none"});let j=[k,T,R],P=[F,B,W];const ee=new Float32Array(1);pe.onaudioprocess=({inputBuffer:me})=>{const Se=[f(me,ee,0),f(me,ee,1),f(me,ee,2)];Se.some((Fe,Ye)=>Fe!==j[Ye])&&(Q.setOrientation(...Se),j=Se);const ye=[f(me,ee,3),f(me,ee,4),f(me,ee,5)];ye.some((Fe,Ye)=>Fe!==P[Ye])&&(Q.setPosition(...ye),P=ye)},Object.defineProperty(he.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(se.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ie.gain,"defaultValue",{get:()=>0}),Object.defineProperty(de.gain,"defaultValue",{get:()=>0});const J={get bufferSize(){},get channelCount(){return Q.channelCount},set channelCount(me){if(me>2)throw u();H.channelCount=me,Q.channelCount=me},get channelCountMode(){return Q.channelCountMode},set channelCountMode(me){if(me==="max")throw u();H.channelCountMode=me,Q.channelCountMode=me},get channelInterpretation(){return Q.channelInterpretation},set channelInterpretation(me){H.channelInterpretation=me,Q.channelInterpretation=me},get coneInnerAngle(){return Q.coneInnerAngle},set coneInnerAngle(me){Q.coneInnerAngle=me},get coneOuterAngle(){return Q.coneOuterAngle},set coneOuterAngle(me){Q.coneOuterAngle=me},get coneOuterGain(){return Q.coneOuterGain},set coneOuterGain(me){if(me<0||me>1)throw e();Q.coneOuterGain=me},get context(){return Q.context},get distanceModel(){return Q.distanceModel},set distanceModel(me){Q.distanceModel=me},get inputs(){return[H]},get maxDistance(){return Q.maxDistance},set maxDistance(me){if(me<0)throw new RangeError;Q.maxDistance=me},get numberOfInputs(){return Q.numberOfInputs},get numberOfOutputs(){return Q.numberOfOutputs},get orientationX(){return X.gain},get orientationY(){return he.gain},get orientationZ(){return I.gain},get panningModel(){return Q.panningModel},set panningModel(me){Q.panningModel=me},get positionX(){return se.gain},get positionY(){return ie.gain},get positionZ(){return de.gain},get refDistance(){return Q.refDistance},set refDistance(me){if(me<0)throw new RangeError;Q.refDistance=me},get rolloffFactor(){return Q.rolloffFactor},set rolloffFactor(me){if(me<0)throw new RangeError;Q.rolloffFactor=me},addEventListener(...me){return H.addEventListener(me[0],me[1],me[2])},dispatchEvent(...me){return H.dispatchEvent(me[0])},removeEventListener(...me){return H.removeEventListener(me[0],me[1],me[2])}};y!==J.coneInnerAngle&&(J.coneInnerAngle=y),_!==J.coneOuterAngle&&(J.coneOuterAngle=_),b!==J.coneOuterGain&&(J.coneOuterGain=b),N!==J.distanceModel&&(J.distanceModel=N),A!==J.maxDistance&&(J.maxDistance=A),k!==J.orientationX.value&&(J.orientationX.value=k),T!==J.orientationY.value&&(J.orientationY.value=T),R!==J.orientationZ.value&&(J.orientationZ.value=R),D!==J.panningModel&&(J.panningModel=D),F!==J.positionX.value&&(J.positionX.value=F),B!==J.positionY.value&&(J.positionY.value=B),W!==J.positionZ.value&&(J.positionZ.value=W),Y!==J.refDistance&&(J.refDistance=Y),O!==J.rolloffFactor&&(J.rolloffFactor=O),(j[0]!==1||j[1]!==0||j[2]!==0)&&Q.setOrientation(...j),(P[0]!==0||P[1]!==0||P[2]!==0)&&Q.setPosition(...P);const oe=()=>{H.connect(Q),r(H,G,0,0),G.connect(X).connect(V,0,0),G.connect(he).connect(V,0,1),G.connect(I).connect(V,0,2),G.connect(se).connect(V,0,3),G.connect(ie).connect(V,0,4),G.connect(de).connect(V,0,5),V.connect(pe).connect(m.destination)},fe=()=>{H.disconnect(Q),c(H,G,0,0),G.disconnect(X),X.disconnect(V),G.disconnect(he),he.disconnect(V),G.disconnect(I),I.disconnect(V),G.disconnect(se),se.disconnect(V),G.disconnect(ie),ie.disconnect(V),G.disconnect(de),de.disconnect(V),V.disconnect(pe),pe.disconnect(m.destination)};return d(Bh(J,Q),oe,fe)},iA=r=>(e,{disableNormalization:t,imag:s,real:a})=>{const o=s instanceof Float32Array?s:new Float32Array(s),u=a instanceof Float32Array?a:new Float32Array(a),c=e.createPeriodicWave(u,o,{disableNormalization:t});if(Array.from(s).length<2)throw r();return c},vd=(r,e,t,s)=>r.createScriptProcessor(e,t,s),aA=(r,e)=>(t,s)=>{const a=s.channelCountMode;if(a==="clamped-max")throw e();if(t.createStereoPanner===void 0)return r(t,s);const o=t.createStereoPanner();return Es(o,s),Kr(o,s,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>a,set:u=>{if(u!==a)throw e()}}),o},oA=(r,e,t,s,a,o)=>{const c=new Float32Array([1,1]),f=Math.PI/2,d={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...d,oversample:"none"},y=(N,A,k,T)=>{const R=new Float32Array(16385),D=new Float32Array(16385);for(let z=0;z<16385;z+=1){const Q=z/16384*f;R[z]=Math.cos(Q),D[z]=Math.sin(Q)}const F=t(N,{...d,gain:0}),B=s(N,{...m,curve:R}),W=s(N,{...m,curve:c}),Y=t(N,{...d,gain:0}),O=s(N,{...m,curve:D});return{connectGraph(){A.connect(F),A.connect(W.inputs===void 0?W:W.inputs[0]),A.connect(Y),W.connect(k),k.connect(B.inputs===void 0?B:B.inputs[0]),k.connect(O.inputs===void 0?O:O.inputs[0]),B.connect(F.gain),O.connect(Y.gain),F.connect(T,0,0),Y.connect(T,0,1)},disconnectGraph(){A.disconnect(F),A.disconnect(W.inputs===void 0?W:W.inputs[0]),A.disconnect(Y),W.disconnect(k),k.disconnect(B.inputs===void 0?B:B.inputs[0]),k.disconnect(O.inputs===void 0?O:O.inputs[0]),B.disconnect(F.gain),O.disconnect(Y.gain),F.disconnect(T,0,0),Y.disconnect(T,0,1)}}},_=(N,A,k,T)=>{const R=new Float32Array(16385),D=new Float32Array(16385),F=new Float32Array(16385),B=new Float32Array(16385),W=Math.floor(16385/2);for(let se=0;se<16385;se+=1)if(se>W){const ie=(se-W)/(16384-W)*f;R[se]=Math.cos(ie),D[se]=Math.sin(ie),F[se]=0,B[se]=1}else{const ie=se/(16384-W)*f;R[se]=1,D[se]=0,F[se]=Math.cos(ie),B[se]=Math.sin(ie)}const Y=e(N,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),O=t(N,{...d,gain:0}),z=s(N,{...m,curve:R}),Q=t(N,{...d,gain:0}),M=s(N,{...m,curve:D}),V=s(N,{...m,curve:c}),H=t(N,{...d,gain:0}),X=s(N,{...m,curve:F}),he=t(N,{...d,gain:0}),I=s(N,{...m,curve:B});return{connectGraph(){A.connect(Y),A.connect(V.inputs===void 0?V:V.inputs[0]),Y.connect(O,0),Y.connect(Q,0),Y.connect(H,1),Y.connect(he,1),V.connect(k),k.connect(z.inputs===void 0?z:z.inputs[0]),k.connect(M.inputs===void 0?M:M.inputs[0]),k.connect(X.inputs===void 0?X:X.inputs[0]),k.connect(I.inputs===void 0?I:I.inputs[0]),z.connect(O.gain),M.connect(Q.gain),X.connect(H.gain),I.connect(he.gain),O.connect(T,0,0),H.connect(T,0,0),Q.connect(T,0,1),he.connect(T,0,1)},disconnectGraph(){A.disconnect(Y),A.disconnect(V.inputs===void 0?V:V.inputs[0]),Y.disconnect(O,0),Y.disconnect(Q,0),Y.disconnect(H,1),Y.disconnect(he,1),V.disconnect(k),k.disconnect(z.inputs===void 0?z:z.inputs[0]),k.disconnect(M.inputs===void 0?M:M.inputs[0]),k.disconnect(X.inputs===void 0?X:X.inputs[0]),k.disconnect(I.inputs===void 0?I:I.inputs[0]),z.disconnect(O.gain),M.disconnect(Q.gain),X.disconnect(H.gain),I.disconnect(he.gain),O.disconnect(T,0,0),H.disconnect(T,0,0),Q.disconnect(T,0,1),he.disconnect(T,0,1)}}},b=(N,A,k,T,R)=>{if(A===1)return y(N,k,T,R);if(A===2)return _(N,k,T,R);throw a()};return(N,{channelCount:A,channelCountMode:k,pan:T,...R})=>{if(k==="max")throw a();const D=r(N,{...R,channelCount:1,channelCountMode:k,numberOfInputs:2}),F=t(N,{...R,channelCount:A,channelCountMode:k,gain:1}),B=t(N,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:T});let{connectGraph:W,disconnectGraph:Y}=b(N,A,F,B,D);Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"maxValue",{get:()=>1}),Object.defineProperty(B.gain,"minValue",{get:()=>-1});const O={get bufferSize(){},get channelCount(){return F.channelCount},set channelCount(V){F.channelCount!==V&&(z&&Y(),{connectGraph:W,disconnectGraph:Y}=b(N,V,F,B,D),z&&W()),F.channelCount=V},get channelCountMode(){return F.channelCountMode},set channelCountMode(V){if(V==="clamped-max"||V==="max")throw a();F.channelCountMode=V},get channelInterpretation(){return F.channelInterpretation},set channelInterpretation(V){F.channelInterpretation=V},get context(){return F.context},get inputs(){return[F]},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get pan(){return B.gain},addEventListener(...V){return F.addEventListener(V[0],V[1],V[2])},dispatchEvent(...V){return F.dispatchEvent(V[0])},removeEventListener(...V){return F.removeEventListener(V[0],V[1],V[2])}};let z=!1;const Q=()=>{W(),z=!0},M=()=>{Y(),z=!1};return o(Bh(O,D),Q,M)}},lA=(r,e,t,s,a,o,u)=>(c,f)=>{const d=c.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,f);Es(d,f);const m=f.curve===null||f.curve instanceof Float32Array?f.curve:new Float32Array(f.curve);if(m!==null&&m.length<2)throw e();Rr(d,{curve:m},"curve"),Rr(d,f,"oversample");let y=null,_=!1;return u(d,"curve",A=>()=>A.call(d),A=>k=>(A.call(d,k),_&&(s(k)&&y===null?y=r(c,d):!s(k)&&y!==null&&(y(),y=null)),k)),a(d,()=>{_=!0,s(d.curve)&&(y=r(c,d))},()=>{_=!1,y!==null&&(y(),y=null)})},cA=(r,e,t,s,a)=>(o,{curve:u,oversample:c,...f})=>{const d=o.createWaveShaper(),m=o.createWaveShaper();Es(d,f),Es(m,f);const y=t(o,{...f,gain:1}),_=t(o,{...f,gain:-1}),b=t(o,{...f,gain:1}),N=t(o,{...f,gain:-1});let A=null,k=!1,T=null;const R={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(B){y.channelCount=B,_.channelCount=B,d.channelCount=B,b.channelCount=B,m.channelCount=B,N.channelCount=B},get channelCountMode(){return d.channelCountMode},set channelCountMode(B){y.channelCountMode=B,_.channelCountMode=B,d.channelCountMode=B,b.channelCountMode=B,m.channelCountMode=B,N.channelCountMode=B},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(B){y.channelInterpretation=B,_.channelInterpretation=B,d.channelInterpretation=B,b.channelInterpretation=B,m.channelInterpretation=B,N.channelInterpretation=B},get context(){return d.context},get curve(){return T},set curve(B){if(B!==null&&B.length<2)throw e();if(B===null)d.curve=B,m.curve=B;else{const W=B.length,Y=new Float32Array(W+2-W%2),O=new Float32Array(W+2-W%2);Y[0]=B[0],O[0]=-B[W-1];const z=Math.ceil((W+1)/2),Q=(W+1)/2-1;for(let M=1;M<z;M+=1){const V=M/z*Q,H=Math.floor(V),X=Math.ceil(V);Y[M]=H===X?B[H]:(1-(V-H))*B[H]+(1-(X-V))*B[X],O[M]=H===X?-B[W-1-H]:-((1-(V-H))*B[W-1-H])-(1-(X-V))*B[W-1-X]}Y[z]=W%2===1?B[z-1]:(B[z-2]+B[z-1])/2,d.curve=Y,m.curve=O}T=B,k&&(s(T)&&A===null?A=r(o,y):A!==null&&(A(),A=null))},get inputs(){return[y]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(B){d.oversample=B,m.oversample=B},addEventListener(...B){return y.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return y.dispatchEvent(B[0])},removeEventListener(...B){return y.removeEventListener(B[0],B[1],B[2])}};u!==null&&(R.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==R.oversample&&(R.oversample=c);const D=()=>{y.connect(d).connect(b),y.connect(_).connect(m).connect(N).connect(b),k=!0,s(T)&&(A=r(o,y))},F=()=>{y.disconnect(d),d.disconnect(b),y.disconnect(_),_.disconnect(m),m.disconnect(N),N.disconnect(b),k=!1,A!==null&&(A(),A=null)};return a(Bh(R,b),D,F)},Si=()=>new DOMException("","NotSupportedError"),uA={numberOfChannels:1},hA=(r,e,t,s,a)=>class extends r{constructor(u,c,f){let d;if(typeof u=="number"&&c!==void 0&&f!==void 0)d={length:c,numberOfChannels:u,sampleRate:f};else if(typeof u=="object")d=u;else throw new Error("The given parameters are not valid.");const{length:m,numberOfChannels:y,sampleRate:_}={...uA,...d},b=s(y,m,_);e(Kf,()=>Kf(b))||b.addEventListener("statechange",(()=>{let N=0;const A=k=>{this._state==="running"&&(N>0?(b.removeEventListener("statechange",A),k.stopImmediatePropagation(),this._waitForThePromiseToSettle(k)):N+=1)};return A})()),super(b,y),this._length=m,this._nativeOfflineAudioContext=b,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Ix(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},fA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},dA=(r,e,t,s,a,o,u)=>class extends r{constructor(f,d){const m=a(f),y={...fA,...d},_=t(m,y),b=o(m),N=b?s():null,A=f.sampleRate/2;super(f,!1,_,N),this._detune=e(this,b,_.detune,153600,-153600),this._frequency=e(this,b,_.frequency,A,-A),this._nativeOscillatorNode=_,this._onended=null,this._oscillatorNodeRenderer=N,this._oscillatorNodeRenderer!==null&&y.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(f){const d=typeof f=="function"?u(this,f):null;this._nativeOscillatorNode.onended=d;const m=this._nativeOscillatorNode.onended;this._onended=m!==null&&m===d?f:m}get type(){return this._nativeOscillatorNode.type}set type(f){this._nativeOscillatorNode.type=f,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(f){this._nativeOscillatorNode.setPeriodicWave(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=f)}start(f=0){if(this._nativeOscillatorNode.start(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=f),this.context.state!=="closed"){Lh(this);const d=()=>{this._nativeOscillatorNode.removeEventListener("ended",d),kl(this)&&pd(this)};this._nativeOscillatorNode.addEventListener("ended",d)}}stop(f=0){this._nativeOscillatorNode.stop(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=f)}},pA=(r,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null,f=null;const d=async(m,y)=>{let _=t(m);const b=hi(_,y);if(!b){const N={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,detune:_.detune.value,frequency:_.frequency.value,periodicWave:u===null?void 0:u,type:_.type};_=e(y,N),c!==null&&_.start(c),f!==null&&_.stop(f)}return o.set(y,_),b?(await r(y,m.detune,_.detune),await r(y,m.frequency,_.frequency)):(await s(y,m.detune,_.detune),await s(y,m.frequency,_.frequency)),await a(m,y,_),_};return{set periodicWave(m){u=m},set start(m){c=m},set stop(m){f=m},render(m,y){const _=o.get(y);return _!==void 0?Promise.resolve(_):d(m,y)}}},mA={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},gA=(r,e,t,s,a,o,u)=>class extends r{constructor(f,d){const m=a(f),y={...mA,...d},_=t(m,y),b=o(m),N=b?s():null;super(f,!1,_,N),this._nativePannerNode=_,this._orientationX=e(this,b,_.orientationX,yi,Ui),this._orientationY=e(this,b,_.orientationY,yi,Ui),this._orientationZ=e(this,b,_.orientationZ,yi,Ui),this._positionX=e(this,b,_.positionX,yi,Ui),this._positionY=e(this,b,_.positionY,yi,Ui),this._positionZ=e(this,b,_.positionZ,yi,Ui),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(f){this._nativePannerNode.coneInnerAngle=f}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(f){this._nativePannerNode.coneOuterAngle=f}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(f){this._nativePannerNode.coneOuterGain=f}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(f){this._nativePannerNode.distanceModel=f}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(f){this._nativePannerNode.maxDistance=f}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(f){this._nativePannerNode.panningModel=f}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(f){this._nativePannerNode.refDistance=f}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(f){this._nativePannerNode.rolloffFactor=f}},bA=(r,e,t,s,a,o,u,c,f,d)=>()=>{const m=new WeakMap;let y=null;const _=async(b,N)=>{let A=null,k=o(b);const T={channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation},R={...T,coneInnerAngle:k.coneInnerAngle,coneOuterAngle:k.coneOuterAngle,coneOuterGain:k.coneOuterGain,distanceModel:k.distanceModel,maxDistance:k.maxDistance,panningModel:k.panningModel,refDistance:k.refDistance,rolloffFactor:k.rolloffFactor},D=hi(k,N);if("bufferSize"in k)A=s(N,{...T,gain:1});else if(!D){const F={...R,orientationX:k.orientationX.value,orientationY:k.orientationY.value,orientationZ:k.orientationZ.value,positionX:k.positionX.value,positionY:k.positionY.value,positionZ:k.positionZ.value};k=a(N,F)}if(m.set(N,A===null?k:A),A!==null){if(y===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const M=new u(6,b.context.length,N.sampleRate),V=e(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});V.connect(M.destination),y=(async()=>{const H=await Promise.all([b.orientationX,b.orientationY,b.orientationZ,b.positionX,b.positionY,b.positionZ].map(async(X,he)=>{const I=t(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:he===0?1:0});return await c(M,X,I.offset),I}));for(let X=0;X<6;X+=1)H[X].connect(V,0,X),H[X].start(0);return d(M)})()}const F=await y,B=s(N,{...T,gain:1});await f(b,N,B);const W=[];for(let M=0;M<F.numberOfChannels;M+=1)W.push(F.getChannelData(M));let Y=[W[0][0],W[1][0],W[2][0]],O=[W[3][0],W[4][0],W[5][0]],z=s(N,{...T,gain:1}),Q=a(N,{...R,orientationX:Y[0],orientationY:Y[1],orientationZ:Y[2],positionX:O[0],positionY:O[1],positionZ:O[2]});B.connect(z).connect(Q.inputs[0]),Q.connect(A);for(let M=128;M<F.length;M+=128){const V=[W[0][M],W[1][M],W[2][M]],H=[W[3][M],W[4][M],W[5][M]];if(V.some((X,he)=>X!==Y[he])||H.some((X,he)=>X!==O[he])){Y=V,O=H;const X=M/N.sampleRate;z.gain.setValueAtTime(0,X),z=s(N,{...T,gain:0}),Q=a(N,{...R,orientationX:Y[0],orientationY:Y[1],orientationZ:Y[2],positionX:O[0],positionY:O[1],positionZ:O[2]}),z.gain.setValueAtTime(1,X),B.connect(z).connect(Q.inputs[0]),Q.connect(A)}}return A}return D?(await r(N,b.orientationX,k.orientationX),await r(N,b.orientationY,k.orientationY),await r(N,b.orientationZ,k.orientationZ),await r(N,b.positionX,k.positionX),await r(N,b.positionY,k.positionY),await r(N,b.positionZ,k.positionZ)):(await c(N,b.orientationX,k.orientationX),await c(N,b.orientationY,k.orientationY),await c(N,b.orientationZ,k.orientationZ),await c(N,b.positionX,k.positionX),await c(N,b.positionY,k.positionY),await c(N,b.positionZ,k.positionZ)),Fh(k)?await f(b,N,k.inputs[0]):await f(b,N,k),k};return{render(b,N){const A=m.get(N);return A!==void 0?Promise.resolve(A):_(b,N)}}},vA={disableNormalization:!1},yA=(r,e,t,s)=>class Wx{constructor(o,u){const c=e(o),f=s({...vA,...u}),d=r(c,f);return t.add(d),d}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===Wx.prototype||t.has(o)}},xA=(r,e)=>(t,s,a)=>(r(s).replay(a),e(s,t,a)),wA=(r,e,t)=>async(s,a,o)=>{const u=r(s);await Promise.all(u.activeInputs.map((c,f)=>Array.from(c).map(async([d,m])=>{const _=await e(d).render(d,a),b=s.context.destination;!t(d)&&(s!==b||!t(s))&&_.connect(o,m,f)})).reduce((c,f)=>[...c,...f],[]))},_A=(r,e,t)=>async(s,a,o)=>{const u=e(s);await Promise.all(Array.from(u.activeInputs).map(async([c,f])=>{const m=await r(c).render(c,a);t(c)||m.connect(o,f)}))},SA=(r,e,t,s)=>a=>r(Kf,()=>Kf(a))?Promise.resolve(r(s,s)).then(o=>{if(!o){const u=t(a,512,0,1);a.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>a.currentTime,u.connect(a.destination)}return a.startRendering()}):new Promise(o=>{const u=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=c=>{u.disconnect(),o(c.renderedBuffer)},u.connect(a.destination),a.startRendering()}),NA=r=>(e,t)=>{r.set(e,t)},AA=r=>(e,t)=>r.set(e,t),CA=(r,e,t,s,a,o,u,c)=>(f,d)=>t(f).render(f,d).then(()=>Promise.all(Array.from(s(d)).map(m=>t(m).render(m,d)))).then(()=>a(d)).then(m=>(typeof m.copyFromChannel!="function"?(u(m),Lg(m)):e(o,()=>o(m))||c(m),r.add(m),m)),TA={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},kA=(r,e,t,s,a,o)=>class extends r{constructor(c,f){const d=a(c),m={...TA,...f},y=t(d,m),_=o(d),b=_?s():null;super(c,!1,y,b),this._pan=e(this,_,y.pan)}get pan(){return this._pan}},jA=(r,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const m=hi(d,f);if(!m){const y={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,pan:d.pan.value};d=e(f,y)}return o.set(f,d),m?await r(f,c.pan,d.pan):await s(f,c.pan,d.pan),Fh(d)?await a(c,f,d.inputs[0]):await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},EA=r=>()=>{if(r===null)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0},MA=(r,e)=>async()=>{if(r===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),a=URL.createObjectURL(t);let o=!1,u=!1;try{await s.audioWorklet.addModule(a);const c=new r(s,"a",{numberOfOutputs:0}),f=s.createOscillator();c.port.onmessage=()=>o=!0,c.onprocessorerror=()=>u=!0,f.connect(c),f.start(0),await s.startRendering(),await new Promise(d=>setTimeout(d))}catch{}finally{URL.revokeObjectURL(a)}return o&&!u},LA=(r,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=r(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{t.oncomplete=()=>{s.disconnect(),a(t.currentTime!==0)},t.startRendering()})},OA=()=>new DOMException("","UnknownError"),DA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},RA=(r,e,t,s,a,o,u)=>class extends r{constructor(f,d){const m=a(f),y={...DA,...d},_=t(m,y),N=o(m)?s():null;super(f,!0,_,N),this._isCurveNullified=!1,this._nativeWaveShaperNode=_,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(f){if(f===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(f.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=f}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(f){this._nativeWaveShaperNode.oversample=f}},IA=(r,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!hi(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=r(u,d)}return s.set(u,c),Fh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},VA=()=>typeof window>"u"?null:window,FA=(r,e)=>t=>{t.copyFromChannel=(s,a,o=0)=>{const u=r(o),c=r(a);if(c>=t.numberOfChannels)throw e();const f=t.length,d=t.getChannelData(c),m=s.length;for(let y=u<0?-u:0;y+u<f&&y<m;y+=1)s[y]=d[y+u]},t.copyToChannel=(s,a,o=0)=>{const u=r(o),c=r(a);if(c>=t.numberOfChannels)throw e();const f=t.length,d=t.getChannelData(c),m=s.length;for(let y=u<0?-u:0;y+u<f&&y<m;y+=1)d[y+u]=s[y]}},BA=r=>e=>{e.copyFromChannel=(t=>(s,a,o=0)=>{const u=r(o),c=r(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyFromChannel),e.copyToChannel=(t=>(s,a,o=0)=>{const u=r(o),c=r(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyToChannel)},zA=r=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),r(e,"buffer",a=>()=>{const o=a.call(e);return o===s?null:o},a=>o=>a.call(e,o===null?s:o))},PA=(r,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const a=t.createBufferSource();e(s,()=>{const c=s.numberOfInputs;for(let f=0;f<c;f+=1)a.connect(s,0,f)},()=>a.disconnect(s))},Yx=(r,e,t)=>r.copyFromChannel===void 0?r.getChannelData(t)[0]:(r.copyFromChannel(e,t),e[0]),Xx=r=>{if(r===null)return!1;const e=r.length;return e%2!==0?r[Math.floor(e/2)]!==0:r[e/2-1]+r[e/2]!==0},yd=(r,e,t,s)=>{let a=r;for(;!a.hasOwnProperty(e);)a=Object.getPrototypeOf(a);const{get:o,set:u}=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(r,e,{get:t(o),set:s(u)})},qA=r=>({...r,outputChannelCount:r.outputChannelCount!==void 0?r.outputChannelCount:r.numberOfInputs===1&&r.numberOfOutputs===1?[r.channelCount]:Array.from({length:r.numberOfOutputs},()=>1)}),UA=r=>({...r,channelCount:r.numberOfOutputs}),HA=r=>{const{imag:e,real:t}=r;return e===void 0?t===void 0?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(t,()=>0),real:t}:t===void 0?{...r,imag:e,real:Array.from(e,()=>0)}:{...r,imag:e,real:t}},$x=(r,e,t)=>{try{r.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;$x(r,e,t+1e-7)}},GA=r=>{const e=r.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},WA=r=>{const e=r.createBufferSource(),t=r.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},YA=r=>{const e=r.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Vg=r=>{const e=r.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Zx=r=>{const e=r.createBuffer(1,1,44100),t=r.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Fg=r=>{const e=r.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},XA=r=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(r)}finally{e.close(),t.close()}},$A=r=>{r.start=(e=>(t=0,s=0,a)=>{const o=r.buffer,u=o===null?s:Math.min(o.duration,s);o!==null&&u>o.duration-.5/r.context.sampleRate?e.call(r,t,0,0):e.call(r,t,u,a)})(r.start)},Qx=(r,e)=>{const t=e.createGain();r.connect(t);const s=(a=>()=>{a.call(r,t),r.removeEventListener("ended",s)})(r.disconnect);r.addEventListener("ended",s),Bh(r,t),r.stop=(a=>{let o=!1;return(u=0)=>{if(o)try{a.call(r,u)}catch{t.gain.setValueAtTime(0,u)}else a.call(r,u),o=!0}})(r.stop)},zh=(r,e)=>t=>{const s={value:r};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(r,t):e.handleEvent.call(r,t)},ZA=gS(xu),QA=_S(xu),KA=D6(kp),Kx=new WeakMap,JA=K6(Kx),po=u6(new Map,new WeakMap),Uo=VA(),Jx=kN(po,Go),Bg=Q6(wi),Js=wA(wi,Bg,mu),e8=TS(Jx,Tr,Js),br=tN(Tp),Ol=tA(Uo),ur=vN(Ol),e3=new WeakMap,t3=H6(zh),xd=LN(Uo),zg=pN(xd),Pg=mN(Uo),n3=gN(Uo),Jf=DN(Uo),is=KS(bS(jx),wS(ZA,QA,np,KA,rp,wi,JA,dd,Tr,xu,kl,mu,B1),po,cN(Km,rp,wi,Tr,Qf,kl),Go,jp,Si,E6(np,Km,wi,Tr,Qf,br,kl,ur),V6(e3,wi,co),t3,br,zg,Pg,n3,ur,Jf),t8=CS(is,e8,Go,Jx,br,ur),qg=new WeakSet,M5=jN(Uo),r3=S6(new Uint32Array(1)),Ug=FA(r3,Go),Hg=BA(r3),s3=jS(qg,po,Si,M5,Ol,EA(M5),Ug,Hg),Ep=SS(Gi),i3=_A(Bg,md,mu),Wo=b6(i3),Ph=MN(Ep,po,GA,WA,YA,Vg,Zx,Fg,$A,zA(yd),Qx),Yo=xA(J6(md),i3),n8=LS(Wo,Ph,Tr,Yo,Js),mo=JS(vS(Ex),e3,Mg,e6,uS,hS,fS,dS,pS,$m,Tx,xd,$x),r8=MS(is,n8,mo,qs,Ph,br,ur,zh),s8=PS(is,qS,Go,qs,ON(Gi,yd),br,ur,Js),i8=c6(Wo,Hx,Tr,Yo,Js),wu=AA(Kx),a8=l6(is,mo,i8,jp,Hx,br,ur,wu),Mc=CN(xu,Pg),o8=PA(qs,Mc),Lc=PN(xd,o8),l8=d6(Lc,Tr,Js),c8=f6(is,l8,Lc,br,ur),u8=g6(bd,Tr,Js),h8=m6(is,u8,bd,br,ur,UA),f8=HN(Ep,Ph,Gi,Mc),qh=UN(Ep,po,f8,Vg,Fg),d8=_6(Wo,qh,Tr,Yo,Js),p8=w6(is,mo,d8,qh,br,ur,zh),a3=GN(Si,yd),m8=C6(a3,Tr,Js),g8=A6(is,m8,a3,br,ur,wu),b8=O6(Wo,Gx,Tr,Yo,Js),v8=L6(is,mo,b8,Gx,br,ur,wu),o3=WN(Si),y8=P6(Wo,o3,Tr,Yo,Js),x8=z6(is,mo,y8,o3,Si,br,ur,wu),w8=$6(Wo,Gi,Tr,Yo,Js),_8=X6(is,mo,w8,Gi,br,ur),S8=ZN(jp,qs,vd,Si),Mp=SA(po,Gi,vd,LA(Gi,Ol)),N8=lN(Ph,Tr,Ol,Js,Mp),A8=YN(S8),C8=aN(is,A8,N8,br,ur,wu),T8=US(mo,Lc,qh,vd,Si,Yx,ur,yd),l3=new WeakMap,k8=AN(s8,T8,t3,ur,l3,zh),c3=nA(Ep,po,Vg,Zx,Fg,Qx),j8=pA(Wo,c3,Tr,Yo,Js),E8=dA(is,mo,c3,j8,br,ur,zh),u3=y6(Ph),M8=cA(u3,qs,Gi,Xx,Mc),Lp=lA(u3,qs,M8,Xx,Mc,xd,yd),L8=sA(np,qs,Lc,Gi,vd,Lp,Si,rp,Yx,Mc),h3=rA(L8),O8=bA(Wo,Lc,qh,Gi,h3,Tr,Ol,Yo,Js,Mp),D8=gA(is,mo,h3,O8,br,ur,wu),R8=iA(Go),I8=yA(R8,br,new WeakSet,HA),V8=oA(Lc,bd,Gi,Lp,Si,Mc),f3=aA(V8,Si),F8=jA(Wo,f3,Tr,Yo,Js),B8=kA(is,mo,f3,F8,br,ur),z8=IA(Lp,Tr,Js),P8=RA(is,qs,Lp,z8,br,ur,wu),d3=yN(Uo),Gg=G6(Uo),p3=new WeakMap,q8=nN(p3,Ol),U8=d3?xS(po,Si,U6(Uo),Gg,W6(mS),br,q8,ur,Jf,new WeakMap,new WeakMap,MA(Jf,Ol),Uo):void 0,H8=bN(zg,ur),G8=j6(qg,po,k6,q6,new WeakSet,br,H8,ep,Kf,Ug,Hg),m3=a6(U8,t8,s3,r8,a8,c8,h8,p8,g8,G8,v8,x8,_8,C8,k8,E8,D8,I8,B8,P8),W8=xN(is,QN,br,ur),Y8=_N(is,KN,br,ur),X8=SN(is,JN,br,ur),$8=eA(qs,ur),Z8=NN(is,$8,br),Q8=zS(m3,qs,Si,OA,W8,Y8,X8,Z8,xd),Wg=rN(l3),K8=NS(Wg),g3=v6(Go),J8=R6(Wg),b3=F6(Go),v3=new WeakMap,eC=Z6(v3,co),tC=zN(g3,Go,qs,Lc,bd,qh,Gi,vd,Si,b3,Gg,eC,Mc),nC=IN(qs,tC,Gi,Si,Mc),rC=i6(Wo,g3,Ph,Lc,bd,qh,Gi,J8,b3,Gg,Tr,Jf,Ol,Yo,Js,Mp),sC=eN(p3),iC=NA(v3),L5=d3?n6(K8,is,mo,rC,nC,wi,sC,br,ur,Jf,qA,iC,XA,zh):void 0,aC=T6(Si,Ol),oC=CA(qg,po,Bg,Wg,Mp,ep,Ug,Hg),lC=hA(m3,po,qs,aC,oC),cC=uN(Tp,zg),uC=hN(Eg,Pg),hC=fN(Mg,n3),fC=dN(Tp,ur);function Ea(r){return r===void 0}function Mn(r){return r!==void 0}function dC(r){return typeof r=="function"}function jl(r){return typeof r=="number"}function fu(r){return Object.prototype.toString.call(r)==="[object Object]"&&r.constructor===Object}function pC(r){return typeof r=="boolean"}function ua(r){return Array.isArray(r)}function El(r){return typeof r=="string"}function N1(r){return El(r)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(r)}function Zt(r,e){if(!r)throw new Error(e)}function Ml(r,e,t=1/0){if(!(e<=r&&r<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${r}`)}function y3(r){!r.isOffline&&r.state!=="running"&&Op('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let x3=!1,O5=!1;function D5(r){x3=r}function mC(r){Ea(r)&&x3&&!O5&&(O5=!0,Op("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let w3=console;function gC(...r){w3.log(...r)}function Op(...r){w3.warn(...r)}function bC(r){return new Q8(r)}function vC(r,e,t){return new lC(r,e,t)}const oa=typeof self=="object"?self:null,yC=oa&&(oa.hasOwnProperty("AudioContext")||oa.hasOwnProperty("webkitAudioContext"));function xC(r,e,t){return Zt(Mn(L5),"AudioWorkletNode only works in a secure context (https or localhost)"),new(r instanceof oa?.BaseAudioContext?oa?.AudioWorkletNode:L5)(r,e,t)}function go(r,e,t,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,s);else for(var c=r.length-1;c>=0;c--)(u=r[c])&&(o=(a<3?u(o):a>3?u(e,t,o):u(e,t))||o);return a>3&&o&&Object.defineProperty(e,t,o),o}function ds(r,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(m){try{d(s.next(m))}catch(y){u(y)}}function f(m){try{d(s.throw(m))}catch(y){u(y)}}function d(m){m.done?o(m.value):a(m.value).then(c,f)}d((s=s.apply(r,e||[])).next())})}class wC{constructor(e,t,s,a){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function gu(r){return hC(r)}function Nc(r){return uC(r)}function z1(r){return fC(r)}function bh(r){return cC(r)}function _C(r){return r instanceof s3}function SC(r,e){return r==="value"||gu(e)||Nc(e)||_C(e)}function du(r,...e){if(!e.length)return r;const t=e.shift();if(fu(r)&&fu(t))for(const s in t)SC(s,t[s])?r[s]=t[s]:fu(t[s])?(r[s]||Object.assign(r,{[s]:{}}),du(r[s],t[s])):Object.assign(r,{[s]:t[s]});return du(r,...e)}function NC(r,e){return r.length===e.length&&r.every((t,s)=>e[s]===t)}function Wt(r,e,t=[],s){const a={},o=Array.from(e);if(fu(o[0])&&s&&!Reflect.has(o[0],s)&&(Object.keys(o[0]).some(c=>Reflect.has(r,c))||(du(a,{[s]:o[0]}),t.splice(t.indexOf(s),1),o.shift())),o.length===1&&fu(o[0]))du(a,o[0]);else for(let u=0;u<t.length;u++)Mn(o[u])&&(a[t[u]]=o[u]);return du(r,a)}function AC(r){return r.constructor.getDefaults()}function Nh(r,e){return Ea(r)?e:r}function ao(r,e){return e.forEach(t=>{Reflect.has(r,t)&&delete r[t]}),r}class Dl{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||oa&&this.toString()===oa.TONE_DEBUG_CLASS)&&gC(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Dl.version=Cx;const Yg=1e-6;function Oh(r,e){return r>e+Yg}function rg(r,e){return Oh(r,e)||io(r,e)}function op(r,e){return r+Yg<e}function io(r,e){return Math.abs(r-e)<Yg}function CC(r,e,t){return Math.max(Math.min(r,t),e)}class Ma extends Dl{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Wt(Ma.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Zt(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Zt(rg(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(io(this._timeline[t].time,e)){for(let s=t;s>=0&&io(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&rg(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const a=this._timeline.length;let o=a;if(a>0&&this._timeline[a-1][t]<=e)return a-1;for(;s<o;){let u=Math.floor(s+(o-s)/2);const c=this._timeline[u],f=this._timeline[u+1];if(io(c[t],e)){for(let d=u;d<this._timeline.length;d++){const m=this._timeline[d];if(io(m[t],e))u=d;else break}return u}else{if(op(c[t],e)&&Oh(f[t],e))return u;Oh(c[t],e)?o=u:s=u+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let a=this._search(e),o=this._search(t);return a!==-1&&o!==-1?(this._timeline[a].time!==e&&(a+=1),this._timeline[o].time===t&&(o-=1),this._iterate(s,a,o)):a===-1&&this._iterate(s,0,o),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&io(this._timeline[s].time,e)){let a=s;for(let o=s;o>=0&&io(this._timeline[o].time,e);o--)a=o;this._iterate(o=>{t(o)},a,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const _3=[];function Dp(r){_3.push(r)}function TC(r){_3.forEach(e=>e(r))}const S3=[];function Rp(r){S3.push(r)}function kC(r){S3.forEach(e=>e(r))}class wd extends Dl{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(a=>{Ea(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(t)}),this}once(e,t){const s=(...a)=>{t(...a),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(a=>{if(Ea(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(Ea(t))this._events[a]=[];else{const o=this._events[a];for(let u=o.length-1;u>=0;u--)o[u]===t&&o.splice(u,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let a=0,o=s.length;a<o;a++)s[a].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(wd.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class N3 extends wd{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}let Xg=class A3 extends N3{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ma,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=Wt(A3.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=bC({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new wC(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(TC(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Zt(bh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Zt(bh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Zt(bh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Zt(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Zt(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Zt(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Zt(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return xC(this.rawContext,e,t)}addAudioWorkletModule(e){return ds(this,void 0,void 0,function*(){Zt(Mn(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ds(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return bh(this._context)?this._context.resume():Promise.resolve()}close(){return ds(this,void 0,void 0,function*(){bh(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&kC(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let o=0;o<s.length;o++)s[o]=e;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=t,a.loop=!0,a.start(0),this._constants.set(e,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,a=()=>{const o=this.now();this._timeouts.add({callback:()=>{e(),a()},id:s,time:o+t})};return a(),s}};class jC extends N3{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ds(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function kr(r,e){ua(e)?e.forEach(t=>kr(r,t)):Object.defineProperty(r,e,{enumerable:!0,writable:!1})}function $g(r,e){ua(e)?e.forEach(t=>$g(r,t)):Object.defineProperty(r,e,{writable:!0})}const cr=()=>{};class Ar extends Dl{constructor(){super(),this.name="ToneAudioBuffer",this.onload=cr;const e=Wt(Ar.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,El(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:cr,onload:cr,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:oo().sampleRate}set(e){return e instanceof Ar?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ds(this,void 0,void 0,function*(){const t=Ar.load(e).then(s=>{this.set(s),this.onload(this)});Ar.downloads.push(t);try{yield t}finally{const s=Ar.downloads.indexOf(t);Ar.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=ua(e)&&e[0].length>0,s=t?e.length:1,a=t?e[0].length:e.length,o=oo(),u=o.createBuffer(s,a,o.sampleRate),c=!t&&s===1?[e]:e;for(let f=0;f<s;f++)u.copyToChannel(c[f],f);return this._buffer=u,this}toMono(e){if(jl(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let a=0;a<s;a++){const o=this.toArray(a);for(let u=0;u<o.length;u++)t[u]+=o[u]}t=t.map(a=>a/s),this.fromArray(t)}return this}toArray(e){if(jl(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Zt(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),a=Math.floor(t*this.sampleRate);Zt(s<a,"The start time must be less than the end time");const o=a-s,u=oo().createBuffer(this.numberOfChannels,o,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)u.copyToChannel(this.getChannelData(c).subarray(s,a),c);return new Ar(u)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Ar().fromArray(e)}static fromUrl(e){return ds(this,void 0,void 0,function*(){return yield new Ar().load(e)})}static load(e){return ds(this,void 0,void 0,function*(){const t=Ar.baseUrl===""||Ar.baseUrl.endsWith("/")?Ar.baseUrl:Ar.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const a=yield s.arrayBuffer();return yield oo().decodeAudioData(a)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return ds(this,void 0,void 0,function*(){for(yield Promise.resolve();Ar.downloads.length;)yield Ar.downloads[0]})}}Ar.baseUrl="";Ar.downloads=[];class Zg extends Xg{constructor(){super({clockSource:"offline",context:z1(arguments[0])?arguments[0]:vC(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:z1(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=z1(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ds(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return ds(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Ar(t)})}close(){return Promise.resolve()}}const C3=new jC;let uu=C3;function oo(){return uu===C3&&yC&&EC(new Xg),uu}function EC(r,e=!1){e&&uu.dispose(),bh(r)?uu=new Xg(r):z1(r)?uu=new Zg(r):uu=r}function _u(){return uu.resume()}if(oa&&!oa.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Cx} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function MC(r){return Math.pow(10,r/20)}function LC(r){return 20*(Math.log(r)/Math.LN10)}function T3(r){return Math.pow(2,r/12)}let Ip=440;function OC(){return Ip}function DC(r){Ip=r}function hu(r){return Math.round(k3(r))}function k3(r){return 69+12*Math.log2(r/Ip)}function j3(r){return Ip*Math.pow(2,(r-69)/12)}class Qg extends Dl{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),a=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/s)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let a=0;return e&&e!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a+=this._beatsToUnits(parseFloat(s)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Qg&&this.fromType(this._val),Ea(this._val))return this._noArg();if(El(this._val)&&Ea(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(fu(this._val)){let e=0;for(const t in this._val)if(Mn(this._val[t])){const s=this._val[t],a=new this.constructor(this.context,t).valueOf()*s;e+=a}return e}if(Mn(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return El(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class lo extends Qg{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new lo(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),a=this.valueOf(),c=Math.round(a/s)*s-a;return a+c*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let o=1;o<9;o++){const u=Math.pow(2,o);t.push(u+"n."),t.push(u+"n"),t.push(u+"t")}t.push("0");let s=t[0],a=new lo(this.context,t[0]).toSeconds();return t.forEach(o=>{const u=new lo(this.context,o).toSeconds();Math.abs(u-e)<Math.abs(a-e)&&(s=o,a=u)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let a=t%1*4;t=Math.floor(t)%this._getTimeSignature();const o=a.toString();return o.length>3&&(a=parseFloat(parseFloat(o).toFixed(3))),[s,t,a].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return hu(this.toFrequency())}_now(){return this.context.now()}}class la extends lo{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return OC()}static set A4(e){DC(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:la.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const a=RC[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?a:la.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let a=1;return e&&e!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a*=this._beatsToUnits(parseFloat(s)/4)),a}}})}transpose(e){return new la(this.context,this.valueOf()*T3(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return hu(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/la.A4);let s=Math.round(12*t)+57;const a=Math.floor(s/12);return a<0&&(s+=-12*a),IC[s%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return j3(e)}static ftom(e){return hu(e)}}const RC={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},IC=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class qf extends lo{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Hi extends Dl{constructor(){super();const e=Wt(Hi.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:oo()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return mC(e),new lo(this.context,e).toSeconds()}toFrequency(e){return new la(this.context,e).toFrequency()}toTicks(e){return new qf(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Ea(e[s])&&delete t[s]}),t}get(){const e=AC(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Mn(s)&&Mn(s.value)&&Mn(s.setValueAtTime)?e[t]=s.value:s instanceof Hi?e[t]=s._getPartialProperties(e[t]):ua(s)||jl(s)||El(s)||pC(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Mn(this[t])&&(this[t]&&Mn(this[t].value)&&Mn(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Hi?this[t].set(e[t]):this[t]=e[t])}),this}}class Kg extends Ma{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return Ml(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let a=s;a>=0;a--){const o=this._timeline[a];if(o.state===e)return o}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let a=s;a<this._timeline.length;a++){const o=this._timeline[a];if(o.state===e)return o}}}class mr extends Hi{constructor(){const e=Wt(mr.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Zt(Mn(e.param)&&(gu(e.param)||e.param instanceof mr),"param must be an AudioParam");!gu(e.param);)e.param=e.param._param;this._swappable=Mn(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Ma(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Mn(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Hi.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Mn(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Mn(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Mn(this.maxValue)&&Mn(this.minValue)&&Ml(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?MC(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?LC(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),a=this._fromType(e);return Zt(isFinite(a)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),a=this._events.get(t);let o=this._initialValue;if(a===null)o=this._initialValue;else if(a.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const u=this._events.getBefore(a.time);let c;u===null?c=this._initialValue:c=u.value,a.type==="setTargetAtTime"&&(o=this._exponentialApproach(a.time,c,a.value,a.constant,t))}else if(s===null)o=a.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=a.value;if(a.type==="setTargetAtTime"){const c=this._events.getBefore(a.time);c===null?u=this._initialValue:u=c.value}s.type==="linearRampToValueAtTime"?o=this._linearInterpolate(a.time,u,s.time,s.value,t):o=this._exponentialInterpolate(a.time,u,s.time,s.value,t)}else o=a.value;return this._toType(o)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),a=this.toSeconds(t);return Zt(isFinite(s)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:a,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,a),this._param.linearRampToValueAtTime(s,a),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=io(s,0)?this._minOutput:s,this._assertRange(s);const a=this.toSeconds(t);return Zt(isFinite(s)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,a),this._param.exponentialRampToValueAtTime(s,a),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const a=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,a),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const a=this._fromType(e);Zt(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const o=this.toSeconds(t);return this._assertRange(a),Zt(isFinite(a)&&isFinite(o),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:o,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",e,o,s),this._param.setTargetAtTime(a,o,s),this}setValueCurveAtTime(e,t,s,a=1){s=this.toSeconds(s),t=this.toSeconds(t);const o=this._fromType(e[0])*a;this.setValueAtTime(this._toType(o),t);const u=s/(e.length-1);for(let c=1;c<e.length;c++){const f=this._fromType(e[c])*a;this.linearRampToValueAtTime(this._toType(f),t+c*u)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Zt(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));Zt(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const a=this._events.get(t),o=this._events.getAfter(t);return a&&io(a.time,t)?o?(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):o&&(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time),o.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):o.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const a=this._events.getAfter(s.time),o=a?a.time:t+2,u=(o-t)/10;for(let c=t;c<o;c+=u)e.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?e.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?e.setTargetAtTime(a.value,a.time,a.constant):e[a.type](a.value,a.time)}),this}setParam(e){Zt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,a,o){return s+(t-s)*Math.exp(-(o-e)/a)}_linearInterpolate(e,t,s,a,o){return t+(a-t)*((o-e)/(s-e))}_exponentialInterpolate(e,t,s,a,o){return t*Math.pow(a/t,(o-e)/(s-e))}}class tn extends Hi{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Mn(this.input)?gu(this.input)||this.input instanceof mr?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Mn(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Mn(e)&&(e instanceof tn||Nc(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Zt(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return Uh(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Op("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return VC(this,e,t,s),this}chain(...e){return ed(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Mn(this.input)&&(this.input instanceof tn?this.input.dispose():Nc(this.input)&&this.input.disconnect()),Mn(this.output)&&(this.output instanceof tn?this.output.dispose():Nc(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ed(...r){const e=r.shift();r.reduce((t,s)=>(t instanceof tn?t.connect(s):Nc(t)&&Uh(t,s),s),e)}function Uh(r,e,t=0,s=0){for(Zt(Mn(r),"Cannot connect from undefined node"),Zt(Mn(e),"Cannot connect to undefined node"),(e instanceof tn||Nc(e))&&Zt(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Zt(r.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof tn||e instanceof mr;)Mn(e.input)&&(e=e.input);for(;r instanceof tn;)Mn(r.output)&&(r=r.output);gu(e)?r.connect(e,t):r.connect(e,t,s)}function VC(r,e,t=0,s=0){if(Mn(e))for(;e instanceof tn;)e=e.input;for(;!Nc(r);)Mn(r.output)&&(r=r.output);gu(e)?r.disconnect(e,t):Nc(e)?r.disconnect(e,t,s):r.disconnect()}class ps extends tn{constructor(){const e=Wt(ps.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new mr({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),kr(this,"gain")}static getDefaults(){return Object.assign(tn.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Dh extends tn{constructor(e){super(e),this.onended=cr,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ps({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(tn.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:cr})}_startGain(e,t=1){Zt(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Zt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==cr&&(this.onended(this),this.onended=cr,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Zt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=cr,this}}class Jg extends Dh{constructor(){const e=Wt(Jg.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Uh(this._source,this._gainNode),this.offset=new mr({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Dh.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class gr extends tn{constructor(){const e=Wt(gr.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Jg({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(tn.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return e2(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,a){return this._param.setValueCurveAtTime(e,t,s,a),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function e2(r,e,t,s){(e instanceof mr||gu(e)||e instanceof gr&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof gr&&(e.overridden=!0)),Uh(r,e,t,s)}class t2 extends mr{constructor(){const e=Wt(t2.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Ma(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(mr.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const a=this._fromType(e),o=this._events.get(t),u=Math.round(Math.max(1/s,1));for(let c=0;c<=u;c++){const f=s*c+t,d=this._exponentialApproach(o.time,o.value,a,s,f);this.linearRampToValueAtTime(this._toType(d),f)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),a=this._events.get(t),o=Math.round(Math.max((t-a.time)*10,1)),u=(t-a.time)/o;for(let c=0;c<=o;c++){const f=u*c+a.time,d=this._exponentialInterpolate(a.time,a.value,t,s,f);this.linearRampToValueAtTime(this._toType(d),f)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ea(e.ticks)){const u=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(u,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let a=this._fromType(this.getValueAtTime(t));const o=this._events.get(t);return o&&o.time===t&&o.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+a)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(t);return this.getTimeOfTick(a+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const a=this._fromType(this.getValueAtTime(t.time)),u=(this._fromType(this.getValueAtTime(s.time))-a)/(s.time-t.time),c=Math.sqrt(Math.pow(a,2)-2*u*(t.ticks-e)),f=(-a+c)/u,d=(-a-c)/u;return(f>0?f:d)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),a=this.toSeconds(e),o=this.getTicksAtTime(s);return this.getTicksAtTime(s+a)-o}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class n2 extends gr{constructor(){const e=Wt(n2.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new t2({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(gr.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class r2 extends Hi{constructor(){const e=Wt(r2.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Kg,this._tickOffset=new Ma,this._ticksAtTime=new Ma,this._secondsAtTime=new Ma,this.frequency=new n2({context:this.context,units:e.units,value:e.frequency}),kr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Hi.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),Mn(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),a=this._ticksAtTime.get(t),o={state:"paused",time:t};this._state.add(o);let u=a||s,c=a?a.ticks:0,f=null;return this._state.forEachBetween(u.time,t+this.sampleTime,d=>{let m=u.time;const y=this._tickOffset.get(d.time);y&&y.time>=u.time&&(c=y.ticks,m=y.time),u.state==="started"&&d.state!=="started"&&(c+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(m),d.time!==o.time&&(f={state:d.state,time:d.time,ticks:c})),u=d}),this._state.remove(o),f&&this._ticksAtTime.add(f),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const a=this._secondsAtTime.get(e);let o=a||t,u=a?a.seconds:0,c=null;return this._state.forEachBetween(o.time,e+this.sampleTime,f=>{let d=o.time;const m=this._tickOffset.get(f.time);m&&m.time>=o.time&&(u=m.seconds,d=m.time),o.state==="started"&&f.state!=="started"&&(u+=f.time-d,f.time!==s.time&&(c={state:f.state,time:f.time,seconds:u})),o=f}),this._state.remove(s),c&&this._secondsAtTime.add(c),u}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),a=this._state.get(t),o=Math.max(s.time,a.time),u=this.frequency.getTicksAtTime(o)+e-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(e,t,s){let a=this._state.get(e);this._state.forEachBetween(e,t,u=>{a&&a.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(a.time,e),u.time-this.sampleTime,s),a=u});let o=null;if(a&&a.state==="started"){const u=Math.max(a.time,e),c=this.frequency.getTicksAtTime(u),f=this.frequency.getTicksAtTime(a.time),d=c-f;let m=Math.ceil(d)-d;m=io(m,1)?0:m;let y=this.frequency.getTimeOfTick(c+m);for(;y<t;){try{s(y,Math.round(this.getTicksAtTime(y)))}catch(_){o=_;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(o)throw o;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}let E3=class M3 extends Hi{constructor(){const e=Wt(M3.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=cr,this._lastUpdate=0,this._state=new Kg("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new r2({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,kr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Hi.getDefaults(),{callback:cr,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){y3(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(a+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const a=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,a);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,a)=>{this.callback(s,a)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};wd.mixin(E3);class Hh extends tn{constructor(){const e=Wt(Hh.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new ps({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,kr(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(tn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class s2 extends tn{constructor(){const e=Wt(s2.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Hh({context:this.context}),this.output=new ps({context:this.context}),this.volume=this.input.volume,ed(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(tn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),ed(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Dp(r=>{r.destination=new s2({context:r})});Rp(r=>{r.destination.dispose()});class FC extends tn{constructor(){super(...arguments),this.name="Listener",this.positionX=new mr({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new mr({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new mr({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new mr({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new mr({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new mr({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new mr({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new mr({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new mr({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(tn.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Dp(r=>{r.listener=new FC({context:r})});Rp(r=>{r.listener.dispose()});class i2 extends Dl{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Wt(i2.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:cr,onload:cr,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Zt(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=cr,a=cr){return El(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Ar(this.baseUrl+t,s,a))):this._buffers.set(e.toString(),new Ar(t,s,a)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class lp extends la{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return hu(super._frequencyToUnits(e))}_ticksToUnits(e){return hu(super._ticksToUnits(e))}_beatsToUnits(e){return hu(super._beatsToUnits(e))}_secondsToUnits(e){return hu(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return j3(this.toMidi())}transpose(e){return new lp(this.context,this.toMidi()+e)}}class wh extends qf{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class BC extends Hi{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ma,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Dp(r=>{r.draw=new BC({context:r})});Rp(r=>{r.draw.dispose()});class zC extends Dl{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Zt(Mn(e.time),"Events must have a time property"),Zt(Mn(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new PC(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,a=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,a=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,a=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,a=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,a=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),a=e.right;a&&(e.right=a.left,a.left=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),a=e.left;a&&(e.left=a.right,a.right=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let a=1;a<t.length;a++)t[a].low>s.low&&(s=t[a]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class PC{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class qC extends Dl{constructor(e){super(),this.name="TimelineValue",this._timeline=new Ma({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Ac extends tn{constructor(){super(Wt(Ac.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return e2(this,e,t,s),this}}class _d extends Ac{constructor(){const e=Wt(_d.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,ua(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):dC(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(gr.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let a=0,o=t;a<o;a++){const u=a/(o-1)*2-1;s[a]=e(u,a)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));Zt(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Vp extends Ac{constructor(){const e=Wt(Vp.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new _d({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Ac.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Cc{constructor(e,t){this.id=Cc._eventId++,this._remainderTime=0;const s=Object.assign(Cc.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:cr,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Cc._eventId=0;class a2 extends Cc{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(a2.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Cc.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return op(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new wh(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){op(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new wh(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Oh(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Fp extends Hi{constructor(){const e=Wt(Fp.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new qC(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ma,this._repeatedEvents=new zC,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new E3({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),kr(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Hi.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(s*Math.PI)*this._swingAmount;e+=new wh(this.context,this._swingTicks*2/3).toSeconds()*a}D5(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),D5(!1)}schedule(e,t){const s=new Cc(this,{callback:e,time:new qf(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,a=1/0){const o=new a2(this,{callback:e,duration:new lo(this.context,a).toTicks(),interval:new lo(this.context,t).toTicks(),time:new qf(this.context,s).toTicks()});return this._addEvent(o,this._repeatedEvents)}scheduleOnce(e,t){const s=new Cc(this,{callback:e,once:!0,time:new qf(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new wh(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return Mn(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){ua(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new lo(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new lo(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new wh(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new wh(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),a=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),o=t+a;this.emit("stop",o),this._clock.setTicksAtTime(e,o),this.emit("start",o,this._clock.getSecondsAtTime(o))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),a=e-s%e;return this._clock.nextTickTime(a,t)}}syncSignal(e,t){const s=this.now();let a=this.bpm,o=1/(60/a.getValueAtTime(s)/this.PPQ),u=[];if(e.units==="time"){const f=.015625/o,d=new ps(f),m=new Vp(-1),y=new ps(f);a.chain(d,m,y),a=y,o=1/o,u=[d,m,y]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/o:t=0);const c=new ps(t);return a.connect(c),c.connect(e._param),u.push(c),this._syncedSignals.push({initial:e.value,nodes:u,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(a=>a.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),$g(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}wd.mixin(Fp);Dp(r=>{r.transport=new Fp({context:r})});Rp(r=>{r.transport.dispose()});class ui extends tn{constructor(e){super(e),this.input=void 0,this._state=new Kg("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=cr,this._syncedStop=cr,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Hh({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,kr(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(tn.getDefaults(),{mute:!1,onstop:cr,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let a=Ea(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")Zt(Oh(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,t,s);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const o=this._state.get(a);o&&(o.offset=this.toSeconds(Nh(t,0)),o.duration=s?this.toSeconds(s):void 0);const u=this.context.transport.schedule(c=>{this._start(c,t,s)},a);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else y3(this.context),this._start(a,t,s);return this}stop(e){let t=Ea(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||Mn(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Oh(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const a=t-this.toSeconds(s.time);let o;s.duration&&(o=this.toSeconds(s.duration)-a),this._start(e,this.toSeconds(s.offset)+a,o)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=cr,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Bp extends Dh{constructor(){const e=Wt(Bp.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Uh(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new mr({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Ar(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Dh.getDefaults(),{url:new Ar,loop:!1,loopEnd:0,loopStart:0,onload:cr,onerror:cr,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,a=1){Zt(this.buffer.loaded,"buffer is either not set or not loaded");const o=this.toSeconds(e);this._startGain(o,a),this.loop?t=Nh(t,this.loopStart):t=Nh(t,0);let u=Math.max(this.toSeconds(t),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,f=this.toSeconds(this.loopStart),d=c-f;rg(u,c)&&(u=(u-f)%d+f),io(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,op(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(o,u)),Mn(s)){let c=this.toSeconds(s);c=Math.max(c,0),this.stop(o+c)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Su(r,e){return ds(this,void 0,void 0,function*(){const t=e/r.context.sampleRate,s=new Zg(1,t,r.context.sampleRate);return new r.constructor(Object.assign(r.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class o2 extends Dh{constructor(){const e=Wt(o2.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Uh(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new mr({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new mr({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),kr(this,["frequency","detune"])}static getDefaults(){return Object.assign(Dh.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class fs extends ui{constructor(){const e=Wt(fs.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new gr({context:this.context,units:"frequency",value:e.frequency}),kr(this,"frequency"),this.detune=new gr({context:this.context,units:"cents",value:e.detune}),kr(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(ui.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new o2({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return fs._periodicWaveCache.find(t=>t.phase===this._phase&&NC(t.partials,this._partials));{const e=fs._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(Mn(s)){const{partials:a,wave:o}=s;this._wave=o,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,o]=this._getRealImaginary(e,this._phase),u=this.context.createPeriodicWave(a,o);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),fs._periodicWaveCache.push({imag:o,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),fs._periodicWaveCache.length>100&&fs._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Ml(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const a=new Float32Array(e);this._partials.forEach((o,u)=>a[u]=o),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(e,t){let a=2048;const o=new Float32Array(a),u=new Float32Array(a);let c=1;if(e==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,a=c,this._partials.length===0)return[o,u]}else{const f=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);f?(c=parseInt(f[2],10)+1,this._partialCount=parseInt(f[2],10),e=f[1],c=Math.max(c,2),a=c):this._partialCount=0,this._partials=[]}for(let f=1;f<a;++f){const d=2/(f*Math.PI);let m;switch(e){case"sine":m=f<=c?1:0,this._partials[f-1]=m;break;case"square":m=f&1?2*d:0,this._partials[f-1]=m;break;case"sawtooth":m=d*(f&1?1:-1),this._partials[f-1]=m;break;case"triangle":f&1?m=2*(d*d)*(f-1>>1&1?-1:1):m=0,this._partials[f-1]=m;break;case"custom":m=this._partials[f-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}m!==0?(o[f]=-m*Math.sin(t*f),u[f]=m*Math.cos(t*f)):(o[f]=0,u[f]=0)}return[o,u]}_inverseFFT(e,t,s){let a=0;const o=e.length;for(let u=0;u<o;u++)a+=e[u]*Math.cos(u*s)+t[u]*Math.sin(u*s);return a}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const a=Math.PI*2,o=32;for(let u=0;u<o;u++)s=Math.max(this._inverseFFT(e,t,u/o*a),s);return CC(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}fs._periodicWaveCache=[];class L3 extends Ac{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new _d({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ll extends gr{constructor(){const e=Wt(Ll.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ps({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(gr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class zp extends ui{constructor(){const e=Wt(zp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new L3({context:this.context}),this._modulationNode=new ps({context:this.context}),this._carrier=new fs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new fs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ll({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),kr(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(fs.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Pp extends ui{constructor(){const e=Wt(Pp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new ps({context:this.context,gain:0}),this._carrier=new fs({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new gr({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new fs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ll({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ll({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),kr(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(fs.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Sd extends ui{constructor(){const e=Wt(Sd.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new ps({context:this.context,gain:0}),this._thresh=new _d({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new gr({context:this.context,units:"audioRange",value:e.width}),this._triangle=new fs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),kr(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ui.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class qp extends ui{constructor(){const e=Wt(qp.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new gr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new gr({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,kr(this,["frequency","detune"])}static getDefaults(){return Object.assign(fs.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((a,o)=>a.detune.value=t+s*o)}}get count(){return this._oscillators.length}set count(e){if(Ml(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new fs({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):cr});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Up extends ui{constructor(){const e=Wt(Up.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ll({context:this.context,value:2}),this._pulse=new Sd({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new fs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),kr(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ui.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const R5={am:zp,fat:qp,fm:Pp,oscillator:fs,pulse:Sd,pwm:Up};class Tc extends ui{constructor(){const e=Wt(Tc.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new gr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new gr({context:this.context,units:"cents",value:e.detune}),kr(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(fs.getDefaults(),Pp.getDefaults(),zp.getDefaults(),qp.getDefaults(),Sd.getDefaults(),Up.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=R5[e],s=this.now();if(this._oscillator){const a=this._oscillator;a.stop(s),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof R5[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&jl(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&jl(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&El(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ds(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class l2 extends gr{constructor(){super(Wt(l2.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new ps({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ed(this._constantSource,this._sum)}static getDefaults(){return Object.assign(gr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class c2 extends Ac{constructor(){const e=Wt(c2.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Ll({context:this.context,value:e.max-e.min}),this._add=this.output=new l2({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Ac.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function O3(r,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){Ml(o,r,e),t.set(this,o)}})}}function Rl(r,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){Ml(this.toSeconds(o),r,e),t.set(this,o)}})}}class Hp extends ui{constructor(){const e=Wt(Hp.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Ar({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ui.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:cr,onerror:cr,playbackRate:1,reverse:!1})}load(e){return ds(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=cr){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=Nh(t,this._loopStart):t=Nh(t,0);const a=this.toSeconds(t),o=s;s=Nh(s,Math.max(this._buffer.duration-a,0));let u=this.toSeconds(s);u=u/this._playbackRate,e=this.toSeconds(e);const c=new Bp({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+u),this._state.setStateAtTime("stopped",e+u,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&Ea(o)?c.start(e,a):c.start(e,a,u-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const a=this.toSeconds(e);this._stop(s),this._start(s,a)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Ml(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Ml(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}go([Rl(0)],Hp.prototype,"fadeIn",void 0);go([Rl(0)],Hp.prototype,"fadeOut",void 0);class ha extends tn{constructor(){const e=Wt(ha.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new gr({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(tn.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(El(e))return e;{let s;for(s in A1)if(A1[s][t]===e)return s;return e}}_setCurve(e,t,s){if(El(s)&&Reflect.has(A1,s)){const a=A1[s];fu(a)?e!=="_decayCurve"&&(this[e]=a[t]):this[e]=a}else if(ua(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let a=this.toSeconds(this.attack);const o=this.toSeconds(this.decay),u=this.getValueAtTime(e);if(u>0){const c=1/a;a=(1-u)/c}if(a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,a,e);else{this._sig.cancelAndHoldAtTime(e);let c=this._attackCurve;for(let f=1;f<c.length;f++)if(c[f-1]<=u&&u<=c[f]){c=this._attackCurve.slice(f),c[0]=u;break}this._sig.setValueCurveAtTime(c,e,a,t)}if(o&&this.sustain<1){const c=t*this.sustain,f=e+a;this.log("decay",f),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,o+f):this._sig.exponentialApproachValueAtTime(c,f,o)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(Zt(ua(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return e2(this,e,t,s),this}asArray(){return ds(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,s=new Zg(1,t,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),o=a+this.toSeconds(this.release),u=o*.1,c=o+u,f=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/c,decay:t*this.toSeconds(this.decay)/c,release:t*this.toSeconds(this.release)/c,context:s}));return f._sig.toDestination(),f.triggerAttackRelease(t*(a+u)/c,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}go([Rl(0)],ha.prototype,"attack",void 0);go([Rl(0)],ha.prototype,"decay",void 0);go([O3(0,1)],ha.prototype,"sustain",void 0);go([Rl(0)],ha.prototype,"release",void 0);const A1=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const a=[],o=6.4;for(e=0;e<127;e++){t=e/127;const _=Math.sin(t*(Math.PI*2)*o-Math.PI/2)+1;a[e]=_/10+t*.83}a[127]=1;const u=[],c=5;for(e=0;e<128;e++)u[e]=Math.ceil(e/127*c)/c;const f=[];for(e=0;e<128;e++)t=e/127,f[e]=.5*(1-Math.cos(Math.PI*t));const d=[];for(e=0;e<128;e++){t=e/127;const _=Math.pow(t,3)*4+.2,b=Math.cos(_*Math.PI*2*t);d[e]=Math.abs(b*(1-t))}function m(_){const b=new Array(_.length);for(let N=0;N<_.length;N++)b[N]=1-_[N];return b}function y(_){return _.slice(0).reverse()}return{bounce:{In:m(d),Out:d},cosine:{In:s,Out:y(s)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:m(a)},sine:{In:f,Out:m(f)},step:{In:u,Out:m(u)}}})();class kc extends tn{constructor(){const e=Wt(kc.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new Hh({context:this.context,volume:e.volume}),this.volume=this._volume.volume,kr(this,"volume")}static getDefaults(){return Object.assign(tn.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...a)=>{const o=a[t],u=this.context.transport.schedule(c=>{a[t]=c,s.apply(this,a)},o);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s),u=this.toSeconds(t);return this.triggerAttack(e,o,a),this.triggerRelease(o+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class uo extends kc{constructor(){const e=Wt(uo.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(kc.getDefaults(),{detune:0,onsilence:cr,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const a=this.toSeconds(t);return this._triggerEnvelopeAttack(a,s),this.setNote(e,a),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),a=e instanceof la?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const o=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,o,s)}else this.frequency.setValueAtTime(a,s);return this}}go([Rl(0)],uo.prototype,"portamento",void 0);class Gp extends ha{constructor(){super(Wt(Gp.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ps({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class ja extends uo{constructor(){const e=Wt(ja.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Tc(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Gp(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),kr(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(uo.getDefaults(),{envelope:Object.assign(ao(ha.getDefaults(),Object.keys(tn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ao(Tc.getDefaults(),[...Object.keys(ui.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class td extends uo{constructor(){const e=Wt(td.getDefaults(),arguments);super(e),this.name="ModulationSynth",this._carrier=new ja({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new ja({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new gr({context:this.context,units:"frequency"}),this.detune=new gr({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new Ll({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new ps({context:this.context,gain:0}),kr(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(uo.getDefaults(),{harmonicity:3,oscillator:Object.assign(ao(Tc.getDefaults(),[...Object.keys(ui.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(ao(ha.getDefaults(),Object.keys(tn.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(ao(Tc.getDefaults(),[...Object.keys(ui.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(ao(ha.getDefaults(),Object.keys(tn.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class cp extends td{constructor(){super(Wt(cp.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new L3({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class up extends tn{constructor(){const e=Wt(up.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new mr({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new mr({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new mr({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new mr({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(tn.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Zt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let u=0;u<e;u++){const f=Math.pow(u/e,2)*19980+20;t[u]=f}const s=new Float32Array(e),a=new Float32Array(e),o=this.context.createBiquadFilter();return o.type=this.type,o.Q.value=this.Q.value,o.frequency.value=this.frequency.value,o.gain.value=this.gain.value,o.getFrequencyResponse(t,s,a),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class hp extends tn{constructor(){const e=Wt(hp.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new ps({context:this.context}),this.output=new ps({context:this.context}),this._filters=[],this._filters=[],this.Q=new gr({context:this.context,units:"positive",value:e.Q}),this.frequency=new gr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new gr({context:this.context,units:"cents",value:e.detune}),this.gain=new gr({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,kr(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(tn.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Zt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=jl(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let a=s.indexOf(t);Zt(a!==-1,`rolloff can only be ${s.join(", ")}`),a+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(o=>o.disconnect()),this._filters=new Array(a);for(let o=0;o<a;o++){const u=new up({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[o]=u}this._internalChannels=this._filters,ed(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new up({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((o,u)=>s[u]*=o)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),$g(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class fp extends ha{constructor(){const e=Wt(fp.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Vp({context:this.context,value:e.exponent}),this._scale=this.output=new c2({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(ha.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);Ml(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class dp extends uo{constructor(){const e=Wt(dp.getDefaults(),arguments);super(e),this.name="MonoSynth",this.oscillator=new Tc(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new hp(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new fp(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new Gp(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),kr(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(uo.getDefaults(),{envelope:Object.assign(ao(ha.getDefaults(),Object.keys(tn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(ao(hp.getDefaults(),Object.keys(tn.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(ao(fp.getDefaults(),Object.keys(tn.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(ao(Tc.getDefaults(),Object.keys(ui.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Uf extends td{constructor(){const e=Wt(Uf.getDefaults(),arguments);super(e),this.name="FMSynth",this.modulationIndex=new Ll({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(td.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class Wp extends ja{constructor(){const e=Wt(Wp.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,kr(this,["oscillator","envelope"])}static getDefaults(){return du(uo.getDefaults(),ja.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),a=this.toFrequency(e instanceof la?e.toFrequency():e),o=a*this.octaves;return this.oscillator.frequency.setValueAtTime(o,s),this.oscillator.frequency.exponentialRampToValueAtTime(a,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}go([O3(0)],Wp.prototype,"octaves",void 0);go([Rl(0)],Wp.prototype,"pitchDecay",void 0);const D3=new Set;function u2(r){D3.add(r)}function R3(r,e){const t=`registerProcessor("${r}", ${e})`;D3.add(t)}const UC=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;u2(UC);const HC=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;u2(HC);const GC=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;u2(GC);const WC="feedback-comb-filter",YC=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;R3(WC,YC);class Pi extends kc{constructor(){const e=Wt(Pi.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),Zt(!jl(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(kc.getDefaults(),{maxPolyphony:32,options:{},voice:ja})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Zt(e instanceof uo,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Op("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(a=>{const o=new lp(this.context,a).toMidi(),u=this._getNextAvailableVoice();u&&(u.triggerAttack(a,t,s),this._activeVoices.push({midi:o,voice:u,released:!1}),this.log("triggerAttack",a,t))})}_triggerRelease(e,t){e.forEach(s=>{const a=new lp(this.context,s).toMidi(),o=this._activeVoices.find(({midi:u,released:c})=>u===a&&!c);o&&(o.voice.triggerRelease(t),o.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,a){Zt(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,a):this._triggerRelease(t,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,s,a)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const a=this.toSeconds(t);return this._scheduleEvent("attack",e,a,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s);if(this.triggerAttack(e,o,a),ua(t)){Zt(ua(e),"If the duration is an array, the notes must also be an array"),e=e;for(let u=0;u<e.length;u++){const c=t[Math.min(u,t.length-1)],f=this.toSeconds(c);Zt(f>0,"The duration must be greater than 0"),this.triggerRelease(e[u],o+f)}}else{const u=this.toSeconds(t);Zt(u>0,"The duration must be greater than 0"),this.triggerRelease(e,o+u)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=ao(e,["onsilence","context"]);return this.options=du(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Nd extends kc{constructor(){const e=Wt(Nd.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(s=>{const a=parseInt(s,10);if(Zt(N1(s)||jl(a)&&isFinite(a),`url key is neither a note or midi pitch: ${s}`),N1(s)){const o=new la(this.context,s).toMidi();t[o]=e.urls[s]}else jl(a)&&isFinite(a)&&(t[a]=e.urls[a])}),this._buffers=new i2({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(kc.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:cr,onerror:cr,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(a=>{const o=k3(new la(this.context,a).toFrequency()),u=Math.round(o),c=o-u,f=this._findClosest(u),d=u-f,m=this._buffers.get(d),y=T3(f+c),_=new Bp({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);_.start(t,0,m.duration/y,s),ua(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(_),_.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const b=this._activeSources.get(u),N=b.indexOf(_);N!==-1&&b.splice(N,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const a=new la(this.context,s).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const o=this._activeSources.get(a);t=this.toSeconds(t),o.forEach(u=>{u.stop(t)}),this._activeSources.set(a,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,a=1){const o=this.toSeconds(s);return this.triggerAttack(e,o,a),ua(t)?(Zt(ua(e),"notes must be an array when duration is array"),e.forEach((u,c)=>{const f=t[Math.min(c,t.length-1)];this.triggerRelease(u,o+this.toSeconds(f))})):this.triggerRelease(e,o+this.toSeconds(t)),this}add(e,t,s){if(Zt(N1(e)||isFinite(e),`note must be a pitch or midi: ${e}`),N1(e)){const a=new la(this.context,e).toMidi();this._buffers.add(a,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}go([Rl(0)],Nd.prototype,"attack",void 0);go([Rl(0)],Nd.prototype,"release",void 0);class h2 extends tn{constructor(){const e=Wt(h2.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new mr({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",kr(this,"pan")}static getDefaults(){return Object.assign(tn.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const XC="bit-crusher",$C=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;R3(XC,$C);class hs extends tn{constructor(){const e=Wt(hs.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new ps({context:this.context}),hs._allSolos.has(this.context)||hs._allSolos.set(this.context,new Set),hs._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(tn.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),hs._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){hs._soloed.has(this.context)||hs._soloed.set(this.context,new Set),hs._soloed.get(this.context).add(this)}_removeSolo(){hs._soloed.has(this.context)&&hs._soloed.get(this.context).delete(this)}_isSoloed(){return hs._soloed.has(this.context)&&hs._soloed.get(this.context).has(this)}_noSolos(){return!hs._soloed.has(this.context)||hs._soloed.has(this.context)&&hs._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),hs._allSolos.get(this.context).delete(this),this._removeSolo(),this}}hs._allSolos=new Map;hs._soloed=new Map;class f2 extends tn{constructor(){const e=Wt(f2.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new h2({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Hh({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,kr(this,["pan","volume"])}static getDefaults(){return Object.assign(tn.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class _h extends tn{constructor(){const e=Wt(_h.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new hs({solo:e.solo,context:this.context}),this._panVol=this.output=new f2({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),kr(this,["pan","volume"])}static getDefaults(){return Object.assign(tn.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return _h.buses.has(e)||_h.buses.set(e,new ps({context:this.context})),_h.buses.get(e)}send(e,t=0){const s=this._getBus(e),a=new ps({context:this.context,units:"decibels",gain:t});return this.connect(a),a.connect(s),a}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}_h.buses=new Map;const _i=oo().transport,I3=oo().destination;oo().destination;oo().listener;const ZC=oo().draw,js=oo();function QC(){return Ar.loaded()}const C1=({cx:r,cy:e,innerRadius:t,outerRadius:s,startAngle:a,endAngle:o,color:u,label:c,chord:f,isSelected:d,isDiatonic:m,isSecondary:y=!1,onClick:_,onDoubleClick:b,ringType:N="major",wheelRotation:A=0,romanNumeral:k,voicingSuggestion:T,segmentId:R="seg",onHover:D})=>{const F=aS(r,e,t,s,a,o),B=(a+o)/2,W=Xn.useRef(0),Y=Xn.useRef(null),[O,z]=Xn.useState(!1),Q=Xn.useRef(null),M=Xn.useRef(!1),V=Xn.useRef(!1),H=-A,X=s-t,he=t+X*.5,I=t+X*.18,se=_c(r,e,he,B),ie=_c(r,e,I,B),de=s-6,pe=iS(r,e,de,a+1,o-1),G=`voicing-arc-${R}`,j=`clip-${R}`,ee=(()=>{let Ue=.35,ot=.5;m?(Ue=1,ot=1):y&&(Ue=.7,ot=.65);const it=u.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(it){const Be=parseInt(it[1]),at=Math.round(parseInt(it[2])*ot),nt=parseInt(it[3]);let ut=nt;return N==="minor"?ut=Math.max(nt-8,30):N==="diminished"&&(ut=Math.max(nt-15,25)),{fill:`hsl(${Be}, ${at}%, ${ut}%)`,opacity:Ue}}return{fill:u,opacity:Ue}})(),J=()=>N==="diminished"?"10px":N==="minor"?"12px":"14px",oe=m||y,fe=oe?"#000000":"rgba(255,255,255,0.7)",me=m?"bold":y?"600":"normal",Se=N==="diminished"||N==="minor"?"6px":"8px",ye=N==="major"?oe?6:5:N==="minor"?oe?4:3.25:oe?3.5:3,Fe=oe?1:.95,Ye=Ue=>{if(z(!0),Ue.touches.length>=2){V.current=!0,Q.current=null;return}Ue.touches.length===1&&!V.current&&(Q.current={x:Ue.touches[0].clientX,y:Ue.touches[0].clientY},M.current=!1)},Je=Ue=>{if(Ue.touches.length>=2){V.current=!0,M.current=!0;return}if(Q.current&&Ue.touches.length===1&&!V.current){const ot=Ue.touches[0],it=ot.clientX-Q.current.x,Be=ot.clientY-Q.current.y;Math.sqrt(it*it+Be*Be)>15&&(M.current=!0)}},ct=async Ue=>{Ue.preventDefault(),Ue.stopPropagation(),z(!1);const ot=V.current,it=M.current;if(Q.current=null,M.current=!1,Ue.touches.length===0&&(V.current=!1),ot||it)return;js.state!=="running"&&await _u();const Be=Date.now(),at=Be-W.current;Y.current&&(clearTimeout(Y.current),Y.current=null),at<300&&at>0?(W.current=0,b&&b(f)):(W.current=Be,Y.current=setTimeout(()=>{_(f),Y.current=null},300))},$=()=>{z(!1),Q.current=null,M.current=!1,V.current=!1,Y.current&&(clearTimeout(Y.current),Y.current=null)},Re=Ue=>{Ue.stopPropagation(),Ke.current&&(clearTimeout(Ke.current),Ke.current=null),D&&D(null,0,0),_(f)},pt=Ue=>{Ue.stopPropagation(),Ke.current&&(clearTimeout(Ke.current),Ke.current=null),D&&D(null,0,0),b&&b(f)},Ke=Xn.useRef(null),Le=Ue=>{if(!D)return;const ot=Ue.clientX,it=Ue.clientY;Ke.current=setTimeout(()=>{D("Select a chord slot in the timeline, then double-click a chord or chord voicing to add to the timeline.",ot,it)},3e3)},tt=()=>{Ke.current&&(clearTimeout(Ke.current),Ke.current=null),D&&D(null,0,0)};return x.jsxs("g",{className:Et("cursor-pointer transition-all duration-200",!oe&&"hover:opacity-70",O&&"opacity-80"),onClick:Re,onDoubleClick:pt,onTouchStart:Ye,onTouchMove:Je,onTouchEnd:ct,onTouchCancel:$,onMouseEnter:Le,onMouseLeave:tt,style:{pointerEvents:"all",WebkitTapHighlightColor:"transparent"},children:[(m||y)&&T&&x.jsx("defs",{children:x.jsx("path",{id:G,d:pe,fill:"none"})}),x.jsx("defs",{children:x.jsx("clipPath",{id:j,children:x.jsx("path",{d:F})})}),x.jsx("path",{d:F,fill:ee.fill,opacity:ee.opacity,stroke:k==="I"?"rgba(0,0,0,0.6)":"rgba(0,0,0,0.3)",strokeWidth:k==="I"?2.5:1,className:Et("transition-all duration-200 hover:brightness-110",d&&"brightness-125 stroke-white stroke-2",oe&&"hover:brightness-105"),style:{pointerEvents:"all"}}),d&&x.jsx("path",{d:F,fill:"none",stroke:"white",strokeWidth:ye,opacity:Fe,filter:"url(#segment-glow)",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none",clipPath:`url(#${j})`}),(m||y)&&T&&N==="major"&&x.jsx("text",{fill:"rgba(0,0,0,0.6)",fontSize:"6px",className:"pointer-events-none select-none",children:x.jsx("textPath",{href:`#${G}`,startOffset:"50%",textAnchor:"middle",children:T})}),m&&T&&N==="minor"&&x.jsx("text",{fill:"rgba(0,0,0,0.55)",fontSize:"5px",className:"pointer-events-none select-none",children:x.jsx("textPath",{href:`#${G}`,startOffset:"50%",textAnchor:"middle",children:T})}),m&&T&&N==="diminished"&&x.jsx("text",{fill:"rgba(0,0,0,0.5)",fontSize:"5px",className:"pointer-events-none select-none",children:x.jsx("textPath",{href:`#${G}`,startOffset:"50%",textAnchor:"middle",children:T})}),x.jsx("text",{x:se.x,y:se.y,textAnchor:"middle",dominantBaseline:"middle",fill:fe,fontWeight:me,fontSize:J(),className:"pointer-events-none select-none",transform:`rotate(${H}, ${se.x}, ${se.y})`,children:Ks(c)}),(m||y)&&k&&x.jsx("text",{x:ie.x,y:ie.y,textAnchor:"middle",dominantBaseline:"middle",fill:"rgba(0,0,0,0.6)",fontSize:Se,fontStyle:"italic",className:"pointer-events-none select-none",transform:`rotate(${H}, ${ie.x}, ${ie.y})`,children:k})]})};const KC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),I5=r=>{const e=JC(r);return e.charAt(0).toUpperCase()+e.slice(1)},V3=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),eT=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var tT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const nT=re.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:u,...c},f)=>re.createElement("svg",{ref:f,...tT,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:V3("lucide",a),...!o&&!eT(c)&&{"aria-hidden":"true"},...c},[...u.map(([d,m])=>re.createElement(d,m)),...Array.isArray(o)?o:[o]]));const bn=(r,e)=>{const t=re.forwardRef(({className:s,...a},o)=>re.createElement(nT,{ref:o,iconNode:e,className:V3(`lucide-${KC(I5(r))}`,`lucide-${r}`,s),...a}));return t.displayName=I5(r),t};const rT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Hf=bn("chevron-down",rT);const sT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rh=bn("chevron-right",sT);const iT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ih=bn("chevron-left",iT);const aT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],oT=bn("chevron-up",aT);const lT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nd=bn("circle-question-mark",lT);const cT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uT=bn("circle",cT);const hT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fT=bn("clock",hT);const dT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],pT=bn("copy",dT);const mT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],d2=bn("download",mT);const gT=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],bT=bn("eraser",gT);const vT=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],yT=bn("file-plus",vT);const xT=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],wT=bn("folder-open",xT);const _T=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],F3=bn("grip-vertical",_T);const ST=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],B3=bn("hand",ST);const NT=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],AT=bn("hash",NT);const CT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],TT=bn("info",CT);const kT=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],jT=bn("layers",kT);const ET=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],z3=bn("list-music",ET);const MT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],P3=bn("loader-circle",MT);const LT=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],pp=bn("map",LT);const OT=[["path",{d:"M5 12h14",key:"1ays0h"}]],sg=bn("minus",OT);const DT=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],q3=bn("mouse-pointer-2",DT);const RT=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],rd=bn("music",RT);const IT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],U3=bn("panel-right-close",IT);const VT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],FT=bn("panel-right",VT);const BT=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],H3=bn("pause",BT);const zT=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Gh=bn("play",zT);const PT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bu=bn("plus",PT);const qT=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],G3=bn("repeat",qT);const UT=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],mp=bn("rotate-ccw",UT);const HT=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Vh=bn("rotate-cw",HT);const GT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],V5=bn("save",GT);const WT=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],F5=bn("settings-2",WT);const YT=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],W3=bn("skip-back",YT);const XT=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Y3=bn("skip-forward",XT);const $T=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ZT=bn("sparkles",$T);const QT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],X3=bn("square",QT);const KT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ig=bn("trash-2",KT);const JT=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ag=bn("volume-2",JT);const ek=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],tk=bn("volume-x",ek);const nk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sd=bn("x",nk);let jc={piano:null,epiano:null,guitar:null,organ:null,synth:null,strings:null,pad:null,brass:null,marimba:null,bell:null,lead:null,bass:null,choir:null},p2="piano",If=null,P1=[],gp={},B5=!1,qi=null;const m2=()=>{if(qi)return;if("audioSession"in navigator)try{navigator.audioSession.type="playback",console.log("[iOS Audio] Set audioSession.type to playback")}catch(t){console.warn("[iOS Audio] Could not set audioSession type:",t)}const r=["/+NIxAAAAAANIAAAAAExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/","40jEAA8AAAANIAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU"].join("");qi=document.createElement("audio"),qi.src="data:audio/mpeg;base64,"+r,qi.loop=!0,qi.volume=.001,qi.muted=!1,qi.setAttribute("playsinline","true"),qi.setAttribute("x-webkit-airplay","deny"),qi.preload="auto",document.body.appendChild(qi);const e=qi.play();e!==void 0&&e.then(()=>{console.log("[iOS Audio] Silent media started - ringer switch workaround active")}).catch(t=>{console.log("[iOS Audio] Silent audio deferred until user gesture:",t.message)})},Yp=async()=>{if(!B5){if(console.log("[iOS Audio] Starting unlock sequence..."),m2(),qi&&qi.paused)try{await qi.play(),console.log("[iOS Audio] Silent audio now playing")}catch(r){console.warn("[iOS Audio] Silent audio play failed:",r)}try{await _u(),console.log("[iOS Audio] Tone.start() completed, state:",js.state)}catch(r){console.warn("[iOS Audio] Tone.start() failed:",r)}if(js.state!=="running")try{await js.resume(),console.log("[iOS Audio] Context resumed, state:",js.state)}catch(r){console.warn("[iOS Audio] Context resume failed:",r)}B5=!0,console.log("[iOS Audio] Unlock sequence complete")}},g2=r=>{r in jc&&(p2=r)},$3=r=>{const e=r<=0?-1/0:20*Math.log10(r);try{I3.volume.rampTo(e,.1)}catch(t){console.error("Error setting volume:",t)}},Z3=r=>{I3.mute=r},Oc=async()=>{if(If)return If;If=(async()=>{const r="https://tonejs.github.io/audio/salamander/",e=(t,s)=>{if(!jc[t])try{const a=s();a&&(jc[t]=a)}catch(a){console.error(`Failed to init instrument "${t}"`,a)}};e("piano",()=>new Nd({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:r}).toDestination()),e("guitar",()=>new Pi(ja,{oscillator:{type:"triangle"},envelope:{attack:.002,decay:.25,sustain:.3,release:1.2},filter:{type:"lowpass",frequency:2400,rolloff:-12,Q:1.2},filterEnvelope:{attack:.002,decay:.25,sustain:.2,release:.8,baseFrequency:800,octaves:2.5}}).toDestination()),e("organ",()=>new Pi(cp,{harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("synth",()=>new Pi(Uf,{harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("epiano",()=>new Pi(cp,{harmonicity:2,oscillator:{type:"triangle"},envelope:{attack:.01,decay:.2,sustain:.7,release:.8},modulation:{type:"sine"},modulationEnvelope:{attack:.2,decay:.1,sustain:.6,release:.6}}).toDestination()),e("strings",()=>new Pi(ja,{oscillator:{type:"sawtooth"},envelope:{attack:.2,decay:.2,sustain:.8,release:1.2}}).toDestination()),e("pad",()=>new Pi(Uf,{harmonicity:1.5,modulationIndex:8,oscillator:{type:"sine"},envelope:{attack:.5,decay:.3,sustain:.9,release:1.5},modulation:{type:"triangle"},modulationEnvelope:{attack:.8,decay:.3,sustain:.8,release:1.2}}).toDestination()),e("brass",()=>new Pi(dp,{oscillator:{type:"square"},filter:{Q:2,type:"lowpass",rolloff:-12},envelope:{attack:.02,decay:.25,sustain:.6,release:.7},filterEnvelope:{attack:.01,decay:.2,sustain:.8,release:.4,baseFrequency:200,octaves:2.5}}).toDestination()),e("marimba",()=>new Pi(ja,{oscillator:{type:"triangle"},envelope:{attack:.001,decay:.35,sustain:0,release:.6}}).toDestination()),e("bell",()=>new Pi(Uf,{harmonicity:8,modulationIndex:2,oscillator:{type:"sine"},envelope:{attack:.01,decay:1.2,sustain:0,release:1.2},modulation:{type:"square"},modulationEnvelope:{attack:.01,decay:.5,sustain:0,release:1.2}}).toDestination()),e("lead",()=>new Pi(ja,{oscillator:{type:"sawtooth"},envelope:{attack:.005,decay:.15,sustain:.6,release:.35}}).toDestination()),e("bass",()=>new Pi(dp,{oscillator:{type:"square"},filter:{type:"lowpass",rolloff:-24,Q:2},envelope:{attack:.01,decay:.2,sustain:.6,release:.4},filterEnvelope:{attack:.001,decay:.15,sustain:.4,release:.2,baseFrequency:80,octaves:3}}).toDestination()),e("choir",()=>new Pi(ja,{oscillator:{type:"sine"},envelope:{attack:.8,decay:.3,sustain:.9,release:1.8}}).toDestination()),await QC()})();try{await If}catch(r){If=null,console.error("Failed to initialize audio",r)}},z5=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],xi=async(r,e="1n",t)=>{if(js.state!=="running"&&await _u(),js.state==="suspended"&&await js.resume(),await Oc(),!r||r.length===0)return;const s=r[0],a=z5.indexOf(s.replace(/\d/,"")),o=r.map((c,f)=>{if(c.match(/\d/))return c;const d=c,m=z5.indexOf(d);if(f===0)return`${d}3`;let y=3;return(m<a||m-a>6)&&(y=4),f>=4&&(y=4),f>=5&&(y=5),`${d}${y}`});let u=jc[p2];if(u||(u=jc.piano),!u){console.error("No instrument available to play!");return}try{u.triggerAttackRelease(o,e,t)}catch(c){console.error("Failed to play chord",c)}},Q3=async(r,e=4,t="8n")=>{js.state!=="running"&&await _u(),js.state==="suspended"&&await js.resume(),await Oc();let s=jc[p2];if(s||(s=jc.piano),!s){console.error("No instrument available to play!");return}const a=`${r}${e}`;try{s.triggerAttackRelease(a,t)}catch(o){console.error(`Failed to play note ${a}`,o)}},K3=()=>{Object.values(jc).forEach(t=>t?.releaseAll()),_i.stop();const{setPlayingSlot:r,setIsPlaying:e}=En.getState();r(null,null),e(!1)},id=r=>{const e=Math.floor(r/4),t=Math.floor(r%4),s=Math.floor(r%1*4);return`${e}:${t}:${s}`},b2=r=>{_i.cancel(0),P1=[],gp={},_i.timeSignature=4;let e=0;r.sections.forEach(s=>{gp[s.id]=e,s.measures.forEach(a=>{a.beats.forEach(o=>{const u=id(e),c=o.duration,f=c*4,d=`${Math.floor(f/16)}:${Math.floor(f%16/4)}:${f%4}`,m=_i.schedule(y=>{ZC.schedule(()=>{En.getState().setPlayingSlot(s.id,o.id)},y),o.chord&&xi(o.chord.notes,d,y)},u);P1.push(m),e+=c})})});const t=_i.schedule(()=>{En.getState().isLooping||K3()},id(e));P1.push(t)},rk=async()=>{await Oc()},v2=async()=>{await Oc(),js.state!=="running"&&await js.resume();const{tempo:r,currentSong:e}=En.getState();_i.bpm.value=r,P1.length===0&&b2(e),_i.start()},y2=()=>{_i.pause()},J3=r=>{_i.bpm.value=r},x2=r=>{const{currentSong:e,playingSectionId:t}=En.getState(),s=e.sections.map(m=>m.id);let a=t?s.indexOf(t):-1;a===-1&&(a=0);let o=r==="next"?a+1:a-1;o>=s.length&&(o=0),o<0&&(o=0);const u=s[o],c=gp[u]||0,f=id(c);_i.position=f;const d=e.sections[o].measures[0]?.beats[0];d&&En.getState().setPlayingSlot(u,d.id)},ew=()=>{const{isLooping:r,playingSectionId:e,selectedSectionId:t,currentSong:s}=En.getState();if(r){const a=e||t,o=s.sections.find(u=>u.id===a);if(o){const u=gp[o.id]??0;let c=0;o.measures.forEach(d=>d.beats.forEach(m=>c+=m.duration));const f=u+c;_i.loopStart=id(u),_i.loopEnd=id(f),_i.loop=!0;return}}_i.loop=!1},sk=Object.freeze(Object.defineProperty({__proto__:null,initAudio:Oc,pauseSong:y2,playChord:xi,playNote:Q3,playSong:v2,preloadAudio:rk,scheduleSong:b2,setInstrument:g2,setMute:Z3,setTempo:J3,setVolume:$3,skipToSection:x2,startSilentAudioForIOS:m2,stopAudio:K3,toggleLoopMode:ew,unlockAudioForIOS:Yp},Symbol.toStringTag,{value:"Module"})),bp=768;function w2(){const[r,e]=re.useState(()=>typeof window<"u"?window.innerWidth<bp:!1);return re.useEffect(()=>{const t=()=>e(window.innerWidth<bp);return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]),r}function Wh(){const[r,e]=re.useState(()=>typeof window<"u"?window.innerWidth<bp||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[t,s]=re.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1);return re.useEffect(()=>{const a=()=>{const o=window.innerWidth,u=window.innerHeight,c=o<bp||u<500&&u<o,f=u<o&&u<500;e(c),s(f)};return window.addEventListener("resize",a),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}},[]),{isMobile:r,isLandscape:t}}const ik=7e3,ak=({isOpen:r,onClose:e,onSelect:t,onAddToTimeline:s,onOpenDetails:a,chordRoot:o,voicings:u,selectedQuality:c,portraitWithPanel:f=!1})=>{const d=re.useRef(null),{isMobile:m,isLandscape:y}=Wh(),_=m&&y,[b,N]=re.useState(c),A=re.useRef(null),k=re.useRef(null);re.useEffect(()=>{r&&N(c)},[r,c]);const T=re.useCallback(()=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{e()},ik)},[e]);if(re.useEffect(()=>(r&&T(),()=>{k.current&&clearTimeout(k.current)}),[r,T]),re.useEffect(()=>{if(!r)return;const D=B=>{d.current&&!d.current.contains(B.target)&&e()},F=setTimeout(()=>{document.addEventListener("mousedown",D),document.addEventListener("touchstart",D)},100);return()=>{clearTimeout(F),document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[r,e]),re.useEffect(()=>{if(!r)return;const D=F=>{F.key==="Escape"&&e()};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[r,e]),!r)return null;const R=D=>{const F=Date.now();if(T(),A.current&&A.current.quality===D&&F-A.current.time<400){s&&s(D),e(),A.current=null;return}const B=ka(o,D);xi(B),N(D),t(D),A.current={quality:D,time:F}};return Po.createPortal(x.jsxs("div",{ref:d,className:Et("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row flex-nowrap items-center justify-center","animate-in fade-in zoom-in-95 duration-150",u.length>5||_?"p-1 gap-1":"p-2 gap-2"),style:{bottom:_?"56px":f?"6%":"auto",top:_||f?"auto":m?"65%":"55%",..._?{left:"24%",transform:"translateX(-50%)",maxWidth:"min(55vw, fit-content)"}:{left:"50%",transform:"translateX(-50%)",maxWidth:"calc(100vw - 32px)"},zIndex:99999},children:[u.map(D=>{const F=D.quality===b,B=u.length>4||_,W=u.length>=6;return x.jsx("button",{onClick:Y=>{Y.stopPropagation(),R(D.quality)},onTouchEnd:Y=>{Y.stopPropagation()},className:Et("flex items-center justify-center rounded-lg transition-all shrink-0",W?"min-w-[32px] h-9 px-0.5":B?"min-w-[40px] h-10 px-1.5":"min-w-[48px] h-12 px-2",F?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`Tap to preview, double-tap to add ${o}${D.label}`,children:x.jsx("span",{className:Et("font-semibold",W?"text-[10px]":B?"text-xs":F?"text-sm":"text-xs"),children:D.label||"maj"})},D.quality)}),u.length>0&&x.jsx("div",{className:"w-px bg-border-subtle self-stretch my-1 shrink-0"}),s&&x.jsx("button",{onClick:D=>{D.stopPropagation();const F=b||c||u[0]?.quality;F&&(s(F),e())},onTouchEnd:D=>{D.preventDefault(),D.stopPropagation();const F=b||c||u[0]?.quality;F&&(s(F),e())},className:Et("flex items-center justify-center rounded-lg transition-all shrink-0","text-accent-primary hover:text-white hover:bg-accent-primary/20",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Add to timeline",children:x.jsx(bu,{size:u.length>=6?14:u.length>4||_?16:18})}),a&&x.jsx("button",{onClick:D=>{D.stopPropagation(),a(),e()},onTouchEnd:D=>{D.preventDefault(),D.stopPropagation(),a(),e()},className:Et("flex items-center justify-center rounded-lg transition-all shrink-0","text-text-tertiary hover:text-text-secondary hover:bg-bg-tertiary",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Open chord details",children:x.jsx(TT,{size:u.length>=6?12:u.length>4||_?14:16})})]}),document.body)};function ok(r,e){if(!r)return[];const t=r.split(/,\s*|\s+or\s+/).map(a=>a.trim()).filter(Boolean),s=[];e==="major"?s.push({quality:"major",label:""}):e==="minor"?s.push({quality:"minor",label:"m"}):e==="diminished"&&s.push({quality:"diminished",label:""});for(const a of t){let o=a,u=a;a==="6"?(o="major6",u="6"):a==="m6"?(o="minor6",u="m6"):a==="m75 (7)"?(o="halfDiminished7",u="7"):a==="m7"?(o="minor7",u="m7"):a==="m9"?(o="minor9",u="m9"):a==="m11"?(o="minor11",u="m11"):a==="sus4"?(o="sus4",u="sus4"):a==="7"?(o="dominant7",u="7"):a==="9"?(o="dominant9",u="9"):a==="11"?(o="dominant11",u="11"):a==="13"?(o="dominant13",u="13"):a==="maj7"?(o="major7",u="maj7"):a==="maj9"?(o="major9",u="maj9"):a==="maj13"&&(o="major13",u="maj13"),s.push({quality:o,label:u})}return s}const lk=({zoomScale:r,zoomOriginY:e,onZoomChange:t,panOffset:s,onPanChange:a,rotationOffset:o=0,disableModeToggle:u=!1})=>{const{selectedKey:c,setKey:f,wheelRotation:d,wheelMode:m,rotateWheel:y,toggleWheelMode:_,addChordToSlot:b,selectedSectionId:N,selectedSlotId:A,setSelectedChord:k,selectedChord:T,selectNextSlotAfter:R,setSelectedSlot:D,timelineVisible:F,openTimeline:B,chordPanelVisible:W,toggleChordPanel:Y,chordPanelGuitarExpanded:O,chordPanelVoicingsExpanded:z}=En(),Q=Pf.indexOf(c),M=-(Q*30);let V;o!==0?V=M+o:m==="rotating"?V=d:V=0;const H=re.useRef(null),X=re.useRef(null),[he,I]=re.useState(null),[se,ie]=re.useState({x:0,y:0}),[de,pe]=re.useState({isOpen:!1,chord:null,voicingSuggestion:"",baseQuality:""}),[G,j]=re.useState(null),P=re.useRef(null),ee=re.useCallback(Ne=>{P.current&&clearTimeout(P.current),j(Ne),P.current=setTimeout(()=>{j(null)},2500)},[]),J=s??se,oe=re.useCallback(Ne=>{a?a(Ne):ie(Ne)},[a]),fe=w2(),{isLandscape:me}=Wh();re.useEffect(()=>{const Ne=T?.segmentId??null;I(Ne)},[T]);const Se=re.useRef(null),ye=re.useRef(null),[Fe,Ye]=re.useState(!1),Je=re.useRef(0),ct=re.useRef(0),[$,Re]=re.useState(!1),pt=re.useRef(null),Ke=re.useCallback((Ne,Ie)=>{if(!ye.current)return 0;const rt=ye.current.getBoundingClientRect(),Yt=rt.left+rt.width/2,$n=rt.top+rt.height/2,an=Ne-Yt,$t=Ie-$n;return Math.atan2($t,an)*(180/Math.PI)},[]),Le=re.useCallback(Ne=>{for(;Ne>180;)Ne-=360;for(;Ne<-180;)Ne+=360;return Ne},[]),tt=re.useCallback(Ne=>{const Ie=Pf.indexOf(c),rt=Ne==="cw"?(Ie+1)%12:(Ie-1+12)%12;f(Pf[rt]),y(Ne)},[c,f,y]),Ue=re.useRef(null),ot=re.useRef(!1),it=re.useCallback(Ne=>{if(fe||!ye.current||!Se.current)return;const Ie=ye.current.getBoundingClientRect(),rt=Ie.width/2,Yt=Ie.height/2,$n=Ne.clientX-Ie.left-rt,an=Ne.clientY-Ie.top-Yt,$t=Math.sqrt($n*$n+an*an),nr=Ie.width/600*70,Zn=Ie.width/600*250;$t>nr&&$t<=Zn?(Ye(!0),Je.current=Ke(Ne.clientX,Ne.clientY),ct.current=d,Ne.preventDefault()):$t>Zn&&r>1&&(Re(!0),pt.current={x:Ne.clientX,y:Ne.clientY},Ne.preventDefault())},[Ke,d,fe,r]),Be=re.useCallback(Ne=>{if(Ne.touches.length!==1)return;const Ie=Ne.touches[0];if(Ue.current={x:Ie.clientX,y:Ie.clientY},ot.current=!1,!ye.current)return;const rt=ye.current.getBoundingClientRect(),Yt=rt.width/2,$n=rt.height/2,an=Ie.clientX-rt.left-Yt,$t=Ie.clientY-rt.top-$n,nr=Math.sqrt(an*an+$t*$t),Zn=rt.width/600*70;nr>Zn&&(Je.current=Ke(Ie.clientX,Ie.clientY),ct.current=d)},[Ke,d]),at=re.useCallback(Ne=>{if(Ne.touches.length!==1||!Ue.current)return;const Ie=Ne.touches[0],rt=Ie.clientX-Ue.current.x,Yt=Ie.clientY-Ue.current.y;if(Math.sqrt(rt*rt+Yt*Yt)>10){if(ot.current=!0,Ne.preventDefault(),!ye.current)return;const an=ye.current.getBoundingClientRect(),$t=an.width/2,nr=an.height/2,Zn=Ie.clientX-an.left,Ir=Ie.clientY-an.top,ms=Math.sqrt(Math.pow(Zn-$t,2)+Math.pow(Ir-nr,2)),ei=an.width/600*70;if(ms>ei&&Je.current!==0){const Ms=Ke(Ie.clientX,Ie.clientY),Us=Le(Ms-Je.current);if(Math.abs(Us)>=15){const Hs=Math.round(Us/30);if(Hs!==0){const qr=m==="fixed"?Hs>0?"cw":"ccw":Hs>0?"ccw":"cw",ti=Math.abs(Hs);for(let gs=0;gs<ti;gs++)tt(qr);Je.current=Ms}}}}},[Ke,tt,m,Le]),nt=re.useCallback(Ne=>{if(!Fe)return;const Ie=Ke(Ne.clientX,Ne.clientY),rt=Le(Ie-Je.current);if(Math.abs(rt)>=15){const Yt=Math.round(rt/30);if(Yt!==0){let $n;m==="fixed"?$n=Yt>0?"cw":"ccw":$n=Yt>0?"ccw":"cw";const an=Math.abs(Yt);for(let $t=0;$t<an;$t++)tt($n);Je.current=Ie}}},[Fe,Ke,tt,m,Le]),ut=re.useCallback(()=>{Ye(!1)},[]);re.useEffect(()=>{if(Fe)return document.addEventListener("mousemove",nt),document.addEventListener("mouseup",ut),()=>{document.removeEventListener("mousemove",nt),document.removeEventListener("mouseup",ut)}},[Fe,nt,ut]);const gt=re.useCallback((Ne,Ie,rt)=>{if(!Se.current||rt<=1)return{x:0,y:0};const{clientWidth:Yt,clientHeight:$n}=Se.current,an=12,$t=Yt*(rt-1)/2+an,nr=$n*(rt-1)/2+an;return{x:Math.max(-$t,Math.min($t,Ne)),y:Math.max(-nr,Math.min(nr,Ie))}},[]);re.useEffect(()=>{oe(gt(J.x,J.y,r))},[r,gt,J.x,J.y,oe]);const dt=re.useCallback(Ne=>{if(!$||!pt.current)return;const Ie=Ne.clientX-pt.current.x,rt=Ne.clientY-pt.current.y;oe(gt(J.x+Ie,J.y+rt,r)),pt.current={x:Ne.clientX,y:Ne.clientY}},[$,r,gt,J,oe]),xt=re.useCallback(()=>{Re(!1),pt.current=null},[]);re.useEffect(()=>{if($)return document.addEventListener("mousemove",dt),document.addEventListener("mouseup",xt),()=>{document.removeEventListener("mousemove",dt),document.removeEventListener("mouseup",xt)}},[$,dt,xt]);const ht=Ne=>({x:(Ne[0].clientX+Ne[1].clientX)/2,y:(Ne[0].clientY+Ne[1].clientY)/2}),rn=re.useCallback(Ne=>{if(Ne.touches.length===2){Ne.preventDefault();const Ie=Ne.touches[0].clientX-Ne.touches[1].clientX,rt=Ne.touches[0].clientY-Ne.touches[1].clientY;H.current=Math.sqrt(Ie*Ie+rt*rt),X.current=ht(Ne.touches)}},[]),Vt=re.useCallback(Ne=>{if(Ne.touches.length===2&&H.current!==null){Ne.preventDefault(),Ne.stopPropagation();const Ie=Ne.touches[0].clientX-Ne.touches[1].clientX,rt=Ne.touches[0].clientY-Ne.touches[1].clientY,Yt=Math.sqrt(Ie*Ie+rt*rt),$n=Yt/H.current,an=Math.max(1,Math.min(2.5,r*$n)),$t=an>1.3?38:50,nr=ht(Ne.touches);if(X.current){const Zn=nr.x-X.current.x,Ir=nr.y-X.current.y;oe(gt(J.x+Zn,J.y+Ir,an))}H.current=Yt,X.current=nr,t(an,$t)}},[r,t,gt,J,oe]),bt=re.useCallback(Ne=>{H.current=null,X.current=null,Ne.touches.length===0&&Ne.preventDefault()},[]),jt=re.useCallback(Ne=>{if(Ne.ctrlKey||Ne.metaKey){Ne.preventDefault();const Ie=Ne.deltaY>0?.9:1.1,rt=Math.max(1,Math.min(2.5,r*Ie)),Yt=rt>1.3?38:50;t(rt,Yt)}},[r,t]),qt=fd(),yt=600,Ft=yt/2,vt=yt/2,Dt=60,dn=Dt+8,St=145,mt=St,Rt=210,Oe=Rt,xe=250,Pe=re.useMemo(()=>Z_(c),[c]),lt=re.useMemo(()=>Pe.sharps>0?`${Pe.sharps}`:Pe.flats>0?`${Pe.flats}`:"",[Pe]),Xe=re.useRef(0),Mt=Ne=>{const Ie=Ne,rt=Date.now();if(rt-Xe.current<300)return;Xe.current=rt,xi(Ne.notes),I(Ie.segmentId??null),k(Ne);let Yt="";Ie.positionIndex!==void 0&&Ie.ringType&&(Yt=xn(Ie.positionIndex,Ie.ringType==="major"?"major":Ie.ringType==="minor"?Ie.numeral==="ii"||Ie.numeral==="vi"?"ii":"iii":"dim")),(!(fe&&!me)||!W||!O&&!z)&&pe({isOpen:!0,chord:Ie,voicingSuggestion:Yt,baseQuality:Ie.quality})},pn=Ne=>{const Ie=Ne;if(!N||!A){ee("Select a slot on the timeline first"),F||B();return}b(Ne,N,A),R(N,A)||(D(N,A),I(Ie.segmentId??null),k(Ne)),F||B()},sn=Ne=>(Ne-Q+12)%12,hn=(Ne,Ie)=>{const rt=sn(Ne);return Ie==="major"?rt===0||rt===1||rt===11:Ie==="ii"||Ie==="iii"||Ie==="dim"?rt===0:!1},en=Ne=>sn(Ne)===1,yn=Ne=>{const Ie=sn(Ne);return Ie===2||Ie===4},Qt=(Ne,Ie)=>{const rt=sn(Ne);if(Ie==="major"){if(rt===0)return"I";if(rt===1)return"V";if(rt===11)return"IV";if(rt===2)return"II";if(rt===4)return"III"}if(Ie==="ii"){if(rt===0)return"ii";if(rt===1)return"vi"}return Ie==="iii"&&rt===0?"iii":Ie==="dim"&&rt===0?"vii":""},xn=(Ne,Ie)=>{const rt=sn(Ne);if(Ie==="major"){if(rt===0)return"maj7, maj9, maj13 or 6";if(rt===1)return"7, 9, 11, sus4, 13";if(rt===11)return"maj7, maj9, maj13 or 6";if(rt===2||rt===4)return"7, sus4"}if(Ie==="ii"){if(rt===0)return"m7, m9, m11, m6";if(rt===1)return"m7, m9, m11"}return Ie==="iii"&&rt===0?"m7":Ie==="dim"&&rt===0?"m75 (7)":""},Sn=Ne=>{if(he)return he===Ne.segmentId;const Ie=T?.segmentId;return Ie?Ie===Ne.segmentId:T&&!Ie?T.root===Ne.root&&T.quality===Ne.quality:!1},Ln=re.useCallback(Ne=>{Ne.touches.length===2?rn(Ne):Ne.touches.length===1&&Be(Ne)},[rn,Be]),qn=re.useCallback(Ne=>{Ne.touches.length===2?Vt(Ne):Ne.touches.length===1&&at(Ne)},[Vt,at]),vr=re.useCallback(Ne=>{Ue.current=null,ot.current=!1,bt(Ne)},[bt]),[wn,nn]=re.useState(null),mn=re.useCallback((Ne,Ie,rt)=>{nn(Ne?{text:Ne,x:Ie,y:rt}:null)},[]),tr=wn?{position:"fixed",left:wn.x,top:wn.y,transform:"translate(-50%, -100%) translateY(-12px)",backgroundColor:"rgba(0, 0, 0, 0.9)",color:"white",padding:"8px 12px",borderRadius:"6px",fontSize:"11px",pointerEvents:"none",zIndex:9999,whiteSpace:"normal",textAlign:"center",maxWidth:"220px",lineHeight:"1.4",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}:{};return x.jsxs("div",{ref:Se,"data-chord-wheel":!0,className:`relative flex flex-col items-center justify-center w-full h-full p-1 sm:p-2 select-none ${$?"cursor-grabbing":r>1&&!fe?"cursor-grab":""}`,onTouchStart:Ln,onTouchMove:qn,onTouchEnd:vr,onWheel:jt,onMouseDown:it,style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",touchAction:"none"},children:[wn&&x.jsx("div",{style:tr,children:wn.text}),x.jsx("div",{className:"w-full h-full transition-transform duration-150 ease-out overflow-hidden",style:{transform:`translate(${J.x}px, ${J.y}px) scale(${r})`,transformOrigin:`center ${e}%`},children:x.jsxs("svg",{ref:ye,width:"100%",height:"100%",viewBox:`0 0 ${yt} ${yt}`,className:`w-full h-full select-none ${Fe?"cursor-grabbing":"cursor-grab"}`,onMouseDown:it,style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:[x.jsxs("defs",{children:[x.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[x.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),x.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]}),x.jsx("filter",{id:"segment-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:x.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"4",floodColor:"#ffffff",floodOpacity:"0.9"})})]}),x.jsx("g",{style:{transform:`rotate(${V}deg)`,transformOrigin:`${Ft}px ${vt}px`,transition:"transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:G_.map((Ne,Ie)=>{const Yt=Ie*30-15,$n=Yt+30,an=qt[Ne.major]||qt.C,$t=Ne.ii.replace("m",""),nr=Ne.iii.replace("m",""),Zn=Ne.diminished.replace("",""),Ir=hn(Ie,"major"),ms=yn(Ie),ei=hn(Ie,"ii")||en(Ie),Ms=hn(Ie,"iii"),Us=hn(Ie,"dim"),Hs={root:Ne.major,quality:"major",numeral:Qt(Ie,"major"),notes:ka(Ne.major,"major"),symbol:Ne.major,segmentId:`major-${Ie}`,ringType:"major",positionIndex:Ie},qr={root:$t,quality:"minor",numeral:Qt(Ie,"ii"),notes:ka($t,"minor"),symbol:Ne.ii,segmentId:`ii-${Ie}`,ringType:"minor",positionIndex:Ie},ti={root:nr,quality:"minor",numeral:Qt(Ie,"iii"),notes:ka(nr,"minor"),symbol:Ne.iii,segmentId:`iii-${Ie}`,ringType:"minor",positionIndex:Ie},gs={root:Zn,quality:"diminished",numeral:Qt(Ie,"dim"),notes:ka(Zn,"diminished"),symbol:Ne.diminished,segmentId:`dim-${Ie}`,ringType:"diminished",positionIndex:Ie},Tn=15,fi=Yt+-7.5,Xi=fi+Tn,yo=Xi,bs=yo+Tn,jr=15,yr=Yt+(30-jr)/2,xo=yr+jr,Vl=Ne.major,$o=Ne.ii,vs=Ne.iii,Zo=Ne.diminished;return x.jsxs("g",{children:[x.jsx(C1,{cx:Ft,cy:vt,innerRadius:dn,outerRadius:St,startAngle:Yt,endAngle:$n,color:an,label:Vl,chord:Hs,isSelected:Sn(Hs),isDiatonic:Ir,isSecondary:ms,onClick:Mt,onDoubleClick:pn,ringType:"major",wheelRotation:V,romanNumeral:Ir||ms?Qt(Ie,"major"):void 0,voicingSuggestion:Ir||ms?xn(Ie,"major"):void 0,segmentId:`major-${Ie}`,onHover:mn}),x.jsx(C1,{cx:Ft,cy:vt,innerRadius:mt,outerRadius:Rt,startAngle:fi,endAngle:Xi,color:an,label:$o,chord:qr,isSelected:Sn(qr),isDiatonic:ei,onClick:Mt,onDoubleClick:pn,ringType:"minor",wheelRotation:V,romanNumeral:ei?Qt(Ie,"ii"):void 0,voicingSuggestion:ei?xn(Ie,"ii"):void 0,segmentId:`ii-${Ie}`,onHover:mn}),x.jsx(C1,{cx:Ft,cy:vt,innerRadius:mt,outerRadius:Rt,startAngle:yo,endAngle:bs,color:an,label:vs,chord:ti,isSelected:Sn(ti),isDiatonic:Ms,onClick:Mt,onDoubleClick:pn,ringType:"minor",wheelRotation:V,romanNumeral:Ms?Qt(Ie,"iii"):void 0,voicingSuggestion:Ms?xn(Ie,"iii"):void 0,segmentId:`iii-${Ie}`,onHover:mn}),x.jsx(C1,{cx:Ft,cy:vt,innerRadius:Oe,outerRadius:xe,startAngle:yr,endAngle:xo,color:an,label:Zo,chord:gs,isSelected:Sn(gs),isDiatonic:Us,onClick:Mt,onDoubleClick:pn,ringType:"diminished",wheelRotation:V,romanNumeral:Us?Qt(Ie,"dim"):void 0,voicingSuggestion:Us?xn(Ie,"dim"):void 0,segmentId:`dim-${Ie}`,onHover:mn})]},Ne.major)})}),x.jsx("circle",{cx:Ft,cy:vt,r:Dt,fill:"#1a1a24",stroke:"#3a3a4a",strokeWidth:"2",style:{pointerEvents:"none"}}),x.jsx("text",{x:Ft,y:vt-25,textAnchor:"middle",fill:"#6366f1",fontSize:"9",fontWeight:"bold",letterSpacing:"2",children:"KEY"}),x.jsx("text",{x:Ft,y:vt+3,textAnchor:"middle",fill:"white",fontSize:"26",fontWeight:"bold",children:Ks(c)}),x.jsx("text",{x:Ft,y:vt+21,textAnchor:"middle",fill:"#9898a6",fontSize:"11",children:lt||"No /"}),x.jsxs("g",{transform:`translate(${Ft-22}, ${vt+40})`,onClick:()=>tt("ccw"),onTouchEnd:Ne=>{Ne.preventDefault(),Ne.stopPropagation(),tt("ccw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[x.jsx("circle",{r:fe?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),x.jsx("g",{transform:fe?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:x.jsx(mp,{size:fe?12:9,color:"#9898a6"})})]}),x.jsxs("g",{transform:`translate(${Ft+22}, ${vt+40})`,onClick:()=>tt("cw"),onTouchEnd:Ne=>{Ne.preventDefault(),Ne.stopPropagation(),tt("cw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[x.jsx("circle",{r:fe?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),x.jsx("g",{transform:fe?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:x.jsx(Vh,{size:fe?12:9,color:"#9898a6"})})]}),x.jsxs("g",{transform:`translate(${Ft}, ${vt+40})`,onClick:u?void 0:_,onTouchEnd:u?void 0:Ne=>{Ne.preventDefault(),Ne.stopPropagation(),_()},className:u?"":"cursor-pointer",style:{pointerEvents:u?"none":"all",cursor:u?"default":"pointer",opacity:u?.5:1},children:[x.jsx("circle",{r:fe?16:11,fill:u||m==="rotating"?"#252535":"#3f2e2e",className:"transition-colors",style:{pointerEvents:u?"none":"all",transition:"fill 0.3s ease"},children:x.jsx("title",{children:u?"Mode locked in this view":m==="rotating"?"Lock wheel (C at top)":"Pin current key to top"})}),x.jsxs("g",{style:{pointerEvents:"none",transition:"transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",transform:o!==0?`rotate(${o}deg)`:m==="rotating"?"rotate(0deg)":`rotate(${Q*30}deg)`,transformOrigin:"0px 0px"},children:[x.jsx("polygon",{points:fe?"0,-10 4,0 0,1.5 -4,0":"0,-7 2.5,0 0,1 -2.5,0",fill:"#ef4444",stroke:"#b91c1c",strokeWidth:"0.5"}),x.jsx("polygon",{points:fe?"0,10 4,0 0,-1.5 -4,0":"0,7 2.5,0 0,-1 -2.5,0",fill:"#f1f5f9",stroke:"#94a3b8",strokeWidth:"0.5"}),x.jsx("circle",{cx:0,cy:0,r:fe?2:1.5,fill:m==="rotating"?"#fef2f2":"#6b7280"})]})]})]})}),x.jsx(ak,{isOpen:de.isOpen,onClose:()=>pe({...de,isOpen:!1}),onSelect:Ne=>{if(de.chord){const Ie=ka(de.chord.root,Ne),rt={...de.chord,quality:Ne,notes:Ie,symbol:`${de.chord.root}${Ne==="major"?"":Ne==="minor"?"m":Ne}`};k(rt)}},onAddToTimeline:Ne=>{if(de.chord){const Ie=ka(de.chord.root,Ne),rt={...de.chord,quality:Ne,notes:Ie,symbol:`${de.chord.root}${Ne==="major"?"":Ne==="minor"?"m":Ne}`};if(!N||!A){ee("Select a slot on the timeline first"),F||B();return}b(rt,N,A),R(N,A),F||B()}},onOpenDetails:()=>{W||Y()},chordRoot:de.chord?.root||"C",voicings:ok(de.voicingSuggestion,de.baseQuality),selectedQuality:de.chord?.quality,portraitWithPanel:fe&&!me&&W&&!O&&!z}),G&&Po.createPortal(x.jsxs("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999] flex items-center gap-3 px-5 py-4 rounded-xl shadow-xl animate-in fade-in zoom-in-95 duration-150",style:{background:"linear-gradient(135deg, #1e1e28 0%, #282833 100%)",border:"1px solid rgba(245, 158, 11, 0.5)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(245, 158, 11, 0.3), 0 0 20px rgba(245, 158, 11, 0.15)"},children:[x.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center shrink-0",children:x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-amber-400",children:[x.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),x.jsx("path",{d:"M12 9v4"}),x.jsx("path",{d:"M12 17h.01"})]})}),x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsx("span",{className:"text-sm font-semibold text-text-primary",children:G}),x.jsx("span",{className:"text-xs text-text-muted",children:"Tap a slot in the timeline to select it"})]})]}),document.body)]})},og=({type:r,size:e=20,className:t})=>{const s=e>16?1.5:1;switch(r){case"whole":return x.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:x.jsx("ellipse",{cx:"12",cy:"12",rx:"6",ry:"4",fill:"none",stroke:"currentColor",strokeWidth:s*1.5})});case"half":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 10, 16)"}),x.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-half":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 8, 16)"}),x.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),x.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"quarter":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"currentColor",transform:"rotate(-20, 10, 16)"}),x.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-quarter":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 8, 16)"}),x.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),x.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"eighth":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),x.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"4",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),x.jsx("path",{d:"M13 4 Q18 6 16 11",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"sixteenth":return x.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[x.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),x.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),x.jsx("path",{d:"M13 3 Q18 5 16 9",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),x.jsx("path",{d:"M13 7 Q18 9 16 13",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]})}};function lg(r,e){const[t]=e;if(t%3===0&&t>3){if(r===1)return"dotted-half";if(r===2)return"dotted-quarter";if(r===3)return"quarter";if(r===6)return"eighth";if(r===12)return"sixteenth"}if(t===3){if(r===1)return"dotted-half";if(r===3)return"quarter";if(r===6)return"eighth";if(r===12)return"sixteenth"}return r===1?"whole":r===2?"half":r===4?"quarter":r===8?"eighth":r===16?"sixteenth":r<=1?"whole":r<=2?"half":r<=4?"quarter":r<=8?"eighth":"sixteenth"}function tw(r){const[e]=r;return e%3===0?[1,3,6].filter(t=>t<=8):[1,2,4,8]}const ck=({value:r,onChange:e,timeSignature:t,isCompact:s=!1})=>{const[a,o]=re.useState(!1),u=re.useRef(null),c=re.useRef(null),f=tw(t);re.useEffect(()=>{const y=_=>{u.current&&!u.current.contains(_.target)&&c.current&&!c.current.contains(_.target)&&o(!1)};if(a)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[a]),re.useEffect(()=>{if(a){const y=()=>o(!1);return window.addEventListener("scroll",y,!0),()=>window.removeEventListener("scroll",y,!0)}},[a]);const d=lg(r,t),m=s?12:16;return x.jsxs("div",{className:"relative",children:[x.jsx("button",{ref:u,onClick:()=>o(!a),className:Et("flex items-center justify-center rounded transition-all","hover:bg-accent-primary/20 active:scale-95","text-text-muted hover:text-accent-primary",s?"w-4 h-5":"w-5 h-6",a&&"bg-accent-primary/20 text-accent-primary"),title:`${r} step${r>1?"s":""} per measure`,children:x.jsx(og,{type:d,size:m})}),a&&Po.createPortal(x.jsx("div",{ref:c,className:Et("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row gap-2 p-2","animate-in fade-in zoom-in-95 duration-150"),style:{top:"60%",left:"50%",transform:"translate(-50%, -50%)",zIndex:99999},children:f.map(y=>{const _=lg(y,t),b=y===r;return x.jsx("button",{onClick:()=>{e(y),o(!1)},className:Et("flex items-center justify-center rounded-lg transition-all","w-12 h-12",b?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`${y} step${y>1?"s":""}`,children:x.jsx(og,{type:_,size:26})},y)})}),document.body)]})},P5={intro:{bg:"bg-purple-500/15",border:"border-purple-500/40",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/15",border:"border-blue-500/40",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/15",border:"border-cyan-500/40",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/15",border:"border-amber-500/40",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/15",border:"border-emerald-500/40",accent:"bg-emerald-500"},outro:{bg:"bg-rose-500/15",border:"border-rose-500/40",accent:"bg-rose-500"},custom:{bg:"bg-slate-500/15",border:"border-slate-500/40",accent:"bg-slate-500"}},uk=({section:r,songTimeSignature:e,className:t,onSlotClick:s})=>{const{tempo:a}=En(),o=fd(),u=P5[r.type]||P5.custom,c=r.timeSignature||e,f=c[0],d=r.measures.length,[m,y]=re.useState(!1),[_,b]=re.useState(null),N=re.useRef([]),A=252,k=15,T=52,R=Math.floor(A/d),D=Math.max(k,Math.min(T,R)),F=d>8,B=d>12,W=()=>{N.current.forEach(O=>clearTimeout(O)),N.current=[],y(!1),b(null)};re.useEffect(()=>(W(),()=>{N.current.forEach(O=>clearTimeout(O)),N.current=[]}),[r.id]);const Y=async()=>{if(m){W();return}js.state!=="running"&&await _u(),js.state==="suspended"&&await js.resume(),await Oc(),y(!0);const O=60/a*1e3,z=r.measures[0]?.beats.length||f,Q=f/z,M=Q*O;let V=0;r.measures.forEach(he=>{he.beats.forEach(I=>{const se=V*M,ie=window.setTimeout(()=>{b(I.id)},se);if(N.current.push(ie),I.chord&&I.chord.notes&&I.chord.notes.length>0){const de=window.setTimeout(()=>{const j=`${4/Math.min(Q,f)}n`;xi(I.chord.notes,j)},se);N.current.push(de)}V++})});const H=r.measures.reduce((he,I)=>he+I.beats.length,0),X=window.setTimeout(()=>{y(!1),b(null),N.current=[]},H*M);N.current.push(X)};return x.jsx("div",{className:Et("w-full",t),children:x.jsxs("div",{className:Et("rounded-lg border overflow-hidden transition-all",u.bg,u.border),children:[x.jsx("div",{className:Et("h-1 w-full",u.accent)}),x.jsx("div",{className:"pl-2 pr-3 py-2 overflow-hidden",style:{maxHeight:B?"80px":F?"100px":"120px"},children:x.jsx("div",{className:"flex gap-0.5",style:{minWidth:"min-content",width:"100%"},children:r.measures.map((O,z)=>{const Q=O.beats.length;return x.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",style:{minWidth:`${D}px`,maxWidth:`${D}px`},children:[!B&&x.jsxs("div",{className:"h-3 flex items-center justify-between px-0.5",children:[x.jsx("span",{className:Et("font-mono text-white/30",F?"text-[6px]":"text-[8px]"),children:z+1}),!F&&x.jsx("div",{className:"flex gap-px",children:Array.from({length:Math.min(Q,f)}).map((M,V)=>x.jsx("div",{className:"w-0.5 h-1 bg-white/15 rounded-full"},V))})]}),x.jsx("div",{className:"flex-1 rounded overflow-hidden flex gap-px",style:{minHeight:B?"28px":F?"36px":"48px"},children:O.beats.map(M=>{const V=M.chord&&M.chord.notes&&M.chord.notes.length>0,H=M.chord,X=V&&o[H.root]||"#666",he=_===M.id,I=O.beats.length;let se="9px";return B?se=I>2?"5px":"6px":F?se=I>2?"6px":"7px":se=I>2?"7px":I>1?"8px":"9px",V?x.jsx("div",{onClick:()=>s?.(M.id),className:Et("flex-1 min-w-0 rounded-sm flex items-center justify-center font-bold truncate transition-all duration-150",he&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:brightness-110 active:scale-95"),style:{backgroundColor:he?X:"rgba(0, 0, 0, 0.35)",border:`1.5px solid ${X}`,color:he?"#fff":X,fontSize:se,padding:"0 2px",textShadow:he?"0 1px 3px rgba(0,0,0,0.7)":"0 1px 2px rgba(0,0,0,0.5)",boxShadow:he?`0 0 12px ${X}, 0 0 4px ${X}`:"none"},title:H.symbol,children:Ks(H.symbol)},M.id):x.jsx("div",{className:Et("flex-1 min-w-0 rounded-sm flex items-center justify-center transition-all duration-150",he&&"scale-105 z-10"),style:{backgroundColor:he?"rgba(99, 102, 241, 0.5)":"rgba(255, 255, 255, 0.03)",border:he?"1.5px solid rgba(99, 102, 241, 0.8)":"1px dashed rgba(255, 255, 255, 0.1)",boxShadow:he?"0 0 8px rgba(99, 102, 241, 0.5)":"none"},children:x.jsx("span",{className:Et("transition-colors duration-150",he?"text-white/60":"text-white/10",F?"text-[6px]":"text-[8px]"),children:""})},M.id)})})]},O.id)})})}),x.jsxs("div",{className:"px-2 py-1.5 bg-black/20 border-t border-white/5 flex items-center gap-2",children:[x.jsx("button",{onClick:Y,className:Et("w-5 h-5 rounded-full flex items-center justify-center transition-all","hover:scale-110 active:scale-95",m?"bg-red-500/80 text-white":"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30"),title:m?"Stop":"Play section once",children:m?x.jsx(X3,{size:8}):x.jsx(Gh,{size:10,className:"ml-0.5"})}),x.jsxs("div",{className:"flex-1 flex items-center justify-center gap-3",children:[x.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[c[0],"/",c[1]]}),x.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-white/20"}),x.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[d," bar",d!==1?"s":""]})]})]})]})})},hk=[[4,4],[3,4],[5,4],[2,4],[6,8]],cg=[{name:"Intro",type:"intro"},{name:"Verse",type:"verse"},{name:"Chorus",type:"chorus"},{name:"Bridge",type:"bridge"},{name:"Outro",type:"outro"},{name:"Custom",type:"custom"}],fk=r=>cg.some(e=>e.name===r&&e.type!=="custom"),dk=({section:r,isOpen:e,onClose:t,onTimeSignatureChange:s,onBarsChange:a,onStepCountChange:o,onNameChange:u,onCopy:c,onClear:f,onDelete:d,songTimeSignature:m,onNavigatePrev:y,onNavigateNext:_,hasPrev:b=!1,hasNext:N=!1,sectionIndex:A,totalSections:k,onSlotClick:T})=>{const R=re.useRef(null),D=re.useRef(null),F=r.timeSignature||m,B=`${F[0]}/${F[1]}`,W=r.measures.length,Y=r.measures[0]?.beats.length??1,O=tw(F),[z,Q]=re.useState(!1),[M,V]=re.useState(r.name),H=r.type==="custom"||!fk(r.name),X=H?"Custom":r.name;re.useEffect(()=>{z&&D.current&&(D.current.focus(),D.current.select())},[z]),re.useEffect(()=>{if(!e)return;const I=se=>{se.key==="Escape"&&(z?Q(!1):t())};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[e,t,z]);const he=()=>{const I=M.trim();I&&u&&u(I,"custom"),Q(!1)};return e?Po.createPortal(x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:t}),y&&x.jsx("button",{onClick:y,disabled:!b,className:Et("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",b?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{left:"calc(50% - min(150px, 45vw) - 52px)"},title:"Previous Section",children:x.jsx(Ih,{size:24})}),_&&x.jsx("button",{onClick:_,disabled:!N,className:Et("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",N?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{right:"calc(50% - min(150px, 45vw) - 52px)"},title:"Next Section",children:x.jsx(Rh,{size:24})}),x.jsxs("div",{ref:R,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"260px",maxWidth:"300px",width:"90vw"},children:[x.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[x.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[A!==void 0&&k!==void 0&&x.jsxs("div",{className:"h-5 px-2 rounded-full flex items-center justify-center gap-0.5 font-bold text-white shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 0 8px rgba(99,102,241,0.4)"},title:`Section ${A+1} of ${k}`,children:[x.jsx("span",{className:"text-[10px]",children:A+1}),x.jsx("span",{className:"text-[6px] opacity-60 font-medium",children:"of"}),x.jsx("span",{className:"text-[10px]",children:k})]}),(A===void 0||k===void 0)&&x.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),u?z?x.jsx("input",{ref:D,type:"text",value:M,onChange:I=>V(I.target.value),onBlur:he,onKeyDown:I=>{I.key==="Enter"&&he()},placeholder:"Section name...",className:`bg-bg-tertiary text-sm font-bold text-text-primary 
                                               px-2 py-1 rounded-md border border-border-subtle
                                               focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                               w-full max-w-[140px]`,maxLength:20}):x.jsx("select",{value:X,onChange:I=>{const se=I.target.value;if(se==="Custom")V(H?r.name:""),Q(!0);else{const ie=cg.find(de=>de.name===se);ie&&u(ie.name,ie.type)}},className:`bg-transparent text-sm font-bold text-text-primary 
                                               focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                               appearance-none cursor-pointer pr-5`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0 center"},children:cg.map(I=>x.jsx("option",{value:I.name,className:"bg-bg-secondary",children:I.name},I.type))}):x.jsx("span",{className:"text-sm font-bold text-text-primary",children:r.name}),u&&!z&&H&&r.name!=="Custom"&&x.jsx("button",{onClick:()=>{V(r.name),Q(!0)},className:`text-xs text-accent-primary hover:text-accent-primary/80 
                                           px-1.5 py-0.5 rounded bg-accent-primary/10 truncate max-w-[80px]`,title:`Edit: ${r.name}`,children:r.name})]}),x.jsx("button",{onClick:t,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:x.jsx(sd,{size:14})})]}),x.jsxs("div",{className:"p-4 space-y-4",children:[x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Time Sig"}),x.jsx("div",{className:"relative",children:x.jsx("select",{value:B,onChange:I=>s(I.target.value),className:`w-full h-8 bg-bg-tertiary text-text-primary text-xs font-bold rounded-lg 
                                               px-3 border border-border-subtle 
                                               focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                               appearance-none cursor-pointer`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",paddingRight:"24px"},children:hk.map(([I,se])=>x.jsxs("option",{value:`${I}/${se}`,className:"bg-bg-secondary",children:[I,"/",se]},`${I}/${se}`))})})]}),x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Length"}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:()=>a(Math.max(1,W-1)),disabled:W<=1,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:""}),x.jsx("span",{className:"flex-1 text-center text-sm font-bold text-text-primary tabular-nums",children:W}),x.jsx("button",{onClick:()=>a(Math.min(16,W+1)),disabled:W>=16,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:"+"})]})]})]}),o&&x.jsxs("div",{className:"space-y-1.5",children:[x.jsx("label",{className:"block text-center text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Steps Per Bar"}),x.jsx("div",{className:"flex items-center gap-1.5 justify-center",children:O.map(I=>{const se=lg(I,F),ie=I===Y;return x.jsx("button",{onClick:()=>o(I),className:Et("flex items-center justify-center rounded-lg transition-all","w-11 h-11 active:scale-95",ie?"bg-accent-primary text-white shadow-lg border-2 border-accent-primary":"bg-bg-tertiary border border-border-subtle text-text-muted hover:text-text-primary hover:bg-bg-secondary"),title:`${I} step${I>1?"s":""} per measure`,children:x.jsx(og,{type:se,size:24})},I)})})]}),x.jsx(uk,{section:r,songTimeSignature:m,className:"pt-1",onSlotClick:T}),x.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[x.jsxs("button",{onClick:()=>{c(),t()},className:`flex items-center justify-center gap-1.5
                                       px-2 py-2.5 rounded-lg
                                       bg-accent-primary/10 border border-accent-primary/30
                                       text-accent-primary hover:bg-accent-primary/20
                                       transition-all text-xs font-bold active:scale-95`,children:[x.jsx(pT,{size:14}),"Duplicate"]}),x.jsxs("button",{onClick:()=>{f(),t()},className:`flex items-center justify-center gap-1.5
                                       px-2 py-2.5 rounded-lg
                                       bg-yellow-500/10 border border-yellow-500/30
                                       text-yellow-400 hover:bg-yellow-500/20
                                       transition-all text-xs font-bold active:scale-95`,children:[x.jsx(bT,{size:14}),"Clear"]}),x.jsxs("button",{onClick:()=>{d(),t()},className:`flex items-center justify-center gap-1.5
                                       px-2 py-2.5 rounded-lg
                                       bg-red-500/10 border border-red-500/30
                                       text-red-400 hover:bg-red-500/20
                                       transition-all text-xs font-bold active:scale-95`,children:[x.jsx(ig,{size:14}),"Remove"]})]})]})]})]}),document.body):null},xm=({isOpen:r,onToggle:e,hideCloseButton:t=!1,isCompact:s=!1,isLandscape:a=!1})=>{const{currentSong:o,selectedSectionId:u,selectedSlotId:c,setSelectedSlot:f,selectSlotOnly:d,setSelectedChord:m,playingSectionId:y,playingSlotId:_,isPlaying:b,addSuggestedSection:N,setSectionTimeSignature:A,setSectionMeasures:k,setSectionSubdivision:T,removeSection:R,duplicateSection:D,clearSection:F,setMeasureSubdivision:B,selectedChord:W,addChordToSlot:Y,toggleSongMap:O,updateSection:z,undo:Q,redo:M,canUndo:V,canRedo:H,clearSlot:X}=En(),he=o.timeSignature,I=fd(),se=re.useRef(null),ie=re.useRef(null),{isMobile:de}=Wh(),pe=!de,[G,j]=Xn.useState(0),P=re.useRef(0),[ee,J]=Xn.useState(0),oe=re.useRef(0),[fe,me]=Xn.useState(0),Se=re.useRef(!1),[ye,Fe]=Xn.useState(null),Ye=re.useRef(null);re.useEffect(()=>{if(!b&&u&&ie.current){const Be=o.sections.findIndex(at=>at.id===u);Be!==-1&&(j(Be),setTimeout(()=>{if(ie.current){const at=ie.current.querySelector(`[data-section-id="${u}"]`);at&&at.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},100))}},[u,o.sections,b]),re.useEffect(()=>{if(b&&y){const Be=o.sections.findIndex(at=>at.id===y);Be!==-1&&Be!==G&&j(Be)}},[b,y,o.sections,G]),re.useEffect(()=>{if(_&&se.current){const Be=se.current.querySelector(`[data-slot-id="${_}"]`);Be&&Be.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[_]),re.useEffect(()=>{if(!r||!c||b)return;const Be=setTimeout(()=>{if(se.current){const at=se.current.querySelector(`[data-slot-id="${c}"]`);at&&at.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},250);return()=>clearTimeout(Be)},[c,b,r]);const Je=Be=>{P.current=Be.touches[0].clientY},ct=Be=>{const at=Be.touches[0].clientY-P.current;at>0&&J(Math.min(at,100))},$=()=>{ee>50&&e(),J(0)},Re=Be=>{oe.current=Be.touches[0].clientY},pt=Be=>{const at=oe.current-Be.touches[0].clientY;at>0&&me(Math.min(at,60))},Ke=()=>{fe>30&&e(),me(0)},Le=Be=>{Se.current=!0,oe.current=Be.clientY,Be.preventDefault()};re.useEffect(()=>{const Be=nt=>{if(!Se.current)return;const ut=oe.current-nt.clientY;ut>0&&me(Math.min(ut,60))},at=()=>{Se.current&&(fe>30&&e(),me(0),Se.current=!1)};return document.addEventListener("mousemove",Be),document.addEventListener("mouseup",at),()=>{document.removeEventListener("mousemove",Be),document.removeEventListener("mouseup",at)}},[fe,e]);const tt=Be=>{if(I[Be])return I[Be];const at=Eh(Be);for(const nt of Object.keys(I))if(Eh(nt)===at)return I[nt];return"hsl(230, 60%, 50%)"},Ue=(Be,at,nt)=>{const ut=u===Be&&c===at,gt=Date.now();if(nt&&Ye.current&&Ye.current.slotId===at&&gt-Ye.current.time<400){W&&(Y(W,Be,at),d(Be,at)),Ye.current=null;return}nt?(nt.notes&&nt.notes.length>0&&xi(nt.notes),ut?m(nt):d(Be,at),Ye.current={slotId:at,time:gt}):(ut&&W?Y(W,Be,at):d(Be,at),Ye.current=null)},ot=Be=>{const at=Be==="prev"?Math.max(0,G-1):Math.min(o.sections.length-1,G+1);j(at);const nt=o.sections[at];nt&&nt.measures[0]?.beats[0]&&f(nt.id,nt.measures[0].beats[0].id)},it=o.sections[G];return r?x.jsxs("div",{"data-mobile-timeline":!0,className:Et("relative w-full bg-bg-secondary border-t-2 border-border-subtle overflow-hidden flex flex-col mobile-timeline-drawer",a&&"h-full",t&&"h-full border-t-0"),style:{maxHeight:a||t?void 0:"140px",transform:ee>0?`translateY(${ee}px)`:void 0,opacity:ee>0?Math.max(.5,1-ee/150):1,transition:ee===0?"all 0.2s ease-out":"none"},children:[!t&&x.jsx("div",{className:"flex flex-col items-center pt-1.5 pb-2 cursor-grab active:cursor-grabbing shrink-0",onTouchStart:Je,onTouchMove:ct,onTouchEnd:$,children:x.jsx("div",{className:"w-10 h-1 rounded-full bg-text-muted/40"})}),s?x.jsxs("div",{className:"relative flex items-center justify-center shrink-0 px-1 py-1",children:[x.jsx("button",{onClick:()=>O(!0),className:"absolute left-1 rounded text-text-muted hover:text-accent-primary touch-feedback flex items-center justify-center w-5 h-5",title:"Song Overview",children:x.jsx(pp,{size:12})}),x.jsxs("div",{className:"flex items-center justify-center gap-1",children:[x.jsx("button",{onClick:()=>ot("prev"),disabled:G===0,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:x.jsx(Ih,{size:14})}),x.jsxs("button",{onClick:()=>it&&Fe(it.id),className:"flex items-center justify-center gap-0.5 px-2 py-1 rounded-full text-white font-semibold text-[10px]",style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)",border:"1px solid rgba(255,255,255,0.2)"},title:it?.name||"Section",children:[x.jsxs("span",{className:"flex items-baseline",children:[x.jsx("span",{children:it?.name.charAt(0).toUpperCase()||"S"}),x.jsx("span",{className:"text-[7px] opacity-60 ml-0.5",children:G+1})]}),x.jsx(F5,{size:10,className:"opacity-70 shrink-0"})]}),x.jsx("button",{onClick:()=>ot("next"),disabled:G===o.sections.length-1,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:x.jsx(Rh,{size:14})})]}),x.jsxs("div",{className:"absolute right-1 flex items-center gap-0.5",children:[x.jsx("button",{onClick:Q,disabled:!V,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo",children:x.jsx(mp,{size:10})}),x.jsx("button",{onClick:M,disabled:!H,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo",children:x.jsx(Vh,{size:10})})]})]}):x.jsxs("div",{className:Et("flex items-center justify-between shrink-0",pe?"px-3 py-1":"px-2 pb-1.5"),children:[x.jsxs("div",{className:"flex items-center shrink-0",children:[x.jsx("button",{onClick:()=>O(!0),className:Et("no-touch-enlarge rounded text-text-muted hover:text-accent-primary touch-feedback shrink-0 mr-0.5",pe?"p-2":"p-1.5"),title:"Song Overview",children:x.jsx(pp,{size:pe?18:16})}),x.jsxs("div",{className:"flex items-center gap-0.5 ml-1",children:[x.jsx("button",{onClick:Q,disabled:!V,className:Et("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",pe?"w-8 h-8":"w-7 h-7"),title:"Undo",children:x.jsx(mp,{size:pe?14:12})}),x.jsx("button",{onClick:M,disabled:!H,className:Et("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",pe?"w-8 h-8":"w-7 h-7"),title:"Redo",children:x.jsx(Vh,{size:pe?14:12})})]})]}),x.jsx("button",{onClick:()=>ot("prev"),disabled:G===0,className:Et("no-touch-enlarge rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback",pe?"p-2":"p-1.5"),children:x.jsx(Ih,{size:pe?18:16})}),x.jsxs("div",{ref:ie,className:Et("flex-1 flex items-center overflow-x-auto scrollbar-hide px-1 mx-1",pe?"gap-2":"gap-1.5"),children:[o.sections.map((Be,at)=>{const nt=at===G,ut=Be.name.charAt(0).toUpperCase();return x.jsx("button",{"data-section-id":Be.id,onClick:()=>{if(nt){Fe(Be.id);return}j(at),Be.measures[0]?.beats[0]&&f(Be.id,Be.measures[0].beats[0].id)},className:Et("no-touch-enlarge relative font-semibold transition-all touch-feedback shrink-0","flex items-center justify-center",nt?Et("rounded-full text-white shadow-lg whitespace-nowrap overflow-hidden",pe?"w-32 h-9 text-xs":"w-24 h-8 text-[11px]"):Et("rounded-full text-text-secondary hover:text-text-primary border border-border-medium hover:border-border-subtle hover:bg-bg-tertiary",pe?"w-9 h-9 text-sm":"w-8 h-8 text-xs")),style:nt?{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 16px rgba(99, 102, 241, 0.5), inset 0 1px 0 rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.2)"}:void 0,title:Be.name,children:nt?x.jsxs("span",{className:"flex items-center gap-1 px-2 truncate",children:[x.jsx("span",{className:"truncate",children:Be.name}),x.jsx(F5,{size:pe?14:12,className:"opacity-70 shrink-0"})]}):ut},Be.id)}),x.jsx("button",{onClick:()=>N(),className:Et("no-touch-enlarge rounded-full text-text-muted hover:text-accent-primary touch-feedback shrink-0 border border-dashed border-border-medium hover:border-accent-primary/50 transition-all hover:bg-accent-primary/10 flex items-center justify-center",pe?"w-9 h-9":"w-8 h-8"),title:"Add section",children:x.jsx(bu,{size:pe?14:12})})]}),x.jsx("button",{onClick:()=>ot("next"),disabled:G===o.sections.length-1,className:Et("no-touch-enlarge rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback",pe?"p-2":"p-1.5"),children:x.jsx(Rh,{size:pe?18:16})}),!t&&x.jsx("button",{onClick:e,className:"p-2 min-w-[40px] min-h-[40px] hover:bg-bg-tertiary rounded transition-colors touch-feedback flex items-center justify-center ml-1",title:"Close timeline",children:x.jsx(U3,{size:18,className:"text-text-muted rotate-90"})})]}),x.jsx("div",{ref:se,className:Et("flex-1",pe?"px-3 pb-2 pt-3":"px-1 pb-1 pt-3",a?"overflow-y-auto overflow-x-hidden":"overflow-x-auto overflow-y-hidden"),children:it&&x.jsx("div",{className:Et(a?s?"flex flex-col gap-0":"grid grid-cols-4 gap-0.5":Et("flex flex-row items-center",pe?"gap-1.5":"gap-0.5")),children:it.measures.map((Be,at)=>x.jsxs(Xn.Fragment,{children:[x.jsxs("div",{className:Et("flex items-center",a?s?"gap-0.5 w-full min-w-0":"gap-0.5":pe?"gap-1 shrink-0":"gap-0.5 shrink-0"),children:[x.jsxs("div",{className:Et("flex flex-col items-center justify-center shrink-0",a?"gap-0 w-4":pe?"gap-0 w-6":"gap-0 w-5"),children:[x.jsx("span",{className:Et("font-mono text-text-muted text-center leading-none",pe?"text-[9px]":a?"text-[7px]":"text-[8px]"),children:at+1}),x.jsx(ck,{value:Be.beats.length,onChange:nt=>B(it.id,Be.id,nt),timeSignature:it.timeSignature||[4,4],isCompact:a})]}),x.jsx("div",{className:Et("flex items-center",a?s?`flex-1 gap-0.5 min-w-0 ${Be.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:`flex-1 gap-0.5 min-w-0 ${Be.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:"gap-0.5"),children:Be.beats.map(nt=>{const ut=u===it.id&&c===nt.id,gt=y===it.id&&_===nt.id,dt=nt.chord?tt(nt.chord.root):void 0,xt=Be.beats.length;let ht,rn;a&&xt>4&&(ht=Math.max(22,Math.floor(160/xt)),rn=Math.max(18,Math.floor(120/xt)));const Vt=pe?48:36,bt=4/xt,jt=Math.round(Vt*bt),qt=Math.max(pe?36:28,Math.min(pe?192:144,jt)),yt=pe?40:a&&s?xt<=4?26:24:32;return x.jsxs("button",{"data-slot-id":nt.id,onClick:()=>Ue(it.id,nt.id,nt.chord),className:Et("no-touch-enlarge relative flex items-center justify-center rounded-md transition-all touch-feedback group",a&&xt<=4?"flex-1 min-w-0":"shrink-0",gt&&"ring-2 ring-green-500 ring-offset-1 ring-offset-bg-primary shadow-[0_0_12px_rgba(34,197,94,0.5)] scale-105 z-10",ut&&!gt&&"ring-2 ring-accent-primary ring-offset-1 ring-offset-bg-primary",!nt.chord&&"border-2 border-dashed border-border-medium bg-bg-elevated hover:border-text-muted"),style:{height:`${yt}px`,...a&&ht?{width:`${ht}px`,minWidth:`${rn}px`}:{},...a?{}:{width:`${qt}px`,minWidth:`${qt}px`},...nt.chord?{backgroundColor:"rgba(0, 0, 0, 0.3)",border:`2px solid ${dt}`}:{}},children:[nt.chord?x.jsx("span",{className:Et("font-bold px-0.5 truncate",pe?"text-xs":a?xt>=8?"text-[7px]":xt>=4?"text-[8px]":"text-[9px]":"text-[10px]"),style:{color:dt},children:Ks(nt.chord.symbol)}):x.jsx("span",{className:Et("text-text-muted font-light",a?xt>=8?"text-xs":"text-sm":"text-base"),children:"+"}),gt&&x.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-green-500 flex items-center justify-center",children:x.jsx(Gh,{size:6,fill:"white",className:"text-white"})}),nt.chord&&!gt&&(ut||pe)&&x.jsx("div",{onClick:Ft=>{Ft.stopPropagation(),X(it.id,nt.id)},className:Et("absolute rounded-full bg-black/70 backdrop-blur-sm flex items-center justify-center cursor-pointer border border-white/30 active:bg-white/30",pe?"w-4 h-4 -top-2 -right-2 opacity-0 group-hover:opacity-100 hover:bg-white/20 hover:border-white/50 transition-all z-30":"w-5 h-5 -top-2.5 -right-2.5 opacity-100 z-30"),title:"Remove chord",children:x.jsx("span",{className:Et("text-white/90 font-bold leading-none",pe?"text-[10px]":"text-xs"),children:""})})]},nt.id)})})]}),!s&&!a&&at<it.measures.length-1&&x.jsx("div",{className:"w-px h-5 bg-border-medium shrink-0"})]},Be.id))})}),ye&&(()=>{const Be=o.sections.findIndex(ut=>ut.id===ye),at=Be>0,nt=Be<o.sections.length-1;return x.jsx(dk,{section:o.sections.find(ut=>ut.id===ye),isOpen:!0,onClose:()=>Fe(null),onTimeSignatureChange:ut=>{const[gt,dt]=ut.split("/").map(xt=>parseInt(xt,10));gt&&dt&&ye&&A(ye,[gt,dt])},onBarsChange:ut=>{ye&&k(ye,ut)},onStepCountChange:ut=>{ye&&T(ye,ut)},onNameChange:(ut,gt)=>{ye&&z(ye,{name:ut,type:gt})},onCopy:()=>{ye&&D(ye)},onClear:()=>{ye&&F(ye)},onDelete:()=>{ye&&R(ye)},songTimeSignature:he||[4,4],onNavigatePrev:()=>{if(at){const ut=o.sections[Be-1];Fe(ut.id),j(Be-1)}},onNavigateNext:()=>{if(nt){const ut=o.sections[Be+1];Fe(ut.id),j(Be+1)}},hasPrev:at,hasNext:nt,sectionIndex:Be,totalSections:o.sections.length,onSlotClick:ut=>{Fe(null),j(Be),d(ye,ut)}})})()]}):x.jsxs("div",{"data-mobile-timeline":!0,className:"w-full h-9 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing touch-feedback select-none",onClick:()=>{!Se.current&&fe===0&&e()},onTouchStart:Re,onTouchMove:pt,onTouchEnd:Ke,onMouseDown:Le,style:{transform:fe>0?`translateY(-${fe}px)`:void 0,opacity:fe>0?Math.min(1,.7+fe/100):1,transition:fe===0?"all 0.2s ease-out":"none"},children:[x.jsx("div",{className:"w-10 h-1 rounded-full bg-text-muted/40 mb-1.5"}),x.jsx("span",{className:"text-[9px] font-medium text-text-muted uppercase tracking-wider",children:"Timeline"})]})},pk=({highlightedNotes:r,rootNote:e,bassNote:t,color:s="#6366f1",octave:a=4,onNotePlay:o})=>{const u=["C","D","E","F","G","A","B"],c=T=>{const R={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},D=T.replace(/\d+/g,"");return R[D]??-1},f=r.map(T=>c(T)),d=e?c(e):-1,m=t?c(t):-1,y=T=>{const R=c(T);return R!==-1&&f.includes(R)},_=T=>d===-1?!1:c(T)===d,b=T=>m===-1?!1:c(T)===m,N=(T,R)=>{o&&o(T,R)},A=()=>{const T=[];for(let D=0;D<2;D++){const F=a+D;u.forEach(B=>{const W=y(B),Y=_(B),O=b(B);T.push(x.jsx("div",{className:"h-full rounded-b-md relative border-x border-b border-gray-400 cursor-pointer hover:brightness-95 active:brightness-90 transition-all",style:{width:`${100/14}%`,background:"linear-gradient(180deg, #fafafa 0%, #e8e8e8 70%, #d0d0d0 100%)",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.9), inset 0 -2px 4px rgba(0,0,0,0.08)"},onClick:()=>N(B,F),children:W&&x.jsxs(x.Fragment,{children:[Y&&x.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"3px",transform:"translateX(-50%)",width:"18px",height:"18px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),x.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"6px",transform:"translateX(-50%)",width:O?"14px":Y?"12px":"9px",height:O?"14px":Y?"12px":"9px",background:s,border:O?"3px solid #000":"2px solid #000",boxShadow:O?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`white-${D}-${B}`))})}return T},k=()=>{const T=[],R=[{note:"C#",offset:7.14},{note:"D#",offset:14.28},{note:"F#",offset:28.57},{note:"G#",offset:35.71},{note:"A#",offset:42.85}];for(let D=0;D<2;D++){const F=D*50,B=a+D;R.forEach(({note:W,offset:Y})=>{const O=y(W),z=_(W),Q=b(W),M=F+Y;T.push(x.jsx("div",{className:"absolute top-0 rounded-b-md cursor-pointer hover:brightness-125 active:brightness-150 transition-all",style:{left:`${M}%`,width:"5.5%",height:"58%",transform:"translateX(-50%)",background:"linear-gradient(180deg, #333 0%, #1a1a1a 70%, #0a0a0a 100%)",boxShadow:"0 3px 6px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.08)",pointerEvents:"auto"},onClick:()=>N(W,B),children:O&&x.jsxs(x.Fragment,{children:[z&&x.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"1px",transform:"translateX(-50%)",width:"16px",height:"16px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),x.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"4px",transform:"translateX(-50%)",width:Q?"12px":z?"10px":"8px",height:Q?"12px":z?"10px":"8px",background:s,border:Q?"3px solid #fff":"2px solid #fff",boxShadow:Q?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`black-${D}-${W}`))})}return T};return x.jsx("div",{className:"relative w-full rounded-lg select-none overflow-hidden",style:{height:"80px",minHeight:"80px",background:"#1a1a22",boxShadow:"inset 0 2px 8px rgba(0,0,0,0.6)",padding:"3px 2px 2px 2px"},children:x.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[x.jsx("div",{className:"flex w-full h-full gap-[1px]",style:{position:"relative",zIndex:0},children:A()}),x.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,pointerEvents:"none"},children:k()})]})})},mk={C:{maj:[{frets:[-1,3,2,0,1,0],fingers:[0,3,2,0,1,0],barres:[],baseFret:1}],m:[{frets:[-1,3,1,0,1,3],fingers:[0,3,1,0,2,4],barres:[],baseFret:1}],7:[{frets:[-1,3,2,3,1,0],fingers:[0,3,2,4,1,0],barres:[],baseFret:1}],maj7:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj9:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,3,2,2,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],m7:[{frets:[-1,3,1,3,1,3],fingers:[0,2,1,3,1,4],barres:[1],baseFret:3}],m9:[{frets:[-1,3,1,3,3,3],fingers:[0,2,1,3,4,4],barres:[],baseFret:3}],m11:[{frets:[-1,3,1,3,3,1],fingers:[0,2,1,3,4,1],barres:[1],baseFret:3}],m6:[{frets:[-1,3,1,2,1,3],fingers:[0,3,1,2,1,4],barres:[1],baseFret:1}],sus2:[{frets:[-1,3,0,0,1,3],fingers:[0,2,0,0,1,3],barres:[],baseFret:1}],sus4:[{frets:[-1,3,3,0,1,1],fingers:[0,3,4,0,1,1],barres:[1],baseFret:1}],dim:[{frets:[-1,3,1,-1,1,2],fingers:[0,4,1,0,2,3],barres:[],baseFret:1}],6:[{frets:[-1,3,2,2,1,0],fingers:[0,4,2,3,1,0],barres:[],baseFret:1}],add9:[{frets:[-1,3,2,0,3,0],fingers:[0,2,1,0,3,0],barres:[],baseFret:1}],9:[{frets:[-1,3,2,3,3,0],fingers:[0,2,1,3,4,0],barres:[],baseFret:1}],11:[{frets:[-1,3,2,3,3,3],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],13:[{frets:[-1,3,2,3,3,5],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,3,4,3,4,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},"C#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},Db:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},D:{maj:[{frets:[-1,-1,0,2,3,2],fingers:[0,0,0,1,3,2],barres:[],baseFret:1}],m:[{frets:[-1,-1,0,2,3,1],fingers:[0,0,0,2,3,1],barres:[],baseFret:1}],7:[{frets:[-1,-1,0,2,1,2],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],maj7:[{frets:[-1,-1,0,2,2,2],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],maj9:[{frets:[-1,-1,0,2,2,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],maj13:[{frets:[-1,-1,0,2,2,4],fingers:[0,0,0,1,1,3],barres:[2],baseFret:1}],m7:[{frets:[-1,-1,0,2,1,1],fingers:[0,0,0,2,1,1],barres:[1],baseFret:1}],m9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],m11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m6:[{frets:[-1,-1,0,2,0,1],fingers:[0,0,0,2,0,1],barres:[],baseFret:1}],sus2:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],sus4:[{frets:[-1,-1,0,2,3,3],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,1,3,1],fingers:[0,0,0,1,4,2],barres:[],baseFret:1}],6:[{frets:[-1,-1,0,2,0,2],fingers:[0,0,0,1,0,2],barres:[],baseFret:1}],add9:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],13:[{frets:[-1,-1,0,2,1,4],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,1,1,1],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}]},"D#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},Eb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},E:{maj:[{frets:[0,2,2,1,0,0],fingers:[0,2,3,1,0,0],barres:[],baseFret:1}],m:[{frets:[0,2,2,0,0,0],fingers:[0,2,3,0,0,0],barres:[],baseFret:1}],7:[{frets:[0,2,0,1,0,0],fingers:[0,2,0,1,0,0],barres:[],baseFret:1}],maj7:[{frets:[0,2,1,1,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],maj9:[{frets:[0,2,1,1,0,2],fingers:[0,2,1,1,0,3],barres:[1],baseFret:1}],maj13:[{frets:[0,2,1,1,2,2],fingers:[0,2,1,1,3,3],barres:[],baseFret:1}],m7:[{frets:[0,2,0,0,0,0],fingers:[0,1,0,0,0,0],barres:[],baseFret:1}],m9:[{frets:[0,2,0,0,0,2],fingers:[0,2,0,0,0,3],barres:[],baseFret:1}],m11:[{frets:[0,2,0,0,3,0],fingers:[0,2,0,0,4,0],barres:[],baseFret:1}],m6:[{frets:[0,2,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],sus2:[{frets:[0,2,4,4,0,0],fingers:[0,1,3,4,0,0],barres:[],baseFret:1}],sus4:[{frets:[0,2,2,2,0,0],fingers:[0,2,3,4,0,0],barres:[],baseFret:1}],dim:[{frets:[0,1,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],6:[{frets:[0,2,2,1,2,0],fingers:[0,2,3,1,4,0],barres:[],baseFret:1}],add9:[{frets:[0,2,2,1,0,2],fingers:[0,2,3,1,0,4],barres:[],baseFret:1}],9:[{frets:[0,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],11:[{frets:[0,2,0,1,3,0],fingers:[0,2,0,1,4,0],barres:[],baseFret:1}],13:[{frets:[0,2,0,1,2,2],fingers:[0,2,0,1,3,4],barres:[],baseFret:1}],m7b5:[{frets:[0,1,0,0,2,0],fingers:[0,1,0,0,2,0],barres:[],baseFret:1}]},F:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:1}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:1}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,-1,3,2,1,0],fingers:[0,0,3,2,1,0],barres:[],baseFret:1}],maj9:[{frets:[1,0,3,0,1,0],fingers:[1,0,3,0,2,0],barres:[],baseFret:1}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:1}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:1}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:1}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,-1,3,0,1,1],fingers:[0,0,3,0,1,1],barres:[1],baseFret:1}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:1}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:1}],6:[{frets:[1,-1,0,2,1,1],fingers:[1,0,0,3,1,1],barres:[1],baseFret:1}],add9:[{frets:[-1,-1,3,2,1,3],fingers:[0,0,3,2,1,4],barres:[],baseFret:1}],9:[{frets:[1,3,1,2,1,3],fingers:[1,3,1,2,1,4],barres:[1],baseFret:1}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:1}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:1}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}]},"F#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},Gb:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},G:{maj:[{frets:[3,2,0,0,0,3],fingers:[2,1,0,0,0,3],barres:[],baseFret:1}],m:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],7:[{frets:[3,2,0,0,0,1],fingers:[3,2,0,0,0,1],barres:[],baseFret:1}],maj7:[{frets:[3,2,0,0,0,2],fingers:[3,1,0,0,0,2],barres:[],baseFret:1}],maj9:[{frets:[3,0,0,0,0,2],fingers:[2,0,0,0,0,1],barres:[],baseFret:1}],maj13:[{frets:[3,2,0,0,2,2],fingers:[3,1,0,0,2,2],barres:[2],baseFret:1}],m7:[{frets:[3,1,0,0,3,0],fingers:[2,1,0,0,3,0],barres:[],baseFret:1}],m9:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],m11:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],m6:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],sus2:[{frets:[3,0,0,0,3,3],fingers:[1,0,0,0,2,3],barres:[],baseFret:1}],sus4:[{frets:[3,3,0,0,1,3],fingers:[2,3,0,0,1,4],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],6:[{frets:[3,2,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],add9:[{frets:[3,0,0,0,0,3],fingers:[2,0,0,0,0,3],barres:[],baseFret:1}],9:[{frets:[3,2,0,1,0,1],fingers:[3,2,0,1,0,1],barres:[1],baseFret:1}],11:[{frets:[3,2,0,1,3,1],fingers:[3,2,0,1,4,1],barres:[1],baseFret:1}],13:[{frets:[3,2,0,1,0,5],fingers:[2,1,0,1,0,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}]},"G#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},Ab:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},A:{maj:[{frets:[-1,0,2,2,2,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],m:[{frets:[-1,0,2,2,1,0],fingers:[0,0,2,3,1,0],barres:[],baseFret:1}],7:[{frets:[-1,0,2,0,2,0],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}],maj7:[{frets:[-1,0,2,1,2,0],fingers:[0,0,2,1,3,0],barres:[],baseFret:1}],maj9:[{frets:[-1,0,2,1,0,0],fingers:[0,0,2,1,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,0,2,1,2,4],fingers:[0,0,2,1,3,4],barres:[],baseFret:1}],m7:[{frets:[-1,0,2,0,1,0],fingers:[0,0,2,0,1,0],barres:[],baseFret:1}],m9:[{frets:[-1,0,2,0,1,3],fingers:[0,0,2,0,1,4],barres:[],baseFret:1}],m11:[{frets:[-1,0,0,0,1,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],m6:[{frets:[-1,0,2,2,1,2],fingers:[0,0,2,3,1,4],barres:[],baseFret:1}],sus2:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],sus4:[{frets:[-1,0,2,2,3,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],dim:[{frets:[-1,0,1,2,1,-1],fingers:[0,0,1,3,2,0],barres:[],baseFret:1}],6:[{frets:[-1,0,2,2,2,2],fingers:[0,0,1,1,1,1],barres:[2],baseFret:1}],add9:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],9:[{frets:[-1,0,2,4,2,3],fingers:[0,0,1,3,1,2],barres:[2],baseFret:1}],11:[{frets:[-1,0,0,0,2,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],13:[{frets:[-1,0,2,0,2,4],fingers:[0,0,1,0,2,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,0,1,0,1,-1],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}]},"A#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},Bb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},B:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:2}],7:[{frets:[-1,2,1,2,0,2],fingers:[0,2,1,3,0,4],barres:[],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:2}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:2}],m7:[{frets:[-1,2,0,2,0,2],fingers:[0,1,0,2,0,3],barres:[],baseFret:1}],m9:[{frets:[-1,2,0,2,2,2],fingers:[0,1,0,2,3,4],barres:[],baseFret:1}],m11:[{frets:[-1,2,0,2,0,0],fingers:[0,1,0,2,0,0],barres:[],baseFret:1}],m6:[{frets:[-1,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:2}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:2}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,2,1,2,2,2],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],11:[{frets:[-1,2,1,2,0,0],fingers:[0,2,1,3,0,0],barres:[],baseFret:1}],13:[{frets:[-1,2,1,2,2,4],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:2}]}};function gk(r){return{"C":"C#","D":"Db","D":"D#","E":"Eb","F":"F#","G":"Gb","G":"G#","A":"Ab","A":"A#","B":"Bb"}[r]||r.replace("","#").replace("","b")}function bk(r){return{major:"maj",major7:"maj7",major9:"maj9",major11:"maj11",major13:"maj13",major6:"6",minor:"m",min:"m",minor7:"m7",min7:"m7",minor9:"m9",min9:"m9",minor11:"m11",min11:"m11",minor13:"m13",min13:"m13",minor6:"m6",min6:"m6",dom7:"7",dominant7:"7",dom9:"9",dominant9:"9",dom11:"11",dominant11:"11",dom13:"13",dominant13:"13",suspended2:"sus2",suspended4:"sus4",diminished:"dim","half-diminished":"m7b5",halfDiminished7:"m7b5","m75":"m7b5",sixth:"6",ninth:"9",added9:"add9"}[r]||r}function nw(r,e){const t=gk(r),s=bk(e),a=mk[t];if(!a)return null;const o=a[s];return!o||o.length===0?null:o[0]}const vk=({root:r,quality:e,color:t="#6366f1",onClick:s,onDoubleClick:a})=>{const o=w2(),u=nw(r,e),c=re.useRef(0),f=re.useRef(null),d=Ks(`${r}${e==="maj"?"":e}`),m=()=>{const A=Date.now(),k=A-c.current;f.current&&(clearTimeout(f.current),f.current=null),k<300&&k>0?(c.current=0,a&&a()):(c.current=A,f.current=setTimeout(()=>{s&&s(),f.current=null},300))},y=re.useRef(0),_=re.useRef(null),b=A=>{A.preventDefault(),A.stopPropagation();const k=Date.now(),T=k-y.current;_.current&&(clearTimeout(_.current),_.current=null),T<300&&T>0?(y.current=0,a&&a()):(y.current=k,_.current=setTimeout(()=>{s&&s(),_.current=null},300))};if(!u)return x.jsxs("div",{className:"flex items-center justify-center text-text-muted text-xs py-4",children:["No guitar diagram available for ",r,e]});const N=s||a;return x.jsxs("div",{className:`flex flex-col items-center ${N?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,onClick:N?m:void 0,onTouchEnd:N?b:void 0,onTouchStart:N?A=>A.stopPropagation():void 0,children:[x.jsx("span",{className:`${o?"text-xs":"text-[11px]"} font-bold mb-1 text-center`,style:{backgroundColor:"transparent",color:t,padding:"4px 12px",borderRadius:"10px",border:`2px solid ${t}`},children:d}),x.jsx("svg",{viewBox:"0 0 100 120",className:`w-full ${o?"max-w-[110px]":"max-w-[120px]"}`,style:{minHeight:o?110:120,pointerEvents:"none"},children:x.jsx(yk,{chord:u,color:t})})]})},yk=({chord:r,color:e})=>{const{frets:t,fingers:s,barres:a,baseFret:o}=r,u=20,c=25,f=12,d=18,m=4,y=6,_=4.5,b=Array.from({length:y},(R,D)=>u+D*f),N=Array.from({length:m+1},(R,D)=>c+D*d),A=o===1,k=f*(y-1)+16,T=d*m+8;return x.jsxs(x.Fragment,{children:[x.jsx("rect",{x:u-8,y:c-4,width:k,height:T,fill:"#3d2817",rx:3}),A?x.jsx("rect",{x:u-2,y:c-3,width:f*(y-1)+4,height:4,fill:"#f5f5f5",rx:1}):x.jsx("text",{x:u-14,y:c+d/2+4,fontSize:"12",fill:"#e0e0e0",textAnchor:"middle",fontWeight:"700",children:o}),N.map((R,D)=>x.jsx("line",{x1:u,y1:R,x2:u+f*(y-1),y2:R,stroke:"#b8b8b8",strokeWidth:D===0&&!A?2:1},`fret-${D}`)),b.map((R,D)=>x.jsx("line",{x1:R,y1:c,x2:R,y2:c+d*m,stroke:"#d4d4d4",strokeWidth:1.2+(5-D)*.25},`string-${D}`)),a.map((R,D)=>{const F=t.map((O,z)=>({fret:O,idx:z})).filter(({fret:O})=>O===R);if(F.length<2)return null;const B=Math.min(...F.map(O=>O.idx)),W=Math.max(...F.map(O=>O.idx)),Y=c+(R-.5)*d;return x.jsx("rect",{x:b[B]-_,y:Y-_,width:b[W]-b[B]+_*2,height:_*2,fill:"white",stroke:e,strokeWidth:2,rx:_},`barre-${D}`)}),t.map((R,D)=>{const F=b[D];if(R===-1)return x.jsx("text",{x:F,y:c-10,fontSize:"14",fill:"#ff6b6b",textAnchor:"middle",fontWeight:"bold",children:""},`mute-${D}`);if(R===0)return x.jsx("circle",{cx:F,cy:c-8,r:4,fill:"none",stroke:"var(--color-text-secondary)",strokeWidth:1.5},`open-${D}`);const B=a.includes(R),W=s[D];if(B){const O=t.findIndex(z=>z===R);if(D!==O)return null}const Y=c+(R-.5)*d;return x.jsxs("g",{children:[x.jsx("circle",{cx:F,cy:Y,r:_,fill:"white",stroke:e,strokeWidth:2}),W>0&&!B&&x.jsx("text",{x:F,y:Y+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:W})]},`finger-${D}`)}),a.map((R,D)=>{const F=t.map((O,z)=>({fret:O,idx:z})).filter(({fret:O})=>O===R);if(F.length<2)return null;const B=Math.min(...F.map(O=>O.idx)),W=c+(R-.5)*d,Y=s[B];return Y>0?x.jsx("text",{x:b[B],y:W+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:Y},`barre-finger-${D}`):null})]})},q5=({notes:r,rootNote:e,color:t="#6366f1",width:s,numerals:a,onNotePlay:o,compact:u=!1})=>{const c=w2(),f=W=>{const Y=W.replace(/[0-9]/g,"");let O=Y[0],z="";Y.includes("")||Y.includes("#")?z="":(Y.includes("")||Y.includes("b"))&&(z="");let M={C:-6,D:-5,E:-4,F:-3,G:-2,A:-1,B:0}[O]??0;const V="CDEFGAB".indexOf(O),H="CDEFGAB".indexOf(e[0]);return V<H&&H-V>3&&(M+=7),{line:M,accidental:z}},d=W=>{o&&o(W,4)},y=s||(u?180:c?280:340),_=u?70:c?110:115,b=u?6:12,N=b,A=_*(u?.28:.22),k=u?7:10,T=Math.max(80,y-b*2),R=A+(u?32:50),D=A+(u?42:62),F=r.map((W,Y)=>{const{line:O,accidental:z}=f(W),Q=u?40:60,M=T-Q-15,V=u?18:25,H=M/Math.max(r.length-1,1),X=Math.max(H,V),he=X*Math.max(r.length-1,0),I=(M-he)/2,se=N+Q+I+Y*X,ie=A-O*k/2;return{note:W,x:se,y:ie,line:O,accidental:z,needsLedgerLines:O<-4||O>4}}),B=W=>{const Y=[];if(W.line<-4)for(let z=-6;z>=W.line;z-=2)z<-4&&Y.push(x.jsx("line",{x1:W.x-28/2,y1:A-z*k/2,x2:W.x+28/2,y2:A-z*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-below-${z}`));else if(W.line>4)for(let z=6;z<=W.line;z+=2)z>4&&Y.push(x.jsx("line",{x1:W.x-28/2,y1:A-z*k/2,x2:W.x+28/2,y2:A-z*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-above-${z}`));return Y};return x.jsx("div",{className:`flex justify-center items-center ${u?"":"w-full"}`,children:x.jsxs("svg",{viewBox:`0 0 ${y} ${_}`,className:u?"":"w-full",style:{minHeight:u?60:c?95:100,width:u?y:void 0},children:[[-2,-1,0,1,2].map(W=>x.jsx("line",{x1:N,y1:A-W*k,x2:N+T,y2:A-W*k,stroke:"#777",strokeWidth:u?1.5:2},`staff-${W}`)),x.jsx("text",{x:N-(u?2:3),y:A+(u?14:20),fontSize:u?"38":c?"56":"62",fill:t,fontFamily:"serif",fontWeight:"bold",children:""}),F.map(W=>B(W)),F.map((W,Y)=>x.jsxs("g",{children:[W.accidental&&x.jsx("text",{x:W.x-(u?12:20),y:W.y+(u?3:5),fontSize:u?"12":c?"18":"20",fill:"#ccc",fontFamily:"serif",fontWeight:"bold",children:W.accidental}),o&&x.jsx("circle",{cx:W.x,cy:W.y,r:16,fill:"transparent",style:{cursor:"pointer"},onClick:()=>d(W.note),onTouchEnd:O=>{O.preventDefault(),d(W.note)}}),x.jsx("ellipse",{cx:W.x,cy:W.y,rx:u?5:7,ry:u?4:5.5,fill:Y===0?t:"#ddd",stroke:Y===0?t:"#ddd",strokeWidth:1,style:o?{cursor:"pointer"}:void 0,className:o?"hover:opacity-80 active:scale-110 transition-transform":""}),x.jsx("text",{x:W.x,y:R,fontSize:u?"7":c?"10":"11",fill:"#999",textAnchor:"middle",fontWeight:"600",children:W.note}),a&&a[Y]&&x.jsx("text",{x:W.x,y:D,fontSize:u?"7":c?"9":"10",fill:Y===0?t:"#777",textAnchor:"middle",fontWeight:"700",children:a[Y]})]},`note-${Y}`))]})})},wm=({variant:r="sidebar",onScrollChange:e})=>{const{selectedChord:t,selectedKey:s,chordPanelVisible:a,toggleChordPanel:o,selectedSectionId:u,selectedSlotId:c,addChordToSlot:f,setSelectedChord:d,selectNextSlotAfter:m,setSelectedSlot:y,timelineVisible:_,openTimeline:b,setChordPanelGuitarExpanded:N,setChordPanelVoicingsExpanded:A}=En(),k=fd(),[T,R]=re.useState(null),[D,F]=re.useState([]),[B,W]=re.useState(320),[Y,O]=re.useState(!1),z=re.useRef(0),Q=r==="drawer",[M,V]=re.useState(t),H=t??M,{isMobile:X}=Wh(),he=r==="landscape-panel"||r==="landscape-expanded",I=r==="landscape-panel",se=!Q&&!he&&B<360,ie=!Q&&!he&&B<290,[de,pe]=re.useState(!1),[G,j]=re.useState(!1),[P,ee]=re.useState(!X||he),[J,oe]=re.useState(0),fe=4,me=xe=>{pe(xe),A(xe)},Se=xe=>{ee(xe),N(xe)};re.useEffect(()=>{N(P),A(de)},[]);const ye=re.useRef(0),Fe=re.useRef(0),[Ye,Je]=re.useState(0),[ct,$]=re.useState(null),Re=re.useRef(null),pt=re.useCallback(xe=>{Re.current&&clearTimeout(Re.current),$(xe),Re.current=setTimeout(()=>{$(null)},3e3)},[]),Ke=re.useRef(null),Le=re.useRef(null),tt=re.useRef(null),Ue=re.useRef(null),ot=xe=>{if(xe.current&&Ue.current){const Pe=Ue.current,Xe=xe.current.offsetTop-Pe.offsetTop;Pe.scrollTo({top:Xe,behavior:"smooth"})}},it=re.useCallback(xe=>{!Q||!X||(ye.current=xe.touches[0].clientY,Fe.current=xe.touches[0].clientY)},[Q,X]),Be=re.useCallback(xe=>{if(!Q||!X)return;Fe.current=xe.touches[0].clientY;const Pe=Fe.current-ye.current;Pe>0&&Je(Math.min(Pe,150))},[Q,X]),at=re.useCallback(()=>{!Q||!X||(Ye>80?(Je(300),setTimeout(()=>{o(),Je(0)},200)):Je(0))},[Q,X,Ye,o]),nt=()=>{if(!H)return"Chord Details";const xe=T||H.quality;return Ks(xe==="major"||xe==="maj"?H.root:xe==="minor"||xe==="m"?`${H.root}m`:xe==="diminished"||xe==="dim"?`${H.root}dim`:`${H.root}${xe}`)},ut=re.useCallback((xe,Pe)=>{Q3(xe,Pe)},[]),gt={maj:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',major:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',maj7:"Smooth and sophisticated, the major 7th adds a dreamy, floating quality. Think Burt Bacharach, neo-soul, and late-night jazz.",maj9:"Builds on maj7 with a crystalline 9th. Modern, airy, and introspective  perfect for R&B ballads and ambient textures.",maj13:"The full major palette: lush, orchestral, and complex. Great for endings or when you want maximum harmonic richness.",6:"Warm and vintage  the major 6th has an old-Hollywood or country sweetness. Softer resolution than maj7.",add9:"A major triad with added sparkle from the 9th, but no 7th. Clean, modern, and ubiquitous in pop and worship music.",7:"The dominant 7th creates bluesy tension begging for resolution. The engine behind the ii-V-I and the soul of rock & blues.",9:"Dominant 7 with a colorful 9th. Funky, jazzy, and sophisticated  think Stevie Wonder, Earth Wind & Fire, and neo-soul.",11:"Suspended, modal quality over dominant function. Creates an open, unresolved tension that floats before landing.",13:"The dominant chord at its richest: soulful 13th on top of bluesy 7th. Perfect for jazz turnarounds and R&B grooves.",m7:"The workhorse minor chord: soulful, laid-back, and endlessly versatile. The default for jazz ii chords and R&B grooves.",minor:"The basic minor triad: melancholic, introspective, and emotionally direct. Minor keys are built on this sound.",m9:"Lush and cinematic  adds depth and width to the minor sound. Evokes late-night cityscapes and emotional introspection.",m11:"Spacious and modal, with an open 11th suspension. Great for grooves, vamps, and creating atmospheric tension.",m6:"Bittersweet with a film-noir quality. The 6th adds sophistication to minor  a nice alternative to m7 for tonic chords.",sus2:"Neither major nor minor  the open 2nd creates an ambient, neutral quality. Ubiquitous in pop, rock, and modern worship.",sus4:"Suspended tension from the 4th wants to fall to the 3rd. Creates expectation and movement  classic resolution technique.",dim:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",diminished:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",m7b5:"Half-diminished: dark and sophisticated. The natural ii chord in minor keys, essential for minor ii-V-i progressions."},dt=["maj","7","maj7","maj9","maj13","6","13","m7","m9","m11","m6","sus2","sus4","dim","m7b5","add9","9","11"],xt=xe=>{if(!H?.root)return"-";const Pe=hn=>hn.replace(/[\d]/g,"").replace(//,"b").replace(//,"#"),lt={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},Xe=lt[Pe(H.root)],Mt=lt[Pe(xe)];if(Xe===void 0||Mt===void 0)return"-";const pn=(Mt-Xe+12)%12;return{0:"R",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[pn]??"-"},ht=re.useCallback(xe=>{Q||(xe.preventDefault(),O(!0))},[Q]);re.useEffect(()=>{if(!Y||Q)return;const xe=Xe=>{const Mt=window.innerWidth-Xe.clientX;W(Math.max(280,Math.min(500,Mt)))},Pe=Xe=>{if(Xe.touches.length===1){const Mt=window.innerWidth-Xe.touches[0].clientX;W(Math.max(280,Math.min(500,Mt)))}},lt=()=>{O(!1)};return document.addEventListener("mousemove",xe),document.addEventListener("mouseup",lt),document.addEventListener("touchmove",Pe),document.addEventListener("touchend",lt),()=>{document.removeEventListener("mousemove",xe),document.removeEventListener("mouseup",lt),document.removeEventListener("touchmove",Pe),document.removeEventListener("touchend",lt)}},[Y,Q]),re.useEffect(()=>{t&&V(t)},[t]),re.useEffect(()=>{R(null),F([]),oe(0)},[H?.root,H?.quality]),re.useEffect(()=>{he&&P&&Ke.current&&Ue.current&&setTimeout(()=>{if(Ke.current&&Ue.current){const xe=Ke.current,Pe=Ue.current,lt=xe.offsetTop-Pe.offsetTop;Pe.scrollTo({top:lt+35,behavior:"smooth"})}},100)},[he,P]),re.useEffect(()=>{if(!Q||!e)return;const xe=Ue.current;if(!xe)return;const Pe=()=>{const lt=xe.scrollHeight-xe.scrollTop-xe.clientHeight<20;e(lt)};return xe.addEventListener("scroll",Pe),Pe(),()=>xe.removeEventListener("scroll",Pe)},[Q,e]);const rn=H&&k[H.root]||"#6366f1",Vt=D.length>0?D:H?.notes||[],bt=su(Vt,J),jt=X_(Vt),qt=xe=>{const Pe=Date.now();if(Pe-z.current<300||(z.current=Pe,!H))return;const lt=ka(H.root,xe),Xe=su(lt,J);xi(Xe),R(xe),F(lt)},yt=xe=>{if(z.current=0,!_){b();return}if(!H||!u||!c){H&&(!u||!c)&&pt("Select a slot on the timeline first");return}const Pe=ka(H.root,xe),lt=h5(H.root,xe,Pe,J),Xe={...H,quality:xe,symbol:lt,notes:Pe,inversion:J};f(Xe,u,c),m(u,c)||(y(u,c),d(Xe))},Ft=re.useCallback(()=>{if(!H)return;const xe=T||H.quality,Pe=ka(H.root,xe),lt=su(Pe,J);xi(lt)},[H,T,J]),vt=re.useCallback(()=>{if(!_){b();return}if(!H||!u||!c){H&&(!u||!c)&&pt("Select a slot on the timeline first");return}const xe=T||H.quality,Pe=ka(H.root,xe),lt=h5(H.root,xe,Pe,J),Xe={...H,quality:xe,symbol:lt,notes:Pe,inversion:J};f(Xe,u,c),m(u,c)||(y(u,c),d(Xe))},[H,T,J,u,c,f,m,y,d,_,b]),Dt=re.useRef(0),dn=re.useRef(null),St=re.useCallback(xe=>{if(!H)return;xe.preventDefault(),xe.stopPropagation();const Pe=Date.now(),lt=Pe-Dt.current;dn.current&&(clearTimeout(dn.current),dn.current=null),lt<300&&lt>0?(Dt.current=0,vt()):(Dt.current=Pe,dn.current=setTimeout(()=>{Ft(),dn.current=null},300))},[H,Ft,vt]),mt=()=>{if(!H)return{extensions:[],description:""};let xe=H.numeral;if(xe&&xe.includes("(")){const lt=xe.match(/^(.+?)\s*\(/);lt&&(xe=lt[1].trim())}return{I:{extensions:["maj","maj7","maj9","maj13","6"],description:"The tonic  your home base and resting point. This is where phrases resolve and songs often begin and end. Its stability makes it perfect for choruses and moments of arrival."},IV:{extensions:["maj","maj7","maj9","maj13","6"],description:'The subdominant  warm, hopeful, and slightly floating. It gently pulls away from home without creating urgency. Great for pre-choruses and that "lifting" feeling before a chorus.'},V:{extensions:["maj","7","9","11","sus4","13"],description:`The dominant  maximum tension wanting to resolve back to I. This chord creates expectation and forward motion. It's the "question" that begs for an "answer."`},ii:{extensions:["m","m7","m9","m11","m6"],description:"The supertonic  a natural setup chord that leads smoothly to V or IV. It's the workhorse of the ii-V-I progression and adds sophistication to any verse."},iii:{extensions:["m","m7"],description:"The mediant  mysterious and chameleon-like. It can substitute for I (they share two notes) or lead to vi. Use it for unexpected color and emotional complexity."},vi:{extensions:["m","m7","m9","m11"],description:'The relative minor  emotional depth and melancholy without leaving the key. This is the "sad" chord in major keys and the foundation of countless pop progressions (vi-IV-I-V).'},"vii":{extensions:["dim","m75"],description:"The leading tone chord  highly unstable and restless. Every note wants to move somewhere, making it a powerful passing chord that pulls strongly toward I."},II:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of V)  borrowed tension that points toward V. Use it to create a dramatic runway before landing on V."},III:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of vi)  creates an unexpected dramatic pull toward vi. Perfect for adding tension before a minor chord moment."}}[xe||""]||{extensions:[],description:`This chord doesn't fit in the key of ${s}, but it may add color and interest to your progression.`}};if(!a)return Q?x.jsxs("div",{className:`w-full ${X?"h-10":"h-9"} flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-pointer touch-feedback active:bg-bg-tertiary`,onClick:o,onTouchStart:xe=>{ye.current=xe.touches[0].clientY,Fe.current=xe.touches[0].clientY},onTouchMove:xe=>{Fe.current=xe.touches[0].clientY},onTouchEnd:()=>{ye.current-Fe.current>30&&o()},title:"Swipe up or tap to open",children:[x.jsx("div",{className:"w-10 h-1 rounded-full bg-text-muted/40 mb-1.5"}),x.jsx("span",{className:`${X?"text-[10px]":"text-[9px]"} font-medium text-text-muted uppercase tracking-wider`,children:"Chord Details"})]}):x.jsx("button",{onClick:o,className:"h-full px-2 flex items-center justify-center bg-bg-secondary border-l border-border-subtle hover:bg-bg-tertiary transition-colors shrink-0",title:"Show chord details",children:x.jsx(FT,{size:18,className:"text-text-muted"})});const Rt=r==="landscape-panel",Oe=r==="landscape-expanded";return x.jsxs("div",{className:Oe||Rt?"h-full w-full flex flex-col bg-bg-secondary overflow-hidden":Q?`${X?"relative w-full":"fixed inset-x-3 bottom-[88px]"} ${X?"max-h-[60vh]":"max-h-[70vh]"} bg-bg-secondary ${X?"border-t-2 border-border-subtle":"border-2 border-border-subtle rounded-2xl"} shadow-2xl overflow-hidden ${X?"":"z-40"} flex`:"h-full flex bg-bg-secondary border-l border-border-subtle overflow-x-hidden",style:!Q&&!Rt&&!Oe?{width:B,minWidth:0,maxWidth:"100%"}:Q?{transform:Ye>0?`translateY(${Ye}px)`:void 0,opacity:Ye>0?Math.max(0,1-Ye/300):1,transition:Ye===0||Ye>=150?"all 0.2s ease-out":"none"}:void 0,children:[!Q&&!Rt&&x.jsx("div",{className:`w-3 flex items-center justify-center cursor-ew-resize hover:bg-bg-tertiary active:bg-accent-primary/20 transition-colors ${Y?"bg-accent-primary/20":""} relative z-[60] touch-none`,onMouseDown:ht,onTouchStart:ht,children:x.jsx(F3,{size:12,className:"text-text-muted"})}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0 relative",children:[Q&&X&&x.jsx("div",{className:"flex flex-col items-center shrink-0 cursor-grab active:cursor-grabbing",onTouchStart:it,onTouchMove:Be,onTouchEnd:at,children:x.jsx("div",{className:"pt-2 pb-0.5 flex flex-col items-center",children:x.jsx("div",{className:"w-10 h-1 rounded-full bg-text-muted/40"})})}),x.jsxs("div",{className:`${he?"px-3 py-2":X&&Q?"px-2 py-2":"px-4 py-3"} border-b border-border-subtle ${ie?"flex flex-col gap-2":"grid grid-cols-[1fr_auto_1fr] items-center gap-2"} shrink-0 ${Q?"bg-bg-secondary/80 backdrop-blur-md":""}`,children:[x.jsx("div",{className:`flex items-center min-w-0 ${ie?"justify-center":""}`,style:{gap:"8px"},children:I&&H?x.jsx(x.Fragment,{children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-xs font-bold cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all",style:{backgroundColor:"transparent",color:rn,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${rn}`},onClick:Ft,onDoubleClick:vt,children:nt()}),H.numeral&&x.jsx("span",{className:"text-sm font-serif italic text-text-muted shrink-0",children:Ks(H.numeral)}),x.jsxs("div",{className:"flex items-center shrink-0",title:"Chord inversion",children:[x.jsx("button",{onClick:()=>{const xe=Math.max(0,J-1);oe(xe);const Pe=su(Vt,xe);xi(Pe)},disabled:J<=0,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:x.jsx(Ih,{size:10})}),x.jsx("span",{className:"text-[9px] font-bold text-text-secondary w-3 text-center",children:J}),x.jsx("button",{onClick:()=>{const xe=Math.min(jt,J+1);oe(xe);const Pe=su(Vt,xe);xi(Pe)},disabled:J>=jt,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:x.jsx(Rh,{size:10})})]})]})}):x.jsx(x.Fragment,{children:x.jsxs("span",{className:`flex items-center shrink-0 min-w-0 ${H?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,style:H?{gap:"4px",backgroundColor:"transparent",color:rn,padding:"3px 8px",borderRadius:"6px",border:`1.5px solid ${rn}`}:{gap:"4px"},onClick:H?Ft:void 0,onDoubleClick:H?vt:void 0,onTouchEnd:H?St:void 0,onTouchStart:H?xe=>xe.stopPropagation():void 0,children:[x.jsx("span",{className:`${he?"text-lg":X?"text-sm":"text-xs sm:text-sm"} font-bold leading-none truncate`,children:X&&Q?nt():H?Ks(`${H.root}${(T||H.quality)==="maj"?"":" "+(T||H.quality)}`):"Chord Details"}),H?.numeral&&x.jsx("span",{className:`${he?"text-sm":"text-[10px]"} font-serif italic opacity-70 shrink-0`,children:Ks(H.numeral)})]})})}),!ie&&x.jsx("div",{className:"flex items-center justify-center",children:H&&!I&&x.jsxs("div",{className:"flex items-center bg-bg-tertiary/40 rounded-full px-0.5 ml-3",title:"Chord inversion - which note is in the bass",children:[x.jsx("button",{onClick:()=>{const xe=Math.max(0,J-1);oe(xe);const Pe=su(Vt,xe);xi(Pe)},disabled:J<=0,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous inversion",children:x.jsx(Ih,{size:8})}),x.jsx("span",{className:"text-[11px] font-semibold text-text-secondary min-w-[20px] text-center",children:$_(J)}),x.jsx("button",{onClick:()=>{const xe=Math.min(jt,J+1);oe(xe);const Pe=su(Vt,xe);xi(Pe)},disabled:J>=jt,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Next inversion",children:x.jsx(Rh,{size:8})})]})}),x.jsxs("div",{className:`flex items-center gap-2 shrink-0 ${ie?"justify-center w-full":"justify-end"}`,children:[H&&x.jsxs("button",{onClick:vt,className:`${ie?"flex-1 py-2":X?"px-3 py-1.5":"px-2.5 py-1"} bg-gradient-to-r from-accent-primary to-purple-600 hover:opacity-90 rounded-lg transition-all touch-feedback flex items-center justify-center gap-1.5 shadow-md shadow-accent-primary/20 active:scale-95`,title:"Add chord to timeline",children:[x.jsx(bu,{size:ie?16:X?14:12,className:"text-white"}),x.jsx("span",{className:`${ie?"text-sm":X?"text-xs":"text-[11px]"} font-semibold text-white`,children:"Add"})]}),!he&&x.jsx("button",{onClick:o,className:`${ie?"p-2 bg-bg-tertiary/60 rounded-lg":X?"p-2 min-w-[40px] min-h-[40px]":"p-1"} hover:bg-bg-tertiary rounded transition-colors touch-feedback flex items-center justify-center`,title:"Hide panel",children:x.jsx(U3,{size:ie||X?18:16,className:`text-text-muted ${X&&Q?"rotate-90":""}`})})]})]}),ct&&Po.createPortal(x.jsxs("div",{className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999] flex items-center gap-3 px-5 py-4 rounded-xl shadow-xl animate-in fade-in zoom-in-95 duration-150",style:{background:"linear-gradient(135deg, #1e1e28 0%, #282833 100%)",border:"1px solid rgba(245, 158, 11, 0.5)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(245, 158, 11, 0.3), 0 0 20px rgba(245, 158, 11, 0.15)"},children:[x.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center shrink-0",children:x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-amber-400",children:[x.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),x.jsx("path",{d:"M12 9v4"}),x.jsx("path",{d:"M12 17h.01"})]})}),x.jsxs("div",{className:"flex flex-col gap-0.5",children:[x.jsx("span",{className:"text-sm font-semibold text-text-primary",children:ct}),x.jsx("span",{className:"text-xs text-text-muted",children:"Tap a slot in the timeline to select it"})]})]}),document.body),H?x.jsxs("div",{ref:Ue,className:`flex-1 ${Oe?"flex flex-row overflow-hidden":"overflow-y-auto overflow-x-hidden"} min-h-0 overscroll-contain`,children:[!Oe&&x.jsxs("div",{className:`${X?"px-5 pt-4 pb-4":"px-5 py-4"} border-b border-border-subtle`,children:[x.jsx(pk,{highlightedNotes:bt,rootNote:H.root,bassNote:bt[0],color:rn,octave:fe,onNotePlay:ut}),x.jsx("div",{className:`${X?"mt-4":"mt-5"} w-full`,children:x.jsxs("div",{className:"grid gap-1",style:{gridTemplateColumns:`${X?"56px":"72px"} repeat(${bt.length}, minmax(0, 1fr))`},children:[x.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Notes"}),bt.map((xe,Pe)=>x.jsx("div",{className:`text-center ${X?"text-xs":"text-sm"} font-bold text-text-primary flex items-center justify-center`,style:{height:"16px"},children:xe},`note-${Pe}`)),x.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Absolute"}),bt.map((xe,Pe)=>x.jsx("div",{className:`text-center ${X?"text-[11px]":"text-xs"} text-text-primary font-semibold flex items-center justify-center`,style:{height:"16px"},children:xt(xe)},`abs-${Pe}`)),x.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Relative"}),bt.map((xe,Pe)=>x.jsx("div",{className:`text-center ${X?"text-[11px]":"text-xs"} text-text-secondary flex items-center justify-center`,style:{height:"16px"},children:Q_(s,xe).replace(/^1/,"R")},`rel-${Pe}`))]})})]}),x.jsxs("div",{className:`flex flex-col ${Oe?"flex-1 overflow-y-auto":""}`,children:[x.jsxs("div",{ref:Ke,className:`${he?"px-2 py-1":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[x.jsxs("button",{onClick:()=>{const xe=!P;Se(xe),xe&&setTimeout(()=>ot(Ke),50)},className:`w-full flex items-center justify-between ${P?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[x.jsx("h3",{className:`${I?"text-[9px]":X?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide whitespace-nowrap`,children:I?"Guitar & Suggested":`Guitar & Suggested Voicings for ${Ks(H.numeral||H.symbol)}`}),x.jsx(Hf,{size:I?8:X?14:12,className:`text-text-secondary transition-transform ${P?"rotate-180":""}`})]}),P&&x.jsx(x.Fragment,{children:x.jsxs("div",{className:`flex items-start ${I?"gap-1":"gap-2"} px-3`,style:{marginTop:I?"4px":"8px"},children:[x.jsxs("div",{className:"flex flex-col items-center shrink-0",style:{minWidth:I?"70px":"100px"},children:[x.jsx(vk,{root:H.root,quality:T||H.quality,color:rn,onClick:Ft,onDoubleClick:vt}),!I&&x.jsx("p",{className:`${X?"text-[10px]":"text-[9px]"} text-text-muted leading-relaxed text-center ${X?"mb-1 px-1":"mb-1 px-0.5"}`,style:{maxWidth:I?"70px":"100px"},children:gt[T||H.quality]||"Select a voicing to see its description."})]}),x.jsx("div",{className:"w-px bg-border-subtle self-stretch"}),x.jsx("div",{className:"flex-1 flex flex-col justify-start pl-1",children:mt().extensions.length>0?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:`grid ${I||se?"grid-cols-1":"grid-cols-2"}`,style:{gap:I?"3px":se?"4px":X?"6px":"5px",marginBottom:I?"2px":"4px",marginRight:se?"12px":void 0},children:mt().extensions.map(xe=>x.jsxs("button",{className:`relative group ${I?"px-1 py-0.5 text-[8px] min-h-[20px]":se?"px-2 py-1.5 text-[9px] min-h-[26px]":X?"px-2 py-2 text-xs min-h-[36px]":"px-1.5 py-1 text-[10px]"} rounded font-semibold transition-colors touch-feedback text-center`,style:{width:I?"60px":se?"70px":X?"80px":"70px",...T===xe?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#f0f0f5",border:"1px solid rgba(255,255,255,0.08)"}},onClick:()=>qt(xe),onDoubleClick:()=>yt(xe),children:[Ks(`${H.root}${xe}`),!X&&gt[xe]&&x.jsxs("span",{className:"pointer-events-none absolute -top-6 -translate-y-full left-1/2 -translate-x-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[gt[xe]?x.jsxs(x.Fragment,{children:[gt[xe],x.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},xe))}),!se&&x.jsx("div",{style:{marginTop:I?"2px":"6px"},children:x.jsx(q5,{notes:bt,rootNote:H.root,color:rn,numerals:bt.map(xe=>xt(xe)),onNotePlay:ut,compact:!0})})]}):x.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[x.jsx(q5,{notes:bt,rootNote:H.root,color:rn,numerals:bt.map(xe=>xt(xe)),onNotePlay:ut,compact:!1}),x.jsxs("p",{className:`${I?"text-[8px]":X?"text-[10px]":"text-[9px]"} text-text-muted italic text-center mt-1`,children:["Out of key  see ",x.jsx("span",{className:"font-semibold text-text-secondary",children:"Voicings"})," below"]})]})})]})})]}),x.jsxs("div",{ref:Le,className:`${Oe?"px-3 py-1":X?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[x.jsxs("button",{onClick:()=>{const xe=!de;me(xe),xe&&setTimeout(()=>ot(Le),50)},className:`w-full flex items-center justify-between ${de?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[x.jsx("h3",{className:`${I?"text-[9px]":X?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Voicings"}),x.jsx(Hf,{size:I?8:X?14:12,className:`text-text-secondary transition-transform ${de?"rotate-180":""}`})]}),de&&x.jsx("div",{className:`grid ${I?"grid-cols-4":X?"grid-cols-3":"grid-cols-2 sm:grid-cols-3"} ${I?"gap-2":X?"gap-3":"gap-2.5"}`,children:dt.map((xe,Pe)=>{const Xe=Pe%2===0?{left:"calc(100% + 10px)"}:{right:"calc(100% + 10px)"};return x.jsxs("button",{className:`relative group ${I?"px-1.5 py-1 min-h-[22px] text-[8px]":X?"px-3 py-3 min-h-[48px] text-xs":"px-2 py-1.5 text-[10px]"} rounded font-medium transition-colors touch-feedback`,style:T===xe?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#9898a6",border:"1px solid rgba(255,255,255,0.08)"},onClick:()=>qt(xe),onDoubleClick:()=>yt(xe),children:[xe,!X&&gt[xe]&&x.jsxs("span",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{...Xe,backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[gt[xe]?x.jsxs(x.Fragment,{children:[gt[xe],x.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},xe)})})]}),x.jsxs("div",{ref:tt,className:`${Oe?"px-3 py-1":X?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[x.jsxs("button",{onClick:()=>{const xe=!G;j(xe),xe&&setTimeout(()=>ot(tt),50)},className:`w-full flex items-center justify-between cursor-pointer ${G?"mb-3":"mb-0"} rounded-none`,style:{backgroundColor:"transparent"},children:[x.jsx("h3",{className:`${I?"text-[9px]":X?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Theory"}),x.jsx(Hf,{size:I?8:X?14:12,className:`text-text-secondary transition-transform ${G?"rotate-180":""}`})]}),G&&x.jsx("div",{className:`${X?"p-3":"p-4"} bg-bg-elevated rounded-none`,children:x.jsx("p",{className:`${X?"text-sm":"text-xs"} text-text-secondary leading-relaxed`,children:mt().description})})]})]}),X&&x.jsx("div",{className:"h-12 shrink-0"})]}):x.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-4",children:[x.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-accent-primary/20 to-purple-600/20 flex items-center justify-center border border-accent-primary/30",children:x.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-accent-primary",children:[x.jsx("circle",{cx:"8",cy:"18",r:"4"}),x.jsx("path",{d:"M12 18V2l7 4"})]})}),x.jsxs("div",{className:"text-center space-y-2",children:[x.jsx("p",{className:`${X?"text-base":"text-sm"} font-semibold text-text-primary`,children:"No chord selected"}),x.jsx("p",{className:`${X?"text-sm":"text-xs"} text-text-muted max-w-[200px]`,children:"Tap a chord on the wheel or select one from the timeline"})]})]})]})]})},xk="modulepreload",wk=function(r){return"/chord-wheel-writer/"+r},U5={},q1=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let f=function(d){return Promise.all(d.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=f(t.map(d=>{if(d=wk(d),d in U5)return;U5[d]=!0;const m=d.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${y}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":xk,m||(_.as="script"),_.crossOrigin="",_.href=d,c&&_.setAttribute("nonce",c),document.head.appendChild(_),m)return new Promise((b,N)=>{_.addEventListener("load",b),_.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},rw=()=>{const{currentSong:r,isPlaying:e,tempo:t,volume:s,setTempo:a,setVolume:o,instrument:u,setInstrument:c,isMuted:f,toggleMute:d,toggleLoop:m,isLooping:y,playingSectionId:_,selectedSectionId:b}=En(),{isMobile:N,isLandscape:A}=Wh(),[k,T]=re.useState(!1),[R,D]=re.useState(!1),[F,B]=re.useState(t.toString()),W=re.useRef(null),[Y,O]=re.useState(!1),z=re.useRef(null),Q=re.useRef(t),M=re.useRef(null);re.useEffect(()=>{b2(r)},[r]),re.useEffect(()=>{J3(t)},[t]),re.useEffect(()=>{g2(u)},[u]),re.useEffect(()=>{ew()},[y,r,_,b]),re.useEffect(()=>{q1(()=>Promise.resolve().then(()=>sk),void 0).then(P=>{T(!0),P.preloadAudio().finally(()=>T(!1))})},[]);const V=async()=>{try{await Yp(),e?(y2(),En.getState().setIsPlaying(!1)):(T(!0),await v2(),En.getState().setIsPlaying(!0))}catch(P){console.error("Playback error:",P)}finally{T(!1)}},H=P=>{x2(P)},X=()=>{m()},he=[{value:"piano",label:"Piano"},{value:"epiano",label:"Electric Piano"},{value:"organ",label:"Organ"},{value:"pad",label:"Pad"},{value:"guitar",label:"Guitar"}];he.find(P=>P.value===u)||c("piano");const I=P=>{const ee=he.findIndex(oe=>oe.value===u);if(ee===-1){c("piano");return}const J=P==="next"?(ee+1)%he.length:(ee-1+he.length)%he.length;c(he[J].value)},se=()=>{B(t.toString()),D(!0),setTimeout(()=>W.current?.focus(),0)},ie=()=>{const P=parseInt(F,10);!isNaN(P)&&P>=40&&P<=240?a(P):B(t.toString()),D(!1)},de=P=>{P.key==="Enter"?ie():P.key==="Escape"&&(B(t.toString()),D(!1))},pe=P=>{z.current=P.touches[0].clientX,Q.current=t,O(!1),M.current=setTimeout(()=>{M.current=null},150)},G=P=>{if(z.current===null)return;const J=P.touches[0].clientX-z.current;if(Math.abs(J)>10){O(!0),M.current&&(clearTimeout(M.current),M.current=null);const oe=Math.round(J/3),fe=Math.min(240,Math.max(40,Q.current+oe));a(fe)}},j=()=>{!Y&&M.current&&(clearTimeout(M.current),se()),z.current=null,O(!1),M.current=null};return x.jsxs("div",{"data-playback-controls":!0,className:`${N&&A?"h-8":N?"h-11":"h-12"} bg-bg-elevated border-t border-border-subtle flex items-center justify-between ${N?"px-2 gap-1":"px-6"}`,children:[x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("button",{onClick:()=>H("prev"),className:`${N&&A?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:x.jsx(W3,{size:N&&A?12:16})}),x.jsx("button",{onClick:V,disabled:k,className:`${N&&A?"w-6 h-6":N?"w-8 h-8":"w-9 h-9"} rounded-full bg-accent-primary hover:bg-indigo-500 disabled:bg-accent-primary/50 flex items-center justify-center text-white shadow-md transition-all hover:scale-105 active:scale-95 touch-feedback`,children:k?x.jsx(P3,{size:N&&A?12:N?16:18,className:"animate-spin"}):e?x.jsx(H3,{size:N&&A?12:N?16:18,fill:"currentColor"}):x.jsx(Gh,{size:N&&A?12:N?16:18,fill:"currentColor",className:"ml-0.5"})}),x.jsx("button",{onClick:()=>H("next"),className:`${N&&A?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:x.jsx(Y3,{size:N&&A?12:16})}),!N&&x.jsx("button",{onClick:X,className:`p-1.5 transition-colors ml-1 ${y?"text-accent-primary":"text-text-secondary hover:text-text-primary"}`,title:"Loop Section",children:x.jsx(G3,{size:14})})]}),x.jsx("div",{className:"flex items-center",children:N?R?x.jsx("input",{ref:W,type:"number",inputMode:"numeric",value:F,onChange:P=>B(P.target.value),onBlur:ie,onKeyDown:de,className:`${A?"w-10 text-[9px] h-4":"w-12 text-[11px] h-5"} bg-bg-tertiary border border-accent-primary rounded-sm px-1 text-center text-text-primary font-medium focus:outline-none`,min:40,max:240}):x.jsxs("div",{onTouchStart:pe,onTouchMove:G,onTouchEnd:j,onClick:se,className:`${A?"text-[9px] px-1.5 h-4":"text-[11px] px-2 h-5"} font-medium ${Y?"text-accent-primary":"text-text-secondary"} hover:text-text-primary transition-colors touch-feedback whitespace-nowrap flex items-center cursor-ew-resize select-none`,children:[t," ",x.jsx("span",{className:`${Y?"text-accent-primary/70":"text-text-muted"} ml-0.5`,children:"BPM"})]}):x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"text-text-secondary font-medium",children:"Tempo"}),x.jsx("input",{type:"number",value:t,onChange:P=>a(Number(P.target.value)),className:"w-14 bg-bg-tertiary border border-border-subtle rounded px-2 py-1 text-center text-text-primary text-[11px] font-medium",min:40,max:240}),x.jsx("span",{className:"text-text-muted",children:"BPM"})]})}),x.jsxs("div",{className:`flex items-center ${N?"gap-1.5":"gap-4"}`,children:[x.jsxs("div",{className:"flex items-center gap-1",children:[!N&&x.jsxs("div",{className:"flex items-center rounded bg-bg-tertiary/60 border border-border-subtle/70 h-7",children:[x.jsx("button",{onClick:()=>I("prev"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-l transition-colors flex items-center",title:"Previous instrument",children:x.jsx(Ih,{size:12})}),x.jsx("button",{onClick:()=>I("next"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-r transition-colors flex items-center",title:"Next instrument",children:x.jsx(Rh,{size:12})})]}),N&&!A&&x.jsx(rd,{size:14,className:"text-text-muted"}),x.jsx("select",{value:u,onChange:P=>c(P.target.value),className:`bg-bg-tertiary border border-border-subtle rounded ${N&&A?"px-3 py-1 h-6 text-[7px] min-w-[60px]":N?"px-1.5 h-7 text-[11px] min-w-[70px]":"px-2 h-7 text-[10px] min-w-[130px]"} text-text-secondary focus:outline-none focus:border-accent-primary cursor-pointer`,children:he.map(P=>x.jsx("option",{value:P.value,children:P.label},P.value))})]}),x.jsxs("div",{className:`flex items-center ${N?"":"gap-2 w-28"}`,children:[x.jsx("button",{onClick:d,className:`${N?"p-1.5":"p-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center rounded`,title:f?"Unmute":"Mute",children:f||s===0?x.jsx(tk,{size:N?16:14}):x.jsx(ag,{size:N?16:14})}),!N&&x.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f?0:s,onChange:P=>{f&&d(),o(Number(P.target.value))},className:`w-full h-1 bg-bg-tertiary rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:bg-accent-primary [&::-webkit-slider-thumb]:rounded-full ${f?"opacity-50":""}`})]})]})]})};function _k(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return re.useMemo(()=>s=>{e.forEach(a=>a(s))},e)}const Xp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Yh(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function _2(r){return"nodeType"in r}function Wi(r){var e,t;return r?Yh(r)?r:_2(r)&&(e=(t=r.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function S2(r){const{Document:e}=Wi(r);return r instanceof e}function Ad(r){return Yh(r)?!1:r instanceof Wi(r).HTMLElement}function sw(r){return r instanceof Wi(r).SVGElement}function Xh(r){return r?Yh(r)?r.document:_2(r)?S2(r)?r:Ad(r)||sw(r)?r.ownerDocument:document:document:document}const Ho=Xp?re.useLayoutEffect:re.useEffect;function N2(r){const e=re.useRef(r);return Ho(()=>{e.current=r}),re.useCallback(function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e.current==null?void 0:e.current(...s)},[])}function Sk(){const r=re.useRef(null),e=re.useCallback((s,a)=>{r.current=setInterval(s,a)},[]),t=re.useCallback(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[]);return[e,t]}function ad(r,e){e===void 0&&(e=[r]);const t=re.useRef(r);return Ho(()=>{t.current!==r&&(t.current=r)},e),t}function Cd(r,e){const t=re.useRef();return re.useMemo(()=>{const s=r(t.current);return t.current=s,s},[...e])}function vp(r){const e=N2(r),t=re.useRef(null),s=re.useCallback(a=>{a!==t.current&&e?.(a,t.current),t.current=a},[]);return[t,s]}function ug(r){const e=re.useRef();return re.useEffect(()=>{e.current=r},[r]),e.current}let _m={};function Td(r,e){return re.useMemo(()=>{if(e)return e;const t=_m[r]==null?0:_m[r]+1;return _m[r]=t,r+"-"+t},[r,e])}function iw(r){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return s.reduce((o,u)=>{const c=Object.entries(u);for(const[f,d]of c){const m=o[f];m!=null&&(o[f]=m+r*d)}return o},{...e})}}const Ah=iw(1),od=iw(-1);function Nk(r){return"clientX"in r&&"clientY"in r}function A2(r){if(!r)return!1;const{KeyboardEvent:e}=Wi(r.target);return e&&r instanceof e}function Ak(r){if(!r)return!1;const{TouchEvent:e}=Wi(r.target);return e&&r instanceof e}function hg(r){if(Ak(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:t}=r.touches[0];return{x:e,y:t}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:t}=r.changedTouches[0];return{x:e,y:t}}}return Nk(r)?{x:r.clientX,y:r.clientY}:null}const ld=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:t}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:t}=r;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(r){if(r)return[ld.Translate.toString(r),ld.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:t,easing:s}=r;return e+" "+t+"ms "+s}}}),H5="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ck(r){return r.matches(H5)?r:r.querySelector(H5)}const Tk={display:"none"};function kk(r){let{id:e,value:t}=r;return Xn.createElement("div",{id:e,style:Tk},t)}function jk(r){let{id:e,announcement:t,ariaLiveType:s="assertive"}=r;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Xn.createElement("div",{id:e,style:a,role:"status","aria-live":s,"aria-atomic":!0},t)}function Ek(){const[r,e]=re.useState("");return{announce:re.useCallback(s=>{s!=null&&e(s)},[]),announcement:r}}const aw=re.createContext(null);function Mk(r){const e=re.useContext(aw);re.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function Lk(){const[r]=re.useState(()=>new Set),e=re.useCallback(s=>(r.add(s),()=>r.delete(s)),[r]);return[re.useCallback(s=>{let{type:a,event:o}=s;r.forEach(u=>{var c;return(c=u[a])==null?void 0:c.call(u,o)})},[r]),e]}const Ok={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Dk={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Rk(r){let{announcements:e=Dk,container:t,hiddenTextDescribedById:s,screenReaderInstructions:a=Ok}=r;const{announce:o,announcement:u}=Ek(),c=Td("DndLiveRegion"),[f,d]=re.useState(!1);if(re.useEffect(()=>{d(!0)},[]),Mk(re.useMemo(()=>({onDragStart(y){let{active:_}=y;o(e.onDragStart({active:_}))},onDragMove(y){let{active:_,over:b}=y;e.onDragMove&&o(e.onDragMove({active:_,over:b}))},onDragOver(y){let{active:_,over:b}=y;o(e.onDragOver({active:_,over:b}))},onDragEnd(y){let{active:_,over:b}=y;o(e.onDragEnd({active:_,over:b}))},onDragCancel(y){let{active:_,over:b}=y;o(e.onDragCancel({active:_,over:b}))}}),[o,e])),!f)return null;const m=Xn.createElement(Xn.Fragment,null,Xn.createElement(kk,{id:s,value:a.draggable}),Xn.createElement(jk,{id:c,announcement:u}));return t?Po.createPortal(m,t):m}var ks;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(ks||(ks={}));function yp(){}function G5(r,e){return re.useMemo(()=>({sensor:r,options:e??{}}),[r,e])}function Ik(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return re.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const ho=Object.freeze({x:0,y:0});function ow(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function lw(r,e){let{data:{value:t}}=r,{data:{value:s}}=e;return t-s}function Vk(r,e){let{data:{value:t}}=r,{data:{value:s}}=e;return s-t}function W5(r){let{left:e,top:t,height:s,width:a}=r;return[{x:e,y:t},{x:e+a,y:t},{x:e,y:t+s},{x:e+a,y:t+s}]}function cw(r,e){if(!r||r.length===0)return null;const[t]=r;return t[e]}function Y5(r,e,t){return e===void 0&&(e=r.left),t===void 0&&(t=r.top),{x:e+r.width*.5,y:t+r.height*.5}}const Fk=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=r;const a=Y5(e,e.left,e.top),o=[];for(const u of s){const{id:c}=u,f=t.get(c);if(f){const d=ow(Y5(f),a);o.push({id:c,data:{droppableContainer:u,value:d}})}}return o.sort(lw)},Bk=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=r;const a=W5(e),o=[];for(const u of s){const{id:c}=u,f=t.get(c);if(f){const d=W5(f),m=a.reduce((_,b,N)=>_+ow(d[N],b),0),y=Number((m/4).toFixed(4));o.push({id:c,data:{droppableContainer:u,value:y}})}}return o.sort(lw)};function zk(r,e){const t=Math.max(e.top,r.top),s=Math.max(e.left,r.left),a=Math.min(e.left+e.width,r.left+r.width),o=Math.min(e.top+e.height,r.top+r.height),u=a-s,c=o-t;if(s<a&&t<o){const f=e.width*e.height,d=r.width*r.height,m=u*c,y=m/(f+d-m);return Number(y.toFixed(4))}return 0}const Pk=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=r;const a=[];for(const o of s){const{id:u}=o,c=t.get(u);if(c){const f=zk(c,e);f>0&&a.push({id:u,data:{droppableContainer:o,value:f}})}}return a.sort(Vk)};function qk(r,e,t){return{...r,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function uw(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:ho}function Uk(r){return function(t){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((u,c)=>({...u,top:u.top+r*c.y,bottom:u.bottom+r*c.y,left:u.left+r*c.x,right:u.right+r*c.x}),{...t})}}const Hk=Uk(1);function Gk(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Wk(r,e,t){const s=Gk(e);if(!s)return r;const{scaleX:a,scaleY:o,x:u,y:c}=s,f=r.left-u-(1-a)*parseFloat(t),d=r.top-c-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),m=a?r.width/a:r.width,y=o?r.height/o:r.height;return{width:m,height:y,top:d,right:f+m,bottom:d+y,left:f}}const Yk={ignoreTransform:!1};function $h(r,e){e===void 0&&(e=Yk);let t=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:m}=Wi(r).getComputedStyle(r);d&&(t=Wk(t,d,m))}const{top:s,left:a,width:o,height:u,bottom:c,right:f}=t;return{top:s,left:a,width:o,height:u,bottom:c,right:f}}function X5(r){return $h(r,{ignoreTransform:!0})}function Xk(r){const e=r.innerWidth,t=r.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function $k(r,e){return e===void 0&&(e=Wi(r).getComputedStyle(r)),e.position==="fixed"}function Zk(r,e){e===void 0&&(e=Wi(r).getComputedStyle(r));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=e[a];return typeof o=="string"?t.test(o):!1})}function $p(r,e){const t=[];function s(a){if(e!=null&&t.length>=e||!a)return t;if(S2(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!Ad(a)||sw(a)||t.includes(a))return t;const o=Wi(r).getComputedStyle(a);return a!==r&&Zk(a,o)&&t.push(a),$k(a,o)?t:s(a.parentNode)}return r?s(r):t}function hw(r){const[e]=$p(r,1);return e??null}function Sm(r){return!Xp||!r?null:Yh(r)?r:_2(r)?S2(r)||r===Xh(r).scrollingElement?window:Ad(r)?r:null:null}function fw(r){return Yh(r)?r.scrollX:r.scrollLeft}function dw(r){return Yh(r)?r.scrollY:r.scrollTop}function fg(r){return{x:fw(r),y:dw(r)}}var zs;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(zs||(zs={}));function pw(r){return!Xp||!r?!1:r===document.scrollingElement}function mw(r){const e={x:0,y:0},t=pw(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},s={x:r.scrollWidth-t.width,y:r.scrollHeight-t.height},a=r.scrollTop<=e.y,o=r.scrollLeft<=e.x,u=r.scrollTop>=s.y,c=r.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:u,isRight:c,maxScroll:s,minScroll:e}}const Qk={x:.2,y:.2};function Kk(r,e,t,s,a){let{top:o,left:u,right:c,bottom:f}=t;s===void 0&&(s=10),a===void 0&&(a=Qk);const{isTop:d,isBottom:m,isLeft:y,isRight:_}=mw(r),b={x:0,y:0},N={x:0,y:0},A={height:e.height*a.y,width:e.width*a.x};return!d&&o<=e.top+A.height?(b.y=zs.Backward,N.y=s*Math.abs((e.top+A.height-o)/A.height)):!m&&f>=e.bottom-A.height&&(b.y=zs.Forward,N.y=s*Math.abs((e.bottom-A.height-f)/A.height)),!_&&c>=e.right-A.width?(b.x=zs.Forward,N.x=s*Math.abs((e.right-A.width-c)/A.width)):!y&&u<=e.left+A.width&&(b.x=zs.Backward,N.x=s*Math.abs((e.left+A.width-u)/A.width)),{direction:b,speed:N}}function Jk(r){if(r===document.scrollingElement){const{innerWidth:o,innerHeight:u}=window;return{top:0,left:0,right:o,bottom:u,width:o,height:u}}const{top:e,left:t,right:s,bottom:a}=r.getBoundingClientRect();return{top:e,left:t,right:s,bottom:a,width:r.clientWidth,height:r.clientHeight}}function gw(r){return r.reduce((e,t)=>Ah(e,fg(t)),ho)}function e7(r){return r.reduce((e,t)=>e+fw(t),0)}function t7(r){return r.reduce((e,t)=>e+dw(t),0)}function n7(r,e){if(e===void 0&&(e=$h),!r)return;const{top:t,left:s,bottom:a,right:o}=e(r);hw(r)&&(a<=0||o<=0||t>=window.innerHeight||s>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}const r7=[["x",["left","right"],e7],["y",["top","bottom"],t7]];class C2{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=$p(t),a=gw(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,u,c]of r7)for(const f of u)Object.defineProperty(this,f,{get:()=>{const d=c(s),m=a[o]-d;return this.rect[f]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Gf{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var a;(a=this.target)==null||a.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function s7(r){const{EventTarget:e}=Wi(r);return r instanceof e?r:Xh(r)}function Nm(r,e){const t=Math.abs(r.x),s=Math.abs(r.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var Ta;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(Ta||(Ta={}));function $5(r){r.preventDefault()}function i7(r){r.stopPropagation()}var In;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(In||(In={}));const bw={start:[In.Space,In.Enter],cancel:[In.Esc],end:[In.Space,In.Enter,In.Tab]},a7=(r,e)=>{let{currentCoordinates:t}=e;switch(r.code){case In.Right:return{...t,x:t.x+25};case In.Left:return{...t,x:t.x-25};case In.Down:return{...t,y:t.y+25};case In.Up:return{...t,y:t.y-25}}};class T2{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Gf(Xh(t)),this.windowListeners=new Gf(Wi(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ta.Resize,this.handleCancel),this.windowListeners.add(Ta.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ta.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&n7(s),t(ho)}handleKeyDown(e){if(A2(e)){const{active:t,context:s,options:a}=this.props,{keyboardCodes:o=bw,coordinateGetter:u=a7,scrollBehavior:c="smooth"}=a,{code:f}=e;if(o.end.includes(f)){this.handleEnd(e);return}if(o.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:d}=s.current,m=d?{x:d.left,y:d.top}:ho;this.referenceCoordinates||(this.referenceCoordinates=m);const y=u(e,{active:t,context:s.current,currentCoordinates:m});if(y){const _=od(y,m),b={x:0,y:0},{scrollableAncestors:N}=s.current;for(const A of N){const k=e.code,{isTop:T,isRight:R,isLeft:D,isBottom:F,maxScroll:B,minScroll:W}=mw(A),Y=Jk(A),O={x:Math.min(k===In.Right?Y.right-Y.width/2:Y.right,Math.max(k===In.Right?Y.left:Y.left+Y.width/2,y.x)),y:Math.min(k===In.Down?Y.bottom-Y.height/2:Y.bottom,Math.max(k===In.Down?Y.top:Y.top+Y.height/2,y.y))},z=k===In.Right&&!R||k===In.Left&&!D,Q=k===In.Down&&!F||k===In.Up&&!T;if(z&&O.x!==y.x){const M=A.scrollLeft+_.x,V=k===In.Right&&M<=B.x||k===In.Left&&M>=W.x;if(V&&!_.y){A.scrollTo({left:M,behavior:c});return}V?b.x=A.scrollLeft-M:b.x=k===In.Right?A.scrollLeft-B.x:A.scrollLeft-W.x,b.x&&A.scrollBy({left:-b.x,behavior:c});break}else if(Q&&O.y!==y.y){const M=A.scrollTop+_.y,V=k===In.Down&&M<=B.y||k===In.Up&&M>=W.y;if(V&&!_.x){A.scrollTo({top:M,behavior:c});return}V?b.y=A.scrollTop-M:b.y=k===In.Down?A.scrollTop-B.y:A.scrollTop-W.y,b.y&&A.scrollBy({top:-b.y,behavior:c});break}}this.handleMove(e,Ah(od(y,this.referenceCoordinates),b))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}T2.activators=[{eventName:"onKeyDown",handler:(r,e,t)=>{let{keyboardCodes:s=bw,onActivation:a}=e,{active:o}=t;const{code:u}=r.nativeEvent;if(s.start.includes(u)){const c=o.activatorNode.current;return c&&r.target!==c?!1:(r.preventDefault(),a?.({event:r.nativeEvent}),!0)}return!1}}];function Z5(r){return!!(r&&"distance"in r)}function Q5(r){return!!(r&&"delay"in r)}class k2{constructor(e,t,s){var a;s===void 0&&(s=s7(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:u}=o;this.props=e,this.events=t,this.document=Xh(u),this.documentListeners=new Gf(this.document),this.listeners=new Gf(s),this.windowListeners=new Gf(Wi(u)),this.initialCoordinates=(a=hg(o))!=null?a:ho,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ta.Resize,this.handleCancel),this.windowListeners.add(Ta.DragStart,$5),this.windowListeners.add(Ta.VisibilityChange,this.handleCancel),this.windowListeners.add(Ta.ContextMenu,$5),this.documentListeners.add(Ta.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Q5(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(Z5(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:a}=this.props;a(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ta.Click,i7,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ta.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:u,options:{activationConstraint:c}}=o;if(!a)return;const f=(t=hg(e))!=null?t:ho,d=od(a,f);if(!s&&c){if(Z5(c)){if(c.tolerance!=null&&Nm(d,c.tolerance))return this.handleCancel();if(Nm(d,c.distance))return this.handleStart()}if(Q5(c)&&Nm(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}e.cancelable&&e.preventDefault(),u(f)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===In.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const o7={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class j2 extends k2{constructor(e){const{event:t}=e,s=Xh(t.target);super(e,o7,s)}}j2.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const l7={move:{name:"mousemove"},end:{name:"mouseup"}};var dg;(function(r){r[r.RightClick=2]="RightClick"})(dg||(dg={}));class c7 extends k2{constructor(e){super(e,l7,Xh(e.event.target))}}c7.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:s}=e;return t.button===dg.RightClick?!1:(s?.({event:t}),!0)}}];const Am={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class u7 extends k2{constructor(e){super(e,Am)}static setup(){return window.addEventListener(Am.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Am.move.name,e)};function e(){}}}u7.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:s}=e;const{touches:a}=t;return a.length>1?!1:(s?.({event:t}),!0)}}];var Wf;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(Wf||(Wf={}));var xp;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(xp||(xp={}));function h7(r){let{acceleration:e,activator:t=Wf.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:u=5,order:c=xp.TreeOrder,pointerCoordinates:f,scrollableAncestors:d,scrollableAncestorRects:m,delta:y,threshold:_}=r;const b=d7({delta:y,disabled:!o}),[N,A]=Sk(),k=re.useRef({x:0,y:0}),T=re.useRef({x:0,y:0}),R=re.useMemo(()=>{switch(t){case Wf.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case Wf.DraggableRect:return a}},[t,a,f]),D=re.useRef(null),F=re.useCallback(()=>{const W=D.current;if(!W)return;const Y=k.current.x*T.current.x,O=k.current.y*T.current.y;W.scrollBy(Y,O)},[]),B=re.useMemo(()=>c===xp.TreeOrder?[...d].reverse():d,[c,d]);re.useEffect(()=>{if(!o||!d.length||!R){A();return}for(const W of B){if(s?.(W)===!1)continue;const Y=d.indexOf(W),O=m[Y];if(!O)continue;const{direction:z,speed:Q}=Kk(W,O,R,e,_);for(const M of["x","y"])b[M][z[M]]||(Q[M]=0,z[M]=0);if(Q.x>0||Q.y>0){A(),D.current=W,N(F,u),k.current=Q,T.current=z;return}}k.current={x:0,y:0},T.current={x:0,y:0},A()},[e,F,s,A,o,u,JSON.stringify(R),JSON.stringify(b),N,d,B,m,JSON.stringify(_)])}const f7={x:{[zs.Backward]:!1,[zs.Forward]:!1},y:{[zs.Backward]:!1,[zs.Forward]:!1}};function d7(r){let{delta:e,disabled:t}=r;const s=ug(e);return Cd(a=>{if(t||!s||!a)return f7;const o={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[zs.Backward]:a.x[zs.Backward]||o.x===-1,[zs.Forward]:a.x[zs.Forward]||o.x===1},y:{[zs.Backward]:a.y[zs.Backward]||o.y===-1,[zs.Forward]:a.y[zs.Forward]||o.y===1}}},[t,e,s])}function p7(r,e){const t=e!=null?r.get(e):void 0,s=t?t.node.current:null;return Cd(a=>{var o;return e==null?null:(o=s??a)!=null?o:null},[s,e])}function m7(r,e){return re.useMemo(()=>r.reduce((t,s)=>{const{sensor:a}=s,o=a.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,s)}));return[...t,...o]},[]),[r,e])}var cd;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(cd||(cd={}));var pg;(function(r){r.Optimized="optimized"})(pg||(pg={}));const K5=new Map;function g7(r,e){let{dragging:t,dependencies:s,config:a}=e;const[o,u]=re.useState(null),{frequency:c,measure:f,strategy:d}=a,m=re.useRef(r),y=k(),_=ad(y),b=re.useCallback(function(T){T===void 0&&(T=[]),!_.current&&u(R=>R===null?T:R.concat(T.filter(D=>!R.includes(D))))},[_]),N=re.useRef(null),A=Cd(T=>{if(y&&!t)return K5;if(!T||T===K5||m.current!==r||o!=null){const R=new Map;for(let D of r){if(!D)continue;if(o&&o.length>0&&!o.includes(D.id)&&D.rect.current){R.set(D.id,D.rect.current);continue}const F=D.node.current,B=F?new C2(f(F),F):null;D.rect.current=B,B&&R.set(D.id,B)}return R}return T},[r,o,t,y,f]);return re.useEffect(()=>{m.current=r},[r]),re.useEffect(()=>{y||b()},[t,y]),re.useEffect(()=>{o&&o.length>0&&u(null)},[JSON.stringify(o)]),re.useEffect(()=>{y||typeof c!="number"||N.current!==null||(N.current=setTimeout(()=>{b(),N.current=null},c))},[c,y,b,...s]),{droppableRects:A,measureDroppableContainers:b,measuringScheduled:o!=null};function k(){switch(d){case cd.Always:return!1;case cd.BeforeDragging:return t;default:return!t}}}function vw(r,e){return Cd(t=>r?t||(typeof e=="function"?e(r):r):null,[e,r])}function b7(r,e){return vw(r,e)}function v7(r){let{callback:e,disabled:t}=r;const s=N2(e),a=re.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,t]);return re.useEffect(()=>()=>a?.disconnect(),[a]),a}function Zp(r){let{callback:e,disabled:t}=r;const s=N2(e),a=re.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[t]);return re.useEffect(()=>()=>a?.disconnect(),[a]),a}function y7(r){return new C2($h(r),r)}function J5(r,e,t){e===void 0&&(e=y7);const[s,a]=re.useState(null);function o(){a(f=>{if(!r)return null;if(r.isConnected===!1){var d;return(d=f??t)!=null?d:null}const m=e(r);return JSON.stringify(f)===JSON.stringify(m)?f:m})}const u=v7({callback(f){if(r)for(const d of f){const{type:m,target:y}=d;if(m==="childList"&&y instanceof HTMLElement&&y.contains(r)){o();break}}}}),c=Zp({callback:o});return Ho(()=>{o(),r?(c?.observe(r),u?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),u?.disconnect())},[r]),s}function x7(r){const e=vw(r);return uw(r,e)}const ey=[];function w7(r){const e=re.useRef(r),t=Cd(s=>r?s&&s!==ey&&r&&e.current&&r.parentNode===e.current.parentNode?s:$p(r):ey,[r]);return re.useEffect(()=>{e.current=r},[r]),t}function _7(r){const[e,t]=re.useState(null),s=re.useRef(r),a=re.useCallback(o=>{const u=Sm(o.target);u&&t(c=>c?(c.set(u,fg(u)),new Map(c)):null)},[]);return re.useEffect(()=>{const o=s.current;if(r!==o){u(o);const c=r.map(f=>{const d=Sm(f);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,fg(d)]):null}).filter(f=>f!=null);t(c.length?new Map(c):null),s.current=r}return()=>{u(r),u(o)};function u(c){c.forEach(f=>{const d=Sm(f);d?.removeEventListener("scroll",a)})}},[a,r]),re.useMemo(()=>r.length?e?Array.from(e.values()).reduce((o,u)=>Ah(o,u),ho):gw(r):ho,[r,e])}function ty(r,e){e===void 0&&(e=[]);const t=re.useRef(null);return re.useEffect(()=>{t.current=null},e),re.useEffect(()=>{const s=r!==ho;s&&!t.current&&(t.current=r),!s&&t.current&&(t.current=null)},[r]),t.current?od(r,t.current):ho}function S7(r){re.useEffect(()=>{if(!Xp)return;const e=r.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},r.map(e=>{let{sensor:t}=e;return t}))}function N7(r,e){return re.useMemo(()=>r.reduce((t,s)=>{let{eventName:a,handler:o}=s;return t[a]=u=>{o(u,e)},t},{}),[r,e])}function yw(r){return re.useMemo(()=>r?Xk(r):null,[r])}const ny=[];function A7(r,e){e===void 0&&(e=$h);const[t]=r,s=yw(t?Wi(t):null),[a,o]=re.useState(ny);function u(){o(()=>r.length?r.map(f=>pw(f)?s:new C2(e(f),f)):ny)}const c=Zp({callback:u});return Ho(()=>{c?.disconnect(),u(),r.forEach(f=>c?.observe(f))},[r]),a}function C7(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return Ad(e)?e:r}function T7(r){let{measure:e}=r;const[t,s]=re.useState(null),a=re.useCallback(d=>{for(const{target:m}of d)if(Ad(m)){s(y=>{const _=e(m);return y?{...y,width:_.width,height:_.height}:_});break}},[e]),o=Zp({callback:a}),u=re.useCallback(d=>{const m=C7(d);o?.disconnect(),m&&o?.observe(m),s(m?e(m):null)},[e,o]),[c,f]=vp(u);return re.useMemo(()=>({nodeRef:c,rect:t,setRef:f}),[t,c,f])}const k7=[{sensor:j2,options:{}},{sensor:T2,options:{}}],j7={current:{}},U1={draggable:{measure:X5},droppable:{measure:X5,strategy:cd.WhileDragging,frequency:pg.Optimized},dragOverlay:{measure:$h}};class Yf extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const E7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Yf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:yp},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:U1,measureDroppableContainers:yp,windowRect:null,measuringScheduled:!1},M7={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:yp,draggableNodes:new Map,over:null,measureDroppableContainers:yp},Qp=re.createContext(M7),xw=re.createContext(E7);function L7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Yf}}}function O7(r,e){switch(e.type){case ks.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case ks.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case ks.DragEnd:case ks.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ks.RegisterDroppable:{const{element:t}=e,{id:s}=t,a=new Yf(r.droppable.containers);return a.set(s,t),{...r,droppable:{...r.droppable,containers:a}}}case ks.SetDroppableDisabled:{const{id:t,key:s,disabled:a}=e,o=r.droppable.containers.get(t);if(!o||s!==o.key)return r;const u=new Yf(r.droppable.containers);return u.set(t,{...o,disabled:a}),{...r,droppable:{...r.droppable,containers:u}}}case ks.UnregisterDroppable:{const{id:t,key:s}=e,a=r.droppable.containers.get(t);if(!a||s!==a.key)return r;const o=new Yf(r.droppable.containers);return o.delete(t),{...r,droppable:{...r.droppable,containers:o}}}default:return r}}function D7(r){let{disabled:e}=r;const{active:t,activatorEvent:s,draggableNodes:a}=re.useContext(Qp),o=ug(s),u=ug(t?.id);return re.useEffect(()=>{if(!e&&!s&&o&&u!=null){if(!A2(o)||document.activeElement===o.target)return;const c=a.get(u);if(!c)return;const{activatorNode:f,node:d}=c;if(!f.current&&!d.current)return;requestAnimationFrame(()=>{for(const m of[f.current,d.current]){if(!m)continue;const y=Ck(m);if(y){y.focus();break}}})}},[s,e,a,u,o]),null}function R7(r,e){let{transform:t,...s}=e;return r!=null&&r.length?r.reduce((a,o)=>o({transform:a,...s}),t):t}function I7(r){return re.useMemo(()=>({draggable:{...U1.draggable,...r?.draggable},droppable:{...U1.droppable,...r?.droppable},dragOverlay:{...U1.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function V7(r){let{activeNode:e,measure:t,initialRect:s,config:a=!0}=r;const o=re.useRef(!1),{x:u,y:c}=typeof a=="boolean"?{x:a,y:a}:a;Ho(()=>{if(!u&&!c||!e){o.current=!1;return}if(o.current||!s)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const m=t(d),y=uw(m,s);if(u||(y.x=0),c||(y.y=0),o.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const _=hw(d);_&&_.scrollBy({top:y.y,left:y.x})}},[e,u,c,s,t])}const ww=re.createContext({...ho,scaleX:1,scaleY:1});var wc;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(wc||(wc={}));const F7=re.memo(function(e){var t,s,a,o;let{id:u,accessibility:c,autoScroll:f=!0,children:d,sensors:m=k7,collisionDetection:y=Pk,measuring:_,modifiers:b,...N}=e;const A=re.useReducer(O7,void 0,L7),[k,T]=A,[R,D]=Lk(),[F,B]=re.useState(wc.Uninitialized),W=F===wc.Initialized,{draggable:{active:Y,nodes:O,translate:z},droppable:{containers:Q}}=k,M=Y!=null?O.get(Y):null,V=re.useRef({initial:null,translated:null}),H=re.useMemo(()=>{var St;return Y!=null?{id:Y,data:(St=M?.data)!=null?St:j7,rect:V}:null},[Y,M]),X=re.useRef(null),[he,I]=re.useState(null),[se,ie]=re.useState(null),de=ad(N,Object.values(N)),pe=Td("DndDescribedBy",u),G=re.useMemo(()=>Q.getEnabled(),[Q]),j=I7(_),{droppableRects:P,measureDroppableContainers:ee,measuringScheduled:J}=g7(G,{dragging:W,dependencies:[z.x,z.y],config:j.droppable}),oe=p7(O,Y),fe=re.useMemo(()=>se?hg(se):null,[se]),me=dn(),Se=b7(oe,j.draggable.measure);V7({activeNode:Y!=null?O.get(Y):null,config:me.layoutShiftCompensation,initialRect:Se,measure:j.draggable.measure});const ye=J5(oe,j.draggable.measure,Se),Fe=J5(oe?oe.parentElement:null),Ye=re.useRef({activatorEvent:null,active:null,activeNode:oe,collisionRect:null,collisions:null,droppableRects:P,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:Q,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Je=Q.getNodeFor((t=Ye.current.over)==null?void 0:t.id),ct=T7({measure:j.dragOverlay.measure}),$=(s=ct.nodeRef.current)!=null?s:oe,Re=W?(a=ct.rect)!=null?a:ye:null,pt=!!(ct.nodeRef.current&&ct.rect),Ke=x7(pt?null:ye),Le=yw($?Wi($):null),tt=w7(W?Je??oe:null),Ue=A7(tt),ot=R7(b,{transform:{x:z.x-Ke.x,y:z.y-Ke.y,scaleX:1,scaleY:1},activatorEvent:se,active:H,activeNodeRect:ye,containerNodeRect:Fe,draggingNodeRect:Re,over:Ye.current.over,overlayNodeRect:ct.rect,scrollableAncestors:tt,scrollableAncestorRects:Ue,windowRect:Le}),it=fe?Ah(fe,z):null,Be=_7(tt),at=ty(Be),nt=ty(Be,[ye]),ut=Ah(ot,at),gt=Re?Hk(Re,ot):null,dt=H&&gt?y({active:H,collisionRect:gt,droppableRects:P,droppableContainers:G,pointerCoordinates:it}):null,xt=cw(dt,"id"),[ht,rn]=re.useState(null),Vt=pt?ot:Ah(ot,nt),bt=qk(Vt,(o=ht?.rect)!=null?o:null,ye),jt=re.useRef(null),qt=re.useCallback((St,mt)=>{let{sensor:Rt,options:Oe}=mt;if(X.current==null)return;const xe=O.get(X.current);if(!xe)return;const Pe=St.nativeEvent,lt=new Rt({active:X.current,activeNode:xe,event:Pe,options:Oe,context:Ye,onAbort(Mt){if(!O.get(Mt))return;const{onDragAbort:sn}=de.current,hn={id:Mt};sn?.(hn),R({type:"onDragAbort",event:hn})},onPending(Mt,pn,sn,hn){if(!O.get(Mt))return;const{onDragPending:yn}=de.current,Qt={id:Mt,constraint:pn,initialCoordinates:sn,offset:hn};yn?.(Qt),R({type:"onDragPending",event:Qt})},onStart(Mt){const pn=X.current;if(pn==null)return;const sn=O.get(pn);if(!sn)return;const{onDragStart:hn}=de.current,en={activatorEvent:Pe,active:{id:pn,data:sn.data,rect:V}};Po.unstable_batchedUpdates(()=>{hn?.(en),B(wc.Initializing),T({type:ks.DragStart,initialCoordinates:Mt,active:pn}),R({type:"onDragStart",event:en}),I(jt.current),ie(Pe)})},onMove(Mt){T({type:ks.DragMove,coordinates:Mt})},onEnd:Xe(ks.DragEnd),onCancel:Xe(ks.DragCancel)});jt.current=lt;function Xe(Mt){return async function(){const{active:sn,collisions:hn,over:en,scrollAdjustedTranslate:yn}=Ye.current;let Qt=null;if(sn&&yn){const{cancelDrop:xn}=de.current;Qt={activatorEvent:Pe,active:sn,collisions:hn,delta:yn,over:en},Mt===ks.DragEnd&&typeof xn=="function"&&await Promise.resolve(xn(Qt))&&(Mt=ks.DragCancel)}X.current=null,Po.unstable_batchedUpdates(()=>{T({type:Mt}),B(wc.Uninitialized),rn(null),I(null),ie(null),jt.current=null;const xn=Mt===ks.DragEnd?"onDragEnd":"onDragCancel";if(Qt){const Sn=de.current[xn];Sn?.(Qt),R({type:xn,event:Qt})}})}}},[O]),yt=re.useCallback((St,mt)=>(Rt,Oe)=>{const xe=Rt.nativeEvent,Pe=O.get(Oe);if(X.current!==null||!Pe||xe.dndKit||xe.defaultPrevented)return;const lt={active:Pe};St(Rt,mt.options,lt)===!0&&(xe.dndKit={capturedBy:mt.sensor},X.current=Oe,qt(Rt,mt))},[O,qt]),Ft=m7(m,yt);S7(m),Ho(()=>{ye&&F===wc.Initializing&&B(wc.Initialized)},[ye,F]),re.useEffect(()=>{const{onDragMove:St}=de.current,{active:mt,activatorEvent:Rt,collisions:Oe,over:xe}=Ye.current;if(!mt||!Rt)return;const Pe={active:mt,activatorEvent:Rt,collisions:Oe,delta:{x:ut.x,y:ut.y},over:xe};Po.unstable_batchedUpdates(()=>{St?.(Pe),R({type:"onDragMove",event:Pe})})},[ut.x,ut.y]),re.useEffect(()=>{const{active:St,activatorEvent:mt,collisions:Rt,droppableContainers:Oe,scrollAdjustedTranslate:xe}=Ye.current;if(!St||X.current==null||!mt||!xe)return;const{onDragOver:Pe}=de.current,lt=Oe.get(xt),Xe=lt&&lt.rect.current?{id:lt.id,rect:lt.rect.current,data:lt.data,disabled:lt.disabled}:null,Mt={active:St,activatorEvent:mt,collisions:Rt,delta:{x:xe.x,y:xe.y},over:Xe};Po.unstable_batchedUpdates(()=>{rn(Xe),Pe?.(Mt),R({type:"onDragOver",event:Mt})})},[xt]),Ho(()=>{Ye.current={activatorEvent:se,active:H,activeNode:oe,collisionRect:gt,collisions:dt,droppableRects:P,draggableNodes:O,draggingNode:$,draggingNodeRect:Re,droppableContainers:Q,over:ht,scrollableAncestors:tt,scrollAdjustedTranslate:ut},V.current={initial:Re,translated:gt}},[H,oe,dt,gt,O,$,Re,P,Q,ht,tt,ut]),h7({...me,delta:z,draggingRect:gt,pointerCoordinates:it,scrollableAncestors:tt,scrollableAncestorRects:Ue});const vt=re.useMemo(()=>({active:H,activeNode:oe,activeNodeRect:ye,activatorEvent:se,collisions:dt,containerNodeRect:Fe,dragOverlay:ct,draggableNodes:O,droppableContainers:Q,droppableRects:P,over:ht,measureDroppableContainers:ee,scrollableAncestors:tt,scrollableAncestorRects:Ue,measuringConfiguration:j,measuringScheduled:J,windowRect:Le}),[H,oe,ye,se,dt,Fe,ct,O,Q,P,ht,ee,tt,Ue,j,J,Le]),Dt=re.useMemo(()=>({activatorEvent:se,activators:Ft,active:H,activeNodeRect:ye,ariaDescribedById:{draggable:pe},dispatch:T,draggableNodes:O,over:ht,measureDroppableContainers:ee}),[se,Ft,H,ye,T,pe,O,ht,ee]);return Xn.createElement(aw.Provider,{value:D},Xn.createElement(Qp.Provider,{value:Dt},Xn.createElement(xw.Provider,{value:vt},Xn.createElement(ww.Provider,{value:bt},d)),Xn.createElement(D7,{disabled:c?.restoreFocus===!1})),Xn.createElement(Rk,{...c,hiddenTextDescribedById:pe}));function dn(){const St=he?.autoScrollEnabled===!1,mt=typeof f=="object"?f.enabled===!1:f===!1,Rt=W&&!St&&!mt;return typeof f=="object"?{...f,enabled:Rt}:{enabled:Rt}}}),B7=re.createContext(null),ry="button",z7="Draggable";function P7(r){let{id:e,data:t,disabled:s=!1,attributes:a}=r;const o=Td(z7),{activators:u,activatorEvent:c,active:f,activeNodeRect:d,ariaDescribedById:m,draggableNodes:y,over:_}=re.useContext(Qp),{role:b=ry,roleDescription:N="draggable",tabIndex:A=0}=a??{},k=f?.id===e,T=re.useContext(k?ww:B7),[R,D]=vp(),[F,B]=vp(),W=N7(u,e),Y=ad(t);Ho(()=>(y.set(e,{id:e,key:o,node:R,activatorNode:F,data:Y}),()=>{const z=y.get(e);z&&z.key===o&&y.delete(e)}),[y,e]);const O=re.useMemo(()=>({role:b,tabIndex:A,"aria-disabled":s,"aria-pressed":k&&b===ry?!0:void 0,"aria-roledescription":N,"aria-describedby":m.draggable}),[s,b,A,k,N,m.draggable]);return{active:f,activatorEvent:c,activeNodeRect:d,attributes:O,isDragging:k,listeners:s?void 0:W,node:R,over:_,setNodeRef:D,setActivatorNodeRef:B,transform:T}}function q7(){return re.useContext(xw)}const U7="Droppable",H7={timeout:25};function G7(r){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:a}=r;const o=Td(U7),{active:u,dispatch:c,over:f,measureDroppableContainers:d}=re.useContext(Qp),m=re.useRef({disabled:t}),y=re.useRef(!1),_=re.useRef(null),b=re.useRef(null),{disabled:N,updateMeasurementsFor:A,timeout:k}={...H7,...a},T=ad(A??s),R=re.useCallback(()=>{if(!y.current){y.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{d(Array.isArray(T.current)?T.current:[T.current]),b.current=null},k)},[k]),D=Zp({callback:R,disabled:N||!u}),F=re.useCallback((O,z)=>{D&&(z&&(D.unobserve(z),y.current=!1),O&&D.observe(O))},[D]),[B,W]=vp(F),Y=ad(e);return re.useEffect(()=>{!D||!B.current||(D.disconnect(),y.current=!1,D.observe(B.current))},[B,D]),re.useEffect(()=>(c({type:ks.RegisterDroppable,element:{id:s,key:o,disabled:t,node:B,rect:_,data:Y}}),()=>c({type:ks.UnregisterDroppable,key:o,id:s})),[s]),re.useEffect(()=>{t!==m.current.disabled&&(c({type:ks.SetDroppableDisabled,id:s,key:o,disabled:t}),m.current.disabled=t)},[s,o,t,c]),{active:u,rect:_,isOver:f?.id===s,node:B,over:f,setNodeRef:W}}function E2(r,e,t){const s=r.slice();return s.splice(t<0?s.length+t:t,0,s.splice(e,1)[0]),s}function W7(r,e){return r.reduce((t,s,a)=>{const o=e.get(s);return o&&(t[a]=o),t},Array(r.length))}function T1(r){return r!==null&&r>=0}function Y7(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function X7(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}const k1={scaleX:1,scaleY:1},$7=r=>{var e;let{rects:t,activeNodeRect:s,activeIndex:a,overIndex:o,index:u}=r;const c=(e=t[a])!=null?e:s;if(!c)return null;const f=Z7(t,u,a);if(u===a){const d=t[o];return d?{x:a<o?d.left+d.width-(c.left+c.width):d.left-c.left,y:0,...k1}:null}return u>a&&u<=o?{x:-c.width-f,y:0,...k1}:u<a&&u>=o?{x:c.width+f,y:0,...k1}:{x:0,y:0,...k1}};function Z7(r,e,t){const s=r[e],a=r[e-1],o=r[e+1];return!s||!a&&!o?0:t<e?a?s.left-(a.left+a.width):o.left-(s.left+s.width):o?o.left-(s.left+s.width):s.left-(a.left+a.width)}const _w=r=>{let{rects:e,activeIndex:t,overIndex:s,index:a}=r;const o=E2(e,s,t),u=e[a],c=o[a];return!c||!u?null:{x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height}},Sw="Sortable",Nw=Xn.createContext({activeIndex:-1,containerId:Sw,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:_w,disabled:{draggable:!1,droppable:!1}});function Q7(r){let{children:e,id:t,items:s,strategy:a=_w,disabled:o=!1}=r;const{active:u,dragOverlay:c,droppableRects:f,over:d,measureDroppableContainers:m}=q7(),y=Td(Sw,t),_=c.rect!==null,b=re.useMemo(()=>s.map(W=>typeof W=="object"&&"id"in W?W.id:W),[s]),N=u!=null,A=u?b.indexOf(u.id):-1,k=d?b.indexOf(d.id):-1,T=re.useRef(b),R=!Y7(b,T.current),D=k!==-1&&A===-1||R,F=X7(o);Ho(()=>{R&&N&&m(b)},[R,b,N,m]),re.useEffect(()=>{T.current=b},[b]);const B=re.useMemo(()=>({activeIndex:A,containerId:y,disabled:F,disableTransforms:D,items:b,overIndex:k,useDragOverlay:_,sortedRects:W7(b,f),strategy:a}),[A,y,F.draggable,F.droppable,D,b,k,f,_,a]);return Xn.createElement(Nw.Provider,{value:B},e)}const K7=r=>{let{id:e,items:t,activeIndex:s,overIndex:a}=r;return E2(t,s,a).indexOf(e)},J7=r=>{let{containerId:e,isSorting:t,wasDragging:s,index:a,items:o,newIndex:u,previousItems:c,previousContainerId:f,transition:d}=r;return!d||!s||c!==o&&a===u?!1:t?!0:u!==a&&e===f},ej={duration:200,easing:"ease"},Aw="transform",tj=ld.Transition.toString({property:Aw,duration:0,easing:"linear"}),nj={roleDescription:"sortable"};function rj(r){let{disabled:e,index:t,node:s,rect:a}=r;const[o,u]=re.useState(null),c=re.useRef(t);return Ho(()=>{if(!e&&t!==c.current&&s.current){const f=a.current;if(f){const d=$h(s.current,{ignoreTransform:!0}),m={x:f.left-d.left,y:f.top-d.top,scaleX:f.width/d.width,scaleY:f.height/d.height};(m.x||m.y)&&u(m)}}t!==c.current&&(c.current=t)},[e,t,s,a]),re.useEffect(()=>{o&&u(null)},[o]),o}function sj(r){let{animateLayoutChanges:e=J7,attributes:t,disabled:s,data:a,getNewIndex:o=K7,id:u,strategy:c,resizeObserverConfig:f,transition:d=ej}=r;const{items:m,containerId:y,activeIndex:_,disabled:b,disableTransforms:N,sortedRects:A,overIndex:k,useDragOverlay:T,strategy:R}=re.useContext(Nw),D=ij(s,b),F=m.indexOf(u),B=re.useMemo(()=>({sortable:{containerId:y,index:F,items:m},...a}),[y,a,F,m]),W=re.useMemo(()=>m.slice(m.indexOf(u)),[m,u]),{rect:Y,node:O,isOver:z,setNodeRef:Q}=G7({id:u,data:B,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:W,...f}}),{active:M,activatorEvent:V,activeNodeRect:H,attributes:X,setNodeRef:he,listeners:I,isDragging:se,over:ie,setActivatorNodeRef:de,transform:pe}=P7({id:u,data:B,attributes:{...nj,...t},disabled:D.draggable}),G=_k(Q,he),j=!!M,P=j&&!N&&T1(_)&&T1(k),ee=!T&&se,J=ee&&P?pe:null,fe=P?J??(c??R)({rects:A,activeNodeRect:H,activeIndex:_,overIndex:k,index:F}):null,me=T1(_)&&T1(k)?o({id:u,items:m,activeIndex:_,overIndex:k}):F,Se=M?.id,ye=re.useRef({activeId:Se,items:m,newIndex:me,containerId:y}),Fe=m!==ye.current.items,Ye=e({active:M,containerId:y,isDragging:se,isSorting:j,id:u,index:F,items:m,newIndex:ye.current.newIndex,previousItems:ye.current.items,previousContainerId:ye.current.containerId,transition:d,wasDragging:ye.current.activeId!=null}),Je=rj({disabled:!Ye,index:F,node:O,rect:Y});return re.useEffect(()=>{j&&ye.current.newIndex!==me&&(ye.current.newIndex=me),y!==ye.current.containerId&&(ye.current.containerId=y),m!==ye.current.items&&(ye.current.items=m)},[j,me,y,m]),re.useEffect(()=>{if(Se===ye.current.activeId)return;if(Se!=null&&ye.current.activeId==null){ye.current.activeId=Se;return}const $=setTimeout(()=>{ye.current.activeId=Se},50);return()=>clearTimeout($)},[Se]),{active:M,activeIndex:_,attributes:X,data:B,rect:Y,index:F,newIndex:me,items:m,isOver:z,isSorting:j,isDragging:se,listeners:I,node:O,overIndex:k,over:ie,setNodeRef:G,setActivatorNodeRef:de,setDroppableNodeRef:Q,setDraggableNodeRef:he,transform:Je??fe,transition:ct()};function ct(){if(Je||Fe&&ye.current.newIndex===F)return tj;if(!(ee&&!A2(V)||!d)&&(j||Ye))return ld.Transition.toString({...d,property:Aw})}}function ij(r,e){var t,s;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(t=r?.draggable)!=null?t:e.draggable,droppable:(s=r?.droppable)!=null?s:e.droppable}}function wp(r){if(!r)return!1;const e=r.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const aj=[In.Down,In.Right,In.Up,In.Left],oj=(r,e)=>{let{context:{active:t,collisionRect:s,droppableRects:a,droppableContainers:o,over:u,scrollableAncestors:c}}=e;if(aj.includes(r.code)){if(r.preventDefault(),!t||!s)return;const f=[];o.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const _=a.get(y.id);if(_)switch(r.code){case In.Down:s.top<_.top&&f.push(y);break;case In.Up:s.top>_.top&&f.push(y);break;case In.Left:s.left>_.left&&f.push(y);break;case In.Right:s.left<_.left&&f.push(y);break}});const d=Bk({collisionRect:s,droppableRects:a,droppableContainers:f});let m=cw(d,"id");if(m===u?.id&&d.length>1&&(m=d[1].id),m!=null){const y=o.get(t.id),_=o.get(m),b=_?a.get(_.id):null,N=_?.node.current;if(N&&b&&y&&_){const k=$p(N).some((W,Y)=>c[Y]!==W),T=Cw(y,_),R=lj(y,_),D=k||!T?{x:0,y:0}:{x:R?s.width-b.width:0,y:R?s.height-b.height:0},F={x:b.left,y:b.top};return D.x&&D.y?F:od(F,D)}}}};function Cw(r,e){return!wp(r)||!wp(e)?!1:r.data.current.sortable.containerId===e.data.current.sortable.containerId}function lj(r,e){return!wp(r)||!wp(e)||!Cw(r,e)?!1:r.data.current.sortable.index<e.data.current.sortable.index}const sy={intro:{bg:"bg-purple-500/10",headers:"bg-purple-500/30 text-purple-100",border:"border-purple-500/30",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/10",headers:"bg-blue-500/30 text-blue-100",border:"border-blue-500/30",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/10",headers:"bg-cyan-500/30 text-cyan-100",border:"border-cyan-500/30",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/10",headers:"bg-amber-500/30 text-amber-100",border:"border-amber-500/30",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/10",headers:"bg-emerald-500/30 text-emerald-100",border:"border-emerald-500/30",accent:"bg-emerald-500"},outro:{bg:"bg-rose-500/10",headers:"bg-rose-500/30 text-rose-100",border:"border-rose-500/30",accent:"bg-rose-500"},custom:{bg:"bg-slate-500/10",headers:"bg-slate-500/30 text-slate-100",border:"border-slate-500/30",accent:"bg-slate-500"}},cj=60,iy=.35,uj=({section:r,onSelect:e,isActive:t,chordColors:s,measureWidth:a,isCompact:o})=>{const{attributes:u,listeners:c,setNodeRef:f,transform:d,transition:m,isDragging:y}=sj({id:r.id}),_={transform:ld.Transform.toString(d),transition:m},b=sy[r.type]||sy.custom,N=r.measures,k=Math.max(o?40:100,N.length*a),T=o?60:140;return o?x.jsxs("div",{ref:f,style:{..._,width:k,height:T},className:Et("relative flex flex-col rounded-lg overflow-hidden shrink-0 transition-all border cursor-pointer",b.bg,b.border,y?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-70 hover:scale-[1.02]",t?"ring-2 ring-white/30":""),onClick:e,...u,...c,children:[x.jsx("div",{className:Et("h-1.5 w-full",b.accent)}),x.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-1 py-1",children:[x.jsx("span",{className:"font-bold uppercase tracking-wide text-center leading-tight text-sm",children:r.type.charAt(0).toUpperCase()}),x.jsxs("span",{className:"text-[8px] font-mono text-white/40 mt-0.5",children:[N.length,"b"]})]})]}):x.jsxs("div",{ref:f,style:{..._,width:k,height:T},className:Et("relative flex flex-col pt-8 pb-2 rounded-xl overflow-hidden shrink-0 transition-all border group",b.bg,b.border,y?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-50",t?"ring-2 ring-white/20":""),children:[x.jsxs("div",{className:Et("absolute top-0 left-0 right-0 h-8 flex items-center justify-between px-3 select-none border-b border-white/5",b.headers,"cursor-grab active:cursor-grabbing"),...u,...c,children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(F3,{size:14,className:"opacity-50"}),x.jsx("span",{className:"font-bold text-xs uppercase tracking-wider truncate max-w-[100px]",children:r.name})]}),a>=70&&x.jsx("div",{className:"flex items-center gap-2 text-[10px] font-mono opacity-80",children:x.jsxs("span",{children:[N.length," bars"]})})]}),x.jsx("div",{className:"flex-1 flex px-2 pt-2 gap-1 overflow-hidden",onClick:e,children:N.map((R,D)=>x.jsxs("div",{className:"flex-1 min-w-[32px] h-full flex flex-col gap-1",children:[x.jsxs("div",{className:"h-4 flex items-end justify-between px-0.5 border-b border-white/10 pb-0.5",children:[x.jsx("span",{className:"text-[9px] font-mono text-white/30",children:D+1}),x.jsx("div",{className:"flex gap-0.5",children:R.beats.map((F,B)=>x.jsx("div",{className:"w-0.5 h-1.5 bg-white/20 rounded-full"},B))})]}),(()=>{const F=R.beats.filter(W=>W.chord),B=F.length;return B===0?x.jsx("div",{className:"flex-1 rounded bg-white/5 border border-dashed border-white/10 flex items-center justify-center",children:x.jsx("span",{className:"text-[10px] text-white/10",children:"-"})}):x.jsx("div",{className:"flex gap-0.5 flex-1 items-stretch",children:F.map(W=>{const Y=s[W.chord.root]||"#666",O=B<=2?"10px":B<=4?"8px":"7px",z=B<=2?"0 4px":"0 2px";return x.jsx("div",{className:"flex-1 min-w-0 rounded flex items-center justify-center font-bold shadow-sm truncate transition-all",style:{backgroundColor:"rgba(0, 0, 0, 0.3)",border:`2px solid ${Y}`,color:Y,fontSize:O,padding:z,minHeight:"24px"},title:W.chord.symbol,children:Ks(W.chord.symbol)},W.id)})})})()]},R.id))}),x.jsx("div",{className:"absolute inset-0 top-8 bg-black/0 hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 hover:opacity-100 pointer-events-none",children:x.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest text-white/80 bg-black/50 px-2 py-1 rounded backdrop-blur-sm",children:"Go to Section"})})]})},hj=()=>{const{currentSong:r,songMapVisible:e,toggleSongMap:t,setSelectedSlot:s,reorderSections:a,isPlaying:o,tempo:u,setTempo:c,instrument:f,setInstrument:d,isLooping:m,toggleLoop:y,playingSectionId:_}=En(),[b,N]=re.useState(!1),[A,k]=re.useState(1),{isMobile:T,isLandscape:R}=Wh(),D=fd(),F=r.sections.reduce((pe,G)=>pe+G.measures.length,0),W=r.sections.reduce((pe,G)=>{const P=(G.timeSignature||r.timeSignature)[0];return pe+G.measures.length*P},0)/u*60,Y=Math.floor(W/60),O=Math.floor(W%60),z=`${Y}:${O.toString().padStart(2,"0")}`,Q=cj*A,M=pe=>{k(Number(pe.target.value))},V=async()=>{try{await Yp(),o?(y2(),En.getState().setIsPlaying(!1)):(N(!0),await v2(),En.getState().setIsPlaying(!0))}catch(pe){console.error("Playback error:",pe)}finally{N(!1)}},H=pe=>{x2(pe)},X=()=>{y()},he=[{value:"piano",label:"Piano"},{value:"epiano",label:"E.Piano"},{value:"organ",label:"Organ"},{value:"pad",label:"Pad"},{value:"guitar",label:"Guitar"}],I=Ik(G5(j2,{activationConstraint:{distance:8}}),G5(T2,{coordinateGetter:oj})),se=pe=>{const{active:G,over:j}=pe;if(j&&G.id!==j.id){const P=r.sections.findIndex(J=>J.id===G.id),ee=r.sections.findIndex(J=>J.id===j.id);a(E2(r.sections,P,ee))}},[ie,de]=re.useState(0);return re.useEffect(()=>{if(!e||!o)return;const pe=()=>{const j=_i.position.toString().split(":"),P=parseFloat(j[0]),ee=parseFloat(j[1]),J=parseFloat(j[2]),oe=P*4+ee+J/4;let fe=0,me=0;const Se=16;for(const ye of r.sections){const Fe=ye.measures.length*4;if(oe<me+Fe){const Je=(oe-me)/Fe,ct=ye.measures.length*Q;fe+=Je*ct;break}else{const Ye=ye.measures.length*Q;fe+=Ye+Se,me+=Fe}}de(fe),requestAnimationFrame(pe)},G=requestAnimationFrame(pe);return()=>cancelAnimationFrame(G)},[e,o,r,Q]),re.useEffect(()=>{const pe=G=>{G.key==="Escape"&&t(!1)};return e&&window.addEventListener("keydown",pe),()=>window.removeEventListener("keydown",pe)},[e,t]),e?x.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col bg-black/80 backdrop-blur-md animate-in fade-in duration-200",style:{paddingTop:"max(20px, env(safe-area-inset-top))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))",paddingBottom:"max(16px, env(safe-area-inset-bottom))"},onClick:()=>t(!1),children:[x.jsxs("div",{className:Et("shrink-0 bg-transparent text-white transition-all",R?"px-4 py-1.5":"px-4 py-2"),onClick:pe=>pe.stopPropagation(),children:[x.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("h2",{className:Et("font-bold tracking-tight",R?"text-base":"text-lg"),children:"Song Map"}),x.jsx("span",{className:"text-white/40",children:""}),x.jsx("span",{className:Et("text-white/60 font-medium",R?"text-xs":"text-sm"),children:r.title})]}),x.jsx("button",{onClick:()=>t(!1),className:Et("bg-white/10 hover:bg-white/20 active:bg-white/30 rounded-full transition-all flex items-center justify-center active:scale-95",R?"w-7 h-7":"w-8 h-8"),children:x.jsx(sd,{size:R?14:16})})]}),x.jsx("div",{className:"flex justify-center mb-2",children:x.jsxs("div",{className:Et("flex items-center gap-2 text-white/50 bg-white/5 rounded-full px-3 py-1",R?"text-[9px]":"text-[10px]"),children:[x.jsx("span",{className:"font-mono",children:z}),x.jsx("span",{className:"w-1 h-1 rounded-full bg-white/30"}),x.jsxs("span",{children:[r.sections.length," sections"]}),x.jsx("span",{className:"w-1 h-1 rounded-full bg-white/30"}),x.jsxs("span",{children:[F," bars"]}),x.jsx("span",{className:"w-1 h-1 rounded-full bg-white/30"}),x.jsxs("span",{children:[r.tempo," BPM"]})]})}),x.jsx("div",{className:"flex justify-center",children:x.jsxs("div",{className:"flex items-center gap-2 bg-white/5 rounded-full px-2 py-1",children:[x.jsx("button",{onClick:()=>k(Math.max(.15,A-.1)),className:Et("flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 active:bg-white/30 text-white/70 hover:text-white transition-all active:scale-95",R?"w-5 h-5":"w-6 h-6"),children:x.jsx(sg,{size:R?10:12})}),x.jsx("div",{className:Et("relative flex items-center",R?"w-28 h-5":"w-32 h-6"),children:x.jsx("input",{type:"range",min:"0.15",max:"2",step:"0.05",value:A,onChange:M,className:Et("w-full bg-white/20 rounded-full appearance-none cursor-pointer h-1.5",`[&::-webkit-slider-thumb]:appearance-none
                                    [&::-webkit-slider-thumb]:bg-white
                                    [&::-webkit-slider-thumb]:rounded-full
                                    [&::-webkit-slider-thumb]:shadow-md
                                    [&::-webkit-slider-thumb]:shadow-black/30
                                    [&::-webkit-slider-thumb]:cursor-grab
                                    [&::-webkit-slider-thumb]:active:cursor-grabbing
                                    [&::-webkit-slider-thumb]:active:scale-110
                                    [&::-webkit-slider-thumb]:transition-transform
                                    [&::-webkit-slider-thumb]:hover:scale-110
                                    [&::-moz-range-thumb]:appearance-none
                                    [&::-moz-range-thumb]:bg-white
                                    [&::-moz-range-thumb]:rounded-full
                                    [&::-moz-range-thumb]:border-none
                                    [&::-moz-range-thumb]:shadow-md
                                    [&::-moz-range-thumb]:cursor-grab
                                    focus:outline-none`,R?"[&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:h-4":"[&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5 [&::-moz-range-thumb]:w-5 [&::-moz-range-thumb]:h-5"),style:{touchAction:"manipulation"}})}),x.jsx("button",{onClick:()=>k(Math.min(2,A+.1)),className:Et("flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 active:bg-white/30 text-white/70 hover:text-white transition-all active:scale-95",R?"w-5 h-5":"w-6 h-6"),children:x.jsx(bu,{size:R?10:12})}),x.jsxs("span",{className:Et("text-white/50 font-mono ml-1",R?"text-[9px]":"text-[10px]"),children:[Math.round(A*100),"%"]})]})})]}),x.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden px-4 flex items-center relative scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent",onClick:pe=>pe.stopPropagation(),children:x.jsxs("div",{className:Et("flex relative h-full items-center pt-2 pb-2 transition-all",A<iy?"gap-2 min-h-[80px]":"gap-4 min-h-[156px]"),children:[o&&x.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-[60] shadow-[0_0_12px_#ef4444] transition-transform duration-75 will-change-transform pointer-events-none",style:{transform:`translateX(${ie}px)`},children:x.jsx("div",{className:"absolute -top-1.5 -left-1.5 w-3.5 h-3.5 bg-red-500 rounded-full shadow-sm"})}),x.jsx(F7,{sensors:I,collisionDetection:Fk,onDragEnd:se,children:x.jsx(Q7,{items:r.sections.map(pe=>pe.id),strategy:$7,children:r.sections.map(pe=>x.jsx(uj,{section:pe,onSelect:()=>{pe.measures[0]?.beats[0]&&s(pe.id,pe.measures[0].beats[0].id),t(!1)},isActive:o&&r.sections.findIndex(G=>G.id===pe.id)===r.sections.findIndex(G=>G.id===_),chordColors:D,measureWidth:Q,isCompact:A<iy},pe.id))})})]})}),x.jsx("div",{className:Et("shrink-0 bg-bg-elevated border-t border-border-subtle z-[110] flex flex-col justify-center",R?"pb-0":T?"px-4 py-3 pb-6 gap-3":"px-6 py-3 pb-6"),onClick:pe=>pe.stopPropagation(),children:T&&!R?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{className:"flex items-center gap-3 mx-auto",children:[x.jsx("button",{onClick:()=>H("prev"),className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:x.jsx(W3,{size:22})}),x.jsx("button",{onClick:V,disabled:b,className:"w-12 h-12 rounded-full bg-accent-primary hover:bg-indigo-500 disabled:bg-accent-primary/50 flex items-center justify-center text-white shadow-md transition-all hover:scale-105 active:scale-95",children:b?x.jsx(P3,{size:24,className:"animate-spin"}):o?x.jsx(H3,{size:24,fill:"currentColor"}):x.jsx(Gh,{size:24,fill:"currentColor",className:"ml-0.5"})}),x.jsx("button",{onClick:()=>H("next"),className:"p-2 text-text-secondary hover:text-text-primary transition-colors",children:x.jsx(Y3,{size:22})})]})}),x.jsxs("div",{className:"flex items-center justify-between gap-3",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("button",{onClick:X,className:Et("p-2 rounded-full transition-colors",m?"text-accent-primary bg-accent-primary/10":"text-text-secondary hover:text-text-primary"),children:x.jsx(G3,{size:18})}),x.jsxs("div",{className:"flex items-center gap-1 bg-bg-tertiary rounded-lg border border-border-subtle p-1 pr-2",children:[x.jsx("button",{onClick:()=>c(Math.max(40,u-5)),className:"p-1 px-2 text-text-secondary hover:text-text-primary",children:x.jsx(sg,{size:14})}),x.jsxs("div",{className:"flex flex-col items-center min-w-[32px]",children:[x.jsx("span",{className:"text-[9px] uppercase tracking-wider text-text-muted font-bold leading-none",children:"BPM"}),x.jsx("span",{className:"text-sm font-mono font-medium text-text-primary leading-none",children:u})]}),x.jsx("button",{onClick:()=>c(Math.min(240,u+5)),className:"p-1 px-2 text-text-secondary hover:text-text-primary",children:x.jsx(bu,{size:14})})]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-7 h-7 rounded bg-bg-tertiary flex items-center justify-center text-text-muted shrink-0",children:x.jsx(rd,{size:14})}),x.jsx("select",{value:f,onChange:pe=>d(pe.target.value),className:"bg-bg-tertiary border border-border-subtle rounded-lg px-3 py-1.5 text-xs text-text-primary focus:outline-none focus:border-accent-primary cursor-pointer",children:he.map(pe=>x.jsx("option",{value:pe.value,children:pe.label},pe.value))})]})]})]}):x.jsx(rw,{})})]}):null},fj=({className:r="",size:e=24})=>x.jsx("div",{className:`relative flex items-center justify-center ${r}`,style:{width:e,height:e},children:x.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-full h-full overflow-visible",xmlns:"http://www.w3.org/2000/svg",children:[x.jsx("defs",{children:x.jsxs("linearGradient",{id:"rainbow-style",x1:"0%",y1:"100%",x2:"100%",y2:"0%",children:[x.jsx("stop",{offset:"0%",stopColor:"hsl(0, 90%, 65%)"}),"    ",x.jsx("stop",{offset:"20%",stopColor:"hsl(35, 95%, 60%)"}),"   ",x.jsx("stop",{offset:"40%",stopColor:"hsl(55, 95%, 55%)"}),"   ",x.jsx("stop",{offset:"60%",stopColor:"hsl(140, 90%, 50%)"}),"  ",x.jsx("stop",{offset:"80%",stopColor:"hsl(210, 90%, 55%)"}),"  ",x.jsx("stop",{offset:"100%",stopColor:"hsl(280, 85%, 60%)"})," "]})}),x.jsx("circle",{cx:"6",cy:"18",r:"3.5",fill:"url(#rainbow-style)",stroke:"none"}),x.jsx("circle",{cx:"18",cy:"16",r:"3.5",fill:"url(#rainbow-style)",stroke:"none"}),x.jsx("path",{d:"M9 18 V5 L21 3 V16",stroke:"url(#rainbow-style)",fill:"none"})]})});function er(r){"@babel/helpers - typeof";return er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(r)}var fo=Uint8Array,ca=Uint16Array,M2=Int32Array,L2=new fo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),O2=new fo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ay=new fo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tw=function(r,e){for(var t=new ca(31),s=0;s<31;++s)t[s]=e+=1<<r[s-1];for(var a=new M2(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},kw=Tw(L2,2),dj=kw.b,mg=kw.r;dj[28]=258,mg[258]=28;var pj=Tw(O2,0),oy=pj.r,gg=new ca(32768);for(var Cr=0;Cr<32768;++Cr){var vc=(Cr&43690)>>1|(Cr&21845)<<1;vc=(vc&52428)>>2|(vc&13107)<<2,vc=(vc&61680)>>4|(vc&3855)<<4,gg[Cr]=((vc&65280)>>8|(vc&255)<<8)>>1}var Xf=(function(r,e,t){for(var s=r.length,a=0,o=new ca(e);a<s;++a)r[a]&&++o[r[a]-1];var u=new ca(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(t){c=new ca(1<<e);var f=15-e;for(a=0;a<s;++a)if(r[a])for(var d=a<<4|r[a],m=e-r[a],y=u[r[a]-1]++<<m,_=y|(1<<m)-1;y<=_;++y)c[gg[y]>>f]=d}else for(c=new ca(s),a=0;a<s;++a)r[a]&&(c[a]=gg[u[r[a]-1]++]>>15-r[a]);return c}),vu=new fo(288);for(var Cr=0;Cr<144;++Cr)vu[Cr]=8;for(var Cr=144;Cr<256;++Cr)vu[Cr]=9;for(var Cr=256;Cr<280;++Cr)vu[Cr]=7;for(var Cr=280;Cr<288;++Cr)vu[Cr]=8;var _p=new fo(32);for(var Cr=0;Cr<32;++Cr)_p[Cr]=5;var mj=Xf(vu,9,0),gj=Xf(_p,5,0),jw=function(r){return(r+7)/8|0},bj=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new fo(r.subarray(e,t))},Sl=function(r,e,t){t<<=e&7;var s=e/8|0;r[s]|=t,r[s+1]|=t>>8},Vf=function(r,e,t){t<<=e&7;var s=e/8|0;r[s]|=t,r[s+1]|=t>>8,r[s+2]|=t>>16},Cm=function(r,e){for(var t=[],s=0;s<r.length;++s)r[s]&&t.push({s,f:r[s]});var a=t.length,o=t.slice();if(!a)return{t:Mw,l:0};if(a==1){var u=new fo(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(B,W){return B.f-W.f}),t.push({s:-1,f:25001});var c=t[0],f=t[1],d=0,m=1,y=2;for(t[0]={s:-1,f:c.f+f.f,l:c,r:f};m!=a-1;)c=t[t[d].f<t[y].f?d++:y++],f=t[d!=m&&t[d].f<t[y].f?d++:y++],t[m++]={s:-1,f:c.f+f.f,l:c,r:f};for(var _=o[0].s,s=1;s<a;++s)o[s].s>_&&(_=o[s].s);var b=new ca(_+1),N=bg(t[m-1],b,0);if(N>e){var s=0,A=0,k=N-e,T=1<<k;for(o.sort(function(W,Y){return b[Y.s]-b[W.s]||W.f-Y.f});s<a;++s){var R=o[s].s;if(b[R]>e)A+=T-(1<<N-b[R]),b[R]=e;else break}for(A>>=k;A>0;){var D=o[s].s;b[D]<e?A-=1<<e-b[D]++-1:++s}for(;s>=0&&A;--s){var F=o[s].s;b[F]==e&&(--b[F],++A)}N=e}return{t:new fo(b),l:N}},bg=function(r,e,t){return r.s==-1?Math.max(bg(r.l,e,t+1),bg(r.r,e,t+1)):e[r.s]=t},ly=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new ca(++e),s=0,a=r[0],o=1,u=function(f){t[s++]=f},c=1;c<=e;++c)if(r[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=r[c]}return{c:t.subarray(0,s),n:e}},Ff=function(r,e){for(var t=0,s=0;s<e.length;++s)t+=r[s]*e[s];return t},Ew=function(r,e,t){var s=t.length,a=jw(e+2);r[a]=s&255,r[a+1]=s>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var o=0;o<s;++o)r[a+o+4]=t[o];return(a+4+s)*8},cy=function(r,e,t,s,a,o,u,c,f,d,m){Sl(e,m++,t),++a[256];for(var y=Cm(a,15),_=y.t,b=y.l,N=Cm(o,15),A=N.t,k=N.l,T=ly(_),R=T.c,D=T.n,F=ly(A),B=F.c,W=F.n,Y=new ca(19),O=0;O<R.length;++O)++Y[R[O]&31];for(var O=0;O<B.length;++O)++Y[B[O]&31];for(var z=Cm(Y,7),Q=z.t,M=z.l,V=19;V>4&&!Q[ay[V-1]];--V);var H=d+5<<3,X=Ff(a,vu)+Ff(o,_p)+u,he=Ff(a,_)+Ff(o,A)+u+14+3*V+Ff(Y,Q)+2*Y[16]+3*Y[17]+7*Y[18];if(f>=0&&H<=X&&H<=he)return Ew(e,m,r.subarray(f,f+d));var I,se,ie,de;if(Sl(e,m,1+(he<X)),m+=2,he<X){I=Xf(_,b,0),se=_,ie=Xf(A,k,0),de=A;var pe=Xf(Q,M,0);Sl(e,m,D-257),Sl(e,m+5,W-1),Sl(e,m+10,V-4),m+=14;for(var O=0;O<V;++O)Sl(e,m+3*O,Q[ay[O]]);m+=3*V;for(var G=[R,B],j=0;j<2;++j)for(var P=G[j],O=0;O<P.length;++O){var ee=P[O]&31;Sl(e,m,pe[ee]),m+=Q[ee],ee>15&&(Sl(e,m,P[O]>>5&127),m+=P[O]>>12)}}else I=mj,se=vu,ie=gj,de=_p;for(var O=0;O<c;++O){var J=s[O];if(J>255){var ee=J>>18&31;Vf(e,m,I[ee+257]),m+=se[ee+257],ee>7&&(Sl(e,m,J>>23&31),m+=L2[ee]);var oe=J&31;Vf(e,m,ie[oe]),m+=de[oe],oe>3&&(Vf(e,m,J>>5&8191),m+=O2[oe])}else Vf(e,m,I[J]),m+=se[J]}return Vf(e,m,I[256]),m+se[256]},vj=new M2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Mw=new fo(0),yj=function(r,e,t,s,a,o){var u=o.z||r.length,c=new fo(s+u+5*(1+Math.ceil(u/7e3))+a),f=c.subarray(s,c.length-a),d=o.l,m=(o.r||0)&7;if(e){m&&(f[0]=o.r>>3);for(var y=vj[e-1],_=y>>13,b=y&8191,N=(1<<t)-1,A=o.p||new ca(32768),k=o.h||new ca(N+1),T=Math.ceil(t/3),R=2*T,D=function(ct){return(r[ct]^r[ct+1]<<T^r[ct+2]<<R)&N},F=new M2(25e3),B=new ca(288),W=new ca(32),Y=0,O=0,z=o.i||0,Q=0,M=o.w||0,V=0;z+2<u;++z){var H=D(z),X=z&32767,he=k[H];if(A[X]=he,k[H]=X,M<=z){var I=u-z;if((Y>7e3||Q>24576)&&(I>423||!d)){m=cy(r,f,0,F,B,W,O,Q,V,z-V,m),Q=Y=O=0,V=z;for(var se=0;se<286;++se)B[se]=0;for(var se=0;se<30;++se)W[se]=0}var ie=2,de=0,pe=b,G=X-he&32767;if(I>2&&H==D(z-G))for(var j=Math.min(_,I)-1,P=Math.min(32767,z),ee=Math.min(258,I);G<=P&&--pe&&X!=he;){if(r[z+ie]==r[z+ie-G]){for(var J=0;J<ee&&r[z+J]==r[z+J-G];++J);if(J>ie){if(ie=J,de=G,J>j)break;for(var oe=Math.min(G,J-2),fe=0,se=0;se<oe;++se){var me=z-G+se&32767,Se=A[me],ye=me-Se&32767;ye>fe&&(fe=ye,he=me)}}}X=he,he=A[X],G+=X-he&32767}if(de){F[Q++]=268435456|mg[ie]<<18|oy[de];var Fe=mg[ie]&31,Ye=oy[de]&31;O+=L2[Fe]+O2[Ye],++B[257+Fe],++W[Ye],M=z+ie,++Y}else F[Q++]=r[z],++B[r[z]]}}for(z=Math.max(z,M);z<u;++z)F[Q++]=r[z],++B[r[z]];m=cy(r,f,d,F,B,W,O,Q,V,z-V,m),d||(o.r=m&7|f[m/8|0]<<3,m-=7,o.h=k,o.p=A,o.i=z,o.w=M)}else{for(var z=o.w||0;z<u+d;z+=65535){var Je=z+65535;Je>=u&&(f[m/8|0]=d,Je=u),m=Ew(f,m+1,r.subarray(z,Je))}o.i=u}return bj(c,0,s+jw(m)+a)},Lw=function(){var r=1,e=0;return{p:function(t){for(var s=r,a=e,o=t.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}r=s,e=a},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},xj=function(r,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new fo(o.length+r.length);u.set(o),u.set(r,o.length),r=u,a.w=o.length}return yj(r,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,s,a)},Ow=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},wj=function(r,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=s<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var a=Lw();a.p(e.dictionary),Ow(r,2,a.d())}};function vg(r,e){e||(e={});var t=Lw();t.p(r);var s=xj(r,e,e.dictionary?6:2,4);return wj(s,e),Ow(s,s.length-4,t.d()),s}var _j=typeof TextDecoder<"u"&&new TextDecoder,Sj=0;try{_j.decode(Mw,{stream:!0}),Sj=1}catch{}function Nj(r){if(Array.isArray(r))return r}function Aj(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var s,a,o,u,c=[],f=!0,d=!1;try{if(o=(t=t.call(r)).next,e!==0)for(;!(f=(s=o.call(t)).done)&&(c.push(s.value),c.length!==e);f=!0);}catch(m){d=!0,a=m}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw a}}return c}}function uy(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=Array(e);t<e;t++)s[t]=r[t];return s}function Cj(r,e){if(r){if(typeof r=="string")return uy(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?uy(r,e):void 0}}function Tj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hy(r,e){return Nj(r)||Aj(r,e)||Cj(r,e)||Tj()}function fy(r,e="utf8"){return new TextDecoder(e).decode(r)}const kj=new TextEncoder;function jj(r){return kj.encode(r)}const Ej=1024*8,Mj=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),Tm={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class D2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Ej,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof D2)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=Tm[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===Mj&&t!=="uint8"&&t!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+s));c.reverse();const f=new Tm[t](c.buffer);return this.offset+=s,f.reverse(),f}const u=new Tm[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return fy(this.readBytes(e))}decodeText(e=1,t="utf8"){return fy(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(jj(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Zh(r){let e=r.length;for(;--e>=0;)r[e]=0}const Lj=3,Oj=258,Dw=29,Dj=256,Rj=Dj+1+Dw,Rw=30,Ij=512,Vj=new Array((Rj+2)*2);Zh(Vj);const Fj=new Array(Rw*2);Zh(Fj);const Bj=new Array(Ij);Zh(Bj);const zj=new Array(Oj-Lj+1);Zh(zj);const Pj=new Array(Dw);Zh(Pj);const qj=new Array(Rw);Zh(qj);const Uj=(r,e,t,s)=>{let a=r&65535|0,o=r>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var yg=Uj;const Hj=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},Gj=new Uint32Array(Hj()),Wj=(r,e,t,s)=>{const a=Gj,o=s+t;r^=-1;for(let u=s;u<o;u++)r=r>>>8^a[(r^e[u])&255];return r^-1};var Bo=Wj,xg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Iw={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Yj=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var Xj=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)Yj(t,s)&&(r[s]=t[s])}}return r},$j=r=>{let e=0;for(let s=0,a=r.length;s<a;s++)e+=r[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=r.length;s<o;s++){let u=r[s];t.set(u,a),a+=u.length}return t},Vw={assign:Xj,flattenChunks:$j};let Fw=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Fw=!1}const ud=new Uint8Array(256);for(let r=0;r<256;r++)ud[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;ud[254]=ud[254]=1;var Zj=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,s,a,o,u=r.length,c=0;for(a=0;a<u;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=r.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=r.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const Qj=(r,e)=>{if(e<65534&&r.subarray&&Fw)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(r[s]);return t};var Kj=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=r[s++];if(u<128){o[a++]=u;continue}let c=ud[u];if(c>4){o[a++]=65533,s+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&s<t;)u=u<<6|r[s++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return Qj(o,a)},Jj=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+ud[r[t]]>e?t:e},wg={string2buf:Zj,buf2string:Kj,utf8border:Jj};function eE(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var tE=eE;const j1=16209,nE=16191;var rE=function(e,t){let s,a,o,u,c,f,d,m,y,_,b,N,A,k,T,R,D,F,B,W,Y,O,z,Q;const M=e.state;s=e.next_in,z=e.input,a=s+(e.avail_in-5),o=e.next_out,Q=e.output,u=o-(t-e.avail_out),c=o+(e.avail_out-257),f=M.dmax,d=M.wsize,m=M.whave,y=M.wnext,_=M.window,b=M.hold,N=M.bits,A=M.lencode,k=M.distcode,T=(1<<M.lenbits)-1,R=(1<<M.distbits)-1;e:do{N<15&&(b+=z[s++]<<N,N+=8,b+=z[s++]<<N,N+=8),D=A[b&T];t:for(;;){if(F=D>>>24,b>>>=F,N-=F,F=D>>>16&255,F===0)Q[o++]=D&65535;else if(F&16){B=D&65535,F&=15,F&&(N<F&&(b+=z[s++]<<N,N+=8),B+=b&(1<<F)-1,b>>>=F,N-=F),N<15&&(b+=z[s++]<<N,N+=8,b+=z[s++]<<N,N+=8),D=k[b&R];n:for(;;){if(F=D>>>24,b>>>=F,N-=F,F=D>>>16&255,F&16){if(W=D&65535,F&=15,N<F&&(b+=z[s++]<<N,N+=8,N<F&&(b+=z[s++]<<N,N+=8)),W+=b&(1<<F)-1,W>f){e.msg="invalid distance too far back",M.mode=j1;break e}if(b>>>=F,N-=F,F=o-u,W>F){if(F=W-F,F>m&&M.sane){e.msg="invalid distance too far back",M.mode=j1;break e}if(Y=0,O=_,y===0){if(Y+=d-F,F<B){B-=F;do Q[o++]=_[Y++];while(--F);Y=o-W,O=Q}}else if(y<F){if(Y+=d+y-F,F-=y,F<B){B-=F;do Q[o++]=_[Y++];while(--F);if(Y=0,y<B){F=y,B-=F;do Q[o++]=_[Y++];while(--F);Y=o-W,O=Q}}}else if(Y+=y-F,F<B){B-=F;do Q[o++]=_[Y++];while(--F);Y=o-W,O=Q}for(;B>2;)Q[o++]=O[Y++],Q[o++]=O[Y++],Q[o++]=O[Y++],B-=3;B&&(Q[o++]=O[Y++],B>1&&(Q[o++]=O[Y++]))}else{Y=o-W;do Q[o++]=Q[Y++],Q[o++]=Q[Y++],Q[o++]=Q[Y++],B-=3;while(B>2);B&&(Q[o++]=Q[Y++],B>1&&(Q[o++]=Q[Y++]))}}else if((F&64)===0){D=k[(D&65535)+(b&(1<<F)-1)];continue n}else{e.msg="invalid distance code",M.mode=j1;break e}break}}else if((F&64)===0){D=A[(D&65535)+(b&(1<<F)-1)];continue t}else if(F&32){M.mode=nE;break e}else{e.msg="invalid literal/length code",M.mode=j1;break e}break}}while(s<a&&o<c);B=N>>3,s-=B,N-=B<<3,b&=(1<<N)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<c?257+(c-o):257-(o-c),M.hold=b,M.bits=N};const ph=15,dy=852,py=592,my=0,km=1,gy=2,sE=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),iE=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),aE=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),oE=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),lE=(r,e,t,s,a,o,u,c)=>{const f=c.bits;let d=0,m=0,y=0,_=0,b=0,N=0,A=0,k=0,T=0,R=0,D,F,B,W,Y,O=null,z;const Q=new Uint16Array(ph+1),M=new Uint16Array(ph+1);let V=null,H,X,he;for(d=0;d<=ph;d++)Q[d]=0;for(m=0;m<s;m++)Q[e[t+m]]++;for(b=f,_=ph;_>=1&&Q[_]===0;_--);if(b>_&&(b=_),_===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(y=1;y<_&&Q[y]===0;y++);for(b<y&&(b=y),k=1,d=1;d<=ph;d++)if(k<<=1,k-=Q[d],k<0)return-1;if(k>0&&(r===my||_!==1))return-1;for(M[1]=0,d=1;d<ph;d++)M[d+1]=M[d]+Q[d];for(m=0;m<s;m++)e[t+m]!==0&&(u[M[e[t+m]]++]=m);if(r===my?(O=V=u,z=20):r===km?(O=sE,V=iE,z=257):(O=aE,V=oE,z=0),R=0,m=0,d=y,Y=o,N=b,A=0,B=-1,T=1<<b,W=T-1,r===km&&T>dy||r===gy&&T>py)return 1;for(;;){H=d-A,u[m]+1<z?(X=0,he=u[m]):u[m]>=z?(X=V[u[m]-z],he=O[u[m]-z]):(X=96,he=0),D=1<<d-A,F=1<<N,y=F;do F-=D,a[Y+(R>>A)+F]=H<<24|X<<16|he|0;while(F!==0);for(D=1<<d-1;R&D;)D>>=1;if(D!==0?(R&=D-1,R+=D):R=0,m++,--Q[d]===0){if(d===_)break;d=e[t+u[m]]}if(d>b&&(R&W)!==B){for(A===0&&(A=b),Y+=y,N=d-A,k=1<<N;N+A<_&&(k-=Q[N+A],!(k<=0));)N++,k<<=1;if(T+=1<<N,r===km&&T>dy||r===gy&&T>py)return 1;B=R&W,a[B]=b<<24|N<<16|Y-o|0}}return R!==0&&(a[Y+R]=d-A<<24|64<<16|0),c.bits=b,0};var $f=lE;const cE=0,Bw=1,zw=2,{Z_FINISH:by,Z_BLOCK:uE,Z_TREES:E1,Z_OK:yu,Z_STREAM_END:hE,Z_NEED_DICT:fE,Z_STREAM_ERROR:La,Z_DATA_ERROR:Pw,Z_MEM_ERROR:qw,Z_BUF_ERROR:dE,Z_DEFLATED:vy}=Iw,Kp=16180,yy=16181,xy=16182,wy=16183,_y=16184,Sy=16185,Ny=16186,Ay=16187,Cy=16188,Ty=16189,Sp=16190,Nl=16191,jm=16192,ky=16193,Em=16194,jy=16195,Ey=16196,My=16197,Ly=16198,M1=16199,L1=16200,Oy=16201,Dy=16202,Ry=16203,Iy=16204,Vy=16205,Mm=16206,Fy=16207,By=16208,Dr=16209,Uw=16210,Hw=16211,pE=852,mE=592,gE=15,bE=gE,zy=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function vE(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Nu=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Kp||e.mode>Hw?1:0},Gw=r=>{if(Nu(r))return La;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Kp,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(pE),e.distcode=e.distdyn=new Int32Array(mE),e.sane=1,e.back=-1,yu},Ww=r=>{if(Nu(r))return La;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Gw(r)},Yw=(r,e)=>{let t;if(Nu(r))return La;const s=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?La:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,Ww(r))},Xw=(r,e)=>{if(!r)return La;const t=new vE;r.state=t,t.strm=r,t.window=null,t.mode=Kp;const s=Yw(r,e);return s!==yu&&(r.state=null),s},yE=r=>Xw(r,bE);let Py=!0,Lm,Om;const xE=r=>{if(Py){Lm=new Int32Array(512),Om=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for($f(Bw,r.lens,0,288,Lm,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;$f(zw,r.lens,0,32,Om,0,r.work,{bits:5}),Py=!1}r.lencode=Lm,r.lenbits=9,r.distcode=Om,r.distbits=5},$w=(r,e,t,s)=>{let a;const o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},wE=(r,e)=>{let t,s,a,o,u,c,f,d,m,y,_,b,N,A,k=0,T,R,D,F,B,W,Y,O;const z=new Uint8Array(4);let Q,M;const V=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Nu(r)||!r.output||!r.input&&r.avail_in!==0)return La;t=r.state,t.mode===Nl&&(t.mode=jm),u=r.next_out,a=r.output,f=r.avail_out,o=r.next_in,s=r.input,c=r.avail_in,d=t.hold,m=t.bits,y=c,_=f,O=yu;e:for(;;)switch(t.mode){case Kp:if(t.wrap===0){t.mode=jm;break}for(;m<16;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,z[0]=d&255,z[1]=d>>>8&255,t.check=Bo(t.check,z,2,0),d=0,m=0,t.mode=yy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",t.mode=Dr;break}if((d&15)!==vy){r.msg="unknown compression method",t.mode=Dr;break}if(d>>>=4,m-=4,Y=(d&15)+8,t.wbits===0&&(t.wbits=Y),Y>15||Y>t.wbits){r.msg="invalid window size",t.mode=Dr;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=d&512?Ty:Nl,d=0,m=0;break;case yy:for(;m<16;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}if(t.flags=d,(t.flags&255)!==vy){r.msg="unknown compression method",t.mode=Dr;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Dr;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,t.check=Bo(t.check,z,2,0)),d=0,m=0,t.mode=xy;case xy:for(;m<32;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,z[2]=d>>>16&255,z[3]=d>>>24&255,t.check=Bo(t.check,z,4,0)),d=0,m=0,t.mode=wy;case wy:for(;m<16;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,t.check=Bo(t.check,z,2,0)),d=0,m=0,t.mode=_y;case _y:if(t.flags&1024){for(;m<16;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,t.check=Bo(t.check,z,2,0)),d=0,m=0}else t.head&&(t.head.extra=null);t.mode=Sy;case Sy:if(t.flags&1024&&(b=t.length,b>c&&(b=c),b&&(t.head&&(Y=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+b),Y)),t.flags&512&&t.wrap&4&&(t.check=Bo(t.check,s,b,o)),c-=b,o+=b,t.length-=b),t.length))break e;t.length=0,t.mode=Ny;case Ny:if(t.flags&2048){if(c===0)break e;b=0;do Y=s[o+b++],t.head&&Y&&t.length<65536&&(t.head.name+=String.fromCharCode(Y));while(Y&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=Bo(t.check,s,b,o)),c-=b,o+=b,Y)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Ay;case Ay:if(t.flags&4096){if(c===0)break e;b=0;do Y=s[o+b++],t.head&&Y&&t.length<65536&&(t.head.comment+=String.fromCharCode(Y));while(Y&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=Bo(t.check,s,b,o)),c-=b,o+=b,Y)break e}else t.head&&(t.head.comment=null);t.mode=Cy;case Cy:if(t.flags&512){for(;m<16;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}if(t.wrap&4&&d!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Dr;break}d=0,m=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=Nl;break;case Ty:for(;m<32;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}r.adler=t.check=zy(d),d=0,m=0,t.mode=Sp;case Sp:if(t.havedict===0)return r.next_out=u,r.avail_out=f,r.next_in=o,r.avail_in=c,t.hold=d,t.bits=m,fE;r.adler=t.check=1,t.mode=Nl;case Nl:if(e===uE||e===E1)break e;case jm:if(t.last){d>>>=m&7,m-=m&7,t.mode=Mm;break}for(;m<3;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}switch(t.last=d&1,d>>>=1,m-=1,d&3){case 0:t.mode=ky;break;case 1:if(xE(t),t.mode=M1,e===E1){d>>>=2,m-=2;break e}break;case 2:t.mode=Ey;break;case 3:r.msg="invalid block type",t.mode=Dr}d>>>=2,m-=2;break;case ky:for(d>>>=m&7,m-=m&7;m<32;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Dr;break}if(t.length=d&65535,d=0,m=0,t.mode=Em,e===E1)break e;case Em:t.mode=jy;case jy:if(b=t.length,b){if(b>c&&(b=c),b>f&&(b=f),b===0)break e;a.set(s.subarray(o,o+b),u),c-=b,o+=b,f-=b,u+=b,t.length-=b;break}t.mode=Nl;break;case Ey:for(;m<14;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}if(t.nlen=(d&31)+257,d>>>=5,m-=5,t.ndist=(d&31)+1,d>>>=5,m-=5,t.ncode=(d&15)+4,d>>>=4,m-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Dr;break}t.have=0,t.mode=My;case My:for(;t.have<t.ncode;){for(;m<3;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}t.lens[V[t.have++]]=d&7,d>>>=3,m-=3}for(;t.have<19;)t.lens[V[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,Q={bits:t.lenbits},O=$f(cE,t.lens,0,19,t.lencode,0,t.work,Q),t.lenbits=Q.bits,O){r.msg="invalid code lengths set",t.mode=Dr;break}t.have=0,t.mode=Ly;case Ly:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[d&(1<<t.lenbits)-1],T=k>>>24,R=k>>>16&255,D=k&65535,!(T<=m);){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}if(D<16)d>>>=T,m-=T,t.lens[t.have++]=D;else{if(D===16){for(M=T+2;m<M;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}if(d>>>=T,m-=T,t.have===0){r.msg="invalid bit length repeat",t.mode=Dr;break}Y=t.lens[t.have-1],b=3+(d&3),d>>>=2,m-=2}else if(D===17){for(M=T+3;m<M;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}d>>>=T,m-=T,Y=0,b=3+(d&7),d>>>=3,m-=3}else{for(M=T+7;m<M;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}d>>>=T,m-=T,Y=0,b=11+(d&127),d>>>=7,m-=7}if(t.have+b>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Dr;break}for(;b--;)t.lens[t.have++]=Y}}if(t.mode===Dr)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Dr;break}if(t.lenbits=9,Q={bits:t.lenbits},O=$f(Bw,t.lens,0,t.nlen,t.lencode,0,t.work,Q),t.lenbits=Q.bits,O){r.msg="invalid literal/lengths set",t.mode=Dr;break}if(t.distbits=6,t.distcode=t.distdyn,Q={bits:t.distbits},O=$f(zw,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,Q),t.distbits=Q.bits,O){r.msg="invalid distances set",t.mode=Dr;break}if(t.mode=M1,e===E1)break e;case M1:t.mode=L1;case L1:if(c>=6&&f>=258){r.next_out=u,r.avail_out=f,r.next_in=o,r.avail_in=c,t.hold=d,t.bits=m,rE(r,_),u=r.next_out,a=r.output,f=r.avail_out,o=r.next_in,s=r.input,c=r.avail_in,d=t.hold,m=t.bits,t.mode===Nl&&(t.back=-1);break}for(t.back=0;k=t.lencode[d&(1<<t.lenbits)-1],T=k>>>24,R=k>>>16&255,D=k&65535,!(T<=m);){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}if(R&&(R&240)===0){for(F=T,B=R,W=D;k=t.lencode[W+((d&(1<<F+B)-1)>>F)],T=k>>>24,R=k>>>16&255,D=k&65535,!(F+T<=m);){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}d>>>=F,m-=F,t.back+=F}if(d>>>=T,m-=T,t.back+=T,t.length=D,R===0){t.mode=Vy;break}if(R&32){t.back=-1,t.mode=Nl;break}if(R&64){r.msg="invalid literal/length code",t.mode=Dr;break}t.extra=R&15,t.mode=Oy;case Oy:if(t.extra){for(M=t.extra;m<M;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,m-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Dy;case Dy:for(;k=t.distcode[d&(1<<t.distbits)-1],T=k>>>24,R=k>>>16&255,D=k&65535,!(T<=m);){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}if((R&240)===0){for(F=T,B=R,W=D;k=t.distcode[W+((d&(1<<F+B)-1)>>F)],T=k>>>24,R=k>>>16&255,D=k&65535,!(F+T<=m);){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}d>>>=F,m-=F,t.back+=F}if(d>>>=T,m-=T,t.back+=T,R&64){r.msg="invalid distance code",t.mode=Dr;break}t.offset=D,t.extra=R&15,t.mode=Ry;case Ry:if(t.extra){for(M=t.extra;m<M;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,m-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Dr;break}t.mode=Iy;case Iy:if(f===0)break e;if(b=_-f,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Dr;break}b>t.wnext?(b-=t.wnext,N=t.wsize-b):N=t.wnext-b,b>t.length&&(b=t.length),A=t.window}else A=a,N=u-t.offset,b=t.length;b>f&&(b=f),f-=b,t.length-=b;do a[u++]=A[N++];while(--b);t.length===0&&(t.mode=L1);break;case Vy:if(f===0)break e;a[u++]=t.length,f--,t.mode=L1;break;case Mm:if(t.wrap){for(;m<32;){if(c===0)break e;c--,d|=s[o++]<<m,m+=8}if(_-=f,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?Bo(t.check,a,_,u-_):yg(t.check,a,_,u-_)),_=f,t.wrap&4&&(t.flags?d:zy(d))!==t.check){r.msg="incorrect data check",t.mode=Dr;break}d=0,m=0}t.mode=Fy;case Fy:if(t.wrap&&t.flags){for(;m<32;){if(c===0)break e;c--,d+=s[o++]<<m,m+=8}if(t.wrap&4&&d!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Dr;break}d=0,m=0}t.mode=By;case By:O=hE;break e;case Dr:O=Pw;break e;case Uw:return qw;case Hw:default:return La}return r.next_out=u,r.avail_out=f,r.next_in=o,r.avail_in=c,t.hold=d,t.bits=m,(t.wsize||_!==r.avail_out&&t.mode<Dr&&(t.mode<Mm||e!==by))&&$w(r,r.output,r.next_out,_-r.avail_out),y-=r.avail_in,_-=r.avail_out,r.total_in+=y,r.total_out+=_,t.total+=_,t.wrap&4&&_&&(r.adler=t.check=t.flags?Bo(t.check,a,_,r.next_out-_):yg(t.check,a,_,r.next_out-_)),r.data_type=t.bits+(t.last?64:0)+(t.mode===Nl?128:0)+(t.mode===M1||t.mode===Em?256:0),(y===0&&_===0||e===by)&&O===yu&&(O=dE),O},_E=r=>{if(Nu(r))return La;let e=r.state;return e.window&&(e.window=null),r.state=null,yu},SE=(r,e)=>{if(Nu(r))return La;const t=r.state;return(t.wrap&2)===0?La:(t.head=e,e.done=!1,yu)},NE=(r,e)=>{const t=e.length;let s,a,o;return Nu(r)||(s=r.state,s.wrap!==0&&s.mode!==Sp)?La:s.mode===Sp&&(a=1,a=yg(a,e,t,0),a!==s.check)?Pw:(o=$w(r,e,t,t),o?(s.mode=Uw,qw):(s.havedict=1,yu))};var AE=Ww,CE=Yw,TE=Gw,kE=yE,jE=Xw,EE=wE,ME=_E,LE=SE,OE=NE,DE="pako inflate (from Nodeca project)",Cl={inflateReset:AE,inflateReset2:CE,inflateResetKeep:TE,inflateInit:kE,inflateInit2:jE,inflate:EE,inflateEnd:ME,inflateGetHeader:LE,inflateSetDictionary:OE,inflateInfo:DE};function RE(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var IE=RE;const Zw=Object.prototype.toString,{Z_NO_FLUSH:VE,Z_FINISH:FE,Z_OK:hd,Z_STREAM_END:Dm,Z_NEED_DICT:Rm,Z_STREAM_ERROR:BE,Z_DATA_ERROR:qy,Z_MEM_ERROR:zE}=Iw;function kd(r){this.options=Vw.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tE,this.strm.avail_out=0;let t=Cl.inflateInit2(this.strm,e.windowBits);if(t!==hd)throw new Error(xg[t]);if(this.header=new IE,Cl.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=wg.string2buf(e.dictionary):Zw.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Cl.inflateSetDictionary(this.strm,e.dictionary),t!==hd)))throw new Error(xg[t])}kd.prototype.push=function(r,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?FE:VE,Zw.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=Cl.inflate(t,u),o===Rm&&a&&(o=Cl.inflateSetDictionary(t,a),o===hd?o=Cl.inflate(t,u):o===qy&&(o=Rm));t.avail_in>0&&o===Dm&&t.state.wrap>0&&r[t.next_in]!==0;)Cl.inflateReset(t),o=Cl.inflate(t,u);switch(o){case BE:case qy:case Rm:case zE:return this.onEnd(o),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||o===Dm))if(this.options.to==="string"){let f=wg.utf8border(t.output,t.next_out),d=t.next_out-f,m=wg.buf2string(t.output,f);t.next_out=d,t.avail_out=s-d,d&&t.output.set(t.output.subarray(f,f+d),0),this.onData(m)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===hd&&c===0)){if(o===Dm)return o=Cl.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};kd.prototype.onData=function(r){this.chunks.push(r)};kd.prototype.onEnd=function(r){r===hd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Vw.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function PE(r,e){const t=new kd(e);if(t.push(r),t.err)throw t.msg||xg[t.err];return t.result}var qE=kd,UE=PE,HE={Inflate:qE,inflate:UE};const{Inflate:GE,inflate:WE}=HE;var Uy=GE,YE=WE;const Qw=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Qw[r]=e}const Hy=4294967295;function XE(r,e,t){let s=r;for(let a=0;a<t;a++)s=Qw[(s^e[a])&255]^s>>>8;return s}function $E(r,e){return(XE(Hy,r,e)^Hy)>>>0}function Gy(r,e,t){const s=r.readUint32(),a=$E(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function Kw(r,e,t){for(let s=0;s<t;s++)e[s]=r[s]}function Jw(r,e,t,s){let a=0;for(;a<s;a++)e[a]=r[a];for(;a<t;a++)e[a]=r[a]+e[a-s]&255}function e4(r,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=r[a];else for(;a<s;a++)e[a]=r[a]+t[a]&255}function t4(r,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=r[o];for(;o<s;o++)e[o]=r[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=r[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=r[o]+(e[o-a]+t[o]>>1)&255}}function n4(r,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=r[o];for(;o<s;o++)e[o]=r[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=r[o]+t[o]&255;for(;o<s;o++)e[o]=r[o]+ZE(e[o-a],t[o],t[o-a])&255}}function ZE(r,e,t){const s=r+e-t,a=Math.abs(s-r),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?r:o<=u?e:t}function QE(r,e,t,s,a,o){switch(r){case 0:Kw(e,t,a);break;case 1:Jw(e,t,a,o);break;case 2:e4(e,t,s,a);break;case 3:t4(e,t,s,a,o);break;case 4:n4(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${r}`)}}const KE=new Uint16Array([255]),JE=new Uint8Array(KE.buffer),eM=JE[0]===255;function tM(r){const{data:e,width:t,height:s,channels:a,depth:o}=r,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,f=new Uint8Array(s*t*c);let d=0;for(let m=0;m<7;m++){const y=u[m],_=Math.ceil((t-y.x)/y.xStep),b=Math.ceil((s-y.y)/y.yStep);if(_<=0||b<=0)continue;const N=_*c,A=new Uint8Array(N);for(let k=0;k<b;k++){const T=e[d++],R=e.subarray(d,d+N);d+=N;const D=new Uint8Array(N);QE(T,R,D,A,N,c),A.set(D);for(let F=0;F<_;F++){const B=y.x+F*y.xStep,W=y.y+k*y.yStep;if(!(B>=t||W>=s))for(let Y=0;Y<c;Y++)f[(W*t+B)*c+Y]=D[F*c+Y]}}}if(o===16){const m=new Uint16Array(f.buffer);if(eM)for(let y=0;y<m.length;y++)m[y]=nM(m[y]);return m}else return f}function nM(r){return(r&255)<<8|r>>8&255}const rM=new Uint16Array([255]),sM=new Uint8Array(rM.buffer),iM=sM[0]===255,aM=new Uint8Array(0);function Wy(r){const{data:e,width:t,height:s,channels:a,depth:o}=r,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*t),f=new Uint8Array(s*c);let d=aM,m=0,y,_;for(let b=0;b<s;b++){switch(y=e.subarray(m+1,m+1+c),_=f.subarray(b*c,(b+1)*c),e[m]){case 0:Kw(y,_,c);break;case 1:Jw(y,_,c,u);break;case 2:e4(y,_,d,c);break;case 3:t4(y,_,d,c,u);break;case 4:n4(y,_,d,c,u);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}d=_,m+=c+1}if(o===16){const b=new Uint16Array(f.buffer);if(iM)for(let N=0;N<b.length;N++)b[N]=oM(b[N]);return b}else return f}function oM(r){return(r&255)<<8|r>>8&255}const H1=Uint8Array.of(137,80,78,71,13,10,26,10);function Yy(r){if(!lM(r.readBytes(H1.length)))throw new Error("wrong PNG signature")}function lM(r){if(r.length<H1.length)return!1;for(let e=0;e<H1.length;e++)if(r[e]!==H1[e])return!1;return!0}const cM="tEXt",uM=0,r4=new TextDecoder("latin1");function hM(r){if(dM(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const fM=/^[\u0000-\u00FF]*$/;function dM(r){if(!fM.test(r))throw new Error("invalid latin1 text")}function pM(r,e,t){const s=s4(e);r[s]=mM(e,t-s.length-1)}function s4(r){for(r.mark();r.readByte()!==uM;);const e=r.offset;r.reset();const t=r4.decode(r.readBytes(e-r.offset-1));return r.skip(1),hM(t),t}function mM(r,e){return r4.decode(r.readBytes(e))}const aa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Im={UNKNOWN:-1,DEFLATE:0},Xy={UNKNOWN:-1,ADAPTIVE:0},Vm={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},O1={NONE:0,BACKGROUND:1,PREVIOUS:2},Fm={SOURCE:0,OVER:1};class gM extends D2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new Uy,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Im.UNKNOWN,this._filterMethod=Xy.UNKNOWN,this._interlaceMethod=Vm.UNKNOWN,this._colorType=aa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Yy(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(Yy(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case cM:pM(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Gy(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Gy(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=bM(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case aa.GREYSCALE:s=1;break;case aa.TRUECOLOUR:s=3;break;case aa.INDEXED_COLOUR:s=1;break;case aa.GREYSCALE_ALPHA:s=2;break;case aa.TRUECOLOUR_ALPHA:s=4;break;case aa.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Im.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<t;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case aa.GREYSCALE:case aa.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case aa.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case aa.UNKNOWN:case aa.GREYSCALE_ALPHA:case aa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=s4(this),s=this.readUint8();if(s!==Im.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:YE(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=Wy({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(s,a,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case O1.NONE:break;case O1.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)s.data[u+c]=0}break;case O1.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,a=(o,u)=>{const c=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,f=(o*t.width+u)*this._png.channels;return{index:c,frameIndex:f}};switch(t.blendOp){case Fm.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let d=0;d<this._png.channels;d++)e.data[c+d]=t.data[f+d]}break;case Fm.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let d=0;d<this._png.channels;d++){const m=t.data[f+this._png.channels-1]/s,y=d%(this._png.channels-1)===0?1:t.data[f+d],_=Math.floor(m*y+(1-m)*e.data[c+d]);e.data[c+d]+=_}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Xy.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Vm.NO_INTERLACE)this._png.data=Wy({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Vm.ADAM7)this._png.data=tM({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:O1.NONE,blendOp:Fm.SOURCE,data:e}),this._inflator=new Uy,this._writingDataChunks=!1}}function bM(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var $y;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})($y||($y={}));function vM(r,e){return new gM(r,e).decode()}var Jt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Bm(){Jt.console&&typeof Jt.console.log=="function"&&Jt.console.log.apply(Jt.console,arguments)}var pr={log:Bm,warn:function(r){Jt.console&&(typeof Jt.console.warn=="function"?Jt.console.warn.apply(Jt.console,arguments):Bm.call(null,arguments))},error:function(r){Jt.console&&(typeof Jt.console.error=="function"?Jt.console.error.apply(Jt.console,arguments):Bm(r))}};function zm(r,e,t){var s=new XMLHttpRequest;s.open("GET",r),s.responseType="blob",s.onload=function(){ou(s.response,e,t)},s.onerror=function(){pr.error("could not download file")},s.send()}function Zy(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function D1(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var ou=Jt.saveAs||((typeof window>"u"?"undefined":er(window))!=="object"||window!==Jt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var s=Jt.URL||Jt.webkitURL,a=document.createElement("a");e=e||r.name||"download",a.download=e,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?Zy(a.href)?zm(r,e,t):D1(a,a.target="_blank"):D1(a)):(a.href=s.createObjectURL(r),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){D1(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Zy(r))zm(r,e,t);else{var s=document.createElement("a");s.href=r,s.target="_blank",setTimeout(function(){D1(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:er(o)!=="object"&&(pr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(r,t),e)}:function(r,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof r=="string")return zm(r,e,t);var a=r.type==="application/octet-stream",o=/constructor/i.test(Jt.HTMLElement)||Jt.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":er(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var m=c.result;m=u?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=m:location=m,s=null},c.readAsDataURL(r)}else{var f=Jt.URL||Jt.webkitURL,d=f.createObjectURL(r);s?s.location=d:location.href=d,s=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});function i4(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(r);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+c+f+d}}var G1=Jt.atob.bind(Jt),Qy=Jt.btoa.bind(Jt);function Pm(r,e){var t=r[0],s=r[1],a=r[2],o=r[3];t=ai(t,s,a,o,e[0],7,-680876936),o=ai(o,t,s,a,e[1],12,-389564586),a=ai(a,o,t,s,e[2],17,606105819),s=ai(s,a,o,t,e[3],22,-1044525330),t=ai(t,s,a,o,e[4],7,-176418897),o=ai(o,t,s,a,e[5],12,1200080426),a=ai(a,o,t,s,e[6],17,-1473231341),s=ai(s,a,o,t,e[7],22,-45705983),t=ai(t,s,a,o,e[8],7,1770035416),o=ai(o,t,s,a,e[9],12,-1958414417),a=ai(a,o,t,s,e[10],17,-42063),s=ai(s,a,o,t,e[11],22,-1990404162),t=ai(t,s,a,o,e[12],7,1804603682),o=ai(o,t,s,a,e[13],12,-40341101),a=ai(a,o,t,s,e[14],17,-1502002290),t=oi(t,s=ai(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=oi(o,t,s,a,e[6],9,-1069501632),a=oi(a,o,t,s,e[11],14,643717713),s=oi(s,a,o,t,e[0],20,-373897302),t=oi(t,s,a,o,e[5],5,-701558691),o=oi(o,t,s,a,e[10],9,38016083),a=oi(a,o,t,s,e[15],14,-660478335),s=oi(s,a,o,t,e[4],20,-405537848),t=oi(t,s,a,o,e[9],5,568446438),o=oi(o,t,s,a,e[14],9,-1019803690),a=oi(a,o,t,s,e[3],14,-187363961),s=oi(s,a,o,t,e[8],20,1163531501),t=oi(t,s,a,o,e[13],5,-1444681467),o=oi(o,t,s,a,e[2],9,-51403784),a=oi(a,o,t,s,e[7],14,1735328473),t=li(t,s=oi(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=li(o,t,s,a,e[8],11,-2022574463),a=li(a,o,t,s,e[11],16,1839030562),s=li(s,a,o,t,e[14],23,-35309556),t=li(t,s,a,o,e[1],4,-1530992060),o=li(o,t,s,a,e[4],11,1272893353),a=li(a,o,t,s,e[7],16,-155497632),s=li(s,a,o,t,e[10],23,-1094730640),t=li(t,s,a,o,e[13],4,681279174),o=li(o,t,s,a,e[0],11,-358537222),a=li(a,o,t,s,e[3],16,-722521979),s=li(s,a,o,t,e[6],23,76029189),t=li(t,s,a,o,e[9],4,-640364487),o=li(o,t,s,a,e[12],11,-421815835),a=li(a,o,t,s,e[15],16,530742520),t=ci(t,s=li(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=ci(o,t,s,a,e[7],10,1126891415),a=ci(a,o,t,s,e[14],15,-1416354905),s=ci(s,a,o,t,e[5],21,-57434055),t=ci(t,s,a,o,e[12],6,1700485571),o=ci(o,t,s,a,e[3],10,-1894986606),a=ci(a,o,t,s,e[10],15,-1051523),s=ci(s,a,o,t,e[1],21,-2054922799),t=ci(t,s,a,o,e[8],6,1873313359),o=ci(o,t,s,a,e[15],10,-30611744),a=ci(a,o,t,s,e[6],15,-1560198380),s=ci(s,a,o,t,e[13],21,1309151649),t=ci(t,s,a,o,e[4],6,-145523070),o=ci(o,t,s,a,e[11],10,-1120210379),a=ci(a,o,t,s,e[2],15,718787259),s=ci(s,a,o,t,e[9],21,-343485551),r[0]=Sc(t,r[0]),r[1]=Sc(s,r[1]),r[2]=Sc(a,r[2]),r[3]=Sc(o,r[3])}function Jp(r,e,t,s,a,o){return e=Sc(Sc(e,r),Sc(s,o)),Sc(e<<a|e>>>32-a,t)}function ai(r,e,t,s,a,o,u){return Jp(e&t|~e&s,r,e,a,o,u)}function oi(r,e,t,s,a,o,u){return Jp(e&s|t&~s,r,e,a,o,u)}function li(r,e,t,s,a,o,u){return Jp(e^t^s,r,e,a,o,u)}function ci(r,e,t,s,a,o,u){return Jp(t^(e|~s),r,e,a,o,u)}function a4(r){var e,t=r.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Pm(s,yM(r.substring(e-64,e)));r=r.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)a[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Pm(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,Pm(s,a),s}function yM(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var Ky="0123456789abcdef".split("");function xM(r){for(var e="",t=0;t<4;t++)e+=Ky[r>>8*t+4&15]+Ky[r>>8*t&15];return e}function wM(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function _g(r){return a4(r).map(wM).join("")}var _M=(function(r){for(var e=0;e<r.length;e++)r[e]=xM(r[e]);return r.join("")})(a4("hello"))!="5d41402abc4b2a76b9719d911017c592";function Sc(r,e){if(_M){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}function Sg(r,e){var t,s,a,o;if(r!==t){for(var u=(a=r,o=1+(256/r.length|0),new Array(o+1).join(a)),c=[],f=0;f<256;f++)c[f]=f;var d=0;for(f=0;f<256;f++){var m=c[f];d=(d+m+u.charCodeAt(f))%256,c[f]=c[d],c[d]=m}t=r,s=c}else c=s;var y=e.length,_=0,b=0,N="";for(f=0;f<y;f++)b=(b+(m=c[_=(_+1)%256]))%256,c[_]=c[b],c[b]=m,u=c[(c[_]+c[b])%256],N+=String.fromCharCode(e.charCodeAt(f)^u);return N}var Jy={print:4,modify:8,copy:16,"annot-forms":32};function vh(r,e,t,s){this.v=1,this.r=2;var a=192;r.forEach(function(c){if(Jy.perm!==void 0)throw new Error("Invalid permission: "+c);a+=Jy[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=_g(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Sg(this.encryptionKey,this.padding)}function yh(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,s=0;s<t;s++){var a=r.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):r[s]}return e}function ex(r){if(er(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(r,s)}catch(c){Jt.console&&pr.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Np(r){if(!(this instanceof Np))return new Np(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function o4(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function cu(r,e,t,s,a){if(!(this instanceof cu))return new cu(r,e,t,s,a);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,o4.call(this,s,a)}function Sh(r,e,t,s,a){if(!(this instanceof Sh))return new Sh(r,e,t,s,a);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,o4.call(this,s,a)}function It(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,f=16,d="S",m=null;er(r=r||{})==="object"&&(t=r.orientation,s=r.unit||s,a=r.format||a,o=r.compress||r.compressPdf||o,(m=r.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),c=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(f=r.floatPrecision),d=r.defaultPathOperation||"S"),u=r.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var y=r.putOnlyUsedFonts||!1,_={},b={internal:{},__private__:{}};b.__private__.PubSub=ex;var N="1.3",A=b.__private__.getPdfVersion=function(){return N};b.__private__.setPdfVersion=function(S){N=S};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return k};var T=b.__private__.getPageFormat=function(S){return k[S]};a=a||"a4";var R="compat",D="advanced",F=R;function B(){this.saveGraphicsState(),$(new Xe(xt,0,0,-xt,0,Ba()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),d="n",F=D}function W(){this.restoreGraphicsState(),d="S",F=R}var Y=b.__private__.combineFontStyleAndFontWeight=function(S,q){if(S=="bold"&&q=="normal"||S=="bold"&&q==400||S=="normal"&&q=="italic"||S=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(S=q==400||q==="normal"?S==="italic"?"italic":"normal":q!=700&&q!=="bold"||S!=="normal"?(q==700?"bold":q)+""+S:"bold"),S};b.advancedAPI=function(S){var q=F===R;return q&&B.call(this),typeof S!="function"||(S(this),q&&W.call(this)),this},b.compatAPI=function(S){var q=F===D;return q&&W.call(this),typeof S!="function"||(S(this),q&&B.call(this)),this},b.isAdvancedAPI=function(){return F===D};var O,z=function(S){if(F!==D)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Q=b.roundToPrecision=b.__private__.roundToPrecision=function(S,q){var ue=e||q;if(isNaN(S)||isNaN(ue))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(ue).replace(/0+$/,"")};O=b.hpf=b.__private__.hpf=typeof f=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(S,f)}:f==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(S,16)};var M=b.f2=b.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return Q(S,2)},V=b.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return Q(S,3)},H=b.scale=b.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return F===R?S*xt:F===D?S:void 0},X=function(S){return H((function(q){return F===R?Ba()-q:F===D?q:void 0})(S))};b.__private__.setPrecision=b.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var he,I="00000000000000000000000000000000",se=b.__private__.getFileId=function(){return I},ie=b.__private__.setFileId=function(S){return I=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():I.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(jr=new vh(m.userPermissions,m.userPassword,m.ownerPassword,I)),I};b.setFileId=function(S){return ie(S),this},b.getFileId=function(){return se()};var de=b.__private__.convertDateToPDFDate=function(S){var q=S.getTimezoneOffset(),ue=q<0?"+":"-",be=Math.floor(Math.abs(q/60)),Ae=Math.abs(q%60),Ge=[ue,ee(be),"'",ee(Ae),"'"].join("");return["D:",S.getFullYear(),ee(S.getMonth()+1),ee(S.getDate()),ee(S.getHours()),ee(S.getMinutes()),ee(S.getSeconds()),Ge].join("")},pe=b.__private__.convertPDFDateToDate=function(S){var q=parseInt(S.substr(2,4),10),ue=parseInt(S.substr(6,2),10)-1,be=parseInt(S.substr(8,2),10),Ae=parseInt(S.substr(10,2),10),Ge=parseInt(S.substr(12,2),10),et=parseInt(S.substr(14,2),10);return new Date(q,ue,be,Ae,Ge,et,0)},G=b.__private__.setCreationDate=function(S){var q;if(S===void 0&&(S=new Date),S instanceof Date)q=de(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=S}return he=q},j=b.__private__.getCreationDate=function(S){var q=he;return S==="jsDate"&&(q=pe(he)),q};b.setCreationDate=function(S){return G(S),this},b.getCreationDate=function(S){return j(S)};var P,ee=b.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},J=b.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},oe=0,fe=[],me=[],Se=0,ye=[],Fe=[],Ye=!1,Je=me;b.__private__.setCustomOutputDestination=function(S){Ye=!0,Je=S};var ct=function(S){Ye||(Je=S)};b.__private__.resetCustomOutputDestination=function(){Ye=!1,Je=me};var $=b.__private__.out=function(S){return S=S.toString(),Se+=S.length+1,Je.push(S),Je},Re=b.__private__.write=function(S){return $(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},pt=b.__private__.getArrayBuffer=function(S){for(var q=S.length,ue=new ArrayBuffer(q),be=new Uint8Array(ue);q--;)be[q]=S.charCodeAt(q);return ue},Ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Ke};var Le=r.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(S){return Le=F===D?S/xt:S,this};var tt,Ue=b.__private__.getFontSize=b.getFontSize=function(){return F===R?Le:Le*xt},ot=r.R2L||!1;b.__private__.setR2L=b.setR2L=function(S){return ot=S,this},b.__private__.getR2L=b.getR2L=function(){return ot};var it,Be=b.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))tt=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');tt=S}else tt=parseInt(S,10)};b.__private__.getZoomMode=function(){return tt};var at,nt=b.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');it=S};b.__private__.getPageMode=function(){return it};var ut=b.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');at=S};b.__private__.getLayoutMode=function(){return at},b.__private__.setDisplayMode=b.setDisplayMode=function(S,q,ue){return Be(S),ut(q),nt(ue),this};var gt={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(S){if(Object.keys(gt).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return gt[S]},b.__private__.getDocumentProperties=function(){return gt},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(S){for(var q in gt)gt.hasOwnProperty(q)&&S[q]&&(gt[q]=S[q]);return this},b.__private__.setDocumentProperty=function(S,q){if(Object.keys(gt).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return gt[S]=q};var dt,xt,ht,rn,Vt,bt={},jt={},qt=[],yt={},Ft={},vt={},Dt={},dn=null,St=0,mt=[],Rt=new ex(b),Oe=r.hotfixes||[],xe={},Pe={},lt=[],Xe=function S(q,ue,be,Ae,Ge,et){if(!(this instanceof S))return new S(q,ue,be,Ae,Ge,et);isNaN(q)&&(q=1),isNaN(ue)&&(ue=0),isNaN(be)&&(be=0),isNaN(Ae)&&(Ae=1),isNaN(Ge)&&(Ge=0),isNaN(et)&&(et=0),this._matrix=[q,ue,be,Ae,Ge,et]};Object.defineProperty(Xe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Xe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Xe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Xe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Xe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Xe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Xe.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Xe.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Xe.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Xe.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Xe.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Xe.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Xe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Xe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Xe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Xe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Xe.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(O).join(S)},Xe.prototype.multiply=function(S){var q=S.sx*this.sx+S.shy*this.shx,ue=S.sx*this.shy+S.shy*this.sy,be=S.shx*this.sx+S.sy*this.shx,Ae=S.shx*this.shy+S.sy*this.sy,Ge=S.tx*this.sx+S.ty*this.shx+this.tx,et=S.tx*this.shy+S.ty*this.sy+this.ty;return new Xe(q,ue,be,Ae,Ge,et)},Xe.prototype.decompose=function(){var S=this.sx,q=this.shy,ue=this.shx,be=this.sy,Ae=this.tx,Ge=this.ty,et=Math.sqrt(S*S+q*q),At=(S/=et)*ue+(q/=et)*be;ue-=S*At,be-=q*At;var Lt=Math.sqrt(ue*ue+be*be);return At/=Lt,S*(be/=Lt)<q*(ue/=Lt)&&(S=-S,q=-q,At=-At,et=-et),{scale:new Xe(et,0,0,Lt,0,0),translate:new Xe(1,0,0,1,Ae,Ge),rotate:new Xe(S,q,-q,S,0,0),skew:new Xe(1,0,At,1,0,0)}},Xe.prototype.toString=function(S){return this.join(" ")},Xe.prototype.inversed=function(){var S=this.sx,q=this.shy,ue=this.shx,be=this.sy,Ae=this.tx,Ge=this.ty,et=1/(S*be-q*ue),At=be*et,Lt=-q*et,Xt=-ue*et,on=S*et;return new Xe(At,Lt,Xt,on,-At*Ae-Xt*Ge,-Lt*Ae-on*Ge)},Xe.prototype.applyToPoint=function(S){var q=S.x*this.sx+S.y*this.shx+this.tx,ue=S.x*this.shy+S.y*this.sy+this.ty;return new Ai(q,ue)},Xe.prototype.applyToRectangle=function(S){var q=this.applyToPoint(S),ue=this.applyToPoint(new Ai(S.x+S.w,S.y+S.h));return new Da(q.x,q.y,ue.x-q.x,ue.y-q.y)},Xe.prototype.clone=function(){var S=this.sx,q=this.shy,ue=this.shx,be=this.sy,Ae=this.tx,Ge=this.ty;return new Xe(S,q,ue,be,Ae,Ge)},b.Matrix=Xe;var Mt=b.matrixMult=function(S,q){return q.multiply(S)},pn=new Xe(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=pn;var sn=function(S,q){if(!Ft[S]){var ue=(q instanceof cu?"Sh":"P")+(Object.keys(yt).length+1).toString(10);q.id=ue,Ft[S]=ue,yt[ue]=q,Rt.publish("addPattern",q)}};b.ShadingPattern=cu,b.TilingPattern=Sh,b.addShadingPattern=function(S,q){return z("addShadingPattern()"),sn(S,q),this},b.beginTilingPattern=function(S){z("beginTilingPattern()"),tl(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},b.endTilingPattern=function(S,q){z("endTilingPattern()"),q.stream=Fe[P].join(`
`),sn(S,q),Rt.publish("endTilingPattern",q),lt.pop().restore()};var hn,en=b.__private__.newObject=function(){var S=yn();return Qt(S,!0),S},yn=b.__private__.newObjectDeferred=function(){return oe++,fe[oe]=function(){return Se},oe},Qt=function(S,q){return q=typeof q=="boolean"&&q,fe[S]=Se,q&&$(S+" 0 obj"),S},xn=b.__private__.newAdditionalObject=function(){var S={objId:yn(),content:""};return ye.push(S),S},Sn=yn(),Ln=yn(),qn=b.__private__.decodeColorString=function(S){var q=S.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var ue=parseFloat(q[0]);q=[ue,ue,ue,"r"]}for(var be="#",Ae=0;Ae<3;Ae++)be+=("0"+Math.floor(255*parseFloat(q[Ae])).toString(16)).slice(-2);return be},vr=b.__private__.encodeColorString=function(S){var q;typeof S=="string"&&(S={ch1:S});var ue=S.ch1,be=S.ch2,Ae=S.ch3,Ge=S.ch4,et=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ue=="string"&&ue.charAt(0)!=="#"){var At=new i4(ue);if(At.ok)ue=At.toHex();else if(!/^\d*\.?\d*$/.test(ue))throw new Error('Invalid color "'+ue+'" passed to jsPDF.encodeColorString.')}if(typeof ue=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ue)&&(ue="#"+ue[1]+ue[1]+ue[2]+ue[2]+ue[3]+ue[3]),typeof ue=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ue)){var Lt=parseInt(ue.substr(1),16);ue=Lt>>16&255,be=Lt>>8&255,Ae=255&Lt}if(be===void 0||Ge===void 0&&ue===be&&be===Ae)q=typeof ue=="string"?ue+" "+et[0]:S.precision===2?M(ue/255)+" "+et[0]:V(ue/255)+" "+et[0];else if(Ge===void 0||er(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return["1.","1.","1.",et[1]].join(" ");q=typeof ue=="string"?[ue,be,Ae,et[1]].join(" "):S.precision===2?[M(ue/255),M(be/255),M(Ae/255),et[1]].join(" "):[V(ue/255),V(be/255),V(Ae/255),et[1]].join(" ")}else q=typeof ue=="string"?[ue,be,Ae,Ge,et[2]].join(" "):S.precision===2?[M(ue),M(be),M(Ae),M(Ge),et[2]].join(" "):[V(ue),V(be),V(Ae),V(Ge),et[2]].join(" ");return q},wn=b.__private__.getFilters=function(){return u},nn=b.__private__.putStream=function(S){var q=(S=S||{}).data||"",ue=S.filters||wn(),be=S.alreadyAppliedFilters||[],Ae=S.addLength1||!1,Ge=q.length,et=S.objectId,At=function(Jr){return Jr};if(m!==null&&et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(At=jr.encryptor(et,0));var Lt={};ue===!0&&(ue=["FlateEncode"]);var Xt=S.additionalKeyValues||[],on=(Lt=It.API.processDataByFilters!==void 0?It.API.processDataByFilters(q,ue):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Lt.data.length!==0&&(Xt.push({key:"Length",value:Lt.data.length}),Ae===!0&&Xt.push({key:"Length1",value:Ge})),on.length!=0)if(on.split("/").length-1==1)Xt.push({key:"Filter",value:on});else{Xt.push({key:"Filter",value:"["+on+"]"});for(var On=0;On<Xt.length;On+=1)if(Xt[On].key==="DecodeParms"){for(var xr=[],Vr=0;Vr<Lt.reverseChain.split("/").length-1;Vr+=1)xr.push("null");xr.push(Xt[On].value),Xt[On].value="["+xr.join(" ")+"]"}}$("<<");for(var rr=0;rr<Xt.length;rr++)$("/"+Xt[rr].key+" "+Xt[rr].value);$(">>"),Lt.data.length!==0&&($("stream"),$(At(Lt.data)),$("endstream"))},mn=b.__private__.putPage=function(S){var q=S.number,ue=S.data,be=S.objId,Ae=S.contentsObjId;Qt(be,!0),$("<</Type /Page"),$("/Parent "+S.rootDictionaryObjId+" 0 R"),$("/Resources "+S.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(O(S.mediaBox.bottomLeftX))+" "+parseFloat(O(S.mediaBox.bottomLeftY))+" "+O(S.mediaBox.topRightX)+" "+O(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&$("/CropBox ["+O(S.cropBox.bottomLeftX)+" "+O(S.cropBox.bottomLeftY)+" "+O(S.cropBox.topRightX)+" "+O(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&$("/BleedBox ["+O(S.bleedBox.bottomLeftX)+" "+O(S.bleedBox.bottomLeftY)+" "+O(S.bleedBox.topRightX)+" "+O(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&$("/TrimBox ["+O(S.trimBox.bottomLeftX)+" "+O(S.trimBox.bottomLeftY)+" "+O(S.trimBox.topRightX)+" "+O(S.trimBox.topRightY)+"]"),S.artBox!==null&&$("/ArtBox ["+O(S.artBox.bottomLeftX)+" "+O(S.artBox.bottomLeftY)+" "+O(S.artBox.topRightX)+" "+O(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&$("/UserUnit "+S.userUnit),Rt.publish("putPage",{objId:be,pageContext:mt[q],pageNumber:q,page:ue}),$("/Contents "+Ae+" 0 R"),$(">>"),$("endobj");var Ge=ue.join(`
`);return F===D&&(Ge+=`
Q`),Qt(Ae,!0),nn({data:Ge,filters:wn(),objectId:Ae}),$("endobj"),be},tr=b.__private__.putPages=function(){var S,q,ue=[];for(S=1;S<=St;S++)mt[S].objId=yn(),mt[S].contentsObjId=yn();for(S=1;S<=St;S++)ue.push(mn({number:S,data:Fe[S],objId:mt[S].objId,contentsObjId:mt[S].contentsObjId,mediaBox:mt[S].mediaBox,cropBox:mt[S].cropBox,bleedBox:mt[S].bleedBox,trimBox:mt[S].trimBox,artBox:mt[S].artBox,userUnit:mt[S].userUnit,rootDictionaryObjId:Sn,resourceDictionaryObjId:Ln}));Qt(Sn,!0),$("<</Type /Pages");var be="/Kids [";for(q=0;q<St;q++)be+=ue[q]+" 0 R ";$(be+"]"),$("/Count "+St),$(">>"),$("endobj"),Rt.publish("postPutPages")},Ne=function(S){Rt.publish("putFont",{font:S,out:$,newObject:en,putStream:nn}),S.isAlreadyPutted!==!0&&(S.objectNumber=en(),$("<<"),$("/Type /Font"),$("/BaseFont /"+yh(S.postScriptName)),$("/Subtype /Type1"),typeof S.encoding=="string"&&$("/Encoding /"+S.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},Ie=function(S){S.objectNumber=en();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[O(S.x),O(S.y),O(S.x+S.width),O(S.y+S.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var ue=S.pages[1].join(`
`);nn({data:ue,additionalKeyValues:q,objectId:S.objectNumber}),$("endobj")},rt=function(S,q){q||(q=21);var ue=en(),be=(function(et,At){var Lt,Xt=[],on=1/(At-1);for(Lt=0;Lt<1;Lt+=on)Xt.push(Lt);if(Xt.push(1),et[0].offset!=0){var On={offset:0,color:et[0].color};et.unshift(On)}if(et[et.length-1].offset!=1){var xr={offset:1,color:et[et.length-1].color};et.push(xr)}for(var Vr="",rr=0,Jr=0;Jr<Xt.length;Jr++){for(Lt=Xt[Jr];Lt>et[rr+1].offset;)rr++;var Ur=et[rr].offset,xs=(Lt-Ur)/(et[rr+1].offset-Ur),za=et[rr].color,Qi=et[rr+1].color;Vr+=J(Math.round((1-xs)*za[0]+xs*Qi[0]).toString(16))+J(Math.round((1-xs)*za[1]+xs*Qi[1]).toString(16))+J(Math.round((1-xs)*za[2]+xs*Qi[2]).toString(16))}return Vr.trim()})(S.colors,q),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+q+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nn({data:be,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ue}),$("endobj"),S.objectNumber=en(),$("<< /ShadingType "+S.type),$("/ColorSpace /DeviceRGB");var Ge="/Coords ["+O(parseFloat(S.coords[0]))+" "+O(parseFloat(S.coords[1]))+" ";S.type===2?Ge+=O(parseFloat(S.coords[2]))+" "+O(parseFloat(S.coords[3])):Ge+=O(parseFloat(S.coords[2]))+" "+O(parseFloat(S.coords[3]))+" "+O(parseFloat(S.coords[4]))+" "+O(parseFloat(S.coords[5])),$(Ge+="]"),S.matrix&&$("/Matrix ["+S.matrix.toString()+"]"),$("/Function "+ue+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},Yt=function(S,q){var ue=yn(),be=en();q.push({resourcesOid:ue,objectOid:be}),S.objectNumber=be;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+S.boundingBox.map(O).join(" ")+"]"}),Ae.push({key:"XStep",value:O(S.xStep)}),Ae.push({key:"YStep",value:O(S.yStep)}),Ae.push({key:"Resources",value:ue+" 0 R"}),S.matrix&&Ae.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),nn({data:S.stream,additionalKeyValues:Ae,objectId:S.objectNumber}),$("endobj")},$n=function(S){for(var q in S.objectNumber=en(),$("<<"),S)switch(q){case"opacity":$("/ca "+M(S[q]));break;case"stroke-opacity":$("/CA "+M(S[q]))}$(">>"),$("endobj")},an=function(S){Qt(S.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var q in $("/Font <<"),bt)bt.hasOwnProperty(q)&&(y===!1||y===!0&&_.hasOwnProperty(q))&&$("/"+q+" "+bt[q].objectNumber+" 0 R");$(">>")})(),(function(){if(Object.keys(yt).length>0){for(var q in $("/Shading <<"),yt)yt.hasOwnProperty(q)&&yt[q]instanceof cu&&yt[q].objectNumber>=0&&$("/"+q+" "+yt[q].objectNumber+" 0 R");Rt.publish("putShadingPatternDict"),$(">>")}})(),(function(q){if(Object.keys(yt).length>0){for(var ue in $("/Pattern <<"),yt)yt.hasOwnProperty(ue)&&yt[ue]instanceof b.TilingPattern&&yt[ue].objectNumber>=0&&yt[ue].objectNumber<q&&$("/"+ue+" "+yt[ue].objectNumber+" 0 R");Rt.publish("putTilingPatternDict"),$(">>")}})(S.objectOid),(function(){if(Object.keys(vt).length>0){var q;for(q in $("/ExtGState <<"),vt)vt.hasOwnProperty(q)&&vt[q].objectNumber>=0&&$("/"+q+" "+vt[q].objectNumber+" 0 R");Rt.publish("putGStateDict"),$(">>")}})(),(function(){for(var q in $("/XObject <<"),xe)xe.hasOwnProperty(q)&&xe[q].objectNumber>=0&&$("/"+q+" "+xe[q].objectNumber+" 0 R");Rt.publish("putXobjectDict"),$(">>")})(),$(">>"),$("endobj")},$t=function(S){jt[S.fontName]=jt[S.fontName]||{},jt[S.fontName][S.fontStyle]=S.id},nr=function(S,q,ue,be,Ae){var Ge={id:"F"+(Object.keys(bt).length+1).toString(10),postScriptName:S,fontName:q,fontStyle:ue,encoding:be,isStandardFont:Ae||!1,metadata:{}};return Rt.publish("addFont",{font:Ge,instance:this}),bt[Ge.id]=Ge,$t(Ge),Ge.id},Zn=b.__private__.pdfEscape=b.pdfEscape=function(S,q){return(function(ue,be){var Ae,Ge,et,At,Lt,Xt,on,On,xr;if(et=(be=be||{}).sourceEncoding||"Unicode",Lt=be.outputEncoding,(be.autoencode||Lt)&&bt[dt].metadata&&bt[dt].metadata[et]&&bt[dt].metadata[et].encoding&&(At=bt[dt].metadata[et].encoding,!Lt&&bt[dt].encoding&&(Lt=bt[dt].encoding),!Lt&&At.codePages&&(Lt=At.codePages[0]),typeof Lt=="string"&&(Lt=At[Lt]),Lt)){for(on=!1,Xt=[],Ae=0,Ge=ue.length;Ae<Ge;Ae++)(On=Lt[ue.charCodeAt(Ae)])?Xt.push(String.fromCharCode(On)):Xt.push(ue[Ae]),Xt[Ae].charCodeAt(0)>>8&&(on=!0);ue=Xt.join("")}for(Ae=ue.length;on===void 0&&Ae!==0;)ue.charCodeAt(Ae-1)>>8&&(on=!0),Ae--;if(!on)return ue;for(Xt=be.noBOM?[]:[254,255],Ae=0,Ge=ue.length;Ae<Ge;Ae++){if((xr=(On=ue.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+ue+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Xt.push(xr),Xt.push(On-(xr<<8))}return String.fromCharCode.apply(void 0,Xt)})(S,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ir=b.__private__.beginPage=function(S){Fe[++St]=[],mt[St]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},Ms(St),ct(Fe[P])},ms=function(S,q){var ue,be,Ae;switch(t=q||t,typeof S=="string"&&(ue=T(S.toLowerCase()),Array.isArray(ue)&&(be=ue[0],Ae=ue[1])),Array.isArray(S)&&(be=S[0]*xt,Ae=S[1]*xt),isNaN(be)&&(be=a[0],Ae=a[1]),(be>14400||Ae>14400)&&(pr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Ae=Math.min(14400,Ae)),a=[be,Ae],t.substr(0,1)){case"l":Ae>be&&(a=[Ae,be]);break;case"p":be>Ae&&(a=[Ae,be])}Ir(a),Ut(Ko),$(pi),Bl!==0&&$(Bl+" J"),as!==0&&$(as+" j"),Rt.publish("addPage",{pageNumber:St})},ei=function(S){S>0&&S<=St&&(Fe.splice(S,1),mt.splice(S,1),St--,P>St&&(P=St),this.setPage(P))},Ms=function(S){S>0&&S<=St&&(P=S)},Us=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Fe.length-1},Hs=function(S,q,ue){var be,Ae=void 0;return ue=ue||{},S=S!==void 0?S:bt[dt].fontName,q=q!==void 0?q:bt[dt].fontStyle,be=S.toLowerCase(),jt[be]!==void 0&&jt[be][q]!==void 0?Ae=jt[be][q]:jt[S]!==void 0&&jt[S][q]!==void 0?Ae=jt[S][q]:ue.disableWarning===!1&&pr.warn("Unable to look up font label for font '"+S+"', '"+q+"'. Refer to getFontList() for available fonts."),Ae||ue.noFallback||(Ae=jt.times[q])==null&&(Ae=jt.times.normal),Ae},qr=b.__private__.putInfo=function(){var S=en(),q=function(be){return be};for(var ue in m!==null&&(q=jr.encryptor(S,0)),$("<<"),$("/Producer ("+Zn(q("jsPDF "+It.version))+")"),gt)gt.hasOwnProperty(ue)&&gt[ue]&&$("/"+ue.substr(0,1).toUpperCase()+ue.substr(1)+" ("+Zn(q(gt[ue]))+")");$("/CreationDate ("+Zn(q(he))+")"),$(">>"),$("endobj")},ti=b.__private__.putCatalog=function(S){var q=(S=S||{}).rootDictionaryObjId||Sn;switch(en(),$("<<"),$("/Type /Catalog"),$("/Pages "+q+" 0 R"),tt||(tt="fullwidth"),tt){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ue=""+tt;ue.substr(ue.length-1)==="%"&&(tt=parseInt(tt)/100),typeof tt=="number"&&$("/OpenAction [3 0 R /XYZ null null "+M(tt)+"]")}switch(at||(at="continuous"),at){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}it&&$("/PageMode /"+it),Rt.publish("putCatalog"),$(">>"),$("endobj")},gs=b.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(oe+1)),$("/Root "+oe+" 0 R"),$("/Info "+(oe-1)+" 0 R"),m!==null&&$("/Encrypt "+jr.oid+" 0 R"),$("/ID [ <"+I+"> <"+I+"> ]"),$(">>")},Tn=b.__private__.putHeader=function(){$("%PDF-"+N),$("%")},Il=b.__private__.putXRef=function(){var S="0000000000";$("xref"),$("0 "+(oe+1)),$("0000000000 65535 f ");for(var q=1;q<=oe;q++)typeof fe[q]=="function"?$((S+fe[q]()).slice(-10)+" 00000 n "):fe[q]!==void 0?$((S+fe[q]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},fi=b.__private__.buildDocument=function(){var S;oe=0,Se=0,me=[],fe=[],ye=[],Sn=yn(),Ln=yn(),ct(me),Rt.publish("buildDocument"),Tn(),tr(),(function(){Rt.publish("putAdditionalObjects");for(var ue=0;ue<ye.length;ue++){var be=ye[ue];Qt(be.objId,!0),$(be.content),$("endobj")}Rt.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var ue in bt)bt.hasOwnProperty(ue)&&(y===!1||y===!0&&_.hasOwnProperty(ue))&&Ne(bt[ue])})(),(function(){var ue;for(ue in vt)vt.hasOwnProperty(ue)&&$n(vt[ue])})(),(function(){for(var ue in xe)xe.hasOwnProperty(ue)&&Ie(xe[ue])})(),(function(ue){var be;for(be in yt)yt.hasOwnProperty(be)&&(yt[be]instanceof cu?rt(yt[be]):yt[be]instanceof Sh&&Yt(yt[be],ue))})(S),Rt.publish("putResources"),S.forEach(an),an({resourcesOid:Ln,objectOid:Number.MAX_SAFE_INTEGER}),Rt.publish("postPutResources"),m!==null&&(jr.oid=en(),$("<<"),$("/Filter /Standard"),$("/V "+jr.v),$("/R "+jr.r),$("/U <"+jr.toHexString(jr.U)+">"),$("/O <"+jr.toHexString(jr.O)+">"),$("/P "+jr.P),$(">>"),$("endobj")),qr(),ti();var q=Se;return Il(),gs(),$("startxref"),$(""+q),$("%%EOF"),ct(Fe[P]),me.join(`
`)},Xi=b.__private__.getBlob=function(S){return new Blob([pt(S)],{type:"application/pdf"})},yo=b.output=b.__private__.output=(hn=function(S,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",S){case void 0:return fi();case"save":b.save(q.filename);break;case"arraybuffer":return pt(fi());case"blob":return Xi(fi());case"bloburi":case"bloburl":if(Jt.URL!==void 0&&typeof Jt.URL.createObjectURL=="function")return Jt.URL&&Jt.URL.createObjectURL(Xi(fi()))||void 0;pr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ue="",be=fi();try{ue=Qy(be)}catch{ue=Qy(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+q.filename+";base64,"+ue;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(Ae=q.pdfObjectUrl,Ge="");var et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",At=Jt.open();return At!==null&&At.document.write(et),At}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',Xt=Jt.open();if(Xt!==null){Xt.document.write(Lt);var on=this;Xt.document.documentElement.querySelector("#pdfViewer").onload=function(){Xt.document.title=q.filename,Xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(on.output("bloburl"))}}return Xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var On='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',xr=Jt.open();if(xr!==null&&(xr.document.write(On),xr.document.title=q.filename),xr||typeof safari>"u")return xr;break;case"datauri":case"dataurl":return Jt.document.location.href=this.output("datauristring",q);default:return null}},hn.foo=function(){try{return hn.apply(this,arguments)}catch(ue){var S=ue.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var q="Error in function "+S.split(`
`)[0].split("<")[0]+": "+ue.message;if(!Jt.console)throw new Error(q);Jt.console.error(q,ue),Jt.alert&&alert(q)}},hn.foo.bar=hn,hn.foo),bs=function(S){return Array.isArray(Oe)===!0&&Oe.indexOf(S)>-1};switch(s){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=bs("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);xt=s}var jr=null;G(),ie();var yr=b.__private__.getPageInfo=b.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mt[S].objId,pageNumber:S,pageContext:mt[S]}},xo=b.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in mt)if(mt[q].objId===S)break;return yr(q)},Vl=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:mt[P].objId,pageNumber:P,pageContext:mt[P]}};b.addPage=function(){return ms.apply(this,arguments),this},b.setPage=function(){return Ms.apply(this,arguments),ct.call(this,Fe[P]),this},b.insertPage=function(S){return this.addPage(),this.movePage(P,S),this},b.movePage=function(S,q){var ue,be;if(S>q){ue=Fe[S],be=mt[S];for(var Ae=S;Ae>q;Ae--)Fe[Ae]=Fe[Ae-1],mt[Ae]=mt[Ae-1];Fe[q]=ue,mt[q]=be,this.setPage(q)}else if(S<q){ue=Fe[S],be=mt[S];for(var Ge=S;Ge<q;Ge++)Fe[Ge]=Fe[Ge+1],mt[Ge]=mt[Ge+1];Fe[q]=ue,mt[q]=be,this.setPage(q)}return this},b.deletePage=function(){return ei.apply(this,arguments),this},b.__private__.text=b.text=function(S,q,ue,be,Ae){var Ge,et,At,Lt,Xt,on,On,xr,Vr,rr=(be=be||{}).scope||this;if(typeof S=="number"&&typeof q=="number"&&(typeof ue=="string"||Array.isArray(ue))){var Jr=ue;ue=q,q=S,S=Jr}if(arguments[3]instanceof Xe==0?(At=arguments[4],Lt=arguments[5],er(On=arguments[3])==="object"&&On!==null||(typeof At=="string"&&(Lt=At,At=null),typeof On=="string"&&(Lt=On,On=null),typeof On=="number"&&(At=On,On=null),be={flags:On,angle:At,align:Lt})):(z("The transform parameter of text() with a Matrix value"),Vr=Ae),isNaN(q)||isNaN(ue)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return rr;var Ur,xs="",za=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:Oa,Qi=rr.internal.scaleFactor;function Pa(zn){return zn=zn.split("	").join(Array(be.TabLen||9).join(" ")),Zn(zn,On)}function zc(zn){for(var Dn,sr=zn.concat(),Br=[],wa=sr.length;wa--;)typeof(Dn=sr.shift())=="string"?Br.push(Dn):Array.isArray(zn)&&(Dn.length===1||Dn[1]===void 0&&Dn[2]===void 0)?Br.push(Dn[0]):Br.push([Dn[0],Dn[1],Dn[2]]);return Br}function Pl(zn,Dn){var sr;if(typeof zn=="string")sr=Dn(zn)[0];else if(Array.isArray(zn)){for(var Br,wa,ta=zn.concat(),il=[],Uc=ta.length;Uc--;)typeof(Br=ta.shift())=="string"?il.push(Dn(Br)[0]):Array.isArray(Br)&&typeof Br[0]=="string"&&(wa=Dn(Br[0],Br[1],Br[2]),il.push([wa[0],wa[1],wa[2]]));sr=il}return sr}var pa=!1,Ki=!0;if(typeof S=="string")pa=!0;else if(Array.isArray(S)){var rl=S.concat();et=[];for(var qa,os=rl.length;os--;)(typeof(qa=rl.shift())!="string"||Array.isArray(qa)&&typeof qa[0]!="string")&&(Ki=!1);pa=Ki}if(pa===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var _o=Le/rr.internal.scaleFactor,So=_o*(za-1);switch(be.baseline){case"bottom":ue-=So;break;case"top":ue+=_o-So;break;case"hanging":ue+=_o-2*So;break;case"middle":ue+=_o/2-So}if((on=be.maxWidth||0)>0&&(typeof S=="string"?S=rr.splitTextToSize(S,on):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(zn,Dn){return zn.concat(rr.splitTextToSize(Dn,on))},[]))),Ge={text:S,x:q,y:ue,options:be,mutex:{pdfEscape:Zn,activeFontKey:dt,fonts:bt,activeFontSize:Le}},Rt.publish("preProcessText",Ge),S=Ge.text,At=(be=Ge.options).angle,Vr instanceof Xe==0&&At&&typeof At=="number"){At*=Math.PI/180,be.rotationDirection===0&&(At=-At),F===D&&(At=-At);var ql=Math.cos(At),ma=Math.sin(At);Vr=new Xe(ql,ma,-ma,ql,0,0)}else At&&At instanceof Xe&&(Vr=At);F!==D||Vr||(Vr=pn),(Xt=be.charSpace||Ni)!==void 0&&(xs+=O(H(Xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xr=be.horizontalScale)!==void 0&&(xs+=O(100*xr)+` Tz
`),be.lang;var Gs=-1,Ua=be.renderingMode!==void 0?be.renderingMode:be.stroke,Ul=rr.internal.getCurrentPageInfo().pageContext;switch(Ua){case 0:case!1:case"fill":Gs=0;break;case 1:case!0:case"stroke":Gs=1;break;case 2:case"fillThenStroke":Gs=2;break;case 3:case"invisible":Gs=3;break;case 4:case"fillAndAddForClipping":Gs=4;break;case 5:case"strokeAndAddPathForClipping":Gs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gs=6;break;case 7:case"addToPathForClipping":Gs=7}var Pc=Ul.usedRenderingMode!==void 0?Ul.usedRenderingMode:-1;Gs!==-1?xs+=Gs+` Tr
`:Pc!==-1&&(xs+=`0 Tr
`),Gs!==-1&&(Ul.usedRenderingMode=Gs),Lt=be.align||"left";var mi,Ji=Le*za,Ha=rr.internal.pageSize.getWidth(),qc=bt[dt];Xt=be.charSpace||Ni,on=be.maxWidth||0,On=Object.assign({autoencode:!0,noBOM:!0},be.flags);var ea=[],No=function(zn){return rr.getStringUnitWidth(zn,{font:qc,charSpace:Xt,fontSize:Le,doKerning:!1})*Le/Qi};if(Object.prototype.toString.call(S)==="[object Array]"){var ri;et=zc(S),Lt!=="left"&&(mi=et.map(No));var Ws,ga=0;if(Lt==="right"){q-=mi[0],S=[],os=et.length;for(var ba=0;ba<os;ba++)ba===0?(Ws=di(q),ri=ys(ue)):(Ws=H(ga-mi[ba]),ri=-Ji),S.push([et[ba],Ws,ri]),ga=mi[ba]}else if(Lt==="center"){q-=mi[0]/2,S=[],os=et.length;for(var Ga=0;Ga<os;Ga++)Ga===0?(Ws=di(q),ri=ys(ue)):(Ws=H((ga-mi[Ga])/2),ri=-Ji),S.push([et[Ga],Ws,ri]),ga=mi[Ga]}else if(Lt==="left"){S=[],os=et.length;for(var Hl=0;Hl<os;Hl++)S.push(et[Hl])}else if(Lt==="justify"&&qc.encoding==="Identity-H"){S=[],os=et.length,on=on!==0?on:Ha;for(var Gl=0,Fr=0;Fr<os;Fr++)if(ri=Fr===0?ys(ue):-Ji,Ws=Fr===0?di(q):Gl,Fr<os-1){var Du=H((on-mi[Fr])/(et[Fr].split(" ").length-1)),va=et[Fr].split(" ");S.push([va[0]+" ",Ws,ri]),Gl=0;for(var ya=1;ya<va.length;ya++){var ws=(No(va[ya-1]+" "+va[ya])-No(va[ya]))*Qi+Du;ya==va.length-1?S.push([va[ya],ws,0]):S.push([va[ya]+" ",ws,0]),Gl-=ws}}else S.push([et[Fr],Ws,ri]);S.push(["",Gl,0])}else{if(Lt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],os=et.length,on=on!==0?on:Ha,Fr=0;Fr<os;Fr++){ri=Fr===0?ys(ue):-Ji,Ws=Fr===0?di(q):0;var Wa=et[Fr].split(" ").length-1,Wl=Wa>0?(on-mi[Fr])/Wa:0;Fr<os-1?ea.push(O(H(Wl))):ea.push(0),S.push([et[Fr],Ws,ri])}}}(typeof be.R2L=="boolean"?be.R2L:ot)===!0&&(S=Pl(S,function(zn,Dn,sr){return[zn.split("").reverse().join(""),Dn,sr]})),Ge={text:S,x:q,y:ue,options:be,mutex:{pdfEscape:Zn,activeFontKey:dt,fonts:bt,activeFontSize:Le}},Rt.publish("postProcessText",Ge),S=Ge.text,Ur=Ge.mutex.isHex||!1;var Yl=bt[dt].encoding;Yl!=="WinAnsiEncoding"&&Yl!=="StandardEncoding"||(S=Pl(S,function(zn,Dn,sr){return[Pa(zn),Dn,sr]})),et=zc(S),S=[];for(var Ya,Xa,xa,sl=Array.isArray(et[0])?1:0,gi="",$a=function(zn,Dn,sr){var Br="";return sr instanceof Xe?(sr=typeof be.angle=="number"?Mt(sr,new Xe(1,0,0,1,zn,Dn)):Mt(new Xe(1,0,0,1,zn,Dn),sr),F===D&&(sr=Mt(new Xe(1,0,0,-1,0,0),sr)),Br=sr.join(" ")+` Tm
`):Br=O(zn)+" "+O(Dn)+` Td
`,Br},Ls=0;Ls<et.length;Ls++){switch(gi="",sl){case 1:xa=(Ur?"<":"(")+et[Ls][0]+(Ur?">":")"),Ya=parseFloat(et[Ls][1]),Xa=parseFloat(et[Ls][2]);break;case 0:xa=(Ur?"<":"(")+et[Ls]+(Ur?">":")"),Ya=di(q),Xa=ys(ue)}ea!==void 0&&ea[Ls]!==void 0&&(gi=ea[Ls]+` Tw
`),Ls===0?S.push(gi+$a(Ya,Xa,Vr)+xa):sl===0?S.push(gi+xa):sl===1&&S.push(gi+$a(Ya,Xa,Vr)+xa)}S=sl===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Ci=`BT
/`;return Ci+=dt+" "+Le+` Tf
`,Ci+=O(Le*za)+` TL
`,Ci+=fa+`
`,Ci+=xs,Ci+=S,$(Ci+="ET"),_[dt]=!0,rr};var $o=b.__private__.clip=b.clip=function(S){return $(S==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return $o("evenodd")},b.__private__.discardPath=b.discardPath=function(){return $("n"),this};var vs=b.__private__.isValidStyle=function(S){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(q=!0),q};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(S){return vs(S)&&(d=S),this};var Zo=b.__private__.getStyle=b.getStyle=function(S){var q=d;switch(S){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=S}return q},Dc=b.close=function(){return $("h"),this};b.stroke=function(){return $("S"),this},b.fill=function(S){return $i("f",S),this},b.fillEvenOdd=function(S){return $i("f*",S),this},b.fillStroke=function(S){return $i("B",S),this},b.fillStrokeEvenOdd=function(S){return $i("B*",S),this};var $i=function(S,q){er(q)==="object"?Tu(q,S):$(S)},Qo=function(S){S===null||F===D&&S===void 0||(S=Zo(S),$(S))};function Cu(S,q,ue,be,Ae){var Ge=new Sh(q||this.boundingBox,ue||this.xStep,be||this.yStep,this.gState,Ae||this.matrix);Ge.stream=this.stream;var et=S+"$$"+this.cloneIndex+++"$$";return sn(et,Ge),Ge}var Tu=function(S,q){var ue=Ft[S.key],be=yt[ue];if(be instanceof cu)$("q"),$(Rc(q)),be.gState&&b.setGState(be.gState),$(S.matrix.toString()+" cm"),$("/"+ue+" sh"),$("Q");else if(be instanceof Sh){var Ae=new Xe(1,0,0,-1,0,Ba());S.matrix&&(Ae=Ae.multiply(S.matrix||pn),ue=Cu.call(be,S.key,S.boundingBox,S.xStep,S.yStep,Ae).id),$("q"),$("/Pattern cs"),$("/"+ue+" scn"),be.gState&&b.setGState(be.gState),$(q),$("Q")}},Rc=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ic=b.moveTo=function(S,q){return $(O(H(S))+" "+O(X(q))+" m"),this},ku=b.lineTo=function(S,q){return $(O(H(S))+" "+O(X(q))+" l"),this},ni=b.curveTo=function(S,q,ue,be,Ae,Ge){return $([O(H(S)),O(X(q)),O(H(ue)),O(X(be)),O(H(Ae)),O(X(Ge)),"c"].join(" ")),this};b.__private__.line=b.line=function(S,q,ue,be,Ae){if(isNaN(S)||isNaN(q)||isNaN(ue)||isNaN(be)||!vs(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return F===R?this.lines([[ue-S,be-q]],S,q,[1,1],Ae||"S"):this.lines([[ue-S,be-q]],S,q,[1,1]).stroke()},b.__private__.lines=b.lines=function(S,q,ue,be,Ae,Ge){var et,At,Lt,Xt,on,On,xr,Vr,rr,Jr,Ur,xs;if(typeof S=="number"&&(xs=ue,ue=q,q=S,S=xs),be=be||[1,1],Ge=Ge||!1,isNaN(q)||isNaN(ue)||!Array.isArray(S)||!Array.isArray(be)||!vs(Ae)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ic(q,ue),et=be[0],At=be[1],Xt=S.length,Jr=q,Ur=ue,Lt=0;Lt<Xt;Lt++)(on=S[Lt]).length===2?(Jr=on[0]*et+Jr,Ur=on[1]*At+Ur,ku(Jr,Ur)):(On=on[0]*et+Jr,xr=on[1]*At+Ur,Vr=on[2]*et+Jr,rr=on[3]*At+Ur,Jr=on[4]*et+Jr,Ur=on[5]*At+Ur,ni(On,xr,Vr,rr,Jr,Ur));return Ge&&Dc(),Qo(Ae),this},b.path=function(S){for(var q=0;q<S.length;q++){var ue=S[q],be=ue.c;switch(ue.op){case"m":Ic(be[0],be[1]);break;case"l":ku(be[0],be[1]);break;case"c":ni.apply(this,be);break;case"h":Dc()}}return this},b.__private__.rect=b.rect=function(S,q,ue,be,Ae){if(isNaN(S)||isNaN(q)||isNaN(ue)||isNaN(be)||!vs(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return F===R&&(be=-be),$([O(H(S)),O(X(q)),O(H(ue)),O(H(be)),"re"].join(" ")),Qo(Ae),this},b.__private__.triangle=b.triangle=function(S,q,ue,be,Ae,Ge,et){if(isNaN(S)||isNaN(q)||isNaN(ue)||isNaN(be)||isNaN(Ae)||isNaN(Ge)||!vs(et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ue-S,be-q],[Ae-ue,Ge-be],[S-Ae,q-Ge]],S,q,[1,1],et,!0),this},b.__private__.roundedRect=b.roundedRect=function(S,q,ue,be,Ae,Ge,et){if(isNaN(S)||isNaN(q)||isNaN(ue)||isNaN(be)||isNaN(Ae)||isNaN(Ge)||!vs(et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var At=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*ue),Ge=Math.min(Ge,.5*be),this.lines([[ue-2*Ae,0],[Ae*At,0,Ae,Ge-Ge*At,Ae,Ge],[0,be-2*Ge],[0,Ge*At,-Ae*At,Ge,-Ae,Ge],[2*Ae-ue,0],[-Ae*At,0,-Ae,-Ge*At,-Ae,-Ge],[0,2*Ge-be],[0,-Ge*At,Ae*At,-Ge,Ae,-Ge]],S+Ae,q,[1,1],et,!0),this},b.__private__.ellipse=b.ellipse=function(S,q,ue,be,Ae){if(isNaN(S)||isNaN(q)||isNaN(ue)||isNaN(be)||!vs(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*ue,et=4/3*(Math.SQRT2-1)*be;return Ic(S+ue,q),ni(S+ue,q-et,S+Ge,q-be,S,q-be),ni(S-Ge,q-be,S-ue,q-et,S-ue,q),ni(S-ue,q+et,S-Ge,q+be,S,q+be),ni(S+Ge,q+be,S+ue,q+et,S+ue,q),Qo(Ae),this},b.__private__.circle=b.circle=function(S,q,ue,be){if(isNaN(S)||isNaN(q)||isNaN(ue)||!vs(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,q,ue,ue,be)},b.setFont=function(S,q,ue){return ue&&(q=Y(q,ue)),dt=Hs(S,q,{disableWarning:!1}),this};var Zi=b.__private__.getFont=b.getFont=function(){return bt[Hs.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var S,q,ue={};for(S in jt)if(jt.hasOwnProperty(S))for(q in ue[S]=[],jt[S])jt[S].hasOwnProperty(q)&&ue[S].push(q);return ue},b.addFont=function(S,q,ue,be,Ae){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(ue=Y(ue,be)),nr.call(this,S,q,ue,Ae=Ae||"Identity-H")};var Oa,Ko=r.lineWidth||.200025,wo=b.__private__.getLineWidth=b.getLineWidth=function(){return Ko},Ut=b.__private__.setLineWidth=b.setLineWidth=function(S){return Ko=S,$(O(H(S))+" w"),this};b.__private__.setLineDash=It.API.setLineDash=It.API.setLineDashPattern=function(S,q){if(S=S||[],q=q||0,isNaN(q)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(ue){return O(H(ue))}).join(" "),q=O(H(q)),$("["+S+"] "+q+" d"),this};var ju=b.__private__.getLineHeight=b.getLineHeight=function(){return Le*Oa};b.__private__.getLineHeight=b.getLineHeight=function(){return Le*Oa};var Vc=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Oa=S),this},Eu=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Oa};Vc(r.lineHeight);var di=b.__private__.getHorizontalCoordinate=function(S){return H(S)},ys=b.__private__.getVerticalCoordinate=function(S){return F===D?S:mt[P].mediaBox.topRightY-mt[P].mediaBox.bottomLeftY-H(S)},Fc=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(S){return O(di(S))},Jo=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(S){return O(ys(S))},pi=r.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return qn(pi)},b.__private__.setStrokeColor=b.setDrawColor=function(S,q,ue,be){return pi=vr({ch1:S,ch2:q,ch3:ue,ch4:be,pdfColorType:"draw",precision:2}),$(pi),this};var el=r.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return qn(el)},b.__private__.setFillColor=b.setFillColor=function(S,q,ue,be){return el=vr({ch1:S,ch2:q,ch3:ue,ch4:be,pdfColorType:"fill",precision:2}),$(el),this};var fa=r.textColor||"0 g",Mu=b.__private__.getTextColor=b.getTextColor=function(){return qn(fa)};b.__private__.setTextColor=b.setTextColor=function(S,q,ue,be){return fa=vr({ch1:S,ch2:q,ch3:ue,ch4:be,pdfColorType:"text",precision:3}),this};var Ni=r.charSpace,Fl=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Ni||0)};b.__private__.setCharSpace=b.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ni=S,this};var Bl=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(S){var q=b.CapJoinStyles[S];if(q===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Bl=q,$(q+" J"),this};var as=0;b.__private__.setLineJoin=b.setLineJoin=function(S){var q=b.CapJoinStyles[S];if(q===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return as=q,$(q+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(O(H(S))+" M"),this},b.GState=Np,b.setGState=function(S){(S=typeof S=="string"?vt[Dt[S]]:da(null,S)).equals(dn)||($("/"+S.id+" gs"),dn=S)};var da=function(S,q){if(!S||!Dt[S]){var ue=!1;for(var be in vt)if(vt.hasOwnProperty(be)&&vt[be].equals(q)){ue=!0;break}if(ue)q=vt[be];else{var Ae="GS"+(Object.keys(vt).length+1).toString(10);vt[Ae]=q,q.id=Ae}return S&&(Dt[S]=q.id),Rt.publish("addGState",q),q}};b.addGState=function(S,q){return da(S,q),this},b.saveGraphicsState=function(){return $("q"),qt.push({key:dt,size:Le,color:fa}),this},b.restoreGraphicsState=function(){$("Q");var S=qt.pop();return dt=S.key,Le=S.size,fa=S.color,dn=null,this},b.setCurrentTransformationMatrix=function(S){return $(S.toString()+" cm"),this},b.comment=function(S){return $("#"+S),this};var Ai=function(S,q){var ue=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ue},set:function(Ge){isNaN(Ge)||(ue=parseFloat(Ge))}});var be=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(Ge){isNaN(Ge)||(be=parseFloat(Ge))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(Ge){Ae=Ge.toString()}}),this},Da=function(S,q,ue,be){Ai.call(this,S,q),this.type="rect";var Ae=ue||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(et){isNaN(et)||(Ae=parseFloat(et))}});var Ge=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(et){isNaN(et)||(Ge=parseFloat(et))}}),this},zl=function(){this.page=St,this.currentPage=P,this.pages=Fe.slice(0),this.pagesContext=mt.slice(0),this.x=ht,this.y=rn,this.matrix=Vt,this.width=Ia(P),this.height=Bc(P),this.outputDestination=Je,this.id="",this.objectNumber=-1};zl.prototype.restore=function(){St=this.page,P=this.currentPage,mt=this.pagesContext,Fe=this.pages,ht=this.x,rn=this.y,Vt=this.matrix,nl(P,this.width),Va(P,this.height),Je=this.outputDestination};var tl=function(S,q,ue,be,Ae){lt.push(new zl),St=P=0,Fe=[],ht=S,rn=q,Vt=Ae,Ir([ue,be])};for(var Ra in b.beginFormObject=function(S,q,ue,be,Ae){return tl(S,q,ue,be,Ae),this},b.endFormObject=function(S){return(function(q){if(Pe[q])lt.pop().restore();else{var ue=new zl,be="Xo"+(Object.keys(xe).length+1).toString(10);ue.id=be,Pe[q]=be,xe[be]=ue,Rt.publish("addFormObject",ue),lt.pop().restore()}})(S),this},b.doFormObject=function(S,q){var ue=xe[Pe[S]];return $("q"),$(q.toString()+" cm"),$("/"+ue.id+" Do"),$("Q"),this},b.getFormObject=function(S){var q=xe[Pe[S]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},b.save=function(S,q){return S=S||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(ou(Xi(fi()),S),typeof ou.unload=="function"&&Jt.setTimeout&&setTimeout(ou.unload,911),this):new Promise(function(ue,be){try{var Ae=ou(Xi(fi()),S);typeof ou.unload=="function"&&Jt.setTimeout&&setTimeout(ou.unload,911),ue(Ae)}catch(Ge){be(Ge.message)}})},It.API)It.API.hasOwnProperty(Ra)&&(Ra==="events"&&It.API.events.length?(function(S,q){var ue,be,Ae;for(Ae=q.length-1;Ae!==-1;Ae--)ue=q[Ae][0],be=q[Ae][1],S.subscribe.apply(S,[ue].concat(typeof be=="function"?[be]:be))})(Rt,It.API.events):b[Ra]=It.API[Ra]);function Ia(S){return mt[S].mediaBox.topRightX-mt[S].mediaBox.bottomLeftX}function nl(S,q){mt[S].mediaBox.topRightX=q+mt[S].mediaBox.bottomLeftX}function Bc(S){return mt[S].mediaBox.topRightY-mt[S].mediaBox.bottomLeftY}function Va(S,q){mt[S].mediaBox.topRightY=q+mt[S].mediaBox.bottomLeftY}var Fa=b.getPageWidth=function(S){return Ia(S=S||P)/xt},Lu=b.setPageWidth=function(S,q){nl(S,q*xt)},Ba=b.getPageHeight=function(S){return Bc(S=S||P)/xt},Ou=b.setPageHeight=function(S,q){Va(S,q*xt)};return b.internal={pdfEscape:Zn,getStyle:Zo,getFont:Zi,getFontSize:Ue,getCharSpace:Fl,getTextColor:Mu,getLineHeight:ju,getLineHeightFactor:Eu,getLineWidth:wo,write:Re,getHorizontalCoordinate:di,getVerticalCoordinate:ys,getCoordinateString:Fc,getVerticalCoordinateString:Jo,collections:{},newObject:en,newAdditionalObject:xn,newObjectDeferred:yn,newObjectDeferredBegin:Qt,getFilters:wn,putStream:nn,events:Rt,scaleFactor:xt,pageSize:{getWidth:function(){return Fa(P)},setWidth:function(S){Lu(P,S)},getHeight:function(){return Ba(P)},setHeight:function(S){Ou(P,S)}},encryptionOptions:m,encryption:jr,getEncryptor:function(S){return m!==null?jr.encryptor(S,0):function(q){return q}},output:yo,getNumberOfPages:Us,get pages(){return Fe},out:$,f2:M,f3:V,getPageInfo:yr,getPageInfoByObjId:xo,getCurrentPageInfo:Vl,getPDFVersion:A,Point:Ai,Rectangle:Da,Matrix:Xe,hasHotfix:bs},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Fa(P)},set:function(S){Lu(P,S)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Ba(P)},set:function(S){Ou(P,S)},enumerable:!0,configurable:!0}),(function(S){for(var q=0,ue=Ke.length;q<ue;q++){var be=nr.call(this,S[q][0],S[q][1],S[q][2],Ke[q][3],!0);y===!1&&(_[be]=!0);var Ae=S[q][0].split("-");$t({id:be,fontName:Ae[0],fontStyle:Ae[1]||""})}Rt.publish("addFonts",{fonts:bt,dictionary:jt})}).call(b,Ke),dt="F1",ms(a,t),Rt.publish("initialized"),b}vh.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},vh.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},vh.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},vh.prototype.processOwnerPassword=function(r,e){return Sg(_g(e).substr(0,5),r)},vh.prototype.encryptor=function(r,e){var t=_g(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Sg(t,s)}},Np.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||er(r)!==er(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;s++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},It.API={events:[]},It.version="3.0.4";var Qr=It.API,R2=1,Au=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mh=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},un=function(r){return r.toFixed(2)},yc=function(r){return r.toFixed(5)};Qr.__acroform__={};var Yi=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},tx=function(r){return r*R2},zo=function(r){var e=new c4,t=kt.internal.getHeight(r)||0,s=kt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(un(s)),Number(un(t))],e},SM=Qr.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},NM=Qr.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},AM=Qr.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},ns=Qr.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return AM(r,e-1)},rs=Qr.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return SM(r,e-1)},ss=Qr.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return NM(r,e-1)},CM=Qr.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=r[0],o=r[1],u=r[2],c=r[3],f={};return f.lowerLeft_X=t(a)||0,f.lowerLeft_Y=s(o+c)||0,f.upperRight_X=t(a+u)||0,f.upperRight_Y=s(o)||0,[Number(un(f.lowerLeft_X)),Number(un(f.lowerLeft_Y)),Number(un(f.upperRight_X)),Number(un(f.upperRight_Y))]},TM=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,s=Ng(r,t),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+a+" "+un(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=zo(r);return o.scope=r.scope,o.stream=e.join(`
`),o}},Ng=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=r.multiline?a.map(function(M){return M.split(`
`)}):a.map(function(M){return[M]});var o=t,u=kt.internal.getHeight(r)||0;u=u<0?-u:u;var c=kt.internal.getWidth(r)||0;c=c<0?-c:c;var f=function(M,V,H){if(M+1<a.length){var X=V+" "+a[M+1][0];return R1(X,r,H).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var d,m,y=R1("3",r,o).height,_=r.multiline?u-o:(u-y)/2,b=_+=2,N=0,A=0,k=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+R1(e,r,o=12).width+", FieldWidth:"+c+`
`;break}for(var T="",R=0,D=0;D<a.length;D++)if(a.hasOwnProperty(D)){var F=!1;if(a[D].length!==1&&k!==a[D].length-1){if((y+2)*(R+2)+2>u)continue e;T+=a[D][k],F=!0,A=D,D--}else{T=(T+=a[D][k]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var B=parseInt(D),W=f(B,T,o),Y=D>=a.length-1;if(W&&!Y){T+=" ",k=0;continue}if(W||Y){if(Y)A=B;else if(r.multiline&&(y+2)*(R+2)+2>u)continue e}else{if(!r.multiline||(y+2)*(R+2)+2>u)continue e;A=B}}for(var O="",z=N;z<=A;z++){var Q=a[z];if(r.multiline){if(z===A){O+=Q[k]+" ",k=(k+1)%Q.length;continue}if(z===N){O+=Q[Q.length-1]+" ";continue}}O+=Q[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,m=R1(O,r,o).width,r.textAlign){case"right":d=c-m-2;break;case"center":d=(c-m)/2;break;default:d=2}e+=un(d)+" "+un(b)+` Td
`,e+="("+Au(O)+`) Tj
`,e+=-un(d)+` 0 Td
`,b=-(o+2),m=0,N=F?A:A+1,R++,T=""}break}return s.text=e,s.fontSize=o,s},R1=function(r,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(r,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},kM={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},jM=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},EM=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(bo.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(kM)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");R2=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new u4,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&jM(o,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var c=s[u],f=[],d=c.Rect;if(c.Rect&&(c.Rect=CM(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=kt.createDefaultAppearanceStream(c),er(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(f=c.getKeyValueListForStream()),c.Rect=d,c.hasAppearanceStream&&!c.appearanceStreamContent){var m=TM(c);f.push({key:"AP",value:"<</N "+m+">>"}),a.internal.acroformPlugin.xForms.push(m)}if(c.appearanceStreamContent){var y="";for(var _ in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(_)){var b=c.appearanceStreamContent[_];if(y+="/"+_+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var u in b)if(b.hasOwnProperty(u)){var N=b[u];typeof N=="function"&&(N=N.call(a,c)),y+="/"+u+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=b)=="function"&&(N=N.call(a,c)),y+="/"+u+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);y+=">>"}f.push({key:"AP",value:`<<
`+y+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:c.objId}),a.internal.out("endobj")}o&&(function(A,k){for(var T in A)if(A.hasOwnProperty(T)){var R=T,D=A[T];k.internal.newObjectDeferredBegin(D.objId,!0),er(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete A[R]}})(a.internal.acroformPlugin.xForms,a)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},l4=Qr.__acroform__.arrayToPdfArray=function(r,e,t){var s=function(u){return u};if(Array.isArray(r)){for(var a="[",o=0;o<r.length;o++)switch(o!==0&&(a+=" "),er(r[o])){case"boolean":case"number":case"object":a+=r[o].toString();break;case"string":r[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+Au(s(r[o].toString()))+")"):a+=r[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},qm=function(r,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+Au(s(r))+")"},qo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qo.prototype.toString=function(){return this.objId+" 0 R"},qo.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},qo.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?r.push({key:s,value:l4(a,this.objId,this.scope)}):a instanceof qo?(a.scope=this.scope,r.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:s,value:a}))}return r};var c4=function(){qo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Yi(c4,qo);var u4=function(){qo.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Au(t(r))+")"}},set:function(t){r=t}})};Yi(u4,qo);var bo=function r(){qo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ns(e,3)},set:function(T){T?this.F=rs(e,3):this.F=ss(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');t=T}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(T){s=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(T){s[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(T){s[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(T){s[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(T){s[3]=T}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Ap)return;o="FieldObject"+r.FieldNum++}var T=function(R){return R};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Au(T(o))+")"},set:function(T){o=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(T){o=T}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(T){u=T}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(T){c=T}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(T){f=T}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/R2:d},set:function(T){d=T}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(T){m=T}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Ap||this instanceof pu))return qm(y,this.objId,this.scope)},set:function(T){T=T.toString(),y=T}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Ps==0?qm(_,this.objId,this.scope):_},set:function(T){T=T.toString(),_=this instanceof Ps==0?T.substr(0,1)==="("?mh(T.substr(1,T.length-2)):mh(T):T}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ps==1?mh(_.substr(1,_.length-1)):_},set:function(T){T=T.toString(),_=this instanceof Ps==1?"/"+T:T}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Ps==0?qm(b,this.objId,this.scope):b},set:function(T){T=T.toString(),b=this instanceof Ps==0?T.substr(0,1)==="("?mh(T.substr(1,T.length-2)):mh(T):T}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ps==1?mh(b.substr(1,b.length-1)):b},set:function(T){T=T.toString(),b=this instanceof Ps==1?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(T){T=!!T,A=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(T){N=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,1)},set:function(T){T?this.Ff=rs(this.Ff,1):this.Ff=ss(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,2)},set:function(T){T?this.Ff=rs(this.Ff,2):this.Ff=ss(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,3)},set:function(T){T?this.Ff=rs(this.Ff,3):this.Ff=ss(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');k=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(k){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};Yi(bo,qo);var Ch=function(){bo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return l4(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,c){c||(c=1);for(var f,d=[];f=u.exec(o);)d.push(f[c]);return d})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,18)},set:function(t){t?this.Ff=rs(this.Ff,18):this.Ff=ss(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=rs(this.Ff,19):this.Ff=ss(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,20)},set:function(t){t?(this.Ff=rs(this.Ff,20),e.sort()):this.Ff=ss(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,22)},set:function(t){t?this.Ff=rs(this.Ff,22):this.Ff=ss(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,23)},set:function(t){t?this.Ff=rs(this.Ff,23):this.Ff=ss(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,27)},set:function(t){t?this.Ff=rs(this.Ff,27):this.Ff=ss(this.Ff,27)}}),this.hasAppearanceStream=!1};Yi(Ch,bo);var Th=function(){Ch.call(this),this.fontName="helvetica",this.combo=!1};Yi(Th,Ch);var kh=function(){Th.call(this),this.combo=!0};Yi(kh,Th);var W1=function(){kh.call(this),this.edit=!0};Yi(W1,kh);var Ps=function(){bo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,15)},set:function(t){t?this.Ff=rs(this.Ff,15):this.Ff=ss(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,16)},set:function(t){t?this.Ff=rs(this.Ff,16):this.Ff=ss(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,17)},set:function(t){t?this.Ff=rs(this.Ff,17):this.Ff=ss(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,26)},set:function(t){t?this.Ff=rs(this.Ff,26):this.Ff=ss(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+Au(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){er(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Yi(Ps,bo);var Y1=function(){Ps.call(this),this.pushButton=!0};Yi(Y1,Ps);var jh=function(){Ps.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Yi(jh,Ps);var Ap=function(){var r,e;bo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+Au(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){er(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=kt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Yi(Ap,bo),jh.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},jh.prototype.createOption=function(r){var e=new Ap;return e.Parent=this,e.optionName=r,this.Kids.push(e),MM.call(this.scope,e),e};var X1=function(){Ps.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=kt.CheckBox.createAppearanceStream()};Yi(X1,Ps);var pu=function(){bo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,13)},set:function(e){e?this.Ff=rs(this.Ff,13):this.Ff=ss(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,21)},set:function(e){e?this.Ff=rs(this.Ff,21):this.Ff=ss(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,23)},set:function(e){e?this.Ff=rs(this.Ff,23):this.Ff=ss(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,24)},set:function(e){e?this.Ff=rs(this.Ff,24):this.Ff=ss(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,25)},set:function(e){e?this.Ff=rs(this.Ff,25):this.Ff=ss(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,26)},set:function(e){e?this.Ff=rs(this.Ff,26):this.Ff=ss(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Yi(pu,bo);var $1=function(){pu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ns(this.Ff,14)},set:function(r){r?this.Ff=rs(this.Ff,14):this.Ff=ss(this.Ff,14)}}),this.password=!0};Yi($1,pu);var kt={CheckBox:{createAppearanceStream:function(){return{N:{On:kt.CheckBox.YesNormal},D:{On:kt.CheckBox.YesPushDown,Off:kt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=zo(r);e.scope=r.scope;var t=[],s=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),o=Ng(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+un(kt.internal.getWidth(r))+" "+un(kt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+un(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=zo(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,s=r.scope.__private__.encodeColorString(r.color),a=[],o=kt.internal.getHeight(r),u=kt.internal.getWidth(r),c=Ng(r,r.caption);return a.push("1 g"),a.push("0 0 "+un(u)+" "+un(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+un(u-1)+" "+un(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+un(c.fontSize)+" Tf "+s),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(r){var e=zo(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+un(kt.internal.getWidth(r))+" "+un(kt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:kt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=kt.RadioButton.Circle.YesNormal,e.D[r]=kt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=zo(r);e.scope=r.scope;var t=[],s=kt.internal.getWidth(r)<=kt.internal.getHeight(r)?kt.internal.getWidth(r)/4:kt.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=kt.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+yc(kt.internal.getWidth(r)/2)+" "+yc(kt.internal.getHeight(r)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=zo(r);e.scope=r.scope;var t=[],s=kt.internal.getWidth(r)<=kt.internal.getHeight(r)?kt.internal.getWidth(r)/4:kt.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*kt.internal.Bezier_C).toFixed(5)),u=Number((s*kt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+yc(kt.internal.getWidth(r)/2)+" "+yc(kt.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+yc(kt.internal.getWidth(r)/2)+" "+yc(kt.internal.getHeight(r)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=zo(r);e.scope=r.scope;var t=[],s=kt.internal.getWidth(r)<=kt.internal.getHeight(r)?kt.internal.getWidth(r)/4:kt.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*kt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+yc(kt.internal.getWidth(r)/2)+" "+yc(kt.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:kt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=kt.RadioButton.Cross.YesNormal,e.D[r]=kt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=zo(r);e.scope=r.scope;var t=[],s=kt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+un(kt.internal.getWidth(r)-2)+" "+un(kt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(un(s.x1.x)+" "+un(s.x1.y)+" m"),t.push(un(s.x2.x)+" "+un(s.x2.y)+" l"),t.push(un(s.x4.x)+" "+un(s.x4.y)+" m"),t.push(un(s.x3.x)+" "+un(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=zo(r);e.scope=r.scope;var t=kt.internal.calculateCross(r),s=[];return s.push("0.749023 g"),s.push("0 0 "+un(kt.internal.getWidth(r))+" "+un(kt.internal.getHeight(r))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+un(kt.internal.getWidth(r)-2)+" "+un(kt.internal.getHeight(r)-2)+" re"),s.push("W"),s.push("n"),s.push(un(t.x1.x)+" "+un(t.x1.y)+" m"),s.push(un(t.x2.x)+" "+un(t.x2.y)+" l"),s.push(un(t.x4.x)+" "+un(t.x4.y)+" m"),s.push(un(t.x3.x)+" "+un(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(r){var e=zo(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+un(kt.internal.getWidth(r))+" "+un(kt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};kt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=kt.internal.getWidth(r),t=kt.internal.getHeight(r),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},kt.internal.getWidth=function(r){var e=0;return er(r)==="object"&&(e=tx(r.Rect[2])),e},kt.internal.getHeight=function(r){var e=0;return er(r)==="object"&&(e=tx(r.Rect[3])),e};var MM=Qr.addField=function(r){if(EM(this,r),!(r instanceof bo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Qr.AcroFormChoiceField=Ch,Qr.AcroFormListBox=Th,Qr.AcroFormComboBox=kh,Qr.AcroFormEditBox=W1,Qr.AcroFormButton=Ps,Qr.AcroFormPushButton=Y1,Qr.AcroFormRadioButton=jh,Qr.AcroFormCheckBox=X1,Qr.AcroFormTextField=pu,Qr.AcroFormPasswordField=$1,Qr.AcroFormAppearance=kt,Qr.AcroForm={ChoiceField:Ch,ListBox:Th,ComboBox:kh,EditBox:W1,Button:Ps,PushButton:Y1,RadioButton:jh,CheckBox:X1,TextField:pu,PasswordField:$1,Appearance:kt},It.AcroForm={ChoiceField:Ch,ListBox:Th,ComboBox:kh,EditBox:W1,Button:Ps,PushButton:Y1,RadioButton:jh,CheckBox:X1,TextField:pu,PasswordField:$1,Appearance:kt};It.AcroForm;function h4(r){return r.reduce(function(e,t,s){return e[t]=s,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=r.__addimage__.getImageFileTypeByImageData=function(M,V){var H,X,he,I,se,ie=t;if((V=V||t)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(W(M))for(se in s)for(he=s[se],H=0;H<he.length;H+=1){for(I=!0,X=0;X<he[H].length;X+=1)if(he[H][X]!==void 0&&he[H][X]!==M[X]){I=!1;break}if(I===!0){ie=se;break}}else for(se in s)for(he=s[se],H=0;H<he.length;H+=1){for(I=!0,X=0;X<he[H].length;X+=1)if(he[H][X]!==void 0&&he[H][X]!==M.charCodeAt(X)){I=!1;break}if(I===!0){ie=se;break}}return ie===t&&V!==t&&(ie=V),ie},o=function M(V){for(var H=this.internal.write,X=this.internal.putStream,he=(0,this.internal.getFilters)();he.indexOf("FlateEncode")!==-1;)he.splice(he.indexOf("FlateEncode"),1);V.objectId=this.internal.newObject();var I=[];if(I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Image"}),I.push({key:"Width",value:V.width}),I.push({key:"Height",value:V.height}),V.colorSpace===T.INDEXED?I.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(V.palette.length/3-1)+" "+("sMask"in V&&V.sMask!==void 0?V.objectId+2:V.objectId+1)+" 0 R]"}):(I.push({key:"ColorSpace",value:"/"+V.colorSpace}),V.colorSpace===T.DEVICE_CMYK&&I.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),I.push({key:"BitsPerComponent",value:V.bitsPerComponent}),"decodeParameters"in V&&V.decodeParameters!==void 0&&I.push({key:"DecodeParms",value:"<<"+V.decodeParameters+">>"}),"transparency"in V&&Array.isArray(V.transparency)&&V.transparency.length>0){for(var se="",ie=0,de=V.transparency.length;ie<de;ie++)se+=V.transparency[ie]+" "+V.transparency[ie]+" ";I.push({key:"Mask",value:"["+se+"]"})}V.sMask!==void 0&&I.push({key:"SMask",value:V.objectId+1+" 0 R"});var pe=V.filter!==void 0?["/"+V.filter]:void 0;if(X({data:V.data,additionalKeyValues:I,alreadyAppliedFilters:pe,objectId:V.objectId}),H("endobj"),"sMask"in V&&V.sMask!==void 0){var G,j=(G=V.sMaskBitsPerComponent)!==null&&G!==void 0?G:V.bitsPerComponent,P={width:V.width,height:V.height,colorSpace:"DeviceGray",bitsPerComponent:j,data:V.sMask};"filter"in V&&(P.decodeParameters="/Predictor ".concat(V.predictor," /Colors 1 /BitsPerComponent ").concat(j," /Columns ").concat(V.width),P.filter=V.filter),M.call(this,P)}if(V.colorSpace===T.INDEXED){var ee=this.internal.newObject();X({data:O(new Uint8Array(V.palette)),objectId:ee}),H("endobj")}},u=function(){var M=this.internal.collections[e+"images"];for(var V in M)o.call(this,M[V])},c=function(){var M,V=this.internal.collections[e+"images"],H=this.internal.write;for(var X in V)H("/I"+(M=V[X]).index,M.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},d=function(){var M=this.internal.collections[e+"images"];return f.call(this),M},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(M){return typeof r["process"+M.toUpperCase()]=="function"},_=function(M){return er(M)==="object"&&M.nodeType===1},b=function(M,V){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var H=""+M.getAttribute("src");if(H.indexOf("data:image/")===0)return G1(unescape(H).split("base64,").pop());var X=r.loadFile(H,!0);if(X!==void 0)return X}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var he;switch(V){case"PNG":he="image/png";break;case"WEBP":he="image/webp";break;default:he="image/jpeg"}return G1(M.toDataURL(he,1).split("base64,").pop())}},N=function(M){var V=this.internal.collections[e+"images"];if(V){for(var H in V)if(M===V[H].alias)return V[H]}},A=function(M,V,H){return M||V||(M=-96,V=-96),M<0&&(M=-1*H.width*72/M/this.internal.scaleFactor),V<0&&(V=-1*H.height*72/V/this.internal.scaleFactor),M===0&&(M=V*H.width/H.height),V===0&&(V=M*H.height/H.width),[M,V]},k=function(M,V,H,X,he,I){var se=A.call(this,H,X,he),ie=this.internal.getCoordinateString,de=this.internal.getVerticalCoordinateString,pe=d.call(this);if(H=se[0],X=se[1],pe[he.index]=he,I){I*=Math.PI/180;var G=Math.cos(I),j=Math.sin(I),P=function(J){return J.toFixed(4)},ee=[P(G),P(j),P(-1*j),P(G),0,0,"cm"]}this.internal.write("q"),I?(this.internal.write([1,"0","0",1,ie(M),de(V+X),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([ie(H),"0","0",ie(X),"0","0","cm"].join(" "))):this.internal.write([ie(H),"0","0",ie(X),ie(M),de(V+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+he.index+" Do"),this.internal.write("Q")},T=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=r.__addimage__.sHashCode=function(M){var V,H,X=0;if(typeof M=="string")for(H=M.length,V=0;V<H;V++)X=(X<<5)-X+M.charCodeAt(V),X|=0;else if(W(M))for(H=M.byteLength/2,V=0;V<H;V++)X=(X<<5)-X+M[V],X|=0;return X},F=r.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var V=!0;return M.length===0&&(V=!1),M.length%4!=0&&(V=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(V=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(V=!1),V},B=r.__addimage__.extractImageFromDataUrl=function(M){if(M==null||!(M=M.trim()).startsWith("data:"))return null;var V=M.indexOf(",");return V<0?null:M.substring(0,V).trim().endsWith("base64")?M.substring(V+1):null};r.__addimage__.isArrayBuffer=function(M){return M instanceof ArrayBuffer};var W=r.__addimage__.isArrayBufferView=function(M){return M instanceof Int8Array||M instanceof Uint8Array||M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array},Y=r.__addimage__.binaryStringToUint8Array=function(M){for(var V=M.length,H=new Uint8Array(V),X=0;X<V;X++)H[X]=M.charCodeAt(X);return H},O=r.__addimage__.arrayBufferToBinaryString=function(M){for(var V="",H=W(M)?M:new Uint8Array(M),X=0;X<H.length;X+=8192)V+=String.fromCharCode.apply(null,H.subarray(X,X+8192));return V};r.addImage=function(){var M,V,H,X,he,I,se,ie,de;if(typeof arguments[1]=="number"?(V=t,H=arguments[1],X=arguments[2],he=arguments[3],I=arguments[4],se=arguments[5],ie=arguments[6],de=arguments[7]):(V=arguments[1],H=arguments[2],X=arguments[3],he=arguments[4],I=arguments[5],se=arguments[6],ie=arguments[7],de=arguments[8]),er(M=arguments[0])==="object"&&!_(M)&&"imageData"in M){var pe=M;M=pe.imageData,V=pe.format||V||t,H=pe.x||H||0,X=pe.y||X||0,he=pe.w||pe.width||he,I=pe.h||pe.height||I,se=pe.alias||se,ie=pe.compression||ie,de=pe.rotation||pe.angle||de}var G=this.internal.getFilters();if(ie===void 0&&G.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(H)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var j=z.call(this,M,V,se,ie);return k.call(this,H,X,he,I,j,de),this};var z=function(M,V,H,X){var he,I,se;if(typeof M=="string"&&a(M)===t){M=unescape(M);var ie=Q(M,!1);(ie!==""||(ie=r.loadFile(M,!0))!==void 0)&&(M=ie)}if(_(M)&&(M=b(M,V)),V=a(M,V),!y(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(((se=H)==null||se.length===0)&&(H=(function(de){return typeof de=="string"||W(de)?D(de):W(de.data)?D(de.data):null})(M)),(he=N.call(this,H))||(M instanceof Uint8Array||V==="RGBA"||(I=M,M=Y(M)),he=this["process"+V.toUpperCase()](M,m.call(this),H,(function(de){return de&&typeof de=="string"&&(de=de.toUpperCase()),de in r.image_compression?de:R.NONE})(X),I)),!he)throw new Error("An unknown error occurred whilst processing the image.");return he},Q=r.__addimage__.convertBase64ToBinaryString=function(M,V){V=typeof V!="boolean"||V;var H,X="";if(typeof M=="string"){var he;H=(he=B(M))!==null&&he!==void 0?he:M;try{X=G1(H)}catch(I){if(V)throw F(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+I.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};r.getImageProperties=function(M){var V,H,X="";if(_(M)&&(M=b(M)),typeof M=="string"&&a(M)===t&&((X=Q(M,!1))===""&&(X=r.loadFile(M)||""),M=X),H=a(M),!y(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(M instanceof Uint8Array||(M=Y(M)),!(V=this["process"+H.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return V.fileType=H,V}})(It.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};It.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,m=!1,y=0;y<d.length&&!m;y++)switch((s=d[y]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var _=0;_<d.length;_++){s=d[_];var b=this.internal.pdfEscape,N=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(A.objId),R=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y)+"] ")+"/Contents ("+b(T(s.contents))+")",o+=" /Popup "+k.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+b(T(R))+") >>",A.content=o;var D=A.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+c(s.bounds.y)+"] ")+" /Parent "+D,s.open&&(o+=" /Open true"),o+=" >>",k.content=o,this.internal.write(A.objId,"0 R",k.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y+s.bounds.h)+"] ";var F=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(N(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var B=this.annotations._nameMap[s.options.name];s.options.pageNumber=B.page,s.options.top=B.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(N(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var W=c(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+W+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},r.link=function(t,s,a,o,u){var c=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:f(t),y:d(s),w:f(t+a),h:d(s+o)},options:u,type:"link"})},r.textWithLink=function(t,s,a,o){var u,c,f=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var m=this.splitTextToSize(t,c).length;u=Math.ceil(d*m)}else c=f,u=d;return this.text(t,s,a,o),a+=.2*d,o.align==="center"&&(s-=f/2),o.align==="right"&&(s-=f),this.link(s,a-d,c,u,o),f},r.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(It.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var o=r.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},u=r.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},c=r.__arabicParser__.isArabicEndLetter=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length<=2},f=r.__arabicParser__.isArabicAlfLetter=function(A){return u(A)&&a.indexOf(A.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=1};var d=r.__arabicParser__.arabicLetterHasFinalForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=3};var m=r.__arabicParser__.arabicLetterHasMedialForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length==4},y=r.__arabicParser__.resolveLigatures=function(A){var k=0,T=t,R="",D=0;for(k=0;k<A.length;k+=1)T[A.charCodeAt(k)]!==void 0?(D++,typeof(T=T[A.charCodeAt(k)])=="number"&&(R+=String.fromCharCode(T),T=t,D=0),k===A.length-1&&(T=t,R+=A.charAt(k-(D-1)),k-=D-1,D=0)):(T=t,R+=A.charAt(k-D),k-=D,D=0);return R};r.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&s[A.charCodeAt(0)]!==void 0};var _=r.__arabicParser__.getCorrectForm=function(A,k,T){return u(A)?o(A)===!1?-1:!d(A)||!u(k)&&!u(T)||!u(T)&&c(k)||c(A)&&!u(k)||c(A)&&f(k)||c(A)&&c(k)?0:m(A)&&u(k)&&!c(k)&&u(T)&&d(T)?3:c(A)||!u(T)?1:2:-1},b=function(A){var k=0,T=0,R=0,D="",F="",B="",W=(A=A||"").split("\\s+"),Y=[];for(k=0;k<W.length;k+=1){for(Y.push(""),T=0;T<W[k].length;T+=1)D=W[k][T],F=W[k][T-1],B=W[k][T+1],u(D)?(R=_(D,F,B),Y[k]+=R!==-1?String.fromCharCode(e[D.charCodeAt(0)][R]):D):Y[k]+=D;Y[k]=y(Y[k])}return Y.join(" ")},N=r.__arabicParser__.processArabic=r.processArabic=function(){var A,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(k)){var R=0;for(T=[],R=0;R<k.length;R+=1)Array.isArray(k[R])?T.push([b(k[R][0]),k[R][1],k[R][2]]):T.push([b(k[R])]);A=T}else A=b(k);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};r.events.push(["preProcessText",N])})(It.API),It.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(It.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(A){f=A}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(A){d=A}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(A){m=A}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(A){_=A}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(A){b=A}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(A){N=A}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(f){return s.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},r.getTextDimensions=function(f,d){s.call(this);var m=(d=d||{}).fontSize||this.getFontSize(),y=d.font||this.getFont(),_=d.scaleFactor||this.internal.scaleFactor,b=0,N=0,A=0,k=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var T=d.maxWidth;T>0?typeof f=="string"?f=this.splitTextToSize(f,T):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(D,F){return D.concat(k.splitTextToSize(F,T))},[])):f=Array.isArray(f)?f:[f];for(var R=0;R<f.length;R++)b<(A=this.getStringUnitWidth(f[R],{font:y})*m)&&(b=A);return b!==0&&(N=f.length),{w:b/=_,h:Math.max((N*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/_,0)}},r.cellAddPage=function(){s.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=r.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var d=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=y.top,b&&_&&(this.printHeaderRow(f.lineNumber,!0),f.y+=_[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-m,f.y+m,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+m,{align:"center",baseline:"top",maxWidth:f.width-m-m}):this.text(f.text,f.x+m,f.y+m,{align:"left",baseline:"top",maxWidth:f.width-m-m})),this.internal.__cell__.lastCell=f,this};r.table=function(f,d,m,y,_){if(s.call(this),!m)throw new Error("No data for PDF table.");var b,N,A,k,T=[],R=[],D=[],F={},B={},W=[],Y=[],O=(_=_||{}).autoSize||!1,z=_.printHeaders!==!1,Q=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,M=_.margins||Object.assign({width:this.getPageWidth()},e),V=typeof _.padding=="number"?_.padding:3,H=_.headerBackgroundColor||"#c8c8c8",X=_.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=Q,this.internal.__cell__.padding=V,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=X,this.setFontSize(Q),y==null)R=T=Object.keys(m[0]),D=T.map(function(){return"left"});else if(Array.isArray(y)&&er(y[0])==="object")for(T=y.map(function(pe){return pe.name}),R=y.map(function(pe){return pe.prompt||pe.name||""}),D=y.map(function(pe){return pe.align||"left"}),b=0;b<y.length;b+=1)B[y[b].name]=.7499990551181103*y[b].width;else Array.isArray(y)&&typeof y[0]=="string"&&(R=T=y,D=T.map(function(){return"left"}));if(O||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<T.length;b+=1){for(F[k=T[b]]=m.map(function(pe){return pe[k]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(R[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=F[k],this.setFont(void 0,"normal"),A=0;A<N.length;A+=1)W.push(this.getTextDimensions(N[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);B[k]=Math.max.apply(null,W)+V+V,W=[]}if(z){var he={};for(b=0;b<T.length;b+=1)he[T[b]]={},he[T[b]].text=R[b],he[T[b]].align=D[b];var I=c.call(this,he,B);Y=T.map(function(pe){return new o(f,d,B[pe],I,he[pe].text,void 0,he[pe].align)}),this.setTableHeaderRow(Y),this.printHeaderRow(1,!1)}var se=y.reduce(function(pe,G){return pe[G.name]=G.align,pe},{});for(b=0;b<m.length;b+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:b,data:m[b]},this);var ie=c.call(this,m[b],B);for(A=0;A<T.length;A+=1){var de=m[b][T[A]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:b,col:A,data:de},this),u.call(this,new o(f,d,B[T[A]],ie,de,b+2,se[T[A]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var c=function(f,d){var m=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(f).map(function(b){var N=f[b];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,d[b]-m-m)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/_+m+m},this).reduce(function(b,N){return Math.max(b,N)},0)};r.setTableHeaderRow=function(f){s.call(this),this.internal.__cell__.tableHeaderRow=f},r.printHeaderRow=function(f,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){m=this.internal.__cell__.tableHeaderRow[b].clone(),d&&(m.y=this.internal.__cell__.margins.top||0,_.push(m)),m.lineNumber=f;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,m),this.setTextColor(N)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(It.API);var f4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},d4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ag=h4(d4),p4=[100,200,300,400,500,600,700,800,900],LM=h4(p4);function Um(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return f4[o=o||"normal"]?o:"normal"})(r.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(r.weight),a=(function(o){return typeof Ag[o=o||"normal"]=="number"?o:"normal"})(r.stretch);return{family:e,style:t,weight:s,stretch:a,src:r.src||[],ref:r.ref||{name:e,style:[a,t,s].join(" ")}}}function nx(r,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(r[e[a]])return r[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(r[e[a]])return r[e[a]]}var OM={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},rx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function sx(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function ix(r){return r.trimLeft()}function DM(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function RM(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var I1,ax,ox,gh,V1,lx,cx,ux,Hm=["times"];function hx(r,e,t,s,a){var o=4,u=dx;switch(a){case It.API.image_compression.FAST:o=1,u=fx;break;case It.API.image_compression.MEDIUM:o=6,u=px;break;case It.API.image_compression.SLOW:o=9,u=mx}r=(function(f,d,m,y){for(var _,b=f.length/d,N=new Uint8Array(f.length+b),A=[IM,fx,dx,px,mx],k=0;k<b;k+=1){var T=k*d,R=f.subarray(T,T+d);if(y)N.set(y(R,m,_),T+k);else{for(var D=A.length,F=[],B=0;B<D;B+=1)F[B]=A[B](R,m,_);var W=FM(F.concat());N.set(F[W],T+k)}_=R}return N})(r,e,Math.ceil(t*s/8),u);var c=vg(r,{level:o});return It.API.__addimage__.arrayBufferToBinaryString(c)}function IM(r){var e=Array.apply([],r);return e.unshift(0),e}function fx(r,e){var t=r.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=r[a-e]||0;s[a+1]=r[a]-o+256&255}return s}function dx(r,e,t){var s=r.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=r[o]-u+256&255}return a}function px(r,e,t){var s=r.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=r[o-e]||0,c=t&&t[o]||0;a[o+1]=r[o]+256-(u+c>>>1)&255}return a}function mx(r,e,t){var s=r.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=VM(r[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=r[o]-u+256&255}return a}function VM(r,e,t){if(r===e&&e===t)return r;var s=Math.abs(e-t),a=Math.abs(r-t),o=Math.abs(r+e-t-t);return s<=a&&s<=o?r:a<=o?e:t}function FM(r){var e=r.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function Gm(r,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return m4(r,a)>>o&u}function gx(r,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),c=(1<<s)-1,f=(e&c)<<u;(function(d,m,y){if(m+1<d.byteLength)d.setUint16(m,y,!1);else{var _=y>>8&255;d.setUint8(m,_)}})(r,o,m4(r,o)&~(c<<u)&65535|f)}function m4(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function BM(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,s=r[e++]|r[e++]<<8,a=r[e++],o=a>>7,u=1<<1+(7&a);r[e++],r[e++];var c=null,f=null;o&&(c=e,f=u,e+=3*u);var d=!0,m=[],y=0,_=null,b=0,N=null;for(this.width=t,this.height=s;d&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,N=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((M=r[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=r[e++];y=r[e++]|r[e++]<<8,_=r[e++],1&A||(_=null),b=A>>2&7,e++;break;case 254:for(;;){if(!((M=r[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var k=r[e++]|r[e++]<<8,T=r[e++]|r[e++]<<8,R=r[e++]|r[e++]<<8,D=r[e++]|r[e++]<<8,F=r[e++],B=F>>6&1,W=1<<1+(7&F),Y=c,O=f,z=!1;F>>7&&(z=!0,Y=e,O=W,e+=3*W);var Q=e;for(e++;;){var M;if(!((M=r[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}m.push({x:k,y:T,width:R,height:D,has_local_palette:z,palette_offset:Y,palette_size:O,data_offset:Q,data_length:e-Q,transparent_index:_,interlaced:!!B,delay:y,disposal:b});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return N},this.frameInfo=function(V){if(V<0||V>=m.length)throw new Error("Frame index out of range.");return m[V]},this.decodeAndBlitFrameBGRA=function(V,H){var X=this.frameInfo(V),he=X.width*X.height,I=new Uint8Array(he);bx(r,X.data_offset,I,he);var se=X.palette_offset,ie=X.transparent_index;ie===null&&(ie=256);var de=X.width,pe=t-de,G=de,j=4*(X.y*t+X.x),P=4*((X.y+X.height)*t+X.x),ee=j,J=4*pe;X.interlaced===!0&&(J+=4*t*7);for(var oe=8,fe=0,me=I.length;fe<me;++fe){var Se=I[fe];if(G===0&&(G=de,(ee+=J)>=P&&(J=4*pe+4*t*(oe-1),ee=j+(de+pe)*(oe<<1),oe>>=1)),Se===ie)ee+=4;else{var ye=r[se+3*Se],Fe=r[se+3*Se+1],Ye=r[se+3*Se+2];H[ee++]=Ye,H[ee++]=Fe,H[ee++]=ye,H[ee++]=255}--G}},this.decodeAndBlitFrameRGBA=function(V,H){var X=this.frameInfo(V),he=X.width*X.height,I=new Uint8Array(he);bx(r,X.data_offset,I,he);var se=X.palette_offset,ie=X.transparent_index;ie===null&&(ie=256);var de=X.width,pe=t-de,G=de,j=4*(X.y*t+X.x),P=4*((X.y+X.height)*t+X.x),ee=j,J=4*pe;X.interlaced===!0&&(J+=4*t*7);for(var oe=8,fe=0,me=I.length;fe<me;++fe){var Se=I[fe];if(G===0&&(G=de,(ee+=J)>=P&&(J=4*pe+4*t*(oe-1),ee=j+(de+pe)*(oe<<1),oe>>=1)),Se===ie)ee+=4;else{var ye=r[se+3*Se],Fe=r[se+3*Se+1],Ye=r[se+3*Se+2];H[ee++]=ye,H[ee++]=Fe,H[ee++]=Ye,H[ee++]=255}--G}}}function bx(r,e,t,s){for(var a=r[e++],o=1<<a,u=o+1,c=u+1,f=a+1,d=(1<<f)-1,m=0,y=0,_=0,b=r[e++],N=new Int32Array(4096),A=null;;){for(;m<16&&b!==0;)y|=r[e++]<<m,m+=8,b===1?b=r[e++]:--b;if(m<f)break;var k=y&d;if(y>>=f,m-=f,k!==o){if(k===u)break;for(var T=k<c?k:A,R=0,D=T;D>o;)D=N[D]>>8,++R;var F=D;if(_+R+(T!==k?1:0)>s)return void pr.log("Warning, gif stream longer than expected.");t[_++]=F;var B=_+=R;for(T!==k&&(t[_++]=F),D=T;R--;)D=N[D],t[--B]=255&D,D>>=8;A!==null&&c<4096&&(N[c++]=A<<8|F,c>=d+1&&f<12&&(++f,d=d<<1|1)),A=k}else c=u+1,d=(1<<(f=a+1))-1,A=null}return _!==s&&pr.log("Warning, gif stream shorter than expected."),t}function Wm(r){var e,t,s,a,o,u=Math.floor,c=new Array(64),f=new Array(64),d=new Array(64),m=new Array(64),y=new Array(65535),_=new Array(65535),b=new Array(64),N=new Array(64),A=[],k=0,T=7,R=new Array(64),D=new Array(64),F=new Array(64),B=new Array(256),W=new Array(2048),Y=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],he=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function I(j,P){for(var ee=0,J=0,oe=new Array,fe=1;fe<=16;fe++){for(var me=1;me<=j[fe];me++)oe[P[J]]=[],oe[P[J]][0]=ee,oe[P[J]][1]=fe,J++,ee++;ee*=2}return oe}function se(j){for(var P=j[0],ee=j[1]-1;ee>=0;)P&1<<ee&&(k|=1<<T),ee--,--T<0&&(k==255?(ie(255),ie(0)):ie(k),T=7,k=0)}function ie(j){A.push(j)}function de(j){ie(j>>8&255),ie(255&j)}function pe(j,P,ee,J,oe){for(var fe,me=oe[0],Se=oe[240],ye=(function(Le,tt){var Ue,ot,it,Be,at,nt,ut,gt,dt,xt,ht=0;for(dt=0;dt<8;++dt){Ue=Le[ht],ot=Le[ht+1],it=Le[ht+2],Be=Le[ht+3],at=Le[ht+4],nt=Le[ht+5],ut=Le[ht+6];var rn=Ue+(gt=Le[ht+7]),Vt=Ue-gt,bt=ot+ut,jt=ot-ut,qt=it+nt,yt=it-nt,Ft=Be+at,vt=Be-at,Dt=rn+Ft,dn=rn-Ft,St=bt+qt,mt=bt-qt;Le[ht]=Dt+St,Le[ht+4]=Dt-St;var Rt=.707106781*(mt+dn);Le[ht+2]=dn+Rt,Le[ht+6]=dn-Rt;var Oe=.382683433*((Dt=vt+yt)-(mt=jt+Vt)),xe=.5411961*Dt+Oe,Pe=1.306562965*mt+Oe,lt=.707106781*(St=yt+jt),Xe=Vt+lt,Mt=Vt-lt;Le[ht+5]=Mt+xe,Le[ht+3]=Mt-xe,Le[ht+1]=Xe+Pe,Le[ht+7]=Xe-Pe,ht+=8}for(ht=0,dt=0;dt<8;++dt){Ue=Le[ht],ot=Le[ht+8],it=Le[ht+16],Be=Le[ht+24],at=Le[ht+32],nt=Le[ht+40],ut=Le[ht+48];var pn=Ue+(gt=Le[ht+56]),sn=Ue-gt,hn=ot+ut,en=ot-ut,yn=it+nt,Qt=it-nt,xn=Be+at,Sn=Be-at,Ln=pn+xn,qn=pn-xn,vr=hn+yn,wn=hn-yn;Le[ht]=Ln+vr,Le[ht+32]=Ln-vr;var nn=.707106781*(wn+qn);Le[ht+16]=qn+nn,Le[ht+48]=qn-nn;var mn=.382683433*((Ln=Sn+Qt)-(wn=en+sn)),tr=.5411961*Ln+mn,Ne=1.306562965*wn+mn,Ie=.707106781*(vr=Qt+en),rt=sn+Ie,Yt=sn-Ie;Le[ht+40]=Yt+tr,Le[ht+24]=Yt-tr,Le[ht+8]=rt+Ne,Le[ht+56]=rt-Ne,ht++}for(dt=0;dt<64;++dt)xt=Le[dt]*tt[dt],b[dt]=xt>0?xt+.5|0:xt-.5|0;return b})(j,P),Fe=0;Fe<64;++Fe)N[Y[Fe]]=ye[Fe];var Ye=N[0]-ee;ee=N[0],Ye==0?se(J[0]):(se(J[_[fe=32767+Ye]]),se(y[fe]));for(var Je=63;Je>0&&N[Je]==0;)Je--;if(Je==0)return se(me),ee;for(var ct,$=1;$<=Je;){for(var Re=$;N[$]==0&&$<=Je;)++$;var pt=$-Re;if(pt>=16){ct=pt>>4;for(var Ke=1;Ke<=ct;++Ke)se(Se);pt&=15}fe=32767+N[$],se(oe[(pt<<4)+_[fe]]),se(y[fe]),$++}return Je!=63&&se(me),ee}function G(j){j=Math.min(Math.max(j,1),100),o!=j&&((function(P){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var oe=u((ee[J]*P+50)/100);oe=Math.min(Math.max(oe,1),255),c[Y[J]]=oe}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var Se=u((fe[me]*P+50)/100);Se=Math.min(Math.max(Se,1),255),f[Y[me]]=Se}for(var ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Fe=0,Ye=0;Ye<8;Ye++)for(var Je=0;Je<8;Je++)d[Fe]=1/(c[Y[Fe]]*ye[Ye]*ye[Je]*8),m[Fe]=1/(f[Y[Fe]]*ye[Ye]*ye[Je]*8),Fe++})(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),o=j)}this.encode=function(j,P){P&&G(P),A=new Array,k=0,T=7,de(65496),de(65504),de(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),de(1),de(1),ie(0),ie(0),(function(){de(65499),de(132),ie(0);for(var ot=0;ot<64;ot++)ie(c[ot]);ie(1);for(var it=0;it<64;it++)ie(f[it])})(),(function(ot,it){de(65472),de(17),ie(8),de(it),de(ot),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)})(j.width,j.height),(function(){de(65476),de(418),ie(0);for(var ot=0;ot<16;ot++)ie(O[ot+1]);for(var it=0;it<=11;it++)ie(z[it]);ie(16);for(var Be=0;Be<16;Be++)ie(Q[Be+1]);for(var at=0;at<=161;at++)ie(M[at]);ie(1);for(var nt=0;nt<16;nt++)ie(V[nt+1]);for(var ut=0;ut<=11;ut++)ie(H[ut]);ie(17);for(var gt=0;gt<16;gt++)ie(X[gt+1]);for(var dt=0;dt<=161;dt++)ie(he[dt])})(),de(65498),de(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var ee=0,J=0,oe=0;k=0,T=7,this.encode.displayName="_encode_";for(var fe,me,Se,ye,Fe,Ye,Je,ct,$,Re=j.data,pt=j.width,Ke=j.height,Le=4*pt,tt=0;tt<Ke;){for(fe=0;fe<Le;){for(Fe=Le*tt+fe,Je=-1,ct=0,$=0;$<64;$++)Ye=Fe+(ct=$>>3)*Le+(Je=4*(7&$)),tt+ct>=Ke&&(Ye-=Le*(tt+1+ct-Ke)),fe+Je>=Le&&(Ye-=fe+Je-Le+4),me=Re[Ye++],Se=Re[Ye++],ye=Re[Ye++],R[$]=(W[me]+W[Se+256|0]+W[ye+512|0]>>16)-128,D[$]=(W[me+768|0]+W[Se+1024|0]+W[ye+1280|0]>>16)-128,F[$]=(W[me+1280|0]+W[Se+1536|0]+W[ye+1792|0]>>16)-128;ee=pe(R,d,ee,e,s),J=pe(D,m,J,t,a),oe=pe(F,m,oe,t,a),fe+=32}tt+=8}if(T>=0){var Ue=[];Ue[1]=T+1,Ue[0]=(1<<T+1)-1,se(Ue)}return de(65497),new Uint8Array(A)},r=r||50,(function(){for(var j=String.fromCharCode,P=0;P<256;P++)B[P]=j(P)})(),e=I(O,z),t=I(V,H),s=I(Q,M),a=I(X,he),(function(){for(var j=1,P=2,ee=1;ee<=15;ee++){for(var J=j;J<P;J++)_[32767+J]=ee,y[32767+J]=[],y[32767+J][1]=ee,y[32767+J][0]=J;for(var oe=-(P-1);oe<=-j;oe++)_[32767+oe]=ee,y[32767+oe]=[],y[32767+oe][1]=ee,y[32767+oe][0]=P-1+oe;j<<=1,P<<=1}})(),(function(){for(var j=0;j<256;j++)W[j]=19595*j,W[j+256|0]=38470*j,W[j+512|0]=7471*j+32768,W[j+768|0]=-11059*j,W[j+1024|0]=-21709*j,W[j+1280|0]=32768*j+8421375,W[j+1536|0]=-27439*j,W[j+1792|0]=-5329*j})(),G(r)}function so(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function vx(r){function e(z){if(!z)throw Error("assert :P")}function t(z,Q,M){for(var V=0;4>V;V++)if(z[Q+V]!=M.charCodeAt(V))return!0;return!1}function s(z,Q,M,V,H){for(var X=0;X<H;X++)z[Q+X]=M[V+X]}function a(z,Q,M,V){for(var H=0;H<V;H++)z[Q+H]=M}function o(z){return new Int32Array(z)}function u(z,Q){for(var M=[],V=0;V<z;V++)M.push(new Q);return M}function c(z,Q){var M=[];return(function V(H,X,he){for(var I=he[X],se=0;se<I&&(H.push(he.length>X+1?[]:new Q),!(he.length<X+1));se++)V(H[se],X+1,he)})(M,0,z),M}var f=function(){var z=this;function Q(p,v){for(var C=1<<v-1>>>0;p&C;)C>>>=1;return C?(p&C-1)+C:p}function M(p,v,C,E,U){e(!(E%C));do p[v+(E-=C)]=U;while(0<E)}function V(p,v,C,E,U){if(e(2328>=U),512>=U)var Z=o(512);else if((Z=o(U))==null)return 0;return(function(K,ne,ae,ce,ve,je){var le,_e,Te=ne,qe=1<<ae,ke=o(16),ze=o(16);for(e(ve!=0),e(ce!=null),e(K!=null),e(0<ae),_e=0;_e<ve;++_e){if(15<ce[_e])return 0;++ke[ce[_e]]}if(ke[0]==ve)return 0;for(ze[1]=0,le=1;15>le;++le){if(ke[le]>1<<le)return 0;ze[le+1]=ze[le]+ke[le]}for(_e=0;_e<ve;++_e)le=ce[_e],0<ce[_e]&&(je[ze[le]++]=_e);if(ze[15]==1)return(ce=new H).g=0,ce.value=je[0],M(K,Te,1,qe,ce),qe;var We,st=-1,Qe=qe-1,Tt=0,wt=1,Kt=1,Nt=1<<ae;for(_e=0,le=1,ve=2;le<=ae;++le,ve<<=1){if(wt+=Kt<<=1,0>(Kt-=ke[le]))return 0;for(;0<ke[le];--ke[le])(ce=new H).g=le,ce.value=je[_e++],M(K,Te+Tt,ve,Nt,ce),Tt=Q(Tt,le)}for(le=ae+1,ve=2;15>=le;++le,ve<<=1){if(wt+=Kt<<=1,0>(Kt-=ke[le]))return 0;for(;0<ke[le];--ke[le]){if(ce=new H,(Tt&Qe)!=st){for(Te+=Nt,We=1<<(st=le)-ae;15>st&&!(0>=(We-=ke[st]));)++st,We<<=1;qe+=Nt=1<<(We=st-ae),K[ne+(st=Tt&Qe)].g=We+ae,K[ne+st].value=Te-ne-st}ce.g=le-ae,ce.value=je[_e++],M(K,Te+(Tt>>ae),ve,Nt,ce),Tt=Q(Tt,le)}}return wt!=2*ze[15]-1?0:qe})(p,v,C,E,U,Z)}function H(){this.value=this.g=0}function X(){this.value=this.g=0}function he(){this.G=u(5,H),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(No,X)}function I(p,v,C,E){e(p!=null),e(v!=null),e(2147483648>E),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=v,p.pa=C,p.Jd=v,p.Yc=C+E,p.Zc=4<=E?C+E-4+1:C,me(p)}function se(p,v){for(var C=0;0<v--;)C|=ye(p,128)<<v;return C}function ie(p,v){var C=se(p,v);return Se(p)?-C:C}function de(p,v,C,E){var U,Z=0;for(e(p!=null),e(v!=null),e(4294967288>E),p.Sb=E,p.Ra=0,p.u=0,p.h=0,4<E&&(E=4),U=0;U<E;++U)Z+=v[C+U]<<8*U;p.Ra=Z,p.bb=E,p.oa=v,p.pa=C}function pe(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<ga-8>>>0,++p.bb,p.u-=8;J(p)&&(p.h=1,p.u=0)}function G(p,v){if(e(0<=v),!p.h&&v<=Ws){var C=ee(p)&ri[v];return p.u+=v,pe(p),C}return p.h=1,p.u=0}function j(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ee(p){return p.Ra>>>(p.u&ga-1)>>>0}function J(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>ga}function oe(p,v){p.u=v,p.h=J(p)}function fe(p){p.u>=ba&&(e(p.u>=ba),pe(p))}function me(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function Se(p){return se(p,1)}function ye(p,v){var C=p.Ca;0>p.b&&me(p);var E=p.b,U=C*v>>>8,Z=(p.I>>>E>U)+0;for(Z?(C-=U,p.I-=U+1<<E>>>0):C=U+1,E=C,U=0;256<=E;)U+=8,E>>=8;return E=7^U+Ga[E],p.b-=E,p.Ca=(C<<E)-1,Z}function Fe(p,v,C){p[v+0]=C>>24&255,p[v+1]=C>>16&255,p[v+2]=C>>8&255,p[v+3]=255&C}function Ye(p,v){return p[v+0]|p[v+1]<<8}function Je(p,v){return Ye(p,v)|p[v+2]<<16}function ct(p,v){return Ye(p,v)|Ye(p,v+2)<<16}function $(p,v){var C=1<<v;return e(p!=null),e(0<v),p.X=o(C),p.X==null?0:(p.Mb=32-v,p.Xa=v,1)}function Re(p,v){e(p!=null),e(v!=null),e(p.Xa==v.Xa),s(v.X,0,p.X,0,1<<v.Xa)}function pt(){this.X=[],this.Xa=this.Mb=0}function Ke(p,v,C,E){e(C!=null),e(E!=null);var U=C[0],Z=E[0];return U==0&&(U=(p*Z+v/2)/v),Z==0&&(Z=(v*U+p/2)/p),0>=U||0>=Z?0:(C[0]=U,E[0]=Z,1)}function Le(p,v){return p+(1<<v)-1>>>v}function tt(p,v){return((4278255360&p)+(4278255360&v)>>>0&4278255360)+((16711935&p)+(16711935&v)>>>0&16711935)>>>0}function Ue(p,v){z[v]=function(C,E,U,Z,K,ne,ae){var ce;for(ce=0;ce<K;++ce){var ve=z[p](ne[ae+ce-1],U,Z+ce);ne[ae+ce]=tt(C[E+ce],ve)}}}function ot(){this.ud=this.hd=this.jd=0}function it(p,v){return((4278124286&(p^v))>>>1)+(p&v)>>>0}function Be(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function at(p,v){return Be(p+(p-v+.5>>1))}function nt(p,v,C){return Math.abs(v-C)-Math.abs(p-C)}function ut(p,v,C,E,U,Z,K){for(E=Z[K-1],C=0;C<U;++C)Z[K+C]=E=tt(p[v+C],E)}function gt(p,v,C,E,U){var Z;for(Z=0;Z<C;++Z){var K=p[v+Z],ne=K>>8&255,ae=16711935&(ae=(ae=16711935&K)+((ne<<16)+ne));E[U+Z]=(4278255360&K)+ae>>>0}}function dt(p,v){v.jd=255&p,v.hd=p>>8&255,v.ud=p>>16&255}function xt(p,v,C,E,U,Z){var K;for(K=0;K<E;++K){var ne=v[C+K],ae=ne>>>8,ce=ne,ve=255&(ve=(ve=ne>>>16)+((p.jd<<24>>24)*(ae<<24>>24)>>>5));ce=255&(ce=(ce+=(p.hd<<24>>24)*(ae<<24>>24)>>>5)+((p.ud<<24>>24)*(ve<<24>>24)>>>5)),U[Z+K]=(4278255360&ne)+(ve<<16)+ce}}function ht(p,v,C,E,U){z[v]=function(Z,K,ne,ae,ce,ve,je,le,_e){for(ae=je;ae<le;++ae)for(je=0;je<_e;++je)ce[ve++]=U(ne[E(Z[K++])])},z[p]=function(Z,K,ne,ae,ce,ve,je){var le=8>>Z.b,_e=Z.Ea,Te=Z.K[0],qe=Z.w;if(8>le)for(Z=(1<<Z.b)-1,qe=(1<<le)-1;K<ne;++K){var ke,ze=0;for(ke=0;ke<_e;++ke)ke&Z||(ze=E(ae[ce++])),ve[je++]=U(Te[ze&qe]),ze>>=le}else z["VP8LMapColor"+C](ae,ce,Te,qe,ve,je,K,ne,_e)}}function rn(p,v,C,E,U){for(C=v+C;v<C;){var Z=p[v++];E[U++]=Z>>16&255,E[U++]=Z>>8&255,E[U++]=255&Z}}function Vt(p,v,C,E,U){for(C=v+C;v<C;){var Z=p[v++];E[U++]=Z>>16&255,E[U++]=Z>>8&255,E[U++]=255&Z,E[U++]=Z>>24&255}}function bt(p,v,C,E,U){for(C=v+C;v<C;){var Z=(K=p[v++])>>16&240|K>>12&15,K=240&K|K>>28&15;E[U++]=Z,E[U++]=K}}function jt(p,v,C,E,U){for(C=v+C;v<C;){var Z=(K=p[v++])>>16&248|K>>13&7,K=K>>5&224|K>>3&31;E[U++]=Z,E[U++]=K}}function qt(p,v,C,E,U){for(C=v+C;v<C;){var Z=p[v++];E[U++]=255&Z,E[U++]=Z>>8&255,E[U++]=Z>>16&255}}function yt(p,v,C,E,U,Z){if(Z==0)for(C=v+C;v<C;)Fe(E,((Z=p[v++])[0]>>24|Z[1]>>8&65280|Z[2]<<8&16711680|Z[3]<<24)>>>0),U+=32;else s(E,U,p,v,C)}function Ft(p,v){z[v][0]=z[p+"0"],z[v][1]=z[p+"1"],z[v][2]=z[p+"2"],z[v][3]=z[p+"3"],z[v][4]=z[p+"4"],z[v][5]=z[p+"5"],z[v][6]=z[p+"6"],z[v][7]=z[p+"7"],z[v][8]=z[p+"8"],z[v][9]=z[p+"9"],z[v][10]=z[p+"10"],z[v][11]=z[p+"11"],z[v][12]=z[p+"12"],z[v][13]=z[p+"13"],z[v][14]=z[p+"0"],z[v][15]=z[p+"0"]}function vt(p){return p==$c||p==Bu||p==$l||p==zu}function Dt(){this.eb=[],this.size=this.A=this.fb=0}function dn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function St(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Dt,this.f.kb=new dn,this.sd=null}function mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Oe(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function xe(p,v){var C=p.T,E=v.ba.f.RGBA,U=E.eb,Z=E.fb+p.ka*E.A,K=Ns[v.ba.S],ne=p.y,ae=p.O,ce=p.f,ve=p.N,je=p.ea,le=p.W,_e=v.cc,Te=v.dc,qe=v.Mc,ke=v.Nc,ze=p.ka,We=p.ka+p.T,st=p.U,Qe=st+1>>1;for(ze==0?K(ne,ae,null,null,ce,ve,je,le,ce,ve,je,le,U,Z,null,null,st):(K(v.ec,v.fc,ne,ae,_e,Te,qe,ke,ce,ve,je,le,U,Z-E.A,U,Z,st),++C);ze+2<We;ze+=2)_e=ce,Te=ve,qe=je,ke=le,ve+=p.Rc,le+=p.Rc,Z+=2*E.A,K(ne,(ae+=2*p.fa)-p.fa,ne,ae,_e,Te,qe,ke,ce,ve,je,le,U,Z-E.A,U,Z,st);return ae+=p.fa,p.j+We<p.o?(s(v.ec,v.fc,ne,ae,st),s(v.cc,v.dc,ce,ve,Qe),s(v.Mc,v.Nc,je,le,Qe),C--):1&We||K(ne,ae,null,null,ce,ve,je,le,ce,ve,je,le,U,Z+E.A,null,null,st),C}function Pe(p,v,C){var E=p.F,U=[p.J];if(E!=null){var Z=p.U,K=v.ba.S,ne=K==Xc||K==$l;v=v.ba.f.RGBA;var ae=[0],ce=p.ka;ae[0]=p.T,p.Kb&&(ce==0?--ae[0]:(--ce,U[0]-=p.width),p.j+p.ka+p.T==p.o&&(ae[0]=p.o-p.j-ce));var ve=v.eb;ce=v.fb+ce*v.A,p=Hc(E,U[0],p.width,Z,ae,ve,ce+(ne?0:3),v.A),e(C==ae),p&&vt(K)&&al(ve,ce,ne,Z,ae,v.A)}return 0}function lt(p){var v=p.ma,C=v.ba.S,E=11>C,U=C==Ds||C==ki||C==Xc||C==Xl||C==12||vt(C);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Ha(v.Oa,p,U?11:12))return 0;if(U&&vt(C)&&zc(),p.da)alert("todo:use_scaling");else{if(E){if(v.Ib=Oe,p.Kb){if(C=p.U+1>>1,v.memory=o(p.U+2*C),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+p.U,v.Mc=v.cc,v.Nc=v.dc+C,v.Ib=xe,zc()}}else alert("todo:EmitYUV");U&&(v.Jb=Pe,E&&Qi())}if(E&&!Mo){for(p=0;256>p;++p)As[p]=89858*(p-128)+Kl>>Di,e0[p]=-22014*(p-128)+Kl,Dd[p]=-45773*(p-128),Gu[p]=113618*(p-128)+Kl>>Di;for(p=ul;p<Eo;++p)v=76283*(p-16)+Kl>>Di,t0[p-ul]=qr(v,255),n0[p-ul]=qr(v+8>>4,15);Mo=1}return 1}function Xe(p){var v=p.ma,C=p.U,E=p.T;return e(!(1&p.ka)),0>=C||0>=E?0:(C=v.Ib(p,v),v.Jb!=null&&v.Jb(p,v,C),v.Dc+=C,1)}function Mt(p){p.ma.memory=null}function pn(p,v,C,E){return G(p,8)!=47?0:(v[0]=G(p,14)+1,C[0]=G(p,14)+1,E[0]=G(p,1),G(p,3)!=0?0:!p.h)}function sn(p,v){if(4>p)return p+1;var C=p-2>>1;return(2+(1&p)<<C)+G(v,C)+1}function hn(p,v){return 120<v?v-120:1<=(C=((C=Ei[v-1])>>4)*p+(8-(15&C)))?C:1;var C}function en(p,v,C){var E=ee(C),U=p[v+=255&E].g-8;return 0<U&&(oe(C,C.u+8),E=ee(C),v+=p[v].value,v+=E&(1<<U)-1),oe(C,C.u+p[v].g),p[v].value}function yn(p,v,C){return C.g+=p.g,C.value+=p.value<<v>>>0,e(8>=C.g),p.g}function Qt(p,v,C){var E=p.xc;return e((v=E==0?0:p.vc[p.md*(C>>E)+(v>>E)])<p.Wb),p.Ya[v]}function xn(p,v,C,E){var U=p.ab,Z=p.c*v,K=p.C;v=K+v;var ne=C,ae=E;for(E=p.Ta,C=p.Ua;0<U--;){var ce=p.gc[U],ve=K,je=v,le=ne,_e=ae,Te=(ae=E,ne=C,ce.Ea);switch(e(ve<je),e(je<=ce.nc),ce.hc){case 2:Fr(le,_e,(je-ve)*Te,ae,ne);break;case 0:var qe=ve,ke=je,ze=ae,We=ne,st=(Nt=ce).Ea;qe==0&&(Hl(le,_e,null,null,1,ze,We),ut(le,_e+1,0,0,st-1,ze,We+1),_e+=st,We+=st,++qe);for(var Qe=1<<Nt.b,Tt=Qe-1,wt=Le(st,Nt.b),Kt=Nt.K,Nt=Nt.w+(qe>>Nt.b)*wt;qe<ke;){var _n=Kt,fr=Nt,ln=1;for(Gl(le,_e,ze,We-st,1,ze,We);ln<st;){var _t=(ln&~Tt)+Qe;_t>st&&(_t=st),(0,Wa[_n[fr++]>>8&15])(le,_e+ +ln,ze,We+ln-st,_t-ln,ze,We+ln),ln=_t}_e+=st,We+=st,++qe&Tt||(Nt+=wt)}je!=ce.nc&&s(ae,ne-Te,ae,ne+(je-ve-1)*Te,Te);break;case 1:for(Te=le,ke=_e,st=(le=ce.Ea)-(We=le&~(ze=(_e=1<<ce.b)-1)),qe=Le(le,ce.b),Qe=ce.K,ce=ce.w+(ve>>ce.b)*qe;ve<je;){for(Tt=Qe,wt=ce,Kt=new ot,Nt=ke+We,_n=ke+le;ke<Nt;)dt(Tt[wt++],Kt),Wl(Kt,Te,ke,_e,ae,ne),ke+=_e,ne+=_e;ke<_n&&(dt(Tt[wt++],Kt),Wl(Kt,Te,ke,st,ae,ne),ke+=st,ne+=st),++ve&ze||(ce+=qe)}break;case 3:if(le==ae&&_e==ne&&0<ce.b){for(ke=ae,le=Te=ne+(je-ve)*Te-(We=(je-ve)*Le(ce.Ea,ce.b)),_e=ae,ze=ne,qe=[],We=(st=We)-1;0<=We;--We)qe[We]=_e[ze+We];for(We=st-1;0<=We;--We)ke[le+We]=qe[We];Du(ce,ve,je,ae,Te,ae,ne)}else Du(ce,ve,je,le,_e,ae,ne)}ne=E,ae=C}ae!=C&&s(E,C,ne,ae,Z)}function Sn(p,v){var C=p.V,E=p.Ba+p.c*p.C,U=v-p.C;if(e(v<=p.l.o),e(16>=U),0<U){var Z=p.l,K=p.Ta,ne=p.Ua,ae=Z.width;if(xn(p,U,C,E),U=ne=[ne],e((C=p.C)<(E=v)),e(Z.v<Z.va),E>Z.o&&(E=Z.o),C<Z.j){var ce=Z.j-C;C=Z.j,U[0]+=ce*ae}if(C>=E?C=0:(U[0]+=4*Z.v,Z.ka=C-Z.j,Z.U=Z.va-Z.v,Z.T=E-C,C=1),C){if(ne=ne[0],11>(C=p.ca).S){var ve=C.f.RGBA,je=(E=C.S,U=Z.U,Z=Z.T,ce=ve.eb,ve.A),le=Z;for(ve=ve.fb+p.Ma*ve.A;0<le--;){var _e=K,Te=ne,qe=U,ke=ce,ze=ve;switch(E){case Vu:Yl(_e,Te,qe,ke,ze);break;case Ds:Ya(_e,Te,qe,ke,ze);break;case $c:Ya(_e,Te,qe,ke,ze),al(ke,ze,0,qe,1,0);break;case Fu:sl(_e,Te,qe,ke,ze);break;case ki:yt(_e,Te,qe,ke,ze,1);break;case Bu:yt(_e,Te,qe,ke,ze,1),al(ke,ze,0,qe,1,0);break;case Xc:yt(_e,Te,qe,ke,ze,0);break;case $l:yt(_e,Te,qe,ke,ze,0),al(ke,ze,1,qe,1,0);break;case Xl:Xa(_e,Te,qe,ke,ze);break;case zu:Xa(_e,Te,qe,ke,ze),Ti(ke,ze,qe,1,0);break;case Ao:xa(_e,Te,qe,ke,ze);break;default:e(0)}ne+=ae,ve+=je}p.Ma+=Z}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=C.height)}}p.C=v,e(p.C<=p.i)}function Ln(p){var v;if(0<p.ua)return 0;for(v=0;v<p.Wb;++v){var C=p.Ya[v].G,E=p.Ya[v].H;if(0<C[1][E[1]+0].g||0<C[2][E[2]+0].g||0<C[3][E[3]+0].g)return 0}return 1}function qn(p,v,C,E,U,Z){if(p.Z!=0){var K=p.qd,ne=p.rd;for(e(Qa[p.Z]!=null);v<C;++v)Qa[p.Z](K,ne,E,U,E,U,Z),K=E,ne=U,U+=Z;p.qd=K,p.rd=ne}}function vr(p,v){var C=p.l.ma,E=C.Z==0||C.Z==1?p.l.j:p.C;if(E=p.C<E?E:p.C,e(v<=p.l.o),v>E){var U=p.l.width,Z=C.ca,K=C.tb+U*E,ne=p.V,ae=p.Ba+p.c*E,ce=p.gc;e(p.ab==1),e(ce[0].hc==3),ya(ce[0],E,v,ne,ae,Z,K),qn(C,E,v,Z,K,U)}p.C=p.Ma=v}function wn(p,v,C,E,U,Z,K){var ne=p.$/E,ae=p.$%E,ce=p.m,ve=p.s,je=C+p.$,le=je;U=C+E*U;var _e=C+E*Z,Te=280+ve.ua,qe=p.Pb?ne:16777216,ke=0<ve.ua?ve.Wa:null,ze=ve.wc,We=je<_e?Qt(ve,ae,ne):null;e(p.C<Z),e(_e<=U);var st=!1;e:for(;;){for(;st||je<_e;){var Qe=0;if(ne>=qe){var Tt=je-C;e((qe=p).Pb),qe.wd=qe.m,qe.xd=Tt,0<qe.s.ua&&Re(qe.s.Wa,qe.s.vb),qe=ne+Co}if(ae&ze||(We=Qt(ve,ae,ne)),e(We!=null),We.Qb&&(v[je]=We.qb,st=!0),!st)if(fe(ce),We.jc){Qe=ce,Tt=v;var wt=je,Kt=We.pd[ee(Qe)&No-1];e(We.jc),256>Kt.g?(oe(Qe,Qe.u+Kt.g),Tt[wt]=Kt.value,Qe=0):(oe(Qe,Qe.u+Kt.g-256),e(256<=Kt.value),Qe=Kt.value),Qe==0&&(st=!0)}else Qe=en(We.G[0],We.H[0],ce);if(ce.h)break;if(st||256>Qe){if(!st)if(We.nd)v[je]=(We.qb|Qe<<8)>>>0;else{if(fe(ce),st=en(We.G[1],We.H[1],ce),fe(ce),Tt=en(We.G[2],We.H[2],ce),wt=en(We.G[3],We.H[3],ce),ce.h)break;v[je]=(wt<<24|st<<16|Qe<<8|Tt)>>>0}if(st=!1,++je,++ae>=E&&(ae=0,++ne,K!=null&&ne<=Z&&!(ne%16)&&K(p,ne),ke!=null))for(;le<je;)Qe=v[le++],ke.X[(506832829*Qe&4294967295)>>>ke.Mb]=Qe}else if(280>Qe){if(Qe=sn(Qe-256,ce),Tt=en(We.G[4],We.H[4],ce),fe(ce),Tt=hn(E,Tt=sn(Tt,ce)),ce.h)break;if(je-C<Tt||U-je<Qe)break e;for(wt=0;wt<Qe;++wt)v[je+wt]=v[je+wt-Tt];for(je+=Qe,ae+=Qe;ae>=E;)ae-=E,++ne,K!=null&&ne<=Z&&!(ne%16)&&K(p,ne);if(e(je<=U),ae&ze&&(We=Qt(ve,ae,ne)),ke!=null)for(;le<je;)Qe=v[le++],ke.X[(506832829*Qe&4294967295)>>>ke.Mb]=Qe}else{if(!(Qe<Te))break e;for(st=Qe-280,e(ke!=null);le<je;)Qe=v[le++],ke.X[(506832829*Qe&4294967295)>>>ke.Mb]=Qe;Qe=je,e(!(st>>>(Tt=ke).Xa)),v[Qe]=Tt.X[st],st=!0}st||e(ce.h==J(ce))}if(p.Pb&&ce.h&&je<U)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&Re(p.s.vb,p.s.Wa);else{if(ce.h)break e;K?.(p,ne>Z?Z:ne),p.a=0,p.$=je-C}return 1}return p.a=3,0}function nn(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var v=p.Wa;v!=null&&(v.X=null),p.vb=null,e(p!=null)}function mn(){var p=new Xt;return p==null?null:(p.a=0,p.xb=tf,Ft("Predictor","VP8LPredictors"),Ft("Predictor","VP8LPredictors_C"),Ft("PredictorAdd","VP8LPredictorsAdd"),Ft("PredictorAdd","VP8LPredictorsAdd_C"),Fr=gt,Wl=xt,Yl=rn,Ya=Vt,Xa=bt,xa=jt,sl=qt,z.VP8LMapColor32b=va,z.VP8LMapColor8b=ws,p)}function tr(p,v,C,E,U){var Z=1,K=[p],ne=[v],ae=E.m,ce=E.s,ve=null,je=0;e:for(;;){if(C)for(;Z&&G(ae,1);){var le=K,_e=ne,Te=E,qe=1,ke=Te.m,ze=Te.gc[Te.ab],We=G(ke,2);if(Te.Oc&1<<We)Z=0;else{switch(Te.Oc|=1<<We,ze.hc=We,ze.Ea=le[0],ze.nc=_e[0],ze.K=[null],++Te.ab,e(4>=Te.ab),We){case 0:case 1:ze.b=G(ke,3)+2,qe=tr(Le(ze.Ea,ze.b),Le(ze.nc,ze.b),0,Te,ze.K),ze.K=ze.K[0];break;case 3:var st,Qe=G(ke,8)+1,Tt=16<Qe?0:4<Qe?1:2<Qe?2:3;if(le[0]=Le(ze.Ea,Tt),ze.b=Tt,st=qe=tr(Qe,1,0,Te,ze.K)){var wt,Kt=Qe,Nt=ze,_n=1<<(8>>Nt.b),fr=o(_n);if(fr==null)st=0;else{var ln=Nt.K[0],_t=Nt.w;for(fr[0]=Nt.K[0][0],wt=1;wt<1*Kt;++wt)fr[wt]=tt(ln[_t+wt],fr[wt-1]);for(;wt<4*_n;++wt)fr[wt]=0;Nt.K[0]=null,Nt.K[0]=fr,st=1}}qe=st;break;case 2:break;default:e(0)}Z=qe}}if(K=K[0],ne=ne[0],Z&&G(ae,1)&&!(Z=1<=(je=G(ae,4))&&11>=je)){E.a=3;break e}var ft;if(ft=Z)t:{var wr,Ht,fn,Gn=E,es=K,Cs=ne,ir=je,Hr=C,Rs=Gn.m,Gr=Gn.s,vn=[null],Vn=1,_r=0,Pn=Mi[ir];n:for(;;){if(Hr&&G(Rs,1)){var ts=G(Rs,3)+2,Sr=Le(es,ts),Fn=Le(Cs,ts),Pr=Sr*Fn;if(!tr(Sr,Fn,0,Gn,vn))break n;for(vn=vn[0],Gr.xc=ts,wr=0;wr<Pr;++wr){var Wn=vn[wr]>>8&65535;vn[wr]=Wn,Wn>=Vn&&(Vn=Wn+1)}}if(Rs.h)break n;for(Ht=0;5>Ht;++Ht){var Wr=ll[Ht];!Ht&&0<ir&&(Wr+=1<<ir),_r<Wr&&(_r=Wr)}var Yr=u(Vn*Pn,H),Qn=Vn,Rn=u(Qn,he);if(Rn==null)var Is=null;else e(65536>=Qn),Is=Rn;var Mr=o(_r);if(Is==null||Mr==null||Yr==null){Gn.a=1;break n}var Bt=Yr;for(wr=fn=0;wr<Vn;++wr){var zt=Is[wr],Bn=zt.G,si=zt.H,Ri=0,Xs=1,Xr=0;for(Ht=0;5>Ht;++Ht){Wr=ll[Ht],Bn[Ht]=Bt,si[Ht]=fn,!Ht&&0<ir&&(Wr+=1<<ir);s:{var Lo,Oo=Wr,Yu=Gn,ar=Mr,rf=Bt,sf=fn,Xu=0,Ka=Yu.m,r0=G(Ka,1);if(a(ar,0,0,Oo),r0){var af=G(Ka,1)+1,of=G(Ka,1),$u=G(Ka,of==0?1:8);ar[$u]=1,af==2&&(ar[$u=G(Ka,8)]=1);var ls=1}else{var Lr=o(19),Jc=G(Ka,4)+4;if(19<Jc){Yu.a=3;var Do=0;break s}for(Lo=0;Lo<Jc;++Lo)Lr[Zc[Lo]]=G(Ka,3);var ec=void 0,hl=void 0,Sa=Yu,Zu=Lr,tc=Oo,Qu=ar,Ku=0,Ja=Sa.m,lf=8,cf=u(128,H);r:for(;V(cf,0,7,Zu,19);){if(G(Ja,1)){var Rd=2+2*G(Ja,3);if((ec=2+G(Ja,Rd))>tc)break r}else ec=tc;for(hl=0;hl<tc&&ec--;){fe(Ja);var uf=cf[0+(127&ee(Ja))];oe(Ja,Ja.u+uf.g);var Ro=uf.value;if(16>Ro)Qu[hl++]=Ro,Ro!=0&&(lf=Ro);else{var Id=Ro==16,Vd=Ro-16,Fd=Zl[Vd],hf=G(Ja,ji[Vd])+Fd;if(hl+hf>tc)break r;for(var Bd=Id?lf:0;0<hf--;)Qu[hl++]=Bd}}Ku=1;break r}Ku||(Sa.a=3),ls=Ku}(ls=ls&&!Ka.h)&&(Xu=V(rf,sf,8,ar,Oo)),ls&&Xu!=0?Do=Xu:(Yu.a=3,Do=0)}if(Do==0)break n;if(Xs&&Pu[Ht]==1&&(Xs=Bt[fn].g==0),Ri+=Bt[fn].g,fn+=Do,3>=Ht){var fl,Ju=Mr[0];for(fl=1;fl<Wr;++fl)Mr[fl]>Ju&&(Ju=Mr[fl]);Xr+=Ju}}if(zt.nd=Xs,zt.Qb=0,Xs&&(zt.qb=(Bn[3][si[3]+0].value<<24|Bn[1][si[1]+0].value<<16|Bn[2][si[2]+0].value)>>>0,Ri==0&&256>Bn[0][si[0]+0].value&&(zt.Qb=1,zt.qb+=Bn[0][si[0]+0].value<<8)),zt.jc=!zt.Qb&&6>Xr,zt.jc){var eu,Na=zt;for(eu=0;eu<No;++eu){var eo=eu,to=Na.pd[eo],eh=Na.G[0][Na.H[0]+eo];256<=eh.value?(to.g=eh.g+256,to.value=eh.value):(to.g=0,to.value=0,eo>>=yn(eh,8,to),eo>>=yn(Na.G[1][Na.H[1]+eo],16,to),eo>>=yn(Na.G[2][Na.H[2]+eo],0,to),yn(Na.G[3][Na.H[3]+eo],24,to))}}}Gr.vc=vn,Gr.Wb=Vn,Gr.Ya=Is,Gr.yc=Yr,ft=1;break t}ft=0}if(!(Z=ft)){E.a=3;break e}if(0<je){if(ce.ua=1<<je,!$(ce.Wa,je)){E.a=1,Z=0;break e}}else ce.ua=0;var th=E,dl=K,zd=ne,nc=th.s,rc=nc.xc;if(th.c=dl,th.i=zd,nc.md=Le(dl,rc),nc.wc=rc==0?-1:(1<<rc)-1,C){E.xb=To;break e}if((ve=o(K*ne))==null){E.a=1,Z=0;break e}Z=(Z=wn(E,ve,0,K,ne,ne,null))&&!ae.h;break e}return Z?(U!=null?U[0]=ve:(e(ve==null),e(C)),E.$=0,C||nn(ce)):nn(ce),Z}function Ne(p,v){var C=p.c*p.i,E=C+v+16*v;return e(p.c<=v),p.V=o(E),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+C+v,1)}function Ie(p,v){var C=p.C,E=v-C,U=p.V,Z=p.Ba+p.c*C;for(e(v<=p.l.o);0<E;){var K=16<E?16:E,ne=p.l.ma,ae=p.l.width,ce=ae*K,ve=ne.ca,je=ne.tb+ae*C,le=p.Ta,_e=p.Ua;xn(p,K,U,Z),bi(le,_e,ve,je,ce),qn(ne,C,C+K,ve,je,ae),E-=K,U+=K*p.c,C+=K}e(C==v),p.C=p.Ma=v}function rt(){this.ub=this.yd=this.td=this.Rb=0}function Yt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function $n(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function an(){this.Yb=(function(){var p=[];return(function v(C,E,U){for(var Z=U[E],K=0;K<Z&&(C.push(U.length>E+1?[]:0),!(U.length<E+1));K++)v(C[K],E+1,U)})(p,0,[3,11]),p})()}function $t(){this.jb=o(3),this.Wc=c([4,8],an),this.Xc=c([4,17],an)}function nr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Zn(){this.ld=this.La=this.dd=this.tc=0}function Ir(){this.Na=this.la=0}function ms(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ei(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ms(){this.uc=this.M=this.Nb=0,this.wa=Array(new Zn),this.Y=0,this.ya=Array(new ei),this.aa=0,this.l=new ti}function Us(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Hs(){this.cb=this.a=0,this.sc="",this.m=new j,this.Od=new rt,this.Kc=new Yt,this.ed=new nr,this.Qa=new $n,this.Ic=this.$c=this.Aa=0,this.D=new Ms,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,j),this.ia=0,this.pb=u(4,ms),this.Pa=new $t,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Us),this.Hd=0,this.rb=Array(new Ir),this.sb=0,this.wa=Array(new Zn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ei),this.L=this.aa=0,this.gd=c([4,2],Zn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function qr(p,v){return 0>p?0:p>v?v:p}function ti(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function gs(){var p=new Hs;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,vi||(vi=Xi)),p}function Tn(p,v,C){return p.a==0&&(p.a=v,p.sc=C,p.cb=0),0}function Il(p,v,C){return 3<=C&&p[v+0]==157&&p[v+1]==1&&p[v+2]==42}function fi(p,v){if(p==null)return 0;if(p.a=0,p.sc="OK",v==null)return Tn(p,2,"null VP8Io passed to VP8GetHeaders()");var C=v.data,E=v.w,U=v.ha;if(4>U)return Tn(p,7,"Truncated header.");var Z=C[E+0]|C[E+1]<<8|C[E+2]<<16,K=p.Od;if(K.Rb=!(1&Z),K.td=Z>>1&7,K.yd=Z>>4&1,K.ub=Z>>5,3<K.td)return Tn(p,3,"Incorrect keyframe parameters.");if(!K.yd)return Tn(p,4,"Frame not displayable.");E+=3,U-=3;var ne=p.Kc;if(K.Rb){if(7>U)return Tn(p,7,"cannot parse picture header");if(!Il(C,E,U))return Tn(p,3,"Bad code word");ne.c=16383&(C[E+4]<<8|C[E+3]),ne.Td=C[E+4]>>6,ne.i=16383&(C[E+6]<<8|C[E+5]),ne.Ud=C[E+6]>>6,E+=7,U-=7,p.za=ne.c+15>>4,p.Ub=ne.i+15>>4,v.width=ne.c,v.height=ne.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,a((Z=p.Pa).jb,0,255,Z.jb.length),e((Z=p.Qa)!=null),Z.Cb=0,Z.Bb=0,Z.Fb=1,a(Z.Zb,0,0,Z.Zb.length),a(Z.Lb,0,0,Z.Lb)}if(K.ub>U)return Tn(p,7,"bad partition length");I(Z=p.m,C,E,K.ub),E+=K.ub,U-=K.ub,K.Rb&&(ne.Ld=Se(Z),ne.Kd=Se(Z)),ne=p.Qa;var ae,ce=p.Pa;if(e(Z!=null),e(ne!=null),ne.Cb=Se(Z),ne.Cb){if(ne.Bb=Se(Z),Se(Z)){for(ne.Fb=Se(Z),ae=0;4>ae;++ae)ne.Zb[ae]=Se(Z)?ie(Z,7):0;for(ae=0;4>ae;++ae)ne.Lb[ae]=Se(Z)?ie(Z,6):0}if(ne.Bb)for(ae=0;3>ae;++ae)ce.jb[ae]=Se(Z)?se(Z,8):255}else ne.Bb=0;if(Z.Ka)return Tn(p,3,"cannot parse segment header");if((ne=p.ed).zd=Se(Z),ne.Tb=se(Z,6),ne.wb=se(Z,3),ne.Pc=Se(Z),ne.Pc&&Se(Z)){for(ce=0;4>ce;++ce)Se(Z)&&(ne.vd[ce]=ie(Z,6));for(ce=0;4>ce;++ce)Se(Z)&&(ne.od[ce]=ie(Z,6))}if(p.L=ne.Tb==0?0:ne.zd?1:2,Z.Ka)return Tn(p,3,"cannot parse filter header");var ve=U;if(U=ae=E,E=ae+ve,ne=ve,p.Xb=(1<<se(p.m,2))-1,ve<3*(ce=p.Xb))C=7;else{for(ae+=3*ce,ne-=3*ce,ve=0;ve<ce;++ve){var je=C[U+0]|C[U+1]<<8|C[U+2]<<16;je>ne&&(je=ne),I(p.Jc[+ve],C,ae,je),ae+=je,ne-=je,U+=3}I(p.Jc[+ce],C,ae,ne),C=ae<E?0:5}if(C!=0)return Tn(p,C,"cannot parse partitions");for(C=se(ae=p.m,7),U=Se(ae)?ie(ae,4):0,E=Se(ae)?ie(ae,4):0,ne=Se(ae)?ie(ae,4):0,ce=Se(ae)?ie(ae,4):0,ae=Se(ae)?ie(ae,4):0,ve=p.Qa,je=0;4>je;++je){if(ve.Cb){var le=ve.Zb[je];ve.Fb||(le+=C)}else{if(0<je){p.pb[je]=p.pb[0];continue}le=C}var _e=p.pb[je];_e.Sc[0]=Li[qr(le+U,127)],_e.Sc[1]=Oi[qr(le+0,127)],_e.Eb[0]=2*Li[qr(le+E,127)],_e.Eb[1]=101581*Oi[qr(le+ne,127)]>>16,8>_e.Eb[1]&&(_e.Eb[1]=8),_e.Qc[0]=Li[qr(le+ce,117)],_e.Qc[1]=Oi[qr(le+ae,127)],_e.lc=le+ae}if(!K.Rb)return Tn(p,4,"Not a key frame.");for(Se(Z),K=p.Pa,C=0;4>C;++C){for(U=0;8>U;++U)for(E=0;3>E;++E)for(ne=0;11>ne;++ne)ce=ye(Z,hr[C][U][E][ne])?se(Z,8):Od[C][U][E][ne],K.Wc[C][U].Yb[E][ne]=ce;for(U=0;17>U;++U)K.Xc[C][U]=K.Wc[C][Nn[U]]}return p.kc=Se(Z),p.kc&&(p.Bd=se(Z,8)),p.cb=1}function Xi(p,v,C,E,U,Z,K){var ne=v[U].Yb[C];for(C=0;16>U;++U){if(!ye(p,ne[C+0]))return U;for(;!ye(p,ne[C+1]);)if(ne=v[++U].Yb[0],C=0,U==16)return 16;var ae=v[U+1].Yb;if(ye(p,ne[C+2])){var ce=p,ve=0;if(ye(ce,(le=ne)[(je=C)+3]))if(ye(ce,le[je+6])){for(ne=0,je=2*(ve=ye(ce,le[je+8]))+(le=ye(ce,le[je+9+ve])),ve=0,le=Ld[je];le[ne];++ne)ve+=ve+ye(ce,le[ne]);ve+=3+(8<<je)}else ye(ce,le[je+7])?(ve=7+2*ye(ce,165),ve+=ye(ce,145)):ve=5+ye(ce,159);else ve=ye(ce,le[je+4])?3+ye(ce,le[je+5]):2;ne=ae[2]}else ve=1,ne=ae[1];ae=K+ef[U],0>(ce=p).b&&me(ce);var je,le=ce.b,_e=(je=ce.Ca>>1)-(ce.I>>le)>>31;--ce.b,ce.Ca+=_e,ce.Ca|=1,ce.I-=(je+1&_e)<<le,Z[ae]=((ve^_e)-_e)*E[(0<U)+0]}return 16}function yo(p){var v=p.rb[p.sb-1];v.la=0,v.Na=0,a(p.zc,0,0,p.zc.length),p.ja=0}function bs(p,v,C,E,U){U=p[v+C+32*E]+(U>>3),p[v+C+32*E]=-256&U?0>U?0:255:U}function jr(p,v,C,E,U,Z){bs(p,v,0,C,E+U),bs(p,v,1,C,E+Z),bs(p,v,2,C,E-Z),bs(p,v,3,C,E-U)}function yr(p){return(20091*p>>16)+p}function xo(p,v,C,E){var U,Z=0,K=o(16);for(U=0;4>U;++U){var ne=p[v+0]+p[v+8],ae=p[v+0]-p[v+8],ce=(35468*p[v+4]>>16)-yr(p[v+12]),ve=yr(p[v+4])+(35468*p[v+12]>>16);K[Z+0]=ne+ve,K[Z+1]=ae+ce,K[Z+2]=ae-ce,K[Z+3]=ne-ve,Z+=4,v++}for(U=Z=0;4>U;++U)ne=(p=K[Z+0]+4)+K[Z+8],ae=p-K[Z+8],ce=(35468*K[Z+4]>>16)-yr(K[Z+12]),bs(C,E,0,0,ne+(ve=yr(K[Z+4])+(35468*K[Z+12]>>16))),bs(C,E,1,0,ae+ce),bs(C,E,2,0,ae-ce),bs(C,E,3,0,ne-ve),Z++,E+=32}function Vl(p,v,C,E){var U=p[v+0]+4,Z=35468*p[v+4]>>16,K=yr(p[v+4]),ne=35468*p[v+1]>>16;jr(C,E,0,U+K,p=yr(p[v+1]),ne),jr(C,E,1,U+Z,p,ne),jr(C,E,2,U-Z,p,ne),jr(C,E,3,U-K,p,ne)}function $o(p,v,C,E,U){xo(p,v,C,E),U&&xo(p,v+16,C,E+4)}function vs(p,v,C,E){$a(p,v+0,C,E,1),$a(p,v+32,C,E+128,1)}function Zo(p,v,C,E){var U;for(p=p[v+0]+4,U=0;4>U;++U)for(v=0;4>v;++v)bs(C,E,v,U,p)}function Dc(p,v,C,E){p[v+0]&&zn(p,v+0,C,E),p[v+16]&&zn(p,v+16,C,E+4),p[v+32]&&zn(p,v+32,C,E+128),p[v+48]&&zn(p,v+48,C,E+128+4)}function $i(p,v,C,E){var U,Z=o(16);for(U=0;4>U;++U){var K=p[v+0+U]+p[v+12+U],ne=p[v+4+U]+p[v+8+U],ae=p[v+4+U]-p[v+8+U],ce=p[v+0+U]-p[v+12+U];Z[0+U]=K+ne,Z[8+U]=K-ne,Z[4+U]=ce+ae,Z[12+U]=ce-ae}for(U=0;4>U;++U)K=(p=Z[0+4*U]+3)+Z[3+4*U],ne=Z[1+4*U]+Z[2+4*U],ae=Z[1+4*U]-Z[2+4*U],ce=p-Z[3+4*U],C[E+0]=K+ne>>3,C[E+16]=ce+ae>>3,C[E+32]=K-ne>>3,C[E+48]=ce-ae>>3,E+=64}function Qo(p,v,C){var E,U=v-32,Z=Os,K=255-p[U-1];for(E=0;E<C;++E){var ne,ae=Z,ce=K+p[v-1];for(ne=0;ne<C;++ne)p[v+ne]=ae[ce+p[U+ne]];v+=32}}function Cu(p,v){Qo(p,v,4)}function Tu(p,v){Qo(p,v,8)}function Rc(p,v){Qo(p,v,16)}function Ic(p,v){var C;for(C=0;16>C;++C)s(p,v+32*C,p,v-32,16)}function ku(p,v){var C;for(C=16;0<C;--C)a(p,v,p[v-1],16),v+=32}function ni(p,v,C){var E;for(E=0;16>E;++E)a(v,C+32*E,p,16)}function Zi(p,v){var C,E=16;for(C=0;16>C;++C)E+=p[v-1+32*C]+p[v+C-32];ni(E>>5,p,v)}function Oa(p,v){var C,E=8;for(C=0;16>C;++C)E+=p[v-1+32*C];ni(E>>4,p,v)}function Ko(p,v){var C,E=8;for(C=0;16>C;++C)E+=p[v+C-32];ni(E>>4,p,v)}function wo(p,v){ni(128,p,v)}function Ut(p,v,C){return p+2*v+C+2>>2}function ju(p,v){var C,E=v-32;for(E=new Uint8Array([Ut(p[E-1],p[E+0],p[E+1]),Ut(p[E+0],p[E+1],p[E+2]),Ut(p[E+1],p[E+2],p[E+3]),Ut(p[E+2],p[E+3],p[E+4])]),C=0;4>C;++C)s(p,v+32*C,E,0,E.length)}function Vc(p,v){var C=p[v-1],E=p[v-1+32],U=p[v-1+64],Z=p[v-1+96];Fe(p,v+0,16843009*Ut(p[v-1-32],C,E)),Fe(p,v+32,16843009*Ut(C,E,U)),Fe(p,v+64,16843009*Ut(E,U,Z)),Fe(p,v+96,16843009*Ut(U,Z,Z))}function Eu(p,v){var C,E=4;for(C=0;4>C;++C)E+=p[v+C-32]+p[v-1+32*C];for(E>>=3,C=0;4>C;++C)a(p,v+32*C,E,4)}function di(p,v){var C=p[v-1+0],E=p[v-1+32],U=p[v-1+64],Z=p[v-1-32],K=p[v+0-32],ne=p[v+1-32],ae=p[v+2-32],ce=p[v+3-32];p[v+0+96]=Ut(E,U,p[v-1+96]),p[v+1+96]=p[v+0+64]=Ut(C,E,U),p[v+2+96]=p[v+1+64]=p[v+0+32]=Ut(Z,C,E),p[v+3+96]=p[v+2+64]=p[v+1+32]=p[v+0+0]=Ut(K,Z,C),p[v+3+64]=p[v+2+32]=p[v+1+0]=Ut(ne,K,Z),p[v+3+32]=p[v+2+0]=Ut(ae,ne,K),p[v+3+0]=Ut(ce,ae,ne)}function ys(p,v){var C=p[v+1-32],E=p[v+2-32],U=p[v+3-32],Z=p[v+4-32],K=p[v+5-32],ne=p[v+6-32],ae=p[v+7-32];p[v+0+0]=Ut(p[v+0-32],C,E),p[v+1+0]=p[v+0+32]=Ut(C,E,U),p[v+2+0]=p[v+1+32]=p[v+0+64]=Ut(E,U,Z),p[v+3+0]=p[v+2+32]=p[v+1+64]=p[v+0+96]=Ut(U,Z,K),p[v+3+32]=p[v+2+64]=p[v+1+96]=Ut(Z,K,ne),p[v+3+64]=p[v+2+96]=Ut(K,ne,ae),p[v+3+96]=Ut(ne,ae,ae)}function Fc(p,v){var C=p[v-1+0],E=p[v-1+32],U=p[v-1+64],Z=p[v-1-32],K=p[v+0-32],ne=p[v+1-32],ae=p[v+2-32],ce=p[v+3-32];p[v+0+0]=p[v+1+64]=Z+K+1>>1,p[v+1+0]=p[v+2+64]=K+ne+1>>1,p[v+2+0]=p[v+3+64]=ne+ae+1>>1,p[v+3+0]=ae+ce+1>>1,p[v+0+96]=Ut(U,E,C),p[v+0+64]=Ut(E,C,Z),p[v+0+32]=p[v+1+96]=Ut(C,Z,K),p[v+1+32]=p[v+2+96]=Ut(Z,K,ne),p[v+2+32]=p[v+3+96]=Ut(K,ne,ae),p[v+3+32]=Ut(ne,ae,ce)}function Jo(p,v){var C=p[v+0-32],E=p[v+1-32],U=p[v+2-32],Z=p[v+3-32],K=p[v+4-32],ne=p[v+5-32],ae=p[v+6-32],ce=p[v+7-32];p[v+0+0]=C+E+1>>1,p[v+1+0]=p[v+0+64]=E+U+1>>1,p[v+2+0]=p[v+1+64]=U+Z+1>>1,p[v+3+0]=p[v+2+64]=Z+K+1>>1,p[v+0+32]=Ut(C,E,U),p[v+1+32]=p[v+0+96]=Ut(E,U,Z),p[v+2+32]=p[v+1+96]=Ut(U,Z,K),p[v+3+32]=p[v+2+96]=Ut(Z,K,ne),p[v+3+64]=Ut(K,ne,ae),p[v+3+96]=Ut(ne,ae,ce)}function pi(p,v){var C=p[v-1+0],E=p[v-1+32],U=p[v-1+64],Z=p[v-1+96];p[v+0+0]=C+E+1>>1,p[v+2+0]=p[v+0+32]=E+U+1>>1,p[v+2+32]=p[v+0+64]=U+Z+1>>1,p[v+1+0]=Ut(C,E,U),p[v+3+0]=p[v+1+32]=Ut(E,U,Z),p[v+3+32]=p[v+1+64]=Ut(U,Z,Z),p[v+3+64]=p[v+2+64]=p[v+0+96]=p[v+1+96]=p[v+2+96]=p[v+3+96]=Z}function el(p,v){var C=p[v-1+0],E=p[v-1+32],U=p[v-1+64],Z=p[v-1+96],K=p[v-1-32],ne=p[v+0-32],ae=p[v+1-32],ce=p[v+2-32];p[v+0+0]=p[v+2+32]=C+K+1>>1,p[v+0+32]=p[v+2+64]=E+C+1>>1,p[v+0+64]=p[v+2+96]=U+E+1>>1,p[v+0+96]=Z+U+1>>1,p[v+3+0]=Ut(ne,ae,ce),p[v+2+0]=Ut(K,ne,ae),p[v+1+0]=p[v+3+32]=Ut(C,K,ne),p[v+1+32]=p[v+3+64]=Ut(E,C,K),p[v+1+64]=p[v+3+96]=Ut(U,E,C),p[v+1+96]=Ut(Z,U,E)}function fa(p,v){var C;for(C=0;8>C;++C)s(p,v+32*C,p,v-32,8)}function Mu(p,v){var C;for(C=0;8>C;++C)a(p,v,p[v-1],8),v+=32}function Ni(p,v,C){var E;for(E=0;8>E;++E)a(v,C+32*E,p,8)}function Fl(p,v){var C,E=8;for(C=0;8>C;++C)E+=p[v+C-32]+p[v-1+32*C];Ni(E>>4,p,v)}function Bl(p,v){var C,E=4;for(C=0;8>C;++C)E+=p[v+C-32];Ni(E>>3,p,v)}function as(p,v){var C,E=4;for(C=0;8>C;++C)E+=p[v-1+32*C];Ni(E>>3,p,v)}function da(p,v){Ni(128,p,v)}function Ai(p,v,C){var E=p[v-C],U=p[v+0],Z=3*(U-E)+Za[1020+p[v-2*C]-p[v+C]],K=Yc[112+(Z+4>>3)];p[v-C]=Os[255+E+Yc[112+(Z+3>>3)]],p[v+0]=Os[255+U-K]}function Da(p,v,C,E){var U=p[v+0],Z=p[v+C];return _s[255+p[v-2*C]-p[v-C]]>E||_s[255+Z-U]>E}function zl(p,v,C,E){return 4*_s[255+p[v-C]-p[v+0]]+_s[255+p[v-2*C]-p[v+C]]<=E}function tl(p,v,C,E,U){var Z=p[v-3*C],K=p[v-2*C],ne=p[v-C],ae=p[v+0],ce=p[v+C],ve=p[v+2*C],je=p[v+3*C];return 4*_s[255+ne-ae]+_s[255+K-ce]>E?0:_s[255+p[v-4*C]-Z]<=U&&_s[255+Z-K]<=U&&_s[255+K-ne]<=U&&_s[255+je-ve]<=U&&_s[255+ve-ce]<=U&&_s[255+ce-ae]<=U}function Ra(p,v,C,E){var U=2*E+1;for(E=0;16>E;++E)zl(p,v+E,C,U)&&Ai(p,v+E,C)}function Ia(p,v,C,E){var U=2*E+1;for(E=0;16>E;++E)zl(p,v+E*C,1,U)&&Ai(p,v+E*C,1)}function nl(p,v,C,E){var U;for(U=3;0<U;--U)Ra(p,v+=4*C,C,E)}function Bc(p,v,C,E){var U;for(U=3;0<U;--U)Ia(p,v+=4,C,E)}function Va(p,v,C,E,U,Z,K,ne){for(Z=2*Z+1;0<U--;){if(tl(p,v,C,Z,K))if(Da(p,v,C,ne))Ai(p,v,C);else{var ae=p,ce=v,ve=C,je=ae[ce-2*ve],le=ae[ce-ve],_e=ae[ce+0],Te=ae[ce+ve],qe=ae[ce+2*ve],ke=27*(We=Za[1020+3*(_e-le)+Za[1020+je-Te]])+63>>7,ze=18*We+63>>7,We=9*We+63>>7;ae[ce-3*ve]=Os[255+ae[ce-3*ve]+We],ae[ce-2*ve]=Os[255+je+ze],ae[ce-ve]=Os[255+le+ke],ae[ce+0]=Os[255+_e-ke],ae[ce+ve]=Os[255+Te-ze],ae[ce+2*ve]=Os[255+qe-We]}v+=E}}function Fa(p,v,C,E,U,Z,K,ne){for(Z=2*Z+1;0<U--;){if(tl(p,v,C,Z,K))if(Da(p,v,C,ne))Ai(p,v,C);else{var ae=p,ce=v,ve=C,je=ae[ce-ve],le=ae[ce+0],_e=ae[ce+ve],Te=Yc[112+(4+(qe=3*(le-je))>>3)],qe=Yc[112+(qe+3>>3)],ke=Te+1>>1;ae[ce-2*ve]=Os[255+ae[ce-2*ve]+ke],ae[ce-ve]=Os[255+je+qe],ae[ce+0]=Os[255+le-Te],ae[ce+ve]=Os[255+_e-ke]}v+=E}}function Lu(p,v,C,E,U,Z){Va(p,v,C,1,16,E,U,Z)}function Ba(p,v,C,E,U,Z){Va(p,v,1,C,16,E,U,Z)}function Ou(p,v,C,E,U,Z){var K;for(K=3;0<K;--K)Fa(p,v+=4*C,C,1,16,E,U,Z)}function S(p,v,C,E,U,Z){var K;for(K=3;0<K;--K)Fa(p,v+=4,1,C,16,E,U,Z)}function q(p,v,C,E,U,Z,K,ne){Va(p,v,U,1,8,Z,K,ne),Va(C,E,U,1,8,Z,K,ne)}function ue(p,v,C,E,U,Z,K,ne){Va(p,v,1,U,8,Z,K,ne),Va(C,E,1,U,8,Z,K,ne)}function be(p,v,C,E,U,Z,K,ne){Fa(p,v+4*U,U,1,8,Z,K,ne),Fa(C,E+4*U,U,1,8,Z,K,ne)}function Ae(p,v,C,E,U,Z,K,ne){Fa(p,v+4,1,U,8,Z,K,ne),Fa(C,E+4,1,U,8,Z,K,ne)}function Ge(){this.ba=new St,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function et(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function At(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Lt(){this.ua=0,this.Wa=new pt,this.vb=new pt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new he,this.yc=new H}function Xt(){this.xb=this.a=0,this.l=new ti,this.ca=new St,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Lt,this.ab=0,this.gc=u(4,At),this.Oc=0}function on(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ti,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function On(p,v,C,E,U,Z,K){for(p=p==null?0:p[v+0],v=0;v<K;++v)U[Z+v]=p+C[E+v]&255,p=U[Z+v]}function xr(p,v,C,E,U,Z,K){var ne;if(p==null)On(null,null,C,E,U,Z,K);else for(ne=0;ne<K;++ne)U[Z+ne]=p[v+ne]+C[E+ne]&255}function Vr(p,v,C,E,U,Z,K){if(p==null)On(null,null,C,E,U,Z,K);else{var ne,ae=p[v+0],ce=ae,ve=ae;for(ne=0;ne<K;++ne)ce=ve+(ae=p[v+ne])-ce,ve=C[E+ne]+(-256&ce?0>ce?0:255:ce)&255,ce=ae,U[Z+ne]=ve}}function rr(p,v,C,E){var U=v.width,Z=v.o;if(e(p!=null&&v!=null),0>C||0>=E||C+E>Z)return null;if(!p.Cc){if(p.ga==null){var K;if(p.ga=new on,(K=p.ga==null)||(K=v.width*v.o,e(p.Gb.length==0),p.Gb=o(K),p.Uc=0,p.Gb==null?K=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,K=1),K=!K),!K){K=p.ga;var ne=p.Fa,ae=p.P,ce=p.qc,ve=p.mb,je=p.nb,le=ae+1,_e=ce-1,Te=K.l;if(e(ne!=null&&ve!=null&&v!=null),Qa[0]=null,Qa[1]=On,Qa[2]=xr,Qa[3]=Vr,K.ca=ve,K.tb=je,K.c=v.width,K.i=v.height,e(0<K.c&&0<K.i),1>=ce)v=0;else if(K.$a=3&ne[ae+0],K.Z=ne[ae+0]>>2&3,K.Lc=ne[ae+0]>>4&3,ae=ne[ae+0]>>6&3,0>K.$a||1<K.$a||4<=K.Z||1<K.Lc||ae)v=0;else if(Te.put=Xe,Te.ac=lt,Te.bc=Mt,Te.ma=K,Te.width=v.width,Te.height=v.height,Te.Da=v.Da,Te.v=v.v,Te.va=v.va,Te.j=v.j,Te.o=v.o,K.$a)e:{e(K.$a==1),v=mn();t:for(;;){if(v==null){v=0;break e}if(e(K!=null),K.mc=v,v.c=K.c,v.i=K.i,v.l=K.l,v.l.ma=K,v.l.width=K.c,v.l.height=K.i,v.a=0,de(v.m,ne,le,_e),!tr(K.c,K.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&Ln(v.s)?(K.ic=1,ne=v.c*v.i,v.Ta=null,v.Ua=0,v.V=o(ne),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(K.ic=0,v=Ne(v,K.c)),!v))break t;v=1;break e}K.mc=null,v=0}else v=_e>=K.c*K.i;K=!v}if(K)return null;p.ga.Lc!=1?p.Ga=0:E=Z-C}e(p.ga!=null),e(C+E<=Z);e:{if(v=(ne=p.ga).c,Z=ne.l.o,ne.$a==0){if(le=p.rc,_e=p.Vc,Te=p.Fa,ae=p.P+1+C*v,ce=p.mb,ve=p.nb+C*v,e(ae<=p.P+p.qc),ne.Z!=0)for(e(Qa[ne.Z]!=null),K=0;K<E;++K)Qa[ne.Z](le,_e,Te,ae,ce,ve,v),le=ce,_e=ve,ve+=v,ae+=v;else for(K=0;K<E;++K)s(ce,ve,Te,ae,v),le=ce,_e=ve,ve+=v,ae+=v;p.rc=le,p.Vc=_e}else{if(e(ne.mc!=null),v=C+E,e((K=ne.mc)!=null),e(v<=K.i),K.C>=v)v=1;else if(ne.ic||Qi(),ne.ic){ne=K.V,le=K.Ba,_e=K.c;var qe=K.i,ke=(Te=1,ae=K.$/_e,ce=K.$%_e,ve=K.m,je=K.s,K.$),ze=_e*qe,We=_e*v,st=je.wc,Qe=ke<We?Qt(je,ce,ae):null;e(ke<=ze),e(v<=qe),e(Ln(je));t:for(;;){for(;!ve.h&&ke<We;){if(ce&st||(Qe=Qt(je,ce,ae)),e(Qe!=null),fe(ve),256>(qe=en(Qe.G[0],Qe.H[0],ve)))ne[le+ke]=qe,++ke,++ce>=_e&&(ce=0,++ae<=v&&!(ae%16)&&vr(K,ae));else{if(!(280>qe)){Te=0;break t}qe=sn(qe-256,ve);var Tt,wt=en(Qe.G[4],Qe.H[4],ve);if(fe(ve),!(ke>=(wt=hn(_e,wt=sn(wt,ve)))&&ze-ke>=qe)){Te=0;break t}for(Tt=0;Tt<qe;++Tt)ne[le+ke+Tt]=ne[le+ke+Tt-wt];for(ke+=qe,ce+=qe;ce>=_e;)ce-=_e,++ae<=v&&!(ae%16)&&vr(K,ae);ke<We&&ce&st&&(Qe=Qt(je,ce,ae))}e(ve.h==J(ve))}vr(K,ae>v?v:ae);break t}!Te||ve.h&&ke<ze?(Te=0,K.a=ve.h?5:3):K.$=ke,v=Te}else v=wn(K,K.V,K.Ba,K.c,K.i,v,Ie);if(!v){E=0;break e}}C+E>=Z&&(p.Cc=1),E=1}if(!E)return null;if(p.Cc&&((E=p.ga)!=null&&(E.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+C*U}function Jr(p,v,C,E,U,Z){for(;0<U--;){var K,ne=p,ae=v+(C?1:0),ce=p,ve=v+(C?0:3);for(K=0;K<E;++K){var je=ce[ve+4*K];je!=255&&(je*=32897,ne[ae+4*K+0]=ne[ae+4*K+0]*je>>23,ne[ae+4*K+1]=ne[ae+4*K+1]*je>>23,ne[ae+4*K+2]=ne[ae+4*K+2]*je>>23)}v+=Z}}function Ur(p,v,C,E,U){for(;0<E--;){var Z;for(Z=0;Z<C;++Z){var K=p[v+2*Z+0],ne=15&(ce=p[v+2*Z+1]),ae=4369*ne,ce=(240&ce|ce>>4)*ae>>16;p[v+2*Z+0]=(240&K|K>>4)*ae>>16&240|(15&K|K<<4)*ae>>16>>4&15,p[v+2*Z+1]=240&ce|ne}v+=U}}function xs(p,v,C,E,U,Z,K,ne){var ae,ce,ve=255;for(ce=0;ce<U;++ce){for(ae=0;ae<E;++ae){var je=p[v+ae];Z[K+4*ae]=je,ve&=je}v+=C,K+=ne}return ve!=255}function za(p,v,C,E,U){var Z;for(Z=0;Z<U;++Z)C[E+Z]=p[v+Z]>>8}function Qi(){al=Jr,Ti=Ur,Hc=xs,bi=za}function Pa(p,v,C){z[p]=function(E,U,Z,K,ne,ae,ce,ve,je,le,_e,Te,qe,ke,ze,We,st){var Qe,Tt=st-1>>1,wt=ne[ae+0]|ce[ve+0]<<16,Kt=je[le+0]|_e[Te+0]<<16;e(E!=null);var Nt=3*wt+Kt+131074>>2;for(v(E[U+0],255&Nt,Nt>>16,qe,ke),Z!=null&&(Nt=3*Kt+wt+131074>>2,v(Z[K+0],255&Nt,Nt>>16,ze,We)),Qe=1;Qe<=Tt;++Qe){var _n=ne[ae+Qe]|ce[ve+Qe]<<16,fr=je[le+Qe]|_e[Te+Qe]<<16,ln=wt+_n+Kt+fr+524296,_t=ln+2*(_n+Kt)>>3;Nt=_t+wt>>1,wt=(ln=ln+2*(wt+fr)>>3)+_n>>1,v(E[U+2*Qe-1],255&Nt,Nt>>16,qe,ke+(2*Qe-1)*C),v(E[U+2*Qe-0],255&wt,wt>>16,qe,ke+(2*Qe-0)*C),Z!=null&&(Nt=ln+Kt>>1,wt=_t+fr>>1,v(Z[K+2*Qe-1],255&Nt,Nt>>16,ze,We+(2*Qe-1)*C),v(Z[K+2*Qe+0],255&wt,wt>>16,ze,We+(2*Qe+0)*C)),wt=_n,Kt=fr}1&st||(Nt=3*wt+Kt+131074>>2,v(E[U+st-1],255&Nt,Nt>>16,qe,ke+(st-1)*C),Z!=null&&(Nt=3*Kt+wt+131074>>2,v(Z[K+st-1],255&Nt,Nt>>16,ze,We+(st-1)*C)))}}function zc(){Ns[Vu]=cl,Ns[Ds]=Ql,Ns[Fu]=nf,Ns[ki]=Uu,Ns[Xc]=ko,Ns[Xl]=_a,Ns[Ao]=jo,Ns[$c]=Ql,Ns[Bu]=Uu,Ns[$l]=ko,Ns[zu]=_a}function Pl(p){return p&-16384?0>p?0:255:p>>Hu}function pa(p,v){return Pl((19077*p>>8)+(26149*v>>8)-14234)}function Ki(p,v,C){return Pl((19077*p>>8)-(6419*v>>8)-(13320*C>>8)+8708)}function rl(p,v){return Pl((19077*p>>8)+(33050*v>>8)-17685)}function qa(p,v,C,E,U){E[U+0]=pa(p,C),E[U+1]=Ki(p,v,C),E[U+2]=rl(p,v)}function os(p,v,C,E,U){E[U+0]=rl(p,v),E[U+1]=Ki(p,v,C),E[U+2]=pa(p,C)}function _o(p,v,C,E,U){var Z=Ki(p,v,C);v=Z<<3&224|rl(p,v)>>3,E[U+0]=248&pa(p,C)|Z>>5,E[U+1]=v}function So(p,v,C,E,U){var Z=240&rl(p,v)|15;E[U+0]=240&pa(p,C)|Ki(p,v,C)>>4,E[U+1]=Z}function ql(p,v,C,E,U){E[U+0]=255,qa(p,v,C,E,U+1)}function ma(p,v,C,E,U){os(p,v,C,E,U),E[U+3]=255}function Gs(p,v,C,E,U){qa(p,v,C,E,U),E[U+3]=255}function Ua(p,v,C){z[p]=function(E,U,Z,K,ne,ae,ce,ve,je){for(var le=ve+(-2&je)*C;ve!=le;)v(E[U+0],Z[K+0],ne[ae+0],ce,ve),v(E[U+1],Z[K+0],ne[ae+0],ce,ve+C),U+=2,++K,++ae,ve+=2*C;1&je&&v(E[U+0],Z[K+0],ne[ae+0],ce,ve)}}function Ul(p,v,C){return C==0?p==0?v==0?6:5:v==0?4:0:C}function Pc(p,v,C,E,U){switch(p>>>30){case 3:$a(v,C,E,U,0);break;case 2:Ls(v,C,E,U);break;case 1:zn(v,C,E,U)}}function mi(p,v){var C,E,U=v.M,Z=v.Nb,K=p.oc,ne=p.pc+40,ae=p.oc,ce=p.pc+584,ve=p.oc,je=p.pc+600;for(C=0;16>C;++C)K[ne+32*C-1]=129;for(C=0;8>C;++C)ae[ce+32*C-1]=129,ve[je+32*C-1]=129;for(0<U?K[ne-1-32]=ae[ce-1-32]=ve[je-1-32]=129:(a(K,ne-32-1,127,21),a(ae,ce-32-1,127,9),a(ve,je-32-1,127,9)),E=0;E<p.za;++E){var le=v.ya[v.aa+E];if(0<E){for(C=-1;16>C;++C)s(K,ne+32*C-4,K,ne+32*C+12,4);for(C=-1;8>C;++C)s(ae,ce+32*C-4,ae,ce+32*C+4,4),s(ve,je+32*C-4,ve,je+32*C+4,4)}var _e=p.Gd,Te=p.Hd+E,qe=le.ad,ke=le.Hc;if(0<U&&(s(K,ne-32,_e[Te].y,0,16),s(ae,ce-32,_e[Te].f,0,8),s(ve,je-32,_e[Te].ea,0,8)),le.Za){var ze=K,We=ne-32+16;for(0<U&&(E>=p.za-1?a(ze,We,_e[Te].y[15],4):s(ze,We,_e[Te+1].y,0,4)),C=0;4>C;C++)ze[We+128+C]=ze[We+256+C]=ze[We+384+C]=ze[We+0+C];for(C=0;16>C;++C,ke<<=2)ze=K,We=ne+zr[C],Er[le.Ob[C]](ze,We),Pc(ke,qe,16*+C,ze,We)}else if(ze=Ul(E,U,le.Ob[0]),Ys[ze](K,ne),ke!=0)for(C=0;16>C;++C,ke<<=2)Pc(ke,qe,16*+C,K,ne+zr[C]);for(C=le.Gc,ze=Ul(E,U,le.Dd),na[ze](ae,ce),na[ze](ve,je),ke=qe,ze=ae,We=ce,255&(le=0|C)&&(170&le?Ci(ke,256,ze,We):Dn(ke,256,ze,We)),le=ve,ke=je,255&(C>>=8)&&(170&C?Ci(qe,320,le,ke):Dn(qe,320,le,ke)),U<p.Ub-1&&(s(_e[Te].y,0,K,ne+480,16),s(_e[Te].f,0,ae,ce+224,8),s(_e[Te].ea,0,ve,je+224,8)),C=8*Z*p.B,_e=p.sa,Te=p.ta+16*E+16*Z*p.R,qe=p.qa,le=p.ra+8*E+C,ke=p.Ha,ze=p.Ia+8*E+C,C=0;16>C;++C)s(_e,Te+C*p.R,K,ne+32*C,16);for(C=0;8>C;++C)s(qe,le+C*p.B,ae,ce+32*C,8),s(ke,ze+C*p.B,ve,je+32*C,8)}}function Ji(p,v,C,E,U,Z,K,ne,ae){var ce=[0],ve=[0],je=0,le=ae!=null?ae.kd:0,_e=ae??new et;if(p==null||12>C)return 7;_e.data=p,_e.w=v,_e.ha=C,v=[v],C=[C],_e.gb=[_e.gb];e:{var Te=v,qe=C,ke=_e.gb;if(e(p!=null),e(qe!=null),e(ke!=null),ke[0]=0,12<=qe[0]&&!t(p,Te[0],"RIFF")){if(t(p,Te[0]+8,"WEBP")){ke=3;break e}var ze=ct(p,Te[0]+4);if(12>ze||4294967286<ze){ke=3;break e}if(le&&ze>qe[0]-8){ke=7;break e}ke[0]=ze,Te[0]+=12,qe[0]-=12}ke=0}if(ke!=0)return ke;for(ze=0<_e.gb[0],C=C[0];;){e:{var We=p;qe=v,ke=C;var st=ce,Qe=ve,Tt=Te=[0];if((Nt=je=[je])[0]=0,8>ke[0])ke=7;else{if(!t(We,qe[0],"VP8X")){if(ct(We,qe[0]+4)!=10){ke=3;break e}if(18>ke[0]){ke=7;break e}var wt=ct(We,qe[0]+8),Kt=1+Je(We,qe[0]+12);if(2147483648<=Kt*(We=1+Je(We,qe[0]+15))){ke=3;break e}Tt!=null&&(Tt[0]=wt),st!=null&&(st[0]=Kt),Qe!=null&&(Qe[0]=We),qe[0]+=18,ke[0]-=18,Nt[0]=1}ke=0}}if(je=je[0],Te=Te[0],ke!=0)return ke;if(qe=!!(2&Te),!ze&&je)return 3;if(Z!=null&&(Z[0]=!!(16&Te)),K!=null&&(K[0]=qe),ne!=null&&(ne[0]=0),K=ce[0],Te=ve[0],je&&qe&&ae==null){ke=0;break}if(4>C){ke=7;break}if(ze&&je||!ze&&!je&&!t(p,v[0],"ALPH")){C=[C],_e.na=[_e.na],_e.P=[_e.P],_e.Sa=[_e.Sa];e:{wt=p,ke=v,ze=C;var Nt=_e.gb;st=_e.na,Qe=_e.P,Tt=_e.Sa,Kt=22,e(wt!=null),e(ze!=null),We=ke[0];var _n=ze[0];for(e(st!=null),e(Tt!=null),st[0]=null,Qe[0]=null,Tt[0]=0;;){if(ke[0]=We,ze[0]=_n,8>_n){ke=7;break e}var fr=ct(wt,We+4);if(4294967286<fr){ke=3;break e}var ln=8+fr+1&-2;if(Kt+=ln,0<Nt&&Kt>Nt){ke=3;break e}if(!t(wt,We,"VP8 ")||!t(wt,We,"VP8L")){ke=0;break e}if(_n[0]<ln){ke=7;break e}t(wt,We,"ALPH")||(st[0]=wt,Qe[0]=We+8,Tt[0]=fr),We+=ln,_n-=ln}}if(C=C[0],_e.na=_e.na[0],_e.P=_e.P[0],_e.Sa=_e.Sa[0],ke!=0)break}C=[C],_e.Ja=[_e.Ja],_e.xa=[_e.xa];e:if(Nt=p,ke=v,ze=C,st=_e.gb[0],Qe=_e.Ja,Tt=_e.xa,wt=ke[0],We=!t(Nt,wt,"VP8 "),Kt=!t(Nt,wt,"VP8L"),e(Nt!=null),e(ze!=null),e(Qe!=null),e(Tt!=null),8>ze[0])ke=7;else{if(We||Kt){if(Nt=ct(Nt,wt+4),12<=st&&Nt>st-12){ke=3;break e}if(le&&Nt>ze[0]-8){ke=7;break e}Qe[0]=Nt,ke[0]+=8,ze[0]-=8,Tt[0]=Kt}else Tt[0]=5<=ze[0]&&Nt[wt+0]==47&&!(Nt[wt+4]>>5),Qe[0]=ze[0];ke=0}if(C=C[0],_e.Ja=_e.Ja[0],_e.xa=_e.xa[0],v=v[0],ke!=0)break;if(4294967286<_e.Ja)return 3;if(ne==null||qe||(ne[0]=_e.xa?2:1),K=[K],Te=[Te],_e.xa){if(5>C){ke=7;break}ne=K,le=Te,qe=Z,p==null||5>C?p=0:5<=C&&p[v+0]==47&&!(p[v+4]>>5)?(ze=[0],Nt=[0],st=[0],de(Qe=new P,p,v,C),pn(Qe,ze,Nt,st)?(ne!=null&&(ne[0]=ze[0]),le!=null&&(le[0]=Nt[0]),qe!=null&&(qe[0]=st[0]),p=1):p=0):p=0}else{if(10>C){ke=7;break}ne=Te,p==null||10>C||!Il(p,v+3,C-3)?p=0:(le=p[v+0]|p[v+1]<<8|p[v+2]<<16,qe=16383&(p[v+7]<<8|p[v+6]),p=16383&(p[v+9]<<8|p[v+8]),1&le||3<(le>>1&7)||!(le>>4&1)||le>>5>=_e.Ja||!qe||!p?p=0:(K&&(K[0]=qe),ne&&(ne[0]=p),p=1))}if(!p||(K=K[0],Te=Te[0],je&&(ce[0]!=K||ve[0]!=Te)))return 3;ae!=null&&(ae[0]=_e,ae.offset=v-ae.w,e(4294967286>v-ae.w),e(ae.offset==ae.ha-C));break}return ke==0||ke==7&&je&&ae==null?(Z!=null&&(Z[0]|=_e.na!=null&&0<_e.na.length),E!=null&&(E[0]=K),U!=null&&(U[0]=Te),0):ke}function Ha(p,v,C){var E=v.width,U=v.height,Z=0,K=0,ne=E,ae=U;if(v.Da=p!=null&&0<p.Da,v.Da&&(ne=p.cd,ae=p.bd,Z=p.v,K=p.j,11>C||(Z&=-2,K&=-2),0>Z||0>K||0>=ne||0>=ae||Z+ne>E||K+ae>U))return 0;if(v.v=Z,v.j=K,v.va=Z+ne,v.o=K+ae,v.U=ne,v.T=ae,v.da=p!=null&&0<p.da,v.da){if(!Ke(ne,ae,C=[p.ib],Z=[p.hb]))return 0;v.ib=C[0],v.hb=Z[0]}return v.ob=p!=null&&p.ob,v.Kb=p==null||!p.Sd,v.da&&(v.ob=v.ib<3*E/4&&v.hb<3*U/4,v.Kb=0),1}function qc(p){if(p==null)return 2;if(11>p.S){var v=p.f.RGBA;v.fb+=(p.height-1)*v.A,v.A=-v.A}else v=p.f.kb,p=p.height,v.O+=(p-1)*v.fa,v.fa=-v.fa,v.N+=(p-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(p-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(p-1)*v.lb,v.lb=-v.lb);return 0}function ea(p,v,C,E){if(E==null||0>=p||0>=v)return 2;if(C!=null){if(C.Da){var U=C.cd,Z=C.bd,K=-2&C.v,ne=-2&C.j;if(0>K||0>ne||0>=U||0>=Z||K+U>p||ne+Z>v)return 2;p=U,v=Z}if(C.da){if(!Ke(p,v,U=[C.ib],Z=[C.hb]))return 2;p=U[0],v=Z[0]}}E.width=p,E.height=v;e:{var ae=E.width,ce=E.height;if(p=E.S,0>=ae||0>=ce||!(p>=Vu&&13>p))p=2;else{if(0>=E.Rd&&E.sd==null){K=Z=U=v=0;var ve=(ne=ae*Wu[p])*ce;if(11>p||(Z=(ce+1)/2*(v=(ae+1)/2),p==12&&(K=(U=ae)*ce)),(ce=o(ve+2*Z+K))==null){p=1;break e}E.sd=ce,11>p?((ae=E.f.RGBA).eb=ce,ae.fb=0,ae.A=ne,ae.size=ve):((ae=E.f.kb).y=ce,ae.O=0,ae.fa=ne,ae.Fd=ve,ae.f=ce,ae.N=0+ve,ae.Ab=v,ae.Cd=Z,ae.ea=ce,ae.W=0+ve+Z,ae.Db=v,ae.Ed=Z,p==12&&(ae.F=ce,ae.J=0+ve+2*Z),ae.Tc=K,ae.lb=U)}if(v=1,U=E.S,Z=E.width,K=E.height,U>=Vu&&13>U)if(11>U)p=E.f.RGBA,v&=(ne=Math.abs(p.A))*(K-1)+Z<=p.size,v&=ne>=Z*Wu[U],v&=p.eb!=null;else{p=E.f.kb,ne=(Z+1)/2,ve=(K+1)/2,ae=Math.abs(p.fa),ce=Math.abs(p.Ab);var je=Math.abs(p.Db),le=Math.abs(p.lb),_e=le*(K-1)+Z;v&=ae*(K-1)+Z<=p.Fd,v&=ce*(ve-1)+ne<=p.Cd,v=(v&=je*(ve-1)+ne<=p.Ed)&ae>=Z&ce>=ne&je>=ne,v&=p.y!=null,v&=p.f!=null,v&=p.ea!=null,U==12&&(v&=le>=Z,v&=_e<=p.Tc,v&=p.F!=null)}else v=0;p=v?0:2}}return p!=0||C!=null&&C.fd&&(p=qc(E)),p}var No=64,ri=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ws=24,ga=32,ba=8,Ga=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ue("Predictor0","PredictorAdd0"),z.Predictor0=function(){return 4278190080},z.Predictor1=function(p){return p},z.Predictor2=function(p,v,C){return v[C+0]},z.Predictor3=function(p,v,C){return v[C+1]},z.Predictor4=function(p,v,C){return v[C-1]},z.Predictor5=function(p,v,C){return it(it(p,v[C+1]),v[C+0])},z.Predictor6=function(p,v,C){return it(p,v[C-1])},z.Predictor7=function(p,v,C){return it(p,v[C+0])},z.Predictor8=function(p,v,C){return it(v[C-1],v[C+0])},z.Predictor9=function(p,v,C){return it(v[C+0],v[C+1])},z.Predictor10=function(p,v,C){return it(it(p,v[C-1]),it(v[C+0],v[C+1]))},z.Predictor11=function(p,v,C){var E=v[C+0];return 0>=nt(E>>24&255,p>>24&255,(v=v[C-1])>>24&255)+nt(E>>16&255,p>>16&255,v>>16&255)+nt(E>>8&255,p>>8&255,v>>8&255)+nt(255&E,255&p,255&v)?E:p},z.Predictor12=function(p,v,C){var E=v[C+0];return(Be((p>>24&255)+(E>>24&255)-((v=v[C-1])>>24&255))<<24|Be((p>>16&255)+(E>>16&255)-(v>>16&255))<<16|Be((p>>8&255)+(E>>8&255)-(v>>8&255))<<8|Be((255&p)+(255&E)-(255&v)))>>>0},z.Predictor13=function(p,v,C){var E=v[C-1];return(at((p=it(p,v[C+0]))>>24&255,E>>24&255)<<24|at(p>>16&255,E>>16&255)<<16|at(p>>8&255,E>>8&255)<<8|at(255&p,255&E))>>>0};var Hl=z.PredictorAdd0;z.PredictorAdd1=ut,Ue("Predictor2","PredictorAdd2"),Ue("Predictor3","PredictorAdd3"),Ue("Predictor4","PredictorAdd4"),Ue("Predictor5","PredictorAdd5"),Ue("Predictor6","PredictorAdd6"),Ue("Predictor7","PredictorAdd7"),Ue("Predictor8","PredictorAdd8"),Ue("Predictor9","PredictorAdd9"),Ue("Predictor10","PredictorAdd10"),Ue("Predictor11","PredictorAdd11"),Ue("Predictor12","PredictorAdd12"),Ue("Predictor13","PredictorAdd13");var Gl=z.PredictorAdd2;ht("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var Fr,Du=z.ColorIndexInverseTransform,va=z.MapARGB,ya=z.VP8LColorIndexInverseTransformAlpha,ws=z.MapAlpha,Wa=z.VP8LPredictorsAdd=[];Wa.length=16,(z.VP8LPredictors=[]).length=16,(z.VP8LPredictorsAdd_C=[]).length=16,(z.VP8LPredictors_C=[]).length=16;var Wl,Yl,Ya,Xa,xa,sl,gi,$a,Ls,Ci,zn,Dn,sr,Br,wa,ta,il,Uc,Qh,jd,Ed,Md,Kh,Jh,al,Ti,Hc,bi,ol=o(511),Ru=o(2041),Gc=o(225),Wc=o(767),Iu=0,Za=Ru,Yc=Gc,Os=Wc,_s=ol,Vu=0,Ds=1,Fu=2,ki=3,Xc=4,Xl=5,Ao=6,$c=7,Bu=8,$l=9,zu=10,ji=[2,3,7],Zl=[3,3,11],ll=[280,256,256,256,40],Pu=[0,1,1,1,0],Zc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ei=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Mi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Co=8,Li=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Oi=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vi=null,Ld=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ef=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],qu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Od=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ss=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Nn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ys=[],Er=[],na=[],To=1,tf=2,Qa=[],Ns=[];Pa("UpsampleRgbLinePair",qa,3),Pa("UpsampleBgrLinePair",os,3),Pa("UpsampleRgbaLinePair",Gs,4),Pa("UpsampleBgraLinePair",ma,4),Pa("UpsampleArgbLinePair",ql,4),Pa("UpsampleRgba4444LinePair",So,2),Pa("UpsampleRgb565LinePair",_o,2);var cl=z.UpsampleRgbLinePair,nf=z.UpsampleBgrLinePair,Ql=z.UpsampleRgbaLinePair,Uu=z.UpsampleBgraLinePair,ko=z.UpsampleArgbLinePair,_a=z.UpsampleRgba4444LinePair,jo=z.UpsampleRgb565LinePair,Di=16,Kl=1<<Di-1,ul=-227,Eo=482,Hu=6,Mo=0,As=o(256),Gu=o(256),Dd=o(256),e0=o(256),t0=o(Eo-ul),n0=o(Eo-ul);Ua("YuvToRgbRow",qa,3),Ua("YuvToBgrRow",os,3),Ua("YuvToRgbaRow",Gs,4),Ua("YuvToBgraRow",ma,4),Ua("YuvToArgbRow",ql,4),Ua("YuvToRgba4444Row",So,2),Ua("YuvToRgb565Row",_o,2);var zr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Jl=[0,2,8],Qc=[8,7,6,4,4,2,2,2,1,1,1,1],Kc=1;this.WebPDecodeRGBA=function(p,v,C,E,U){var Z=Ds,K=new Ge,ne=new St;K.ba=ne,ne.S=Z,ne.width=[ne.width],ne.height=[ne.height];var ae=ne.width,ce=ne.height,ve=new mt;if(ve==null||p==null)var je=2;else e(ve!=null),je=Ji(p,v,C,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(je!=0?ae=0:(ae!=null&&(ae[0]=ve.width[0]),ce!=null&&(ce[0]=ve.height[0]),ae=1),ae){ne.width=ne.width[0],ne.height=ne.height[0],E!=null&&(E[0]=ne.width),U!=null&&(U[0]=ne.height);e:{if(E=new ti,(U=new et).data=p,U.w=v,U.ha=C,U.kd=1,v=[0],e(U!=null),((p=Ji(U.data,U.w,U.ha,null,null,null,v,null,U))==0||p==7)&&v[0]&&(p=4),(v=p)==0){if(e(K!=null),E.data=U.data,E.w=U.w+U.offset,E.ha=U.ha-U.offset,E.put=Xe,E.ac=lt,E.bc=Mt,E.ma=K,U.xa){if((p=mn())==null){K=1;break e}if((function(le,_e){var Te=[0],qe=[0],ke=[0];t:for(;;){if(le==null)return 0;if(_e==null)return le.a=2,0;if(le.l=_e,le.a=0,de(le.m,_e.data,_e.w,_e.ha),!pn(le.m,Te,qe,ke)){le.a=3;break t}if(le.xb=tf,_e.width=Te[0],_e.height=qe[0],!tr(Te[0],qe[0],1,le,null))break t;return 1}return e(le.a!=0),0})(p,E)){if(E=(v=ea(E.width,E.height,K.Oa,K.ba))==0){t:{E=p;n:for(;;){if(E==null){E=0;break t}if(e(E.s.yc!=null),e(E.s.Ya!=null),e(0<E.s.Wb),e((C=E.l)!=null),e((U=C.ma)!=null),E.xb!=0){if(E.ca=U.ba,E.tb=U.tb,e(E.ca!=null),!Ha(U.Oa,C,ki)){E.a=2;break n}if(!Ne(E,C.width)||C.da)break n;if((C.da||vt(E.ca.S))&&Qi(),11>E.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),E.ca.f.kb.F!=null&&Qi()),E.Pb&&0<E.s.ua&&E.s.vb.X==null&&!$(E.s.vb,E.s.Wa.Xa)){E.a=1;break n}E.xb=0}if(!wn(E,E.V,E.Ba,E.c,E.i,C.o,Sn))break n;U.Dc=E.Ma,E=1;break t}e(E.a!=0),E=0}E=!E}E&&(v=p.a)}else v=p.a}else{if((p=new gs)==null){K=1;break e}if(p.Fa=U.na,p.P=U.P,p.qc=U.Sa,fi(p,E)){if((v=ea(E.width,E.height,K.Oa,K.ba))==0){if(p.Aa=0,C=K.Oa,e((U=p)!=null),C!=null){if(0<(ae=0>(ae=C.Md)?0:100<ae?255:255*ae/100)){for(ce=ve=0;4>ce;++ce)12>(je=U.pb[ce]).lc&&(je.ia=ae*Qc[0>je.lc?0:je.lc]>>3),ve|=je.ia;ve&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=C.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}(function(le,_e){if(le==null)return 0;if(_e==null)return Tn(le,2,"NULL VP8Io parameter in VP8Decode().");if(!le.cb&&!fi(le,_e))return 0;if(e(le.cb),_e.ac==null||_e.ac(_e)){_e.ob&&(le.L=0);var Te=Jl[le.L];if(le.L==2?(le.yb=0,le.zb=0):(le.yb=_e.v-Te>>4,le.zb=_e.j-Te>>4,0>le.yb&&(le.yb=0),0>le.zb&&(le.zb=0)),le.Va=_e.o+15+Te>>4,le.Hb=_e.va+15+Te>>4,le.Hb>le.za&&(le.Hb=le.za),le.Va>le.Ub&&(le.Va=le.Ub),0<le.L){var qe=le.ed;for(Te=0;4>Te;++Te){var ke;if(le.Qa.Cb){var ze=le.Qa.Lb[Te];le.Qa.Fb||(ze+=qe.Tb)}else ze=qe.Tb;for(ke=0;1>=ke;++ke){var We=le.gd[Te][ke],st=ze;if(qe.Pc&&(st+=qe.vd[0],ke&&(st+=qe.od[0])),0<(st=0>st?0:63<st?63:st)){var Qe=st;0<qe.wb&&(Qe=4<qe.wb?Qe>>2:Qe>>1)>9-qe.wb&&(Qe=9-qe.wb),1>Qe&&(Qe=1),We.dd=Qe,We.tc=2*st+Qe,We.ld=40<=st?2:15<=st?1:0}else We.tc=0;We.La=ke}}}Te=0}else Tn(le,6,"Frame setup failed"),Te=le.a;if(Te=Te==0){if(Te){le.$c=0,0<le.Aa||(le.Ic=Kc);t:{Te=le.Ic,qe=4*(Qe=le.za);var Tt=32*Qe,wt=Qe+1,Kt=0<le.L?Qe*(0<le.Aa?2:1):0,Nt=(le.Aa==2?2:1)*Qe;if((We=qe+832+(ke=3*(16*Te+Jl[le.L])/2*Tt)+(ze=le.Fa!=null&&0<le.Fa.length?le.Kc.c*le.Kc.i:0))!=We)Te=0;else{if(We>le.Vb){if(le.Vb=0,le.Ec=o(We),le.Fc=0,le.Ec==null){Te=Tn(le,1,"no memory during frame initialization.");break t}le.Vb=We}We=le.Ec,st=le.Fc,le.Ac=We,le.Bc=st,st+=qe,le.Gd=u(Tt,Us),le.Hd=0,le.rb=u(wt+1,Ir),le.sb=1,le.wa=Kt?u(Kt,Zn):null,le.Y=0,le.D.Nb=0,le.D.wa=le.wa,le.D.Y=le.Y,0<le.Aa&&(le.D.Y+=Qe),e(!0),le.oc=We,le.pc=st,st+=832,le.ya=u(Nt,ei),le.aa=0,le.D.ya=le.ya,le.D.aa=le.aa,le.Aa==2&&(le.D.aa+=Qe),le.R=16*Qe,le.B=8*Qe,Qe=(Tt=Jl[le.L])*le.R,Tt=Tt/2*le.B,le.sa=We,le.ta=st+Qe,le.qa=le.sa,le.ra=le.ta+16*Te*le.R+Tt,le.Ha=le.qa,le.Ia=le.ra+8*Te*le.B+Tt,le.$c=0,st+=ke,le.mb=ze?We:null,le.nb=ze?st:null,e(st+ze<=le.Fc+le.Vb),yo(le),a(le.Ac,le.Bc,0,qe),Te=1}}if(Te){if(_e.ka=0,_e.y=le.sa,_e.O=le.ta,_e.f=le.qa,_e.N=le.ra,_e.ea=le.Ha,_e.Vd=le.Ia,_e.fa=le.R,_e.Rc=le.B,_e.F=null,_e.J=0,!Iu){for(Te=-255;255>=Te;++Te)ol[255+Te]=0>Te?-Te:Te;for(Te=-1020;1020>=Te;++Te)Ru[1020+Te]=-128>Te?-128:127<Te?127:Te;for(Te=-112;112>=Te;++Te)Gc[112+Te]=-16>Te?-16:15<Te?15:Te;for(Te=-255;510>=Te;++Te)Wc[255+Te]=0>Te?0:255<Te?255:Te;Iu=1}gi=$i,$a=$o,Ci=vs,zn=Zo,Dn=Dc,Ls=Vl,sr=Lu,Br=Ba,wa=q,ta=ue,il=Ou,Uc=S,Qh=be,jd=Ae,Ed=Ra,Md=Ia,Kh=nl,Jh=Bc,Er[0]=Eu,Er[1]=Cu,Er[2]=ju,Er[3]=Vc,Er[4]=di,Er[5]=Fc,Er[6]=ys,Er[7]=Jo,Er[8]=el,Er[9]=pi,Ys[0]=Zi,Ys[1]=Rc,Ys[2]=Ic,Ys[3]=ku,Ys[4]=Oa,Ys[5]=Ko,Ys[6]=wo,na[0]=Fl,na[1]=Tu,na[2]=fa,na[3]=Mu,na[4]=as,na[5]=Bl,na[6]=da,Te=1}else Te=0}Te&&(Te=(function(_n,fr){for(_n.M=0;_n.M<_n.Va;++_n.M){var ln,_t=_n.Jc[_n.M&_n.Xb],ft=_n.m,wr=_n;for(ln=0;ln<wr.za;++ln){var Ht=ft,fn=wr,Gn=fn.Ac,es=fn.Bc+4*ln,Cs=fn.zc,ir=fn.ya[fn.aa+ln];if(fn.Qa.Bb?ir.$b=ye(Ht,fn.Pa.jb[0])?2+ye(Ht,fn.Pa.jb[2]):ye(Ht,fn.Pa.jb[1]):ir.$b=0,fn.kc&&(ir.Ad=ye(Ht,fn.Bd)),ir.Za=!ye(Ht,145)+0,ir.Za){var Hr=ir.Ob,Rs=0;for(fn=0;4>fn;++fn){var Gr,vn=Cs[0+fn];for(Gr=0;4>Gr;++Gr){vn=Ss[Gn[es+Gr]][vn];for(var Vn=qu[ye(Ht,vn[0])];0<Vn;)Vn=qu[2*Vn+ye(Ht,vn[Vn])];vn=-Vn,Gn[es+Gr]=vn}s(Hr,Rs,Gn,es,4),Rs+=4,Cs[0+fn]=vn}}else vn=ye(Ht,156)?ye(Ht,128)?1:3:ye(Ht,163)?2:0,ir.Ob[0]=vn,a(Gn,es,vn,4),a(Cs,0,vn,4);ir.Dd=ye(Ht,142)?ye(Ht,114)?ye(Ht,183)?1:3:2:0}if(wr.m.Ka)return Tn(_n,7,"Premature end-of-partition0 encountered.");for(;_n.ja<_n.za;++_n.ja){if(wr=_t,Ht=(ft=_n).rb[ft.sb-1],Gn=ft.rb[ft.sb+ft.ja],ln=ft.ya[ft.aa+ft.ja],es=ft.kc?ln.Ad:0)Ht.la=Gn.la=0,ln.Za||(Ht.Na=Gn.Na=0),ln.Hc=0,ln.Gc=0,ln.ia=0;else{var _r,Pn;if(Ht=Gn,Gn=wr,es=ft.Pa.Xc,Cs=ft.ya[ft.aa+ft.ja],ir=ft.pb[Cs.$b],fn=Cs.ad,Hr=0,Rs=ft.rb[ft.sb-1],vn=Gr=0,a(fn,Hr,0,384),Cs.Za)var ts=0,Sr=es[3];else{Vn=o(16);var Fn=Ht.Na+Rs.Na;if(Fn=vi(Gn,es[1],Fn,ir.Eb,0,Vn,0),Ht.Na=Rs.Na=(0<Fn)+0,1<Fn)gi(Vn,0,fn,Hr);else{var Pr=Vn[0]+3>>3;for(Vn=0;256>Vn;Vn+=16)fn[Hr+Vn]=Pr}ts=1,Sr=es[0]}var Wn=15&Ht.la,Wr=15&Rs.la;for(Vn=0;4>Vn;++Vn){var Yr=1&Wr;for(Pr=Pn=0;4>Pr;++Pr)Wn=Wn>>1|(Yr=(Fn=vi(Gn,Sr,Fn=Yr+(1&Wn),ir.Sc,ts,fn,Hr))>ts)<<7,Pn=Pn<<2|(3<Fn?3:1<Fn?2:fn[Hr+0]!=0),Hr+=16;Wn>>=4,Wr=Wr>>1|Yr<<7,Gr=(Gr<<8|Pn)>>>0}for(Sr=Wn,ts=Wr>>4,_r=0;4>_r;_r+=2){for(Pn=0,Wn=Ht.la>>4+_r,Wr=Rs.la>>4+_r,Vn=0;2>Vn;++Vn){for(Yr=1&Wr,Pr=0;2>Pr;++Pr)Fn=Yr+(1&Wn),Wn=Wn>>1|(Yr=0<(Fn=vi(Gn,es[2],Fn,ir.Qc,0,fn,Hr)))<<3,Pn=Pn<<2|(3<Fn?3:1<Fn?2:fn[Hr+0]!=0),Hr+=16;Wn>>=2,Wr=Wr>>1|Yr<<5}vn|=Pn<<4*_r,Sr|=Wn<<4<<_r,ts|=(240&Wr)<<_r}Ht.la=Sr,Rs.la=ts,Cs.Hc=Gr,Cs.Gc=vn,Cs.ia=43690&vn?0:ir.ia,es=!(Gr|vn)}if(0<ft.L&&(ft.wa[ft.Y+ft.ja]=ft.gd[ln.$b][ln.Za],ft.wa[ft.Y+ft.ja].La|=!es),wr.Ka)return Tn(_n,7,"Premature end-of-file encountered.")}if(yo(_n),ft=fr,wr=1,ln=(_t=_n).D,Ht=0<_t.L&&_t.M>=_t.zb&&_t.M<=_t.Va,_t.Aa==0)t:{if(ln.M=_t.M,ln.uc=Ht,mi(_t,ln),wr=1,ln=(Pn=_t.D).Nb,Ht=(vn=Jl[_t.L])*_t.R,Gn=vn/2*_t.B,Vn=16*ln*_t.R,Pr=8*ln*_t.B,es=_t.sa,Cs=_t.ta-Ht+Vn,ir=_t.qa,fn=_t.ra-Gn+Pr,Hr=_t.Ha,Rs=_t.Ia-Gn+Pr,Wr=(Wn=Pn.M)==0,Gr=Wn>=_t.Va-1,_t.Aa==2&&mi(_t,Pn),Pn.uc)for(Yr=(Fn=_t).D.M,e(Fn.D.uc),Pn=Fn.yb;Pn<Fn.Hb;++Pn){ts=Pn,Sr=Yr;var Qn=(Rn=(Xr=Fn).D).Nb;_r=Xr.R;var Rn=Rn.wa[Rn.Y+ts],Is=Xr.sa,Mr=Xr.ta+16*Qn*_r+16*ts,Bt=Rn.dd,zt=Rn.tc;if(zt!=0)if(e(3<=zt),Xr.L==1)0<ts&&Md(Is,Mr,_r,zt+4),Rn.La&&Jh(Is,Mr,_r,zt),0<Sr&&Ed(Is,Mr,_r,zt+4),Rn.La&&Kh(Is,Mr,_r,zt);else{var Bn=Xr.B,si=Xr.qa,Ri=Xr.ra+8*Qn*Bn+8*ts,Xs=Xr.Ha,Xr=Xr.Ia+8*Qn*Bn+8*ts;Qn=Rn.ld,0<ts&&(Br(Is,Mr,_r,zt+4,Bt,Qn),ta(si,Ri,Xs,Xr,Bn,zt+4,Bt,Qn)),Rn.La&&(Uc(Is,Mr,_r,zt,Bt,Qn),jd(si,Ri,Xs,Xr,Bn,zt,Bt,Qn)),0<Sr&&(sr(Is,Mr,_r,zt+4,Bt,Qn),wa(si,Ri,Xs,Xr,Bn,zt+4,Bt,Qn)),Rn.La&&(il(Is,Mr,_r,zt,Bt,Qn),Qh(si,Ri,Xs,Xr,Bn,zt,Bt,Qn))}}if(_t.ia&&alert("todo:DitherRow"),ft.put!=null){if(Pn=16*Wn,Wn=16*(Wn+1),Wr?(ft.y=_t.sa,ft.O=_t.ta+Vn,ft.f=_t.qa,ft.N=_t.ra+Pr,ft.ea=_t.Ha,ft.W=_t.Ia+Pr):(Pn-=vn,ft.y=es,ft.O=Cs,ft.f=ir,ft.N=fn,ft.ea=Hr,ft.W=Rs),Gr||(Wn-=vn),Wn>ft.o&&(Wn=ft.o),ft.F=null,ft.J=null,_t.Fa!=null&&0<_t.Fa.length&&Pn<Wn&&(ft.J=rr(_t,ft,Pn,Wn-Pn),ft.F=_t.mb,ft.F==null&&ft.F.length==0)){wr=Tn(_t,3,"Could not decode alpha data.");break t}Pn<ft.j&&(vn=ft.j-Pn,Pn=ft.j,e(!(1&vn)),ft.O+=_t.R*vn,ft.N+=_t.B*(vn>>1),ft.W+=_t.B*(vn>>1),ft.F!=null&&(ft.J+=ft.width*vn)),Pn<Wn&&(ft.O+=ft.v,ft.N+=ft.v>>1,ft.W+=ft.v>>1,ft.F!=null&&(ft.J+=ft.v),ft.ka=Pn-ft.j,ft.U=ft.va-ft.v,ft.T=Wn-Pn,wr=ft.put(ft))}ln+1!=_t.Ic||Gr||(s(_t.sa,_t.ta-Ht,es,Cs+16*_t.R,Ht),s(_t.qa,_t.ra-Gn,ir,fn+8*_t.B,Gn),s(_t.Ha,_t.Ia-Gn,Hr,Rs+8*_t.B,Gn))}if(!wr)return Tn(_n,6,"Output aborted.")}return 1})(le,_e)),_e.bc!=null&&_e.bc(_e),Te&=1}return Te?(le.cb=0,Te):0})(p,E)||(v=p.a)}}else v=p.a}v==0&&K.Oa!=null&&K.Oa.fd&&(v=qc(K.ba))}K=v}Z=K!=0?null:11>Z?ne.f.RGBA.eb:ne.f.kb.y}else Z=null;return Z};var Wu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(z,Q){for(var M="",V=0;V<4;V++)M+=String.fromCharCode(z[Q++]);return M}function m(z,Q){return z[Q+0]|z[Q+1]<<8}function y(z,Q){return(z[Q+0]|z[Q+1]<<8|z[Q+2]<<16)>>>0}function _(z,Q){return(z[Q+0]|z[Q+1]<<8|z[Q+2]<<16|z[Q+3]<<24)>>>0}new f;var b=[0],N=[0],A=[],k=new f,T=r,R=(function(z,Q){var M={},V=0,H=!1,X=0,he=0;if(M.frames=[],!(function(j,P){for(var ee=0;ee<4;ee++)if(j[P+ee]!="RIFF".charCodeAt(ee))return!0;return!1})(z,Q)){for(_(z,Q+=4),Q+=8;Q<z.length;){var I=d(z,Q),se=_(z,Q+=4);Q+=4;var ie=se+(1&se);switch(I){case"VP8 ":case"VP8L":M.frames[V]===void 0&&(M.frames[V]={}),(G=M.frames[V]).src_off=H?he:Q-8,G.src_size=X+se+8,V++,H&&(H=!1,X=0,he=0);break;case"VP8X":(G=M.header={}).feature_flags=z[Q];var de=Q+4;G.canvas_width=1+y(z,de),de+=3,G.canvas_height=1+y(z,de),de+=3;break;case"ALPH":H=!0,X=ie+8,he=Q-8;break;case"ANIM":(G=M.header).bgcolor=_(z,Q),de=Q+4,G.loop_count=m(z,de),de+=2;break;case"ANMF":var pe,G;(G=M.frames[V]={}).offset_x=2*y(z,Q),Q+=3,G.offset_y=2*y(z,Q),Q+=3,G.width=1+y(z,Q),Q+=3,G.height=1+y(z,Q),Q+=3,G.duration=y(z,Q),Q+=3,pe=z[Q++],G.dispose=1&pe,G.blend=pe>>1&1}I!="ANMF"&&(Q+=ie)}return M}})(T,0);R.response=T,R.rgbaoutput=!0,R.dataurl=!1;var D=R.header?R.header:null,F=R.frames?R.frames:null;if(D){D.loop_counter=D.loop_count,b=[D.canvas_height],N=[D.canvas_width];for(var B=0;B<F.length&&F[B].blend!=0;B++);}var W=F[0],Y=k.WebPDecodeRGBA(T,W.src_off,W.src_size,N,b);W.rgba=Y,W.imgwidth=N[0],W.imgheight=b[0];for(var O=0;O<N[0]*b[0]*4;O++)A[O]=Y[O];return this.width=N,this.height=b,this.data=A,this}(function(r){var e,t,s,a,o,u,c,f,d,m=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new f,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new u,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new u,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,f=this.internal.Matrix,d=new m}]);var y=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var P=j;Object.defineProperty(this,"pdf",{get:function(){return P}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function($){ee=!!$}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function($){J=!!$}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function($){isNaN($)||(oe=$)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function($){isNaN($)||(fe=$)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function($){var Re;typeof $=="number"?Re=[$,$,$,$]:((Re=new Array(4))[0]=$[0],Re[1]=$.length>=2?$[1]:Re[0],Re[2]=$.length>=3?$[2]:Re[0],Re[3]=$.length>=4?$[3]:Re[1]),d.margin=Re}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function($){me=$}});var Se=0;Object.defineProperty(this,"lastBreak",{get:function(){return Se},set:function($){Se=$}});var ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ye},set:function($){ye=$}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function($){$ instanceof m&&(d=$)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function($){d.path=$}});var Fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Fe},set:function($){Fe=$}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function($){var Re;Re=_($),this.ctx.fillStyle=Re.style,this.ctx.isFillTransparent=Re.a===0,this.ctx.fillOpacity=Re.a,this.pdf.setFillColor(Re.r,Re.g,Re.b,{a:Re.a}),this.pdf.setTextColor(Re.r,Re.g,Re.b,{a:Re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function($){var Re=_($);this.ctx.strokeStyle=Re.style,this.ctx.isStrokeTransparent=Re.a===0,this.ctx.strokeOpacity=Re.a,Re.a===0?this.pdf.setDrawColor(255,255,255):(Re.a,this.pdf.setDrawColor(Re.r,Re.g,Re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function($){["butt","round","square"].indexOf($)!==-1&&(this.ctx.lineCap=$,this.pdf.setLineCap($))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function($){isNaN($)||(this.ctx.lineWidth=$,this.pdf.setLineWidth($))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function($){["bevel","round","miter"].indexOf($)!==-1&&(this.ctx.lineJoin=$,this.pdf.setLineJoin($))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function($){isNaN($)||(this.ctx.miterLimit=$,this.pdf.setMiterLimit($))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function($){this.ctx.textBaseline=$}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function($){["right","end","center","left","start"].indexOf($)!==-1&&(this.ctx.textAlign=$)}});var Ye=null,Je=null,ct=null;Object.defineProperty(this,"fontFaces",{get:function(){return ct},set:function($){Ye=null,Je=null,ct=$}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function($){var Re;if(this.ctx.font=$,(Re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec($))!==null){var pt=Re[1];Re[2];var Ke=Re[3],Le=Re[4];Re[5];var tt=Re[6],Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(Ue==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:Ue==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var ot=(function(ht){var rn,Vt,bt=[],jt=ht.trim();if(jt==="")return Hm;if(jt in rx)return[rx[jt]];for(;jt!=="";){switch(Vt=null,rn=(jt=ix(jt)).charAt(0)){case'"':case"'":Vt=DM(jt.substring(1),rn);break;default:Vt=RM(jt)}if(Vt===null||(bt.push(Vt[0]),(jt=ix(Vt[1]))!==""&&jt.charAt(0)!==","))return Hm;jt=jt.replace(/^,/,"")}return bt})(tt);if(this.fontFaces){var it=(function(ht,rn){var Vt=ht.getFontList(),bt=JSON.stringify(Vt);if(Ye===null||Je!==bt){var jt=(function(qt){var yt=[];return Object.keys(qt).forEach(function(Ft){qt[Ft].forEach(function(vt){var Dt=null;switch(vt){case"bold":Dt={family:Ft,weight:"bold"};break;case"italic":Dt={family:Ft,style:"italic"};break;case"bolditalic":Dt={family:Ft,weight:"bold",style:"italic"};break;case"":case"normal":Dt={family:Ft}}Dt!==null&&(Dt.ref={name:Ft,style:vt},yt.push(Dt))})}),yt})(Vt);Ye=(function(qt){for(var yt={},Ft=0;Ft<qt.length;++Ft){var vt=Um(qt[Ft]),Dt=vt.family,dn=vt.stretch,St=vt.style,mt=vt.weight;yt[Dt]=yt[Dt]||{},yt[Dt][dn]=yt[Dt][dn]||{},yt[Dt][dn][St]=yt[Dt][dn][St]||{},yt[Dt][dn][St][mt]=vt}return yt})(jt.concat(rn)),Je=bt}return Ye})(this.pdf,this.fontFaces),Be=ot.map(function(ht){return{family:ht,stretch:"normal",weight:Ke,style:pt}}),at=(function(ht,rn,Vt){for(var bt=(Vt=Vt||{}).defaultFontFamily||"times",jt=Object.assign({},OM,Vt.genericFontFamilies||{}),qt=null,yt=null,Ft=0;Ft<rn.length;++Ft)if(jt[(qt=Um(rn[Ft])).family]&&(qt.family=jt[qt.family]),ht.hasOwnProperty(qt.family)){yt=ht[qt.family];break}if(!(yt=yt||ht[bt]))throw new Error("Could not find a font-family for the rule '"+sx(qt)+"' and default family '"+bt+"'.");if(yt=(function(vt,Dt){if(Dt[vt])return Dt[vt];var dn=Ag[vt],St=dn<=Ag.normal?-1:1,mt=nx(Dt,d4,dn,St);if(!mt)throw new Error("Could not find a matching font-stretch value for "+vt);return mt})(qt.stretch,yt),yt=(function(vt,Dt){if(Dt[vt])return Dt[vt];for(var dn=f4[vt],St=0;St<dn.length;++St)if(Dt[dn[St]])return Dt[dn[St]];throw new Error("Could not find a matching font-style for "+vt)})(qt.style,yt),!(yt=(function(vt,Dt){if(Dt[vt])return Dt[vt];if(vt===400&&Dt[500])return Dt[500];if(vt===500&&Dt[400])return Dt[400];var dn=LM[vt],St=nx(Dt,p4,dn,vt<400?-1:1);if(!St)throw new Error("Could not find a matching font-weight for value "+vt);return St})(qt.weight,yt)))throw new Error("Failed to resolve a font for the rule '"+sx(qt)+"'.");return yt})(it,Be);this.pdf.setFont(at.ref.name,at.ref.style)}else{var nt="";(Ke==="bold"||parseInt(Ke,10)>=700||pt==="bold")&&(nt="bold"),pt==="italic"&&(nt+="italic"),nt.length===0&&(nt="normal");for(var ut="",gt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<ot.length;dt++){if(this.pdf.internal.getFont(ot[dt],nt,{noFallback:!0,disableWarning:!0})!==void 0){ut=ot[dt];break}if(nt==="bolditalic"&&this.pdf.internal.getFont(ot[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ut=ot[dt],nt="bold";else if(this.pdf.internal.getFont(ot[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ut=ot[dt],nt="normal";break}}if(ut===""){for(var xt=0;xt<ot.length;xt++)if(gt[ot[xt]]){ut=gt[ot[xt]];break}}ut=ut===""?"Times":ut,this.pdf.setFont(ut,nt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function($){this.ctx.globalCompositeOperation=$}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function($){this.ctx.globalAlpha=$}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function($){this.ctx.lineDashOffset=$,G.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function($){this.ctx.lineDash=$,G.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function($){this.ctx.ignoreClearRect=!!$}})};y.prototype.setLineDash=function(j){this.lineDash=j},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){F.call(this,"fill",!1)},y.prototype.stroke=function(){F.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(j,P){if(isNaN(j)||isNaN(P))throw pr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new u(j,P));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new u(j,P)},y.prototype.closePath=function(){var j=new u(0,0),P=0;for(P=this.path.length-1;P!==-1;P--)if(this.path[P].type==="begin"&&er(this.path[P+1])==="object"&&typeof this.path[P+1].x=="number"){j=new u(this.path[P+1].x,this.path[P+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(j.x,j.y)},y.prototype.lineTo=function(j,P){if(isNaN(j)||isNaN(P))throw pr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new u(j,P));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new u(ee.x,ee.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},y.prototype.quadraticCurveTo=function(j,P,ee,J){if(isNaN(ee)||isNaN(J)||isNaN(j)||isNaN(P))throw pr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new u(ee,J)),fe=this.ctx.transform.applyToPoint(new u(j,P));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new u(oe.x,oe.y)},y.prototype.bezierCurveTo=function(j,P,ee,J,oe,fe){if(isNaN(oe)||isNaN(fe)||isNaN(j)||isNaN(P)||isNaN(ee)||isNaN(J))throw pr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new u(oe,fe)),Se=this.ctx.transform.applyToPoint(new u(j,P)),ye=this.ctx.transform.applyToPoint(new u(ee,J));this.path.push({type:"bct",x1:Se.x,y1:Se.y,x2:ye.x,y2:ye.y,x:me.x,y:me.y}),this.ctx.lastPoint=new u(me.x,me.y)},y.prototype.arc=function(j,P,ee,J,oe,fe){if(isNaN(j)||isNaN(P)||isNaN(ee)||isNaN(J)||isNaN(oe))throw pr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new u(j,P));j=me.x,P=me.y;var Se=this.ctx.transform.applyToPoint(new u(0,ee)),ye=this.ctx.transform.applyToPoint(new u(0,0));ee=Math.sqrt(Math.pow(Se.x-ye.x,2)+Math.pow(Se.y-ye.y,2))}Math.abs(oe-J)>=2*Math.PI&&(J=0,oe=2*Math.PI),this.path.push({type:"arc",x:j,y:P,radius:ee,startAngle:J,endAngle:oe,counterclockwise:fe})},y.prototype.arcTo=function(j,P,ee,J,oe){throw new Error("arcTo not implemented.")},y.prototype.rect=function(j,P,ee,J){if(isNaN(j)||isNaN(P)||isNaN(ee)||isNaN(J))throw pr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,P),this.lineTo(j+ee,P),this.lineTo(j+ee,P+J),this.lineTo(j,P+J),this.lineTo(j,P),this.lineTo(j+ee,P),this.lineTo(j,P)},y.prototype.fillRect=function(j,P,ee,J){if(isNaN(j)||isNaN(P)||isNaN(ee)||isNaN(J))throw pr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,P,ee,J),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},y.prototype.strokeRect=function(j,P,ee,J){if(isNaN(j)||isNaN(P)||isNaN(ee)||isNaN(J))throw pr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(j,P,ee,J),this.stroke())},y.prototype.clearRect=function(j,P,ee,J){if(isNaN(j)||isNaN(P)||isNaN(ee)||isNaN(J))throw pr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,P,ee,J))},y.prototype.save=function(j){j=typeof j!="boolean"||j;for(var P=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(P),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},y.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var P=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(P),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(j){var P,ee,J,oe;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))P=0,ee=0,J=0,oe=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(fe!==null)P=parseInt(fe[1]),ee=parseInt(fe[2]),J=parseInt(fe[3]),oe=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)P=parseInt(fe[1]),ee=parseInt(fe[2]),J=parseInt(fe[3]),oe=parseFloat(fe[4]);else{if(oe=1,typeof j=="string"&&j.charAt(0)!=="#"){var me=new i4(j);j=me.ok?me.toHex():"#000000"}j.length===4?(P=j.substring(1,2),P+=P,ee=j.substring(2,3),ee+=ee,J=j.substring(3,4),J+=J):(P=j.substring(1,3),ee=j.substring(3,5),J=j.substring(5,7)),P=parseInt(P,16),ee=parseInt(ee,16),J=parseInt(J,16)}}return{r:P,g:ee,b:J,a:oe,style:j}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(j,P,ee,J){if(isNaN(P)||isNaN(ee)||typeof j!="string")throw pr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!b.call(this)){var oe=ie(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;V.call(this,{text:j,x:P,y:ee,scale:fe,angle:oe,align:this.textAlign,maxWidth:J})}},y.prototype.strokeText=function(j,P,ee,J){if(isNaN(P)||isNaN(ee)||typeof j!="string")throw pr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){J=isNaN(J)?void 0:J;var oe=ie(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;V.call(this,{text:j,x:P,y:ee,scale:fe,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:J})}},y.prototype.measureText=function(j){if(typeof j!="string")throw pr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var P=this.pdf,ee=this.pdf.internal.scaleFactor,J=P.internal.getFontSize(),oe=P.getStringUnitWidth(j)*J/P.internal.scaleFactor;return new function(fe){var me=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this}({width:oe*=Math.round(96*ee/72*1e4)/1e4})},y.prototype.scale=function(j,P){if(isNaN(j)||isNaN(P))throw pr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new f(j,0,0,P,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},y.prototype.rotate=function(j){if(isNaN(j))throw pr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var P=new f(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(P)},y.prototype.translate=function(j,P){if(isNaN(j)||isNaN(P))throw pr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new f(1,0,0,1,j,P);this.ctx.transform=this.ctx.transform.multiply(ee)},y.prototype.transform=function(j,P,ee,J,oe,fe){if(isNaN(j)||isNaN(P)||isNaN(ee)||isNaN(J)||isNaN(oe)||isNaN(fe))throw pr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new f(j,P,ee,J,oe,fe);this.ctx.transform=this.ctx.transform.multiply(me)},y.prototype.setTransform=function(j,P,ee,J,oe,fe){j=isNaN(j)?1:j,P=isNaN(P)?0:P,ee=isNaN(ee)?0:ee,J=isNaN(J)?1:J,oe=isNaN(oe)?0:oe,fe=isNaN(fe)?0:fe,this.ctx.transform=new f(j,P,ee,J,oe,fe)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(j,P,ee,J,oe,fe,me,Se,ye){var Fe=this.pdf.getImageProperties(j),Ye=1,Je=1,ct=1,$=1;J!==void 0&&Se!==void 0&&(ct=Se/J,$=ye/oe,Ye=Fe.width/J*Se/J,Je=Fe.height/oe*ye/oe),fe===void 0&&(fe=P,me=ee,P=0,ee=0),J!==void 0&&Se===void 0&&(Se=J,ye=oe),J===void 0&&Se===void 0&&(Se=Fe.width,ye=Fe.height);var Re=this.ctx.transform.decompose(),pt=ie(Re.rotate.shx),Ke=new f,Le=(Ke=(Ke=(Ke=Ke.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale)).applyToRectangle(new c(fe-P*ct,me-ee*$,J*Ye,oe*Je));if(this.autoPaging){for(var tt,Ue=k.call(this,Le),ot=[],it=0;it<Ue.length;it+=1)ot.indexOf(Ue[it])===-1&&ot.push(Ue[it]);D(ot);for(var Be=ot[0],at=ot[ot.length-1],nt=Be;nt<at+1;nt++){this.pdf.setPage(nt);var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],gt=nt===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=nt===1?0:dt+(nt-2)*xt;if(this.ctx.clip_path.length!==0){var rn=this.path;tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(tt,this.posX+this.margin[3],-ht+gt+this.ctx.prevPageLastElemOffset),B.call(this,"fill",!0),this.path=rn}var Vt=JSON.parse(JSON.stringify(Le));Vt=R([Vt],this.posX+this.margin[3],-ht+gt+this.ctx.prevPageLastElemOffset)[0];var bt=(nt>Be||nt<at)&&A.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,xt,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Vt.x,Vt.y,Vt.w,Vt.h,null,null,pt),bt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(j,"JPEG",Le.x,Le.y,Le.w,Le.h,null,null,pt)};var k=function(j,P,ee){var J=[];P=P||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":J.push(Math.floor((j.y+oe)/ee)+1);break;case"arc":J.push(Math.floor((j.y+oe-j.radius)/ee)+1),J.push(Math.floor((j.y+oe+j.radius)/ee)+1);break;case"qct":var fe=de(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);J.push(Math.floor((fe.y+oe)/ee)+1),J.push(Math.floor((fe.y+fe.h+oe)/ee)+1);break;case"bct":var me=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);J.push(Math.floor((me.y+oe)/ee)+1),J.push(Math.floor((me.y+me.h+oe)/ee)+1);break;case"rect":J.push(Math.floor((j.y+oe)/ee)+1),J.push(Math.floor((j.y+j.h+oe)/ee)+1)}for(var Se=0;Se<J.length;Se+=1)for(;this.pdf.internal.getNumberOfPages()<J[Se];)T.call(this);return J},T=function(){var j=this.fillStyle,P=this.strokeStyle,ee=this.font,J=this.lineCap,oe=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=P,this.font=ee,this.lineCap=J,this.lineWidth=oe,this.lineJoin=fe},R=function(j,P,ee){for(var J=0;J<j.length;J++)switch(j[J].type){case"bct":j[J].x2+=P,j[J].y2+=ee;case"qct":j[J].x1+=P,j[J].y1+=ee;default:j[J].x+=P,j[J].y+=ee}return j},D=function(j){return j.sort(function(P,ee){return P-ee})},F=function(j,P){var ee=this.fillStyle,J=this.strokeStyle,oe=this.lineCap,fe=this.lineWidth,me=Math.abs(fe*this.ctx.transform.scaleX),Se=this.lineJoin;if(this.autoPaging){for(var ye,Fe,Ye=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),ct=[],$=0;$<Je.length;$++)if(Je[$].x!==void 0)for(var Re=k.call(this,Je[$]),pt=0;pt<Re.length;pt+=1)ct.indexOf(Re[pt])===-1&&ct.push(Re[pt]);for(var Ke=0;Ke<ct.length;Ke++)for(;this.pdf.internal.getNumberOfPages()<ct[Ke];)T.call(this);D(ct);for(var Le=ct[0],tt=ct[ct.length-1],Ue=Le;Ue<tt+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=ee,this.strokeStyle=J,this.lineCap=oe,this.lineWidth=me,this.lineJoin=Se;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=Ue===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=Ue===1?0:Be+(Ue-2)*at;if(this.ctx.clip_path.length!==0){var ut=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(ye,this.posX+this.margin[3],-nt+it+this.ctx.prevPageLastElemOffset),B.call(this,j,!0),this.path=ut}if(Fe=JSON.parse(JSON.stringify(Ye)),this.path=R(Fe,this.posX+this.margin[3],-nt+it+this.ctx.prevPageLastElemOffset),P===!1||Ue===0){var gt=(Ue>Le||Ue<tt)&&A.call(this);gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,at,null).clip().discardPath()),B.call(this,j,P),gt&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}this.path=Ye}else this.lineWidth=me,B.call(this,j,P),this.lineWidth=fe},B=function(j,P){if((j!=="stroke"||P||!N.call(this))&&(j==="stroke"||P||!b.call(this))){for(var ee,J,oe=[],fe=this.path,me=0;me<fe.length;me++){var Se=fe[me];switch(Se.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:Se,deltas:[],abs:[]});break;case"lt":var ye=oe.length;if(fe[me-1]&&!isNaN(fe[me-1].x)&&(ee=[Se.x-fe[me-1].x,Se.y-fe[me-1].y],ye>0)){for(;ye>=0;ye--)if(oe[ye-1].close!==!0&&oe[ye-1].begin!==!0){oe[ye-1].deltas.push(ee),oe[ye-1].abs.push(Se);break}}break;case"bct":ee=[Se.x1-fe[me-1].x,Se.y1-fe[me-1].y,Se.x2-fe[me-1].x,Se.y2-fe[me-1].y,Se.x-fe[me-1].x,Se.y-fe[me-1].y],oe[oe.length-1].deltas.push(ee);break;case"qct":var Fe=fe[me-1].x+2/3*(Se.x1-fe[me-1].x),Ye=fe[me-1].y+2/3*(Se.y1-fe[me-1].y),Je=Se.x+2/3*(Se.x1-Se.x),ct=Se.y+2/3*(Se.y1-Se.y),$=Se.x,Re=Se.y;ee=[Fe-fe[me-1].x,Ye-fe[me-1].y,Je-fe[me-1].x,ct-fe[me-1].y,$-fe[me-1].x,Re-fe[me-1].y],oe[oe.length-1].deltas.push(ee);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(Se)}}J=P?null:j==="stroke"?"stroke":"fill";for(var pt=!1,Ke=0;Ke<oe.length;Ke++)if(oe[Ke].arc)for(var Le=oe[Ke].abs,tt=0;tt<Le.length;tt++){var Ue=Le[tt];Ue.type==="arc"?O.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,P,!pt):H.call(this,Ue.x,Ue.y),pt=!0}else if(oe[Ke].close===!0)this.pdf.internal.out("h"),pt=!1;else if(oe[Ke].begin!==!0){var ot=oe[Ke].start.x,it=oe[Ke].start.y;X.call(this,oe[Ke].deltas,ot,it),pt=!0}J&&z.call(this,J),P&&Q.call(this)}},W=function(j){var P=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=P*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-ee;case"top":return j+P-ee;case"hanging":return j+P-2*ee;case"middle":return j+P/2-ee;default:return j}},Y=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(P,ee){this.colorStops.push([P,ee])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(j,P,ee,J,oe,fe,me,Se,ye){for(var Fe=I.call(this,ee,J,oe,fe),Ye=0;Ye<Fe.length;Ye++){var Je=Fe[Ye];Ye===0&&(ye?M.call(this,Je.x1+j,Je.y1+P):H.call(this,Je.x1+j,Je.y1+P)),he.call(this,j,P,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}Se?Q.call(this):z.call(this,me)},z=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Q=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(j,P){this.pdf.internal.out(t(j)+" "+s(P)+" m")},V=function(j){var P;switch(j.align){case"right":case"end":P="right";break;case"center":P="center";break;default:P="left"}var ee,J,oe,fe=this.pdf.getTextDimensions(j.text),me=W.call(this,j.y),Se=Y.call(this,me)-fe.h,ye=this.ctx.transform.applyToPoint(new u(j.x,me));if(this.autoPaging){var Fe=this.ctx.transform.decompose(),Ye=new f;Ye=(Ye=(Ye=Ye.multiply(Fe.translate)).multiply(Fe.skew)).multiply(Fe.scale);for(var Je=this.ctx.transform.applyToRectangle(new c(j.x,me,fe.w,fe.h)),ct=Ye.applyToRectangle(new c(j.x,Se,fe.w,fe.h)),$=k.call(this,ct),Re=[],pt=0;pt<$.length;pt+=1)Re.indexOf($[pt])===-1&&Re.push($[pt]);D(Re);for(var Ke=Re[0],Le=Re[Re.length-1],tt=Ke;tt<Le+1;tt++){this.pdf.setPage(tt);var Ue=tt===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[2],Be=it-this.margin[0],at=this.pdf.internal.pageSize.width-this.margin[1],nt=at-this.margin[3],ut=tt===1?0:ot+(tt-2)*Be;if(this.ctx.clip_path.length!==0){var gt=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(ee,this.posX+this.margin[3],-1*ut+Ue),B.call(this,"fill",!0),this.path=gt}var dt=R([JSON.parse(JSON.stringify(ct))],this.posX+this.margin[3],-ut+Ue+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(J=this.pdf.internal.getFontSize(),this.pdf.setFontSize(J*j.scale),oe=this.lineWidth,this.lineWidth=oe*j.scale);var xt=this.autoPaging!=="text";if(xt||dt.y+dt.h<=it){if(xt||dt.y>=Ue&&dt.x<=at){var ht=xt?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||at-dt.x)[0],rn=R([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-ut+Ue+this.ctx.prevPageLastElemOffset)[0],Vt=xt&&(tt>Ke||tt<Le)&&A.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nt,Be,null).clip().discardPath()),this.pdf.text(ht,rn.x,rn.y,{angle:j.angle,align:P,renderingMode:j.renderingMode}),Vt&&this.pdf.restoreGraphicsState()}}else dt.y<it&&(this.ctx.prevPageLastElemOffset+=it-dt.y);j.scale>=.01&&(this.pdf.setFontSize(J),this.lineWidth=oe)}}else j.scale>=.01&&(J=this.pdf.internal.getFontSize(),this.pdf.setFontSize(J*j.scale),oe=this.lineWidth,this.lineWidth=oe*j.scale),this.pdf.text(j.text,ye.x+this.posX,ye.y+this.posY,{angle:j.angle,align:P,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(J),this.lineWidth=oe)},H=function(j,P,ee,J){ee=ee||0,J=J||0,this.pdf.internal.out(t(j+ee)+" "+s(P+J)+" l")},X=function(j,P,ee){return this.pdf.lines(j,P,ee,null,null)},he=function(j,P,ee,J,oe,fe,me,Se){this.pdf.internal.out([e(a(ee+j)),e(o(J+P)),e(a(oe+j)),e(o(fe+P)),e(a(me+j)),e(o(Se+P)),"c"].join(" "))},I=function(j,P,ee,J){for(var oe=2*Math.PI,fe=Math.PI/2;P>ee;)P-=oe;var me=Math.abs(ee-P);me<oe&&J&&(me=oe-me);for(var Se=[],ye=J?-1:1,Fe=P;me>1e-5;){var Ye=Fe+ye*Math.min(me,fe);Se.push(se.call(this,j,Fe,Ye)),me-=Math.abs(Ye-Fe),Fe=Ye}return Se},se=function(j,P,ee){var J=(ee-P)/2,oe=j*Math.cos(J),fe=j*Math.sin(J),me=oe,Se=-fe,ye=me*me+Se*Se,Fe=ye+me*oe+Se*fe,Ye=4/3*(Math.sqrt(2*ye*Fe)-Fe)/(me*fe-Se*oe),Je=me-Ye*Se,ct=Se+Ye*me,$=Je,Re=-ct,pt=J+P,Ke=Math.cos(pt),Le=Math.sin(pt);return{x1:j*Math.cos(P),y1:j*Math.sin(P),x2:Je*Ke-ct*Le,y2:Je*Le+ct*Ke,x3:$*Ke-Re*Le,y3:$*Le+Re*Ke,x4:j*Math.cos(ee),y4:j*Math.sin(ee)}},ie=function(j){return 180*j/Math.PI},de=function(j,P,ee,J,oe,fe){var me=j+.5*(ee-j),Se=P+.5*(J-P),ye=oe+.5*(ee-oe),Fe=fe+.5*(J-fe),Ye=Math.min(j,oe,me,ye),Je=Math.max(j,oe,me,ye),ct=Math.min(P,fe,Se,Fe),$=Math.max(P,fe,Se,Fe);return new c(Ye,ct,Je-Ye,$-ct)},pe=function(j,P,ee,J,oe,fe,me,Se){var ye,Fe,Ye,Je,ct,$,Re,pt,Ke,Le,tt,Ue,ot,it,Be=ee-j,at=J-P,nt=oe-ee,ut=fe-J,gt=me-oe,dt=Se-fe;for(Fe=0;Fe<41;Fe++)Ke=(Re=(Ye=j+(ye=Fe/40)*Be)+ye*((ct=ee+ye*nt)-Ye))+ye*(ct+ye*(oe+ye*gt-ct)-Re),Le=(pt=(Je=P+ye*at)+ye*(($=J+ye*ut)-Je))+ye*($+ye*(fe+ye*dt-$)-pt),Fe==0?(tt=Ke,Ue=Le,ot=Ke,it=Le):(tt=Math.min(tt,Ke),Ue=Math.min(Ue,Le),ot=Math.max(ot,Ke),it=Math.max(it,Le));return new c(Math.round(tt),Math.round(Ue),Math.round(ot-tt),Math.round(it-Ue))},G=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,P,ee=(j=this.ctx.lineDash,P=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:P}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(It.API),(function(r){var e=function(u){var c,f,d,m,y,_,b,N,A,k;for(f=[],d=0,m=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;m>d;d+=4)(y=(u.charCodeAt(d)<<24)+(u.charCodeAt(d+1)<<16)+(u.charCodeAt(d+2)<<8)+u.charCodeAt(d+3))!==0?(_=(y=((y=((y=((y=(y-(k=y%85))/85)-(A=y%85))/85)-(N=y%85))/85)-(b=y%85))/85)%85,f.push(_+33,b+33,N+33,A+33,k+33)):f.push(122);return(function(T,R){for(var D=R;D>0;D--)T.pop()})(f,c.length),String.fromCharCode.apply(String,f)+"~>"},t=function(u){var c,f,d,m,y,_=String,b="length",N=255,A="charCodeAt",k="slice",T="replace";for(u[k](-2),u=u[k](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),d=[],m=0,y=(u+=c="uuuuu"[k](u[b]%5||5))[b];y>m;m+=5)f=52200625*(u[A](m)-33)+614125*(u[A](m+1)-33)+7225*(u[A](m+2)-33)+85*(u[A](m+3)-33)+(u[A](m+4)-33),d.push(N&f>>24,N&f>>16,N&f>>8,N&f);return(function(R,D){for(var F=D;F>0;F--)R.pop()})(d,c[b]),_.fromCharCode.apply(_,d)},s=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var f="",d=0;d<u.length;d+=2)f+=String.fromCharCode("0x"+(u[d]+u[d+1]));return f},o=function(u){for(var c=new Uint8Array(u.length),f=u.length;f--;)c[f]=u.charCodeAt(f);return(c=vg(c)).reduce(function(d,m){return d+String.fromCharCode(m)},"")};r.processDataByFilters=function(u,c){var f=0,d=u||"",m=[];for(typeof(c=c||[])=="string"&&(c=[c]),f=0;f<c.length;f+=1)switch(c[f]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=s(d),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=o(d),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[f]+'" is not implemented')}return{data:d,reverseChain:m.reverse().join(" ")}}})(It.API),(function(r){r.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(f,d,m){var y=new XMLHttpRequest,_=0,b=function(N){var A=N.length,k=[],T=String.fromCharCode;for(_=0;_<A;_+=1)k.push(T(255&N.charCodeAt(_)));return k.join("")};if(y.open("GET",f,!d),y.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(y.onload=function(){y.status===200?m(b(this.responseText)):m(void 0)}),y.send(null),d&&y.status===200)return b(y.responseText)})(a,o,u)}catch{}return c})(e,t,s)},r.loadImageFile=r.loadFile})(It.API),(function(r){function e(){return(Jt.html2canvas?Promise.resolve(Jt.html2canvas):q1(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(Jt.DOMPurify?Promise.resolve(Jt.DOMPurify):q1(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var s=function(c){var f=er(c);return f==="undefined"?"undefined":f==="string"||c instanceof String?"string":f==="number"||c instanceof Number?"number":f==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(c,f){var d=document.createElement(c);for(var m in f.className&&(d.className=f.className),f.innerHTML&&f.dompurify&&(d.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)d.style[m]=f.style[m];return d},o=function c(f,d){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),y=f.firstChild;y;y=y.nextSibling)d!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||m.appendChild(c(y,d));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m},u=function c(f){var d=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),m=c.convert(Promise.resolve(),d);return(m=m.setProgress(1,c,1,[c])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,f){return c.__proto__=f||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,f){return this.then(function(){switch(f=f||(function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),f){case"string":return this.then(t).then(function(d){return this.set({src:a("div",{innerHTML:c,dompurify:d})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,f(this.prop.container,d)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var d=this.opt.jsPDF,m=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=m,m)for(var b=0;b<m.length;++b){var N=m[b],A=N.src.find(function(k){return k.format==="truetype"});A&&d.addFont(A.url,N.ref.name,N.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,d.context2d.save(!0),f(this.prop.container,_)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,f,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(c,f):this.outputPdf(c,f)},u.prototype.outputPdf=function(c,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,f)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(s(c)!=="object")return this;var f=Object.keys(c||{}).map(function(d){if(d in u.template.prop)return function(){this.prop[d]=c[d]};switch(d){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[d]=c[d]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(c,f){return this.then(function(){var d=c in u.template.prop?this.prop[c]:this.opt[c];return f?f(d):d})},u.prototype.setMargin=function(c){return this.then(function(){switch(s(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function f(d,m){return Math.floor(d*m/72*96)}return this.then(function(){(c=c||It.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:f(c.inner.width,c.k),height:f(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,f,d,m){return c!=null&&(this.progress.val=c),f!=null&&(this.progress.state=f),d!=null&&(this.progress.n=d),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,f,d,m){return this.setProgress(c?this.progress.val+c:null,f||null,d?this.progress.n+d:null,m?this.progress.stack.concat(m):null)},u.prototype.then=function(c,f){var d=this;return this.thenCore(c,f,function(m,y){return d.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(_){return d.updateProgress(null,m),_}).then(m,y).then(function(_){return d.updateProgress(1),_})})},u.prototype.thenCore=function(c,f,d){d=d||Promise.prototype.then;var m=this;c&&(c=c.bind(m)),f&&(f=f.bind(m));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:u.convert(Object.assign({},m),Promise.prototype),_=d.call(y,c,f);return u.convert(_,m.__proto__)},u.prototype.thenExternal=function(c,f){return Promise.prototype.then.call(this,c,f)},u.prototype.thenList=function(c){var f=this;return c.forEach(function(d){f=f.thenCore(d)}),f},u.prototype.catch=function(c){c&&(c=c.bind(this));var f=Promise.prototype.catch.call(this,c);return u.convert(f,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,It.getPageSize=function(c,f,d){if(er(c)==="object"){var m=c;c=m.orientation,f=m.unit||f,d=m.format||d}f=f||"mm",d=d||"a4",c=(""+(c||"P")).toLowerCase();var y,_=(""+d).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+f}var N,A=0,k=0;if(b.hasOwnProperty(_))A=b[_][1]/y,k=b[_][0]/y;else try{A=d[1],k=d[0]}catch{throw new Error("Invalid format: "+d)}if(c==="p"||c==="portrait")c="p",k>A&&(N=k,k=A,A=N);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",A>k&&(N=k,k=A,A=N)}return{width:k,height:A,unit:f,k:y,orientation:c}},r.html=function(c,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Um):null;var d=new u(f);return f.worker?d:d.from(c).doCallback()}})(It.API),It.API.addJS=function(r){return ox=r,this.internal.events.subscribe("postPutResources",function(){I1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(I1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ax=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ox+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){I1!==void 0&&ax!==void 0&&this.internal.out("/Names <</JavaScript "+I1+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=s.exec(u);if(c!=null){var f=c[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,m=[];for(o=0;o<d;o++){var y=t.internal.newObject();m.push(y);var _=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<m.length;o++)t.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var f=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(It.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,s,a,o,u,c){var f,d=this.decode.DCT_DECODE,m=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,f=(function(y){for(var _,b=256*y.charCodeAt(4)+y.charCodeAt(5),N=y.length,A={width:0,height:0,numcomponents:1},k=4;k<N;k+=2){if(k+=b,e.indexOf(y.charCodeAt(k+1))!==-1){_=256*y.charCodeAt(k+5)+y.charCodeAt(k+6),A={width:256*y.charCodeAt(k+7)+y.charCodeAt(k+8),height:_,numcomponents:y.charCodeAt(k+9)};break}b=256*y.charCodeAt(k+2)+y.charCodeAt(k+3)}return A})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),f.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}m={data:t,width:f.width,height:f.height,colorSpace:c,bitsPerComponent:8,filter:d,index:s,alias:a}}return m}})(It.API),It.API.processPNG=function(r,e,t,s){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var a,o=vM(r,{checkCrc:!0}),u=o.width,c=o.height,f=o.channels,d=o.palette,m=o.depth;a=d&&f===1?(function(O){for(var z=O.width,Q=O.height,M=O.data,V=O.palette,H=O.depth,X=!1,he=[],I=[],se=void 0,ie=!1,de=0,pe=0;pe<V.length;pe++){var G=hy(V[pe],4),j=G[0],P=G[1],ee=G[2],J=G[3];he.push(j,P,ee),J!=null&&(J===0?(de++,I.length<1&&I.push(pe)):J<255&&(ie=!0))}if(ie||de>1){X=!0,I=void 0;var oe=z*Q;se=new Uint8Array(oe);for(var fe=new DataView(M.buffer),me=0;me<oe;me++){var Se=Gm(fe,me,H),ye=hy(V[Se],4)[3];se[me]=ye}}else de===0&&(I=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:X?8:void 0,colorBytes:M,alphaBytes:se,needSMask:X,palette:he,mask:I}})(o):f===2||f===4?(function(O){for(var z=O.data,Q=O.width,M=O.height,V=O.channels,H=O.depth,X=V===2?"DeviceGray":"DeviceRGB",he=V-1,I=Q*M,se=he,ie=I*se,de=1*I,pe=Math.ceil(ie*H/8),G=Math.ceil(de*H/8),j=new Uint8Array(pe),P=new Uint8Array(G),ee=new DataView(z.buffer),J=new DataView(j.buffer),oe=new DataView(P.buffer),fe=!1,me=0;me<I;me++){for(var Se=me*V,ye=0;ye<se;ye++)gx(J,Gm(ee,Se+ye,H),me*se+ye,H);var Fe=Gm(ee,Se+se,H);Fe<(1<<H)-1&&(fe=!0),gx(oe,Fe,1*me,H)}return{colorSpace:X,colorsPerPixel:he,sMaskBitsPerComponent:fe?H:void 0,colorBytes:j,alphaBytes:P,needSMask:fe}})(o):(function(O){var z=O.data,Q=O.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Q,colorsPerPixel:Q==="DeviceGray"?1:3,colorBytes:z instanceof Uint16Array?(function(M){for(var V=M.length,H=new Uint8Array(2*V),X=new DataView(H.buffer,H.byteOffset,H.byteLength),he=0;he<V;he++)X.setUint16(2*he,M[he],!1);return H})(z):z,needSMask:!1}})(o);var y,_,b,N=a,A=N.colorSpace,k=N.colorsPerPixel,T=N.sMaskBitsPerComponent,R=N.colorBytes,D=N.alphaBytes,F=N.needSMask,B=N.palette,W=N.mask,Y=null;return s!==It.API.image_compression.NONE&&typeof vg=="function"?(Y=(function(O){var z;switch(O){case It.API.image_compression.FAST:z=11;break;case It.API.image_compression.MEDIUM:z=13;break;case It.API.image_compression.SLOW:z=14;break;default:z=12}return z})(s),y=this.decode.FLATE_DECODE,_="/Predictor ".concat(Y," /Colors ").concat(k," /BitsPerComponent ").concat(m," /Columns ").concat(u),r=hx(R,Math.ceil(u*k*m/8),k,m,s),F&&(b=hx(D,Math.ceil(u*T/8),1,T,s))):(y=void 0,_=void 0,r=R,F&&(b=D)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:r,index:e,filter:y,decodeParameters:_,transparency:W,palette:B,sMask:b,predictor:Y,width:u,height:c,bitsPerComponent:m,sMaskBitsPerComponent:T,colorSpace:A}}},(function(r){r.processGIF89A=function(e,t,s,a){var o=new BM(e),u=o.width,c=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:u,height:c},m=new Wm(100).encode(d,100);return r.processJPEG.call(this,m,t,s,a)},r.processGIF87A=r.processGIF89A})(It.API),so.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},so.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){pr.log("bit decode error:"+t)}},so.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var f=this.palette[o>>7-c&1];this.data[u+4*c]=f.blue,this.data[u+4*c+1]=f.green,this.data[u+4*c+2]=f.red,this.data[u+4*c+3]=255}t!==0&&(this.pos+=4-t)}},so.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<r;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,c=o>>4,f=15&o,d=this.palette[c];if(this.data[u]=d.blue,this.data[u+1]=d.green,this.data[u+2]=d.red,this.data[u+3]=255,2*a+1>=this.width)break;d=this.palette[f],this.data[u+4]=d.blue,this.data[u+4+1]=d.green,this.data[u+4+2]=d.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},so.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}r!==0&&(this.pos+=4-r)}},so.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,d=o>>15?255:0,m=s*this.width*4+4*a;this.data[m]=f,this.data[m+1]=c,this.data[m+2]=u,this.data[m+3]=d}this.pos+=r}},so.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,f=(u>>5&t)/t*255|0,d=(u>>11)/e*255|0,m=a*this.width*4+4*o;this.data[m]=d,this.data[m+1]=f,this.data[m+2]=c,this.data[m+3]=255}this.pos+=r}},so.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},so.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=u}},so.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,s,a){var o=new so(e,!1),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},d=new Wm(100).encode(f,100);return r.processJPEG.call(this,d,t,s,a)}})(It.API),vx.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,s,a){var o=new vx(e),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},d=new Wm(100).encode(f,100);return r.processJPEG.call(this,d,t,s,a)}})(It.API),It.API.processRGBA=function(r,e,t){for(var s=r.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,f=0,d=0;d<a;d+=4){var m=s[d],y=s[d+1],_=s[d+2],b=s[d+3];o[c++]=m,o[c++]=y,o[c++]=_,u[f++]=b}var N=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:N,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},It.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},gh=It.API,V1=gh.getCharWidthsArray=function(r,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,f=c.fof?c.fof:1,d=e.kerning?e.kerning:a.metadata.Unicode.kerning,m=d.fof?d.fof:1,y=e.doKerning!==!1,_=0,b=r.length,N=0,A=c[0]||f,k=[];for(t=0;t<b;t++)s=r.charCodeAt(t),typeof a.metadata.widthOfString=="function"?k.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(_=y&&er(d[s])==="object"&&!isNaN(parseInt(d[s][N],10))?d[s][N]/m:0,k.push((c[s]||A)/f+_)),N=s;return k},lx=gh.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return gh.processArabic&&(r=gh.processArabic(r)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(r,t,a)/t:V1.apply(this,arguments).reduce(function(o,u){return o+u},0)},cx=function(r,e,t,s){for(var a=[],o=0,u=r.length,c=0;o!==u&&c+e[o]<t;)c+=e[o],o++;a.push(r.slice(0,o));var f=o;for(c=0;o!==u;)c+e[o]>s&&(a.push(r.slice(f,o)),c=0,f=o),c+=e[o],o++;return f!==o&&a.push(r.slice(f,o)),a},ux=function(r,e,t){t||(t={});var s,a,o,u,c,f,d,m=[],y=[m],_=t.textIndent||0,b=0,N=0,A=r.split(" "),k=V1.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?A[0].length+2:t.lineIndent||0){var T=Array(f).join(" "),R=[];A.map(function(F){(F=F.split(/\s*\n/)).length>1?R=R.concat(F.map(function(B,W){return(W&&B.length?`
`:"")+B})):R.push(F[0])}),A=R,f=lx.apply(this,[T,t])}for(o=0,u=A.length;o<u;o++){var D=0;if(s=A[o],f&&s[0]==`
`&&(s=s.substr(1),D=1),_+b+(N=(a=V1.apply(this,[s,t])).reduce(function(F,B){return F+B},0))>e||D){if(N>e){for(c=cx.apply(this,[s,a,e-(_+b),e]),m.push(c.shift()),m=[c.pop()];c.length;)y.push([c.shift()]);N=a.slice(s.length-(m[0]?m[0].length:0)).reduce(function(F,B){return F+B},0)}else m=[s];y.push(m),_=N+f,b=k}else m.push(s),_+=b+N,b=k}return d=f?function(F,B){return(B?T:"")+F.join(" ")}:function(F){return F.join(" ")},y.map(d)},gh.splitTextToSize=function(r,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var y=this.internal.getFont(m.fontName,m.fontStyle),_="Unicode";return y.metadata[_]?{widths:y.metadata[_].widths||{0:1},kerning:y.metadata[_].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(r)?r:String(r).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var c,f,d=[];for(c=0,f=s.length;c<f;c++)d=d.concat(ux.apply(this,[s[c],u,o]));return d},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(_){return"0x"+parseInt(_,10).toString(16)},c=r.__fontmetrics__.compress=function(_){var b,N,A,k,T=["{"];for(var R in _){if(b=_[R],isNaN(parseInt(R,10))?N="'"+R+"'":(R=parseInt(R,10),N=(N=u(R).slice(2)).slice(0,-1)+a[N.slice(-1)]),typeof b=="number")b<0?(A=u(b).slice(3),k="-"):(A=u(b).slice(2),k=""),A=k+A.slice(0,-1)+a[A.slice(-1)];else{if(er(b)!=="object")throw new Error("Don't know what to do with value type "+er(b)+".");A=c(b)}T.push(N+A)}return T.push("}"),T.join("")},f=r.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,N,A,k,T={},R=1,D=T,F=[],B="",W="",Y=_.length-1,O=1;O<Y;O+=1)(k=_[O])=="'"?b?(A=b.join(""),b=void 0):b=[]:b?b.push(k):k=="{"?(F.push([D,A]),D={},A=void 0):k=="}"?((N=F.pop())[0][N[1]]=D,A=void 0,D=N[0]):k=="-"?R=-1:A===void 0?s.hasOwnProperty(k)?(B+=s[k],A=parseInt(B,16)*R,R=1,B=""):B+=k:s.hasOwnProperty(k)?(W+=s[k],D[A]=parseInt(W,16)*R,R=1,A=void 0,W=""):W+=k;return T},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},y={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(_){var b=_.font,N=y.Unicode[b.postScriptName];N&&(b.metadata.Unicode={},b.metadata.Unicode.widths=N.widths,b.metadata.Unicode.kerning=N.kerning);var A=m.Unicode[b.postScriptName];A&&(b.metadata.Unicode.encoding=A,b.encoding=A.codePages[0])}])})(It.API),(function(r){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};r.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(G1(c)),u.metadata=r.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})(It),It.API.addSvgAsImage=function(r,e,t,s,a,o,u,c){if(isNaN(e)||isNaN(t))throw pr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw pr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=a;var d=f.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(Jt.canvg?Promise.resolve(Jt.canvg):q1(()=>import("./index.es-D20gwpLX.js"),[])).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(d,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(m)}).then(function(){y.addImage(f.toDataURL("image/jpeg",1),e,t,s,a,u,c)})},It.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},It.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),f=[],d=0,m=0,y=0;function _(N,A){var k,T=!1;for(k=0;k<N.length;k+=1)N[k]===A&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var b=c.length;for(y=0;y<b;y+=1)t[c[y]].value=t[c[y]].defaultValue,t[c[y]].explicitSet=!1}if(er(r)==="object"){for(a in r)if(o=r[a],_(c,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&_(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(d=0;d<o.length;d+=1)if(s=!0,o[d].length===1&&typeof o[d][0]=="number")f.push(String(o[d]-1));else if(o[d].length>1){for(m=0;m<o[d].length;m+=1)typeof o[d][m]!="number"&&(s=!1);s===!0&&f.push([o[d][0]-1,o[d][1]-1].join(" "))}t[a].value="["+f.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,A=[];for(N in t)t[N].explicitSet===!0&&(t[N].type==="name"?A.push("/"+N+" /"+t[N].value):A.push("/"+N+" "+t[N].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+u.length+c.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(It.API),(function(r){var e=r.API,t=e.pdfEscape16=function(o,u){for(var c,f=u.metadata.Unicode.widths,d=["","0","00","000","0000"],m=[""],y=0,_=o.length;y<_;++y){if(c=u.metadata.characterToGlyph(o.charCodeAt(y)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(y),f.indexOf(c)==-1&&(f.push(c),f.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return m.join("");c=c.toString(16),m.push(d[4-c.length],c)}return m.join("")},s=function(o){var u,c,f,d,m,y,_;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],y=0,_=(c=Object.keys(o).sort(function(b,N){return b-N})).length;y<_;y++)u=c[y],f.length>=100&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(d=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+d+">"));return f.length&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,d=u.newObject,m=u.putStream;if(c.metadata instanceof r.API.TTFFont&&c.encoding==="Identity-H"){for(var y=c.metadata.Unicode.widths,_=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),b="",N=0;N<_.length;N++)b+=String.fromCharCode(_[N]);var A=d();m({data:b,addLength1:!0,objectId:A}),f("endobj");var k=d();m({data:s(c.metadata.toUnicode),addLength1:!0,objectId:k}),f("endobj");var T=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+yh(c.fontName)),f("/FontFile2 "+A+" 0 R"),f("/FontBBox "+r.API.PDFObject.convert(c.metadata.bbox)),f("/Flags "+c.metadata.flags),f("/StemV "+c.metadata.stemV),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f(">>"),f("endobj");var R=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+yh(c.fontName)),f("/FontDescriptor "+T+" 0 R"),f("/W "+r.API.PDFObject.convert(y)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+c.encoding+")"),f(">>"),f(">>"),f("endobj"),c.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+k+" 0 R"),f("/BaseFont /"+yh(c.fontName)),f("/Encoding /"+c.encoding),f("/DescendantFonts ["+R+" 0 R]"),f(">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,d=u.newObject,m=u.putStream;if(c.metadata instanceof r.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var y=c.metadata.rawData,_="",b=0;b<y.length;b++)_+=String.fromCharCode(y[b]);var N=d();m({data:_,addLength1:!0,objectId:N}),f("endobj");var A=d();m({data:s(c.metadata.toUnicode),addLength1:!0,objectId:A}),f("endobj");var k=d();f("<<"),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f("/StemV "+c.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+N+" 0 R"),f("/Flags 96"),f("/FontBBox "+r.API.PDFObject.convert(c.metadata.bbox)),f("/FontName /"+yh(c.fontName)),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f(">>"),f("endobj"),c.objectNumber=d();for(var T=0;T<c.metadata.hmtx.widths.length;T++)c.metadata.hmtx.widths[T]=parseInt(c.metadata.hmtx.widths[T]*(1e3/c.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+yh(c.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",f=o.x,d=o.y,m=o.options||{},y=o.mutex||{},_=y.pdfEscape,b=y.activeFontKey,N=y.fonts,A=b,k="",T=0,R="",D=N[A].encoding;if(N[A].encoding!=="Identity-H")return{text:c,x:f,y:d,options:m,mutex:y};for(R=c,A=b,Array.isArray(c)&&(R=c[0]),T=0;T<R.length;T+=1)N[A].metadata.hasOwnProperty("cmap")&&(u=N[A].metadata.cmap.unicode.codeMap[R[T].charCodeAt(0)]),u||R[T].charCodeAt(0)<256&&N[A].metadata.hasOwnProperty("Unicode")?k+=R[T]:k+="";var F="";return parseInt(A.slice(1))<14||D==="WinAnsiEncoding"?F=_(k,A).split("").map(function(B){return B.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(F=t(k,N[A])),y.isHex=!0,{text:F,x:f,y:d,options:m,mutex:y}};e.events.push(["postProcessText",function(o){var u=o.text||"",c=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var d=0;for(d=0;d<u.length;d+=1)Array.isArray(u[d])&&u[d].length===3?c.push([a(Object.assign({},f,{text:u[d][0]})).text,u[d][1],u[d][2]]):c.push(a(Object.assign({},f,{text:u[d]})).text);o.text=c}else o.text=a(Object.assign({},f,{text:u})).text}])})(It),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(It.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(s){var a,o,u,c,f,d,m,y=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,D=0;this.__bidiEngine__={};var F=function(M){var V=M.charCodeAt(),H=V>>8,X=A[H];return X!==void 0?y[256*X+(255&V)]:H===252||H===253?"AL":T.test(H)?"L":H===8?"R":"N"},B=function(M){for(var V,H=0;H<M.length;H++){if((V=F(M.charAt(H)))==="L")return!1;if(V==="R")return!0}return!1},W=function(M,V,H,X){var he,I,se,ie,de=V[X];switch(de){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"N":case"AN":break;case"EN":R&&(de="AN");break;case"AL":R=!0,de="R";break;case"WS":case"BN":de="N";break;case"CS":X<1||X+1>=V.length||(he=H[X-1])!=="EN"&&he!=="AN"||(I=V[X+1])!=="EN"&&I!=="AN"?de="N":R&&(I="AN"),de=I===he?I:"N";break;case"ES":de=(he=X>0?H[X-1]:"B")==="EN"&&X+1<V.length&&V[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&H[X-1]==="EN"){de="EN";break}if(R){de="N";break}for(se=X+1,ie=V.length;se<ie&&V[se]==="ET";)se++;de=se<ie&&V[se]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(ie=V.length,se=X+1;se<ie&&V[se]==="NSM";)se++;if(se<ie){var pe=M[X],G=pe>=1425&&pe<=2303||pe===64286;if(he=V[se],G&&(he==="R"||he==="AL")){de="R";break}}}de=X<1||(he=V[X-1])==="B"?"N":H[X-1];break;case"B":R=!1,a=!0,de=D;break;case"S":o=!0,de="N"}return de},Y=function(M,V,H){var X=M.split("");return H&&O(X,H,{hiLevel:D}),X.reverse(),V&&V.reverse(),X.join("")},O=function(M,V,H){var X,he,I,se,ie,de=-1,pe=M.length,G=0,j=[],P=D?b:_,ee=[];for(R=!1,a=!1,o=!1,he=0;he<pe;he++)ee[he]=F(M[he]);for(I=0;I<pe;I++){if(ie=G,j[I]=W(M,ee,j,I),X=240&(G=P[ie][N[j[I]]]),G&=15,V[I]=se=P[G][5],X>0)if(X===16){for(he=de;he<I;he++)V[he]=1;de=-1}else de=-1;if(P[G][6])de===-1&&(de=I);else if(de>-1){for(he=de;he<I;he++)V[he]=se;de=-1}ee[I]==="B"&&(V[I]=0),H.hiLevel|=se}o&&(function(J,oe,fe){for(var me=0;me<fe;me++)if(J[me]==="S"){oe[me]=D;for(var Se=me-1;Se>=0&&J[Se]==="WS";Se--)oe[Se]=D}})(ee,V,pe)},z=function(M,V,H,X,he){if(!(he.hiLevel<M)){if(M===1&&D===1&&!a)return V.reverse(),void(H&&H.reverse());for(var I,se,ie,de,pe=V.length,G=0;G<pe;){if(X[G]>=M){for(ie=G+1;ie<pe&&X[ie]>=M;)ie++;for(de=G,se=ie-1;de<se;de++,se--)I=V[de],V[de]=V[se],V[se]=I,H&&(I=H[de],H[de]=H[se],H[se]=I);G=ie}G++}}},Q=function(M,V,H){var X=M.split(""),he={hiLevel:D};return H||(H=[]),O(X,H,he),(function(I,se,ie){if(ie.hiLevel!==0&&m)for(var de,pe=0;pe<I.length;pe++)se[pe]===1&&(de=k.indexOf(I[pe]))>=0&&(I[pe]=k[de+1])})(X,H,he),z(2,X,V,H,he),z(1,X,V,H,he),X.join("")};return this.__bidiEngine__.doBidiReorder=function(M,V,H){if((function(he,I){if(I)for(var se=0;se<he.length;se++)I[se]=se;c===void 0&&(c=B(he)),d===void 0&&(d=B(he))})(M,V),u||!f||d)if(u&&f&&c^d)D=c?1:0,M=Y(M,V,H);else if(!u&&f&&d)D=c?1:0,M=Q(M,V,H),M=Y(M,V);else if(!u||c||f||d){if(u&&!f&&c^d)M=Y(M,V),c?(D=0,M=Q(M,V,H)):(D=1,M=Q(M,V,H),M=Y(M,V));else if(u&&c&&!f&&d)D=1,M=Q(M,V,H),M=Y(M,V);else if(!u&&!f&&c^d){var X=m;c?(D=1,M=Q(M,V,H),D=0,m=!1,M=Q(M,V,H),m=X):(D=0,M=Q(M,V,H),M=Y(M,V),D=1,m=!1,M=Q(M,V,H),m=X,M=Y(M,V))}}else D=0,M=Q(M,V,H);else D=c?1:0,M=Q(M,V,H);return M},this.__bidiEngine__.setOptions=function(M){M&&(u=M.isInputVisual,f=M.isOutputVisual,c=M.isInputRtl,d=M.isOutputRtl,m=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([t.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([t.doBidiReorder(a[c])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(It),It.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Ec(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new eL(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new zM(this.contents),this.head=new qM(this),this.name=new YM(this),this.cmap=new g4(this),this.toUnicode={},this.hhea=new UM(this),this.maxp=new XM(this),this.hmtx=new $M(this),this.post=new GM(this),this.os2=new HM(this),this.loca=new JM(this),this.glyf=new ZM(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,f,d;for(d=[],u=0,c=(f=this.bbox).length;u<c;u++)e=f[u],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,s){var a,o,u,c;for(u=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},r.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},r})();var vo,Ec=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},r.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,s,a,o,u,c,f;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*c+f},r.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},r.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},r})(),zM=(function(){var r;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,c,f,d,m,y,_,b,N,A;for(A in b=Object.keys(t).length,f=Math.log(2),y=16*Math.floor(Math.log(b)/f),u=Math.floor(y/f),m=16*b-y,(a=new Ec).writeInt(this.scalarType),a.writeShort(b),a.writeShort(y),a.writeShort(u),a.writeShort(m),o=16*b,d=a.pos+o,c=null,N=[],t)for(_=t[A],a.writeString(A),a.writeInt(r(_)),a.writeInt(d),a.writeInt(_.length),N=N.concat(_),A==="head"&&(c=d),d+=_.length;d%4;)N.push(0),d++;return a.write(N),s=2981146554-r(a.data),a.pos=c+8,a.writeUInt32(s),a.data},r=function(t){var s,a,o,u;for(t=b4.call(t);t.length%4;)t.push(0);for(o=new Ec(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),PM={}.hasOwnProperty,Xo=function(r,e){for(var t in e)PM.call(e,t)&&(r[t]=e[t]);function s(){this.constructor=r}return s.prototype=e.prototype,r.prototype=new s,r.__super__=e.prototype,r};vo=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var qM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Xo(r,vo),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new Ec).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),yx=(function(){function r(e,t){var s,a,o,u,c,f,d,m,y,_,b,N,A,k,T,R,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(b=e.readUInt16(),_=b/2,e.pos+=6,o=(function(){var F,B;for(B=[],f=F=0;0<=_?F<_:F>_;f=0<=_?++F:--F)B.push(e.readUInt16());return B})(),e.pos+=2,A=(function(){var F,B;for(B=[],f=F=0;0<=_?F<_:F>_;f=0<=_?++F:--F)B.push(e.readUInt16());return B})(),d=(function(){var F,B;for(B=[],f=F=0;0<=_?F<_:F>_;f=0<=_?++F:--F)B.push(e.readUInt16());return B})(),m=(function(){var F,B;for(B=[],f=F=0;0<=_?F<_:F>_;f=0<=_?++F:--F)B.push(e.readUInt16());return B})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var F,B;for(B=[],f=F=0;0<=a?F<a:F>a;f=0<=a?++F:--F)B.push(e.readUInt16());return B})(),f=T=0,D=o.length;T<D;f=++T)for(k=o[f],s=R=N=A[f];N<=k?R<=k:R>=k;s=N<=k?++R:--R)m[f]===0?u=s+d[f]:(u=c[m[f]/2+(s-N)-(_-f)]||0)!==0&&(u+=d[f]),this.codeMap[s]=65535&u}e.pos=y}return r.encode=function(e,t){var s,a,o,u,c,f,d,m,y,_,b,N,A,k,T,R,D,F,B,W,Y,O,z,Q,M,V,H,X,he,I,se,ie,de,pe,G,j,P,ee,J,oe,fe,me,Se,ye,Fe,Ye;switch(X=new Ec,u=Object.keys(e).sort(function(Je,ct){return Je-ct}),t){case"macroman":for(A=0,k=(function(){var Je=[];for(N=0;N<256;++N)Je.push(0);return Je})(),R={0:0},o={},he=0,de=u.length;he<de;he++)R[Se=e[a=u[he]]]==null&&(R[Se]=++A),o[a]={old:e[a],new:R[e[a]]},k[a]=R[e[a]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(k),{charMap:o,subtable:X.data,maxGlyphID:A+1};case"unicode":for(V=[],y=[],D=0,R={},s={},T=d=null,I=0,pe=u.length;I<pe;I++)R[B=e[a=u[I]]]==null&&(R[B]=++D),s[a]={old:B,new:R[B]},c=R[B]-a,T!=null&&c===d||(T&&y.push(T),V.push(a),d=c),T=a;for(T&&y.push(T),y.push(65535),V.push(65535),Q=2*(z=V.length),O=2*Math.pow(Math.log(z)/Math.LN2,2),_=Math.log(O/2)/Math.LN2,Y=2*z-O,f=[],W=[],b=[],N=se=0,G=V.length;se<G;N=++se){if(M=V[N],m=y[N],M===65535){f.push(0),W.push(0);break}if(M-(H=s[M].new)>=32768)for(f.push(0),W.push(2*(b.length+z-N)),a=ie=M;M<=m?ie<=m:ie>=m;a=M<=m?++ie:--ie)b.push(s[a].new);else f.push(H-M),W.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*z+2*b.length),X.writeUInt16(0),X.writeUInt16(Q),X.writeUInt16(O),X.writeUInt16(_),X.writeUInt16(Y),fe=0,j=y.length;fe<j;fe++)a=y[fe],X.writeUInt16(a);for(X.writeUInt16(0),me=0,P=V.length;me<P;me++)a=V[me],X.writeUInt16(a);for(ye=0,ee=f.length;ye<ee;ye++)c=f[ye],X.writeUInt16(c);for(Fe=0,J=W.length;Fe<J;Fe++)F=W[Fe],X.writeUInt16(F);for(Ye=0,oe=b.length;Ye<oe;Ye++)A=b[Ye],X.writeUInt16(A);return{charMap:s,subtable:X.data,maxGlyphID:D+1}}},r})(),g4=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Xo(r,vo),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new yx(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=yx.encode(e,t),(a=new Ec).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},r})(),UM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Xo(r,vo),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),HM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Xo(r,vo),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),GM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Xo(r,vo),r.prototype.tag="post",r.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,c,f;for(f=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)f.push(e.readUInt32());return f}).call(this)}},r})(),WM=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},YM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Xo(r,vo),r.prototype.tag="name",r.prototype.parse=function(e){var t,s,a,o,u,c,f,d,m,y,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),c=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(f={},o=m=0,y=s.length;m<y;o=++m)a=s[o],e.pos=a.offset,d=e.readString(a.length),u=new WM(d,a),f[_=a.nameID]==null&&(f[_]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},r})(),XM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Xo(r,vo),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),$M=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Xo(r,vo),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,s,a,o,u,c,f;for(e.pos=this.offset,this.metrics=[],t=0,c=this.file.hhea.numberOfMetrics;0<=c?t<c:t>c;t=0<=c?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,m;for(m=[],t=d=0;0<=a?d<a:d>a;t=0<=a?++d:--d)m.push(e.readInt16());return m})(),this.widths=(function(){var d,m,y,_;for(_=[],d=0,m=(y=this.metrics).length;d<m;d++)o=y[d],_.push(o.advance);return _}).call(this),s=this.widths[this.widths.length-1],f=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)f.push(this.widths.push(s));return f},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),b4=[].slice,ZM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Xo(r,vo),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,s,a,o,u,c,f,d,m,y;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(c=new Ec(t.read(a))).readShort(),d=c.readShort(),y=c.readShort(),f=c.readShort(),m=c.readShort(),this.cache[e]=u===-1?new KM(c,d,y,f,m):new QM(c,u,d,y,f,m),this.cache[e]))},r.prototype.encode=function(e,t,s){var a,o,u,c,f;for(u=[],o=[],c=0,f=t.length;c<f;c++)a=e[t[c]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},r})(),QM=(function(){function r(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),KM=(function(){function r(e,t,s,a,o){var u,c;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return r.prototype.encode=function(){var e,t,s;for(t=new Ec(b4.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),JM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return Xo(r,vo),r.prototype.tag="loca",r.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var c=this.offsets[u],f=this.offsets[u+1]-c;f>0&&(a+=f)}for(var d=new Array(4*s.length),m=0;m<s.length;++m)d[4*m+3]=255&s[m],d[4*m+2]=(65280&s[m])>>8,d[4*m+1]=(16711680&s[m])>>16,d[4*m]=(4278190080&s[m])>>24;return d},r})(),eL=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},r.prototype.glyphsFor=function(e){var t,s,a,o,u,c,f;for(a={},u=0,c=e.length;u<c;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in f=this.glyphsFor(t))s=f[o],a[o]=s;return a},r.prototype.encode=function(e,t){var s,a,o,u,c,f,d,m,y,_,b,N,A,k,T;for(a in s=g4.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),b={0:0},T=s.charMap)b[(f=T[a]).old]=f.new;for(N in _=s.maxGlyphID,u)N in b||(b[N]=_++);return m=(function(R){var D,F;for(D in F={},R)F[R[D]]=D;return F})(b),y=Object.keys(m).sort(function(R,D){return R-D}),A=(function(){var R,D,F;for(F=[],R=0,D=y.length;R<D;R++)c=y[R],F.push(m[c]);return F})(),o=this.font.glyf.encode(u,A,b),d=this.font.loca.encode(o.offsets,A),k={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},r})();It.API.PDFObject=(function(){var r;function e(){}return r=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var c,f,d;for(d=[],c=0,f=t.length;c<f;c++)s=t[c],d.push(e.convert(s));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();var Z1={exports:{}},tL=Z1.exports,xx;function nL(){return xx||(xx=1,(function(r,e){(function(t,s){s()})(tL,function(){function t(d,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function s(d,m,y){var _=new XMLHttpRequest;_.open("GET",d),_.responseType="blob",_.onload=function(){f(_.response,m,y)},_.onerror=function(){console.error("could not download file")},_.send()}function a(d){var m=new XMLHttpRequest;m.open("HEAD",d,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(m)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof w1=="object"&&w1.global===w1?w1:void 0,c=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(d,m,y){var _=u.URL||u.webkitURL,b=document.createElement("a");m=m||d.name||"download",b.download=m,b.rel="noopener",typeof d=="string"?(b.href=d,b.origin===location.origin?o(b):a(b.href)?s(d,m,y):o(b,b.target="_blank")):(b.href=_.createObjectURL(d),setTimeout(function(){_.revokeObjectURL(b.href)},4e4),setTimeout(function(){o(b)},0))}:"msSaveOrOpenBlob"in navigator?function(d,m,y){if(m=m||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,y),m);else if(a(d))s(d,m,y);else{var _=document.createElement("a");_.href=d,_.target="_blank",setTimeout(function(){o(_)})}}:function(d,m,y,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof d=="string")return s(d,m,y);var b=d.type==="application/octet-stream",N=/constructor/i.test(u.HTMLElement)||u.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||b&&N||c)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var D=k.result;D=A?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=D:location=D,_=null},k.readAsDataURL(d)}else{var T=u.URL||u.webkitURL,R=T.createObjectURL(d);_?_.location=R:location.href=R,_=null,setTimeout(function(){T.revokeObjectURL(R)},4e4)}});u.saveAs=f.saveAs=f,r.exports=f})})(Z1)),Z1.exports}var rL=nL();const I2="chordWheelSongs",Cg="chordWheelCurrentSongId",Zf=()=>{try{const r=localStorage.getItem(I2);return r?JSON.parse(r).map(t=>({...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)})):[]}catch(r){return console.error("Error loading saved songs:",r),[]}},wx=r=>{try{const e=Zf(),t=e.findIndex(a=>a.id===r.id),s={...r,updatedAt:new Date().toISOString(),createdAt:r.createdAt instanceof Date?r.createdAt.toISOString():r.createdAt};t>=0?e[t]=s:e.push({...s,createdAt:new Date().toISOString()}),localStorage.setItem(I2,JSON.stringify(e)),localStorage.setItem(Cg,r.id)}catch(e){console.error("Error saving song:",e)}},sL=r=>{try{const t=Zf().filter(s=>s.id!==r);localStorage.setItem(I2,JSON.stringify(t)),localStorage.getItem(Cg)===r&&localStorage.removeItem(Cg)}catch(e){console.error("Error deleting song:",e)}},iL=({isOpen:r,onClose:e,onConfirm:t,title:s,message:a,confirmLabel:o="Confirm",cancelLabel:u="Cancel",isDestructive:c=!1})=>(re.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),re.useEffect(()=>{const f=d=>{d.key==="Escape"&&r&&e()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[r,e]),r?x.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[x.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:e}),x.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-sm w-full overflow-hidden flex flex-col scale-100 opacity-100 transition-all",children:[x.jsxs("div",{className:"p-6",children:[x.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:s}),x.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:a})]}),x.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-[#22222e] border-t border-border-subtle",children:[x.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:u}),x.jsx("button",{onClick:()=>{t(),e()},className:`px-4 py-2 text-sm font-bold text-white rounded-lg shadow-lg transition-transform active:scale-95 ${c?"bg-red-500 hover:bg-red-600":"bg-accent-primary hover:bg-accent-secondary"}`,children:o})]})]})]}):null),v4={I:{degree:0,quality:"major"},ii:{degree:1,quality:"minor"},iii:{degree:2,quality:"minor"},IV:{degree:3,quality:"major"},V:{degree:4,quality:"major"},vi:{degree:5,quality:"minor"},"vii":{degree:6,quality:"diminished"},iv:{degree:3,quality:"minor"},"VI":{degree:8,quality:"major"},bVI:{degree:8,quality:"major"},"VII":{degree:10,quality:"major"},bVII:{degree:10,quality:"major"}},aL=[0,2,4,5,7,9,11];function oL(r,e){const t=Eh(e),s=Tl.indexOf(t);if(s===-1)return e;const a=v4[r];if(!a)return console.warn(`Unknown roman numeral: ${r}`),e;let o;a.degree<7?o=aL[a.degree]:o=a.degree;const u=(s+o)%12;return Tl[u]}function lL(r,e){const t=v4[r]||{quality:"major"},s=oL(r,e),a=ka(s,t.quality);return{root:s,quality:t.quality,numeral:r,notes:a,symbol:`${s}${t.quality==="major"?"":t.quality==="minor"?"m":""}`}}function V2(r,e){return r.map(t=>lL(t,e))}let Q1=!1,Cp=[];function F2(){Q1=!1,Cp.forEach(r=>clearTimeout(r)),Cp=[]}async function y4(r,e,t=120,s=2,a){F2(),Q1=!0,js.state!=="running"&&await _u(),js.state==="suspended"&&await js.resume(),await Oc();const o=V2(r,e),c=60/t*1e3*s,d=`${4/s}n`;return new Promise(m=>{o.forEach((y,_)=>{const b=window.setTimeout(()=>{if(Q1&&(a?.(_,y),xi(y.notes,d),_===o.length-1)){const N=window.setTimeout(()=>{Q1=!1,m()},c);Cp.push(N)}},_*c);Cp.push(b)})})}const cL=[{id:"pop-anthem",name:"Pop/Rock Anthem",description:"The most popular progression in modern music. Uplifting and anthemic.",numerals:["I","V","vi","IV"],genre:"Pop/Rock",artists:"U2, The Beatles, Blink-182",color:"accent-primary",sectionType:"chorus",sectionName:"Anthem",beatsPerChord:4},{id:"emotional-ballad",name:"Emotional Ballad",description:"Starts on the minor chord for a melancholic, emotional feel.",numerals:["vi","IV","I","V"],genre:"Ballad",artists:"Adele, John Legend",color:"purple-400",sectionType:"verse",sectionName:"Ballad",beatsPerChord:4},{id:"jazz-ii-v-i",name:"Jazz / R&B",description:"The foundation of jazz harmony. Smooth and sophisticated.",numerals:["ii","V","I"],genre:"Jazz/R&B",artists:"Maroon 5, Jazz Standards",color:"blue-400",sectionType:"verse",sectionName:"ii-V-I",beatsPerChord:4,totalBars:4},{id:"50s-progression",name:"50s Doo-Wop",description:"Classic rock and roll. Nostalgic and feel-good.",numerals:["I","vi","IV","V"],genre:"Oldies",artists:"Stand By Me, Earth Angel",color:"yellow-400",sectionType:"verse",sectionName:"Doo-Wop",beatsPerChord:4},{id:"andalusian",name:"Andalusian Cadence",description:"Dramatic descending progression. Spanish/Flamenco influenced.",numerals:["vi","V","IV","III"],genre:"Dramatic",artists:"Hit the Road Jack, Sultans of Swing",color:"red-400",sectionType:"verse",sectionName:"Andal.",beatsPerChord:4},{id:"pachelbel",name:"Pachelbel Canon",description:"The classical progression that influenced centuries of music.",numerals:["I","V","vi","iii","IV","I","IV","V"],genre:"Classical/Pop",artists:"Canon in D, Basket Case",color:"green-400",sectionType:"verse",sectionName:"Canon",beatsPerChord:2}],uL=[{id:"perfect",name:"Perfect Cadence",description:'The "Full Stop". Strongest resolution.',numerals:["V","I"],color:"green-500",emotion:"Conclusive"},{id:"plagal",name:"Plagal Cadence",description:'The "Amen". Softer, church-like resolution.',numerals:["IV","I"],color:"blue-500",emotion:"Peaceful"},{id:"half",name:"Half Cadence",description:'The "Comma". Leaves listeners wanting more.',numerals:["I","V"],color:"yellow-500",emotion:"Suspenseful"},{id:"deceptive",name:"Deceptive Cadence",description:'The "Surprise". Expecting I, getting vi.',numerals:["V","vi"],color:"purple-500",emotion:"Unexpected"}],hL=({preset:r,showAddButton:e=!0,compact:t=!1,onAddToTimeline:s})=>{const{selectedKey:a,currentSong:o,openTimeline:u}=En(),c=En(R=>R.addCustomSection),[f,d]=re.useState(!1),[m,y]=re.useState(null),[_,b]=re.useState(!1),N=V2(r.numerals,a),A=async()=>{if(f){F2(),d(!1),y(null);return}d(!0),y(0);try{await y4(r.numerals,a,o.tempo,r.beatsPerChord,R=>{y(R)})}finally{d(!1),y(null)}},k=async(R,D)=>{if(f)return;y(D);const F=r.beatsPerChord>=4?"1n":"2n";await xi(R.notes,F),setTimeout(()=>y(null),400)},T=()=>{c&&(c(r.sectionName,r.sectionType,N,{beatsPerChord:r.beatsPerChord,totalBars:r.totalBars}),u(),b(!0),setTimeout(()=>b(!1),1500),s?.())};return x.jsxs("div",{className:`
                p-2.5 rounded bg-bg-tertiary transition-all duration-300 overflow-hidden
                ${t?"text-xs":"text-sm"}
                ${_?"ring-2 ring-green-500 bg-green-500/10":""}
            `,children:[x.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[x.jsxs("div",{className:"min-w-0",children:[x.jsx("span",{className:"font-bold text-white",children:r.name}),r.artists&&x.jsx("span",{className:"block text-xs text-gray-500 truncate",children:r.artists})]}),e&&x.jsxs("button",{onClick:T,className:`
                            flex items-center gap-1 px-2 py-1 rounded text-xs font-medium shrink-0
                            transition-all duration-200
                            ${_?"bg-green-500 text-white":"bg-bg-elevated hover:bg-accent-primary/20 text-gray-400 hover:text-accent-primary"}
                        `,title:"Add to timeline",children:[x.jsx(bu,{size:12}),x.jsx("span",{className:"hidden sm:inline",children:_?"Added!":"Add"})]})]}),x.jsxs("div",{className:"grid gap-1.5",style:{gridTemplateColumns:"auto repeat(4, minmax(0, max-content))",justifyContent:"start"},children:[x.jsx("button",{onClick:A,className:`
                        flex items-center justify-center w-7 h-7 rounded-full shrink-0
                        transition-all duration-200
                        ${f?"bg-red-500 hover:bg-red-600 text-white":"bg-accent-primary/20 hover:bg-accent-primary/40 text-accent-primary"}
                    `,title:f?"Stop":"Play progression",children:f?x.jsx(X3,{size:12}):x.jsx(Gh,{size:12,className:"ml-0.5"})}),r.numerals.map((R,D)=>{const F=N[D],B=m===D,W=D<4?void 0:D%4+2;return x.jsx("button",{onClick:()=>k(F,D),disabled:f,className:`
                                text-xs px-2 py-1 rounded font-medium
                                transition-all duration-150
                                ${B?`bg-${r.color} text-white scale-110 shadow-lg shadow-${r.color}/30`:`bg-black/40 text-${r.color} hover:bg-black/60 hover:scale-105`}
                                ${f&&!B?"opacity-50":""}
                                disabled:cursor-not-allowed
                            `,style:{...B?{backgroundColor:`var(--color-${r.color})`}:{},...W?{gridColumn:W}:{}},title:`Play ${F.symbol}`,children:R},`${R}-${D}`)})]})]})},fL=({preset:r})=>{const{selectedKey:e,currentSong:t}=En(),[s,a]=re.useState(!1),[o,u]=re.useState(null),c=V2(r.numerals,e),f=async()=>{if(s){F2(),a(!1),u(null);return}a(!0),u(0);try{await y4(r.numerals,e,t.tempo,2,y=>{u(y)})}finally{a(!1),u(null)}},d=async(y,_)=>{s||(u(_),await xi(y.notes,"2n"),setTimeout(()=>u(null),400))},m=`text-${r.color.replace("-500","-400")}`;return x.jsxs("div",{className:`
                group p-3 rounded bg-bg-tertiary hover:bg-bg-tertiary/80 
                transition-all duration-200 border-l-2
            `,style:{borderColor:`var(--color-${r.color}, currentColor)`},children:[x.jsxs("div",{className:"flex justify-between items-center mb-1 gap-2",children:[x.jsx("span",{className:"font-bold text-white",children:r.name}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:f,className:`
                            w-6 h-6 rounded-full flex items-center justify-center
                            transition-all duration-200
                            ${s?"bg-red-500 text-white":"bg-white/10 hover:bg-white/20 text-white/70 hover:text-white"}
                        `,title:s?"Stop":"Play cadence",children:s?x.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"}):x.jsx(Gh,{size:10,className:"ml-0.5"})}),x.jsx("div",{className:"flex gap-0.5",children:r.numerals.map((y,_)=>{const b=c[_],N=o===_;return x.jsxs(Xn.Fragment,{children:[x.jsx("button",{onClick:()=>d(b,_),disabled:s,className:`
                                            text-xs px-1.5 py-0.5 rounded
                                            transition-all duration-150
                                            ${N?"bg-white text-black scale-110":`bg-black/30 ${m} hover:bg-black/50 hover:scale-105`}
                                        `,style:N?{backgroundColor:`var(--color-${r.color})`,color:"white"}:void 0,title:`Play ${b.symbol}`,children:y}),_<r.numerals.length-1&&x.jsx("span",{className:"text-gray-500 text-xs flex items-center",children:""})]},`${y}-${_}`)})})]})]}),x.jsx("p",{className:"text-gray-400 text-xs",children:r.description})]})},_x=({onClose:r})=>{const{selectedKey:e}=En();return x.jsxs(x.Fragment,{children:[x.jsxs("section",{className:"relative",children:[x.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-accent-primary/20 rounded-full blur-3xl pointer-events-none"}),x.jsx("div",{className:"absolute -bottom-5 -right-5 w-24 h-24 bg-purple-500/15 rounded-full blur-3xl pointer-events-none"}),x.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2 relative",children:[x.jsx(uT,{size:12,className:"fill-accent-primary"}),"Quick Start"]}),x.jsxs("div",{className:"relative bg-gradient-to-b from-bg-elevated/60 to-bg-elevated/40 rounded-xl p-5 border border-white/5 space-y-4",children:[x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:x.jsx(B3,{size:18,className:"text-accent-primary"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",x.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:x.jsx(Vh,{size:18,className:"text-purple-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[x.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate and change keys. Highlighted chords always sound good together."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:x.jsx(z3,{size:18,className:"text-emerald-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",x.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",x.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:x.jsx(pp,{size:18,className:"text-amber-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",x.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:x.jsx(d2,{size:18,className:"text-sky-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[x.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),x.jsxs("div",{className:"mt-5 p-4 rounded-xl bg-white/5 border border-white/10",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(q3,{size:14,className:"text-accent-primary shrink-0"}),x.jsx("strong",{className:"text-sm text-white",children:"Understanding the Wheel"})]}),x.jsxs("ul",{className:"space-y-1.5 text-xs text-gray-400 ml-5",children:[x.jsxs("li",{children:[" ",x.jsx("strong",{className:"text-gray-300",children:"Highlighted chords"})," = sound good together in your key"]}),x.jsxs("li",{children:[" ",x.jsx("strong",{className:"text-gray-300",children:"Inner ring"})," = Major chords (I, IV, V)"]}),x.jsxs("li",{children:[" ",x.jsx("strong",{className:"text-gray-300",children:"Middle ring"})," = Minor chords (ii, iii, vi)"]}),x.jsxs("li",{children:[" ",x.jsx("strong",{className:"text-gray-300",children:"Outer ring"})," = Diminished (vii)"]})]})]}),x.jsx("div",{className:"p-3 rounded-xl bg-accent-primary/5 border border-accent-primary/20",children:x.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[x.jsx(nd,{size:14,className:"text-accent-primary shrink-0"}),x.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[x.jsx("strong",{className:"text-accent-primary",children:"Tip:"})," Tap the",x.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 rounded-full text-text-muted border border-border-subtle/60",children:x.jsx(nd,{size:10})}),"button anytime to reopen this guide."]})]})})]})]}),x.jsxs("section",{children:[x.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[x.jsx(AT,{size:12}),"The Language of Music (Roman Numerals)"]}),x.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-4",children:[x.jsx("p",{className:"text-sm text-gray-300",children:'Musicians use roman numerals to talk about chords regardless of the specific key. This reveals the "DNA" of a song.'}),x.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:["I","ii","iii","IV","V","vi","vii"].map((t,s)=>x.jsxs("div",{className:`rounded p-2 flex flex-col items-center justify-between h-20 ${["I","IV","V"].includes(t)?"bg-accent-primary/20 border border-accent-primary/30":t==="vii"?"bg-red-500/10 border border-red-500/20":"bg-violet-500/15 border border-violet-500/25"}`,children:[x.jsx("span",{className:"font-bold text-white mb-1",children:t}),x.jsx("span",{className:"text-[10px] text-gray-400 leading-tight",children:s===0?"Tonic (Home)":s===3?"Subdom. (Away)":s===4?"Dominant (Tension)":s===5?"Rel. Minor":s===6?"Leading Tone":"Mediant"})]},t))}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-gray-400",children:[x.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[x.jsx("strong",{className:"text-accent-primary block mb-1",children:"Tonic (I, vi, iii)"}),"Stable, home base. Where songs usually start and end."]}),x.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[x.jsx("strong",{className:"text-accent-primary block mb-1",children:"Subdominant (IV, ii)"}),"Movement, drifting away from home. Creates interest."]}),x.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[x.jsx("strong",{className:"text-accent-primary block mb-1",children:"Dominant (V, vii)"}),"Tension, needing resolution. Pulls strongly back to I."]})]})]})]}),x.jsxs("section",{children:[x.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[x.jsx(jT,{size:12}),"Songwriting Toolkit"]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[x.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Emotional Cadences (How Phrases End)",x.jsx(ag,{size:12,className:"text-accent-primary/50"}),x.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e]})]}),x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:uL.map(t=>x.jsx(fL,{preset:t},t.id))})]}),x.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[x.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Famous Progressions",x.jsx(ag,{size:12,className:"text-accent-primary/50"}),x.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e,"  tap to play  click + to add"]})]}),x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:cL.map(t=>x.jsx(hL,{preset:t,onAddToTimeline:r},t.id))})]})]})]}),x.jsxs("section",{children:[x.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[x.jsx(rd,{size:12}),"Adding Spice (Advanced)"]}),x.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-6",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-white mb-2 text-sm flex items-center gap-2",children:"1. Modal Interchange (Borrowed Chords)"}),x.jsx("p",{className:"text-sm text-gray-400 mb-3",children:'Steal chords from the parallel minor key to add "cinematic" emotion.'}),x.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[x.jsx("strong",{className:"text-white block",children:"Minor IV (iv)"}),x.jsx("span",{className:"text-gray-500",children:'"The Beatles Cadence". Gives a nostalgic, bittersweet ending. (Fm in key of C).'})]}),x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[x.jsx("strong",{className:"text-white block",children:"Flat VI (VI)"}),x.jsx("span",{className:"text-gray-500",children:'Epic, heroic, fantasy feeling. "Lord of the Rings" sound. (Ab in key of C).'})]}),x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[x.jsx("strong",{className:"text-white block",children:"Picardy Third"}),x.jsx("span",{className:"text-gray-500",children:"Ending a sad, minor song on a happy Major I chord. Pure sunshine."})]})]})]}),x.jsx("div",{className:"w-full h-px bg-white/5"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"2. Secondary Dominants"}),x.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Make a minor chord Major to create a magnetic pull to another chord."}),x.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"In C Major, play ',x.jsx("strong",{className:"text-white",children:"E Major (III)"}),". It pulls hard to ",x.jsx("strong",{className:"text-white",children:"Am"}),'. (Radiohead - Creep)"']})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"3. Tritone Substitution"}),x.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Jazz trick: Replace the V chord with a dominant chord exactly halfway around the circle (a tritone away)."}),x.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"Instead of G7  C, try ',x.jsx("strong",{className:"text-white",children:"Db7  C"}),'. Smooth chromatic slide."']})]})]}),x.jsx("div",{className:"w-full h-px bg-white/5"}),x.jsxs("div",{children:[x.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["4. Secrets of the Pros",x.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-400 px-1.5 py-0.5 rounded uppercase font-bold",children:"Expert"})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[x.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"A"}),x.jsxs("div",{children:[x.jsx("strong",{className:"text-white text-sm block",children:"Pedal Point"}),x.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Keep the bass note the same while changing chords on top. Creates massive tension and "floaty" feelings. (e.g., C/C  F/C  G/C).'})]})]}),x.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[x.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"B"}),x.jsxs("div",{children:[x.jsx("strong",{className:"text-white text-sm block",children:"Line Clich"}),x.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'A single note moving down chromatically inside a static chord. think "Stairway to Heaven" or James Bond theme (Am  Am(maj7)  Am7  Am6).'})]})]}),x.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[x.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"C"}),x.jsxs("div",{children:[x.jsx("strong",{className:"text-white text-sm block",children:"Relative Major/Minor Modulation"}),x.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Switching focus between I and vi. Use the exact same notes, but center your melody around Am instead of C to instantly change the mood from happy to sad."})]})]})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"5. Building Better Chords (Extensions)"}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-center",children:[x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[x.jsx("strong",{className:"text-white block",children:"maj7"}),x.jsx("span",{className:"text-gray-500",children:"Dreamy, Jazz, Lo-fi"})]}),x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[x.jsx("strong",{className:"text-white block",children:"dom7"}),x.jsx("span",{className:"text-gray-500",children:"Blues, Funk, Tension"})]}),x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[x.jsx("strong",{className:"text-white block",children:"sus4"}),x.jsx("span",{className:"text-gray-500",children:"Open, airy, delayed"})]}),x.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[x.jsx("strong",{className:"text-white block",children:"add9"}),x.jsx("span",{className:"text-gray-500",children:"Rich, cinematic pop"})]})]})]})]})]})]})},dL=({isOpen:r,onClose:e,isEmbedded:t=!1})=>r?t?x.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col bg-[#1a1a24]",children:[x.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-[#22222e] shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"w-6 h-6 rounded bg-gradient-to-br from-accent-primary to-purple-600 flex items-center justify-center",children:x.jsx(rd,{size:12,className:"text-white"})}),x.jsx("h2",{className:"text-sm font-bold text-white",children:"Guide"})]}),x.jsx("button",{onClick:e,className:"p-1 hover:bg-bg-tertiary rounded transition-colors text-text-muted hover:text-white",children:x.jsx(sd,{size:16})})]}),x.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-6 sm:py-6 space-y-8",children:x.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:x.jsx(_x,{onClose:e})})})]}):x.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center pointer-events-none",style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[x.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm cursor-pointer pointer-events-auto",onClick:e}),x.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-4xl w-full max-h-full overflow-hidden flex flex-col pointer-events-auto",children:[x.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border-subtle bg-[#22222e]",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-accent-primary to-purple-600 flex items-center justify-center",children:x.jsx(rd,{size:16,className:"text-white"})}),x.jsx("h2",{className:"text-lg font-bold text-white",children:"Chord Wheel Guide"})]}),x.jsx("button",{onClick:e,className:"p-2 hover:bg-bg-tertiary rounded-lg transition-colors text-text-muted hover:text-white",children:x.jsx(sd,{size:20})})]}),x.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-8 sm:py-8 space-y-8",children:x.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:x.jsx(_x,{onClose:e})})})]})]}):null,Sx="chordwheel_onboarding_seen",pL=({onDismiss:r,onOpenHelp:e})=>{const[t,s]=re.useState(!1),[a,o]=re.useState(!1);re.useEffect(()=>{if(!localStorage.getItem(Sx)){const f=setTimeout(()=>s(!0),500);return()=>clearTimeout(f)}},[]);const u=()=>{o(!0),localStorage.setItem(Sx,"true"),setTimeout(()=>{s(!1),r?.()},300)};return t?x.jsxs("div",{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-300 ${a?"opacity-0":"opacity-100"}`,style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[x.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md cursor-pointer",onClick:u}),x.jsxs("div",{className:`relative max-w-md w-full bg-gradient-to-b from-[#1e1e2a] to-[#151520] border border-white/10 rounded-2xl shadow-2xl overflow-hidden transition-all duration-300 ${a?"scale-95 opacity-0":"scale-100 opacity-100"}`,children:[x.jsx("div",{className:"absolute -top-20 -left-20 w-40 h-40 bg-accent-primary/30 rounded-full blur-3xl pointer-events-none"}),x.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-purple-500/20 rounded-full blur-3xl pointer-events-none"}),x.jsxs("div",{className:"relative px-6 pt-6 pb-4 flex items-center justify-between border-b border-white/5",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-accent-primary to-purple-600 flex items-center justify-center shadow-lg shadow-accent-primary/25",children:x.jsx(ZT,{size:20,className:"text-white"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-lg font-bold text-white",children:"Welcome!"}),x.jsx("p",{className:"text-xs text-gray-400",children:"Quick start guide"})]})]}),x.jsx("button",{onClick:u,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",children:x.jsx(sd,{size:20})})]}),x.jsxs("div",{className:"relative px-6 py-5 space-y-4",children:[x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:x.jsx(B3,{size:18,className:"text-accent-primary"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",x.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:x.jsx(Vh,{size:18,className:"text-purple-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[x.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate and change keys. Highlighted chords always sound good together."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:x.jsx(z3,{size:18,className:"text-emerald-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",x.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",x.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:x.jsx(pp,{size:18,className:"text-amber-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",x.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),x.jsxs("div",{className:"flex items-start gap-4 group",children:[x.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:x.jsx(d2,{size:18,className:"text-sky-400"})}),x.jsxs("div",{className:"pt-0.5",children:[x.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),x.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[x.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),x.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:x.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[x.jsx(q3,{size:14,className:"text-accent-primary shrink-0"}),x.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[x.jsx("strong",{className:"text-gray-300",children:"Pro tip:"})," Tap the",x.jsx("button",{onClick:()=>{u(),setTimeout(()=>e?.(),350)},className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 hover:bg-bg-tertiary rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/60",title:"Open full guide",children:x.jsx(nd,{size:12})}),"button anytime for the full guide."]})]})})]}),x.jsx("div",{className:"relative px-6 pb-6",children:x.jsx("button",{onClick:u,className:"w-full py-3 px-4 rounded-xl bg-gradient-to-r from-accent-primary to-purple-600 text-white font-semibold text-sm hover:opacity-90 transition-opacity shadow-lg shadow-accent-primary/25 active:scale-[0.98]",children:"Got it, let's go!"})})]})]}):null};function mL(){const{currentSong:r,selectedKey:e,timelineVisible:t,toggleTimeline:s,selectedSectionId:a,selectedSlotId:o,clearSlot:u,clearTimeline:c,setTitle:f,loadSong:d,newSong:m,instrument:y,volume:_,isMuted:b,undo:N,redo:A,canUndo:k,canRedo:T,chordPanelVisible:R}=En();re.useEffect(()=>{g2(y)},[y]),re.useEffect(()=>{$3(_)},[_]),re.useEffect(()=>{Z3(b)},[b]);const[D,F]=re.useState(!1),[B,W]=re.useState(()=>{if(typeof window>"u")return 1;const Oe=window.innerWidth,xe=window.innerHeight;return Oe<768||xe<500&&xe<Oe?1.25:1}),[Y,O]=re.useState(50),[z,Q]=re.useState({x:0,y:0}),M=re.useRef(null),[V,H]=re.useState(()=>typeof window>"u"?200:Math.max(200,Math.floor(window.innerWidth*.33))),[X,he]=re.useState(()=>{if(typeof window>"u")return 500;const Oe=window.innerWidth,Pe=window.innerHeight-48-56-152-32,lt=Oe-380-40;return Math.max(300,Math.min(lt,Pe))}),[I,se]=re.useState(()=>typeof window<"u"?window.innerWidth<768||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[ie,de]=re.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1),pe=re.useRef(!1),G=re.useRef(!1),[j,P]=re.useState(!1),ee=re.useRef(null),[J,oe]=re.useState(!1),[fe,me]=re.useState(!1),Se=re.useRef(null),ye=re.useRef(!1);re.useEffect(()=>{if(!I)return;if(ie&&!ye.current)ye.current=!0,Se.current=En.getState().chordPanelVisible,P(!0),oe(!0),En.getState().chordPanelVisible||En.getState().toggleChordPanel();else if(!ie&&ye.current){ye.current=!1;const lt=En.getState().chordPanelVisible,Xe=Se.current;Xe!==null&&lt!==Xe&&En.getState().toggleChordPanel(),oe(!1),Se.current=null}const Oe=()=>{P(!0)},xe=()=>{ee.current&&clearTimeout(ee.current),ee.current=setTimeout(Oe,1e4)},Pe=lt=>{const Xe=lt.target,Mt=Xe.closest("[data-chord-details]"),pn=Xe.closest("[data-playback-controls]"),sn=Xe.closest("[data-mobile-timeline]"),hn=Xe.closest("header"),en=Xe.closest("[data-wheel-background]"),yn=Xe.closest("button"),Qt=Xe.tagName==="path"||Xe.tagName==="circle"||Xe.tagName==="text"||Xe.tagName==="polygon"||Xe.tagName==="g"&&Xe.style.cursor==="pointer"||Xe.closest('g[style*="cursor: pointer"]')||Xe.closest('g[class*="cursor-pointer"]'),xn=!ie&&En.getState().chordPanelVisible;en&&!Mt&&!pn&&!sn&&!hn&&!yn&&!Qt&&!xn&&(P(Sn=>!Sn),ee.current&&clearTimeout(ee.current),xe())};return document.addEventListener("touchstart",Pe),xe(),()=>{document.removeEventListener("touchstart",Pe),ee.current&&clearTimeout(ee.current)}},[I,ie]);const[Fe,Ye]=re.useState(!1),Je=re.useRef(null),ct=re.useCallback(()=>{!I||!ie||(Ye(!0),Je.current&&clearTimeout(Je.current),Je.current=setTimeout(()=>{Ye(!1)},3e3))},[I,ie]);re.useEffect(()=>()=>{Je.current&&clearTimeout(Je.current)},[]),re.useEffect(()=>{if(!I)return;const Oe=()=>{oe(!0)};return window.addEventListener("openMobileTimeline",Oe),()=>window.removeEventListener("openMobileTimeline",Oe)},[I]),re.useEffect(()=>{if(!I)return;const Oe=En.getState();J&&!Oe.timelineVisible?En.setState({timelineVisible:!0}):!J&&Oe.timelineVisible&&En.setState({timelineVisible:!1})},[I,J]),re.useEffect(()=>{const Oe=()=>{const xe=window.innerWidth,Pe=window.innerHeight,lt=xe<768||Pe<500&&Pe<xe,Xe=Pe<xe&&Pe<500;if(se(lt),de(Xe),lt&&Xe){const pn=Math.max(200,Math.floor(xe*.33));H(pn)}if(!lt){const pn=En.getState().timelineVisible?152:24,sn=Pe-48-56-pn-32,hn=xe-380-40;he(Math.max(300,Math.min(hn,sn)))}const Mt=En.getState();lt&&!G.current&&(Mt.timelineVisible&&Mt.toggleTimeline(),Mt.chordPanelVisible&&Mt.toggleChordPanel(),G.current=!0),!lt&&pe.current&&!Mt.chordPanelVisible&&(Mt.toggleChordPanel(),pe.current=!1)};return Oe(),window.addEventListener("resize",Oe),window.addEventListener("orientationchange",Oe),()=>{window.removeEventListener("resize",Oe),window.removeEventListener("orientationchange",Oe)}},[]),re.useEffect(()=>{if(I)return;const Oe=window.innerWidth,xe=window.innerHeight,Pe=t?152:24,lt=xe-48-56-Pe-32,Xe=Oe-380-40;he(Math.max(300,Math.min(Xe,lt)))},[t,I]);const $=re.useCallback((Oe,xe)=>{W(Oe),O(xe)},[]),Re=re.useCallback(()=>{const Oe=Math.min(2.5,B+.2);W(Oe),O(Oe>1.3?38:50)},[B]),pt=re.useCallback(()=>{const Oe=Math.max(.2,B-.2);W(Oe),O(Oe>1.3?38:50)},[B]),Ke=re.useCallback(Oe=>{Q(Oe)},[]),Le=re.useMemo(()=>I&&(ie||R)?90:0,[I,ie,R]),tt=I&&(ie||R);re.useEffect(()=>{if(I)if(tt)if(M.current||(M.current={zoom:B,origin:Y,pan:{...z}}),ie){const Oe=window.innerHeight,xe=1.65,Pe=Math.max(.9,Math.min(1.1,Oe/400)),lt=xe*Pe;W(lt),O(48),Q({x:-35,y:0})}else W(1.42),O(42),Q({x:-35,y:-30});else M.current&&(W(M.current.zoom),O(M.current.origin),Q(M.current.pan),M.current=null)},[tt,ie,I]);const[Ue,ot]=re.useState(!1),[it,Be]=re.useState(r.title),at=re.useMemo(()=>{const Oe=r.sections.reduce((Mt,pn)=>{const sn=pn.measures.reduce((hn,en)=>hn+en.beats.reduce((yn,Qt)=>yn+Qt.duration,0),0);return Mt+sn},0),xe=r.tempo/60,Pe=Oe/xe,lt=Math.floor(Pe/60),Xe=Math.floor(Pe%60);return`${lt}:${Xe.toString().padStart(2,"0")}`},[r.sections,r.tempo]),[nt,ut]=re.useState(!1);re.useEffect(()=>{const Oe=async()=>{try{m2(),await _u(),await Oc(),ut(!0)}catch(Pe){console.error("Audio initialization failed:",Pe)}},xe=async()=>{nt||(await Yp(),Oe())};return document.addEventListener("touchstart",xe,{once:!0}),document.addEventListener("click",xe,{once:!0}),()=>{document.removeEventListener("touchstart",xe),document.removeEventListener("click",xe)}},[nt]),re.useEffect(()=>{const Oe=xe=>{if((xe.key==="Delete"||xe.key==="Backspace")&&a&&o){if(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA")return;xe.preventDefault(),u(a,o)}};return window.addEventListener("keydown",Oe),()=>window.removeEventListener("keydown",Oe)},[a,o,u]),re.useEffect(()=>{const Oe=xe=>{const Pe=xe.target;Pe?.tagName==="INPUT"||Pe?.tagName==="TEXTAREA"||Pe?.isContentEditable||xe.metaKey&&xe.key.toLowerCase()==="z"&&(xe.preventDefault(),xe.shiftKey?T&&A():k&&N())};return window.addEventListener("keydown",Oe),()=>window.removeEventListener("keydown",Oe)},[N,A,k,T]);const gt=()=>{Be(r.title),ot(!0)},dt=()=>{f(it.trim()||"Untitled Song"),ot(!1)},[xt,ht]=re.useState(!1),[rn,Vt]=re.useState([]),bt=re.useRef(null);re.useEffect(()=>{Vt(Zf())},[]),re.useEffect(()=>{const Oe=xe=>{bt.current&&!bt.current.contains(xe.target)&&ht(!1)};return document.addEventListener("mousedown",Oe),()=>document.removeEventListener("mousedown",Oe)},[]);const jt=()=>{if(r.title==="Untitled Song"||!r.title.trim()){const Oe=prompt("Please name your song:",r.title);if(Oe===null)return;const xe=Oe.trim()||"Untitled Song";f(xe);const Pe={...r,title:xe};wx(Pe)}else wx(r);Vt(Zf()),ht(!1)},qt=Oe=>{d(Oe),ht(!1)},[yt,Ft]=re.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),vt=()=>{Ft({isOpen:!0,title:"New Song",message:"Start a new song? Unsaved changes will be lost.",confirmLabel:"Start New",isDestructive:!0,onConfirm:()=>{m(),ht(!1)}})},Dt=(Oe,xe,Pe)=>{Pe.stopPropagation(),Ft({isOpen:!0,title:"Delete Song",message:`Are you sure you want to delete "${xe}"? This cannot be undone.`,confirmLabel:"Delete",isDestructive:!0,onConfirm:()=>{sL(Oe),Vt(Zf())}})},dn=Oe=>{Oe.key==="Enter"?dt():Oe.key==="Escape"&&(Be(r.title),ot(!1))},St=152,mt=()=>{const Oe=new It,xe=Oe.internal.pageSize.getWidth(),Pe=20,lt=4,Mt=r.sections.reduce((wn,nn)=>{const tr=(nn.timeSignature||r.timeSignature)[0];return wn+nn.measures.length*tr},0)/r.tempo*60,pn=Math.floor(Mt/60),sn=Math.floor(Mt%60),hn=`${pn}:${sn.toString().padStart(2,"0")}`,en=r.sections.reduce((wn,nn)=>wn+nn.measures.length,0),yn=r.sections.length;Oe.setFontSize(22),Oe.setFont("helvetica","bold"),Oe.setTextColor(0,0,0),Oe.text(r.title,Pe,18),Oe.setDrawColor(0,0,0),Oe.setLineWidth(.5),Oe.line(Pe,22,xe-Pe,22),Oe.setFontSize(10),Oe.setFont("helvetica","normal");const Qt=[`Key: ${Ks(e)}`,`Tempo: ${r.tempo} BPM`,`Duration: ${hn}`,`${yn} sections`,`${en} bars`];Oe.text(Qt.join("      "),Pe,30);let xn=42;const Sn=new Set;if(r.sections.forEach(wn=>{xn>260&&(Oe.addPage(),xn=20),Oe.setFontSize(12),Oe.setFont("helvetica","bold"),Oe.setTextColor(0,0,0),Oe.text(`[${wn.name}]`,Pe,xn),xn+=8;const nn=wn.measures.map(mn=>{const tr=mn.beats.length;return mn.beats.forEach(Ne=>{if(Ne.chord){const Ie=Ne.chord.root,Yt={major:"maj",minor:"m",diminished:"dim",augmented:"aug",major7:"maj7",minor7:"m7",dominant7:"7",halfDiminished7:"m7b5",sus2:"sus2",sus4:"sus4"}[Ne.chord.quality]||Ne.chord.quality||"maj";Sn.add(`${Ie}|${Yt}`)}}),tr===1?mn.beats[0]?.chord?.symbol||"":tr===2?mn.beats.map(Ne=>Ne.chord?.symbol||"").join(" "):mn.beats.map(Ne=>Ne.chord?.symbol||"").join(" ")});if(Oe.setFontSize(11),Oe.setFont("helvetica","normal"),nn.length===0)Oe.text("(No chords)",Pe,xn),xn+=10;else for(let mn=0;mn<nn.length;mn+=lt){xn>275&&(Oe.addPage(),xn=20);const Ne=nn.slice(mn,mn+lt).join("  |  "),Ie=mn>0?"    ":"";Oe.text(Ie+Ne,Pe,xn),xn+=8}xn+=6}),Sn.size>0){const wn=Array.from(Sn),nn=245,mn=5,Ie=wn.length*(22+mn)>nn,rt=Ie?18:22,Yt=Ie?18:20,$n=Ie?22:25,an=Ie?155:170;let $t=0,nr=35;const Zn=Ie?Math.ceil(wn.length/2):wn.length;Oe.setPage(1),wn.forEach((Ir,ms)=>{const[ei,Ms]=Ir.split("|"),Us=nw(ei,Ms);if(!Us)return;Ie&&ms===Zn&&($t=1,nr=35);const Hs=$t*$n,qr=`${ei}${Ms==="maj"?"":Ms}`;Oe.setFontSize(Ie?6:7),Oe.setFont("helvetica","bold"),Oe.setTextColor(0,0,0),Oe.text(qr,an+Hs+Yt/2+2,nr,{align:"center"}),Rt(Oe,Us,an+Hs,nr+3,Ie),nr+=rt+mn})}const Ln=`${r.title.replace(/\s+/g,"-").toLowerCase()}.pdf`,qn=Oe.output("blob");if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const wn=URL.createObjectURL(qn);window.open(wn,"_blank"),setTimeout(()=>URL.revokeObjectURL(wn),1e4)}else rL.saveAs(qn,Ln)},Rt=(Oe,xe,Pe,lt,Xe=!1)=>{const{frets:Mt,barres:pn,baseFret:sn}=xe,hn=Xe?2.5:3,en=Xe?3:4,yn=4,Qt=6,xn=Xe?1:1.2,Sn=Array.from({length:Qt},(nn,mn)=>Pe+mn*hn),Ln=Array.from({length:yn+1},(nn,mn)=>lt+mn*en),qn=sn===1,vr=hn*(Qt-1),wn=en*yn;Oe.setDrawColor(0,0,0),qn?(Oe.setLineWidth(1),Oe.line(Pe,lt,Pe+vr,lt)):(Oe.setLineWidth(.3),Oe.line(Pe,lt,Pe+vr,lt),Oe.setFontSize(Xe?6:7),Oe.setFont("helvetica","bold"),Oe.text(sn.toString(),Pe-3,lt+en/2+1)),Oe.setLineWidth(.2),Ln.slice(1).forEach(nn=>{Oe.line(Pe,nn,Pe+vr,nn)}),Sn.forEach(nn=>{Oe.line(nn,lt,nn,lt+wn)}),pn.forEach(nn=>{const mn=Mt.map((rt,Yt)=>({fret:rt,idx:Yt})).filter(({fret:rt})=>rt===nn);if(mn.length<2)return;const tr=Math.min(...mn.map(rt=>rt.idx)),Ne=Math.max(...mn.map(rt=>rt.idx)),Ie=lt+(nn-.5)*en;Oe.setLineWidth(xn*1.4),Oe.line(Sn[tr],Ie,Sn[Ne],Ie),Oe.setLineWidth(.2)}),Mt.forEach((nn,mn)=>{const tr=Sn[mn];if(nn===-1){Oe.setFontSize(Xe?6:7),Oe.setFont("helvetica","bold"),Oe.text("x",tr,lt-1,{align:"center"});return}if(nn===0){Oe.setLineWidth(.3),Oe.circle(tr,lt-1.5,.8,"S");return}if(pn.includes(nn)){const rt=Mt.findIndex(Yt=>Yt===nn);if(mn!==rt)return}const Ie=lt+(nn-.5)*en;Oe.setFillColor(0,0,0),Oe.circle(tr,Ie,xn,"F")})};return x.jsxs("div",{className:"h-full w-full flex flex-col bg-bg-primary text-text-primary overflow-hidden",children:[x.jsxs("header",{className:`${I?"h-14":"h-12"} border-b border-border-subtle grid grid-cols-[1fr_auto_1fr] items-center ${I?"px-4":"px-3"} bg-bg-secondary shrink-0 z-20 transition-all duration-300 ease-out ${I&&!ie&&(j||R)||I&&ie&&!Fe?"opacity-0 -translate-y-full pointer-events-none absolute top-0 left-0 right-0":"relative"}`,children:[x.jsx("div",{className:"flex items-center gap-2 shrink-0",children:x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"relative",children:x.jsx(fj,{size:I?32:24})}),x.jsx("span",{className:`font-bold ${I?"text-xs":"text-sm"} tracking-tight hidden sm:block text-text-muted`,children:"Songwriter's Wheel"})]})}),x.jsx("div",{className:"flex items-center justify-center overflow-hidden",children:Ue?x.jsx("input",{type:"text",value:it,onChange:Oe=>Be(Oe.target.value),onBlur:dt,onKeyDown:dn,autoFocus:!0,className:`bg-bg-tertiary border border-border-medium rounded px-3 py-1 ${I?"text-xs":"text-sm"} font-medium text-text-primary focus:outline-none focus:border-accent-primary text-center ${I?"w-40":"w-56"} max-w-[70vw]`,maxLength:50}):x.jsx("span",{onDoubleClick:gt,className:`${I?"text-xs":"text-sm"} font-medium text-text-primary cursor-pointer hover:text-accent-primary transition-colors px-2 py-1 rounded text-center truncate max-w-[70vw]`,title:"Double-click to edit title",children:r.title})}),x.jsxs("div",{className:`flex items-center ${I?"gap-3":"gap-4"} shrink-0 justify-self-end`,children:[!I&&x.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-muted",children:[x.jsx(fT,{size:11,className:"shrink-0"}),x.jsx("span",{className:"leading-none",children:at})]}),x.jsxs("div",{className:`flex items-center gap-2 p-[10px] ${I?"text-xs":"text-[10px]"} text-text-muted`,children:[x.jsx("span",{className:"uppercase font-bold",children:"Key"}),x.jsx("span",{className:`font-bold text-accent-primary ${I?"text-base":"text-sm"} min-w-[1.5rem] text-center inline-block`,children:Ks(e)})]}),x.jsxs("div",{className:"relative",ref:bt,children:[x.jsxs("button",{onClick:()=>ht(!xt),className:`flex items-center gap-1.5 ${I?"text-xs px-2 py-1.5 min-w-[44px]":"text-[11px] px-2 py-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback`,children:[x.jsx(V5,{size:I?16:12}),x.jsx("span",{className:"hidden sm:inline",children:"Save"}),x.jsx(Hf,{size:I?12:10,className:`transition-transform ${xt?"rotate-180":""}`})]}),xt&&x.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-[#1a1a24] border border-border-medium rounded-lg shadow-2xl z-50 overflow-hidden",children:[x.jsxs("div",{className:"p-1.5 border-b border-border-subtle bg-[#22222e]",children:[x.jsxs("button",{onClick:jt,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[x.jsx(V5,{size:14,className:"text-accent-primary"}),"Save Current Song"]}),x.jsxs("button",{onClick:vt,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[x.jsx(yT,{size:14,className:"text-green-400"}),"New Song"]})]}),x.jsx("div",{className:"max-h-48 overflow-y-auto bg-[#1a1a24]",children:rn.length===0?x.jsx("p",{className:"px-3 py-4 text-[10px] text-gray-500 text-center",children:"No saved songs yet"}):x.jsxs("div",{className:"p-1.5",children:[x.jsx("p",{className:"px-2 py-1 text-[9px] text-gray-500 uppercase tracking-wider",children:"Saved Songs"}),rn.map(Oe=>x.jsxs("div",{onClick:()=>qt(Oe),className:`flex items-center justify-between px-3 py-2 text-xs rounded cursor-pointer transition-colors ${Oe.id===r.id?"bg-accent-primary/20 text-accent-primary":"text-gray-300 hover:bg-[#2a2a3a]"}`,children:[x.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[x.jsx(wT,{size:12,className:"shrink-0"}),x.jsx("span",{className:"truncate",children:Oe.title})]}),x.jsx("button",{onClick:xe=>Dt(Oe.id,Oe.title,xe),className:"p-1 hover:bg-red-500/20 rounded text-gray-500 hover:text-red-400 shrink-0",children:x.jsx(ig,{size:10})})]},Oe.id))]})})]})]}),x.jsxs("button",{onClick:mt,className:`flex items-center justify-center ${I?"text-xs px-3 py-1.5 min-w-[44px] min-h-[44px]":"text-[11px] px-2.5 py-1 gap-1.5"} bg-text-primary text-bg-primary rounded font-medium hover:bg-white transition-colors touch-feedback`,children:[x.jsx(d2,{size:I?16:12}),x.jsx("span",{className:"hidden sm:inline sm:ml-1.5",children:"Export"})]})]})]}),x.jsxs("div",{className:`flex-1 flex ${I?ie?"flex-row":"flex-col":"flex-row"} overflow-hidden min-h-0`,children:[x.jsxs("div",{"data-wheel-background":!0,className:`flex flex-col min-w-0 min-h-0 bg-gradient-to-b from-bg-primary to-bg-secondary/30 ${I&&ie?"shrink-0":"flex-1"} ${I?"overflow-hidden":""} relative`,style:I&&ie?{width:`${V}px`,minWidth:"200px",height:"100%"}:void 0,children:[x.jsxs("div",{className:`flex-1 flex flex-col ${I&&!ie?"justify-center":I&&ie?"justify-center items-center":"justify-center items-center pt-2"} ${I?"overflow-hidden":"overflow-visible"}`,children:[I?null:x.jsxs("div",{className:"flex justify-between px-2 shrink-0 w-full",children:[x.jsx("button",{onClick:()=>F(!0),className:"no-touch-enlarge w-8 h-8 flex items-center justify-center bg-bg-secondary/60 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/40",title:"Chord Wheel Guide",children:x.jsx(nd,{size:16})}),x.jsxs("div",{className:"flex items-center bg-bg-secondary/60 backdrop-blur-sm rounded-full px-0.5 border border-border-subtle/40",children:[x.jsx("button",{onClick:pt,disabled:B<=.2,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom out",children:x.jsx(sg,{size:8})}),x.jsxs("span",{className:"text-[7px] w-5 text-text-muted text-center font-medium",children:[Math.round(B*100),"%"]}),x.jsx("button",{onClick:Re,disabled:B>=2.5,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom in",children:x.jsx(bu,{size:8})})]})]}),x.jsx("div",{className:`flex-1 flex justify-center ${I?"items-center":""} ${I&&ie?"p-1 overflow-hidden":I&&!ie?"px-0 py-0":"p-2 overflow-visible"}`,onClick:ct,children:x.jsx("div",{className:"relative flex items-center justify-center",style:I&&ie?{width:"calc(100dvh - 60px)",height:"calc(100dvh - 60px)",maxWidth:"100%",maxHeight:"100%",aspectRatio:"1 / 1"}:I&&!ie?{width:j?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",height:j?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxWidth:j?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxHeight:j?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",aspectRatio:"1 / 1"}:{width:`${X}px`,height:`${X}px`,aspectRatio:"1 / 1"},children:x.jsx(lk,{zoomScale:B,zoomOriginY:Y,onZoomChange:$,panOffset:z,onPanChange:Ke,rotationOffset:Le,disableModeToggle:Le!==0})})})]}),I&&x.jsx("button",{onClick:()=>F(!0),onTouchEnd:Oe=>{Oe.preventDefault(),Oe.stopPropagation(),F(!0)},className:`absolute ${ie?"top-2 left-2 w-8 h-8":"top-3 left-3 w-11 h-11"} flex items-center justify-center bg-bg-secondary/90 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors shadow-lg border border-border-subtle z-50`,style:{touchAction:"auto",pointerEvents:"auto"},title:"Chord Wheel Guide",children:x.jsx(nd,{size:ie?14:20})}),I?null:t?x.jsx(x.Fragment,{children:x.jsxs("div",{className:"shrink-0 bg-bg-secondary border-t border-border-subtle overflow-hidden flex flex-col",style:{height:St},children:[x.jsxs("div",{className:"shrink-0 flex items-center justify-between px-2 py-1 border-b border-border-subtle/50 bg-bg-elevated/80",children:[x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsxs("button",{onClick:N,disabled:!k,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo (Z)",children:[x.jsx(mp,{size:12}),x.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Undo"})]}),x.jsxs("button",{onClick:A,disabled:!T,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo (Z)",children:[x.jsx(Vh,{size:12}),x.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Redo"})]})]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsxs("button",{onClick:()=>{Ft({isOpen:!0,title:"Clear Timeline",message:"Are you sure you want to clear all chords from the timeline? This action cannot be undone.",confirmLabel:"Clear",isDestructive:!0,onConfirm:c})},className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-red-400 rounded hover:bg-red-400/10 transition-colors flex items-center gap-0.5",title:"Clear all chords from timeline",children:[x.jsx(ig,{size:8}),x.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Clear"})]}),x.jsxs("button",{onClick:s,className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-text-primary rounded hover:bg-bg-tertiary transition-colors flex items-center gap-0.5",title:"Hide timeline",children:[x.jsx(Hf,{size:8}),x.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Hide"})]})]})]}),x.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:x.jsx(xm,{isOpen:!0,onToggle:s,hideCloseButton:!0,isCompact:!1,isLandscape:!1})})]})}):x.jsx("div",{className:"h-6 bg-bg-secondary border-t border-border-subtle flex items-center justify-center shrink-0",children:x.jsxs("button",{onClick:s,className:"px-3 h-full flex items-center gap-1 text-[8px] text-text-muted hover:text-text-primary hover:bg-bg-tertiary transition-colors",title:"Show timeline",children:[x.jsx(oT,{size:10}),x.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Timeline"})]})})]}),I&&ie?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:`flex h-full ${J?"flex-1":"justify-end"} shrink-0`,style:{minWidth:J?"100px":"28px",transition:"all 0.25s ease-out"},children:[x.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${J?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{J&&!R&&En.getState().toggleChordPanel(),oe(!J)},children:[x.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),x.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:J?"":"Timeline"})]}),J&&x.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle",children:x.jsx(xm,{isOpen:!0,onToggle:()=>oe(!1),hideCloseButton:!0,isCompact:R,isLandscape:!0})})]}),x.jsxs("div",{className:`flex h-full ${R?"flex-1":""} shrink-0`,style:{minWidth:R?"100px":"28px",transition:"all 0.25s ease-out"},children:[R&&x.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle","data-chord-details":!0,children:x.jsx(wm,{variant:J?"landscape-panel":"landscape-expanded"})}),x.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${R?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{R&&!J&&oe(!0),En.getState().toggleChordPanel()},children:[x.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),x.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:R?"":"Details"})]})]})]}):I?null:x.jsx(wm,{variant:"sidebar"})]}),I&&!ie&&x.jsxs("div",{className:"shrink-0 flex flex-col overflow-hidden",style:{maxHeight:"65vh"},children:[x.jsx(xm,{isOpen:J,onToggle:()=>oe(!J)}),x.jsx("div",{"data-chord-details":!0,className:"shrink-0 bg-bg-primary overflow-hidden",style:{maxHeight:J?"45vh":"55vh"},children:x.jsx(wm,{variant:"drawer",onScrollChange:me})})]}),!(I&&!ie&&(j||R&&!fe))&&x.jsx("div",{className:"shrink-0 z-30 relative",style:{paddingBottom:I?"env(safe-area-inset-bottom)":void 0},children:x.jsx(rw,{})}),x.jsx(iL,{isOpen:yt.isOpen,onClose:()=>Ft(Oe=>({...Oe,isOpen:!1})),onConfirm:yt.onConfirm,title:yt.title,message:yt.message,confirmLabel:yt.confirmLabel,isDestructive:yt.isDestructive}),x.jsx(hj,{}),x.jsx(dL,{isOpen:D,onClose:()=>F(!1)}),x.jsx(pL,{onOpenHelp:()=>F(!0)})]})}I_.createRoot(document.getElementById("root")).render(x.jsx(re.StrictMode,{children:x.jsx(mL,{})}));export{er as _,w1 as c,T_ as g};
