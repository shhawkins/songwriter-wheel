(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var _1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function k_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var um={exports:{}},Rf={};var K5;function j_(){if(K5)return Rf;K5=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:n,type:s,key:u,ref:a!==void 0?a:null,props:o}}return Rf.Fragment=e,Rf.jsx=t,Rf.jsxs=t,Rf}var J5;function E_(){return J5||(J5=1,um.exports=j_()),um.exports}var v=E_(),hm={exports:{}},ln={};var ev;function M_(){if(ev)return ln;ev=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=_&&P[_]||P["@@iterator"],typeof P=="function"?P:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,k={};function C(P,M,G){this.props=P,this.context=M,this.refs=k,this.updater=G||A}C.prototype.isReactComponent={},C.prototype.setState=function(P,M){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,M,"setState")},C.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function R(){}R.prototype=C.prototype;function D(P,M,G){this.props=P,this.context=M,this.refs=k,this.updater=G||A}var V=D.prototype=new R;V.constructor=D,N(V,C.prototype),V.isPureReactComponent=!0;var I=Array.isArray;function Y(){}var W={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function B(P,M,G){var J=G.ref;return{$$typeof:n,type:P,key:M,ref:J!==void 0?J:null,props:G}}function K(P,M){return B(P.type,M,P.props)}function j(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function F(P){var M={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(G){return M[G]})}var te=/\/+/g;function H(P,M){return typeof P=="object"&&P!==null&&P.key!=null?F(""+P.key):M.toString(36)}function ae(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Y,Y):(P.status="pending",P.then(function(M){P.status==="pending"&&(P.status="fulfilled",P.value=M)},function(M){P.status==="pending"&&(P.status="rejected",P.reason=M)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function $(P,M,G,J,Q){var oe=typeof P;(oe==="undefined"||oe==="boolean")&&(P=null);var fe=!1;if(P===null)fe=!0;else switch(oe){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(P.$$typeof){case n:case e:fe=!0;break;case p:return fe=P._init,$(fe(P._payload),M,G,J,Q)}}if(fe)return Q=Q(P),fe=J===""?"."+H(P,0):J,I(Q)?(G="",fe!=null&&(G=fe.replace(te,"$&/")+"/"),$(Q,M,G,"",function(we){return we})):Q!=null&&(j(Q)&&(Q=K(Q,G+(Q.key==null||P&&P.key===Q.key?"":(""+Q.key).replace(te,"$&/")+"/")+fe)),M.push(Q)),1;fe=0;var de=J===""?".":J+":";if(I(P))for(var xe=0;xe<P.length;xe++)J=P[xe],oe=de+H(J,xe),fe+=$(J,M,G,oe,Q);else if(xe=b(P),typeof xe=="function")for(P=xe.call(P),xe=0;!(J=P.next()).done;)J=J.value,oe=de+H(J,xe++),fe+=$(J,M,G,oe,Q);else if(oe==="object"){if(typeof P.then=="function")return $(ae(P),M,G,J,Q);throw M=String(P),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return fe}function re(P,M,G){if(P==null)return P;var J=[],Q=0;return $(P,J,"","",function(oe){return M.call(G,oe,Q++)}),J}function le(P){if(P._status===-1){var M=P._result;M=M(),M.then(function(G){(P._status===0||P._status===-1)&&(P._status=1,P._result=G)},function(G){(P._status===0||P._status===-1)&&(P._status=2,P._result=G)}),P._status===-1&&(P._status=0,P._result=M)}if(P._status===1)return P._result.default;throw P._result}var pe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},be={map:re,forEach:function(P,M,G){re(P,function(){M.apply(this,arguments)},G)},count:function(P){var M=0;return re(P,function(){M++}),M},toArray:function(P){return re(P,function(M){return M})||[]},only:function(P){if(!j(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return ln.Activity=y,ln.Children=be,ln.Component=C,ln.Fragment=t,ln.Profiler=a,ln.PureComponent=D,ln.StrictMode=s,ln.Suspense=f,ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,ln.__COMPILER_RUNTIME={__proto__:null,c:function(P){return W.H.useMemoCache(P)}},ln.cache=function(P){return function(){return P.apply(null,arguments)}},ln.cacheSignal=function(){return null},ln.cloneElement=function(P,M,G){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var J=N({},P.props),Q=P.key;if(M!=null)for(oe in M.key!==void 0&&(Q=""+M.key),M)!O.call(M,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&M.ref===void 0||(J[oe]=M[oe]);var oe=arguments.length-2;if(oe===1)J.children=G;else if(1<oe){for(var fe=Array(oe),de=0;de<oe;de++)fe[de]=arguments[de+2];J.children=fe}return B(P.type,Q,J)},ln.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:o,_context:P},P},ln.createElement=function(P,M,G){var J,Q={},oe=null;if(M!=null)for(J in M.key!==void 0&&(oe=""+M.key),M)O.call(M,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(Q[J]=M[J]);var fe=arguments.length-2;if(fe===1)Q.children=G;else if(1<fe){for(var de=Array(fe),xe=0;xe<fe;xe++)de[xe]=arguments[xe+2];Q.children=de}if(P&&P.defaultProps)for(J in fe=P.defaultProps,fe)Q[J]===void 0&&(Q[J]=fe[J]);return B(P,oe,Q)},ln.createRef=function(){return{current:null}},ln.forwardRef=function(P){return{$$typeof:c,render:P}},ln.isValidElement=j,ln.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:le}},ln.memo=function(P,M){return{$$typeof:d,type:P,compare:M===void 0?null:M}},ln.startTransition=function(P){var M=W.T,G={};W.T=G;try{var J=P(),Q=W.S;Q!==null&&Q(G,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(Y,pe)}catch(oe){pe(oe)}finally{M!==null&&G.types!==null&&(M.types=G.types),W.T=M}},ln.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},ln.use=function(P){return W.H.use(P)},ln.useActionState=function(P,M,G){return W.H.useActionState(P,M,G)},ln.useCallback=function(P,M){return W.H.useCallback(P,M)},ln.useContext=function(P){return W.H.useContext(P)},ln.useDebugValue=function(){},ln.useDeferredValue=function(P,M){return W.H.useDeferredValue(P,M)},ln.useEffect=function(P,M){return W.H.useEffect(P,M)},ln.useEffectEvent=function(P){return W.H.useEffectEvent(P)},ln.useId=function(){return W.H.useId()},ln.useImperativeHandle=function(P,M,G){return W.H.useImperativeHandle(P,M,G)},ln.useInsertionEffect=function(P,M){return W.H.useInsertionEffect(P,M)},ln.useLayoutEffect=function(P,M){return W.H.useLayoutEffect(P,M)},ln.useMemo=function(P,M){return W.H.useMemo(P,M)},ln.useOptimistic=function(P,M){return W.H.useOptimistic(P,M)},ln.useReducer=function(P,M,G){return W.H.useReducer(P,M,G)},ln.useRef=function(P){return W.H.useRef(P)},ln.useState=function(P){return W.H.useState(P)},ln.useSyncExternalStore=function(P,M,G){return W.H.useSyncExternalStore(P,M,G)},ln.useTransition=function(){return W.H.useTransition()},ln.version="19.2.0",ln}var tv;function Cg(){return tv||(tv=1,hm.exports=M_()),hm.exports}var ne=Cg();const Zn=k_(ne);var fm={exports:{}},If={},dm={exports:{}},pm={};var nv;function L_(){return nv||(nv=1,(function(n){function e($,re){var le=$.length;$.push(re);e:for(;0<le;){var pe=le-1>>>1,be=$[pe];if(0<a(be,re))$[pe]=re,$[le]=be,le=pe;else break e}}function t($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var re=$[0],le=$.pop();if(le!==re){$[0]=le;e:for(var pe=0,be=$.length,P=be>>>1;pe<P;){var M=2*(pe+1)-1,G=$[M],J=M+1,Q=$[J];if(0>a(G,le))J<be&&0>a(Q,G)?($[pe]=Q,$[J]=le,pe=J):($[pe]=G,$[M]=le,pe=M);else if(J<be&&0>a(Q,le))$[pe]=Q,$[J]=le,pe=J;else break e}}return re}function a($,re){var le=$.sortIndex-re.sortIndex;return le!==0?le:$.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();n.unstable_now=function(){return u.now()-c}}var f=[],d=[],p=1,y=null,_=3,b=!1,A=!1,N=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function V($){for(var re=t(d);re!==null;){if(re.callback===null)s(d);else if(re.startTime<=$)s(d),re.sortIndex=re.expirationTime,e(f,re);else break;re=t(d)}}function I($){if(N=!1,V($),!A)if(t(f)!==null)A=!0,Y||(Y=!0,F());else{var re=t(d);re!==null&&ae(I,re.startTime-$)}}var Y=!1,W=-1,O=5,B=-1;function K(){return k?!0:!(n.unstable_now()-B<O)}function j(){if(k=!1,Y){var $=n.unstable_now();B=$;var re=!0;try{e:{A=!1,N&&(N=!1,R(W),W=-1),b=!0;var le=_;try{t:{for(V($),y=t(f);y!==null&&!(y.expirationTime>$&&K());){var pe=y.callback;if(typeof pe=="function"){y.callback=null,_=y.priorityLevel;var be=pe(y.expirationTime<=$);if($=n.unstable_now(),typeof be=="function"){y.callback=be,V($),re=!0;break t}y===t(f)&&s(f),V($)}else s(f);y=t(f)}if(y!==null)re=!0;else{var P=t(d);P!==null&&ae(I,P.startTime-$),re=!1}}break e}finally{y=null,_=le,b=!1}re=void 0}}finally{re?F():Y=!1}}}var F;if(typeof D=="function")F=function(){D(j)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,H=te.port2;te.port1.onmessage=j,F=function(){H.postMessage(null)}}else F=function(){C(j,0)};function ae($,re){W=C(function(){$(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function($){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var le=_;_=re;try{return $()}finally{_=le}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function($,re){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var le=_;_=$;try{return re()}finally{_=le}},n.unstable_scheduleCallback=function($,re,le){var pe=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?pe+le:pe):le=pe,$){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=le+be,$={id:p++,callback:re,priorityLevel:$,startTime:le,expirationTime:be,sortIndex:-1},le>pe?($.sortIndex=le,e(d,$),t(f)===null&&$===t(d)&&(N?(R(W),W=-1):N=!0,ae(I,le-pe))):($.sortIndex=be,e(f,$),A||b||(A=!0,Y||(Y=!0,F()))),$},n.unstable_shouldYield=K,n.unstable_wrapCallback=function($){var re=_;return function(){var le=_;_=re;try{return $.apply(this,arguments)}finally{_=le}}}})(pm)),pm}var rv;function O_(){return rv||(rv=1,dm.exports=L_()),dm.exports}var mm={exports:{}},ni={};var sv;function D_(){if(sv)return ni;sv=1;var n=Cg();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:f,containerInfo:d,implementation:p}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ni.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ni.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,p)},ni.flushSync=function(f){var d=u.T,p=s.p;try{if(u.T=null,s.p=2,f)return f()}finally{u.T=d,s.p=p,s.d.f()}},ni.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(f,d))},ni.prefetchDNS=function(f){typeof f=="string"&&s.d.D(f)},ni.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin),_=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?s.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:b}):p==="script"&&s.d.X(f,{crossOrigin:y,integrity:_,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ni.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);s.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(f)},ni.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin);s.d.L(f,p,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ni.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);s.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(f)},ni.requestFormReset=function(f){s.d.r(f)},ni.unstable_batchedUpdates=function(f,d){return f(d)},ni.useFormState=function(f,d,p){return u.H.useFormState(f,d,p)},ni.useFormStatus=function(){return u.H.useHostTransitionStatus()},ni.version="19.2.0",ni}var iv;function Nx(){if(iv)return mm.exports;iv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),mm.exports=D_(),mm.exports}var av;function R_(){if(av)return If;av=1;var n=O_(),e=Cg(),t=Nx();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function u(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function c(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(s(188))}function d(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(s(188));return i!==r?null:r}for(var l=r,h=i;;){var g=l.return;if(g===null)break;var w=g.alternate;if(w===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===l)return f(g),r;if(w===h)return f(g),i;w=w.sibling}throw Error(s(188))}if(l.return!==h.return)l=g,h=w;else{for(var L=!1,ee=g.child;ee;){if(ee===l){L=!0,l=g,h=w;break}if(ee===h){L=!0,h=g,l=w;break}ee=ee.sibling}if(!L){for(ee=w.child;ee;){if(ee===l){L=!0,l=w,h=g;break}if(ee===h){L=!0,h=w,l=g;break}ee=ee.sibling}if(!L)throw Error(s(189))}}if(l.alternate!==h)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?r:i}function p(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=p(r),i!==null)return i;r=r.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var te=Symbol.for("react.client.reference");function H(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===te?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case C:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case Y:return"SuspenseList";case B:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case D:return r.displayName||"Context";case R:return(r._context.displayName||"Context")+".Consumer";case V:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case W:return i=r.displayName||null,i!==null?i:H(r.type)||"Memo";case O:i=r._payload,r=r._init;try{return H(r(i))}catch{}}return null}var ae=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},pe=[],be=-1;function P(r){return{current:r}}function M(r){0>be||(r.current=pe[be],pe[be]=null,be--)}function G(r,i){be++,pe[be]=r.current,r.current=i}var J=P(null),Q=P(null),oe=P(null),fe=P(null);function de(r,i){switch(G(oe,i),G(Q,r),G(J,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?w5(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=w5(i),r=_5(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}M(J),G(J,r)}function xe(){M(J),M(Q),M(oe)}function we(r){r.memoizedState!==null&&G(fe,r);var i=J.current,l=_5(i,r.type);i!==l&&(G(Q,r),G(J,l))}function Ve(r){Q.current===r&&(M(J),M(Q)),fe.current===r&&(M(fe),Mf._currentValue=le)}var Xe,Je;function Fe(r){if(Xe===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Xe=i&&i[1]||"",Je=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+r+Je}var z=!1;function ke(r,i){if(!r||z)return"";z=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(i){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(Be){var Re=Be}Reflect.construct(r,[],Qe)}else{try{Qe.call()}catch(Be){Re=Be}r.call(Qe.prototype)}}else{try{throw Error()}catch(Be){Re=Be}(Qe=r())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(Be){if(Be&&Re&&typeof Be.stack=="string")return[Be.stack,Re.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),L=w[0],ee=w[1];if(L&&ee){var me=L.split(`
`),De=ee.split(`
`);for(g=h=0;h<me.length&&!me[h].includes("DetermineComponentFrameRoot");)h++;for(;g<De.length&&!De[g].includes("DetermineComponentFrameRoot");)g++;if(h===me.length||g===De.length)for(h=me.length-1,g=De.length-1;1<=h&&0<=g&&me[h]!==De[g];)g--;for(;1<=h&&0<=g;h--,g--)if(me[h]!==De[g]){if(h!==1||g!==1)do if(h--,g--,0>g||me[h]!==De[g]){var He=`
`+me[h].replace(" at new "," at ");return r.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",r.displayName)),He}while(1<=h&&0<=g);break}}}finally{z=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Fe(l):""}function ct(r,i){switch(r.tag){case 26:case 27:case 5:return Fe(r.type);case 16:return Fe("Lazy");case 13:return r.child!==i&&i!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return ke(r.type,!1);case 11:return ke(r.type.render,!1);case 1:return ke(r.type,!0);case 31:return Fe("Activity");default:return""}}function Ue(r){try{var i="",l=null;do i+=ct(r,l),l=r,r=r.return;while(r);return i}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Me=Object.prototype.hasOwnProperty,it=n.unstable_scheduleCallback,Ye=n.unstable_cancelCallback,ut=n.unstable_shouldYield,at=n.unstable_requestPaint,Pe=n.unstable_now,nt=n.unstable_getCurrentPriorityLevel,tt=n.unstable_ImmediatePriority,ht=n.unstable_UserBlockingPriority,yt=n.unstable_NormalPriority,dt=n.unstable_LowPriority,xt=n.unstable_IdlePriority,ft=n.log,un=n.unstable_setDisableYieldValue,Yt=null,Nt=null;function St(r){if(typeof ft=="function"&&un(r),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(Yt,r)}catch{}}var Tt=Math.clz32?Math.clz32:Lt,gt=Math.log,Qt=Math.LN2;function Lt(r){return r>>>=0,r===0?32:31-(gt(r)/Qt|0)|0}var Rt=256,mn=262144,vt=4194304;function _e(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function rt(r,i,l){var h=r.pendingLanes;if(h===0)return 0;var g=0,w=r.suspendedLanes,L=r.pingedLanes;r=r.warmLanes;var ee=h&134217727;return ee!==0?(h=ee&~w,h!==0?g=_e(h):(L&=ee,L!==0?g=_e(L):l||(l=ee&~r,l!==0&&(g=_e(l))))):(ee=h&~w,ee!==0?g=_e(ee):L!==0?g=_e(L):l||(l=h&~r,l!==0&&(g=_e(l)))),g===0?0:i!==0&&i!==g&&(i&w)===0&&(w=g&-g,l=i&-i,w>=l||w===32&&(l&4194048)!==0)?i:g}function Ae(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function st(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pt(){var r=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),r}function At(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function ot(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Bt(r,i,l,h,g,w){var L=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var ee=r.entanglements,me=r.expirationTimes,De=r.hiddenUpdates;for(l=L&~l;0<l;){var He=31-Tt(l),Qe=1<<He;ee[He]=0,me[He]=-1;var Re=De[He];if(Re!==null)for(De[He]=null,He=0;He<Re.length;He++){var Be=Re[He];Be!==null&&(Be.lane&=-536870913)}l&=~Qe}h!==0&&bn(r,h,0),w!==0&&g===0&&r.tag!==0&&(r.suspendedLanes|=w&~(L&~i))}function bn(r,i,l){r.pendingLanes|=i,r.suspendedLanes&=~i;var h=31-Tt(i);r.entangledLanes|=i,r.entanglements[h]=r.entanglements[h]|1073741824|l&261930}function vn(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var h=31-Tt(l),g=1<<h;g&i|r[h]&i&&(r[h]|=i),l&=~g}}function xn(r,i){var l=i&-i;return l=(l&42)!==0?1:Ut(l),(l&(r.suspendedLanes|i))!==0?0:l}function Ut(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function hn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function fn(){var r=re.p;return r!==0?r:(r=window.event,r===void 0?32:G5(r.type))}function Mn(r,i){var l=re.p;try{return re.p=r,i()}finally{re.p=l}}var Vn=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Vn,Tn="__reactProps$"+Vn,mr="__reactContainer$"+Vn,yn="__reactEvents$"+Vn,sn="__reactListeners$"+Vn,Ne="__reactHandles$"+Vn,Ie="__reactResources$"+Vn,Ze="__reactMarker$"+Vn;function bt(r){delete r[Ln],delete r[Tn],delete r[yn],delete r[sn],delete r[Ne]}function Ht(r){var i=r[Ln];if(i)return i;for(var l=r.parentNode;l;){if(i=l[mr]||l[Ln]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=j5(r);r!==null;){if(l=r[Ln])return l;r=j5(r)}return i}r=l,l=r.parentNode}return null}function Vt(r){if(r=r[Ln]||r[mr]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Fn(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function Wn(r){var i=r[Ie];return i||(i=r[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function wn(r){r[Ze]=!0}var os=new Set,Rr={};function Jr(r,i){ls(r,i),ls(r+"Capture",i)}function ls(r,i){for(Rr[r]=i,r=0;r<i.length;r++)os.add(i[r])}var Us=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xs={},ci={};function xi(r){return Me.call(ci,r)?!0:Me.call(xs,r)?!1:Us.test(r)?ci[r]=!0:(xs[r]=!0,!1)}function Ir(r,i,l){if(xi(i))if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var h=i.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+l)}}function wi(r,i,l){if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+l)}}function _i(r,i,l,h){if(h===null)r.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(i,l,""+h)}}function Cn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function yo(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ui(r,i,l){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,w=h.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return g.call(this)},set:function(L){l=""+L,w.call(this,L)}}),Object.defineProperty(r,i,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(L){l=""+L},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function ha(r){if(!r._valueTracker){var i=yo(r)?"checked":"value";r._valueTracker=ui(r,i,""+r[i])}}function xo(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return r&&(h=yo(r)?r.checked?"true":"false":r.value),r=h,r!==l?(i.setValue(r),!0):!1}function cs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Vr=/[\n"\\]/g;function Cr(r){return r.replace(Vr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function wo(r,i,l,h,g,w,L,ee){r.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?r.type=L:r.removeAttribute("type"),i!=null?L==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Cn(i)):r.value!==""+Cn(i)&&(r.value=""+Cn(i)):L!=="submit"&&L!=="reset"||r.removeAttribute("value"),i!=null?Xo(r,L,Cn(i)):l!=null?Xo(r,L,Cn(l)):h!=null&&r.removeAttribute("value"),g==null&&w!=null&&(r.defaultChecked=!!w),g!=null&&(r.checked=g&&typeof g!="function"&&typeof g!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?r.name=""+Cn(ee):r.removeAttribute("name")}function Il(r,i,l,h,g,w,L,ee){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),i!=null||l!=null){if(!(w!=="submit"&&w!=="reset"||i!=null)){ha(r);return}l=l!=null?""+Cn(l):"",i=i!=null?""+Cn(i):l,ee||i===r.value||(r.value=i),r.defaultValue=i}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=ee?r.checked:!!h,r.defaultChecked=!!h,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(r.name=L),ha(r)}function Xo(r,i,l){i==="number"&&cs(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Hs(r,i,l,h){if(r=r.options,i){i={};for(var g=0;g<l.length;g++)i["$"+l[g]]=!0;for(l=0;l<r.length;l++)g=i.hasOwnProperty("$"+r[l].value),r[l].selected!==g&&(r[l].selected=g),g&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Cn(l),i=null,g=0;g<r.length;g++){if(r[g].value===l){r[g].selected=!0,h&&(r[g].defaultSelected=!0);return}i!==null||r[g].disabled||(i=r[g])}i!==null&&(i.selected=!0)}}function Oc(r,i,l){if(i!=null&&(i=""+Cn(i),i!==r.value&&(r.value=i),l==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=l!=null?""+Cn(l):""}function Dc(r,i,l,h){if(i==null){if(h!=null){if(l!=null)throw Error(s(92));if(ae(h)){if(1<h.length)throw Error(s(93));h=h[0]}l=h}l==null&&(l=""),i=l}l=Cn(i),r.defaultValue=l,h=r.textContent,h===l&&h!==""&&h!==null&&(r.value=h),ha(r)}function $i(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Zo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tu(r,i,l){var h=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":h?r.setProperty(i,l):typeof l!="number"||l===0||Zo.has(i)?i==="float"?r.cssFloat=l:r[i]=(""+l).trim():r[i]=l+"px"}function Cu(r,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||i!=null&&i.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var g in i)h=i[g],i.hasOwnProperty(g)&&l[g]!==h&&Tu(r,g,h)}else for(var w in i)i.hasOwnProperty(w)&&Tu(r,w,i[w])}function Rc(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ic=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ku=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(r){return ku.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Xi(){}var Oa=null;function Qo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _o=null,Gt=null;function ju(r){var i=Vt(r);if(i&&(r=i.stateNode)){var l=r[Tn]||null;e:switch(r=i.stateNode,i.type){case"input":if(wo(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Cr(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==r&&h.form===r.form){var g=h[Tn]||null;if(!g)throw Error(s(90));wo(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<l.length;i++)h=l[i],h.form===r.form&&xo(h)}break e;case"textarea":Oc(r,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Hs(r,!!l.multiple,i,!1)}}}var Vc=!1;function Eu(r,i,l){if(Vc)return r(i,l);Vc=!0;try{var h=r(i);return h}finally{if(Vc=!1,(_o!==null||Gt!==null)&&(e1(),_o&&(i=_o,r=Gt,Gt=_o=null,ju(i),r)))for(i=0;i<r.length;i++)ju(r[i])}}function hi(r,i){var l=r.stateNode;if(l===null)return null;var h=l[Tn]||null;if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fc=!1;if(ws)try{var Ko={};Object.defineProperty(Ko,"passive",{get:function(){Fc=!0}}),window.addEventListener("test",Ko,Ko),window.removeEventListener("test",Ko,Ko)}catch{Fc=!1}var fi=null,Jo=null,fa=null;function Mu(){if(fa)return fa;var r,i=Jo,l=i.length,h,g="value"in fi?fi.value:fi.textContent,w=g.length;for(r=0;r<l&&i[r]===g[r];r++);var L=l-r;for(h=1;h<=L&&i[l-h]===g[w-h];h++);return fa=g.slice(r,1<h?1-h:void 0)}function Si(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Vl(){return!0}function Fl(){return!1}function us(r){function i(l,h,g,w,L){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=w,this.target=L,this.currentTarget=null;for(var ee in r)r.hasOwnProperty(ee)&&(l=r[ee],this[ee]=l?l(w):w[ee]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Vl:Fl,this.isPropagationStopped=Fl,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Vl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Vl)},persist:function(){},isPersistent:Vl}),i}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=us(da),Da=y({},da,{view:0,detail:0}),Bl=us(Da),el,Ra,Ia,tl=y({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zt,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ia&&(Ia&&r.type==="mousemove"?(el=r.screenX-Ia.screenX,Ra=r.screenY-Ia.screenY):Ra=el=0,Ia=r),el)},movementY:function(r){return"movementY"in r?r.movementY:Ra}}),Bc=us(tl),Va=y({},tl,{dataTransfer:0}),Fa=us(Va),Lu=y({},Da,{relatedTarget:0}),Ba=us(Lu),Ou=y({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),S=us(Ou),q=y({},da,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),he=us(q),ge=y({},da,{data:0}),Te=us(ge),Ge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},et={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ot(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=kt[r])?!!i[r]:!1}function Zt(){return Ot}var an=y({},Da,{key:function(r){if(r.key){var i=Ge[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Si(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?et[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zt,charCode:function(r){return r.type==="keypress"?Si(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Si(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),On=us(an),vr=y({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fr=us(vr),tr=y({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zt}),es=us(tr),Hr=y({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),_s=us(Hr),Pa=y({},tl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Zi=us(Pa),za=y({},da,{newState:0,oldState:0}),Pc=us(za),Pl=[9,13,27,32],pa=ws&&"CompositionEvent"in window,Qi=null;ws&&"documentMode"in document&&(Qi=document.documentMode);var nl=ws&&"TextEvent"in window&&!Qi,qa=ws&&(!pa||Qi&&8<Qi&&11>=Qi),hs=" ",So=!1;function No(r,i){switch(r){case"keyup":return Pl.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ma=!1;function Gs(r,i){switch(r){case"compositionend":return zl(i);case"keypress":return i.which!==32?null:(So=!0,hs);case"textInput":return r=i.data,r===hs&&So?null:r;default:return null}}function Ua(r,i){if(ma)return r==="compositionend"||!pa&&No(r,i)?(r=Mu(),fa=Jo=fi=null,ma=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return qa&&i.locale!=="ko"?null:i.data;default:return null}}var ql={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!ql[r.type]:i==="textarea"}function di(r,i,l,h){_o?Gt?Gt.push(h):Gt=[h]:_o=h,i=o1(i,"onChange"),0<i.length&&(l=new Ni("onChange","change",null,l,h),r.push({event:l,listeners:i}))}var Ki=null,Ha=null;function qc(r){m5(r,0)}function Ji(r){var i=Fn(r);if(xo(i))return r}function Ao(r,i){if(r==="change")return i}var ei=!1;if(ws){var Ws;if(ws){var ga="oninput"in document;if(!ga){var ba=document.createElement("div");ba.setAttribute("oninput","return;"),ga=typeof ba.oninput=="function"}Ws=ga}else Ws=!1;ei=Ws&&(!document.documentMode||9<document.documentMode)}function Ga(){Ki&&(Ki.detachEvent("onpropertychange",Ul),Ha=Ki=null)}function Ul(r){if(r.propertyName==="value"&&Ji(Ha)){var i=[];di(i,Ha,r,Qo(r)),Eu(qc,i)}}function Hl(r,i,l){r==="focusin"?(Ga(),Ki=i,Ha=l,Ki.attachEvent("onpropertychange",Ul)):r==="focusout"&&Ga()}function Br(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ji(Ha)}function Du(r,i){if(r==="click")return Ji(i)}function va(r,i){if(r==="input"||r==="change")return Ji(i)}function ya(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Ss=typeof Object.is=="function"?Object.is:ya;function Wa(r,i){if(Ss(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!Me.call(i,g)||!Ss(r[g],i[g]))return!1}return!0}function Gl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Wl(r,i){var l=Gl(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=i&&h>=i)return{node:l,offset:i-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Gl(l)}}function Ya(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Ya(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function $a(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=cs(r.document);i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=cs(r.document)}return i}function xa(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var rl=ws&&"documentMode"in document&&11>=document.documentMode,pi=null,Xa=null,Ls=null,Ai=!1;function qn(r,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ai||pi==null||pi!==cs(h)||(h=pi,"selectionStart"in h&&xa(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ls&&Wa(Ls,h)||(Ls=h,h=o1(Xa,"onSelect"),0<h.length&&(i=new Ni("onSelect","select",null,i,l),r.push({event:i,listeners:h}),i.target=pi)))}function Dn(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var nr={animationend:Dn("Animation","AnimationEnd"),animationiteration:Dn("Animation","AnimationIteration"),animationstart:Dn("Animation","AnimationStart"),transitionrun:Dn("Transition","TransitionRun"),transitionstart:Dn("Transition","TransitionStart"),transitioncancel:Dn("Transition","TransitionCancel"),transitionend:Dn("Transition","TransitionEnd")},Pr={},wa={};ws&&(wa=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function ea(r){if(Pr[r])return Pr[r];if(!nr[r])return r;var i=nr[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in wa)return Pr[r]=i[l];return r}var sl=ea("animationend"),Uc=ea("animationiteration"),Jh=ea("animationstart"),Ed=ea("transitionrun"),Md=ea("transitionstart"),Ld=ea("transitioncancel"),ef=ea("transitionend"),tf=new Map,il="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");il.push("scrollEnd");function Ti(r,i){tf.set(r,i),Jr(i,[r])}var Hc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},mi=[],al=0,Ru=0;function Gc(){for(var r=al,i=Ru=al=0;i<r;){var l=mi[i];mi[i++]=null;var h=mi[i];mi[i++]=null;var g=mi[i];mi[i++]=null;var w=mi[i];if(mi[i++]=null,h!==null&&g!==null){var L=h.pending;L===null?g.next=g:(g.next=L.next,L.next=g),h.pending=g}w!==0&&Yc(l,g,w)}}function Wc(r,i,l,h){mi[al++]=r,mi[al++]=i,mi[al++]=l,mi[al++]=h,Ru|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function Iu(r,i,l,h){return Wc(r,i,l,h),Os(r)}function Za(r,i){return Wc(r,null,null,i),Os(r)}function Yc(r,i,l){r.lanes|=l;var h=r.alternate;h!==null&&(h.lanes|=l);for(var g=!1,w=r.return;w!==null;)w.childLanes|=l,h=w.alternate,h!==null&&(h.childLanes|=l),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(g=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,g&&i!==null&&(g=31-Tt(l),r=w.hiddenUpdates,h=r[g],h===null?r[g]=[i]:h.push(i),i.lane=l|536870912),w):null}function Os(r){if(50<Nf)throw Nf=0,D0=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Ns={};function Vu(r,i,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(r,i,l,h){return new Vu(r,i,l,h)}function Fu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ci(r,i){var l=r.alternate;return l===null?(l=Ds(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function $c(r,i){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,i=l.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Yl(r,i,l,h,g,w){var L=0;if(h=r,typeof r=="function")Fu(r)&&(L=1);else if(typeof r=="string")L=g_(r,l,J.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case B:return r=Ds(31,l,i,g),r.elementType=B,r.lanes=w,r;case N:return To(l.children,g,w,i);case k:L=8,g|=24;break;case C:return r=Ds(12,l,i,g|2),r.elementType=C,r.lanes=w,r;case I:return r=Ds(13,l,i,g),r.elementType=I,r.lanes=w,r;case Y:return r=Ds(19,l,i,g),r.elementType=Y,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case D:L=10;break e;case R:L=9;break e;case V:L=11;break e;case W:L=14;break e;case O:L=16,h=null;break e}L=29,l=Error(s(130,r===null?"null":typeof r,"")),h=null}return i=Ds(L,l,i,g),i.elementType=r,i.type=h,i.lanes=w,i}function To(r,i,l,h){return r=Ds(7,r,h,i),r.lanes=l,r}function Xc(r,i,l){return r=Ds(6,r,null,i),r.lanes=l,r}function Bu(r){var i=Ds(18,null,null,0);return i.stateNode=r,i}function $l(r,i,l){return i=Ds(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Pu=new WeakMap;function ki(r,i){if(typeof r=="object"&&r!==null){var l=Pu.get(r);return l!==void 0?l:(i={value:r,source:i,stack:Ue(i)},Pu.set(r,i),i)}return{value:r,source:i,stack:Ue(i)}}var Xl=[],ol=0,zu=null,Zc=0,ji=[],Ei=0,Co=null,Mi=1,Li="";function gi(r,i){Xl[ol++]=Zc,Xl[ol++]=zu,zu=r,Zc=i}function Od(r,i,l){ji[Ei++]=Mi,ji[Ei++]=Li,ji[Ei++]=Co,Co=r;var h=Mi;r=Li;var g=32-Tt(h)-1;h&=~(1<<g),l+=1;var w=32-Tt(i)+g;if(30<w){var L=g-g%5;w=(h&(1<<L)-1).toString(32),h>>=L,g-=L,Mi=1<<32-Tt(i)+g|l<<g|h,Li=w+r}else Mi=1<<w|l<<g|h,Li=r}function nf(r){r.return!==null&&(gi(r,1),Od(r,1,0))}function qu(r){for(;r===zu;)zu=Xl[--ol],Xl[ol]=null,Zc=Xl[--ol],Xl[ol]=null;for(;r===Co;)Co=ji[--Ei],ji[Ei]=null,Li=ji[--Ei],ji[Ei]=null,Mi=ji[--Ei],ji[Ei]=null}function Dd(r,i){ji[Ei++]=Mi,ji[Ei++]=Li,ji[Ei++]=Co,Mi=i.id,Li=i.overflow,Co=r}var As=null,ur=null,Sn=!1,Ys=null,kr=!1,ta=Error(s(519));function ko(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zl(ki(i,r)),ta}function rf(r){var i=r.stateNode,l=r.type,h=r.memoizedProps;switch(i[Ln]=r,i[Tn]=h,l){case"dialog":An("cancel",i),An("close",i);break;case"iframe":case"object":case"embed":An("load",i);break;case"video":case"audio":for(l=0;l<Tf.length;l++)An(Tf[l],i);break;case"source":An("error",i);break;case"img":case"image":case"link":An("error",i),An("load",i);break;case"details":An("toggle",i);break;case"input":An("invalid",i),Il(i,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":An("invalid",i);break;case"textarea":An("invalid",i),Dc(i,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||h.suppressHydrationWarning===!0||y5(i.textContent,l)?(h.popover!=null&&(An("beforetoggle",i),An("toggle",i)),h.onScroll!=null&&An("scroll",i),h.onScrollEnd!=null&&An("scrollend",i),h.onClick!=null&&(i.onclick=Xi),i=!0):i=!1,i||ko(r,!0)}function Qa(r){for(As=r.return;As;)switch(As.tag){case 5:case 31:case 13:kr=!1;return;case 27:case 3:kr=!0;return;default:As=As.return}}function Ts(r){if(r!==As)return!1;if(!Sn)return Qa(r),Sn=!0,!1;var i=r.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||X0(r.type,r.memoizedProps)),l=!l),l&&ur&&ko(r),Qa(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ur=k5(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));ur=k5(r)}else i===27?(i=ur,uc(r.type)?(r=em,em=null,ur=r):ur=i):ur=As?Aa(r.stateNode.nextSibling):null;return!0}function ll(){ur=As=null,Sn=!1}function sf(){var r=Ys;return r!==null&&(Fi===null?Fi=r:Fi.push.apply(Fi,r),Ys=null),r}function Zl(r){Ys===null?Ys=[r]:Ys.push(r)}var Uu=P(null),jo=null,_a=null;function Eo(r,i,l){G(Uu,i._currentValue),i._currentValue=l}function Oi(r){r._currentValue=Uu.current,M(Uu)}function Ql(r,i,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===l)break;r=r.return}}function cl(r,i,l,h){var g=r.child;for(g!==null&&(g.return=r);g!==null;){var w=g.dependencies;if(w!==null){var L=g.child;w=w.firstContext;e:for(;w!==null;){var ee=w;w=g;for(var me=0;me<i.length;me++)if(ee.context===i[me]){w.lanes|=l,ee=w.alternate,ee!==null&&(ee.lanes|=l),Ql(w.return,l,r),h||(L=null);break e}w=ee.next}}else if(g.tag===18){if(L=g.return,L===null)throw Error(s(341));L.lanes|=l,w=L.alternate,w!==null&&(w.lanes|=l),Ql(L,l,r),L=null}else L=g.child;if(L!==null)L.return=g;else for(L=g;L!==null;){if(L===r){L=null;break}if(g=L.sibling,g!==null){g.return=L.return,L=g;break}L=L.return}g=L}}function Mo(r,i,l,h){r=null;for(var g=i,w=!1;g!==null;){if(!w){if((g.flags&524288)!==0)w=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var L=g.alternate;if(L===null)throw Error(s(387));if(L=L.memoizedProps,L!==null){var ee=g.type;Ss(g.pendingProps.value,L.value)||(r!==null?r.push(ee):r=[ee])}}else if(g===fe.current){if(L=g.alternate,L===null)throw Error(s(387));L.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(r!==null?r.push(Mf):r=[Mf])}g=g.return}r!==null&&cl(i,r,l,h),i.flags|=262144}function Hu(r){for(r=r.firstContext;r!==null;){if(!Ss(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Lo(r){jo=r,_a=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Cs(r){return Rd(jo,r)}function Gu(r,i){return jo===null&&Lo(r),Rd(r,i)}function Rd(r,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},_a===null){if(r===null)throw Error(s(308));_a=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else _a=_a.next=i;return l}var Jp=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(l,h){r.push(h)}};this.abort=function(){i.aborted=!0,r.forEach(function(l){return l()})}},e0=n.unstable_scheduleCallback,t0=n.unstable_NormalPriority,zr={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kl(){return{controller:new Jp,data:new Map,refCount:0}}function Qc(r){r.refCount--,r.refCount===0&&e0(t0,function(){r.controller.abort()})}var Kc=null,Wu=0,m=0,x=null;function T(r,i){if(Kc===null){var l=Kc=[];Wu=0,m=P0(),x={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Wu++,i.then(E,E),i}function E(){if(--Wu===0&&Kc!==null){x!==null&&(x.status="fulfilled");var r=Kc;Kc=null,m=0,x=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function U(r,i){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return r.then(function(){h.status="fulfilled",h.value=i;for(var g=0;g<l.length;g++)(0,l[g])(i)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var X=$.S;$.S=function(r,i){Ub=Pe(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&T(r,i),X!==null&&X(r,i)};var Z=P(null);function se(){var r=Z.current;return r!==null?r:fr.pooledCache}function ie(r,i){i===null?G(Z,Z.current):G(Z,i.pool)}function ue(){var r=se();return r===null?null:{parent:zr._currentValue,pool:r}}var ve=Error(s(460)),Le=Error(s(474)),ce=Error(s(542)),Se={then:function(){}};function je(r){return r=r.status,r==="fulfilled"||r==="rejected"}function qe(r,i,l){switch(l=r[l],l===void 0?r.push(i):l!==i&&(i.then(Xi,Xi),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,lt(r),r;default:if(typeof i.status=="string")i.then(Xi,Xi);else{if(r=fr,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(h){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=h}},function(h){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=h}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,lt(r),r}throw ze=i,ve}}function Ee(r){try{var i=r._init;return i(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ze=l,ve):l}}var ze=null;function We(){if(ze===null)throw Error(s(459));var r=ze;return ze=null,r}function lt(r){if(r===ve||r===ce)throw Error(s(483))}var Ke=null,Et=0;function wt(r){var i=Et;return Et+=1,Ke===null&&(Ke=[]),qe(Ke,r,i)}function Jt(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function Ct(r,i){throw i.$$typeof===_?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function _n(r){function i(Ce,ye){if(r){var Oe=Ce.deletions;Oe===null?(Ce.deletions=[ye],Ce.flags|=16):Oe.push(ye)}}function l(Ce,ye){if(!r)return null;for(;ye!==null;)i(Ce,ye),ye=ye.sibling;return null}function h(Ce){for(var ye=new Map;Ce!==null;)Ce.key!==null?ye.set(Ce.key,Ce):ye.set(Ce.index,Ce),Ce=Ce.sibling;return ye}function g(Ce,ye){return Ce=Ci(Ce,ye),Ce.index=0,Ce.sibling=null,Ce}function w(Ce,ye,Oe){return Ce.index=Oe,r?(Oe=Ce.alternate,Oe!==null?(Oe=Oe.index,Oe<ye?(Ce.flags|=67108866,ye):Oe):(Ce.flags|=67108866,ye)):(Ce.flags|=1048576,ye)}function L(Ce){return r&&Ce.alternate===null&&(Ce.flags|=67108866),Ce}function ee(Ce,ye,Oe,$e){return ye===null||ye.tag!==6?(ye=Xc(Oe,Ce.mode,$e),ye.return=Ce,ye):(ye=g(ye,Oe),ye.return=Ce,ye)}function me(Ce,ye,Oe,$e){var zt=Oe.type;return zt===N?He(Ce,ye,Oe.props.children,$e,Oe.key):ye!==null&&(ye.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===O&&Ee(zt)===ye.type)?(ye=g(ye,Oe.props),Jt(ye,Oe),ye.return=Ce,ye):(ye=Yl(Oe.type,Oe.key,Oe.props,null,Ce.mode,$e),Jt(ye,Oe),ye.return=Ce,ye)}function De(Ce,ye,Oe,$e){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Oe.containerInfo||ye.stateNode.implementation!==Oe.implementation?(ye=$l(Oe,Ce.mode,$e),ye.return=Ce,ye):(ye=g(ye,Oe.children||[]),ye.return=Ce,ye)}function He(Ce,ye,Oe,$e,zt){return ye===null||ye.tag!==7?(ye=To(Oe,Ce.mode,$e,zt),ye.return=Ce,ye):(ye=g(ye,Oe),ye.return=Ce,ye)}function Qe(Ce,ye,Oe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Xc(""+ye,Ce.mode,Oe),ye.return=Ce,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case b:return Oe=Yl(ye.type,ye.key,ye.props,null,Ce.mode,Oe),Jt(Oe,ye),Oe.return=Ce,Oe;case A:return ye=$l(ye,Ce.mode,Oe),ye.return=Ce,ye;case O:return ye=Ee(ye),Qe(Ce,ye,Oe)}if(ae(ye)||F(ye))return ye=To(ye,Ce.mode,Oe,null),ye.return=Ce,ye;if(typeof ye.then=="function")return Qe(Ce,wt(ye),Oe);if(ye.$$typeof===D)return Qe(Ce,Gu(Ce,ye),Oe);Ct(Ce,ye)}return null}function Re(Ce,ye,Oe,$e){var zt=ye!==null?ye.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return zt!==null?null:ee(Ce,ye,""+Oe,$e);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case b:return Oe.key===zt?me(Ce,ye,Oe,$e):null;case A:return Oe.key===zt?De(Ce,ye,Oe,$e):null;case O:return Oe=Ee(Oe),Re(Ce,ye,Oe,$e)}if(ae(Oe)||F(Oe))return zt!==null?null:He(Ce,ye,Oe,$e,null);if(typeof Oe.then=="function")return Re(Ce,ye,wt(Oe),$e);if(Oe.$$typeof===D)return Re(Ce,ye,Gu(Ce,Oe),$e);Ct(Ce,Oe)}return null}function Be(Ce,ye,Oe,$e,zt){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Ce=Ce.get(Oe)||null,ee(ye,Ce,""+$e,zt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case b:return Ce=Ce.get($e.key===null?Oe:$e.key)||null,me(ye,Ce,$e,zt);case A:return Ce=Ce.get($e.key===null?Oe:$e.key)||null,De(ye,Ce,$e,zt);case O:return $e=Ee($e),Be(Ce,ye,Oe,$e,zt)}if(ae($e)||F($e))return Ce=Ce.get(Oe)||null,He(ye,Ce,$e,zt,null);if(typeof $e.then=="function")return Be(Ce,ye,Oe,wt($e),zt);if($e.$$typeof===D)return Be(Ce,ye,Oe,Gu(ye,$e),zt);Ct(ye,$e)}return null}function jt(Ce,ye,Oe,$e){for(var zt=null,Hn=null,Dt=ye,pn=ye=0,jn=null;Dt!==null&&pn<Oe.length;pn++){Dt.index>pn?(jn=Dt,Dt=null):jn=Dt.sibling;var Gn=Re(Ce,Dt,Oe[pn],$e);if(Gn===null){Dt===null&&(Dt=jn);break}r&&Dt&&Gn.alternate===null&&i(Ce,Dt),ye=w(Gn,ye,pn),Hn===null?zt=Gn:Hn.sibling=Gn,Hn=Gn,Dt=jn}if(pn===Oe.length)return l(Ce,Dt),Sn&&gi(Ce,pn),zt;if(Dt===null){for(;pn<Oe.length;pn++)Dt=Qe(Ce,Oe[pn],$e),Dt!==null&&(ye=w(Dt,ye,pn),Hn===null?zt=Dt:Hn.sibling=Dt,Hn=Dt);return Sn&&gi(Ce,pn),zt}for(Dt=h(Dt);pn<Oe.length;pn++)jn=Be(Dt,Ce,pn,Oe[pn],$e),jn!==null&&(r&&jn.alternate!==null&&Dt.delete(jn.key===null?pn:jn.key),ye=w(jn,ye,pn),Hn===null?zt=jn:Hn.sibling=jn,Hn=jn);return r&&Dt.forEach(function(mc){return i(Ce,mc)}),Sn&&gi(Ce,pn),zt}function $t(Ce,ye,Oe,$e){if(Oe==null)throw Error(s(151));for(var zt=null,Hn=null,Dt=ye,pn=ye=0,jn=null,Gn=Oe.next();Dt!==null&&!Gn.done;pn++,Gn=Oe.next()){Dt.index>pn?(jn=Dt,Dt=null):jn=Dt.sibling;var mc=Re(Ce,Dt,Gn.value,$e);if(mc===null){Dt===null&&(Dt=jn);break}r&&Dt&&mc.alternate===null&&i(Ce,Dt),ye=w(mc,ye,pn),Hn===null?zt=mc:Hn.sibling=mc,Hn=mc,Dt=jn}if(Gn.done)return l(Ce,Dt),Sn&&gi(Ce,pn),zt;if(Dt===null){for(;!Gn.done;pn++,Gn=Oe.next())Gn=Qe(Ce,Gn.value,$e),Gn!==null&&(ye=w(Gn,ye,pn),Hn===null?zt=Gn:Hn.sibling=Gn,Hn=Gn);return Sn&&gi(Ce,pn),zt}for(Dt=h(Dt);!Gn.done;pn++,Gn=Oe.next())Gn=Be(Dt,Ce,pn,Gn.value,$e),Gn!==null&&(r&&Gn.alternate!==null&&Dt.delete(Gn.key===null?pn:Gn.key),ye=w(Gn,ye,pn),Hn===null?zt=Gn:Hn.sibling=Gn,Hn=Gn);return r&&Dt.forEach(function(C_){return i(Ce,C_)}),Sn&&gi(Ce,pn),zt}function ar(Ce,ye,Oe,$e){if(typeof Oe=="object"&&Oe!==null&&Oe.type===N&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case b:e:{for(var zt=Oe.key;ye!==null;){if(ye.key===zt){if(zt=Oe.type,zt===N){if(ye.tag===7){l(Ce,ye.sibling),$e=g(ye,Oe.props.children),$e.return=Ce,Ce=$e;break e}}else if(ye.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===O&&Ee(zt)===ye.type){l(Ce,ye.sibling),$e=g(ye,Oe.props),Jt($e,Oe),$e.return=Ce,Ce=$e;break e}l(Ce,ye);break}else i(Ce,ye);ye=ye.sibling}Oe.type===N?($e=To(Oe.props.children,Ce.mode,$e,Oe.key),$e.return=Ce,Ce=$e):($e=Yl(Oe.type,Oe.key,Oe.props,null,Ce.mode,$e),Jt($e,Oe),$e.return=Ce,Ce=$e)}return L(Ce);case A:e:{for(zt=Oe.key;ye!==null;){if(ye.key===zt)if(ye.tag===4&&ye.stateNode.containerInfo===Oe.containerInfo&&ye.stateNode.implementation===Oe.implementation){l(Ce,ye.sibling),$e=g(ye,Oe.children||[]),$e.return=Ce,Ce=$e;break e}else{l(Ce,ye);break}else i(Ce,ye);ye=ye.sibling}$e=$l(Oe,Ce.mode,$e),$e.return=Ce,Ce=$e}return L(Ce);case O:return Oe=Ee(Oe),ar(Ce,ye,Oe,$e)}if(ae(Oe))return jt(Ce,ye,Oe,$e);if(F(Oe)){if(zt=F(Oe),typeof zt!="function")throw Error(s(150));return Oe=zt.call(Oe),$t(Ce,ye,Oe,$e)}if(typeof Oe.then=="function")return ar(Ce,ye,wt(Oe),$e);if(Oe.$$typeof===D)return ar(Ce,ye,Gu(Ce,Oe),$e);Ct(Ce,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,ye!==null&&ye.tag===6?(l(Ce,ye.sibling),$e=g(ye,Oe),$e.return=Ce,Ce=$e):(l(Ce,ye),$e=Xc(Oe,Ce.mode,$e),$e.return=Ce,Ce=$e),L(Ce)):l(Ce,ye)}return function(Ce,ye,Oe,$e){try{Et=0;var zt=ar(Ce,ye,Oe,$e);return Ke=null,zt}catch(Dt){if(Dt===ve||Dt===ce)throw Dt;var Hn=Ds(29,Dt,null,Ce.mode);return Hn.lanes=$e,Hn.return=Ce,Hn}finally{}}}var hr=_n(!0),on=_n(!1),_t=!1;function mt(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yr(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Wt(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function dn(r,i,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Xn&2)!==0){var g=h.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),h.pending=i,i=Os(r),Yc(r,null,l),i}return Wc(r,h,i,l),Os(r)}function Yn(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,vn(r,l)}}function ts(r,i){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,w=null;if(l=l.firstBaseUpdate,l!==null){do{var L={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};w===null?g=w=L:w=w.next=L,l=l.next}while(l!==null);w===null?g=w=i:w=w.next=i}else g=w=i;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}var ks=!1;function rr(){if(ks){var r=x;if(r!==null)throw r}}function Gr(r,i,l,h){ks=!1;var g=r.updateQueue;_t=!1;var w=g.firstBaseUpdate,L=g.lastBaseUpdate,ee=g.shared.pending;if(ee!==null){g.shared.pending=null;var me=ee,De=me.next;me.next=null,L===null?w=De:L.next=De,L=me;var He=r.alternate;He!==null&&(He=He.updateQueue,ee=He.lastBaseUpdate,ee!==L&&(ee===null?He.firstBaseUpdate=De:ee.next=De,He.lastBaseUpdate=me))}if(w!==null){var Qe=g.baseState;L=0,He=De=me=null,ee=w;do{var Re=ee.lane&-536870913,Be=Re!==ee.lane;if(Be?(kn&Re)===Re:(h&Re)===Re){Re!==0&&Re===m&&(ks=!0),He!==null&&(He=He.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var jt=r,$t=ee;Re=i;var ar=l;switch($t.tag){case 1:if(jt=$t.payload,typeof jt=="function"){Qe=jt.call(ar,Qe,Re);break e}Qe=jt;break e;case 3:jt.flags=jt.flags&-65537|128;case 0:if(jt=$t.payload,Re=typeof jt=="function"?jt.call(ar,Qe,Re):jt,Re==null)break e;Qe=y({},Qe,Re);break e;case 2:_t=!0}}Re=ee.callback,Re!==null&&(r.flags|=64,Be&&(r.flags|=8192),Be=g.callbacks,Be===null?g.callbacks=[Re]:Be.push(Re))}else Be={lane:Re,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},He===null?(De=He=Be,me=Qe):He=He.next=Be,L|=Re;if(ee=ee.next,ee===null){if(ee=g.shared.pending,ee===null)break;Be=ee,ee=Be.next,Be.next=null,g.lastBaseUpdate=Be,g.shared.pending=null}}while(!0);He===null&&(me=Qe),g.baseState=me,g.firstBaseUpdate=De,g.lastBaseUpdate=He,w===null&&(g.shared.lanes=0),ic|=L,r.lanes=L,r.memoizedState=Qe}}function Rs(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function Wr(r,i){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Rs(l[r],i)}var gn=P(null),Bn=P(0);function xr(r,i){r=yl,G(Bn,r),G(gn,i),yl=r|i.baseLanes}function Un(){G(Bn,yl),G(gn,gn.current)}function ns(){yl=Bn.current,M(gn),M(Bn)}var wr=P(null),Pn=null;function qr(r){var i=r.alternate;G(Rn,Rn.current&1),G(wr,r),Pn===null&&(i===null||gn.current!==null||i.memoizedState!==null)&&(Pn=r)}function $n(r){G(Rn,Rn.current),G(wr,r),Pn===null&&(Pn=r)}function Yr(r){r.tag===22?(G(Rn,Rn.current),G(wr,r),Pn===null&&(Pn=r)):$r()}function $r(){G(Rn,Rn.current),G(wr,wr.current)}function Qn(r){M(wr),Pn===r&&(Pn=null),M(Rn)}var Rn=P(0);function Is(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||K0(l)||J0(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var jr=0,Ft=null,Pt=null,zn=null,ti=!1,Di=!1,$s=!1,Xr=0,Oo=0,Do=null,Yu=0;function sr(){throw Error(s(321))}function af(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Ss(r[l],i[l]))return!1;return!0}function of(r,i,l,h,g,w){return jr=w,Ft=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=r===null||r.memoizedState===null?eb:c0,$s=!1,w=l(h,g),$s=!1,Di&&(w=Ka(i,l,h,g)),$u(r),w}function $u(r){$.H=mf;var i=Pt!==null&&Pt.next!==null;if(jr=0,zn=Pt=Ft=null,ti=!1,Oo=0,Do=null,i)throw Error(s(300));r===null||ds||(r=r.dependencies,r!==null&&Hu(r)&&(ds=!0))}function Ka(r,i,l,h){Ft=r;var g=0;do{if(Di&&(Do=null),Oo=0,Di=!1,25<=g)throw Error(s(301));if(g+=1,zn=Pt=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}$.H=tb,w=i(l,h)}while(Di);return w}function n0(){var r=$.H,i=r.useState()[0];return i=typeof i.then=="function"?Ro(i):i,r=r.useState()[0],(Pt!==null?Pt.memoizedState:null)!==r&&(Ft.flags|=1024),i}function lf(){var r=Xr!==0;return Xr=0,r}function cf(r,i,l){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~l}function Xu(r){if(ti){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ti=!1}jr=0,zn=Pt=Ft=null,Di=!1,Oo=Xr=0,Do=null}function fs(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?Ft.memoizedState=zn=r:zn=zn.next=r,zn}function Er(){if(Pt===null){var r=Ft.alternate;r=r!==null?r.memoizedState:null}else r=Pt.next;var i=zn===null?Ft.memoizedState:zn.next;if(i!==null)zn=i,Pt=r;else{if(r===null)throw Ft.alternate===null?Error(s(467)):Error(s(310));Pt=r,r={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},zn===null?Ft.memoizedState=zn=r:zn=zn.next=r}return zn}function Jc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ro(r){var i=Oo;return Oo+=1,Do===null&&(Do=[]),r=qe(Do,r,i),i=Ft,(zn===null?i.memoizedState:zn.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?eb:c0),r}function Jl(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ro(r);if(r.$$typeof===D)return Cs(r)}throw Error(s(438,String(r)))}function ul(r){var i=null,l=Ft.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var h=Ft.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(i={data:h.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Jc(),Ft.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(r),h=0;h<r;h++)l[h]=K;return i.index++,l}function Sa(r,i){return typeof i=="function"?i(r):i}function Zu(r){var i=Er();return ec(i,Pt,r)}function ec(r,i,l){var h=r.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=l;var g=r.baseQueue,w=h.pending;if(w!==null){if(g!==null){var L=g.next;g.next=w.next,w.next=L}i.baseQueue=g=w,h.pending=null}if(w=r.baseState,g===null)r.memoizedState=w;else{i=g.next;var ee=L=null,me=null,De=i,He=!1;do{var Qe=De.lane&-536870913;if(Qe!==De.lane?(kn&Qe)===Qe:(jr&Qe)===Qe){var Re=De.revertLane;if(Re===0)me!==null&&(me=me.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),Qe===m&&(He=!0);else if((jr&Re)===Re){De=De.next,Re===m&&(He=!0);continue}else Qe={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},me===null?(ee=me=Qe,L=w):me=me.next=Qe,Ft.lanes|=Re,ic|=Re;Qe=De.action,$s&&l(w,Qe),w=De.hasEagerState?De.eagerState:l(w,Qe)}else Re={lane:Qe,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},me===null?(ee=me=Re,L=w):me=me.next=Re,Ft.lanes|=Qe,ic|=Qe;De=De.next}while(De!==null&&De!==i);if(me===null?L=w:me.next=ee,!Ss(w,r.memoizedState)&&(ds=!0,He&&(l=x,l!==null)))throw l;r.memoizedState=w,r.baseState=L,r.baseQueue=me,h.lastRenderedState=w}return g===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Qu(r){var i=Er(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var h=l.dispatch,g=l.pending,w=i.memoizedState;if(g!==null){l.pending=null;var L=g=g.next;do w=r(w,L.action),L=L.next;while(L!==g);Ss(w,i.memoizedState)||(ds=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),l.lastRenderedState=w}return[w,h]}function Ku(r,i,l){var h=Ft,g=Er(),w=Sn;if(w){if(l===void 0)throw Error(s(407));l=l()}else l=i();var L=!Ss((Pt||g).memoizedState,l);if(L&&(g.memoizedState=l,ds=!0),g=g.queue,r0(hf.bind(null,h,g,r),[r]),g.getSnapshot!==i||L||zn!==null&&zn.memoizedState.tag&1){if(h.flags|=2048,fl(9,{destroy:void 0},uf.bind(null,h,g,l,i),null),fr===null)throw Error(s(349));w||(jr&127)!==0||Ja(h,i,l)}return l}function Ja(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Ft.updateQueue,i===null?(i=Jc(),Ft.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function uf(r,i,l,h){i.value=l,i.getSnapshot=h,Id(i)&&ff(r)}function hf(r,i,l){return l(function(){Id(i)&&ff(r)})}function Id(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Ss(r,l)}catch{return!0}}function ff(r){var i=Za(r,2);i!==null&&Bi(i,r,2)}function Io(r){var i=fs();if(typeof r=="function"){var l=r;if(r=l(),$s){St(!0);try{l()}finally{St(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:r},i}function Vd(r,i,l,h){return r.baseState=l,ec(r,Pt,typeof h=="function"?h:Sa)}function Fd(r,i,l,h,g){if(qd(r))throw Error(s(485));if(r=i.action,r!==null){var w={payload:g,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){w.listeners.push(L)}};$.T!==null?l(!0):w.isTransition=!1,h(w),l=i.pending,l===null?(w.next=i.pending=w,Bd(i,w)):(w.next=l.next,i.pending=l.next=w)}}function Bd(r,i){var l=i.action,h=i.payload,g=r.state;if(i.isTransition){var w=$.T,L={};$.T=L;try{var ee=l(g,h),me=$.S;me!==null&&me(L,ee),df(r,i,ee)}catch(De){hl(r,i,De)}finally{w!==null&&L.types!==null&&(w.types=L.types),$.T=w}}else try{w=l(g,h),df(r,i,w)}catch(De){hl(r,i,De)}}function df(r,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Pd(r,i,h)},function(h){return hl(r,i,h)}):Pd(r,i,l)}function Pd(r,i,l){i.status="fulfilled",i.value=l,Ju(i),r.state=l,i=r.pending,i!==null&&(l=i.next,l===i?r.pending=null:(l=l.next,i.next=l,Bd(r,l)))}function hl(r,i,l){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do i.status="rejected",i.reason=l,Ju(i),i=i.next;while(i!==h)}r.action=null}function Ju(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function eu(r,i){return i}function Na(r,i){if(Sn){var l=fr.formState;if(l!==null){e:{var h=Ft;if(Sn){if(ur){t:{for(var g=ur,w=kr;g.nodeType!==8;){if(!w){g=null;break t}if(g=Aa(g.nextSibling),g===null){g=null;break t}}w=g.data,g=w==="F!"||w==="F"?g:null}if(g){ur=Aa(g.nextSibling),h=g.data==="F!";break e}}ko(h)}h=!1}h&&(i=l[0])}}return l=fs(),l.memoizedState=l.baseState=i,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:i},l.queue=h,l=Q2.bind(null,Ft,h),h.dispatch=l,h=Io(!1),w=l0.bind(null,Ft,!1,h.queue),h=fs(),g={state:i,dispatch:null,action:r,pending:null},h.queue=g,l=Fd.bind(null,Ft,g,w,l),g.dispatch=l,h.memoizedState=r,[i,l,!1]}function eo(r){var i=Er();return to(i,Pt,r)}function to(r,i,l){if(i=ec(r,i,eu)[0],r=Zu(Sa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var h=Ro(i)}catch(L){throw L===ve?ce:L}else h=i;i=Er();var g=i.queue,w=g.dispatch;return l!==i.memoizedState&&(Ft.flags|=2048,fl(9,{destroy:void 0},eh.bind(null,g,l),null)),[h,w,r]}function eh(r,i){r.action=i}function th(r){var i=Er(),l=Pt;if(l!==null)return to(i,l,r);Er(),i=i.memoizedState,l=Er();var h=l.queue.dispatch;return l.memoizedState=r,[i,h,!1]}function fl(r,i,l,h){return r={tag:r,create:l,deps:h,inst:i,next:null},i=Ft.updateQueue,i===null&&(i=Jc(),Ft.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,i.lastEffect=r),r}function zd(){return Er().memoizedState}function tc(r,i,l,h){var g=fs();Ft.flags|=r,g.memoizedState=fl(1|i,{destroy:void 0},l,h===void 0?null:h)}function nc(r,i,l,h){var g=Er();h=h===void 0?null:h;var w=g.memoizedState.inst;Pt!==null&&h!==null&&af(h,Pt.memoizedState.deps)?g.memoizedState=fl(i,w,l,h):(Ft.flags|=r,g.memoizedState=fl(1|i,w,l,h))}function V2(r,i){tc(8390656,8,r,i)}function r0(r,i){nc(2048,8,r,i)}function w4(r){Ft.flags|=4;var i=Ft.updateQueue;if(i===null)i=Jc(),Ft.updateQueue=i,i.events=[r];else{var l=i.events;l===null?i.events=[r]:l.push(r)}}function F2(r){var i=Er().memoizedState;return w4({ref:i,nextImpl:r}),function(){if((Xn&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function B2(r,i){return nc(4,2,r,i)}function P2(r,i){return nc(4,4,r,i)}function z2(r,i){if(typeof i=="function"){r=r();var l=i(r);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function q2(r,i,l){l=l!=null?l.concat([r]):null,nc(4,4,z2.bind(null,i,r),l)}function s0(){}function U2(r,i){var l=Er();i=i===void 0?null:i;var h=l.memoizedState;return i!==null&&af(i,h[1])?h[0]:(l.memoizedState=[r,i],r)}function H2(r,i){var l=Er();i=i===void 0?null:i;var h=l.memoizedState;if(i!==null&&af(i,h[1]))return h[0];if(h=r(),$s){St(!0);try{r()}finally{St(!1)}}return l.memoizedState=[h,i],h}function i0(r,i,l){return l===void 0||(jr&1073741824)!==0&&(kn&261930)===0?r.memoizedState=i:(r.memoizedState=l,r=Gb(),Ft.lanes|=r,ic|=r,l)}function G2(r,i,l,h){return Ss(l,i)?l:gn.current!==null?(r=i0(r,l,h),Ss(r,i)||(ds=!0),r):(jr&42)===0||(jr&1073741824)!==0&&(kn&261930)===0?(ds=!0,r.memoizedState=l):(r=Gb(),Ft.lanes|=r,ic|=r,i)}function W2(r,i,l,h,g){var w=re.p;re.p=w!==0&&8>w?w:8;var L=$.T,ee={};$.T=ee,l0(r,!1,i,l);try{var me=g(),De=$.S;if(De!==null&&De(ee,me),me!==null&&typeof me=="object"&&typeof me.then=="function"){var He=U(me,h);pf(r,i,He,sa(r))}else pf(r,i,h,sa(r))}catch(Qe){pf(r,i,{then:function(){},status:"rejected",reason:Qe},sa())}finally{re.p=w,L!==null&&ee.types!==null&&(L.types=ee.types),$.T=L}}function _4(){}function a0(r,i,l,h){if(r.tag!==5)throw Error(s(476));var g=Y2(r).queue;W2(r,g,i,le,l===null?_4:function(){return $2(r),l(h)})}function Y2(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:le},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:l},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function $2(r){var i=Y2(r);i.next===null&&(i=r.alternate.memoizedState),pf(r,i.next.queue,{},sa())}function o0(){return Cs(Mf)}function X2(){return Er().memoizedState}function Z2(){return Er().memoizedState}function S4(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var l=sa();r=Wt(l);var h=dn(i,r,l);h!==null&&(Bi(h,i,l),Yn(h,i,l)),i={cache:Kl()},r.payload=i;return}i=i.return}}function N4(r,i,l){var h=sa();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},qd(r)?K2(i,l):(l=Iu(r,i,l,h),l!==null&&(Bi(l,r,h),J2(l,i,h)))}function Q2(r,i,l){var h=sa();pf(r,i,l,h)}function pf(r,i,l,h){var g={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(qd(r))K2(i,g);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var L=i.lastRenderedState,ee=w(L,l);if(g.hasEagerState=!0,g.eagerState=ee,Ss(ee,L))return Wc(r,i,g,0),fr===null&&Gc(),!1}catch{}finally{}if(l=Iu(r,i,g,h),l!==null)return Bi(l,r,h),J2(l,i,h),!0}return!1}function l0(r,i,l,h){if(h={lane:2,revertLane:P0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},qd(r)){if(i)throw Error(s(479))}else i=Iu(r,l,h,2),i!==null&&Bi(i,r,2)}function qd(r){var i=r.alternate;return r===Ft||i!==null&&i===Ft}function K2(r,i){Di=ti=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function J2(r,i,l){if((l&4194048)!==0){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,vn(r,l)}}var mf={readContext:Cs,use:Jl,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useLayoutEffect:sr,useInsertionEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useSyncExternalStore:sr,useId:sr,useHostTransitionStatus:sr,useFormState:sr,useActionState:sr,useOptimistic:sr,useMemoCache:sr,useCacheRefresh:sr};mf.useEffectEvent=sr;var eb={readContext:Cs,use:Jl,useCallback:function(r,i){return fs().memoizedState=[r,i===void 0?null:i],r},useContext:Cs,useEffect:V2,useImperativeHandle:function(r,i,l){l=l!=null?l.concat([r]):null,tc(4194308,4,z2.bind(null,i,r),l)},useLayoutEffect:function(r,i){return tc(4194308,4,r,i)},useInsertionEffect:function(r,i){tc(4,2,r,i)},useMemo:function(r,i){var l=fs();i=i===void 0?null:i;var h=r();if($s){St(!0);try{r()}finally{St(!1)}}return l.memoizedState=[h,i],h},useReducer:function(r,i,l){var h=fs();if(l!==void 0){var g=l(i);if($s){St(!0);try{l(i)}finally{St(!1)}}}else g=i;return h.memoizedState=h.baseState=g,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:g},h.queue=r,r=r.dispatch=N4.bind(null,Ft,r),[h.memoizedState,r]},useRef:function(r){var i=fs();return r={current:r},i.memoizedState=r},useState:function(r){r=Io(r);var i=r.queue,l=Q2.bind(null,Ft,i);return i.dispatch=l,[r.memoizedState,l]},useDebugValue:s0,useDeferredValue:function(r,i){var l=fs();return i0(l,r,i)},useTransition:function(){var r=Io(!1);return r=W2.bind(null,Ft,r.queue,!0,!1),fs().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,l){var h=Ft,g=fs();if(Sn){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),fr===null)throw Error(s(349));(kn&127)!==0||Ja(h,i,l)}g.memoizedState=l;var w={value:l,getSnapshot:i};return g.queue=w,V2(hf.bind(null,h,w,r),[r]),h.flags|=2048,fl(9,{destroy:void 0},uf.bind(null,h,w,l,i),null),l},useId:function(){var r=fs(),i=fr.identifierPrefix;if(Sn){var l=Li,h=Mi;l=(h&~(1<<32-Tt(h)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Xr++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=Yu++,i="_"+i+"r_"+l.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:o0,useFormState:Na,useActionState:Na,useOptimistic:function(r){var i=fs();i.memoizedState=i.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=l0.bind(null,Ft,!0,l),l.dispatch=i,[r,i]},useMemoCache:ul,useCacheRefresh:function(){return fs().memoizedState=S4.bind(null,Ft)},useEffectEvent:function(r){var i=fs(),l={impl:r};return i.memoizedState=l,function(){if((Xn&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},c0={readContext:Cs,use:Jl,useCallback:U2,useContext:Cs,useEffect:r0,useImperativeHandle:q2,useInsertionEffect:B2,useLayoutEffect:P2,useMemo:H2,useReducer:Zu,useRef:zd,useState:function(){return Zu(Sa)},useDebugValue:s0,useDeferredValue:function(r,i){var l=Er();return G2(l,Pt.memoizedState,r,i)},useTransition:function(){var r=Zu(Sa)[0],i=Er().memoizedState;return[typeof r=="boolean"?r:Ro(r),i]},useSyncExternalStore:Ku,useId:X2,useHostTransitionStatus:o0,useFormState:eo,useActionState:eo,useOptimistic:function(r,i){var l=Er();return Vd(l,Pt,r,i)},useMemoCache:ul,useCacheRefresh:Z2};c0.useEffectEvent=F2;var tb={readContext:Cs,use:Jl,useCallback:U2,useContext:Cs,useEffect:r0,useImperativeHandle:q2,useInsertionEffect:B2,useLayoutEffect:P2,useMemo:H2,useReducer:Qu,useRef:zd,useState:function(){return Qu(Sa)},useDebugValue:s0,useDeferredValue:function(r,i){var l=Er();return Pt===null?i0(l,r,i):G2(l,Pt.memoizedState,r,i)},useTransition:function(){var r=Qu(Sa)[0],i=Er().memoizedState;return[typeof r=="boolean"?r:Ro(r),i]},useSyncExternalStore:Ku,useId:X2,useHostTransitionStatus:o0,useFormState:th,useActionState:th,useOptimistic:function(r,i){var l=Er();return Pt!==null?Vd(l,Pt,r,i):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:ul,useCacheRefresh:Z2};tb.useEffectEvent=F2;function u0(r,i,l,h){i=r.memoizedState,l=l(h,i),l=l==null?i:y({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var h0={enqueueSetState:function(r,i,l){r=r._reactInternals;var h=sa(),g=Wt(h);g.payload=i,l!=null&&(g.callback=l),i=dn(r,g,h),i!==null&&(Bi(i,r,h),Yn(i,r,h))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var h=sa(),g=Wt(h);g.tag=1,g.payload=i,l!=null&&(g.callback=l),i=dn(r,g,h),i!==null&&(Bi(i,r,h),Yn(i,r,h))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=sa(),h=Wt(l);h.tag=2,i!=null&&(h.callback=i),i=dn(r,h,l),i!==null&&(Bi(i,r,l),Yn(i,r,l))}};function nb(r,i,l,h,g,w,L){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,w,L):i.prototype&&i.prototype.isPureReactComponent?!Wa(l,h)||!Wa(g,w):!0}function rb(r,i,l,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==r&&h0.enqueueReplaceState(i,i.state,null)}function tu(r,i){var l=i;if("ref"in i){l={};for(var h in i)h!=="ref"&&(l[h]=i[h])}if(r=r.defaultProps){l===i&&(l=y({},l));for(var g in r)l[g]===void 0&&(l[g]=r[g])}return l}function sb(r){Hc(r)}function ib(r){console.error(r)}function ab(r){Hc(r)}function Ud(r,i){try{var l=r.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(h){setTimeout(function(){throw h})}}function ob(r,i,l){try{var h=r.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function f0(r,i,l){return l=Wt(l),l.tag=3,l.payload={element:null},l.callback=function(){Ud(r,i)},l}function lb(r){return r=Wt(r),r.tag=3,r}function cb(r,i,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var w=h.value;r.payload=function(){return g(w)},r.callback=function(){ob(i,l,h)}}var L=l.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(r.callback=function(){ob(i,l,h),typeof g!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var ee=h.stack;this.componentDidCatch(h.value,{componentStack:ee!==null?ee:""})})}function A4(r,i,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(i=l.alternate,i!==null&&Mo(i,l,g,!0),l=wr.current,l!==null){switch(l.tag){case 31:case 13:return Pn===null?t1():l.alternate===null&&Zr===0&&(Zr=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===Se?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([h]):i.add(h),V0(r,h,g)),!1;case 22:return l.flags|=65536,h===Se?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([h]):l.add(h)),V0(r,h,g)),!1}throw Error(s(435,l.tag))}return V0(r,h,g),t1(),!1}if(Sn)return i=wr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,h!==ta&&(r=Error(s(422),{cause:h}),Zl(ki(r,l)))):(h!==ta&&(i=Error(s(423),{cause:h}),Zl(ki(i,l))),r=r.current.alternate,r.flags|=65536,g&=-g,r.lanes|=g,h=ki(h,l),g=f0(r.stateNode,h,g),ts(r,g),Zr!==4&&(Zr=2)),!1;var w=Error(s(520),{cause:h});if(w=ki(w,l),Sf===null?Sf=[w]:Sf.push(w),Zr!==4&&(Zr=2),i===null)return!0;h=ki(h,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,r=g&-g,l.lanes|=r,r=f0(l.stateNode,h,r),ts(l,r),!1;case 1:if(i=l.type,w=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ac===null||!ac.has(w))))return l.flags|=65536,g&=-g,l.lanes|=g,g=lb(g),cb(g,r,l,h),ts(l,g),!1}l=l.return}while(l!==null);return!1}var d0=Error(s(461)),ds=!1;function Xs(r,i,l,h){i.child=r===null?on(i,null,l,h):hr(i,r.child,l,h)}function ub(r,i,l,h,g){l=l.render;var w=i.ref;if("ref"in h){var L={};for(var ee in h)ee!=="ref"&&(L[ee]=h[ee])}else L=h;return Lo(i),h=of(r,i,l,L,w,g),ee=lf(),r!==null&&!ds?(cf(r,i,g),dl(r,i,g)):(Sn&&ee&&nf(i),i.flags|=1,Xs(r,i,h,g),i.child)}function hb(r,i,l,h,g){if(r===null){var w=l.type;return typeof w=="function"&&!Fu(w)&&w.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=w,fb(r,i,w,h,g)):(r=Yl(l.type,null,h,i,i.mode,g),r.ref=i.ref,r.return=i,i.child=r)}if(w=r.child,!w0(r,g)){var L=w.memoizedProps;if(l=l.compare,l=l!==null?l:Wa,l(L,h)&&r.ref===i.ref)return dl(r,i,g)}return i.flags|=1,r=Ci(w,h),r.ref=i.ref,r.return=i,i.child=r}function fb(r,i,l,h,g){if(r!==null){var w=r.memoizedProps;if(Wa(w,h)&&r.ref===i.ref)if(ds=!1,i.pendingProps=h=w,w0(r,g))(r.flags&131072)!==0&&(ds=!0);else return i.lanes=r.lanes,dl(r,i,g)}return p0(r,i,l,h,g)}function db(r,i,l,h){var g=h.children,w=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((i.flags&128)!==0){if(w=w!==null?w.baseLanes|l:l,r!==null){for(h=i.child=r.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~w}else h=0,i.child=null;return pb(r,i,w,l,h)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&ie(i,w!==null?w.cachePool:null),w!==null?xr(i,w):Un(),Yr(i);else return h=i.lanes=536870912,pb(r,i,w!==null?w.baseLanes|l:l,l,h)}else w!==null?(ie(i,w.cachePool),xr(i,w),$r(),i.memoizedState=null):(r!==null&&ie(i,null),Un(),$r());return Xs(r,i,g,l),i.child}function gf(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function pb(r,i,l,h,g){var w=se();return w=w===null?null:{parent:zr._currentValue,pool:w},i.memoizedState={baseLanes:l,cachePool:w},r!==null&&ie(i,null),Un(),Yr(i),r!==null&&Mo(r,i,h,!0),i.childLanes=g,null}function Hd(r,i){return i=Wd({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function mb(r,i,l){return hr(i,r.child,null,l),r=Hd(i,i.pendingProps),r.flags|=2,Qn(i),i.memoizedState=null,r}function T4(r,i,l){var h=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(Sn){if(h.mode==="hidden")return r=Hd(i,h),i.lanes=536870912,gf(null,r);if($n(i),(r=ur)?(r=C5(r,kr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Co!==null?{id:Mi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},l=Bu(r),l.return=i,i.child=l,As=i,ur=null)):r=null,r===null)throw ko(i);return i.lanes=536870912,null}return Hd(i,h)}var w=r.memoizedState;if(w!==null){var L=w.dehydrated;if($n(i),g)if(i.flags&256)i.flags&=-257,i=mb(r,i,l);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(ds||Mo(r,i,l,!1),g=(l&r.childLanes)!==0,ds||g){if(h=fr,h!==null&&(L=xn(h,l),L!==0&&L!==w.retryLane))throw w.retryLane=L,Za(r,L),Bi(h,r,L),d0;t1(),i=mb(r,i,l)}else r=w.treeContext,ur=Aa(L.nextSibling),As=i,Sn=!0,Ys=null,kr=!1,r!==null&&Dd(i,r),i=Hd(i,h),i.flags|=4096;return i}return r=Ci(r.child,{mode:h.mode,children:h.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Gd(r,i){var l=i.ref;if(l===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(r===null||r.ref!==l)&&(i.flags|=4194816)}}function p0(r,i,l,h,g){return Lo(i),l=of(r,i,l,h,void 0,g),h=lf(),r!==null&&!ds?(cf(r,i,g),dl(r,i,g)):(Sn&&h&&nf(i),i.flags|=1,Xs(r,i,l,g),i.child)}function gb(r,i,l,h,g,w){return Lo(i),i.updateQueue=null,l=Ka(i,h,l,g),$u(r),h=lf(),r!==null&&!ds?(cf(r,i,w),dl(r,i,w)):(Sn&&h&&nf(i),i.flags|=1,Xs(r,i,l,w),i.child)}function bb(r,i,l,h,g){if(Lo(i),i.stateNode===null){var w=Ns,L=l.contextType;typeof L=="object"&&L!==null&&(w=Cs(L)),w=new l(h,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=h0,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=h,w.state=i.memoizedState,w.refs={},mt(i),L=l.contextType,w.context=typeof L=="object"&&L!==null?Cs(L):Ns,w.state=i.memoizedState,L=l.getDerivedStateFromProps,typeof L=="function"&&(u0(i,l,L,h),w.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(L=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),L!==w.state&&h0.enqueueReplaceState(w,w.state,null),Gr(i,h,w,g),rr(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!0}else if(r===null){w=i.stateNode;var ee=i.memoizedProps,me=tu(l,ee);w.props=me;var De=w.context,He=l.contextType;L=Ns,typeof He=="object"&&He!==null&&(L=Cs(He));var Qe=l.getDerivedStateFromProps;He=typeof Qe=="function"||typeof w.getSnapshotBeforeUpdate=="function",ee=i.pendingProps!==ee,He||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(ee||De!==L)&&rb(i,w,h,L),_t=!1;var Re=i.memoizedState;w.state=Re,Gr(i,h,w,g),rr(),De=i.memoizedState,ee||Re!==De||_t?(typeof Qe=="function"&&(u0(i,l,Qe,h),De=i.memoizedState),(me=_t||nb(i,l,me,h,Re,De,L))?(He||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=De),w.props=h,w.state=De,w.context=L,h=me):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,yr(r,i),L=i.memoizedProps,He=tu(l,L),w.props=He,Qe=i.pendingProps,Re=w.context,De=l.contextType,me=Ns,typeof De=="object"&&De!==null&&(me=Cs(De)),ee=l.getDerivedStateFromProps,(De=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(L!==Qe||Re!==me)&&rb(i,w,h,me),_t=!1,Re=i.memoizedState,w.state=Re,Gr(i,h,w,g),rr();var Be=i.memoizedState;L!==Qe||Re!==Be||_t||r!==null&&r.dependencies!==null&&Hu(r.dependencies)?(typeof ee=="function"&&(u0(i,l,ee,h),Be=i.memoizedState),(He=_t||nb(i,l,He,h,Re,Be,me)||r!==null&&r.dependencies!==null&&Hu(r.dependencies))?(De||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Be,me),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Be,me)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||L===r.memoizedProps&&Re===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&Re===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=Be),w.props=h,w.state=Be,w.context=me,h=He):(typeof w.componentDidUpdate!="function"||L===r.memoizedProps&&Re===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||L===r.memoizedProps&&Re===r.memoizedState||(i.flags|=1024),h=!1)}return w=h,Gd(r,i),h=(i.flags&128)!==0,w||h?(w=i.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,r!==null&&h?(i.child=hr(i,r.child,null,g),i.child=hr(i,null,l,g)):Xs(r,i,l,g),i.memoizedState=w.state,r=i.child):r=dl(r,i,g),r}function vb(r,i,l,h){return ll(),i.flags|=256,Xs(r,i,l,h),i.child}var m0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function g0(r){return{baseLanes:r,cachePool:ue()}}function b0(r,i,l){return r=r!==null?r.childLanes&~l:0,i&&(r|=ra),r}function yb(r,i,l){var h=i.pendingProps,g=!1,w=(i.flags&128)!==0,L;if((L=w)||(L=r!==null&&r.memoizedState===null?!1:(Rn.current&2)!==0),L&&(g=!0,i.flags&=-129),L=(i.flags&32)!==0,i.flags&=-33,r===null){if(Sn){if(g?qr(i):$r(),(r=ur)?(r=C5(r,kr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Co!==null?{id:Mi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},l=Bu(r),l.return=i,i.child=l,As=i,ur=null)):r=null,r===null)throw ko(i);return J0(r)?i.lanes=32:i.lanes=536870912,null}var ee=h.children;return h=h.fallback,g?($r(),g=i.mode,ee=Wd({mode:"hidden",children:ee},g),h=To(h,g,l,null),ee.return=i,h.return=i,ee.sibling=h,i.child=ee,h=i.child,h.memoizedState=g0(l),h.childLanes=b0(r,L,l),i.memoizedState=m0,gf(null,h)):(qr(i),v0(i,ee))}var me=r.memoizedState;if(me!==null&&(ee=me.dehydrated,ee!==null)){if(w)i.flags&256?(qr(i),i.flags&=-257,i=y0(r,i,l)):i.memoizedState!==null?($r(),i.child=r.child,i.flags|=128,i=null):($r(),ee=h.fallback,g=i.mode,h=Wd({mode:"visible",children:h.children},g),ee=To(ee,g,l,null),ee.flags|=2,h.return=i,ee.return=i,h.sibling=ee,i.child=h,hr(i,r.child,null,l),h=i.child,h.memoizedState=g0(l),h.childLanes=b0(r,L,l),i.memoizedState=m0,i=gf(null,h));else if(qr(i),J0(ee)){if(L=ee.nextSibling&&ee.nextSibling.dataset,L)var De=L.dgst;L=De,h=Error(s(419)),h.stack="",h.digest=L,Zl({value:h,source:null,stack:null}),i=y0(r,i,l)}else if(ds||Mo(r,i,l,!1),L=(l&r.childLanes)!==0,ds||L){if(L=fr,L!==null&&(h=xn(L,l),h!==0&&h!==me.retryLane))throw me.retryLane=h,Za(r,h),Bi(L,r,h),d0;K0(ee)||t1(),i=y0(r,i,l)}else K0(ee)?(i.flags|=192,i.child=r.child,i=null):(r=me.treeContext,ur=Aa(ee.nextSibling),As=i,Sn=!0,Ys=null,kr=!1,r!==null&&Dd(i,r),i=v0(i,h.children),i.flags|=4096);return i}return g?($r(),ee=h.fallback,g=i.mode,me=r.child,De=me.sibling,h=Ci(me,{mode:"hidden",children:h.children}),h.subtreeFlags=me.subtreeFlags&65011712,De!==null?ee=Ci(De,ee):(ee=To(ee,g,l,null),ee.flags|=2),ee.return=i,h.return=i,h.sibling=ee,i.child=h,gf(null,h),h=i.child,ee=r.child.memoizedState,ee===null?ee=g0(l):(g=ee.cachePool,g!==null?(me=zr._currentValue,g=g.parent!==me?{parent:me,pool:me}:g):g=ue(),ee={baseLanes:ee.baseLanes|l,cachePool:g}),h.memoizedState=ee,h.childLanes=b0(r,L,l),i.memoizedState=m0,gf(r.child,h)):(qr(i),l=r.child,r=l.sibling,l=Ci(l,{mode:"visible",children:h.children}),l.return=i,l.sibling=null,r!==null&&(L=i.deletions,L===null?(i.deletions=[r],i.flags|=16):L.push(r)),i.child=l,i.memoizedState=null,l)}function v0(r,i){return i=Wd({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Wd(r,i){return r=Ds(22,r,null,i),r.lanes=0,r}function y0(r,i,l){return hr(i,r.child,null,l),r=v0(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function xb(r,i,l){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),Ql(r.return,i,l)}function x0(r,i,l,h,g,w){var L=r.memoizedState;L===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g,treeForkCount:w}:(L.isBackwards=i,L.rendering=null,L.renderingStartTime=0,L.last=h,L.tail=l,L.tailMode=g,L.treeForkCount=w)}function wb(r,i,l){var h=i.pendingProps,g=h.revealOrder,w=h.tail;h=h.children;var L=Rn.current,ee=(L&2)!==0;if(ee?(L=L&1|2,i.flags|=128):L&=1,G(Rn,L),Xs(r,i,h,l),h=Sn?Zc:0,!ee&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&xb(r,l,i);else if(r.tag===19)xb(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(g){case"forwards":for(l=i.child,g=null;l!==null;)r=l.alternate,r!==null&&Is(r)===null&&(g=l),l=l.sibling;l=g,l===null?(g=i.child,i.child=null):(g=l.sibling,l.sibling=null),x0(i,!1,g,l,w,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=i.child,i.child=null;g!==null;){if(r=g.alternate,r!==null&&Is(r)===null){i.child=g;break}r=g.sibling,g.sibling=l,l=g,g=r}x0(i,!0,l,null,w,h);break;case"together":x0(i,!1,null,null,void 0,h);break;default:i.memoizedState=null}return i.child}function dl(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),ic|=i.lanes,(l&i.childLanes)===0)if(r!==null){if(Mo(r,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,l=Ci(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=Ci(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function w0(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Hu(r)))}function C4(r,i,l){switch(i.tag){case 3:de(i,i.stateNode.containerInfo),Eo(i,zr,r.memoizedState.cache),ll();break;case 27:case 5:we(i);break;case 4:de(i,i.stateNode.containerInfo);break;case 10:Eo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,$n(i),null;break;case 13:var h=i.memoizedState;if(h!==null)return h.dehydrated!==null?(qr(i),i.flags|=128,null):(l&i.child.childLanes)!==0?yb(r,i,l):(qr(i),r=dl(r,i,l),r!==null?r.sibling:null);qr(i);break;case 19:var g=(r.flags&128)!==0;if(h=(l&i.childLanes)!==0,h||(Mo(r,i,l,!1),h=(l&i.childLanes)!==0),g){if(h)return wb(r,i,l);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),G(Rn,Rn.current),h)break;return null;case 22:return i.lanes=0,db(r,i,l,i.pendingProps);case 24:Eo(i,zr,r.memoizedState.cache)}return dl(r,i,l)}function _b(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps)ds=!0;else{if(!w0(r,l)&&(i.flags&128)===0)return ds=!1,C4(r,i,l);ds=(r.flags&131072)!==0}else ds=!1,Sn&&(i.flags&1048576)!==0&&Od(i,Zc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var h=i.pendingProps;if(r=Ee(i.elementType),i.type=r,typeof r=="function")Fu(r)?(h=tu(r,h),i.tag=1,i=bb(null,i,r,h,l)):(i.tag=0,i=p0(null,i,r,h,l));else{if(r!=null){var g=r.$$typeof;if(g===V){i.tag=11,i=ub(null,i,r,h,l);break e}else if(g===W){i.tag=14,i=hb(null,i,r,h,l);break e}}throw i=H(r)||r,Error(s(306,i,""))}}return i;case 0:return p0(r,i,i.type,i.pendingProps,l);case 1:return h=i.type,g=tu(h,i.pendingProps),bb(r,i,h,g,l);case 3:e:{if(de(i,i.stateNode.containerInfo),r===null)throw Error(s(387));h=i.pendingProps;var w=i.memoizedState;g=w.element,yr(r,i),Gr(i,h,null,l);var L=i.memoizedState;if(h=L.cache,Eo(i,zr,h),h!==w.cache&&cl(i,[zr],l,!0),rr(),h=L.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:L.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=vb(r,i,h,l);break e}else if(h!==g){g=ki(Error(s(424)),i),Zl(g),i=vb(r,i,h,l);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ur=Aa(r.firstChild),As=i,Sn=!0,Ys=null,kr=!0,l=on(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ll(),h===g){i=dl(r,i,l);break e}Xs(r,i,h,l)}i=i.child}return i;case 26:return Gd(r,i),r===null?(l=O5(i.type,null,i.pendingProps,null))?i.memoizedState=l:Sn||(l=i.type,r=i.pendingProps,h=l1(oe.current).createElement(l),h[Ln]=i,h[Tn]=r,Zs(h,l,r),wn(h),i.stateNode=h):i.memoizedState=O5(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return we(i),r===null&&Sn&&(h=i.stateNode=E5(i.type,i.pendingProps,oe.current),As=i,kr=!0,g=ur,uc(i.type)?(em=g,ur=Aa(h.firstChild)):ur=g),Xs(r,i,i.pendingProps.children,l),Gd(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&Sn&&((g=h=ur)&&(h=r_(h,i.type,i.pendingProps,kr),h!==null?(i.stateNode=h,As=i,ur=Aa(h.firstChild),kr=!1,g=!0):g=!1),g||ko(i)),we(i),g=i.type,w=i.pendingProps,L=r!==null?r.memoizedProps:null,h=w.children,X0(g,w)?h=null:L!==null&&X0(g,L)&&(i.flags|=32),i.memoizedState!==null&&(g=of(r,i,n0,null,null,l),Mf._currentValue=g),Gd(r,i),Xs(r,i,h,l),i.child;case 6:return r===null&&Sn&&((r=l=ur)&&(l=s_(l,i.pendingProps,kr),l!==null?(i.stateNode=l,As=i,ur=null,r=!0):r=!1),r||ko(i)),null;case 13:return yb(r,i,l);case 4:return de(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=hr(i,null,h,l):Xs(r,i,h,l),i.child;case 11:return ub(r,i,i.type,i.pendingProps,l);case 7:return Xs(r,i,i.pendingProps,l),i.child;case 8:return Xs(r,i,i.pendingProps.children,l),i.child;case 12:return Xs(r,i,i.pendingProps.children,l),i.child;case 10:return h=i.pendingProps,Eo(i,i.type,h.value),Xs(r,i,h.children,l),i.child;case 9:return g=i.type._context,h=i.pendingProps.children,Lo(i),g=Cs(g),h=h(g),i.flags|=1,Xs(r,i,h,l),i.child;case 14:return hb(r,i,i.type,i.pendingProps,l);case 15:return fb(r,i,i.type,i.pendingProps,l);case 19:return wb(r,i,l);case 31:return T4(r,i,l);case 22:return db(r,i,l,i.pendingProps);case 24:return Lo(i),h=Cs(zr),r===null?(g=se(),g===null&&(g=fr,w=Kl(),g.pooledCache=w,w.refCount++,w!==null&&(g.pooledCacheLanes|=l),g=w),i.memoizedState={parent:h,cache:g},mt(i),Eo(i,zr,g)):((r.lanes&l)!==0&&(yr(r,i),Gr(i,null,null,l),rr()),g=r.memoizedState,w=i.memoizedState,g.parent!==h?(g={parent:h,cache:h},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Eo(i,zr,h)):(h=w.cache,Eo(i,zr,h),h!==g.cache&&cl(i,[zr],l,!0))),Xs(r,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function pl(r){r.flags|=4}function _0(r,i,l,h,g){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(g&335544128)===g)if(r.stateNode.complete)r.flags|=8192;else if(Xb())r.flags|=8192;else throw ze=Se,Le}else r.flags&=-16777217}function Sb(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!F5(i))if(Xb())r.flags|=8192;else throw ze=Se,Le}function Yd(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?pt():536870912,r.lanes|=i,ih|=i)}function bf(r,i){if(!Sn)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function _r(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(i)for(var g=r.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=r,g=g.sibling;else for(g=r.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=r,g=g.sibling;return r.subtreeFlags|=h,r.childLanes=l,i}function k4(r,i,l){var h=i.pendingProps;switch(qu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(i),null;case 1:return _r(i),null;case 3:return l=i.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),i.memoizedState.cache!==h&&(i.flags|=2048),Oi(zr),xe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Ts(i)?pl(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,sf())),_r(i),null;case 26:var g=i.type,w=i.memoizedState;return r===null?(pl(i),w!==null?(_r(i),Sb(i,w)):(_r(i),_0(i,g,null,h,l))):w?w!==r.memoizedState?(pl(i),_r(i),Sb(i,w)):(_r(i),i.flags&=-16777217):(r=r.memoizedProps,r!==h&&pl(i),_r(i),_0(i,g,r,h,l)),null;case 27:if(Ve(i),l=oe.current,g=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==h&&pl(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return _r(i),null}r=J.current,Ts(i)?rf(i):(r=E5(g,h,l),i.stateNode=r,pl(i))}return _r(i),null;case 5:if(Ve(i),g=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==h&&pl(i);else{if(!h){if(i.stateNode===null)throw Error(s(166));return _r(i),null}if(w=J.current,Ts(i))rf(i);else{var L=l1(oe.current);switch(w){case 1:w=L.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:w=L.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":w=L.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":w=L.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":w=L.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?L.createElement("select",{is:h.is}):L.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?L.createElement(g,{is:h.is}):L.createElement(g)}}w[Ln]=i,w[Tn]=h;e:for(L=i.child;L!==null;){if(L.tag===5||L.tag===6)w.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===i)break e;for(;L.sibling===null;){if(L.return===null||L.return===i)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}i.stateNode=w;e:switch(Zs(w,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&pl(i)}}return _r(i),_0(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,l),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==h&&pl(i);else{if(typeof h!="string"&&i.stateNode===null)throw Error(s(166));if(r=oe.current,Ts(i)){if(r=i.stateNode,l=i.memoizedProps,h=null,g=As,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}r[Ln]=i,r=!!(r.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||y5(r.nodeValue,l)),r||ko(i,!0)}else r=l1(r).createTextNode(h),r[Ln]=i,i.stateNode=r}return _r(i),null;case 31:if(l=i.memoizedState,r===null||r.memoizedState!==null){if(h=Ts(i),l!==null){if(r===null){if(!h)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Ln]=i}else ll(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_r(i),r=!1}else l=sf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return i.flags&256?(Qn(i),i):(Qn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return _r(i),null;case 13:if(h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(g=Ts(i),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(s(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Ln]=i}else ll(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;_r(i),g=!1}else g=sf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(Qn(i),i):(Qn(i),null)}return Qn(i),(i.flags&128)!==0?(i.lanes=l,i):(l=h!==null,r=r!==null&&r.memoizedState!==null,l&&(h=i.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==g&&(h.flags|=2048)),l!==r&&l&&(i.child.flags|=8192),Yd(i,i.updateQueue),_r(i),null);case 4:return xe(),r===null&&H0(i.stateNode.containerInfo),_r(i),null;case 10:return Oi(i.type),_r(i),null;case 19:if(M(Rn),h=i.memoizedState,h===null)return _r(i),null;if(g=(i.flags&128)!==0,w=h.rendering,w===null)if(g)bf(h,!1);else{if(Zr!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=Is(r),w!==null){for(i.flags|=128,bf(h,!1),r=w.updateQueue,i.updateQueue=r,Yd(i,r),i.subtreeFlags=0,r=l,l=i.child;l!==null;)$c(l,r),l=l.sibling;return G(Rn,Rn.current&1|2),Sn&&gi(i,h.treeForkCount),i.child}r=r.sibling}h.tail!==null&&Pe()>Kd&&(i.flags|=128,g=!0,bf(h,!1),i.lanes=4194304)}else{if(!g)if(r=Is(w),r!==null){if(i.flags|=128,g=!0,r=r.updateQueue,i.updateQueue=r,Yd(i,r),bf(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!Sn)return _r(i),null}else 2*Pe()-h.renderingStartTime>Kd&&l!==536870912&&(i.flags|=128,g=!0,bf(h,!1),i.lanes=4194304);h.isBackwards?(w.sibling=i.child,i.child=w):(r=h.last,r!==null?r.sibling=w:i.child=w,h.last=w)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=Pe(),r.sibling=null,l=Rn.current,G(Rn,g?l&1|2:l&1),Sn&&gi(i,h.treeForkCount),r):(_r(i),null);case 22:case 23:return Qn(i),ns(),h=i.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(i.flags|=8192):h&&(i.flags|=8192),h?(l&536870912)!==0&&(i.flags&128)===0&&(_r(i),i.subtreeFlags&6&&(i.flags|=8192)):_r(i),l=i.updateQueue,l!==null&&Yd(i,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),h=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),h!==l&&(i.flags|=2048),r!==null&&M(Z),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Oi(zr),_r(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function j4(r,i){switch(qu(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Oi(zr),xe(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Ve(i),null;case 31:if(i.memoizedState!==null){if(Qn(i),i.alternate===null)throw Error(s(340));ll()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(Qn(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ll()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return M(Rn),null;case 4:return xe(),null;case 10:return Oi(i.type),null;case 22:case 23:return Qn(i),ns(),r!==null&&M(Z),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Oi(zr),null;case 25:return null;default:return null}}function Nb(r,i){switch(qu(i),i.tag){case 3:Oi(zr),xe();break;case 26:case 27:case 5:Ve(i);break;case 4:xe();break;case 31:i.memoizedState!==null&&Qn(i);break;case 13:Qn(i);break;case 19:M(Rn);break;case 10:Oi(i.type);break;case 22:case 23:Qn(i),ns(),r!==null&&M(Z);break;case 24:Oi(zr)}}function vf(r,i){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&r)===r){h=void 0;var w=l.create,L=l.inst;h=w(),L.destroy=h}l=l.next}while(l!==g)}}catch(ee){Jn(i,i.return,ee)}}function rc(r,i,l){try{var h=i.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var w=g.next;h=w;do{if((h.tag&r)===r){var L=h.inst,ee=L.destroy;if(ee!==void 0){L.destroy=void 0,g=i;var me=l,De=ee;try{De()}catch(He){Jn(g,me,He)}}}h=h.next}while(h!==w)}}catch(He){Jn(i,i.return,He)}}function Ab(r){var i=r.updateQueue;if(i!==null){var l=r.stateNode;try{Wr(i,l)}catch(h){Jn(r,r.return,h)}}}function Tb(r,i,l){l.props=tu(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(h){Jn(r,i,h)}}function yf(r,i){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof l=="function"?r.refCleanup=l(h):l.current=h}}catch(g){Jn(r,i,g)}}function Vo(r,i){var l=r.ref,h=r.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Jn(r,i,g)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Jn(r,i,g)}else l.current=null}function Cb(r){var i=r.type,l=r.memoizedProps,h=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Jn(r,r.return,g)}}function S0(r,i,l){try{var h=r.stateNode;Q4(h,r.type,l,i),h[Tn]=i}catch(g){Jn(r,r.return,g)}}function kb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&uc(r.type)||r.tag===4}function N0(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||kb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&uc(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function A0(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(r),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Xi));else if(h!==4&&(h===27&&uc(r.type)&&(l=r.stateNode,i=null),r=r.child,r!==null))for(A0(r,i,l),r=r.sibling;r!==null;)A0(r,i,l),r=r.sibling}function $d(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(h!==4&&(h===27&&uc(r.type)&&(l=r.stateNode),r=r.child,r!==null))for($d(r,i,l),r=r.sibling;r!==null;)$d(r,i,l),r=r.sibling}function jb(r){var i=r.stateNode,l=r.memoizedProps;try{for(var h=r.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Zs(i,h,l),i[Ln]=r,i[Tn]=l}catch(w){Jn(r,r.return,w)}}var ml=!1,ps=!1,T0=!1,Eb=typeof WeakSet=="function"?WeakSet:Set,Vs=null;function E4(r,i){if(r=r.containerInfo,Y0=m1,r=$a(r),xa(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{l.nodeType,w.nodeType}catch{l=null;break e}var L=0,ee=-1,me=-1,De=0,He=0,Qe=r,Re=null;t:for(;;){for(var Be;Qe!==l||g!==0&&Qe.nodeType!==3||(ee=L+g),Qe!==w||h!==0&&Qe.nodeType!==3||(me=L+h),Qe.nodeType===3&&(L+=Qe.nodeValue.length),(Be=Qe.firstChild)!==null;)Re=Qe,Qe=Be;for(;;){if(Qe===r)break t;if(Re===l&&++De===g&&(ee=L),Re===w&&++He===h&&(me=L),(Be=Qe.nextSibling)!==null)break;Qe=Re,Re=Qe.parentNode}Qe=Be}l=ee===-1||me===-1?null:{start:ee,end:me}}else l=null}l=l||{start:0,end:0}}else l=null;for($0={focusedElem:r,selectionRange:l},m1=!1,Vs=i;Vs!==null;)if(i=Vs,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Vs=r;else for(;Vs!==null;){switch(i=Vs,w=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)g=r[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,l=i,g=w.memoizedProps,w=w.memoizedState,h=l.stateNode;try{var jt=tu(l.type,g);r=h.getSnapshotBeforeUpdate(jt,w),h.__reactInternalSnapshotBeforeUpdate=r}catch($t){Jn(l,l.return,$t)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,l=r.nodeType,l===9)Q0(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Q0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,Vs=r;break}Vs=i.return}}function Mb(r,i,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:bl(r,l),h&4&&vf(5,l);break;case 1:if(bl(r,l),h&4)if(r=l.stateNode,i===null)try{r.componentDidMount()}catch(L){Jn(l,l.return,L)}else{var g=tu(l.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(g,i,r.__reactInternalSnapshotBeforeUpdate)}catch(L){Jn(l,l.return,L)}}h&64&&Ab(l),h&512&&yf(l,l.return);break;case 3:if(bl(r,l),h&64&&(r=l.updateQueue,r!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Wr(r,i)}catch(L){Jn(l,l.return,L)}}break;case 27:i===null&&h&4&&jb(l);case 26:case 5:bl(r,l),i===null&&h&4&&Cb(l),h&512&&yf(l,l.return);break;case 12:bl(r,l);break;case 31:bl(r,l),h&4&&Db(r,l);break;case 13:bl(r,l),h&4&&Rb(r,l),h&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=B4.bind(null,l),i_(r,l))));break;case 22:if(h=l.memoizedState!==null||ml,!h){i=i!==null&&i.memoizedState!==null||ps,g=ml;var w=ps;ml=h,(ps=i)&&!w?vl(r,l,(l.subtreeFlags&8772)!==0):bl(r,l),ml=g,ps=w}break;case 30:break;default:bl(r,l)}}function Lb(r){var i=r.alternate;i!==null&&(r.alternate=null,Lb(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&bt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Mr=null,Ri=!1;function gl(r,i,l){for(l=l.child;l!==null;)Ob(r,i,l),l=l.sibling}function Ob(r,i,l){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Yt,l)}catch{}switch(l.tag){case 26:ps||Vo(l,i),gl(r,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ps||Vo(l,i);var h=Mr,g=Ri;uc(l.type)&&(Mr=l.stateNode,Ri=!1),gl(r,i,l),kf(l.stateNode),Mr=h,Ri=g;break;case 5:ps||Vo(l,i);case 6:if(h=Mr,g=Ri,Mr=null,gl(r,i,l),Mr=h,Ri=g,Mr!==null)if(Ri)try{(Mr.nodeType===9?Mr.body:Mr.nodeName==="HTML"?Mr.ownerDocument.body:Mr).removeChild(l.stateNode)}catch(w){Jn(l,i,w)}else try{Mr.removeChild(l.stateNode)}catch(w){Jn(l,i,w)}break;case 18:Mr!==null&&(Ri?(r=Mr,A5(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),dh(r)):A5(Mr,l.stateNode));break;case 4:h=Mr,g=Ri,Mr=l.stateNode.containerInfo,Ri=!0,gl(r,i,l),Mr=h,Ri=g;break;case 0:case 11:case 14:case 15:rc(2,l,i),ps||rc(4,l,i),gl(r,i,l);break;case 1:ps||(Vo(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"&&Tb(l,i,h)),gl(r,i,l);break;case 21:gl(r,i,l);break;case 22:ps=(h=ps)||l.memoizedState!==null,gl(r,i,l),ps=h;break;default:gl(r,i,l)}}function Db(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{dh(r)}catch(l){Jn(i,i.return,l)}}}function Rb(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{dh(r)}catch(l){Jn(i,i.return,l)}}function M4(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Eb),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Eb),i;default:throw Error(s(435,r.tag))}}function Xd(r,i){var l=M4(r);i.forEach(function(h){if(!l.has(h)){l.add(h);var g=P4.bind(null,r,h);h.then(g,g)}})}function Ii(r,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],w=r,L=i,ee=L;e:for(;ee!==null;){switch(ee.tag){case 27:if(uc(ee.type)){Mr=ee.stateNode,Ri=!1;break e}break;case 5:Mr=ee.stateNode,Ri=!1;break e;case 3:case 4:Mr=ee.stateNode.containerInfo,Ri=!0;break e}ee=ee.return}if(Mr===null)throw Error(s(160));Ob(w,L,g),Mr=null,Ri=!1,w=g.alternate,w!==null&&(w.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ib(i,r),i=i.sibling}var no=null;function Ib(r,i){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ii(i,r),Vi(r),h&4&&(rc(3,r,r.return),vf(3,r),rc(5,r,r.return));break;case 1:Ii(i,r),Vi(r),h&512&&(ps||l===null||Vo(l,l.return)),h&64&&ml&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=no;if(Ii(i,r),Vi(r),h&512&&(ps||l===null||Vo(l,l.return)),h&4){var w=l!==null?l.memoizedState:null;if(h=r.memoizedState,l===null)if(h===null)if(r.stateNode===null){e:{h=r.type,l=r.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":w=g.getElementsByTagName("title")[0],(!w||w[Ze]||w[Ln]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=g.createElement(h),g.head.insertBefore(w,g.querySelector("head > title"))),Zs(w,h,l),w[Ln]=r,wn(w),h=w;break e;case"link":var L=I5("link","href",g).get(h+(l.href||""));if(L){for(var ee=0;ee<L.length;ee++)if(w=L[ee],w.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&w.getAttribute("rel")===(l.rel==null?null:l.rel)&&w.getAttribute("title")===(l.title==null?null:l.title)&&w.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){L.splice(ee,1);break t}}w=g.createElement(h),Zs(w,h,l),g.head.appendChild(w);break;case"meta":if(L=I5("meta","content",g).get(h+(l.content||""))){for(ee=0;ee<L.length;ee++)if(w=L[ee],w.getAttribute("content")===(l.content==null?null:""+l.content)&&w.getAttribute("name")===(l.name==null?null:l.name)&&w.getAttribute("property")===(l.property==null?null:l.property)&&w.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&w.getAttribute("charset")===(l.charSet==null?null:l.charSet)){L.splice(ee,1);break t}}w=g.createElement(h),Zs(w,h,l),g.head.appendChild(w);break;default:throw Error(s(468,h))}w[Ln]=r,wn(w),h=w}r.stateNode=h}else V5(g,r.type,r.stateNode);else r.stateNode=R5(g,h,r.memoizedProps);else w!==h?(w===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):w.count--,h===null?V5(g,r.type,r.stateNode):R5(g,h,r.memoizedProps)):h===null&&r.stateNode!==null&&S0(r,r.memoizedProps,l.memoizedProps)}break;case 27:Ii(i,r),Vi(r),h&512&&(ps||l===null||Vo(l,l.return)),l!==null&&h&4&&S0(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Ii(i,r),Vi(r),h&512&&(ps||l===null||Vo(l,l.return)),r.flags&32){g=r.stateNode;try{$i(g,"")}catch(jt){Jn(r,r.return,jt)}}h&4&&r.stateNode!=null&&(g=r.memoizedProps,S0(r,g,l!==null?l.memoizedProps:g)),h&1024&&(T0=!0);break;case 6:if(Ii(i,r),Vi(r),h&4){if(r.stateNode===null)throw Error(s(162));h=r.memoizedProps,l=r.stateNode;try{l.nodeValue=h}catch(jt){Jn(r,r.return,jt)}}break;case 3:if(h1=null,g=no,no=c1(i.containerInfo),Ii(i,r),no=g,Vi(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{dh(i.containerInfo)}catch(jt){Jn(r,r.return,jt)}T0&&(T0=!1,Vb(r));break;case 4:h=no,no=c1(r.stateNode.containerInfo),Ii(i,r),Vi(r),no=h;break;case 12:Ii(i,r),Vi(r);break;case 31:Ii(i,r),Vi(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Xd(r,h)));break;case 13:Ii(i,r),Vi(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Qd=Pe()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Xd(r,h)));break;case 22:g=r.memoizedState!==null;var me=l!==null&&l.memoizedState!==null,De=ml,He=ps;if(ml=De||g,ps=He||me,Ii(i,r),ps=He,ml=De,Vi(r),h&8192)e:for(i=r.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(l===null||me||ml||ps||nu(r)),l=null,i=r;;){if(i.tag===5||i.tag===26){if(l===null){me=l=i;try{if(w=me.stateNode,g)L=w.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{ee=me.stateNode;var Qe=me.memoizedProps.style,Re=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;ee.style.display=Re==null||typeof Re=="boolean"?"":(""+Re).trim()}}catch(jt){Jn(me,me.return,jt)}}}else if(i.tag===6){if(l===null){me=i;try{me.stateNode.nodeValue=g?"":me.memoizedProps}catch(jt){Jn(me,me.return,jt)}}}else if(i.tag===18){if(l===null){me=i;try{var Be=me.stateNode;g?T5(Be,!0):T5(me.stateNode,!1)}catch(jt){Jn(me,me.return,jt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}h&4&&(h=r.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Xd(r,l))));break;case 19:Ii(i,r),Vi(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Xd(r,h)));break;case 30:break;case 21:break;default:Ii(i,r),Vi(r)}}function Vi(r){var i=r.flags;if(i&2){try{for(var l,h=r.return;h!==null;){if(kb(h)){l=h;break}h=h.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,w=N0(r);$d(r,w,g);break;case 5:var L=l.stateNode;l.flags&32&&($i(L,""),l.flags&=-33);var ee=N0(r);$d(r,ee,L);break;case 3:case 4:var me=l.stateNode.containerInfo,De=N0(r);A0(r,De,me);break;default:throw Error(s(161))}}catch(He){Jn(r,r.return,He)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Vb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;Vb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function bl(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Mb(r,i.alternate,i),i=i.sibling}function nu(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:rc(4,i,i.return),nu(i);break;case 1:Vo(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Tb(i,i.return,l),nu(i);break;case 27:kf(i.stateNode);case 26:case 5:Vo(i,i.return),nu(i);break;case 22:i.memoizedState===null&&nu(i);break;case 30:nu(i);break;default:nu(i)}r=r.sibling}}function vl(r,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var h=i.alternate,g=r,w=i,L=w.flags;switch(w.tag){case 0:case 11:case 15:vl(g,w,l),vf(4,w);break;case 1:if(vl(g,w,l),h=w,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(De){Jn(h,h.return,De)}if(h=w,g=h.updateQueue,g!==null){var ee=h.stateNode;try{var me=g.shared.hiddenCallbacks;if(me!==null)for(g.shared.hiddenCallbacks=null,g=0;g<me.length;g++)Rs(me[g],ee)}catch(De){Jn(h,h.return,De)}}l&&L&64&&Ab(w),yf(w,w.return);break;case 27:jb(w);case 26:case 5:vl(g,w,l),l&&h===null&&L&4&&Cb(w),yf(w,w.return);break;case 12:vl(g,w,l);break;case 31:vl(g,w,l),l&&L&4&&Db(g,w);break;case 13:vl(g,w,l),l&&L&4&&Rb(g,w);break;case 22:w.memoizedState===null&&vl(g,w,l),yf(w,w.return);break;case 30:break;default:vl(g,w,l)}i=i.sibling}}function C0(r,i){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Qc(l))}function k0(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Qc(r))}function ro(r,i,l,h){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Fb(r,i,l,h),i=i.sibling}function Fb(r,i,l,h){var g=i.flags;switch(i.tag){case 0:case 11:case 15:ro(r,i,l,h),g&2048&&vf(9,i);break;case 1:ro(r,i,l,h);break;case 3:ro(r,i,l,h),g&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Qc(r)));break;case 12:if(g&2048){ro(r,i,l,h),r=i.stateNode;try{var w=i.memoizedProps,L=w.id,ee=w.onPostCommit;typeof ee=="function"&&ee(L,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(me){Jn(i,i.return,me)}}else ro(r,i,l,h);break;case 31:ro(r,i,l,h);break;case 13:ro(r,i,l,h);break;case 23:break;case 22:w=i.stateNode,L=i.alternate,i.memoizedState!==null?w._visibility&2?ro(r,i,l,h):xf(r,i):w._visibility&2?ro(r,i,l,h):(w._visibility|=2,nh(r,i,l,h,(i.subtreeFlags&10256)!==0||!1)),g&2048&&C0(L,i);break;case 24:ro(r,i,l,h),g&2048&&k0(i.alternate,i);break;default:ro(r,i,l,h)}}function nh(r,i,l,h,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var w=r,L=i,ee=l,me=h,De=L.flags;switch(L.tag){case 0:case 11:case 15:nh(w,L,ee,me,g),vf(8,L);break;case 23:break;case 22:var He=L.stateNode;L.memoizedState!==null?He._visibility&2?nh(w,L,ee,me,g):xf(w,L):(He._visibility|=2,nh(w,L,ee,me,g)),g&&De&2048&&C0(L.alternate,L);break;case 24:nh(w,L,ee,me,g),g&&De&2048&&k0(L.alternate,L);break;default:nh(w,L,ee,me,g)}i=i.sibling}}function xf(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=r,h=i,g=h.flags;switch(h.tag){case 22:xf(l,h),g&2048&&C0(h.alternate,h);break;case 24:xf(l,h),g&2048&&k0(h.alternate,h);break;default:xf(l,h)}i=i.sibling}}var wf=8192;function rh(r,i,l){if(r.subtreeFlags&wf)for(r=r.child;r!==null;)Bb(r,i,l),r=r.sibling}function Bb(r,i,l){switch(r.tag){case 26:rh(r,i,l),r.flags&wf&&r.memoizedState!==null&&b_(l,no,r.memoizedState,r.memoizedProps);break;case 5:rh(r,i,l);break;case 3:case 4:var h=no;no=c1(r.stateNode.containerInfo),rh(r,i,l),no=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=wf,wf=16777216,rh(r,i,l),wf=h):rh(r,i,l));break;default:rh(r,i,l)}}function Pb(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function _f(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var h=i[l];Vs=h,qb(h,r)}Pb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zb(r),r=r.sibling}function zb(r){switch(r.tag){case 0:case 11:case 15:_f(r),r.flags&2048&&rc(9,r,r.return);break;case 3:_f(r);break;case 12:_f(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Zd(r)):_f(r);break;default:_f(r)}}function Zd(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var h=i[l];Vs=h,qb(h,r)}Pb(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:rc(8,i,i.return),Zd(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Zd(i));break;default:Zd(i)}r=r.sibling}}function qb(r,i){for(;Vs!==null;){var l=Vs;switch(l.tag){case 0:case 11:case 15:rc(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Qc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Vs=h;else e:for(l=r;Vs!==null;){h=Vs;var g=h.sibling,w=h.return;if(Lb(h),h===l){Vs=null;break e}if(g!==null){g.return=w,Vs=g;break e}Vs=w}}}var L4={getCacheForType:function(r){var i=Cs(zr),l=i.data.get(r);return l===void 0&&(l=r(),i.data.set(r,l)),l},cacheSignal:function(){return Cs(zr).controller.signal}},O4=typeof WeakMap=="function"?WeakMap:Map,Xn=0,fr=null,Nn=null,kn=0,Kn=0,na=null,sc=!1,sh=!1,j0=!1,yl=0,Zr=0,ic=0,ru=0,E0=0,ra=0,ih=0,Sf=null,Fi=null,M0=!1,Qd=0,Ub=0,Kd=1/0,Jd=null,ac=null,js=0,oc=null,ah=null,xl=0,L0=0,O0=null,Hb=null,Nf=0,D0=null;function sa(){return(Xn&2)!==0&&kn!==0?kn&-kn:$.T!==null?P0():fn()}function Gb(){if(ra===0)if((kn&536870912)===0||Sn){var r=mn;mn<<=1,(mn&3932160)===0&&(mn=262144),ra=r}else ra=536870912;return r=wr.current,r!==null&&(r.flags|=32),ra}function Bi(r,i,l){(r===fr&&(Kn===2||Kn===9)||r.cancelPendingCommit!==null)&&(oh(r,0),lc(r,kn,ra,!1)),ot(r,l),((Xn&2)===0||r!==fr)&&(r===fr&&((Xn&2)===0&&(ru|=l),Zr===4&&lc(r,kn,ra,!1)),Fo(r))}function Wb(r,i,l){if((Xn&6)!==0)throw Error(s(327));var h=!l&&(i&127)===0&&(i&r.expiredLanes)===0||Ae(r,i),g=h?I4(r,i):I0(r,i,!0),w=h;do{if(g===0){sh&&!h&&lc(r,i,0,!1);break}else{if(l=r.current.alternate,w&&!D4(l)){g=I0(r,i,!1),w=!1;continue}if(g===2){if(w=i,r.errorRecoveryDisabledLanes&w)var L=0;else L=r.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){i=L;e:{var ee=r;g=Sf;var me=ee.current.memoizedState.isDehydrated;if(me&&(oh(ee,L).flags|=256),L=I0(ee,L,!1),L!==2){if(j0&&!me){ee.errorRecoveryDisabledLanes|=w,ru|=w,g=4;break e}w=Fi,Fi=g,w!==null&&(Fi===null?Fi=w:Fi.push.apply(Fi,w))}g=L}if(w=!1,g!==2)continue}}if(g===1){oh(r,0),lc(r,i,0,!0);break}e:{switch(h=r,w=g,w){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:lc(h,i,ra,!sc);break e;case 2:Fi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(g=Qd+300-Pe(),10<g)){if(lc(h,i,ra,!sc),rt(h,0,!0)!==0)break e;xl=i,h.timeoutHandle=S5(Yb.bind(null,h,l,Fi,Jd,M0,i,ra,ru,ih,sc,w,"Throttled",-0,0),g);break e}Yb(h,l,Fi,Jd,M0,i,ra,ru,ih,sc,w,null,-0,0)}}break}while(!0);Fo(r)}function Yb(r,i,l,h,g,w,L,ee,me,De,He,Qe,Re,Be){if(r.timeoutHandle=-1,Qe=i.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xi},Bb(i,w,Qe);var jt=(w&62914560)===w?Qd-Pe():(w&4194048)===w?Ub-Pe():0;if(jt=v_(Qe,jt),jt!==null){xl=w,r.cancelPendingCommit=jt(t5.bind(null,r,i,w,l,h,g,L,ee,me,He,Qe,null,Re,Be)),lc(r,w,L,!De);return}}t5(r,i,w,l,h,g,L,ee,me)}function D4(r){for(var i=r;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],w=g.getSnapshot;g=g.value;try{if(!Ss(w(),g))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function lc(r,i,l,h){i&=~E0,i&=~ru,r.suspendedLanes|=i,r.pingedLanes&=~i,h&&(r.warmLanes|=i),h=r.expirationTimes;for(var g=i;0<g;){var w=31-Tt(g),L=1<<w;h[w]=-1,g&=~L}l!==0&&bn(r,l,i)}function e1(){return(Xn&6)===0?(Af(0),!1):!0}function R0(){if(Nn!==null){if(Kn===0)var r=Nn.return;else r=Nn,_a=jo=null,Xu(r),Ke=null,Et=0,r=Nn;for(;r!==null;)Nb(r.alternate,r),r=r.return;Nn=null}}function oh(r,i){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,e_(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),xl=0,R0(),fr=r,Nn=l=Ci(r.current,null),kn=i,Kn=0,na=null,sc=!1,sh=Ae(r,i),j0=!1,ih=ra=E0=ru=ic=Zr=0,Fi=Sf=null,M0=!1,(i&8)!==0&&(i|=i&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=i;0<h;){var g=31-Tt(h),w=1<<g;i|=r[g],h&=~w}return yl=i,Gc(),l}function $b(r,i){Ft=null,$.H=mf,i===ve||i===ce?(i=We(),Kn=3):i===Le?(i=We(),Kn=4):Kn=i===d0?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,na=i,Nn===null&&(Zr=1,Ud(r,ki(i,r.current)))}function Xb(){var r=wr.current;return r===null?!0:(kn&4194048)===kn?Pn===null:(kn&62914560)===kn||(kn&536870912)!==0?r===Pn:!1}function Zb(){var r=$.H;return $.H=mf,r===null?mf:r}function Qb(){var r=$.A;return $.A=L4,r}function t1(){Zr=4,sc||(kn&4194048)!==kn&&wr.current!==null||(sh=!0),(ic&134217727)===0&&(ru&134217727)===0||fr===null||lc(fr,kn,ra,!1)}function I0(r,i,l){var h=Xn;Xn|=2;var g=Zb(),w=Qb();(fr!==r||kn!==i)&&(Jd=null,oh(r,i)),i=!1;var L=Zr;e:do try{if(Kn!==0&&Nn!==null){var ee=Nn,me=na;switch(Kn){case 8:R0(),L=6;break e;case 3:case 2:case 9:case 6:wr.current===null&&(i=!0);var De=Kn;if(Kn=0,na=null,lh(r,ee,me,De),l&&sh){L=0;break e}break;default:De=Kn,Kn=0,na=null,lh(r,ee,me,De)}}R4(),L=Zr;break}catch(He){$b(r,He)}while(!0);return i&&r.shellSuspendCounter++,_a=jo=null,Xn=h,$.H=g,$.A=w,Nn===null&&(fr=null,kn=0,Gc()),L}function R4(){for(;Nn!==null;)Kb(Nn)}function I4(r,i){var l=Xn;Xn|=2;var h=Zb(),g=Qb();fr!==r||kn!==i?(Jd=null,Kd=Pe()+500,oh(r,i)):sh=Ae(r,i);e:do try{if(Kn!==0&&Nn!==null){i=Nn;var w=na;t:switch(Kn){case 1:Kn=0,na=null,lh(r,i,w,1);break;case 2:case 9:if(je(w)){Kn=0,na=null,Jb(i);break}i=function(){Kn!==2&&Kn!==9||fr!==r||(Kn=7),Fo(r)},w.then(i,i);break e;case 3:Kn=7;break e;case 4:Kn=5;break e;case 7:je(w)?(Kn=0,na=null,Jb(i)):(Kn=0,na=null,lh(r,i,w,7));break;case 5:var L=null;switch(Nn.tag){case 26:L=Nn.memoizedState;case 5:case 27:var ee=Nn;if(L?F5(L):ee.stateNode.complete){Kn=0,na=null;var me=ee.sibling;if(me!==null)Nn=me;else{var De=ee.return;De!==null?(Nn=De,n1(De)):Nn=null}break t}}Kn=0,na=null,lh(r,i,w,5);break;case 6:Kn=0,na=null,lh(r,i,w,6);break;case 8:R0(),Zr=6;break e;default:throw Error(s(462))}}V4();break}catch(He){$b(r,He)}while(!0);return _a=jo=null,$.H=h,$.A=g,Xn=l,Nn!==null?0:(fr=null,kn=0,Gc(),Zr)}function V4(){for(;Nn!==null&&!ut();)Kb(Nn)}function Kb(r){var i=_b(r.alternate,r,yl);r.memoizedProps=r.pendingProps,i===null?n1(r):Nn=i}function Jb(r){var i=r,l=i.alternate;switch(i.tag){case 15:case 0:i=gb(l,i,i.pendingProps,i.type,void 0,kn);break;case 11:i=gb(l,i,i.pendingProps,i.type.render,i.ref,kn);break;case 5:Xu(i);default:Nb(l,i),i=Nn=$c(i,yl),i=_b(l,i,yl)}r.memoizedProps=r.pendingProps,i===null?n1(r):Nn=i}function lh(r,i,l,h){_a=jo=null,Xu(i),Ke=null,Et=0;var g=i.return;try{if(A4(r,g,i,l,kn)){Zr=1,Ud(r,ki(l,r.current)),Nn=null;return}}catch(w){if(g!==null)throw Nn=g,w;Zr=1,Ud(r,ki(l,r.current)),Nn=null;return}i.flags&32768?(Sn||h===1?r=!0:sh||(kn&536870912)!==0?r=!1:(sc=r=!0,(h===2||h===9||h===3||h===6)&&(h=wr.current,h!==null&&h.tag===13&&(h.flags|=16384))),e5(i,r)):n1(i)}function n1(r){var i=r;do{if((i.flags&32768)!==0){e5(i,sc);return}r=i.return;var l=k4(i.alternate,i,yl);if(l!==null){Nn=l;return}if(i=i.sibling,i!==null){Nn=i;return}Nn=i=r}while(i!==null);Zr===0&&(Zr=5)}function e5(r,i){do{var l=j4(r.alternate,r);if(l!==null){l.flags&=32767,Nn=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(r=r.sibling,r!==null)){Nn=r;return}Nn=r=l}while(r!==null);Zr=6,Nn=null}function t5(r,i,l,h,g,w,L,ee,me){r.cancelPendingCommit=null;do r1();while(js!==0);if((Xn&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(w=i.lanes|i.childLanes,w|=Ru,Bt(r,l,w,L,ee,me),r===fr&&(Nn=fr=null,kn=0),ah=i,oc=r,xl=l,L0=w,O0=g,Hb=h,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,z4(yt,function(){return a5(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||h){h=$.T,$.T=null,g=re.p,re.p=2,L=Xn,Xn|=4;try{E4(r,i,l)}finally{Xn=L,re.p=g,$.T=h}}js=1,n5(),r5(),s5()}}function n5(){if(js===1){js=0;var r=oc,i=ah,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var h=re.p;re.p=2;var g=Xn;Xn|=4;try{Ib(i,r);var w=$0,L=$a(r.containerInfo),ee=w.focusedElem,me=w.selectionRange;if(L!==ee&&ee&&ee.ownerDocument&&Ya(ee.ownerDocument.documentElement,ee)){if(me!==null&&xa(ee)){var De=me.start,He=me.end;if(He===void 0&&(He=De),"selectionStart"in ee)ee.selectionStart=De,ee.selectionEnd=Math.min(He,ee.value.length);else{var Qe=ee.ownerDocument||document,Re=Qe&&Qe.defaultView||window;if(Re.getSelection){var Be=Re.getSelection(),jt=ee.textContent.length,$t=Math.min(me.start,jt),ar=me.end===void 0?$t:Math.min(me.end,jt);!Be.extend&&$t>ar&&(L=ar,ar=$t,$t=L);var Ce=Wl(ee,$t),ye=Wl(ee,ar);if(Ce&&ye&&(Be.rangeCount!==1||Be.anchorNode!==Ce.node||Be.anchorOffset!==Ce.offset||Be.focusNode!==ye.node||Be.focusOffset!==ye.offset)){var Oe=Qe.createRange();Oe.setStart(Ce.node,Ce.offset),Be.removeAllRanges(),$t>ar?(Be.addRange(Oe),Be.extend(ye.node,ye.offset)):(Oe.setEnd(ye.node,ye.offset),Be.addRange(Oe))}}}}for(Qe=[],Be=ee;Be=Be.parentNode;)Be.nodeType===1&&Qe.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<Qe.length;ee++){var $e=Qe[ee];$e.element.scrollLeft=$e.left,$e.element.scrollTop=$e.top}}m1=!!Y0,$0=Y0=null}finally{Xn=g,re.p=h,$.T=l}}r.current=i,js=2}}function r5(){if(js===2){js=0;var r=oc,i=ah,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var h=re.p;re.p=2;var g=Xn;Xn|=4;try{Mb(r,i.alternate,i)}finally{Xn=g,re.p=h,$.T=l}}js=3}}function s5(){if(js===4||js===3){js=0,at();var r=oc,i=ah,l=xl,h=Hb;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?js=5:(js=0,ah=oc=null,i5(r,r.pendingLanes));var g=r.pendingLanes;if(g===0&&(ac=null),hn(l),i=i.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Yt,i,void 0,(i.current.flags&128)===128)}catch{}if(h!==null){i=$.T,g=re.p,re.p=2,$.T=null;try{for(var w=r.onRecoverableError,L=0;L<h.length;L++){var ee=h[L];w(ee.value,{componentStack:ee.stack})}}finally{$.T=i,re.p=g}}(xl&3)!==0&&r1(),Fo(r),g=r.pendingLanes,(l&261930)!==0&&(g&42)!==0?r===D0?Nf++:(Nf=0,D0=r):Nf=0,Af(0)}}function i5(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Qc(i)))}function r1(){return n5(),r5(),s5(),a5()}function a5(){if(js!==5)return!1;var r=oc,i=L0;L0=0;var l=hn(xl),h=$.T,g=re.p;try{re.p=32>l?32:l,$.T=null,l=O0,O0=null;var w=oc,L=xl;if(js=0,ah=oc=null,xl=0,(Xn&6)!==0)throw Error(s(331));var ee=Xn;if(Xn|=4,zb(w.current),Fb(w,w.current,L,l),Xn=ee,Af(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Yt,w)}catch{}return!0}finally{re.p=g,$.T=h,i5(r,i)}}function o5(r,i,l){i=ki(l,i),i=f0(r.stateNode,i,2),r=dn(r,i,2),r!==null&&(ot(r,2),Fo(r))}function Jn(r,i,l){if(r.tag===3)o5(r,r,l);else for(;i!==null;){if(i.tag===3){o5(i,r,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ac===null||!ac.has(h))){r=ki(l,r),l=lb(2),h=dn(i,l,2),h!==null&&(cb(l,h,i,r),ot(h,2),Fo(h));break}}i=i.return}}function V0(r,i,l){var h=r.pingCache;if(h===null){h=r.pingCache=new O4;var g=new Set;h.set(i,g)}else g=h.get(i),g===void 0&&(g=new Set,h.set(i,g));g.has(l)||(j0=!0,g.add(l),r=F4.bind(null,r,i,l),i.then(r,r))}function F4(r,i,l){var h=r.pingCache;h!==null&&h.delete(i),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,fr===r&&(kn&l)===l&&(Zr===4||Zr===3&&(kn&62914560)===kn&&300>Pe()-Qd?(Xn&2)===0&&oh(r,0):E0|=l,ih===kn&&(ih=0)),Fo(r)}function l5(r,i){i===0&&(i=pt()),r=Za(r,i),r!==null&&(ot(r,i),Fo(r))}function B4(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),l5(r,l)}function P4(r,i){var l=0;switch(r.tag){case 31:case 13:var h=r.stateNode,g=r.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(s(314))}h!==null&&h.delete(i),l5(r,l)}function z4(r,i){return it(r,i)}var s1=null,ch=null,F0=!1,i1=!1,B0=!1,cc=0;function Fo(r){r!==ch&&r.next===null&&(ch===null?s1=ch=r:ch=ch.next=r),i1=!0,F0||(F0=!0,U4())}function Af(r,i){if(!B0&&i1){B0=!0;do for(var l=!1,h=s1;h!==null;){if(r!==0){var g=h.pendingLanes;if(g===0)var w=0;else{var L=h.suspendedLanes,ee=h.pingedLanes;w=(1<<31-Tt(42|r)+1)-1,w&=g&~(L&~ee),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(l=!0,f5(h,w))}else w=kn,w=rt(h,h===fr?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Ae(h,w)||(l=!0,f5(h,w));h=h.next}while(l);B0=!1}}function q4(){c5()}function c5(){i1=F0=!1;var r=0;cc!==0&&J4()&&(r=cc);for(var i=Pe(),l=null,h=s1;h!==null;){var g=h.next,w=u5(h,i);w===0?(h.next=null,l===null?s1=g:l.next=g,g===null&&(ch=l)):(l=h,(r!==0||(w&3)!==0)&&(i1=!0)),h=g}js!==0&&js!==5||Af(r),cc!==0&&(cc=0)}function u5(r,i){for(var l=r.suspendedLanes,h=r.pingedLanes,g=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var L=31-Tt(w),ee=1<<L,me=g[L];me===-1?((ee&l)===0||(ee&h)!==0)&&(g[L]=st(ee,i)):me<=i&&(r.expiredLanes|=ee),w&=~ee}if(i=fr,l=kn,l=rt(r,r===i?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,l===0||r===i&&(Kn===2||Kn===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&Ye(h),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Ae(r,l)){if(i=l&-l,i===r.callbackPriority)return i;switch(h!==null&&Ye(h),hn(l)){case 2:case 8:l=ht;break;case 32:l=yt;break;case 268435456:l=xt;break;default:l=yt}return h=h5.bind(null,r),l=it(l,h),r.callbackPriority=i,r.callbackNode=l,i}return h!==null&&h!==null&&Ye(h),r.callbackPriority=2,r.callbackNode=null,2}function h5(r,i){if(js!==0&&js!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(r1()&&r.callbackNode!==l)return null;var h=kn;return h=rt(r,r===fr?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(Wb(r,h,i),u5(r,Pe()),r.callbackNode!=null&&r.callbackNode===l?h5.bind(null,r):null)}function f5(r,i){if(r1())return null;Wb(r,i,!0)}function U4(){t_(function(){(Xn&6)!==0?it(tt,q4):c5()})}function P0(){if(cc===0){var r=m;r===0&&(r=Rt,Rt<<=1,(Rt&261888)===0&&(Rt=256)),cc=r}return cc}function d5(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Js(""+r)}function p5(r,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,r.id&&l.setAttribute("form",r.id),i.parentNode.insertBefore(l,i),r=new FormData(r),l.parentNode.removeChild(l),r}function H4(r,i,l,h,g){if(i==="submit"&&l&&l.stateNode===g){var w=d5((g[Tn]||null).action),L=h.submitter;L&&(i=(i=L[Tn]||null)?d5(i.formAction):L.getAttribute("formAction"),i!==null&&(w=i,L=null));var ee=new Ni("action","action",null,h,g);r.push({event:ee,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(cc!==0){var me=L?p5(g,L):new FormData(g);a0(l,{pending:!0,data:me,method:g.method,action:w},null,me)}}else typeof w=="function"&&(ee.preventDefault(),me=L?p5(g,L):new FormData(g),a0(l,{pending:!0,data:me,method:g.method,action:w},w,me))},currentTarget:g}]})}}for(var z0=0;z0<il.length;z0++){var q0=il[z0],G4=q0.toLowerCase(),W4=q0[0].toUpperCase()+q0.slice(1);Ti(G4,"on"+W4)}Ti(sl,"onAnimationEnd"),Ti(Uc,"onAnimationIteration"),Ti(Jh,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(Ed,"onTransitionRun"),Ti(Md,"onTransitionStart"),Ti(Ld,"onTransitionCancel"),Ti(ef,"onTransitionEnd"),ls("onMouseEnter",["mouseout","mouseover"]),ls("onMouseLeave",["mouseout","mouseover"]),ls("onPointerEnter",["pointerout","pointerover"]),ls("onPointerLeave",["pointerout","pointerover"]),Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tf));function m5(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],g=h.event;h=h.listeners;e:{var w=void 0;if(i)for(var L=h.length-1;0<=L;L--){var ee=h[L],me=ee.instance,De=ee.currentTarget;if(ee=ee.listener,me!==w&&g.isPropagationStopped())break e;w=ee,g.currentTarget=De;try{w(g)}catch(He){Hc(He)}g.currentTarget=null,w=me}else for(L=0;L<h.length;L++){if(ee=h[L],me=ee.instance,De=ee.currentTarget,ee=ee.listener,me!==w&&g.isPropagationStopped())break e;w=ee,g.currentTarget=De;try{w(g)}catch(He){Hc(He)}g.currentTarget=null,w=me}}}}function An(r,i){var l=i[yn];l===void 0&&(l=i[yn]=new Set);var h=r+"__bubble";l.has(h)||(g5(i,r,2,!1),l.add(h))}function U0(r,i,l){var h=0;i&&(h|=4),g5(l,r,h,i)}var a1="_reactListening"+Math.random().toString(36).slice(2);function H0(r){if(!r[a1]){r[a1]=!0,os.forEach(function(l){l!=="selectionchange"&&(Y4.has(l)||U0(l,!1,r),U0(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[a1]||(i[a1]=!0,U0("selectionchange",!1,i))}}function g5(r,i,l,h){switch(G5(i)){case 2:var g=w_;break;case 8:g=__;break;default:g=im}l=g.bind(null,i,l,r),g=void 0,!Fc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),h?g!==void 0?r.addEventListener(i,l,{capture:!0,passive:g}):r.addEventListener(i,l,!0):g!==void 0?r.addEventListener(i,l,{passive:g}):r.addEventListener(i,l,!1)}function G0(r,i,l,h,g){var w=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var L=h.tag;if(L===3||L===4){var ee=h.stateNode.containerInfo;if(ee===g)break;if(L===4)for(L=h.return;L!==null;){var me=L.tag;if((me===3||me===4)&&L.stateNode.containerInfo===g)return;L=L.return}for(;ee!==null;){if(L=Ht(ee),L===null)return;if(me=L.tag,me===5||me===6||me===26||me===27){h=w=L;continue e}ee=ee.parentNode}}h=h.return}Eu(function(){var De=w,He=Qo(l),Qe=[];e:{var Re=tf.get(r);if(Re!==void 0){var Be=Ni,jt=r;switch(r){case"keypress":if(Si(l)===0)break e;case"keydown":case"keyup":Be=On;break;case"focusin":jt="focus",Be=Ba;break;case"focusout":jt="blur",Be=Ba;break;case"beforeblur":case"afterblur":Be=Ba;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=Bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=Fa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=es;break;case sl:case Uc:case Jh:Be=S;break;case ef:Be=_s;break;case"scroll":case"scrollend":Be=Bl;break;case"wheel":Be=Zi;break;case"copy":case"cut":case"paste":Be=he;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=Fr;break;case"toggle":case"beforetoggle":Be=Pc}var $t=(i&4)!==0,ar=!$t&&(r==="scroll"||r==="scrollend"),Ce=$t?Re!==null?Re+"Capture":null:Re;$t=[];for(var ye=De,Oe;ye!==null;){var $e=ye;if(Oe=$e.stateNode,$e=$e.tag,$e!==5&&$e!==26&&$e!==27||Oe===null||Ce===null||($e=hi(ye,Ce),$e!=null&&$t.push(Cf(ye,$e,Oe))),ar)break;ye=ye.return}0<$t.length&&(Re=new Be(Re,jt,null,l,He),Qe.push({event:Re,listeners:$t}))}}if((i&7)===0){e:{if(Re=r==="mouseover"||r==="pointerover",Be=r==="mouseout"||r==="pointerout",Re&&l!==Oa&&(jt=l.relatedTarget||l.fromElement)&&(Ht(jt)||jt[mr]))break e;if((Be||Re)&&(Re=He.window===He?He:(Re=He.ownerDocument)?Re.defaultView||Re.parentWindow:window,Be?(jt=l.relatedTarget||l.toElement,Be=De,jt=jt?Ht(jt):null,jt!==null&&(ar=o(jt),$t=jt.tag,jt!==ar||$t!==5&&$t!==27&&$t!==6)&&(jt=null)):(Be=null,jt=De),Be!==jt)){if($t=Bc,$e="onMouseLeave",Ce="onMouseEnter",ye="mouse",(r==="pointerout"||r==="pointerover")&&($t=Fr,$e="onPointerLeave",Ce="onPointerEnter",ye="pointer"),ar=Be==null?Re:Fn(Be),Oe=jt==null?Re:Fn(jt),Re=new $t($e,ye+"leave",Be,l,He),Re.target=ar,Re.relatedTarget=Oe,$e=null,Ht(He)===De&&($t=new $t(Ce,ye+"enter",jt,l,He),$t.target=Oe,$t.relatedTarget=ar,$e=$t),ar=$e,Be&&jt)t:{for($t=$4,Ce=Be,ye=jt,Oe=0,$e=Ce;$e;$e=$t($e))Oe++;$e=0;for(var zt=ye;zt;zt=$t(zt))$e++;for(;0<Oe-$e;)Ce=$t(Ce),Oe--;for(;0<$e-Oe;)ye=$t(ye),$e--;for(;Oe--;){if(Ce===ye||ye!==null&&Ce===ye.alternate){$t=Ce;break t}Ce=$t(Ce),ye=$t(ye)}$t=null}else $t=null;Be!==null&&b5(Qe,Re,Be,$t,!1),jt!==null&&ar!==null&&b5(Qe,ar,jt,$t,!0)}}e:{if(Re=De?Fn(De):window,Be=Re.nodeName&&Re.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Re.type==="file")var Hn=Ao;else if(zc(Re))if(ei)Hn=va;else{Hn=Br;var Dt=Hl}else Be=Re.nodeName,!Be||Be.toLowerCase()!=="input"||Re.type!=="checkbox"&&Re.type!=="radio"?De&&Rc(De.elementType)&&(Hn=Ao):Hn=Du;if(Hn&&(Hn=Hn(r,De))){di(Qe,Hn,l,He);break e}Dt&&Dt(r,Re,De),r==="focusout"&&De&&Re.type==="number"&&De.memoizedProps.value!=null&&Xo(Re,"number",Re.value)}switch(Dt=De?Fn(De):window,r){case"focusin":(zc(Dt)||Dt.contentEditable==="true")&&(pi=Dt,Xa=De,Ls=null);break;case"focusout":Ls=Xa=pi=null;break;case"mousedown":Ai=!0;break;case"contextmenu":case"mouseup":case"dragend":Ai=!1,qn(Qe,l,He);break;case"selectionchange":if(rl)break;case"keydown":case"keyup":qn(Qe,l,He)}var pn;if(pa)e:{switch(r){case"compositionstart":var jn="onCompositionStart";break e;case"compositionend":jn="onCompositionEnd";break e;case"compositionupdate":jn="onCompositionUpdate";break e}jn=void 0}else ma?No(r,l)&&(jn="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(jn="onCompositionStart");jn&&(qa&&l.locale!=="ko"&&(ma||jn!=="onCompositionStart"?jn==="onCompositionEnd"&&ma&&(pn=Mu()):(fi=He,Jo="value"in fi?fi.value:fi.textContent,ma=!0)),Dt=o1(De,jn),0<Dt.length&&(jn=new Te(jn,r,null,l,He),Qe.push({event:jn,listeners:Dt}),pn?jn.data=pn:(pn=zl(l),pn!==null&&(jn.data=pn)))),(pn=nl?Gs(r,l):Ua(r,l))&&(jn=o1(De,"onBeforeInput"),0<jn.length&&(Dt=new Te("onBeforeInput","beforeinput",null,l,He),Qe.push({event:Dt,listeners:jn}),Dt.data=pn)),H4(Qe,r,De,l,He)}m5(Qe,i)})}function Cf(r,i,l){return{instance:r,listener:i,currentTarget:l}}function o1(r,i){for(var l=i+"Capture",h=[];r!==null;){var g=r,w=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||w===null||(g=hi(r,l),g!=null&&h.unshift(Cf(r,g,w)),g=hi(r,i),g!=null&&h.push(Cf(r,g,w))),r.tag===3)return h;r=r.return}return[]}function $4(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function b5(r,i,l,h,g){for(var w=i._reactName,L=[];l!==null&&l!==h;){var ee=l,me=ee.alternate,De=ee.stateNode;if(ee=ee.tag,me!==null&&me===h)break;ee!==5&&ee!==26&&ee!==27||De===null||(me=De,g?(De=hi(l,w),De!=null&&L.unshift(Cf(l,De,me))):g||(De=hi(l,w),De!=null&&L.push(Cf(l,De,me)))),l=l.return}L.length!==0&&r.push({event:i,listeners:L})}var X4=/\r\n?/g,Z4=/\u0000|\uFFFD/g;function v5(r){return(typeof r=="string"?r:""+r).replace(X4,`
`).replace(Z4,"")}function y5(r,i){return i=v5(i),v5(r)===i}function ir(r,i,l,h,g,w){switch(l){case"children":typeof h=="string"?i==="body"||i==="textarea"&&h===""||$i(r,h):(typeof h=="number"||typeof h=="bigint")&&i!=="body"&&$i(r,""+h);break;case"className":wi(r,"class",h);break;case"tabIndex":wi(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":wi(r,l,h);break;case"style":Cu(r,h,w);break;case"data":if(i!=="object"){wi(r,"data",h);break}case"src":case"href":if(h===""&&(i!=="a"||l!=="href")){r.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(l);break}h=Js(""+h),r.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(l==="formAction"?(i!=="input"&&ir(r,i,"name",g.name,g,null),ir(r,i,"formEncType",g.formEncType,g,null),ir(r,i,"formMethod",g.formMethod,g,null),ir(r,i,"formTarget",g.formTarget,g,null)):(ir(r,i,"encType",g.encType,g,null),ir(r,i,"method",g.method,g,null),ir(r,i,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(l);break}h=Js(""+h),r.setAttribute(l,h);break;case"onClick":h!=null&&(r.onclick=Xi);break;case"onScroll":h!=null&&An("scroll",r);break;case"onScrollEnd":h!=null&&An("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}l=Js(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(l,""+h):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":h===!0?r.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(l,h):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(l,h):r.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(l):r.setAttribute(l,h);break;case"popover":An("beforetoggle",r),An("toggle",r),Ir(r,"popover",h);break;case"xlinkActuate":_i(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":_i(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":_i(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":_i(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":_i(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":_i(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":_i(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":_i(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":_i(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ir(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ic.get(l)||l,Ir(r,l,h))}}function W0(r,i,l,h,g,w){switch(l){case"style":Cu(r,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"children":typeof h=="string"?$i(r,h):(typeof h=="number"||typeof h=="bigint")&&$i(r,""+h);break;case"onScroll":h!=null&&An("scroll",r);break;case"onScrollEnd":h!=null&&An("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rr.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),i=l.slice(2,g?l.length-7:void 0),w=r[Tn]||null,w=w!=null?w[l]:null,typeof w=="function"&&r.removeEventListener(i,w,g),typeof h=="function")){typeof w!="function"&&w!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(i,h,g);break e}l in r?r[l]=h:h===!0?r.setAttribute(l,""):Ir(r,l,h)}}}function Zs(r,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":An("error",r),An("load",r);var h=!1,g=!1,w;for(w in l)if(l.hasOwnProperty(w)){var L=l[w];if(L!=null)switch(w){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ir(r,i,w,L,l,null)}}g&&ir(r,i,"srcSet",l.srcSet,l,null),h&&ir(r,i,"src",l.src,l,null);return;case"input":An("invalid",r);var ee=w=L=g=null,me=null,De=null;for(h in l)if(l.hasOwnProperty(h)){var He=l[h];if(He!=null)switch(h){case"name":g=He;break;case"type":L=He;break;case"checked":me=He;break;case"defaultChecked":De=He;break;case"value":w=He;break;case"defaultValue":ee=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(s(137,i));break;default:ir(r,i,h,He,l,null)}}Il(r,w,ee,me,De,L,g,!1);return;case"select":An("invalid",r),h=L=w=null;for(g in l)if(l.hasOwnProperty(g)&&(ee=l[g],ee!=null))switch(g){case"value":w=ee;break;case"defaultValue":L=ee;break;case"multiple":h=ee;default:ir(r,i,g,ee,l,null)}i=w,l=L,r.multiple=!!h,i!=null?Hs(r,!!h,i,!1):l!=null&&Hs(r,!!h,l,!0);return;case"textarea":An("invalid",r),w=g=h=null;for(L in l)if(l.hasOwnProperty(L)&&(ee=l[L],ee!=null))switch(L){case"value":h=ee;break;case"defaultValue":g=ee;break;case"children":w=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(91));break;default:ir(r,i,L,ee,l,null)}Dc(r,h,g,w);return;case"option":for(me in l)if(l.hasOwnProperty(me)&&(h=l[me],h!=null))switch(me){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ir(r,i,me,h,l,null)}return;case"dialog":An("beforetoggle",r),An("toggle",r),An("cancel",r),An("close",r);break;case"iframe":case"object":An("load",r);break;case"video":case"audio":for(h=0;h<Tf.length;h++)An(Tf[h],r);break;case"image":An("error",r),An("load",r);break;case"details":An("toggle",r);break;case"embed":case"source":case"link":An("error",r),An("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in l)if(l.hasOwnProperty(De)&&(h=l[De],h!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:ir(r,i,De,h,l,null)}return;default:if(Rc(i)){for(He in l)l.hasOwnProperty(He)&&(h=l[He],h!==void 0&&W0(r,i,He,h,l,void 0));return}}for(ee in l)l.hasOwnProperty(ee)&&(h=l[ee],h!=null&&ir(r,i,ee,h,l,null))}function Q4(r,i,l,h){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,w=null,L=null,ee=null,me=null,De=null,He=null;for(Be in l){var Qe=l[Be];if(l.hasOwnProperty(Be)&&Qe!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":me=Qe;default:h.hasOwnProperty(Be)||ir(r,i,Be,null,h,Qe)}}for(var Re in h){var Be=h[Re];if(Qe=l[Re],h.hasOwnProperty(Re)&&(Be!=null||Qe!=null))switch(Re){case"type":w=Be;break;case"name":g=Be;break;case"checked":De=Be;break;case"defaultChecked":He=Be;break;case"value":L=Be;break;case"defaultValue":ee=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(s(137,i));break;default:Be!==Qe&&ir(r,i,Re,Be,h,Qe)}}wo(r,L,ee,me,De,He,w,g);return;case"select":Be=L=ee=Re=null;for(w in l)if(me=l[w],l.hasOwnProperty(w)&&me!=null)switch(w){case"value":break;case"multiple":Be=me;default:h.hasOwnProperty(w)||ir(r,i,w,null,h,me)}for(g in h)if(w=h[g],me=l[g],h.hasOwnProperty(g)&&(w!=null||me!=null))switch(g){case"value":Re=w;break;case"defaultValue":ee=w;break;case"multiple":L=w;default:w!==me&&ir(r,i,g,w,h,me)}i=ee,l=L,h=Be,Re!=null?Hs(r,!!l,Re,!1):!!h!=!!l&&(i!=null?Hs(r,!!l,i,!0):Hs(r,!!l,l?[]:"",!1));return;case"textarea":Be=Re=null;for(ee in l)if(g=l[ee],l.hasOwnProperty(ee)&&g!=null&&!h.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:ir(r,i,ee,null,h,g)}for(L in h)if(g=h[L],w=l[L],h.hasOwnProperty(L)&&(g!=null||w!=null))switch(L){case"value":Re=g;break;case"defaultValue":Be=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==w&&ir(r,i,L,g,h,w)}Oc(r,Re,Be);return;case"option":for(var jt in l)if(Re=l[jt],l.hasOwnProperty(jt)&&Re!=null&&!h.hasOwnProperty(jt))switch(jt){case"selected":r.selected=!1;break;default:ir(r,i,jt,null,h,Re)}for(me in h)if(Re=h[me],Be=l[me],h.hasOwnProperty(me)&&Re!==Be&&(Re!=null||Be!=null))switch(me){case"selected":r.selected=Re&&typeof Re!="function"&&typeof Re!="symbol";break;default:ir(r,i,me,Re,h,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in l)Re=l[$t],l.hasOwnProperty($t)&&Re!=null&&!h.hasOwnProperty($t)&&ir(r,i,$t,null,h,Re);for(De in h)if(Re=h[De],Be=l[De],h.hasOwnProperty(De)&&Re!==Be&&(Re!=null||Be!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(s(137,i));break;default:ir(r,i,De,Re,h,Be)}return;default:if(Rc(i)){for(var ar in l)Re=l[ar],l.hasOwnProperty(ar)&&Re!==void 0&&!h.hasOwnProperty(ar)&&W0(r,i,ar,void 0,h,Re);for(He in h)Re=h[He],Be=l[He],!h.hasOwnProperty(He)||Re===Be||Re===void 0&&Be===void 0||W0(r,i,He,Re,h,Be);return}}for(var Ce in l)Re=l[Ce],l.hasOwnProperty(Ce)&&Re!=null&&!h.hasOwnProperty(Ce)&&ir(r,i,Ce,null,h,Re);for(Qe in h)Re=h[Qe],Be=l[Qe],!h.hasOwnProperty(Qe)||Re===Be||Re==null&&Be==null||ir(r,i,Qe,Re,h,Be)}function x5(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function K4(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var g=l[h],w=g.transferSize,L=g.initiatorType,ee=g.duration;if(w&&ee&&x5(L)){for(L=0,ee=g.responseEnd,h+=1;h<l.length;h++){var me=l[h],De=me.startTime;if(De>ee)break;var He=me.transferSize,Qe=me.initiatorType;He&&x5(Qe)&&(me=me.responseEnd,L+=He*(me<ee?1:(ee-De)/(me-De)))}if(--h,i+=8*(w+L)/(g.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Y0=null,$0=null;function l1(r){return r.nodeType===9?r:r.ownerDocument}function w5(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _5(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function X0(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Z0=null;function J4(){var r=window.event;return r&&r.type==="popstate"?r===Z0?!1:(Z0=r,!0):(Z0=null,!1)}var S5=typeof setTimeout=="function"?setTimeout:void 0,e_=typeof clearTimeout=="function"?clearTimeout:void 0,N5=typeof Promise=="function"?Promise:void 0,t_=typeof queueMicrotask=="function"?queueMicrotask:typeof N5<"u"?function(r){return N5.resolve(null).then(r).catch(n_)}:S5;function n_(r){setTimeout(function(){throw r})}function uc(r){return r==="head"}function A5(r,i){var l=i,h=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(h===0){r.removeChild(g),dh(i);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")kf(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,kf(l);for(var w=l.firstChild;w;){var L=w.nextSibling,ee=w.nodeName;w[Ze]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=L}}else l==="body"&&kf(r.ownerDocument.body);l=g}while(l);dh(i)}function T5(r,i){var l=r;r=0;do{var h=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=h}while(l)}function Q0(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Q0(l),bt(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function r_(r,i,l,h){for(;r.nodeType===1;){var g=l;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[Ze])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==g.rel||r.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||r.getAttribute("title")!==(g.title==null?null:g.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(g.src==null?null:g.src)||r.getAttribute("type")!==(g.type==null?null:g.type)||r.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var w=g.name==null?null:""+g.name;if(g.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=Aa(r.nextSibling),r===null)break}return null}function s_(r,i,l){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Aa(r.nextSibling),r===null))return null;return r}function C5(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Aa(r.nextSibling),r===null))return null;return r}function K0(r){return r.data==="$?"||r.data==="$~"}function J0(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function i_(r,i){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||l.readyState!=="loading")i();else{var h=function(){i(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function Aa(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var em=null;function k5(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(i===0)return Aa(r.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}r=r.nextSibling}return null}function j5(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return r;i--}else l!=="/$"&&l!=="/&"||i++}r=r.previousSibling}return null}function E5(r,i,l){switch(i=l1(l),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function kf(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);bt(r)}var Ta=new Map,M5=new Set;function c1(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var wl=re.d;re.d={f:a_,r:o_,D:l_,C:c_,L:u_,m:h_,X:d_,S:f_,M:p_};function a_(){var r=wl.f(),i=e1();return r||i}function o_(r){var i=Vt(r);i!==null&&i.tag===5&&i.type==="form"?$2(i):wl.r(r)}var uh=typeof document>"u"?null:document;function L5(r,i,l){var h=uh;if(h&&typeof i=="string"&&i){var g=Cr(i);g='link[rel="'+r+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),M5.has(g)||(M5.add(g),r={rel:r,crossOrigin:l,href:i},h.querySelector(g)===null&&(i=h.createElement("link"),Zs(i,"link",r),wn(i),h.head.appendChild(i)))}}function l_(r){wl.D(r),L5("dns-prefetch",r,null)}function c_(r,i){wl.C(r,i),L5("preconnect",r,i)}function u_(r,i,l){wl.L(r,i,l);var h=uh;if(h&&r&&i){var g='link[rel="preload"][as="'+Cr(i)+'"]';i==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Cr(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Cr(l.imageSizes)+'"]')):g+='[href="'+Cr(r)+'"]';var w=g;switch(i){case"style":w=hh(r);break;case"script":w=fh(r)}Ta.has(w)||(r=y({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:r,as:i},l),Ta.set(w,r),h.querySelector(g)!==null||i==="style"&&h.querySelector(jf(w))||i==="script"&&h.querySelector(Ef(w))||(i=h.createElement("link"),Zs(i,"link",r),wn(i),h.head.appendChild(i)))}}function h_(r,i){wl.m(r,i);var l=uh;if(l&&r){var h=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Cr(h)+'"][href="'+Cr(r)+'"]',w=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=fh(r)}if(!Ta.has(w)&&(r=y({rel:"modulepreload",href:r},i),Ta.set(w,r),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ef(w)))return}h=l.createElement("link"),Zs(h,"link",r),wn(h),l.head.appendChild(h)}}}function f_(r,i,l){wl.S(r,i,l);var h=uh;if(h&&r){var g=Wn(h).hoistableStyles,w=hh(r);i=i||"default";var L=g.get(w);if(!L){var ee={loading:0,preload:null};if(L=h.querySelector(jf(w)))ee.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":i},l),(l=Ta.get(w))&&tm(r,l);var me=L=h.createElement("link");wn(me),Zs(me,"link",r),me._p=new Promise(function(De,He){me.onload=De,me.onerror=He}),me.addEventListener("load",function(){ee.loading|=1}),me.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,u1(L,i,h)}L={type:"stylesheet",instance:L,count:1,state:ee},g.set(w,L)}}}function d_(r,i){wl.X(r,i);var l=uh;if(l&&r){var h=Wn(l).hoistableScripts,g=fh(r),w=h.get(g);w||(w=l.querySelector(Ef(g)),w||(r=y({src:r,async:!0},i),(i=Ta.get(g))&&nm(r,i),w=l.createElement("script"),wn(w),Zs(w,"link",r),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(g,w))}}function p_(r,i){wl.M(r,i);var l=uh;if(l&&r){var h=Wn(l).hoistableScripts,g=fh(r),w=h.get(g);w||(w=l.querySelector(Ef(g)),w||(r=y({src:r,async:!0,type:"module"},i),(i=Ta.get(g))&&nm(r,i),w=l.createElement("script"),wn(w),Zs(w,"link",r),l.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(g,w))}}function O5(r,i,l,h){var g=(g=oe.current)?c1(g):null;if(!g)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=hh(l.href),l=Wn(g).hoistableStyles,h=l.get(i),h||(h={type:"style",instance:null,count:0,state:null},l.set(i,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=hh(l.href);var w=Wn(g).hoistableStyles,L=w.get(r);if(L||(g=g.ownerDocument||g,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,L),(w=g.querySelector(jf(r)))&&!w._p&&(L.instance=w,L.state.loading=5),Ta.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ta.set(r,l),w||m_(g,r,l,L.state))),i&&h===null)throw Error(s(528,""));return L}if(i&&h!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=fh(l),l=Wn(g).hoistableScripts,h=l.get(i),h||(h={type:"script",instance:null,count:0,state:null},l.set(i,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function hh(r){return'href="'+Cr(r)+'"'}function jf(r){return'link[rel="stylesheet"]['+r+"]"}function D5(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function m_(r,i,l,h){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?h.loading=1:(i=r.createElement("link"),h.preload=i,i.addEventListener("load",function(){return h.loading|=1}),i.addEventListener("error",function(){return h.loading|=2}),Zs(i,"link",l),wn(i),r.head.appendChild(i))}function fh(r){return'[src="'+Cr(r)+'"]'}function Ef(r){return"script[async]"+r}function R5(r,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var h=r.querySelector('style[data-href~="'+Cr(l.href)+'"]');if(h)return i.instance=h,wn(h),h;var g=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),wn(h),Zs(h,"style",g),u1(h,l.precedence,r),i.instance=h;case"stylesheet":g=hh(l.href);var w=r.querySelector(jf(g));if(w)return i.state.loading|=4,i.instance=w,wn(w),w;h=D5(l),(g=Ta.get(g))&&tm(h,g),w=(r.ownerDocument||r).createElement("link"),wn(w);var L=w;return L._p=new Promise(function(ee,me){L.onload=ee,L.onerror=me}),Zs(w,"link",h),i.state.loading|=4,u1(w,l.precedence,r),i.instance=w;case"script":return w=fh(l.src),(g=r.querySelector(Ef(w)))?(i.instance=g,wn(g),g):(h=l,(g=Ta.get(w))&&(h=y({},l),nm(h,g)),r=r.ownerDocument||r,g=r.createElement("script"),wn(g),Zs(g,"link",h),r.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(h=i.instance,i.state.loading|=4,u1(h,l.precedence,r));return i.instance}function u1(r,i,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,w=g,L=0;L<h.length;L++){var ee=h[L];if(ee.dataset.precedence===i)w=ee;else if(w!==g)break}w?w.parentNode.insertBefore(r,w.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(r,i.firstChild))}function tm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function nm(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var h1=null;function I5(r,i,l){if(h1===null){var h=new Map,g=h1=new Map;g.set(l,h)}else g=h1,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(r))return h;for(h.set(r,null),l=l.getElementsByTagName(r),g=0;g<l.length;g++){var w=l[g];if(!(w[Ze]||w[Ln]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var L=w.getAttribute(i)||"";L=r+L;var ee=h.get(L);ee?ee.push(w):h.set(L,[w])}}return h}function V5(r,i,l){r=r.ownerDocument||r,r.head.insertBefore(l,i==="title"?r.querySelector("head > title"):null)}function g_(r,i,l){if(l===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function F5(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function b_(r,i,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=hh(h.href),w=i.querySelector(jf(g));if(w){i=w._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=f1.bind(r),i.then(r,r)),l.state.loading|=4,l.instance=w,wn(w);return}w=i.ownerDocument||i,h=D5(h),(g=Ta.get(g))&&tm(h,g),w=w.createElement("link"),wn(w);var L=w;L._p=new Promise(function(ee,me){L.onload=ee,L.onerror=me}),Zs(w,"link",h),l.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=f1.bind(r),i.addEventListener("load",l),i.addEventListener("error",l))}}var rm=0;function v_(r,i){return r.stylesheets&&r.count===0&&p1(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var h=setTimeout(function(){if(r.stylesheets&&p1(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+i);0<r.imgBytes&&rm===0&&(rm=62500*K4());var g=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&p1(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>rm?50:800)+i);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function f1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)p1(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var d1=null;function p1(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,d1=new Map,i.forEach(y_,r),d1=null,f1.call(r))}function y_(r,i){if(!(i.state.loading&4)){var l=d1.get(r);if(l)var h=l.get(null);else{l=new Map,d1.set(r,l);for(var g=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<g.length;w++){var L=g[w];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(l.set(L.dataset.precedence,L),h=L)}h&&l.set(null,h)}g=i.instance,L=g.getAttribute("data-precedence"),w=l.get(L)||h,w===h&&l.set(null,g),l.set(L,g),this.count++,h=f1.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),w?w.parentNode.insertBefore(g,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(g,r.firstChild)),i.state.loading|=4}}var Mf={$$typeof:D,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function x_(r,i,l,h,g,w,L,ee,me){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=At(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.hiddenUpdates=At(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=w,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=me,this.incompleteTransitions=new Map}function B5(r,i,l,h,g,w,L,ee,me,De,He,Qe){return r=new x_(r,i,l,L,me,De,He,Qe,ee),i=1,w===!0&&(i|=24),w=Ds(3,null,null,i),r.current=w,w.stateNode=r,i=Kl(),i.refCount++,r.pooledCache=i,i.refCount++,w.memoizedState={element:h,isDehydrated:l,cache:i},mt(w),r}function P5(r){return r?(r=Ns,r):Ns}function z5(r,i,l,h,g,w){g=P5(g),h.context===null?h.context=g:h.pendingContext=g,h=Wt(i),h.payload={element:l},w=w===void 0?null:w,w!==null&&(h.callback=w),l=dn(r,h,i),l!==null&&(Bi(l,r,i),Yn(l,r,i))}function q5(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function sm(r,i){q5(r,i),(r=r.alternate)&&q5(r,i)}function U5(r){if(r.tag===13||r.tag===31){var i=Za(r,67108864);i!==null&&Bi(i,r,67108864),sm(r,67108864)}}function H5(r){if(r.tag===13||r.tag===31){var i=sa();i=Ut(i);var l=Za(r,i);l!==null&&Bi(l,r,i),sm(r,i)}}var m1=!0;function w_(r,i,l,h){var g=$.T;$.T=null;var w=re.p;try{re.p=2,im(r,i,l,h)}finally{re.p=w,$.T=g}}function __(r,i,l,h){var g=$.T;$.T=null;var w=re.p;try{re.p=8,im(r,i,l,h)}finally{re.p=w,$.T=g}}function im(r,i,l,h){if(m1){var g=am(h);if(g===null)G0(r,i,h,g1,l),W5(r,h);else if(N_(g,r,i,l,h))h.stopPropagation();else if(W5(r,h),i&4&&-1<S_.indexOf(r)){for(;g!==null;){var w=Vt(g);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var L=_e(w.pendingLanes);if(L!==0){var ee=w;for(ee.pendingLanes|=2,ee.entangledLanes|=2;L;){var me=1<<31-Tt(L);ee.entanglements[1]|=me,L&=~me}Fo(w),(Xn&6)===0&&(Kd=Pe()+500,Af(0))}}break;case 31:case 13:ee=Za(w,2),ee!==null&&Bi(ee,w,2),e1(),sm(w,2)}if(w=am(h),w===null&&G0(r,i,h,g1,l),w===g)break;g=w}g!==null&&h.stopPropagation()}else G0(r,i,h,null,l)}}function am(r){return r=Qo(r),om(r)}var g1=null;function om(r){if(g1=null,r=Ht(r),r!==null){var i=o(r);if(i===null)r=null;else{var l=i.tag;if(l===13){if(r=u(i),r!==null)return r;r=null}else if(l===31){if(r=c(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return g1=r,null}function G5(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case tt:return 2;case ht:return 8;case yt:case dt:return 32;case xt:return 268435456;default:return 32}default:return 32}}var lm=!1,hc=null,fc=null,dc=null,Lf=new Map,Of=new Map,pc=[],S_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function W5(r,i){switch(r){case"focusin":case"focusout":hc=null;break;case"dragenter":case"dragleave":fc=null;break;case"mouseover":case"mouseout":dc=null;break;case"pointerover":case"pointerout":Lf.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Of.delete(i.pointerId)}}function Df(r,i,l,h,g,w){return r===null||r.nativeEvent!==w?(r={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:w,targetContainers:[g]},i!==null&&(i=Vt(i),i!==null&&U5(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),r)}function N_(r,i,l,h,g){switch(i){case"focusin":return hc=Df(hc,r,i,l,h,g),!0;case"dragenter":return fc=Df(fc,r,i,l,h,g),!0;case"mouseover":return dc=Df(dc,r,i,l,h,g),!0;case"pointerover":var w=g.pointerId;return Lf.set(w,Df(Lf.get(w)||null,r,i,l,h,g)),!0;case"gotpointercapture":return w=g.pointerId,Of.set(w,Df(Of.get(w)||null,r,i,l,h,g)),!0}return!1}function Y5(r){var i=Ht(r.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=u(l),i!==null){r.blockedOn=i,Mn(r.priority,function(){H5(l)});return}}else if(i===31){if(i=c(l),i!==null){r.blockedOn=i,Mn(r.priority,function(){H5(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function b1(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=am(r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Oa=h,l.target.dispatchEvent(h),Oa=null}else return i=Vt(l),i!==null&&U5(i),r.blockedOn=l,!1;i.shift()}return!0}function $5(r,i,l){b1(r)&&l.delete(i)}function A_(){lm=!1,hc!==null&&b1(hc)&&(hc=null),fc!==null&&b1(fc)&&(fc=null),dc!==null&&b1(dc)&&(dc=null),Lf.forEach($5),Of.forEach($5)}function v1(r,i){r.blockedOn===i&&(r.blockedOn=null,lm||(lm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,A_)))}var y1=null;function X5(r){y1!==r&&(y1=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){y1===r&&(y1=null);for(var i=0;i<r.length;i+=3){var l=r[i],h=r[i+1],g=r[i+2];if(typeof h!="function"){if(om(h||l)===null)continue;break}var w=Vt(l);w!==null&&(r.splice(i,3),i-=3,a0(w,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function dh(r){function i(me){return v1(me,r)}hc!==null&&v1(hc,r),fc!==null&&v1(fc,r),dc!==null&&v1(dc,r),Lf.forEach(i),Of.forEach(i);for(var l=0;l<pc.length;l++){var h=pc[l];h.blockedOn===r&&(h.blockedOn=null)}for(;0<pc.length&&(l=pc[0],l.blockedOn===null);)Y5(l),l.blockedOn===null&&pc.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],w=l[h+1],L=g[Tn]||null;if(typeof w=="function")L||X5(l);else if(L){var ee=null;if(w&&w.hasAttribute("formAction")){if(g=w,L=w[Tn]||null)ee=L.formAction;else if(om(g)!==null)continue}else ee=L.action;typeof ee=="function"?l[h+1]=ee:(l.splice(h,3),h-=3),X5(l)}}}function Z5(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(L){return g=L})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function cm(r){this._internalRoot=r}x1.prototype.render=cm.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,h=sa();z5(l,h,r,i,null,null)},x1.prototype.unmount=cm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;z5(r.current,2,null,r,null,null),e1(),i[mr]=null}};function x1(r){this._internalRoot=r}x1.prototype.unstable_scheduleHydration=function(r){if(r){var i=fn();r={blockedOn:null,target:r,priority:i};for(var l=0;l<pc.length&&i!==0&&i<pc[l].priority;l++);pc.splice(l,0,r),l===0&&Y5(r)}};var Q5=e.version;if(Q5!=="19.2.0")throw Error(s(527,Q5,"19.2.0"));re.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=d(i),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var T_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var w1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!w1.isDisabled&&w1.supportsFiber)try{Yt=w1.inject(T_),Nt=w1}catch{}}return If.createRoot=function(r,i){if(!a(r))throw Error(s(299));var l=!1,h="",g=sb,w=ib,L=ab;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(L=i.onRecoverableError)),i=B5(r,1,!1,null,null,l,h,null,g,w,L,Z5),r[mr]=i.current,H0(r),new cm(i)},If.hydrateRoot=function(r,i,l){if(!a(r))throw Error(s(299));var h=!1,g="",w=sb,L=ib,ee=ab,me=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(w=l.onUncaughtError),l.onCaughtError!==void 0&&(L=l.onCaughtError),l.onRecoverableError!==void 0&&(ee=l.onRecoverableError),l.formState!==void 0&&(me=l.formState)),i=B5(r,1,!0,i,l??null,h,g,me,w,L,ee,Z5),i.context=P5(null),l=i.current,h=sa(),h=Ut(h),g=Wt(h),g.callback=null,dn(l,g,h),l=h,i.current.lanes=l,ot(i,l),Fo(i),r[mr]=i.current,H0(r),new x1(i)},If.version="19.2.0",If}var ov;function I_(){if(ov)return fm.exports;ov=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fm.exports=R_(),fm.exports}var V_=I_();const lv=n=>{let e;const t=new Set,s=(d,p)=>{const y=typeof d=="function"?d(e):d;if(!Object.is(y,e)){const _=e;e=p??(typeof y!="object"||y===null)?y:Object.assign({},e,y),t.forEach(b=>b(e,_))}},a=()=>e,c={setState:s,getState:a,getInitialState:()=>f,subscribe:d=>(t.add(d),()=>t.delete(d))},f=e=n(s,a,c);return c},F_=(n=>n?lv(n):lv),B_=n=>n;function P_(n,e=B_){const t=Zn.useSyncExternalStore(n.subscribe,Zn.useCallback(()=>e(n.getState()),[n,e]),Zn.useCallback(()=>e(n.getInitialState()),[n,e]));return Zn.useDebugValue(t),t}const z_=n=>{const e=F_(n),t=s=>P_(e,s);return Object.assign(t,e),t},q_=(n=>z_);function U_(n,e){let t;try{t=n()}catch{return}return{getItem:a=>{var o;const u=f=>f===null?null:JSON.parse(f,void 0),c=(o=t.getItem(a))!=null?o:null;return c instanceof Promise?c.then(u):u(c)},setItem:(a,o)=>t.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>t.removeItem(a)}}const Hm=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(s){return Hm(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return Hm(s)(t)}}}},H_=(n,e)=>(t,s,a)=>{let o={storage:U_(()=>localStorage),partialize:N=>N,version:0,merge:(N,k)=>({...k,...N}),...e},u=!1;const c=new Set,f=new Set;let d=o.storage;if(!d)return n((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...N)},s,a);const p=()=>{const N=o.partialize({...s()});return d.setItem(o.name,{state:N,version:o.version})},y=a.setState;a.setState=(N,k)=>(y(N,k),p());const _=n((...N)=>(t(...N),p()),s,a);a.getInitialState=()=>_;let b;const A=()=>{var N,k;if(!d)return;u=!1,c.forEach(R=>{var D;return R((D=s())!=null?D:_)});const C=((k=o.onRehydrateStorage)==null?void 0:k.call(o,(N=s())!=null?N:_))||void 0;return Hm(d.getItem.bind(d))(o.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==o.version){if(o.migrate){const D=o.migrate(R.state,R.version);return D instanceof Promise?D.then(V=>[!0,V]):[!0,D]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var D;const[V,I]=R;if(b=o.merge(I,(D=s())!=null?D:_),t(b,!0),V)return p()}).then(()=>{C?.(b,void 0),b=s(),u=!0,f.forEach(R=>R(b))}).catch(R=>{C?.(void 0,R)})};return a.persist={setOptions:N=>{o={...o,...N},N.storage&&(d=N.storage)},clearStorage:()=>{d?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>A(),hasHydrated:()=>u,onHydrate:N=>(c.add(N),()=>{c.delete(N)}),onFinishHydration:N=>(f.add(N),()=>{f.delete(N)})},o.skipHydration||A(),b||_},G_=H_,Tl=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Uf=["C","G","D","A","E","B","F#","Db","Ab","Eb","Bb","F"],W_=[{major:"C",ii:"Dm",iii:"Em",diminished:"B"},{major:"G",ii:"Am",iii:"Bm",diminished:"F#"},{major:"D",ii:"Em",iii:"F#m",diminished:"C#"},{major:"A",ii:"Bm",iii:"C#m",diminished:"G#"},{major:"E",ii:"F#m",iii:"G#m",diminished:"D#"},{major:"B",ii:"C#m",iii:"D#m",diminished:"A#"},{major:"F#",ii:"G#m",iii:"A#m",diminished:"E#"},{major:"Db",ii:"Ebm",iii:"Fm",diminished:"C"},{major:"Ab",ii:"Bbm",iii:"Cm",diminished:"G"},{major:"Eb",ii:"Fm",iii:"Gm",diminished:"D"},{major:"Bb",ii:"Cm",iii:"Dm",diminished:"A"},{major:"F",ii:"Gm",iii:"Am",diminished:"E"}];function Mh(n){return n.includes("b")&&{Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#",Cb:"B",Fb:"E"}[n]||n}const Y_={7:"dominant7",9:"dominant9",11:"dominant11",13:"dominant13",maj7:"major7",maj9:"major9",maj11:"major11",maj13:"major13",6:"major6",add9:"add9",m7:"minor7",m9:"minor9",m11:"minor11",m13:"minor13",m6:"minor6",dim:"diminished",dim7:"diminished7",m7b5:"halfDiminished7","m75":"halfDiminished7",7:"halfDiminished7",sus2:"sus2",sus4:"sus4","7sus4":"dominant7sus4"},$_={major:[0,4,7],minor:[0,3,7],diminished:[0,3,6],augmented:[0,4,8],sus2:[0,2,7],sus4:[0,5,7],major6:[0,4,7,9],minor6:[0,3,7,9],major7:[0,4,7,11],minor7:[0,3,7,10],dominant7:[0,4,7,10],diminished7:[0,3,6,9],halfDiminished7:[0,3,6,10],dominant7sus4:[0,5,7,10],add9:[0,4,7,14],major9:[0,4,7,11,14],minor9:[0,3,7,10,14],dominant9:[0,4,7,10,14],major11:[0,4,7,11,14,17],minor11:[0,3,7,10,14,17],dominant11:[0,4,7,10,14,17],major13:[0,4,7,11,14,21],minor13:[0,3,7,10,14,21],dominant13:[0,4,7,10,14,21]};function ka(n,e){const t=Mh(n),s=Tl.indexOf(t);if(s===-1)return[];const a=Y_[e]||e,o=$_[a];return o?o.map(u=>Tl[(s+u)%12]):(console.warn(`Unknown chord quality: ${e} (resolved to ${a})`),Tl.slice(s,s+1).concat([Tl[(s+4)%12],Tl[(s+7)%12]]))}function su(n,e){if(!n||n.length===0)return n;const t=n.length-1,s=Math.max(0,Math.min(e,t));return s===0?n:[...n.slice(s),...n.slice(0,s)]}function X_(n){return Math.max(0,(n?.length||1)-1)}function Z_(n){return["Root","1st","2nd","3rd","4th","5th","6th"][n]||`${n}th`}function cv(n,e,t,s){const o=`${n}${e==="major"||e==="maj"?"":e}`;if(!s||s===0||!t||t.length===0)return o;const u=t[s%t.length];return`${o}/${u}`}function Q_(n){const e=["G","D","A","E","B","F#","C#"],t=["F","Bb","Eb","Ab","Db","Gb","Cb"],s=e.indexOf(n),a=t.indexOf(n);return s>=0?{sharps:s+1,flats:0}:a>=0?{sharps:0,flats:a+1}:{sharps:0,flats:0}}function dd(){return{C:"hsl(48, 95%, 58%)",G:"hsl(72, 75%, 50%)",D:"hsl(95, 65%, 48%)",A:"hsl(160, 60%, 45%)",E:"hsl(185, 70%, 50%)",B:"hsl(205, 75%, 55%)","F#":"hsl(235, 60%, 58%)",Gb:"hsl(235, 60%, 58%)",Db:"hsl(265, 55%, 55%)",Ab:"hsl(285, 50%, 52%)",Eb:"hsl(315, 60%, 55%)",Bb:"hsl(350, 70%, 58%)",F:"hsl(28, 85%, 55%)"}}function K_(n,e){const t=Mh(n),s=Mh(e),a=Tl.indexOf(t),o=Tl.indexOf(s);if(a===-1||o===-1)return"?";let u=(o-a+12)%12;return{0:"1",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[u]||"?"}function or(n){return n&&n.replace(/([A-G])b/g,"$1")}const Qs=[];for(let n=0;n<256;++n)Qs.push((n+256).toString(16).slice(1));function J_(n,e=0){return(Qs[n[e+0]]+Qs[n[e+1]]+Qs[n[e+2]]+Qs[n[e+3]]+"-"+Qs[n[e+4]]+Qs[n[e+5]]+"-"+Qs[n[e+6]]+Qs[n[e+7]]+"-"+Qs[n[e+8]]+Qs[n[e+9]]+"-"+Qs[n[e+10]]+Qs[n[e+11]]+Qs[n[e+12]]+Qs[n[e+13]]+Qs[n[e+14]]+Qs[n[e+15]]).toLowerCase()}let gm;const eS=new Uint8Array(16);function tS(){if(!gm){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");gm=crypto.getRandomValues.bind(crypto)}return gm(eS)}const nS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),uv={randomUUID:nS};function rS(n,e,t){n=n||{};const s=n.random??n.rng?.()??tS();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,J_(s)}function Fs(n,e,t){return uv.randomUUID&&!n?uv.randomUUID():rS(n)}function hv(n){if(n.length===0)return"intro";const e=n.map(o=>o.type),t=e[e.length-1],s=e.slice(-4),a=e.reduce((o,u)=>(o[u]=(o[u]||0)+1,o),{});if(t==="intro")return"verse";if(s.length>=4){const[o,u,c,f]=s;if(o==="verse"&&u==="chorus"&&c==="verse"&&f==="chorus"||o==="chorus"&&u==="verse"&&c==="chorus"&&f==="verse")return"bridge"}if(t==="bridge"||t==="verse")return"chorus";if(t==="chorus"){const o=e.includes("bridge"),u=a.chorus||0;return o&&u>=3?"outro":"verse"}return t==="outro"?"verse":t==="pre-chorus"||t==="interlude"||t==="solo"||t==="breakdown"?"chorus":"verse"}const Bs=[4,4],zf=(n=Bs)=>{const[e,t]=n;return!e||!t?4:e*(4/t)},lu=n=>{const e=zf(n);return{id:Fs(),beats:[{id:Fs(),chord:null,duration:e}]}},Bo=n=>n?`${n.sectionId}:${n.slotId}`:"",kg=n=>{const e=[];return n.forEach(t=>{t.measures.forEach(s=>{s.beats.forEach(a=>{e.push({sectionId:t.id,slotId:a.id,chord:a.chord??null})})})}),e},iu=(n,e)=>{if(!e)return null;for(const t of n)if(t.id===e.sectionId){for(const s of t.measures)for(const a of s.beats)if(a.id===e.slotId)return a.chord??null}return null},fv=(n,e)=>e?kg(n).findIndex(s=>s.sectionId===e.sectionId&&s.slotId===e.slotId):-1,sS=(n,e,t)=>{const s=kg(n),a=s.findIndex(f=>f.sectionId===e.sectionId&&f.slotId===e.slotId),o=s.findIndex(f=>f.sectionId===t.sectionId&&f.slotId===t.slotId);if(a===-1||o===-1)return[];const[u,c]=a<=o?[a,o]:[o,a];return s.slice(u,c+1).map(({sectionId:f,slotId:d})=>({sectionId:f,slotId:d}))},B1=(n,e)=>e?n.some(t=>t.id===e.sectionId&&t.measures.some(s=>s.beats.some(a=>a.id===e.slotId))):!1,au=(n,e,t,s,a)=>{const o=e&&t?{sectionId:e,slotId:t}:null,u=s.filter(p=>B1(n,p)),c=B1(n,o),f=u[u.length-1]||(c?o:null),d=a&&B1(n,a);return{selectedSectionId:f?.sectionId??null,selectedSlotId:f?.slotId??null,selectedSlots:u,selectionAnchor:d?a:u[0]??f??null}},Gm=100,qf=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n)),Lr=n=>{const e=qf(n.currentSong),t=[...n.historyPast,e].slice(-Gm);return{historyPast:t,historyFuture:[],canUndo:t.length>0,canRedo:!1}},dv=(n,e,t,s,a)=>{const o=au(n.sections,e,t,s,a),u=o.selectedSectionId&&o.selectedSlotId?{sectionId:o.selectedSectionId,slotId:o.selectedSlotId}:null,c=u?iu(n.sections,u):null;return{...o,selectedChord:c}},iS=(n,e,t)=>{let s=!1;for(const a of n)for(const o of a.measures)for(const u of o.beats){if(s)return{sectionId:a.id,slotId:u.id};a.id===e&&u.id===t&&(s=!0)}return null},Vf={id:"default",title:"Untitled Song",artist:"",key:"C",tempo:120,timeSignature:[4,4],sections:[{id:"verse-1",name:"Verse 1",type:"verse",timeSignature:Bs,measures:Array(4).fill(null).map(()=>lu(Bs))},{id:"chorus-1",name:"Chorus",type:"chorus",timeSignature:Bs,measures:Array(4).fill(null).map(()=>lu(Bs))}],notes:"",createdAt:new Date,updatedAt:new Date},bm={root:"C",quality:"major",numeral:"I",notes:["C","E","G"],symbol:"C"},nn=q_()(G_(n=>({currentSong:Vf,historyPast:[],historyFuture:[],canUndo:!1,canRedo:!1,selectedKey:"C",wheelRotation:0,wheelMode:"fixed",chordPanelVisible:!0,timelineVisible:!0,songMapVisible:!1,songInfoModalVisible:!1,collapsedSections:{},chordPanelGuitarExpanded:!1,chordPanelVoicingsExpanded:!1,chordPanelAttention:!1,selectedChord:bm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,isPlaying:!1,playingSectionId:null,playingSlotId:null,isLooping:!1,tempo:120,volume:.8,instrument:"piano",isMuted:!1,setKey:e=>n({selectedKey:e}),rotateWheel:e=>n(t=>({wheelRotation:t.wheelMode==="rotating"?t.wheelRotation+(e==="cw"?-30:30):0})),toggleWheelMode:()=>n(e=>{const t=e.wheelMode==="rotating"?"fixed":"rotating";let s=0;if(t==="rotating"){const a=Uf.indexOf(e.selectedKey);a!==-1&&(s=-(a*30))}return{wheelMode:t,wheelRotation:s}}),toggleChordPanel:()=>n(e=>({chordPanelVisible:!e.chordPanelVisible})),toggleTimeline:()=>n(e=>({timelineVisible:!e.timelineVisible})),openTimeline:()=>n(e=>{if(typeof window<"u"&&window.dispatchEvent(new CustomEvent("openMobileTimeline")),!e.selectedSectionId||!e.selectedSlotId){const t=e.currentSong.sections;if(t.length>0){const s=e.selectedSectionId&&t.find(a=>a.id===e.selectedSectionId)||t[0];if(s.measures.length>0&&s.measures[0].beats.length>0){const a=s.measures[0].beats[0],o={sectionId:s.id,slotId:a.id},u=a.chord??null;return{timelineVisible:!0,selectedSectionId:s.id,selectedSlotId:a.id,selectedSlots:[o],selectionAnchor:o,selectedChord:u}}}}return{timelineVisible:!0}}),toggleSongMap:e=>n(t=>({songMapVisible:e!==void 0?e:!t.songMapVisible})),toggleSongInfoModal:e=>n(t=>({songInfoModalVisible:e!==void 0?e:!t.songInfoModalVisible})),toggleSectionCollapsed:e=>n(t=>{const s={...t.collapsedSections,[e]:!t.collapsedSections?.[e]};return s[e]||delete s[e],{collapsedSections:s}}),setChordPanelGuitarExpanded:e=>n({chordPanelGuitarExpanded:e}),setChordPanelVoicingsExpanded:e=>n({chordPanelVoicingsExpanded:e}),pulseChordPanel:()=>{n({chordPanelAttention:!0}),setTimeout(()=>n({chordPanelAttention:!1}),600)},setSelectedChord:e=>n({selectedChord:e}),setSelectedSlot:(e,t)=>n(s=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,selectedChord:null};const a={sectionId:e,slotId:t},o=iu(s.currentSong.sections,a);return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[a],selectionAnchor:a,selectedChord:o??null}}),selectSlotOnly:(e,t)=>n(()=>{if(!e||!t)return{selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null};const s={sectionId:e,slotId:t};return{selectedSectionId:e,selectedSlotId:t,selectedSlots:[s],selectionAnchor:s}}),setSelectedSlots:e=>n(t=>{const s=e.filter(Boolean),a=s[s.length-1]??null,o=iu(t.currentSong.sections,a);return{selectedSlots:s,selectedSectionId:a?.sectionId??null,selectedSlotId:a?.slotId??null,selectionAnchor:s[0]??a??null,selectedChord:o??null}}),toggleSlotSelection:(e,t)=>n(s=>{const a=s.selectedSlots.some(d=>d.sectionId===e&&d.slotId===t),o=a?s.selectedSlots.filter(d=>!(d.sectionId===e&&d.slotId===t)):[...s.selectedSlots,{sectionId:e,slotId:t}],u=o[o.length-1]??null,c=iu(s.currentSong.sections,u),f=a&&s.selectionAnchor&&Bo(s.selectionAnchor)===Bo({sectionId:e,slotId:t});return{selectedSlots:o,selectedSectionId:u?.sectionId??null,selectedSlotId:u?.slotId??null,selectionAnchor:f?o[0]??u??null:s.selectionAnchor??u??null,selectedChord:c??null}}),selectRangeTo:(e,t)=>n(s=>{const a={sectionId:e,slotId:t},o=s.selectionAnchor||s.selectedSlots[s.selectedSlots.length-1]||(s.selectedSectionId&&s.selectedSlotId?{sectionId:s.selectedSectionId,slotId:s.selectedSlotId}:a),c=B1(s.currentSong.sections,o)?o:a,f=sS(s.currentSong.sections,c,a),d=f.length?f:[a],p=iu(s.currentSong.sections,a);return{selectedSlots:d,selectedSectionId:a.sectionId,selectedSlotId:a.slotId,selectionAnchor:c,selectedChord:p??null}}),moveSelection:(e,t,s="move")=>{let a=!1;return n(o=>{const u=kg(o.currentSong.sections),c=fv(o.currentSong.sections,e),f=fv(o.currentSong.sections,t);if(c===-1||f===-1)return{};const p=(o.selectedSlots.length?o.selectedSlots:[e]).map(O=>{const B=u.findIndex(K=>K.sectionId===O.sectionId&&K.slotId===O.slotId);return B>=0?{idx:B,slot:u[B]}:null}).filter(O=>!!O).sort((O,B)=>O.idx-B.idx);if(!p.length)return{};const y=f-c,_=p.map(({idx:O})=>O+y);if(_.some(O=>O<0||O>=u.length))return{};const b=_.map(O=>u[O]);if(p.length===1&&s==="move"){const O=p[0].slot,B=b[0],K=Lr(o),j=o.currentSong.sections.map($=>({...$,measures:$.measures.map(re=>({...re,beats:re.beats.map(le=>le.id===O.slotId&&$.id===O.sectionId?{...le,chord:B.chord}:le.id===B.slotId&&$.id===B.sectionId?{...le,chord:O.chord}:le)}))}));a=!0;const F=o.selectionAnchor&&Bo(o.selectionAnchor)===Bo(e),te=au(j,t.sectionId,t.slotId,[{sectionId:B.sectionId,slotId:B.slotId}],F?{sectionId:B.sectionId,slotId:B.slotId}:o.selectionAnchor),H=te.selectedSectionId&&te.selectedSlotId?{sectionId:te.selectedSectionId,slotId:te.selectedSlotId}:null,ae=iu(j,H);return{...K,currentSong:{...o.currentSong,sections:j},selectedSectionId:te.selectedSectionId,selectedSlotId:te.selectedSlotId,selectedSlots:te.selectedSlots,selectionAnchor:te.selectionAnchor,selectedChord:ae??null}}const A=new Map;p.forEach((O,B)=>{A.set(Bo(b[B]),O.slot.chord??null)});const N=new Set;s==="move"&&p.forEach((O,B)=>{const K=Bo(O.slot),j=Bo(b[B]);K!==j&&N.add(K)});const k=Lr(o),C=o.currentSong.sections.map(O=>({...O,measures:O.measures.map(B=>({...B,beats:B.beats.map(K=>{const j=Bo({sectionId:O.id,slotId:K.id});return A.has(j)?{...K,chord:A.get(j)??null}:N.has(j)?{...K,chord:null}:K})}))}));a=!0;const R=Bo(o.selectionAnchor),D=p.find(O=>Bo(O.slot)===R),V=D?{sectionId:b[p.indexOf(D)].sectionId,slotId:b[p.indexOf(D)].slotId}:o.selectionAnchor,I=au(C,t.sectionId,t.slotId,b.map(O=>({sectionId:O.sectionId,slotId:O.slotId})),V??null),Y=I.selectedSectionId&&I.selectedSlotId?{sectionId:I.selectedSectionId,slotId:I.selectedSlotId}:null,W=iu(C,Y);return{...k,currentSong:{...o.currentSong,sections:C},selectedSectionId:I.selectedSectionId,selectedSlotId:I.selectedSlotId,selectedSlots:I.selectedSlots,selectionAnchor:I.selectionAnchor,selectedChord:W??null}}),a},selectNextSlotAfter:(e,t)=>{let s=!1;return n(a=>{const o=iS(a.currentSong.sections,e,t);if(!o)return{};const u=a.currentSong.sections.find(c=>c.id===o.sectionId)?.measures.flatMap(c=>c.beats).find(c=>c.id===o.slotId)?.chord??null;return s=!0,{selectedSectionId:o.sectionId,selectedSlotId:o.slotId,selectedChord:u,selectedSlots:[{sectionId:o.sectionId,slotId:o.slotId}],selectionAnchor:{sectionId:o.sectionId,slotId:o.slotId}}}),s},setTempo:e=>n(t=>({...Lr(t),tempo:e,currentSong:{...t.currentSong,tempo:e}})),setVolume:e=>n({volume:e}),setInstrument:e=>n({instrument:e}),setIsPlaying:e=>n({isPlaying:e}),setPlayingSlot:(e,t)=>n({playingSectionId:e,playingSlotId:t}),toggleLoop:()=>n(e=>({isLooping:!e.isLooping})),toggleMute:()=>n(e=>({isMuted:!e.isMuted})),setTitle:e=>n(t=>({...Lr(t),currentSong:{...t.currentSong,title:e}})),setArtist:e=>n(t=>({...Lr(t),currentSong:{...t.currentSong,artist:e}})),setTags:e=>n(t=>({...Lr(t),currentSong:{...t.currentSong,tags:e}})),loadSong:e=>n(t=>{const s=e.key||"C",a=e.tempo??Vf.tempo;let o=0;if(t.wheelMode==="rotating"){const c=Uf.indexOf(s);c!==-1&&(o=-(c*30))}return{...Lr(t),currentSong:{...e,tempo:a},selectedKey:s,wheelRotation:o,selectedChord:bm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:a}}),newSong:()=>n(e=>({...Lr(e),currentSong:{...Vf,id:Fs(),title:"Untitled Song",createdAt:new Date,updatedAt:new Date,tempo:Vf.tempo,sections:[{id:Fs(),name:"Verse 1",type:"verse",timeSignature:Bs,measures:Array(4).fill(null).map(()=>lu(Bs))},{id:Fs(),name:"Chorus",type:"chorus",timeSignature:Bs,measures:Array(4).fill(null).map(()=>lu(Bs))}]},selectedKey:"C",wheelRotation:0,selectedChord:bm,selectedSectionId:null,selectedSlotId:null,selectedSlots:[],selectionAnchor:null,collapsedSections:{},tempo:Vf.tempo})),addSection:e=>n(t=>{const s={id:Fs(),name:e.charAt(0).toUpperCase()+e.slice(1),type:e,timeSignature:t.currentSong.timeSignature||Bs,measures:Array(4).fill(null).map(()=>lu(t.currentSong.timeSignature||Bs))};return{...Lr(t),currentSong:{...t.currentSong,sections:[...t.currentSong.sections,s]}}}),addSuggestedSection:()=>n(e=>{const t=hv(e.currentSong.sections),s={id:Fs(),name:t.charAt(0).toUpperCase()+t.slice(1),type:t,timeSignature:e.currentSong.timeSignature||Bs,measures:Array(4).fill(null).map(()=>lu(e.currentSong.timeSignature||Bs))};return{...Lr(e),currentSong:{...e.currentSong,sections:[...e.currentSong.sections,s]}}}),addCustomSection:(e,t,s,a)=>n(o=>{const u=o.currentSong.timeSignature||Bs,c=zf(u),f=a?.beatsPerChord??4,d=c/f;let p;a?.totalBars?p=a.totalBars:d>=1?p=Math.ceil(s.length/d):p=s.length*Math.ceil(1/d);const y=[];if(d>=1)for(let k=0;k<p;k++){const C=[];for(let R=0;R<d;R++){const D=Math.floor(k*d+R);C.push({id:Fs(),chord:s[D]||null,duration:f})}y.push({id:Fs(),beats:C})}else for(let k=0;k<p;k++)y.push({id:Fs(),beats:[{id:Fs(),chord:s[k]||null,duration:c}]});const _={id:Fs(),name:e,type:t,timeSignature:u,measures:y},b=Lr(o),A=y[0]?.beats[0]?.id,N=y[0]?.beats[0]?.chord??null;return{...b,currentSong:{...o.currentSong,sections:[...o.currentSong.sections,_]},selectedSectionId:_.id,selectedSlotId:A??null,selectedSlots:A?[{sectionId:_.id,slotId:A}]:[],selectionAnchor:A?{sectionId:_.id,slotId:A}:null,selectedChord:N}}),getSuggestedSectionType:()=>{const e=nn.getState();return hv(e.currentSong.sections)},updateSection:(e,t)=>n(s=>({...Lr(s),currentSong:{...s.currentSong,sections:s.currentSong.sections.map(o=>o.id===e?{...o,...t}:o)}})),removeSection:e=>n(t=>{const s=Lr(t),{[e]:a,...o}=t.collapsedSections||{};return{...s,currentSong:{...t.currentSong,sections:t.currentSong.sections.filter(u=>u.id!==e)},collapsedSections:o}}),clearSection:e=>n(t=>{const s=t.currentSong.sections.find(c=>c.id===e);if(!s)return{};if(!s.measures.some(c=>c.beats.some(f=>f.chord!==null)))return{};const o=Lr(t),u=t.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(f=>({...f,beats:f.beats.map(d=>({...d,chord:null}))}))});return{...o,currentSong:{...t.currentSong,sections:u}}}),duplicateSection:e=>n(t=>{const s=t.currentSong.sections.find(f=>f.id===e);if(!s)return{};const a=Lr(t),o={...s,id:Fs(),name:`${s.name} (Copy)`,timeSignature:s.timeSignature||t.currentSong.timeSignature||Bs,measures:s.measures.map(f=>({...f,id:Fs(),beats:f.beats.map(d=>({...d,id:Fs()}))}))},u=t.currentSong.sections.findIndex(f=>f.id===e),c=[...t.currentSong.sections];return c.splice(u+1,0,o),{...a,currentSong:{...t.currentSong,sections:c}}}),reorderSections:e=>n(t=>({...Lr(t),currentSong:{...t.currentSong,sections:e}})),setSectionMeasures:(e,t)=>n(s=>{const a=Math.max(1,Math.min(16,Math.round(t))),o=s.currentSong.sections.map(f=>{if(f.id!==e)return f;const d=f.timeSignature||s.currentSong.timeSignature||Bs;let p=[...f.measures];if(p.length<a)for(;p.length<a;)p.push(lu(d));else p.length>a&&(p=p.slice(0,a));return{...f,measures:p}}),u=au(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Lr(s),currentSong:{...s.currentSong,sections:o},...u}}),setSectionTimeSignature:(e,t)=>n(s=>{const a=s.currentSong.sections.map(c=>{if(c.id!==e)return c;const f=zf(t);return{...c,timeSignature:t,measures:c.measures.map(d=>({...d,beats:[{id:Fs(),chord:null,duration:f}]}))}}),o=au(a,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Lr(s),currentSong:{...s.currentSong,sections:a},...o}}),setMeasureSubdivision:(e,t,s)=>n(a=>{const o=Math.max(1,Math.min(16,Math.round(s))),u=a.currentSong.sections.map(d=>{if(d.id!==e)return d;const p=d.timeSignature||a.currentSong.timeSignature||Bs,y=zf(p);return{...d,measures:d.measures.map(_=>{if(_.id!==t)return _;const b=y/o,A=Array.from({length:o}).map((N,k)=>{const C=_.beats[k];return{id:C?.id??Fs(),chord:C?.chord??null,duration:b}});return{..._,beats:A}})}}),c=au(u,a.selectedSectionId,a.selectedSlotId,a.selectedSlots,a.selectionAnchor);return{...Lr(a),currentSong:{...a.currentSong,sections:u},...c}}),setSectionSubdivision:(e,t)=>n(s=>{const a=Math.max(1,Math.min(16,Math.round(t))),o=s.currentSong.sections.map(f=>{if(f.id!==e)return f;const d=f.timeSignature||s.currentSong.timeSignature||Bs,y=zf(d)/a;return{...f,measures:f.measures.map(_=>{const b=Array.from({length:a}).map((A,N)=>{const k=_.beats[N];return{id:k?.id??Fs(),chord:k?.chord??null,duration:y}});return{..._,beats:b}})}}),u=au(o,s.selectedSectionId,s.selectedSlotId,s.selectedSlots,s.selectionAnchor);return{...Lr(s),currentSong:{...s.currentSong,sections:o},...u}}),addChordToSlot:(e,t,s)=>n(a=>{const o=Lr(a),u=a.currentSong.sections.map(c=>c.id!==t?c:{...c,measures:c.measures.map(f=>({...f,beats:f.beats.map(d=>d.id!==s?d:{...d,chord:e})}))});return{...o,currentSong:{...a.currentSong,sections:u}}}),clearSlot:(e,t)=>n(s=>{if(!s.currentSong.sections.some(c=>c.id===e&&c.measures.some(f=>f.beats.some(d=>d.id===t&&d.chord))))return{};const o=Lr(s),u=s.currentSong.sections.map(c=>c.id!==e?c:{...c,measures:c.measures.map(f=>({...f,beats:f.beats.map(d=>d.id!==t?d:{...d,chord:null})}))});return{...o,currentSong:{...s.currentSong,sections:u}}}),clearTimeline:()=>n(e=>{if(!e.currentSong.sections.some(o=>o.measures.some(u=>u.beats.some(c=>c.chord!==null))))return{};const s=Lr(e),a=e.currentSong.sections.map(o=>({...o,measures:o.measures.map(u=>({...u,beats:u.beats.map(c=>({...c,chord:null}))}))}));return{...s,currentSong:{...e.currentSong,sections:a},selectedChord:null}}),moveChord:(e,t,s,a)=>n(o=>{let u=null,c=null;if(o.currentSong.sections.forEach(p=>{p.measures.forEach(y=>{y.beats.forEach(_=>{_.id===t&&(u=_.chord),_.id===a&&(c=_.chord)})})}),!u&&!c)return{};const f=Lr(o),d=o.currentSong.sections.map(p=>({...p,measures:p.measures.map(y=>({...y,beats:y.beats.map(_=>_.id===t?{..._,chord:c}:_.id===a?{..._,chord:u}:_)}))}));return{...f,currentSong:{...o.currentSong,sections:d}}}),undo:()=>n(e=>{if(!e.historyPast.length)return{};const t=e.historyPast[e.historyPast.length-1],s=e.historyPast.slice(0,-1),a=[qf(e.currentSong),...e.historyFuture].slice(0,Gm),o=dv(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:qf(t),historyPast:s,historyFuture:a,canUndo:s.length>0,canRedo:a.length>0,tempo:t.tempo??e.tempo,...o}}),redo:()=>n(e=>{if(!e.historyFuture.length)return{};const t=e.historyFuture[0],s=e.historyFuture.slice(1),a=[...e.historyPast,qf(e.currentSong)].slice(-Gm),o=dv(t,e.selectedSectionId,e.selectedSlotId,e.selectedSlots,e.selectionAnchor);return{currentSong:qf(t),historyPast:a,historyFuture:s,canUndo:a.length>0,canRedo:s.length>0,tempo:t.tempo??e.tempo,...o}})}),{name:"songwriter-wheel-storage",partialize:n=>({currentSong:n.currentSong,tempo:n.tempo,volume:n.volume,instrument:n.instrument,isMuted:n.isMuted})}));function wc(n,e,t,s){const a=(s-90)*Math.PI/180;return{x:n+t*Math.cos(a),y:e+t*Math.sin(a)}}function aS(n,e,t,s,a){const o=wc(n,e,t,s),u=wc(n,e,t,a),c=a-s<=180?"0":"1";return["M",o.x,o.y,"A",t,t,0,c,1,u.x,u.y].join(" ")}function oS(n,e,t,s,a,o){const u=wc(n,e,s,o),c=wc(n,e,s,a),f=wc(n,e,t,o),d=wc(n,e,t,a),p=o-a<=180?"0":"1";return["M",u.x,u.y,"A",s,s,0,p,0,c.x,c.y,"L",d.x,d.y,"A",t,t,0,p,1,f.x,f.y,"Z"].join(" ")}function Ax(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=Ax(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function qt(){for(var n,e,t=0,s="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=Ax(n))&&(s&&(s+=" "),s+=e);return s}const Tx="15.1.22",pv=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),mv=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),Wm=(n,e)=>({startTime:e,type:"setValue",value:n}),Cx=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),kx=(n,e,{startTime:t,target:s,timeConstant:a})=>s+(e-s)*Math.exp((t-n)/a),xh=n=>n.type==="exponentialRampToValue",K1=n=>n.type==="linearRampToValue",yc=n=>xh(n)||K1(n),jg=n=>n.type==="setValue",Nl=n=>n.type==="setValueCurve",J1=(n,e,t,s)=>{const a=n[e];return a===void 0?s:yc(a)||jg(a)?a.value:Nl(a)?a.values[a.values.length-1]:kx(t,J1(n,e-1,a.startTime,s),a)},gv=(n,e,t,s,a)=>t===void 0?[s.insertTime,a]:yc(t)?[t.endTime,t.value]:jg(t)?[t.startTime,t.value]:Nl(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,J1(n,e-1,t.startTime,a)],Ym=n=>n.type==="cancelAndHold",$m=n=>n.type==="cancelScheduledValues",gc=n=>Ym(n)||$m(n)?n.cancelTime:xh(n)||K1(n)?n.endTime:n.startTime,bv=(n,e,t,{endTime:s,value:a})=>t===a?a:0<t&&0<a||t<0&&a<0?t*(a/t)**((n-e)/(s-e)):0,vv=(n,e,t,{endTime:s,value:a})=>t+(n-e)/(s-e)*(a-t),lS=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},cS=(n,{duration:e,startTime:t,values:s})=>{const a=(n-t)/e*(s.length-1);return lS(s,a)},S1=n=>n.type==="setTarget";class uS{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=gc(e);if(Ym(e)||$m(e)){const s=this._automationEvents.findIndex(o=>$m(e)&&Nl(o)?o.startTime+o.duration>=t:gc(o)>=t),a=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Ym(e)){const o=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&yc(a)){if(o!==void 0&&S1(o))throw new Error("The internal list is malformed.");const u=o===void 0?a.insertTime:Nl(o)?o.startTime+o.duration:gc(o),c=o===void 0?this._defaultValue:Nl(o)?o.values[o.values.length-1]:o.value,f=xh(a)?bv(t,u,c,a):vv(t,u,c,a),d=xh(a)?pv(f,t,this._currenTime):mv(f,t,this._currenTime);this._automationEvents.push(d)}if(o!==void 0&&S1(o)&&this._automationEvents.push(Wm(this.getValue(t),t)),o!==void 0&&Nl(o)&&o.startTime+o.duration>t){const u=t-o.startTime,c=(o.values.length-1)/o.duration,f=Math.max(2,1+Math.ceil(u*c)),d=u/(f-1)*c,p=o.values.slice(0,f);if(d<1)for(let y=1;y<f;y+=1){const _=d*y%1;p[y]=o.values[y-1]*(1-_)+o.values[y]*_}this._automationEvents[this._automationEvents.length-1]=Cx(p,o.startTime,u)}}}else{const s=this._automationEvents.findIndex(u=>gc(u)>t),a=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(a!==void 0&&Nl(a)&&gc(a)+a.duration>t)return!1;const o=xh(e)?pv(e.value,e.endTime,this._currenTime):K1(e)?mv(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(o);else{if(Nl(e)&&t+e.duration>gc(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,o)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>gc(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),a=s[0];S1(a)&&s.unshift(Wm(J1(this._automationEvents,t-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(u=>gc(u)>e),s=this._automationEvents[t],a=(t===-1?this._automationEvents.length:t)-1,o=this._automationEvents[a];if(o!==void 0&&S1(o)&&(s===void 0||!yc(s)||s.insertTime>e))return kx(e,J1(this._automationEvents,a-1,o.startTime,this._defaultValue),o);if(o!==void 0&&jg(o)&&(s===void 0||!yc(s)))return o.value;if(o!==void 0&&Nl(o)&&(s===void 0||!yc(s)||o.startTime+o.duration>e))return e<o.startTime+o.duration?cS(e,o):o.values[o.values.length-1];if(o!==void 0&&yc(o)&&(s===void 0||!yc(s)))return o.value;if(s!==void 0&&xh(s)){const[u,c]=gv(this._automationEvents,a,o,s,this._defaultValue);return bv(e,u,c,s)}if(s!==void 0&&K1(s)){const[u,c]=gv(this._automationEvents,a,o,s,this._defaultValue);return vv(e,u,c,s)}return this._defaultValue}}const hS=n=>({cancelTime:n,type:"cancelAndHold"}),fS=n=>({cancelTime:n,type:"cancelScheduledValues"}),dS=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),pS=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),mS=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),gS=()=>new DOMException("","AbortError"),bS=n=>(e,t,[s,a,o],u)=>{n(e[a],[t,s,o],c=>c[0]===t&&c[1]===s,u)},vS=n=>(e,t,s)=>{const a=[];for(let o=0;o<s.numberOfInputs;o+=1)a.push(new Set);n.set(e,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},yS=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},Lh=new WeakSet,jx=new WeakMap,Eg=new WeakMap,Ex=new WeakMap,Mg=new WeakMap,Cp=new WeakMap,Mx=new WeakMap,Xm=new WeakMap,Zm=new WeakMap,Qm=new WeakMap,Lx={construct(){return Lx}},xS=n=>{try{const e=new Proxy(n,Lx);new e}catch{return!1}return!0},yv=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,xv=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),a=s.match(yv);for(;a!==null;){const o=a[1].slice(1,-1),u=a[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());t.push(u),s=s.slice(a[0].length).replace(/^[\s]+/,""),a=s.match(yv)}return[t.join(";"),s]},wv=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},_v=n=>{if(!xS(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},wS=(n,e,t,s,a,o,u,c,f,d,p,y,_)=>{let b=0;return(A,N,k={credentials:"omit"})=>{const C=p.get(A);if(C!==void 0&&C.has(N))return Promise.resolve();const R=d.get(A);if(R!==void 0){const I=R.get(N);if(I!==void 0)return I}const D=o(A),V=D.audioWorklet===void 0?a(N).then(([I,Y])=>{const[W,O]=xv(I,Y),B=`${W};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${O}
})})(window,'_AWGS')`;return t(B)}).then(()=>{const I=_._AWGS.pop();if(I===void 0)throw new SyntaxError;s(D.currentTime,D.sampleRate,()=>I(class{},void 0,(Y,W)=>{if(Y.trim()==="")throw e();const O=Zm.get(D);if(O!==void 0){if(O.has(Y))throw e();_v(W),wv(W.parameterDescriptors),O.set(Y,W)}else _v(W),wv(W.parameterDescriptors),Zm.set(D,new Map([[Y,W]]))},D.sampleRate,void 0,void 0))}):Promise.all([a(N),Promise.resolve(n(y,y))]).then(([[I,Y],W])=>{const O=b+1;b=O;const[B,K]=xv(I,Y),H=`${B};((AudioWorkletProcessor,registerProcessor)=>{${K}
})(${W?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${W?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${W?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${O}',class extends AudioWorkletProcessor{process(){return !1}})`,ae=new Blob([H],{type:"application/javascript; charset=utf-8"}),$=URL.createObjectURL(ae);return D.audioWorklet.addModule($,k).then(()=>{if(c(D))return D;const re=u(D);return re.audioWorklet.addModule($,k).then(()=>re)}).then(re=>{if(f===null)throw new SyntaxError;try{new f(re,`__sac${O}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL($))});return R===void 0?d.set(A,new Map([[N,V]])):R.set(N,V),V.then(()=>{const I=p.get(A);I===void 0?p.set(A,new Set([N])):I.add(N)}).finally(()=>{const I=d.get(A);I!==void 0&&I.delete(N)}),V}},co=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},kp=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},Ox=(n,e,t,s)=>{const a=co(n,e),o=kp(a,u=>u[0]===t&&u[1]===s);return a.size===0&&n.delete(e),o},pd=n=>co(Mx,n),Oh=n=>{if(Lh.has(n))throw new Error("The AudioNode is already stored.");Lh.add(n),pd(n).forEach(e=>e(!0))},Dx=n=>"port"in n,md=n=>{if(!Lh.has(n))throw new Error("The AudioNode is not stored.");Lh.delete(n),pd(n).forEach(e=>e(!1))},Km=(n,e)=>{!Dx(n)&&e.every(t=>t.size===0)&&md(n)},_S=(n,e,t,s,a,o,u,c,f,d,p,y,_)=>{const b=new WeakMap;return(A,N,k,C,R)=>{const{activeInputs:D,passiveInputs:V}=o(N),{outputs:I}=o(A),Y=c(A),W=O=>{const B=f(N),K=f(A);if(O){const j=Ox(V,A,k,C);n(D,A,j,!1),!R&&!y(A)&&t(K,B,k,C),_(N)&&Oh(N)}else{const j=s(D,A,k,C);e(V,C,j,!1),!R&&!y(A)&&a(K,B,k,C);const F=u(N);if(F===0)p(N)&&Km(N,D);else{const te=b.get(N);te!==void 0&&clearTimeout(te),b.set(N,setTimeout(()=>{p(N)&&Km(N,D)},F*1e3))}}};return d(I,[N,k,C],O=>O[0]===N&&O[1]===k&&O[2]===C,!0)?(Y.add(W),p(A)?n(D,A,[k,C,W],!0):e(V,C,[A,k,W],!0),!0):!1}},SS=n=>(e,t,[s,a,o],u)=>{const c=e.get(s);c===void 0?e.set(s,new Set([[a,t,o]])):n(c,[a,t,o],f=>f[0]===a&&f[1]===t,u)},NS=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const a=()=>{t.removeEventListener("ended",a),t.disconnect(s),s.disconnect()};t.addEventListener("ended",a)},AS=n=>(e,t)=>{n(e).add(t)},TS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},CS=(n,e,t,s,a,o)=>class extends n{constructor(c,f){const d=a(c),p={...TS,...f},y=s(d,p),_=o(d)?e():null;super(c,!1,y,_),this._nativeAnalyserNode=y}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const f=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=f,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const f=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=f,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},li=(n,e)=>n.context===e,kS=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!li(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=n(u,d)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},ep=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Go=()=>new DOMException("","IndexSizeError"),Lg=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?Go():s}})(n.getChannelData)},jS={numberOfChannels:1},ES=(n,e,t,s,a,o,u,c)=>{let f=null;return class Rx{constructor(p){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:y,numberOfChannels:_,sampleRate:b}={...jS,...p};f===null&&(f=new a(1,1,44100));const A=s!==null&&e(o,o)?new s({length:y,numberOfChannels:_,sampleRate:b}):f.createBuffer(_,y,b);if(A.numberOfChannels===0)throw t();return typeof A.copyFromChannel!="function"?(u(A),Lg(A)):e(ep,()=>ep(A))||c(A),n.add(A),A}static[Symbol.hasInstance](p){return p!==null&&typeof p=="object"&&Object.getPrototypeOf(p)===Rx.prototype||n.has(p)}}},qi=-34028234663852886e22,bi=-qi,kl=n=>Lh.has(n),MS={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},LS=(n,e,t,s,a,o,u,c)=>class extends n{constructor(d,p){const y=o(d),_={...MS,...p},b=a(y,_),A=u(y),N=A?e():null;super(d,!1,b,N),this._audioBufferSourceNodeRenderer=N,this._isBufferNullified=!1,this._isBufferSet=_.buffer!==null,this._nativeAudioBufferSourceNode=b,this._onended=null,this._playbackRate=t(this,A,b.playbackRate,bi,qi)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(d){if(this._nativeAudioBufferSourceNode.buffer=d,d!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(d){this._nativeAudioBufferSourceNode.loop=d}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(d){this._nativeAudioBufferSourceNode.loopEnd=d}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(d){this._nativeAudioBufferSourceNode.loopStart=d}get onended(){return this._onended}set onended(d){const p=typeof d=="function"?c(this,d):null;this._nativeAudioBufferSourceNode.onended=p;const y=this._nativeAudioBufferSourceNode.onended;this._onended=y!==null&&y===p?d:y}get playbackRate(){return this._playbackRate}start(d=0,p=0,y){if(this._nativeAudioBufferSourceNode.start(d,p,y),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=y===void 0?[d,p]:[d,p,y]),this.context.state!=="closed"){Oh(this);const _=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",_),kl(this)&&md(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",_)}}stop(d=0){this._nativeAudioBufferSourceNode.stop(d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=d)}},OS=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const f=async(d,p)=>{let y=t(d);const _=li(y,p);if(!_){const b={buffer:y.buffer,channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,loop:y.loop,loopEnd:y.loopEnd,loopStart:y.loopStart,playbackRate:y.playbackRate.value};y=e(p,b),u!==null&&y.start(...u),c!==null&&y.stop(c)}return o.set(p,y),_?await n(p,d.playbackRate,y.playbackRate):await s(p,d.playbackRate,y.playbackRate),await a(d,p,y),y};return{set start(d){u=d},set stop(d){c=d},render(d,p){const y=o.get(p);return y!==void 0?Promise.resolve(y):f(d,p)}}},DS=n=>"playbackRate"in n,RS=n=>"frequency"in n&&"gain"in n,IS=n=>"offset"in n,VS=n=>!("frequency"in n)&&"gain"in n,FS=n=>"detune"in n&&"frequency"in n&&!("gain"in n),BS=n=>"pan"in n,vi=n=>co(jx,n),gd=n=>co(Ex,n),Jm=(n,e)=>{const{activeInputs:t}=vi(n);t.forEach(a=>a.forEach(([o])=>{e.includes(n)||Jm(o,[...e,n])}));const s=DS(n)?[n.playbackRate]:Dx(n)?Array.from(n.parameters.values()):RS(n)?[n.Q,n.detune,n.frequency,n.gain]:IS(n)?[n.offset]:VS(n)?[n.gain]:FS(n)?[n.detune,n.frequency]:BS(n)?[n.pan]:[];for(const a of s){const o=gd(a);o!==void 0&&o.activeInputs.forEach(([u])=>Jm(u,e))}kl(n)&&md(n)},Ix=n=>{Jm(n.destination,[])},PS=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),zS=(n,e,t,s,a,o,u,c,f)=>class extends n{constructor(p={}){if(f===null)throw new Error("Missing the native AudioContext constructor.");let y;try{y=new f(p)}catch(A){throw A.code===12&&A.message==="sampleRate is not in range"?t():A}if(y===null)throw s();if(!PS(p.latencyHint))throw new TypeError(`The provided value '${p.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(p.sampleRate!==void 0&&y.sampleRate!==p.sampleRate)throw t();super(y,2);const{latencyHint:_}=p,{sampleRate:b}=y;if(this._baseLatency=typeof y.baseLatency=="number"?y.baseLatency:_==="balanced"?512/b:_==="interactive"||_===void 0?256/b:_==="playback"?1024/b:Math.max(2,Math.min(128,Math.round(_*b/128)))*128/b,this._nativeAudioContext=y,f.name==="webkitAudioContext"?(this._nativeGainNode=y.createGain(),this._nativeOscillatorNode=y.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(y.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,y.state==="running"){this._state="suspended";const A=()=>{this._state==="suspended"&&(this._state=null),y.removeEventListener("statechange",A)};y.addEventListener("statechange",A)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Ix(this)}))}createMediaElementSource(p){return new a(this,{mediaElement:p})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(p){return new u(this,{mediaStream:p})}createMediaStreamTrackSource(p){return new c(this,{mediaStreamTrack:p})}resume(){return this._state==="suspended"?new Promise((p,y)=>{const _=()=>{this._nativeAudioContext.removeEventListener("statechange",_),this._nativeAudioContext.state==="running"?p():this.resume().then(p,y)};this._nativeAudioContext.addEventListener("statechange",_)}):this._nativeAudioContext.resume().catch(p=>{throw p===void 0||p.code===15?e():p})}suspend(){return this._nativeAudioContext.suspend().catch(p=>{throw p===void 0?e():p})}},qS=(n,e,t,s,a,o,u,c)=>class extends n{constructor(d,p){const y=o(d),_=u(y),b=a(y,p,_),A=_?e(c):null;super(d,!1,b,A),this._isNodeOfNativeOfflineAudioContext=_,this._nativeAudioDestinationNode=b}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(d){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(d>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=d}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(d){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=d}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},US=n=>{const e=new WeakMap,t=async(s,a)=>{const o=a.destination;return e.set(a,o),await n(s,a,o),o};return{render(s,a){const o=e.get(a);return o!==void 0?Promise.resolve(o):t(s,a)}}},HS=(n,e,t,s,a,o,u,c)=>(f,d)=>{const p=d.listener,y=()=>{const I=new Float32Array(1),Y=e(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),W=u(d);let O=!1,B=[0,0,-1,0,1,0],K=[0,0,0];const j=()=>{if(O)return;O=!0;const ae=s(d,256,9,0);ae.onaudioprocess=({inputBuffer:$})=>{const re=[o($,I,0),o($,I,1),o($,I,2),o($,I,3),o($,I,4),o($,I,5)];re.some((pe,be)=>pe!==B[be])&&(p.setOrientation(...re),B=re);const le=[o($,I,6),o($,I,7),o($,I,8)];le.some((pe,be)=>pe!==K[be])&&(p.setPosition(...le),K=le)},Y.connect(ae)},F=ae=>$=>{$!==B[ae]&&(B[ae]=$,p.setOrientation(...B))},te=ae=>$=>{$!==K[ae]&&(K[ae]=$,p.setPosition(...K))},H=(ae,$,re)=>{const le=t(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:$});le.connect(Y,0,ae),le.start(),Object.defineProperty(le.offset,"defaultValue",{get(){return $}});const pe=n({context:f},W,le.offset,bi,qi);return c(pe,"value",be=>()=>be.call(pe),be=>P=>{try{be.call(pe,P)}catch(M){if(M.code!==9)throw M}j(),W&&re(P)}),pe.cancelAndHoldAtTime=(be=>W?()=>{throw a()}:(...P)=>{const M=be.apply(pe,P);return j(),M})(pe.cancelAndHoldAtTime),pe.cancelScheduledValues=(be=>W?()=>{throw a()}:(...P)=>{const M=be.apply(pe,P);return j(),M})(pe.cancelScheduledValues),pe.exponentialRampToValueAtTime=(be=>W?()=>{throw a()}:(...P)=>{const M=be.apply(pe,P);return j(),M})(pe.exponentialRampToValueAtTime),pe.linearRampToValueAtTime=(be=>W?()=>{throw a()}:(...P)=>{const M=be.apply(pe,P);return j(),M})(pe.linearRampToValueAtTime),pe.setTargetAtTime=(be=>W?()=>{throw a()}:(...P)=>{const M=be.apply(pe,P);return j(),M})(pe.setTargetAtTime),pe.setValueAtTime=(be=>W?()=>{throw a()}:(...P)=>{const M=be.apply(pe,P);return j(),M})(pe.setValueAtTime),pe.setValueCurveAtTime=(be=>W?()=>{throw a()}:(...P)=>{const M=be.apply(pe,P);return j(),M})(pe.setValueCurveAtTime),pe};return{forwardX:H(0,0,F(0)),forwardY:H(1,0,F(1)),forwardZ:H(2,-1,F(2)),positionX:H(6,0,te(0)),positionY:H(7,0,te(1)),positionZ:H(8,0,te(2)),upX:H(3,0,F(3)),upY:H(4,1,F(4)),upZ:H(5,0,F(5))}},{forwardX:_,forwardY:b,forwardZ:A,positionX:N,positionY:k,positionZ:C,upX:R,upY:D,upZ:V}=p.forwardX===void 0?y():p;return{get forwardX(){return _},get forwardY(){return b},get forwardZ(){return A},get positionX(){return N},get positionY(){return k},get positionZ(){return C},get upX(){return R},get upY(){return D},get upZ(){return V}}},tp=n=>"context"in n,bd=n=>tp(n[0]),xu=(n,e,t,s)=>{for(const a of n)if(t(a)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},Sv=(n,e,[t,s],a)=>{xu(n,[e,t,s],o=>o[0]===e&&o[1]===t,a)},Nv=(n,[e,t,s],a)=>{const o=n.get(e);o===void 0?n.set(e,new Set([[t,s]])):xu(o,[t,s],u=>u[0]===t,a)},Bh=n=>"inputs"in n,np=(n,e,t,s)=>{if(Bh(e)){const a=e.inputs[s];return n.connect(a,t,0),[a,t,0]}return n.connect(e,t,s),[e,t,s]},Vx=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},GS=(n,e,t)=>kp(n,s=>s[0]===e&&s[1]===t),Fx=(n,e)=>{if(!pd(n).delete(e))throw new Error("Missing the expected event listener.")},Bx=(n,e,t)=>{const s=co(n,e),a=kp(s,o=>o[0]===t);return s.size===0&&n.delete(e),a},rp=(n,e,t,s)=>{Bh(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},Ar=n=>co(Eg,n),ed=n=>co(Mg,n),mu=n=>Xm.has(n),P1=n=>!Lh.has(n),Av=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),a=n.createGain(),o=n.createBuffer(1,2,44100),u=o.getChannelData(0);u[0]=1,u[1]=1;const c=n.createBufferSource();c.buffer=o,c.loop=!0,c.connect(s).connect(n.destination),c.connect(a),c.disconnect(a),s.onaudioprocess=f=>{const d=f.inputBuffer.getChannelData(0);Array.prototype.some.call(d,p=>p===1)?t(!0):t(!1),c.stop(),s.onaudioprocess=null,c.disconnect(s),s.disconnect(n.destination)},c.start()}}),vm=(n,e)=>{const t=new Map;for(const s of n)for(const a of s){const o=t.get(a);t.set(a,o===void 0?1:o+1)}t.forEach((s,a)=>e(a,s))},sp=n=>"context"in n,WS=n=>{const e=new Map;n.connect=(t=>(s,a=0,o=0)=>{const u=sp(s)?t(s,a,o):t(s,a),c=e.get(s);return c===void 0?e.set(s,[{input:o,output:a}]):c.every(f=>f.input!==o||f.output!==a)&&c.push({input:o,output:a}),u})(n.connect.bind(n)),n.disconnect=(t=>(s,a,o)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[u,c]of e){const f=c.filter(d=>d.output!==s);f.length===0?e.delete(u):e.set(u,f)}else if(e.has(s))if(a===void 0)e.delete(s);else{const u=e.get(s);if(u!==void 0){const c=u.filter(f=>f.output!==a&&(f.input!==o||o===void 0));c.length===0?e.delete(s):e.set(s,c)}}for(const[u,c]of e)c.forEach(f=>{sp(u)?n.connect(u,f.output,f.input):n.connect(u,f.output)})})(n.disconnect)},YS=(n,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=gd(e),{outputs:u}=vi(n),c=pd(n),f=d=>{const p=Ar(n),y=ed(e);if(d){const _=Bx(o,n,t);Sv(a,n,_,!1),!s&&!mu(n)&&p.connect(y,t)}else{const _=GS(a,n,t);Nv(o,_,!1),!s&&!mu(n)&&p.disconnect(y,t)}};return xu(u,[e,t],d=>d[0]===e&&d[1]===t,!0)?(c.add(f),kl(n)?Sv(a,n,[t,f],!0):Nv(o,[n,t,f],!0),!0):!1},$S=(n,e,t,s)=>{const{activeInputs:a,passiveInputs:o}=vi(e),u=Vx(a[s],n,t);return u===null?[Ox(o,n,t,s)[2],!1]:[u[2],!0]},XS=(n,e,t)=>{const{activeInputs:s,passiveInputs:a}=gd(e),o=Vx(s,n,t);return o===null?[Bx(a,n,t)[1],!1]:[o[2],!0]},Og=(n,e,t,s,a)=>{const[o,u]=$S(n,t,s,a);if(o!==null&&(Fx(n,o),u&&!e&&!mu(n)&&rp(Ar(n),Ar(t),s,a)),kl(t)){const{activeInputs:c}=vi(t);Km(t,c)}},Dg=(n,e,t,s)=>{const[a,o]=XS(n,t,s);a!==null&&(Fx(n,a),o&&!e&&!mu(n)&&Ar(n).disconnect(ed(t),s))},ZS=(n,e)=>{const t=vi(n),s=[];for(const a of t.outputs)bd(a)?Og(n,e,...a):Dg(n,e,...a),s.push(a[0]);return t.outputs.clear(),s},QS=(n,e,t)=>{const s=vi(n),a=[];for(const o of s.outputs)o[1]===t&&(bd(o)?Og(n,e,...o):Dg(n,e,...o),a.push(o[0]),s.outputs.delete(o));return a},KS=(n,e,t,s,a)=>{const o=vi(n);return Array.from(o.outputs).filter(u=>u[0]===t&&(s===void 0||u[1]===s)&&(a===void 0||u[2]===a)).map(u=>(bd(u)?Og(n,e,...u):Dg(n,e,...u),o.outputs.delete(u),u[0]))},JS=(n,e,t,s,a,o,u,c,f,d,p,y,_,b,A,N)=>class extends d{constructor(C,R,D,V){super(D),this._context=C,this._nativeAudioNode=D;const I=p(C);y(I)&&t(Av,()=>Av(I,N))!==!0&&WS(D),Eg.set(this,D),Mx.set(this,new Set),C.state!=="closed"&&R&&Oh(this),n(this,V,D)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(C){this._nativeAudioNode.channelCount=C}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(C){this._nativeAudioNode.channelCountMode=C}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(C){this._nativeAudioNode.channelInterpretation=C}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(C,R=0,D=0){if(R<0||R>=this._nativeAudioNode.numberOfOutputs)throw a();const V=p(this._context),I=A(V);if(_(C)||b(C))throw o();if(tp(C)){const O=Ar(C);try{const K=np(this._nativeAudioNode,O,R,D),j=P1(this);(I||j)&&this._nativeAudioNode.disconnect(...K),this.context.state!=="closed"&&!j&&P1(C)&&Oh(C)}catch(K){throw K.code===12?o():K}if(e(this,C,R,D,I)){const K=f([this],C);vm(K,s(I))}return C}const Y=ed(C);if(Y.name==="playbackRate"&&Y.maxValue===1024)throw u();try{this._nativeAudioNode.connect(Y,R),(I||P1(this))&&this._nativeAudioNode.disconnect(Y,R)}catch(O){throw O.code===12?o():O}if(YS(this,C,R,I)){const O=f([this],C);vm(O,s(I))}}disconnect(C,R,D){let V;const I=p(this._context),Y=A(I);if(C===void 0)V=ZS(this,Y);else if(typeof C=="number"){if(C<0||C>=this.numberOfOutputs)throw a();V=QS(this,Y,C)}else{if(R!==void 0&&(R<0||R>=this.numberOfOutputs)||tp(C)&&D!==void 0&&(D<0||D>=C.numberOfInputs))throw a();if(V=KS(this,Y,C,R,D),V.length===0)throw o()}for(const W of V){const O=f([this],W);vm(O,c)}}},e6=(n,e,t,s,a,o,u,c,f,d,p,y,_)=>(b,A,N,k=null,C=null)=>{const R=N.value,D=new uS(R),V=A?s(D):null,I={get defaultValue(){return R},get maxValue(){return k===null?N.maxValue:k},get minValue(){return C===null?N.minValue:C},get value(){return N.value},set value(Y){N.value=Y,I.setValueAtTime(Y,b.context.currentTime)},cancelAndHoldAtTime(Y){if(typeof N.cancelAndHoldAtTime=="function")V===null&&D.flush(b.context.currentTime),D.add(a(Y)),N.cancelAndHoldAtTime(Y);else{const W=Array.from(D).pop();V===null&&D.flush(b.context.currentTime),D.add(a(Y));const O=Array.from(D).pop();N.cancelScheduledValues(Y),W!==O&&O!==void 0&&(O.type==="exponentialRampToValue"?N.exponentialRampToValueAtTime(O.value,O.endTime):O.type==="linearRampToValue"?N.linearRampToValueAtTime(O.value,O.endTime):O.type==="setValue"?N.setValueAtTime(O.value,O.startTime):O.type==="setValueCurve"&&N.setValueCurveAtTime(O.values,O.startTime,O.duration))}return I},cancelScheduledValues(Y){return V===null&&D.flush(b.context.currentTime),D.add(o(Y)),N.cancelScheduledValues(Y),I},exponentialRampToValueAtTime(Y,W){if(Y===0)throw new RangeError;if(!Number.isFinite(W)||W<0)throw new RangeError;const O=b.context.currentTime;return V===null&&D.flush(O),Array.from(D).length===0&&(D.add(d(R,O)),N.setValueAtTime(R,O)),D.add(u(Y,W)),N.exponentialRampToValueAtTime(Y,W),I},linearRampToValueAtTime(Y,W){const O=b.context.currentTime;return V===null&&D.flush(O),Array.from(D).length===0&&(D.add(d(R,O)),N.setValueAtTime(R,O)),D.add(c(Y,W)),N.linearRampToValueAtTime(Y,W),I},setTargetAtTime(Y,W,O){return V===null&&D.flush(b.context.currentTime),D.add(f(Y,W,O)),N.setTargetAtTime(Y,W,O),I},setValueAtTime(Y,W){return V===null&&D.flush(b.context.currentTime),D.add(d(Y,W)),N.setValueAtTime(Y,W),I},setValueCurveAtTime(Y,W,O){const B=Y instanceof Float32Array?Y:new Float32Array(Y);if(y!==null&&y.name==="webkitAudioContext"){const K=W+O,j=b.context.sampleRate,F=Math.ceil(W*j),te=Math.floor(K*j),H=te-F,ae=new Float32Array(H);for(let re=0;re<H;re+=1){const le=(B.length-1)/O*((F+re)/j-W),pe=Math.floor(le),be=Math.ceil(le);ae[re]=pe===be?B[pe]:(1-(le-pe))*B[pe]+(1-(be-le))*B[be]}V===null&&D.flush(b.context.currentTime),D.add(p(ae,W,O)),N.setValueCurveAtTime(ae,W,O);const $=te/j;$<K&&_(I,ae[ae.length-1],$),_(I,B[B.length-1],K)}else V===null&&D.flush(b.context.currentTime),D.add(p(B,W,O)),N.setValueCurveAtTime(B,W,O);return I}};return t.set(I,N),e.set(I,b),n(I,V),I},t6=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:a}=t;e.exponentialRampToValueAtTime(a,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:a}=t;e.linearRampToValueAtTime(a,s)}else if(t.type==="setTarget"){const{startTime:s,target:a,timeConstant:o}=t;e.setTargetAtTime(a,s,o)}else if(t.type==="setValue"){const{startTime:s,value:a}=t;e.setValueAtTime(a,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:a,values:o}=t;e.setValueCurveAtTime(o,a,s)}else throw new Error("Can't apply an unknown automation.")}});class Px{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,a)=>e.call(t,s,a,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const n6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},r6=(n,e,t,s,a,o,u,c,f,d,p,y,_,b)=>class extends e{constructor(N,k,C){var R;const D=c(N),V=f(D),I=p({...n6,...C});_(I);const Y=Zm.get(D),W=Y?.get(k),O=V||D.state!=="closed"?D:(R=u(D))!==null&&R!==void 0?R:D,B=a(O,V?null:N.baseLatency,d,k,W,I),K=V?s(k,I,W):null;super(N,!0,B,K);const j=[];B.parameters.forEach((te,H)=>{const ae=t(this,V,te);j.push([H,ae])}),this._nativeAudioWorkletNode=B,this._onprocessorerror=null,this._parameters=new Px(j),V&&n(D,this);const{activeInputs:F}=o(this);y(B,F)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(N){const k=typeof N=="function"?b(this,N):null;this._nativeAudioWorkletNode.onprocessorerror=k;const C=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=C!==null&&C===k?N:C}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function ip(n,e,t,s,a){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,a);else{const o=n.getChannelData(s);if(e[t].byteLength===0)e[t]=o.slice(a,a+128);else{const u=new Float32Array(o.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(u)}}}const zx=(n,e,t,s,a)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,a):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],a)},ap=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const a=[],o=typeof e=="number"?e:e[s];for(let u=0;u<o;u+=1)a.push(new Float32Array(128));t.push(a)}return t},s6=(n,e)=>{const t=co(Qm,n),s=Ar(e);return co(t,s)},i6=async(n,e,t,s,a,o,u)=>{const c=e===null?Math.ceil(n.context.length/128)*128:e.length,f=s.channelCount*s.numberOfInputs,d=a.reduce((k,C)=>k+C,0),p=d===0?null:t.createBuffer(d,c,t.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const y=vi(n),_=await s6(t,n),b=ap(s.numberOfInputs,s.channelCount),A=ap(s.numberOfOutputs,a),N=Array.from(n.parameters.keys()).reduce((k,C)=>({...k,[C]:new Float32Array(128)}),{});for(let k=0;k<c;k+=128){if(s.numberOfInputs>0&&e!==null)for(let C=0;C<s.numberOfInputs;C+=1)for(let R=0;R<s.channelCount;R+=1)ip(e,b[C],R,R,k);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:C},R)=>{ip(e,N,C,f+R,k)});for(let C=0;C<s.numberOfInputs;C+=1)for(let R=0;R<a[C];R+=1)A[C][R].byteLength===0&&(A[C][R]=new Float32Array(128));try{const C=b.map((D,V)=>y.activeInputs[V].size===0?[]:D),R=u(k/t.sampleRate,t.sampleRate,()=>_.process(C,A,N));if(p!==null)for(let D=0,V=0;D<s.numberOfOutputs;D+=1){for(let I=0;I<a[D];I+=1)zx(p,A[D],I,V+I,k);V+=a[D]}if(!R)break}catch(C){n.dispatchEvent(new ErrorEvent("processorerror",{colno:C.colno,filename:C.filename,lineno:C.lineno,message:C.message}));break}}return p},a6=(n,e,t,s,a,o,u,c,f,d,p,y,_,b,A,N)=>(k,C,R)=>{const D=new WeakMap;let V=null;const I=async(Y,W)=>{let O=p(Y),B=null;const K=li(O,W),j=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(y===null){const F=j.reduce(($,re)=>$+re,0),te=a(W,{channelCount:Math.max(1,F),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,F)}),H=[];for(let $=0;$<Y.numberOfOutputs;$+=1)H.push(s(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:j[$]}));const ae=u(W,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1});ae.connect=e.bind(null,H),ae.disconnect=f.bind(null,H),B=[te,H,ae]}else K||(O=new y(W,k));if(D.set(W,B===null?O:B[2]),B!==null){if(V===null){if(R===void 0)throw new Error("Missing the processor constructor.");if(_===null)throw new Error("Missing the native OfflineAudioContext constructor.");const re=Y.channelCount*Y.numberOfInputs,le=R.parameterDescriptors===void 0?0:R.parameterDescriptors.length,pe=re+le;V=i6(Y,pe===0?null:await(async()=>{const P=new _(pe,Math.ceil(Y.context.length/128)*128,W.sampleRate),M=[],G=[];for(let oe=0;oe<C.numberOfInputs;oe+=1)M.push(u(P,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),G.push(a(P,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const J=await Promise.all(Array.from(Y.parameters.values()).map(async oe=>{const fe=o(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:oe.value});return await b(P,oe,fe.offset),fe})),Q=s(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,re+le)});for(let oe=0;oe<C.numberOfInputs;oe+=1){M[oe].connect(G[oe]);for(let fe=0;fe<C.channelCount;fe+=1)G[oe].connect(Q,fe,oe*C.channelCount+fe)}for(const[oe,fe]of J.entries())fe.connect(Q,0,re+oe),fe.start(0);return Q.connect(P.destination),await Promise.all(M.map(oe=>A(Y,P,oe))),N(P)})(),W,C,j,R,d)}const F=await V,te=t(W,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[H,ae,$]=B;F!==null&&(te.buffer=F,te.start(0)),te.connect(H);for(let re=0,le=0;re<Y.numberOfOutputs;re+=1){const pe=ae[re];for(let be=0;be<j[re];be+=1)H.connect(pe,le+be,be);le+=j[re]}return $}if(K)for(const[F,te]of Y.parameters.entries())await n(W,te,O.parameters.get(F));else for(const[F,te]of Y.parameters.entries())await b(W,te,O.parameters.get(F));return await A(Y,W,O),O};return{render(Y,W){c(W,Y);const O=D.get(W);return O!==void 0?Promise.resolve(O):I(Y,W)}}},o6=(n,e,t,s,a,o,u,c,f,d,p,y,_,b,A,N,k,C,R,D)=>class extends A{constructor(I,Y){super(I,Y),this._nativeContext=I,this._audioWorklet=n===void 0?void 0:{addModule:(W,O)=>n(this,W,O)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new a(this)}createBuffer(I,Y,W){return new t({length:Y,numberOfChannels:I,sampleRate:W})}createBufferSource(){return new s(this)}createChannelMerger(I=6){return new o(this,{numberOfInputs:I})}createChannelSplitter(I=6){return new u(this,{numberOfOutputs:I})}createConstantSource(){return new c(this)}createConvolver(){return new f(this)}createDelay(I=1){return new p(this,{maxDelayTime:I})}createDynamicsCompressor(){return new y(this)}createGain(){return new _(this)}createIIRFilter(I,Y){return new b(this,{feedback:Y,feedforward:I})}createOscillator(){return new N(this)}createPanner(){return new k(this)}createPeriodicWave(I,Y,W={disableNormalization:!1}){return new C(this,{...W,imag:Y,real:I})}createStereoPanner(){return new R(this)}createWaveShaper(){return new D(this)}decodeAudioData(I,Y,W){return d(this._nativeContext,I).then(O=>(typeof Y=="function"&&Y(O),O),O=>{throw typeof W=="function"&&W(O),O})}},l6={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},c6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(d,p){const y=o(d),_={...l6,...p},b=a(y,_),A=u(y),N=A?t():null;super(d,!1,b,N),this._Q=e(this,A,b.Q,bi,qi),this._detune=e(this,A,b.detune,1200*Math.log2(bi),-1200*Math.log2(bi)),this._frequency=e(this,A,b.frequency,d.sampleRate/2,0),this._gain=e(this,A,b.gain,40*Math.log10(bi),qi),this._nativeBiquadFilterNode=b,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(d){this._nativeBiquadFilterNode.type=d}getFrequencyResponse(d,p,y){try{this._nativeBiquadFilterNode.getFrequencyResponse(d,p,y)}catch(_){throw _.code===11?s():_}if(d.length!==p.length||p.length!==y.length)throw s()}},u6=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const p=li(d,f);if(!p){const y={Q:d.Q.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,gain:d.gain.value,type:d.type};d=e(f,y)}return o.set(f,d),p?(await n(f,c.Q,d.Q),await n(f,c.detune,d.detune),await n(f,c.frequency,d.frequency),await n(f,c.gain,d.gain)):(await s(f,c.Q,d.Q),await s(f,c.detune,d.detune),await s(f,c.frequency,d.frequency),await s(f,c.gain,d.gain)),await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},h6=(n,e)=>(t,s)=>{const a=e.get(t);if(a!==void 0)return a;const o=n.get(t);if(o!==void 0)return o;try{const u=s();return u instanceof Promise?(n.set(t,u),u.catch(()=>!1).then(c=>(n.delete(t),e.set(t,c),c))):(e.set(t,u),u)}catch{return e.set(t,!1),!1}},f6={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},d6=(n,e,t,s,a)=>class extends n{constructor(u,c){const f=s(u),d={...f6,...c},p=t(f,d),y=a(f)?e():null;super(u,!1,p,y)}},p6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!li(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=n(u,d)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},m6={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},g6=(n,e,t,s,a,o)=>class extends n{constructor(c,f){const d=s(c),p=o({...m6,...f}),y=t(d,p),_=a(d)?e():null;super(c,!1,y,_)}},b6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!li(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=n(u,d)}return s.set(u,c),await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},v6=n=>(e,t,s)=>n(t,e,s),y6=n=>(e,t,s=0,a=0)=>{const o=e[s];if(o===void 0)throw n();return sp(t)?o.connect(t,0,a):o.connect(t,0)},x6=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=e.createBuffer(1,2,44100);return s.buffer=a,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},w6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},_6=(n,e,t,s,a,o,u)=>class extends n{constructor(f,d){const p=a(f),y={...w6,...d},_=s(p,y),b=o(p),A=b?t():null;super(f,!1,_,A),this._constantSourceNodeRenderer=A,this._nativeConstantSourceNode=_,this._offset=e(this,b,_.offset,bi,qi),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(f){const d=typeof f=="function"?u(this,f):null;this._nativeConstantSourceNode.onended=d;const p=this._nativeConstantSourceNode.onended;this._onended=p!==null&&p===d?f:p}start(f=0){if(this._nativeConstantSourceNode.start(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=f),this.context.state!=="closed"){Oh(this);const d=()=>{this._nativeConstantSourceNode.removeEventListener("ended",d),kl(this)&&md(this)};this._nativeConstantSourceNode.addEventListener("ended",d)}}stop(f=0){this._nativeConstantSourceNode.stop(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=f)}},S6=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null;const f=async(d,p)=>{let y=t(d);const _=li(y,p);if(!_){const b={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,offset:y.offset.value};y=e(p,b),u!==null&&y.start(u),c!==null&&y.stop(c)}return o.set(p,y),_?await n(p,d.offset,y.offset):await s(p,d.offset,y.offset),await a(d,p,y),y};return{set start(d){u=d},set stop(d){c=d},render(d,p){const y=o.get(p);return y!==void 0?Promise.resolve(y):f(d,p)}}},N6=n=>e=>(n[0]=e,n[0]),A6={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},T6=(n,e,t,s,a,o)=>class extends n{constructor(c,f){const d=s(c),p={...A6,...f},y=t(d,p),b=a(d)?e():null;super(c,!1,y,b),this._isBufferNullified=!1,this._nativeConvolverNode=y,p.buffer!==null&&o(this,p.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const f=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=f.createBuffer(1,1,f.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},C6=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!li(c,u)){const d={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=n(u,d)}return s.set(u,c),Bh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},k6=(n,e)=>(t,s,a)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,a)}catch(o){throw o.name==="SyntaxError"?n():o}},j6=()=>new DOMException("","DataCloneError"),Tv=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const a=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>a();try{e.postMessage(n,[n])}catch{}finally{a()}})},E6=(n,e,t,s,a,o,u,c,f,d,p)=>(y,_)=>{const b=u(y)?y:o(y);if(a.has(_)){const A=t();return Promise.reject(A)}try{a.add(_)}catch{}return e(f,()=>f(b))?b.decodeAudioData(_).then(A=>(Tv(_).catch(()=>{}),e(c,()=>c(A))||p(A),n.add(A),A)):new Promise((A,N)=>{const k=async()=>{try{await Tv(_)}catch{}},C=R=>{N(R),k()};try{b.decodeAudioData(_,R=>{typeof R.copyFromChannel!="function"&&(d(R),Lg(R)),n.add(R),k().then(()=>A(R))},R=>{C(R===null?s():R)})}catch(R){C(R)}})},M6=(n,e,t,s,a,o,u,c)=>(f,d)=>{const p=e.get(f);if(p===void 0)throw new Error("Missing the expected cycle count.");const y=o(f.context),_=c(y);if(p===d){if(e.delete(f),!_&&u(f)){const b=s(f),{outputs:A}=t(f);for(const N of A)if(bd(N)){const k=s(N[0]);n(b,k,N[1],N[2])}else{const k=a(N[0]);b.connect(k,N[1])}}}else e.set(f,p-d)},L6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},O6=(n,e,t,s,a,o,u)=>class extends n{constructor(f,d){const p=a(f),y={...L6,...d},_=s(p,y),b=o(p),A=b?t(y.maxDelayTime):null;super(f,!1,_,A),this._delayTime=e(this,b,_.delayTime),u(this,y.maxDelayTime)}get delayTime(){return this._delayTime}},D6=(n,e,t,s,a)=>o=>{const u=new WeakMap,c=async(f,d)=>{let p=t(f);const y=li(p,d);if(!y){const _={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,delayTime:p.delayTime.value,maxDelayTime:o};p=e(d,_)}return u.set(d,p),y?await n(d,f.delayTime,p.delayTime):await s(d,f.delayTime,p.delayTime),await a(f,d,p),p};return{render(f,d){const p=u.get(d);return p!==void 0?Promise.resolve(p):c(f,d)}}},R6=n=>(e,t,s,a)=>n(e[a],o=>o[0]===t&&o[1]===s),I6=n=>(e,t)=>{n(e).delete(t)},V6=n=>"delayTime"in n,F6=(n,e,t)=>function s(a,o){const u=tp(o)?o:t(n,o);if(V6(u))return[];if(a[0]===u)return[a];if(a.includes(u))return[];const{outputs:c}=e(u);return Array.from(c).map(f=>s([...a,u],f[0])).reduce((f,d)=>f.concat(d),[])},N1=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},B6=n=>(e,t=void 0,s=void 0,a=0)=>t===void 0?e.forEach(o=>o.disconnect()):typeof t=="number"?N1(n,e,t).disconnect():sp(t)?s===void 0?e.forEach(o=>o.disconnect(t)):a===void 0?N1(n,e,s).disconnect(t,0):N1(n,e,s).disconnect(t,0,a):s===void 0?e.forEach(o=>o.disconnect(t)):N1(n,e,s).disconnect(t,0),P6={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},z6=(n,e,t,s,a,o,u,c)=>class extends n{constructor(d,p){const y=o(d),_={...P6,...p},b=s(y,_),A=u(y),N=A?t():null;super(d,!1,b,N),this._attack=e(this,A,b.attack),this._knee=e(this,A,b.knee),this._nativeDynamicsCompressorNode=b,this._ratio=e(this,A,b.ratio),this._release=e(this,A,b.release),this._threshold=e(this,A,b.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(d){const p=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=d,d>2)throw this._nativeDynamicsCompressorNode.channelCount=p,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(d){const p=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=d,d==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=p,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},q6=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const p=li(d,f);if(!p){const y={attack:d.attack.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,knee:d.knee.value,ratio:d.ratio.value,release:d.release.value,threshold:d.threshold.value};d=e(f,y)}return o.set(f,d),p?(await n(f,c.attack,d.attack),await n(f,c.knee,d.knee),await n(f,c.ratio,d.ratio),await n(f,c.release,d.release),await n(f,c.threshold,d.threshold)):(await s(f,c.attack,d.attack),await s(f,c.knee,d.knee),await s(f,c.ratio,d.ratio),await s(f,c.release,d.release),await s(f,c.threshold,d.threshold)),await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},U6=()=>new DOMException("","EncodingError"),H6=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const a=n.document.head;if(a===null)s(new SyntaxError);else{const o=n.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),c=URL.createObjectURL(u),f=n.onerror,d=()=>{n.onerror=f,URL.revokeObjectURL(c)};n.onerror=(p,y,_,b,A)=>{if(y===c||y===n.location.href&&_===1&&b===1)return d(),s(A),!1;if(f!==null)return f(p,y,_,b,A)},o.onerror=()=>{d(),s(new SyntaxError)},o.onload=()=>{d(),t()},o.src=c,o.type="module",a.appendChild(o)}}),G6=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,a){if(s!==null){let o=this._listeners.get(s);o===void 0&&(o=n(this,s),typeof s=="function"&&this._listeners.set(s,o)),this._nativeEventTarget.addEventListener(t,o,a)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,a){const o=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,o===void 0?null:o,a)}},W6=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},Y6=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},$6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},X6=(n,e,t,s,a,o)=>class extends n{constructor(c,f){const d=a(c),p={...$6,...f},y=s(d,p),_=o(d),b=_?t():null;super(c,!1,y,b),this._gain=e(this,_,y.gain,bi,qi)}get gain(){return this._gain}},Z6=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const p=li(d,f);if(!p){const y={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:d.gain.value};d=e(f,y)}return o.set(f,d),p?await n(f,c.gain,d.gain):await s(f,c.gain,d.gain),await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},Q6=(n,e)=>t=>e(n,t),K6=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},J6=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},eN=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},tN=n=>e=>n.get(e),qs=()=>new DOMException("","InvalidStateError"),nN=n=>e=>{const t=n.get(e);if(t===void 0)throw qs();return t},rN=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},sN=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},jp=()=>new DOMException("","InvalidAccessError"),iN=n=>{n.getFrequencyResponse=(e=>(t,s,a)=>{if(t.length!==s.length||s.length!==a.length)throw jp();return e.call(n,t,s,a)})(n.getFrequencyResponse)},aN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},oN=(n,e,t,s,a,o)=>class extends n{constructor(c,f){const d=s(c),p=a(d),y={...aN,...f},_=e(d,p?null:c.baseLatency,y),b=p?t(y.feedback,y.feedforward):null;super(c,!1,_,b),iN(_),this._nativeIIRFilterNode=_,o(this,1)}getFrequencyResponse(c,f,d){return this._nativeIIRFilterNode.getFrequencyResponse(c,f,d)}},qx=(n,e,t,s,a,o,u,c,f,d,p)=>{const y=d.length;let _=c;for(let b=0;b<y;b+=1){let A=t[0]*d[b];for(let N=1;N<a;N+=1){const k=_-N&f-1;A+=t[N]*o[k],A-=n[N]*u[k]}for(let N=a;N<s;N+=1)A+=t[N]*o[_-N&f-1];for(let N=a;N<e;N+=1)A-=n[N]*u[_-N&f-1];o[_]=d[b],u[_]=A,_=_+1&f-1,p[b]=A}return _},lN=(n,e,t,s)=>{const a=t instanceof Float64Array?t:new Float64Array(t),o=s instanceof Float64Array?s:new Float64Array(s),u=a.length,c=o.length,f=Math.min(u,c);if(a[0]!==1){for(let A=0;A<u;A+=1)o[A]/=a[0];for(let A=1;A<c;A+=1)a[A]/=a[0]}const d=32,p=new Float32Array(d),y=new Float32Array(d),_=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),b=n.numberOfChannels;for(let A=0;A<b;A+=1){const N=n.getChannelData(A),k=_.getChannelData(A);p.fill(0),y.fill(0),qx(a,u,o,c,f,p,y,0,d,N,k)}return _},cN=(n,e,t,s,a)=>(o,u)=>{const c=new WeakMap;let f=null;const d=async(p,y)=>{let _=null,b=e(p);const A=li(b,y);if(y.createIIRFilter===void 0?_=n(y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):A||(b=y.createIIRFilter(u,o)),c.set(y,_===null?b:_),_!==null){if(f===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new t(p.context.destination.channelCount,p.context.length,y.sampleRate);f=(async()=>{await s(p,k,k.destination);const C=await a(k);return lN(C,y,o,u)})()}const N=await f;return _.buffer=N,_.start(0),_}return await s(p,y,b),b};return{render(p,y){const _=c.get(y);return _!==void 0?Promise.resolve(_):d(p,y)}}},uN=(n,e,t,s,a,o)=>u=>(c,f)=>{const d=n.get(c);if(d===void 0){if(!u&&o(c)){const p=s(c),{outputs:y}=t(c);for(const _ of y)if(bd(_)){const b=s(_[0]);e(p,b,_[1],_[2])}else{const b=a(_[0]);p.disconnect(b,_[1])}}n.set(c,f)}else n.set(c,d+f)},hN=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},fN=(n,e)=>t=>n.has(t)||e(t),dN=(n,e)=>t=>n.has(t)||e(t),pN=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},mN=n=>e=>n!==null&&e instanceof n,gN=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,bN=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,vN=(n,e)=>t=>n(t)||e(t),yN=n=>e=>n!==null&&e instanceof n,xN=n=>n!==null&&n.isSecureContext,wN=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o),f=e(c,u);if(s(c))throw TypeError();super(o,!0,f,null),this._nativeMediaElementAudioSourceNode=f}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},_N={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},SN=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o);if(s(c))throw new TypeError;const f={..._N,...u},d=e(c,f);super(o,!1,d,null),this._nativeMediaStreamAudioDestinationNode=d}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},NN=(n,e,t,s)=>class extends n{constructor(o,u){const c=t(o),f=e(c,u);if(s(c))throw new TypeError;super(o,!0,f,null),this._nativeMediaStreamAudioSourceNode=f}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},AN=(n,e,t)=>class extends n{constructor(a,o){const u=t(a),c=e(u,o);super(a,!0,c,null)}},TN=(n,e,t,s,a,o)=>class extends t{constructor(c,f){super(c),this._nativeContext=c,Cp.set(this,c),s(c)&&a.set(c,new Set),this._destination=new n(this,f),this._listener=e(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const f=typeof c=="function"?o(this,c):null;this._nativeContext.onstatechange=f;const d=this._nativeContext.onstatechange;this._onstatechange=d!==null&&d===f?c:d}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},td=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},CN=(n,e)=>(t,s,a)=>{const o=new Set;return t.connect=(u=>(c,f=0,d=0)=>{const p=o.size===0;if(e(c))return u.call(t,c,f,d),n(o,[c,f,d],y=>y[0]===c&&y[1]===f&&y[2]===d,!0),p&&s(),c;u.call(t,c,f),n(o,[c,f],y=>y[0]===c&&y[1]===f,!0),p&&s()})(t.connect),t.disconnect=(u=>(c,f,d)=>{const p=o.size>0;if(c===void 0)u.apply(t),o.clear();else if(typeof c=="number"){u.call(t,c);for(const _ of o)_[1]===c&&o.delete(_)}else{e(c)?u.call(t,c,f,d):u.call(t,c,f);for(const _ of o)_[0]===c&&(f===void 0||_[1]===f)&&(d===void 0||_[2]===d)&&o.delete(_)}const y=o.size===0;p&&y&&a()})(t.disconnect),t},Dr=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},Ms=(n,e)=>{Dr(n,e,"channelCount"),Dr(n,e,"channelCountMode"),Dr(n,e,"channelInterpretation")},Cv=n=>typeof n.getFloatTimeDomainData=="function",kN=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let a=0;a<s;a+=1)e[a]=(t[a]-128)*.0078125;return e}},jN=(n,e)=>(t,s)=>{const a=t.createAnalyser();if(Ms(a,s),!(s.maxDecibels>s.minDecibels))throw e();return Dr(a,s,"fftSize"),Dr(a,s,"maxDecibels"),Dr(a,s,"minDecibels"),Dr(a,s,"smoothingTimeConstant"),n(Cv,()=>Cv(a))||kN(a),a},EN=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Kr=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},MN=n=>{n.start=(e=>{let t=!1;return(s=0,a=0,o)=>{if(t)throw qs();e.call(n,s,a,o),t=!0}})(n.start)},Rg=n=>{n.start=(e=>(t=0,s=0,a)=>{if(typeof a=="number"&&a<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,a)})(n.start)},Ig=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},LN=(n,e,t,s,a,o,u,c,f,d,p)=>(y,_)=>{const b=y.createBufferSource();return Ms(b,_),Kr(b,_,"playbackRate"),Dr(b,_,"buffer"),Dr(b,_,"loop"),Dr(b,_,"loopEnd"),Dr(b,_,"loopStart"),e(t,()=>t(y))||MN(b),e(s,()=>s(y))||f(b),e(a,()=>a(y))||d(b,y),e(o,()=>o(y))||Rg(b),e(u,()=>u(y))||p(b,y),e(c,()=>c(y))||Ig(b),n(y,b),b},ON=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,DN=(n,e)=>(t,s,a)=>{const o=t.destination;if(o.channelCount!==s)try{o.channelCount=s}catch{}a&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:s});const u=n(t,{channelCount:s,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(u,"channelCount",c=>()=>c.call(u),c=>f=>{c.call(u,f);try{o.channelCount=f}catch(d){if(f>o.maxChannelCount)throw d}}),e(u,"channelCountMode",c=>()=>c.call(u),c=>f=>{c.call(u,f),o.channelCountMode=f}),e(u,"channelInterpretation",c=>()=>c.call(u),c=>f=>{c.call(u,f),o.channelInterpretation=f}),Object.defineProperty(u,"maxChannelCount",{get:()=>o.maxChannelCount}),u.connect(o),u},RN=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,IN=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},VN=(n,e,t,s,a)=>(o,u,c,f,d,p)=>{if(c!==null)try{const y=new c(o,f,p),_=new Map;let b=null;if(Object.defineProperties(y,{channelCount:{get:()=>p.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>b,set:A=>{typeof b=="function"&&y.removeEventListener("processorerror",b),b=typeof A=="function"?A:null,typeof b=="function"&&y.addEventListener("processorerror",b)}}}),y.addEventListener=(A=>(...N)=>{if(N[0]==="processorerror"){const k=typeof N[1]=="function"?N[1]:typeof N[1]=="object"&&N[1]!==null&&typeof N[1].handleEvent=="function"?N[1].handleEvent:null;if(k!==null){const C=_.get(N[1]);C!==void 0?N[1]=C:(N[1]=R=>{R.type==="error"?(Object.defineProperties(R,{type:{value:"processorerror"}}),k(R)):k(new ErrorEvent(N[0],{...R}))},_.set(k,N[1]))}}return A.call(y,"error",N[1],N[2]),A.call(y,...N)})(y.addEventListener),y.removeEventListener=(A=>(...N)=>{if(N[0]==="processorerror"){const k=_.get(N[1]);k!==void 0&&(_.delete(N[1]),N[1]=k)}return A.call(y,"error",N[1],N[2]),A.call(y,N[0],N[1],N[2])})(y.removeEventListener),p.numberOfOutputs!==0){const A=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return y.connect(A).connect(o.destination),a(y,()=>A.disconnect(),()=>A.connect(o.destination))}return y}catch(y){throw y.code===11?s():y}if(d===void 0)throw s();return IN(p),e(o,u,d,p)},Ux=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),FN=n=>new Promise((e,t)=>{const{port1:s,port2:a}=new MessageChannel;s.onmessage=({data:o})=>{s.close(),a.close(),e(o)},s.onmessageerror=({data:o})=>{s.close(),a.close(),t(o)},a.postMessage(n)}),BN=async(n,e)=>{const t=await FN(e);return new n(t)},PN=(n,e,t,s)=>{let a=Qm.get(n);a===void 0&&(a=new WeakMap,Qm.set(n,a));const o=BN(t,s);return a.set(e,o),o},zN=(n,e,t,s,a,o,u,c,f,d,p,y,_)=>(b,A,N,k)=>{if(k.numberOfInputs===0&&k.numberOfOutputs===0)throw f();const C=Array.isArray(k.outputChannelCount)?k.outputChannelCount:Array.from(k.outputChannelCount);if(C.some(z=>z<1))throw f();if(C.length!==k.numberOfOutputs)throw e();if(k.channelCountMode!=="explicit")throw f();const R=k.channelCount*k.numberOfInputs,D=C.reduce((z,ke)=>z+ke,0),V=N.parameterDescriptors===void 0?0:N.parameterDescriptors.length;if(R+V>6||D>6)throw f();const I=new MessageChannel,Y=[],W=[];for(let z=0;z<k.numberOfInputs;z+=1)Y.push(u(b,{channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation,gain:1})),W.push(a(b,{channelCount:k.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:k.channelCount}));const O=[];if(N.parameterDescriptors!==void 0)for(const{defaultValue:z,maxValue:ke,minValue:ct,name:Ue}of N.parameterDescriptors){const Me=o(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:k.parameterData[Ue]!==void 0?k.parameterData[Ue]:z===void 0?0:z});Object.defineProperties(Me.offset,{defaultValue:{get:()=>z===void 0?0:z},maxValue:{get:()=>ke===void 0?bi:ke},minValue:{get:()=>ct===void 0?qi:ct}}),O.push(Me)}const B=s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,R+V)}),K=Ux(A,b.sampleRate),j=c(b,K,R+V,Math.max(1,D)),F=a(b,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),te=[];for(let z=0;z<k.numberOfOutputs;z+=1)te.push(s(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[z]}));for(let z=0;z<k.numberOfInputs;z+=1){Y[z].connect(W[z]);for(let ke=0;ke<k.channelCount;ke+=1)W[z].connect(B,ke,z*k.channelCount+ke)}const H=new Px(N.parameterDescriptors===void 0?[]:N.parameterDescriptors.map(({name:z},ke)=>{const ct=O[ke];return ct.connect(B,0,R+ke),ct.start(0),[z,ct.offset]}));B.connect(j);let ae=k.channelInterpretation,$=null;const re=k.numberOfOutputs===0?[j]:te,le={get bufferSize(){return K},get channelCount(){return k.channelCount},set channelCount(z){throw t()},get channelCountMode(){return k.channelCountMode},set channelCountMode(z){throw t()},get channelInterpretation(){return ae},set channelInterpretation(z){for(const ke of Y)ke.channelInterpretation=z;ae=z},get context(){return j.context},get inputs(){return Y},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get onprocessorerror(){return $},set onprocessorerror(z){typeof $=="function"&&le.removeEventListener("processorerror",$),$=typeof z=="function"?z:null,typeof $=="function"&&le.addEventListener("processorerror",$)},get parameters(){return H},get port(){return I.port2},addEventListener(...z){return j.addEventListener(z[0],z[1],z[2])},connect:n.bind(null,re),disconnect:d.bind(null,re),dispatchEvent(...z){return j.dispatchEvent(z[0])},removeEventListener(...z){return j.removeEventListener(z[0],z[1],z[2])}},pe=new Map;I.port1.addEventListener=(z=>(...ke)=>{if(ke[0]==="message"){const ct=typeof ke[1]=="function"?ke[1]:typeof ke[1]=="object"&&ke[1]!==null&&typeof ke[1].handleEvent=="function"?ke[1].handleEvent:null;if(ct!==null){const Ue=pe.get(ke[1]);Ue!==void 0?ke[1]=Ue:(ke[1]=Me=>{p(b.currentTime,b.sampleRate,()=>ct(Me))},pe.set(ct,ke[1]))}}return z.call(I.port1,ke[0],ke[1],ke[2])})(I.port1.addEventListener),I.port1.removeEventListener=(z=>(...ke)=>{if(ke[0]==="message"){const ct=pe.get(ke[1]);ct!==void 0&&(pe.delete(ke[1]),ke[1]=ct)}return z.call(I.port1,ke[0],ke[1],ke[2])})(I.port1.removeEventListener);let be=null;Object.defineProperty(I.port1,"onmessage",{get:()=>be,set:z=>{typeof be=="function"&&I.port1.removeEventListener("message",be),be=typeof z=="function"?z:null,typeof be=="function"&&(I.port1.addEventListener("message",be),I.port1.start())}}),N.prototype.port=I.port1;let P=null;PN(b,le,N,k).then(z=>P=z);const G=ap(k.numberOfInputs,k.channelCount),J=ap(k.numberOfOutputs,C),Q=N.parameterDescriptors===void 0?[]:N.parameterDescriptors.reduce((z,{name:ke})=>({...z,[ke]:new Float32Array(128)}),{});let oe=!0;const fe=()=>{k.numberOfOutputs>0&&j.disconnect(F);for(let z=0,ke=0;z<k.numberOfOutputs;z+=1){const ct=te[z];for(let Ue=0;Ue<C[z];Ue+=1)F.disconnect(ct,ke+Ue,Ue);ke+=C[z]}},de=new Map;j.onaudioprocess=({inputBuffer:z,outputBuffer:ke})=>{if(P!==null){const ct=y(le);for(let Ue=0;Ue<K;Ue+=128){for(let Me=0;Me<k.numberOfInputs;Me+=1)for(let it=0;it<k.channelCount;it+=1)ip(z,G[Me],it,it,Ue);N.parameterDescriptors!==void 0&&N.parameterDescriptors.forEach(({name:Me},it)=>{ip(z,Q,Me,R+it,Ue)});for(let Me=0;Me<k.numberOfInputs;Me+=1)for(let it=0;it<C[Me];it+=1)J[Me][it].byteLength===0&&(J[Me][it]=new Float32Array(128));try{const Me=G.map((Ye,ut)=>{if(ct[ut].size>0)return de.set(ut,K/128),Ye;const Pe=de.get(ut);return Pe===void 0?[]:(Ye.every(nt=>nt.every(tt=>tt===0))&&(Pe===1?de.delete(ut):de.set(ut,Pe-1)),Ye)});oe=p(b.currentTime+Ue/b.sampleRate,b.sampleRate,()=>P.process(Me,J,Q));for(let Ye=0,ut=0;Ye<k.numberOfOutputs;Ye+=1){for(let at=0;at<C[Ye];at+=1)zx(ke,J[Ye],at,ut+at,Ue);ut+=C[Ye]}}catch(Me){oe=!1,le.dispatchEvent(new ErrorEvent("processorerror",{colno:Me.colno,filename:Me.filename,lineno:Me.lineno,message:Me.message}))}if(!oe){for(let Me=0;Me<k.numberOfInputs;Me+=1){Y[Me].disconnect(W[Me]);for(let it=0;it<k.channelCount;it+=1)W[Ue].disconnect(B,it,Me*k.channelCount+it)}if(N.parameterDescriptors!==void 0){const Me=N.parameterDescriptors.length;for(let it=0;it<Me;it+=1){const Ye=O[it];Ye.disconnect(B,0,R+it),Ye.stop()}}B.disconnect(j),j.onaudioprocess=null,xe?fe():Xe();break}}}};let xe=!1;const we=u(b,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ve=()=>j.connect(we).connect(b.destination),Xe=()=>{j.disconnect(we),we.disconnect()},Je=()=>{if(oe){Xe(),k.numberOfOutputs>0&&j.connect(F);for(let z=0,ke=0;z<k.numberOfOutputs;z+=1){const ct=te[z];for(let Ue=0;Ue<C[z];Ue+=1)F.connect(ct,ke+Ue,Ue);ke+=C[z]}}xe=!0},Fe=()=>{oe&&(Ve(),fe()),xe=!1};return Ve(),_(le,Je,Fe)},Hx=(n,e)=>{const t=n.createBiquadFilter();return Ms(t,e),Kr(t,e,"Q"),Kr(t,e,"detune"),Kr(t,e,"frequency"),Kr(t,e,"gain"),Dr(t,e,"type"),t},qN=(n,e)=>(t,s)=>{const a=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,a),Ms(a,s),a},UN=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw qs()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw qs()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw qs()}})},vd=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return Ms(t,e),UN(t),t},HN=(n,e,t,s,a)=>(o,u)=>{if(o.createConstantSource===void 0)return t(o,u);const c=o.createConstantSource();return Ms(c,u),Kr(c,u,"offset"),e(s,()=>s(o))||Rg(c),e(a,()=>a(o))||Ig(c),n(o,c),c},Ph=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),GN=(n,e,t,s)=>(a,{offset:o,...u})=>{const c=a.createBuffer(1,2,44100),f=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=t(a,{...u,gain:o}),p=c.getChannelData(0);p[0]=1,p[1]=1,f.buffer=c,f.loop=!0;const y={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(A){d.channelCount=A},get channelCountMode(){return d.channelCountMode},set channelCountMode(A){d.channelCountMode=A},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(A){d.channelInterpretation=A},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return f.onended},set onended(A){f.onended=A},addEventListener(...A){return f.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return f.dispatchEvent(A[0])},removeEventListener(...A){return f.removeEventListener(A[0],A[1],A[2])},start(A=0){f.start.call(f,A)},stop(A=0){f.stop.call(f,A)}},_=()=>f.connect(d),b=()=>f.disconnect(d);return n(a,f),s(Ph(y,d),_,b)},WN=(n,e)=>(t,s)=>{const a=t.createConvolver();if(Ms(a,s),s.disableNormalization===a.normalize&&(a.normalize=!s.disableNormalization),Dr(a,s,"buffer"),s.channelCount>2||(e(a,"channelCount",o=>()=>o.call(a),o=>u=>{if(u>2)throw n();return o.call(a,u)}),s.channelCountMode==="max"))throw n();return e(a,"channelCountMode",o=>()=>o.call(a),o=>u=>{if(u==="max")throw n();return o.call(a,u)}),a},Gx=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return Ms(t,e),Kr(t,e,"delayTime"),t},YN=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(Ms(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return Kr(s,t,"attack"),Kr(s,t,"knee"),Kr(s,t,"ratio"),Kr(s,t,"release"),Kr(s,t,"threshold"),s},Gi=(n,e)=>{const t=n.createGain();return Ms(t,e),Kr(t,e,"gain"),t},$N=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const a=e.createIIRFilter(s.feedforward,s.feedback);return Ms(a,s),a};function XN(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function ZN(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function kv(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=ZN(t,e),t[0]+=n[s];return t}const QN=(n,e,t,s)=>(a,o,{channelCount:u,channelCountMode:c,channelInterpretation:f,feedback:d,feedforward:p})=>{const y=Ux(o,a.sampleRate),_=d instanceof Float64Array?d:new Float64Array(d),b=p instanceof Float64Array?p:new Float64Array(p),A=_.length,N=b.length,k=Math.min(A,N);if(A===0||A>20)throw s();if(_[0]===0)throw e();if(N===0||N>20)throw s();if(b[0]===0)throw e();if(_[0]!==1){for(let O=0;O<N;O+=1)b[O]/=_[0];for(let O=1;O<A;O+=1)_[O]/=_[0]}const C=t(a,y,u,u);C.channelCount=u,C.channelCountMode=c,C.channelInterpretation=f;const R=32,D=[],V=[],I=[];for(let O=0;O<u;O+=1){D.push(0);const B=new Float32Array(R),K=new Float32Array(R);B.fill(0),K.fill(0),V.push(B),I.push(K)}C.onaudioprocess=O=>{const B=O.inputBuffer,K=O.outputBuffer,j=B.numberOfChannels;for(let F=0;F<j;F+=1){const te=B.getChannelData(F),H=K.getChannelData(F);D[F]=qx(_,A,b,N,k,V[F],I[F],D[F],R,te,H)}};const Y=a.sampleRate/2;return Ph({get bufferSize(){return y},get channelCount(){return C.channelCount},set channelCount(O){C.channelCount=O},get channelCountMode(){return C.channelCountMode},set channelCountMode(O){C.channelCountMode=O},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(O){C.channelInterpretation=O},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},addEventListener(...O){return C.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return C.dispatchEvent(O[0])},getFrequencyResponse(O,B,K){if(O.length!==B.length||B.length!==K.length)throw n();const j=O.length;for(let F=0;F<j;F+=1){const te=-Math.PI*(O[F]/Y),H=[Math.cos(te),Math.sin(te)],ae=kv(b,H),$=kv(_,H),re=XN(ae,$);B[F]=Math.sqrt(re[0]*re[0]+re[1]*re[1]),K[F]=Math.atan2(re[1],re[0])}},removeEventListener(...O){return C.removeEventListener(O[0],O[1],O[2])}},C)},KN=(n,e)=>n.createMediaElementSource(e.mediaElement),JN=(n,e)=>{const t=n.createMediaStreamDestination();return Ms(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},eA=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((o,u)=>o.id<u.id?-1:o.id>u.id?1:0);const s=t.slice(0,1),a=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(a,"mediaStream",{value:e}),a},tA=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const a=new MediaStream([s]),o=t.createMediaStreamSource(a);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return o},nA=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,rA=(n,e,t,s,a,o)=>(u,c)=>{const f=u.createOscillator();return Ms(f,c),Kr(f,c,"detune"),Kr(f,c,"frequency"),c.periodicWave!==void 0?f.setPeriodicWave(c.periodicWave):Dr(f,c,"type"),e(t,()=>t(u))||Rg(f),e(s,()=>s(u))||o(f,u),e(a,()=>a(u))||Ig(f),n(u,f),f},sA=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(Ms(s,t),Kr(s,t,"orientationX"),Kr(s,t,"orientationY"),Kr(s,t,"orientationZ"),Kr(s,t,"positionX"),Kr(s,t,"positionY"),Kr(s,t,"positionZ"),Dr(s,t,"coneInnerAngle"),Dr(s,t,"coneOuterAngle"),Dr(s,t,"coneOuterGain"),Dr(s,t,"distanceModel"),Dr(s,t,"maxDistance"),Dr(s,t,"panningModel"),Dr(s,t,"refDistance"),Dr(s,t,"rolloffFactor"),s)},iA=(n,e,t,s,a,o,u,c,f,d)=>(p,{coneInnerAngle:y,coneOuterAngle:_,coneOuterGain:b,distanceModel:A,maxDistance:N,orientationX:k,orientationY:C,orientationZ:R,panningModel:D,positionX:V,positionY:I,positionZ:Y,refDistance:W,rolloffFactor:O,...B})=>{const K=p.createPanner();if(B.channelCount>2||B.channelCountMode==="max")throw u();Ms(K,B);const j={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},F=t(p,{...j,channelInterpretation:"speakers",numberOfInputs:6}),te=s(p,{...B,gain:1}),H=s(p,{...j,gain:1}),ae=s(p,{...j,gain:0}),$=s(p,{...j,gain:0}),re=s(p,{...j,gain:0}),le=s(p,{...j,gain:0}),pe=s(p,{...j,gain:0}),be=a(p,256,6,1),P=o(p,{...j,curve:new Float32Array([1,1]),oversample:"none"});let M=[k,C,R],G=[V,I,Y];const J=new Float32Array(1);be.onaudioprocess=({inputBuffer:de})=>{const xe=[f(de,J,0),f(de,J,1),f(de,J,2)];xe.some((Ve,Xe)=>Ve!==M[Xe])&&(K.setOrientation(...xe),M=xe);const we=[f(de,J,3),f(de,J,4),f(de,J,5)];we.some((Ve,Xe)=>Ve!==G[Xe])&&(K.setPosition(...we),G=we)},Object.defineProperty(ae.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(re.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0}),Object.defineProperty(pe.gain,"defaultValue",{get:()=>0});const Q={get bufferSize(){},get channelCount(){return K.channelCount},set channelCount(de){if(de>2)throw u();te.channelCount=de,K.channelCount=de},get channelCountMode(){return K.channelCountMode},set channelCountMode(de){if(de==="max")throw u();te.channelCountMode=de,K.channelCountMode=de},get channelInterpretation(){return K.channelInterpretation},set channelInterpretation(de){te.channelInterpretation=de,K.channelInterpretation=de},get coneInnerAngle(){return K.coneInnerAngle},set coneInnerAngle(de){K.coneInnerAngle=de},get coneOuterAngle(){return K.coneOuterAngle},set coneOuterAngle(de){K.coneOuterAngle=de},get coneOuterGain(){return K.coneOuterGain},set coneOuterGain(de){if(de<0||de>1)throw e();K.coneOuterGain=de},get context(){return K.context},get distanceModel(){return K.distanceModel},set distanceModel(de){K.distanceModel=de},get inputs(){return[te]},get maxDistance(){return K.maxDistance},set maxDistance(de){if(de<0)throw new RangeError;K.maxDistance=de},get numberOfInputs(){return K.numberOfInputs},get numberOfOutputs(){return K.numberOfOutputs},get orientationX(){return H.gain},get orientationY(){return ae.gain},get orientationZ(){return $.gain},get panningModel(){return K.panningModel},set panningModel(de){K.panningModel=de},get positionX(){return re.gain},get positionY(){return le.gain},get positionZ(){return pe.gain},get refDistance(){return K.refDistance},set refDistance(de){if(de<0)throw new RangeError;K.refDistance=de},get rolloffFactor(){return K.rolloffFactor},set rolloffFactor(de){if(de<0)throw new RangeError;K.rolloffFactor=de},addEventListener(...de){return te.addEventListener(de[0],de[1],de[2])},dispatchEvent(...de){return te.dispatchEvent(de[0])},removeEventListener(...de){return te.removeEventListener(de[0],de[1],de[2])}};y!==Q.coneInnerAngle&&(Q.coneInnerAngle=y),_!==Q.coneOuterAngle&&(Q.coneOuterAngle=_),b!==Q.coneOuterGain&&(Q.coneOuterGain=b),A!==Q.distanceModel&&(Q.distanceModel=A),N!==Q.maxDistance&&(Q.maxDistance=N),k!==Q.orientationX.value&&(Q.orientationX.value=k),C!==Q.orientationY.value&&(Q.orientationY.value=C),R!==Q.orientationZ.value&&(Q.orientationZ.value=R),D!==Q.panningModel&&(Q.panningModel=D),V!==Q.positionX.value&&(Q.positionX.value=V),I!==Q.positionY.value&&(Q.positionY.value=I),Y!==Q.positionZ.value&&(Q.positionZ.value=Y),W!==Q.refDistance&&(Q.refDistance=W),O!==Q.rolloffFactor&&(Q.rolloffFactor=O),(M[0]!==1||M[1]!==0||M[2]!==0)&&K.setOrientation(...M),(G[0]!==0||G[1]!==0||G[2]!==0)&&K.setPosition(...G);const oe=()=>{te.connect(K),n(te,P,0,0),P.connect(H).connect(F,0,0),P.connect(ae).connect(F,0,1),P.connect($).connect(F,0,2),P.connect(re).connect(F,0,3),P.connect(le).connect(F,0,4),P.connect(pe).connect(F,0,5),F.connect(be).connect(p.destination)},fe=()=>{te.disconnect(K),c(te,P,0,0),P.disconnect(H),H.disconnect(F),P.disconnect(ae),ae.disconnect(F),P.disconnect($),$.disconnect(F),P.disconnect(re),re.disconnect(F),P.disconnect(le),le.disconnect(F),P.disconnect(pe),pe.disconnect(F),F.disconnect(be),be.disconnect(p.destination)};return d(Ph(Q,K),oe,fe)},aA=n=>(e,{disableNormalization:t,imag:s,real:a})=>{const o=s instanceof Float32Array?s:new Float32Array(s),u=a instanceof Float32Array?a:new Float32Array(a),c=e.createPeriodicWave(u,o,{disableNormalization:t});if(Array.from(s).length<2)throw n();return c},yd=(n,e,t,s)=>n.createScriptProcessor(e,t,s),oA=(n,e)=>(t,s)=>{const a=s.channelCountMode;if(a==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const o=t.createStereoPanner();return Ms(o,s),Kr(o,s,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>a,set:u=>{if(u!==a)throw e()}}),o},lA=(n,e,t,s,a,o)=>{const c=new Float32Array([1,1]),f=Math.PI/2,d={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},p={...d,oversample:"none"},y=(A,N,k,C)=>{const R=new Float32Array(16385),D=new Float32Array(16385);for(let B=0;B<16385;B+=1){const K=B/16384*f;R[B]=Math.cos(K),D[B]=Math.sin(K)}const V=t(A,{...d,gain:0}),I=s(A,{...p,curve:R}),Y=s(A,{...p,curve:c}),W=t(A,{...d,gain:0}),O=s(A,{...p,curve:D});return{connectGraph(){N.connect(V),N.connect(Y.inputs===void 0?Y:Y.inputs[0]),N.connect(W),Y.connect(k),k.connect(I.inputs===void 0?I:I.inputs[0]),k.connect(O.inputs===void 0?O:O.inputs[0]),I.connect(V.gain),O.connect(W.gain),V.connect(C,0,0),W.connect(C,0,1)},disconnectGraph(){N.disconnect(V),N.disconnect(Y.inputs===void 0?Y:Y.inputs[0]),N.disconnect(W),Y.disconnect(k),k.disconnect(I.inputs===void 0?I:I.inputs[0]),k.disconnect(O.inputs===void 0?O:O.inputs[0]),I.disconnect(V.gain),O.disconnect(W.gain),V.disconnect(C,0,0),W.disconnect(C,0,1)}}},_=(A,N,k,C)=>{const R=new Float32Array(16385),D=new Float32Array(16385),V=new Float32Array(16385),I=new Float32Array(16385),Y=Math.floor(16385/2);for(let re=0;re<16385;re+=1)if(re>Y){const le=(re-Y)/(16384-Y)*f;R[re]=Math.cos(le),D[re]=Math.sin(le),V[re]=0,I[re]=1}else{const le=re/(16384-Y)*f;R[re]=1,D[re]=0,V[re]=Math.cos(le),I[re]=Math.sin(le)}const W=e(A,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),O=t(A,{...d,gain:0}),B=s(A,{...p,curve:R}),K=t(A,{...d,gain:0}),j=s(A,{...p,curve:D}),F=s(A,{...p,curve:c}),te=t(A,{...d,gain:0}),H=s(A,{...p,curve:V}),ae=t(A,{...d,gain:0}),$=s(A,{...p,curve:I});return{connectGraph(){N.connect(W),N.connect(F.inputs===void 0?F:F.inputs[0]),W.connect(O,0),W.connect(K,0),W.connect(te,1),W.connect(ae,1),F.connect(k),k.connect(B.inputs===void 0?B:B.inputs[0]),k.connect(j.inputs===void 0?j:j.inputs[0]),k.connect(H.inputs===void 0?H:H.inputs[0]),k.connect($.inputs===void 0?$:$.inputs[0]),B.connect(O.gain),j.connect(K.gain),H.connect(te.gain),$.connect(ae.gain),O.connect(C,0,0),te.connect(C,0,0),K.connect(C,0,1),ae.connect(C,0,1)},disconnectGraph(){N.disconnect(W),N.disconnect(F.inputs===void 0?F:F.inputs[0]),W.disconnect(O,0),W.disconnect(K,0),W.disconnect(te,1),W.disconnect(ae,1),F.disconnect(k),k.disconnect(B.inputs===void 0?B:B.inputs[0]),k.disconnect(j.inputs===void 0?j:j.inputs[0]),k.disconnect(H.inputs===void 0?H:H.inputs[0]),k.disconnect($.inputs===void 0?$:$.inputs[0]),B.disconnect(O.gain),j.disconnect(K.gain),H.disconnect(te.gain),$.disconnect(ae.gain),O.disconnect(C,0,0),te.disconnect(C,0,0),K.disconnect(C,0,1),ae.disconnect(C,0,1)}}},b=(A,N,k,C,R)=>{if(N===1)return y(A,k,C,R);if(N===2)return _(A,k,C,R);throw a()};return(A,{channelCount:N,channelCountMode:k,pan:C,...R})=>{if(k==="max")throw a();const D=n(A,{...R,channelCount:1,channelCountMode:k,numberOfInputs:2}),V=t(A,{...R,channelCount:N,channelCountMode:k,gain:1}),I=t(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:C});let{connectGraph:Y,disconnectGraph:W}=b(A,N,V,I,D);Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"maxValue",{get:()=>1}),Object.defineProperty(I.gain,"minValue",{get:()=>-1});const O={get bufferSize(){},get channelCount(){return V.channelCount},set channelCount(F){V.channelCount!==F&&(B&&W(),{connectGraph:Y,disconnectGraph:W}=b(A,F,V,I,D),B&&Y()),V.channelCount=F},get channelCountMode(){return V.channelCountMode},set channelCountMode(F){if(F==="clamped-max"||F==="max")throw a();V.channelCountMode=F},get channelInterpretation(){return V.channelInterpretation},set channelInterpretation(F){V.channelInterpretation=F},get context(){return V.context},get inputs(){return[V]},get numberOfInputs(){return V.numberOfInputs},get numberOfOutputs(){return V.numberOfOutputs},get pan(){return I.gain},addEventListener(...F){return V.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return V.dispatchEvent(F[0])},removeEventListener(...F){return V.removeEventListener(F[0],F[1],F[2])}};let B=!1;const K=()=>{Y(),B=!0},j=()=>{W(),B=!1};return o(Ph(O,D),K,j)}},cA=(n,e,t,s,a,o,u)=>(c,f)=>{const d=c.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return t(c,f);Ms(d,f);const p=f.curve===null||f.curve instanceof Float32Array?f.curve:new Float32Array(f.curve);if(p!==null&&p.length<2)throw e();Dr(d,{curve:p},"curve"),Dr(d,f,"oversample");let y=null,_=!1;return u(d,"curve",N=>()=>N.call(d),N=>k=>(N.call(d,k),_&&(s(k)&&y===null?y=n(c,d):!s(k)&&y!==null&&(y(),y=null)),k)),a(d,()=>{_=!0,s(d.curve)&&(y=n(c,d))},()=>{_=!1,y!==null&&(y(),y=null)})},uA=(n,e,t,s,a)=>(o,{curve:u,oversample:c,...f})=>{const d=o.createWaveShaper(),p=o.createWaveShaper();Ms(d,f),Ms(p,f);const y=t(o,{...f,gain:1}),_=t(o,{...f,gain:-1}),b=t(o,{...f,gain:1}),A=t(o,{...f,gain:-1});let N=null,k=!1,C=null;const R={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(I){y.channelCount=I,_.channelCount=I,d.channelCount=I,b.channelCount=I,p.channelCount=I,A.channelCount=I},get channelCountMode(){return d.channelCountMode},set channelCountMode(I){y.channelCountMode=I,_.channelCountMode=I,d.channelCountMode=I,b.channelCountMode=I,p.channelCountMode=I,A.channelCountMode=I},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(I){y.channelInterpretation=I,_.channelInterpretation=I,d.channelInterpretation=I,b.channelInterpretation=I,p.channelInterpretation=I,A.channelInterpretation=I},get context(){return d.context},get curve(){return C},set curve(I){if(I!==null&&I.length<2)throw e();if(I===null)d.curve=I,p.curve=I;else{const Y=I.length,W=new Float32Array(Y+2-Y%2),O=new Float32Array(Y+2-Y%2);W[0]=I[0],O[0]=-I[Y-1];const B=Math.ceil((Y+1)/2),K=(Y+1)/2-1;for(let j=1;j<B;j+=1){const F=j/B*K,te=Math.floor(F),H=Math.ceil(F);W[j]=te===H?I[te]:(1-(F-te))*I[te]+(1-(H-F))*I[H],O[j]=te===H?-I[Y-1-te]:-((1-(F-te))*I[Y-1-te])-(1-(H-F))*I[Y-1-H]}W[B]=Y%2===1?I[B-1]:(I[B-2]+I[B-1])/2,d.curve=W,p.curve=O}C=I,k&&(s(C)&&N===null?N=n(o,y):N!==null&&(N(),N=null))},get inputs(){return[y]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(I){d.oversample=I,p.oversample=I},addEventListener(...I){return y.addEventListener(I[0],I[1],I[2])},dispatchEvent(...I){return y.dispatchEvent(I[0])},removeEventListener(...I){return y.removeEventListener(I[0],I[1],I[2])}};u!==null&&(R.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==R.oversample&&(R.oversample=c);const D=()=>{y.connect(d).connect(b),y.connect(_).connect(p).connect(A).connect(b),k=!0,s(C)&&(N=n(o,y))},V=()=>{y.disconnect(d),d.disconnect(b),y.disconnect(_),_.disconnect(p),p.disconnect(A),A.disconnect(b),k=!1,N!==null&&(N(),N=null)};return a(Ph(R,b),D,V)},yi=()=>new DOMException("","NotSupportedError"),hA={numberOfChannels:1},fA=(n,e,t,s,a)=>class extends n{constructor(u,c,f){let d;if(typeof u=="number"&&c!==void 0&&f!==void 0)d={length:c,numberOfChannels:u,sampleRate:f};else if(typeof u=="object")d=u;else throw new Error("The given parameters are not valid.");const{length:p,numberOfChannels:y,sampleRate:_}={...hA,...d},b=s(y,p,_);e(td,()=>td(b))||b.addEventListener("statechange",(()=>{let A=0;const N=k=>{this._state==="running"&&(A>0?(b.removeEventListener("statechange",N),k.stopImmediatePropagation(),this._waitForThePromiseToSettle(k)):A+=1)};return N})()),super(b,y),this._length=p,this._nativeOfflineAudioContext=b,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Ix(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},dA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},pA=(n,e,t,s,a,o,u)=>class extends n{constructor(f,d){const p=a(f),y={...dA,...d},_=t(p,y),b=o(p),A=b?s():null,N=f.sampleRate/2;super(f,!1,_,A),this._detune=e(this,b,_.detune,153600,-153600),this._frequency=e(this,b,_.frequency,N,-N),this._nativeOscillatorNode=_,this._onended=null,this._oscillatorNodeRenderer=A,this._oscillatorNodeRenderer!==null&&y.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=y.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(f){const d=typeof f=="function"?u(this,f):null;this._nativeOscillatorNode.onended=d;const p=this._nativeOscillatorNode.onended;this._onended=p!==null&&p===d?f:p}get type(){return this._nativeOscillatorNode.type}set type(f){this._nativeOscillatorNode.type=f,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(f){this._nativeOscillatorNode.setPeriodicWave(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=f)}start(f=0){if(this._nativeOscillatorNode.start(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=f),this.context.state!=="closed"){Oh(this);const d=()=>{this._nativeOscillatorNode.removeEventListener("ended",d),kl(this)&&md(this)};this._nativeOscillatorNode.addEventListener("ended",d)}}stop(f=0){this._nativeOscillatorNode.stop(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=f)}},mA=(n,e,t,s,a)=>()=>{const o=new WeakMap;let u=null,c=null,f=null;const d=async(p,y)=>{let _=t(p);const b=li(_,y);if(!b){const A={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,detune:_.detune.value,frequency:_.frequency.value,periodicWave:u===null?void 0:u,type:_.type};_=e(y,A),c!==null&&_.start(c),f!==null&&_.stop(f)}return o.set(y,_),b?(await n(y,p.detune,_.detune),await n(y,p.frequency,_.frequency)):(await s(y,p.detune,_.detune),await s(y,p.frequency,_.frequency)),await a(p,y,_),_};return{set periodicWave(p){u=p},set start(p){c=p},set stop(p){f=p},render(p,y){const _=o.get(y);return _!==void 0?Promise.resolve(_):d(p,y)}}},gA={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},bA=(n,e,t,s,a,o,u)=>class extends n{constructor(f,d){const p=a(f),y={...gA,...d},_=t(p,y),b=o(p),A=b?s():null;super(f,!1,_,A),this._nativePannerNode=_,this._orientationX=e(this,b,_.orientationX,bi,qi),this._orientationY=e(this,b,_.orientationY,bi,qi),this._orientationZ=e(this,b,_.orientationZ,bi,qi),this._positionX=e(this,b,_.positionX,bi,qi),this._positionY=e(this,b,_.positionY,bi,qi),this._positionZ=e(this,b,_.positionZ,bi,qi),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(f){this._nativePannerNode.coneInnerAngle=f}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(f){this._nativePannerNode.coneOuterAngle=f}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(f){this._nativePannerNode.coneOuterGain=f}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(f){this._nativePannerNode.distanceModel=f}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(f){this._nativePannerNode.maxDistance=f}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(f){this._nativePannerNode.panningModel=f}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(f){this._nativePannerNode.refDistance=f}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(f){this._nativePannerNode.rolloffFactor=f}},vA=(n,e,t,s,a,o,u,c,f,d)=>()=>{const p=new WeakMap;let y=null;const _=async(b,A)=>{let N=null,k=o(b);const C={channelCount:k.channelCount,channelCountMode:k.channelCountMode,channelInterpretation:k.channelInterpretation},R={...C,coneInnerAngle:k.coneInnerAngle,coneOuterAngle:k.coneOuterAngle,coneOuterGain:k.coneOuterGain,distanceModel:k.distanceModel,maxDistance:k.maxDistance,panningModel:k.panningModel,refDistance:k.refDistance,rolloffFactor:k.rolloffFactor},D=li(k,A);if("bufferSize"in k)N=s(A,{...C,gain:1});else if(!D){const V={...R,orientationX:k.orientationX.value,orientationY:k.orientationY.value,orientationZ:k.orientationZ.value,positionX:k.positionX.value,positionY:k.positionY.value,positionZ:k.positionZ.value};k=a(A,V)}if(p.set(A,N===null?k:N),N!==null){if(y===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const j=new u(6,b.context.length,A.sampleRate),F=e(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});F.connect(j.destination),y=(async()=>{const te=await Promise.all([b.orientationX,b.orientationY,b.orientationZ,b.positionX,b.positionY,b.positionZ].map(async(H,ae)=>{const $=t(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ae===0?1:0});return await c(j,H,$.offset),$}));for(let H=0;H<6;H+=1)te[H].connect(F,0,H),te[H].start(0);return d(j)})()}const V=await y,I=s(A,{...C,gain:1});await f(b,A,I);const Y=[];for(let j=0;j<V.numberOfChannels;j+=1)Y.push(V.getChannelData(j));let W=[Y[0][0],Y[1][0],Y[2][0]],O=[Y[3][0],Y[4][0],Y[5][0]],B=s(A,{...C,gain:1}),K=a(A,{...R,orientationX:W[0],orientationY:W[1],orientationZ:W[2],positionX:O[0],positionY:O[1],positionZ:O[2]});I.connect(B).connect(K.inputs[0]),K.connect(N);for(let j=128;j<V.length;j+=128){const F=[Y[0][j],Y[1][j],Y[2][j]],te=[Y[3][j],Y[4][j],Y[5][j]];if(F.some((H,ae)=>H!==W[ae])||te.some((H,ae)=>H!==O[ae])){W=F,O=te;const H=j/A.sampleRate;B.gain.setValueAtTime(0,H),B=s(A,{...C,gain:0}),K=a(A,{...R,orientationX:W[0],orientationY:W[1],orientationZ:W[2],positionX:O[0],positionY:O[1],positionZ:O[2]}),B.gain.setValueAtTime(1,H),I.connect(B).connect(K.inputs[0]),K.connect(N)}}return N}return D?(await n(A,b.orientationX,k.orientationX),await n(A,b.orientationY,k.orientationY),await n(A,b.orientationZ,k.orientationZ),await n(A,b.positionX,k.positionX),await n(A,b.positionY,k.positionY),await n(A,b.positionZ,k.positionZ)):(await c(A,b.orientationX,k.orientationX),await c(A,b.orientationY,k.orientationY),await c(A,b.orientationZ,k.orientationZ),await c(A,b.positionX,k.positionX),await c(A,b.positionY,k.positionY),await c(A,b.positionZ,k.positionZ)),Bh(k)?await f(b,A,k.inputs[0]):await f(b,A,k),k};return{render(b,A){const N=p.get(A);return N!==void 0?Promise.resolve(N):_(b,A)}}},yA={disableNormalization:!1},xA=(n,e,t,s)=>class Wx{constructor(o,u){const c=e(o),f=s({...yA,...u}),d=n(c,f);return t.add(d),d}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===Wx.prototype||t.has(o)}},wA=(n,e)=>(t,s,a)=>(n(s).replay(a),e(s,t,a)),_A=(n,e,t)=>async(s,a,o)=>{const u=n(s);await Promise.all(u.activeInputs.map((c,f)=>Array.from(c).map(async([d,p])=>{const _=await e(d).render(d,a),b=s.context.destination;!t(d)&&(s!==b||!t(s))&&_.connect(o,p,f)})).reduce((c,f)=>[...c,...f],[]))},SA=(n,e,t)=>async(s,a,o)=>{const u=e(s);await Promise.all(Array.from(u.activeInputs).map(async([c,f])=>{const p=await n(c).render(c,a);t(c)||p.connect(o,f)}))},NA=(n,e,t,s)=>a=>n(td,()=>td(a))?Promise.resolve(n(s,s)).then(o=>{if(!o){const u=t(a,512,0,1);a.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>a.currentTime,u.connect(a.destination)}return a.startRendering()}):new Promise(o=>{const u=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=c=>{u.disconnect(),o(c.renderedBuffer)},u.connect(a.destination),a.startRendering()}),AA=n=>(e,t)=>{n.set(e,t)},TA=n=>(e,t)=>n.set(e,t),CA=(n,e,t,s,a,o,u,c)=>(f,d)=>t(f).render(f,d).then(()=>Promise.all(Array.from(s(d)).map(p=>t(p).render(p,d)))).then(()=>a(d)).then(p=>(typeof p.copyFromChannel!="function"?(u(p),Lg(p)):e(o,()=>o(p))||c(p),n.add(p),p)),kA={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},jA=(n,e,t,s,a,o)=>class extends n{constructor(c,f){const d=a(c),p={...kA,...f},y=t(d,p),_=o(d),b=_?s():null;super(c,!1,y,b),this._pan=e(this,_,y.pan)}get pan(){return this._pan}},EA=(n,e,t,s,a)=>()=>{const o=new WeakMap,u=async(c,f)=>{let d=t(c);const p=li(d,f);if(!p){const y={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,pan:d.pan.value};d=e(f,y)}return o.set(f,d),p?await n(f,c.pan,d.pan):await s(f,c.pan,d.pan),Bh(d)?await a(c,f,d.inputs[0]):await a(c,f,d),d};return{render(c,f){const d=o.get(f);return d!==void 0?Promise.resolve(d):u(c,f)}}},MA=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},LA=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),a=URL.createObjectURL(t);let o=!1,u=!1;try{await s.audioWorklet.addModule(a);const c=new n(s,"a",{numberOfOutputs:0}),f=s.createOscillator();c.port.onmessage=()=>o=!0,c.onprocessorerror=()=>u=!0,f.connect(c),f.start(0),await s.startRendering(),await new Promise(d=>setTimeout(d))}catch{}finally{URL.revokeObjectURL(a)}return o&&!u},OA=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{t.oncomplete=()=>{s.disconnect(),a(t.currentTime!==0)},t.startRendering()})},DA=()=>new DOMException("","UnknownError"),RA={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},IA=(n,e,t,s,a,o,u)=>class extends n{constructor(f,d){const p=a(f),y={...RA,...d},_=t(p,y),A=o(p)?s():null;super(f,!0,_,A),this._isCurveNullified=!1,this._nativeWaveShaperNode=_,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(f){if(f===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(f.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=f}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(f){this._nativeWaveShaperNode.oversample=f}},VA=(n,e,t)=>()=>{const s=new WeakMap,a=async(o,u)=>{let c=e(o);if(!li(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=n(u,d)}return s.set(u,c),Bh(c)?await t(o,u,c.inputs[0]):await t(o,u,c),c};return{render(o,u){const c=s.get(u);return c!==void 0?Promise.resolve(c):a(o,u)}}},FA=()=>typeof window>"u"?null:window,BA=(n,e)=>t=>{t.copyFromChannel=(s,a,o=0)=>{const u=n(o),c=n(a);if(c>=t.numberOfChannels)throw e();const f=t.length,d=t.getChannelData(c),p=s.length;for(let y=u<0?-u:0;y+u<f&&y<p;y+=1)s[y]=d[y+u]},t.copyToChannel=(s,a,o=0)=>{const u=n(o),c=n(a);if(c>=t.numberOfChannels)throw e();const f=t.length,d=t.getChannelData(c),p=s.length;for(let y=u<0?-u:0;y+u<f&&y<p;y+=1)d[y+u]=s[y]}},PA=n=>e=>{e.copyFromChannel=(t=>(s,a,o=0)=>{const u=n(o),c=n(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyFromChannel),e.copyToChannel=(t=>(s,a,o=0)=>{const u=n(o),c=n(a);if(u<e.length)return t.call(e,s,c,u)})(e.copyToChannel)},zA=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",a=>()=>{const o=a.call(e);return o===s?null:o},a=>o=>a.call(e,o===null?s:o))},qA=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const a=t.createBufferSource();e(s,()=>{const c=s.numberOfInputs;for(let f=0;f<c;f+=1)a.connect(s,0,f)},()=>a.disconnect(s))},Yx=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),$x=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},xd=(n,e,t,s)=>{let a=n;for(;!a.hasOwnProperty(e);)a=Object.getPrototypeOf(a);const{get:o,set:u}=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(n,e,{get:t(o),set:s(u)})},UA=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),HA=n=>({...n,channelCount:n.numberOfOutputs}),GA=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},Xx=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;Xx(n,e,t+1e-7)}},WA=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},YA=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},$A=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Vg=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Zx=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},Fg=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},XA=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},ZA=n=>{n.start=(e=>(t=0,s=0,a)=>{const o=n.buffer,u=o===null?s:Math.min(o.duration,s);o!==null&&u>o.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,u,a)})(n.start)},Qx=(n,e)=>{const t=e.createGain();n.connect(t);const s=(a=>()=>{a.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),Ph(n,t),n.stop=(a=>{let o=!1;return(u=0)=>{if(o)try{a.call(n,u)}catch{t.gain.setValueAtTime(0,u)}else a.call(n,u),o=!0}})(n.stop)},zh=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},QA=bS(xu),KA=SS(xu),JA=R6(kp),Kx=new WeakMap,e8=J6(Kx),po=h6(new Map,new WeakMap),Uo=FA(),Jx=jN(po,Go),Bg=K6(vi),Ks=_A(vi,Bg,mu),t8=kS(Jx,Ar,Ks),br=nN(Cp),Ol=nA(Uo),cr=yN(Ol),e3=new WeakMap,t3=G6(zh),wd=ON(Uo),Pg=mN(wd),zg=gN(Uo),n3=bN(Uo),nd=RN(Uo),as=JS(vS(jx),_S(QA,KA,np,JA,rp,vi,e8,pd,Ar,xu,kl,mu,P1),po,uN(Xm,rp,vi,Ar,ed,kl),Go,jp,yi,M6(np,Xm,vi,Ar,ed,br,kl,cr),F6(e3,vi,co),t3,br,Pg,zg,n3,cr,nd),n8=CS(as,t8,Go,Jx,br,cr),qg=new WeakSet,jv=EN(Uo),r3=N6(new Uint32Array(1)),Ug=BA(r3,Go),Hg=PA(r3),s3=ES(qg,po,yi,jv,Ol,MA(jv),Ug,Hg),Ep=NS(Gi),i3=SA(Bg,gd,mu),Wo=v6(i3),qh=LN(Ep,po,WA,YA,$A,Vg,Zx,Fg,ZA,zA(xd),Qx),Yo=wA(eN(gd),i3),r8=OS(Wo,qh,Ar,Yo,Ks),mo=e6(yS(Ex),e3,Mg,t6,hS,fS,dS,pS,mS,Wm,Cx,wd,Xx),s8=LS(as,r8,mo,qs,qh,br,cr,zh),i8=qS(as,US,Go,qs,DN(Gi,xd),br,cr,Ks),a8=u6(Wo,Hx,Ar,Yo,Ks),wu=TA(Kx),o8=c6(as,mo,a8,jp,Hx,br,cr,wu),Ec=CN(xu,zg),l8=qA(qs,Ec),Mc=qN(wd,l8),c8=p6(Mc,Ar,Ks),u8=d6(as,c8,Mc,br,cr),h8=b6(vd,Ar,Ks),f8=g6(as,h8,vd,br,cr,HA),d8=GN(Ep,qh,Gi,Ec),Uh=HN(Ep,po,d8,Vg,Fg),p8=S6(Wo,Uh,Ar,Yo,Ks),m8=_6(as,mo,p8,Uh,br,cr,zh),a3=WN(yi,xd),g8=C6(a3,Ar,Ks),b8=T6(as,g8,a3,br,cr,wu),v8=D6(Wo,Gx,Ar,Yo,Ks),y8=O6(as,mo,v8,Gx,br,cr,wu),o3=YN(yi),x8=q6(Wo,o3,Ar,Yo,Ks),w8=z6(as,mo,x8,o3,yi,br,cr,wu),_8=Z6(Wo,Gi,Ar,Yo,Ks),S8=X6(as,mo,_8,Gi,br,cr),N8=QN(jp,qs,yd,yi),Mp=NA(po,Gi,yd,OA(Gi,Ol)),A8=cN(qh,Ar,Ol,Ks,Mp),T8=$N(N8),C8=oN(as,T8,A8,br,cr,wu),k8=HS(mo,Mc,Uh,yd,yi,Yx,cr,xd),l3=new WeakMap,j8=TN(i8,k8,t3,cr,l3,zh),c3=rA(Ep,po,Vg,Zx,Fg,Qx),E8=mA(Wo,c3,Ar,Yo,Ks),M8=pA(as,mo,c3,E8,br,cr,zh),u3=x6(qh),L8=uA(u3,qs,Gi,$x,Ec),Lp=cA(u3,qs,L8,$x,Ec,wd,xd),O8=iA(np,qs,Mc,Gi,yd,Lp,yi,rp,Yx,Ec),h3=sA(O8),D8=vA(Wo,Mc,Uh,Gi,h3,Ar,Ol,Yo,Ks,Mp),R8=bA(as,mo,h3,D8,br,cr,wu),I8=aA(Go),V8=xA(I8,br,new WeakSet,GA),F8=lA(Mc,vd,Gi,Lp,yi,Ec),f3=oA(F8,yi),B8=EA(Wo,f3,Ar,Yo,Ks),P8=jA(as,mo,f3,B8,br,cr),z8=VA(Lp,Ar,Ks),q8=IA(as,qs,Lp,z8,br,cr,wu),d3=xN(Uo),Gg=W6(Uo),p3=new WeakMap,U8=rN(p3,Ol),H8=d3?wS(po,yi,H6(Uo),Gg,Y6(gS),br,U8,cr,nd,new WeakMap,new WeakMap,LA(nd,Ol),Uo):void 0,G8=vN(Pg,cr),W8=E6(qg,po,j6,U6,new WeakSet,br,G8,ep,td,Ug,Hg),m3=o6(H8,n8,s3,s8,o8,u8,f8,m8,b8,W8,y8,w8,S8,C8,j8,M8,R8,V8,P8,q8),Y8=wN(as,KN,br,cr),$8=SN(as,JN,br,cr),X8=NN(as,eA,br,cr),Z8=tA(qs,cr),Q8=AN(as,Z8,br),K8=zS(m3,qs,yi,DA,Y8,$8,X8,Q8,wd),Wg=sN(l3),J8=AS(Wg),g3=y6(Go),eT=I6(Wg),b3=B6(Go),v3=new WeakMap,tT=Q6(v3,co),nT=zN(g3,Go,qs,Mc,vd,Uh,Gi,yd,yi,b3,Gg,tT,Ec),rT=VN(qs,nT,Gi,yi,Ec),sT=a6(Wo,g3,qh,Mc,vd,Uh,Gi,eT,b3,Gg,Ar,nd,Ol,Yo,Ks,Mp),iT=tN(p3),aT=AA(v3),Ev=d3?r6(J8,as,mo,sT,rT,vi,iT,br,cr,nd,UA,aT,XA,zh):void 0,oT=k6(yi,Ol),lT=CA(qg,po,Bg,Wg,Mp,ep,Ug,Hg),cT=fA(m3,po,qs,oT,lT),uT=hN(Cp,Pg),hT=fN(Eg,zg),fT=dN(Mg,n3),dT=pN(Cp,cr);function Ea(n){return n===void 0}function En(n){return n!==void 0}function pT(n){return typeof n=="function"}function jl(n){return typeof n=="number"}function fu(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function mT(n){return typeof n=="boolean"}function ca(n){return Array.isArray(n)}function El(n){return typeof n=="string"}function A1(n){return El(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function Kt(n,e){if(!n)throw new Error(e)}function Ml(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function y3(n){!n.isOffline&&n.state!=="running"&&Op('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let x3=!1,Mv=!1;function Lv(n){x3=n}function gT(n){Ea(n)&&x3&&!Mv&&(Mv=!0,Op("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let w3=console;function bT(...n){w3.log(...n)}function Op(...n){w3.warn(...n)}function vT(n){return new K8(n)}function yT(n,e,t){return new cT(n,e,t)}const aa=typeof self=="object"?self:null,xT=aa&&(aa.hasOwnProperty("AudioContext")||aa.hasOwnProperty("webkitAudioContext"));function wT(n,e,t){return Kt(En(Ev),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof aa?.BaseAudioContext?aa?.AudioWorkletNode:Ev)(n,e,t)}function go(n,e,t,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,s);else for(var c=n.length-1;c>=0;c--)(u=n[c])&&(o=(a<3?u(o):a>3?u(e,t,o):u(e,t))||o);return a>3&&o&&Object.defineProperty(e,t,o),o}function bs(n,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function c(p){try{d(s.next(p))}catch(y){u(y)}}function f(p){try{d(s.throw(p))}catch(y){u(y)}}function d(p){p.done?o(p.value):a(p.value).then(c,f)}d((s=s.apply(n,e||[])).next())})}class _T{constructor(e,t,s,a){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function gu(n){return fT(n)}function Sc(n){return hT(n)}function z1(n){return dT(n)}function bh(n){return uT(n)}function ST(n){return n instanceof s3}function NT(n,e){return n==="value"||gu(e)||Sc(e)||ST(e)}function du(n,...e){if(!e.length)return n;const t=e.shift();if(fu(n)&&fu(t))for(const s in t)NT(s,t[s])?n[s]=t[s]:fu(t[s])?(n[s]||Object.assign(n,{[s]:{}}),du(n[s],t[s])):Object.assign(n,{[s]:t[s]});return du(n,...e)}function AT(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function Xt(n,e,t=[],s){const a={},o=Array.from(e);if(fu(o[0])&&s&&!Reflect.has(o[0],s)&&(Object.keys(o[0]).some(c=>Reflect.has(n,c))||(du(a,{[s]:o[0]}),t.splice(t.indexOf(s),1),o.shift())),o.length===1&&fu(o[0]))du(a,o[0]);else for(let u=0;u<t.length;u++)En(o[u])&&(a[t[u]]=o[u]);return du(n,a)}function TT(n){return n.constructor.getDefaults()}function Nh(n,e){return Ea(n)?e:n}function ao(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}class Dl{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||aa&&this.toString()===aa.TONE_DEBUG_CLASS)&&bT(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Dl.version=Tx;const Yg=1e-6;function Dh(n,e){return n>e+Yg}function eg(n,e){return Dh(n,e)||io(n,e)}function op(n,e){return n+Yg<e}function io(n,e){return Math.abs(n-e)<Yg}function CT(n,e,t){return Math.max(Math.min(n,t),e)}class Ma extends Dl{constructor(){super(),this.name="Timeline",this._timeline=[];const e=Xt(Ma.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Kt(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];Kt(eg(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(io(this._timeline[t].time,e)){for(let s=t;s>=0&&io(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&eg(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const a=this._timeline.length;let o=a;if(a>0&&this._timeline[a-1][t]<=e)return a-1;for(;s<o;){let u=Math.floor(s+(o-s)/2);const c=this._timeline[u],f=this._timeline[u+1];if(io(c[t],e)){for(let d=u;d<this._timeline.length;d++){const p=this._timeline[d];if(io(p[t],e))u=d;else break}return u}else{if(op(c[t],e)&&Dh(f[t],e))return u;Dh(c[t],e)?o=u:s=u+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let a=this._search(e),o=this._search(t);return a!==-1&&o!==-1?(this._timeline[a].time!==e&&(a+=1),this._timeline[o].time===t&&(o-=1),this._iterate(s,a,o)):a===-1&&this._iterate(s,0,o),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&io(this._timeline[s].time,e)){let a=s;for(let o=s;o>=0&&io(this._timeline[o].time,e);o--)a=o;this._iterate(o=>{t(o)},a,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const _3=[];function Dp(n){_3.push(n)}function kT(n){_3.forEach(e=>e(n))}const S3=[];function Rp(n){S3.push(n)}function jT(n){S3.forEach(e=>e(n))}class _d extends Dl{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(a=>{Ea(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(t)}),this}once(e,t){const s=(...a)=>{t(...a),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(a=>{if(Ea(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(Ea(t))this._events[a]=[];else{const o=this._events[a];for(let u=o.length-1;u>=0;u--)o[u]===t&&o.splice(u,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let a=0,o=s.length;a<o;a++)s[a].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(_d.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class N3 extends _d{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}let $g=class A3 extends N3{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Ma,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=Xt(A3.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=vT({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new _T(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(kT(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Kt(bh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Kt(bh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Kt(bh(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Kt(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Kt(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Kt(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Kt(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return wT(this.rawContext,e,t)}addAudioWorkletModule(e){return bs(this,void 0,void 0,function*(){Kt(En(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return bs(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return bh(this._context)?this._context.resume():Promise.resolve()}close(){return bs(this,void 0,void 0,function*(){bh(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&jT(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let o=0;o<s.length;o++)s[o]=e;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=t,a.loop=!0,a.start(0),this._constants.set(e,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,t=>{t.callback(),this._timeouts.remove(t)})}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,a=()=>{const o=this.now();this._timeouts.add({callback:()=>{e(),a()},id:s,time:o+t})};return a(),s}};class ET extends N3{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return bs(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Tr(n,e){ca(e)?e.forEach(t=>Tr(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function Xg(n,e){ca(e)?e.forEach(t=>Xg(n,t)):Object.defineProperty(n,e,{writable:!0})}const lr=()=>{};class Sr extends Dl{constructor(){super(),this.name="ToneAudioBuffer",this.onload=lr;const e=Xt(Sr.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,El(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:lr,onload:lr,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:oo().sampleRate}set(e){return e instanceof Sr?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return bs(this,void 0,void 0,function*(){const t=Sr.load(e).then(s=>{this.set(s),this.onload(this)});Sr.downloads.push(t);try{yield t}finally{const s=Sr.downloads.indexOf(t);Sr.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=ca(e)&&e[0].length>0,s=t?e.length:1,a=t?e[0].length:e.length,o=oo(),u=o.createBuffer(s,a,o.sampleRate),c=!t&&s===1?[e]:e;for(let f=0;f<s;f++)u.copyToChannel(c[f],f);return this._buffer=u,this}toMono(e){if(jl(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let a=0;a<s;a++){const o=this.toArray(a);for(let u=0;u<o.length;u++)t[u]+=o[u]}t=t.map(a=>a/s),this.fromArray(t)}return this}toArray(e){if(jl(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){Kt(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),a=Math.floor(t*this.sampleRate);Kt(s<a,"The start time must be less than the end time");const o=a-s,u=oo().createBuffer(this.numberOfChannels,o,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)u.copyToChannel(this.getChannelData(c).subarray(s,a),c);return new Sr(u)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Sr().fromArray(e)}static fromUrl(e){return bs(this,void 0,void 0,function*(){return yield new Sr().load(e)})}static load(e){return bs(this,void 0,void 0,function*(){const t=Sr.baseUrl===""||Sr.baseUrl.endsWith("/")?Sr.baseUrl:Sr.baseUrl+"/",s=yield fetch(t+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const a=yield s.arrayBuffer();return yield oo().decodeAudioData(a)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return bs(this,void 0,void 0,function*(){for(yield Promise.resolve();Sr.downloads.length;)yield Sr.downloads[0]})}}Sr.baseUrl="";Sr.downloads=[];class Zg extends $g{constructor(){super({clockSource:"offline",context:z1(arguments[0])?arguments[0]:yT(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:z1(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=z1(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return bs(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return bs(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Sr(t)})}close(){return Promise.resolve()}}const T3=new ET;let uu=T3;function oo(){return uu===T3&&xT&&MT(new $g),uu}function MT(n,e=!1){e&&uu.dispose(),bh(n)?uu=new $g(n):z1(n)?uu=new Zg(n):uu=n}function _u(){return uu.resume()}if(aa&&!aa.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Tx} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function LT(n){return Math.pow(10,n/20)}function OT(n){return 20*(Math.log(n)/Math.LN10)}function C3(n){return Math.pow(2,n/12)}let Ip=440;function DT(){return Ip}function RT(n){Ip=n}function hu(n){return Math.round(k3(n))}function k3(n){return 69+12*Math.log2(n/Ip)}function j3(n){return Ip*Math.pow(2,(n-69)/12)}class Qg extends Dl{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),a=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/s)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let a=0;return e&&e!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a+=this._beatsToUnits(parseFloat(s)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Qg&&this.fromType(this._val),Ea(this._val))return this._noArg();if(El(this._val)&&Ea(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(fu(this._val)){let e=0;for(const t in this._val)if(En(this._val[t])){const s=this._val[t],a=new this.constructor(this.context,t).valueOf()*s;e+=a}return e}if(En(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return El(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class lo extends Qg{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new lo(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),a=this.valueOf(),c=Math.round(a/s)*s-a;return a+c*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let o=1;o<9;o++){const u=Math.pow(2,o);t.push(u+"n."),t.push(u+"n"),t.push(u+"t")}t.push("0");let s=t[0],a=new lo(this.context,t[0]).toSeconds();return t.forEach(o=>{const u=new lo(this.context,o).toSeconds();Math.abs(u-e)<Math.abs(a-e)&&(s=o,a=u)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let a=t%1*4;t=Math.floor(t)%this._getTimeSignature();const o=a.toString();return o.length>3&&(a=parseFloat(parseFloat(o).toFixed(3))),[s,t,a].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return hu(this.toFrequency())}_now(){return this.context.now()}}class oa extends lo{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return DT()}static set A4(e){RT(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:oa.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const a=IT[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?a:oa.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let a=1;return e&&e!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(a*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(a*=this._beatsToUnits(parseFloat(s)/4)),a}}})}transpose(e){return new oa(this.context,this.valueOf()*C3(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return hu(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/oa.A4);let s=Math.round(12*t)+57;const a=Math.floor(s/12);return a<0&&(s+=-12*a),VT[s%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return j3(e)}static ftom(e){return hu(e)}}const IT={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},VT=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Hf extends lo{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Hi extends Dl{constructor(){super();const e=Xt(Hi.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:oo()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return gT(e),new lo(this.context,e).toSeconds()}toFrequency(e){return new oa(this.context,e).toFrequency()}toTicks(e){return new Hf(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Ea(e[s])&&delete t[s]}),t}get(){const e=TT(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];En(s)&&En(s.value)&&En(s.setValueAtTime)?e[t]=s.value:s instanceof Hi?e[t]=s._getPartialProperties(e[t]):ca(s)||jl(s)||El(s)||mT(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&En(this[t])&&(this[t]&&En(this[t].value)&&En(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Hi?this[t].set(e[t]):this[t]=e[t])}),this}}class Kg extends Ma{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return Ml(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let a=s;a>=0;a--){const o=this._timeline[a];if(o.state===e)return o}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let a=s;a<this._timeline.length;a++){const o=this._timeline[a];if(o.state===e)return o}}}class pr extends Hi{constructor(){const e=Xt(pr.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Kt(En(e.param)&&(gu(e.param)||e.param instanceof pr),"param must be an AudioParam");!gu(e.param);)e.param=e.param._param;this._swappable=En(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Ma(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,En(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Hi.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return En(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return En(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return En(this.maxValue)&&En(this.minValue)&&Ml(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?LT(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?OT(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),a=this._fromType(e);return Kt(isFinite(a)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),a=this._events.get(t);let o=this._initialValue;if(a===null)o=this._initialValue;else if(a.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const u=this._events.getBefore(a.time);let c;u===null?c=this._initialValue:c=u.value,a.type==="setTargetAtTime"&&(o=this._exponentialApproach(a.time,c,a.value,a.constant,t))}else if(s===null)o=a.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=a.value;if(a.type==="setTargetAtTime"){const c=this._events.getBefore(a.time);c===null?u=this._initialValue:u=c.value}s.type==="linearRampToValueAtTime"?o=this._linearInterpolate(a.time,u,s.time,s.value,t):o=this._exponentialInterpolate(a.time,u,s.time,s.value,t)}else o=a.value;return this._toType(o)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),a=this.toSeconds(t);return Kt(isFinite(s)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:a,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,a),this._param.linearRampToValueAtTime(s,a),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=io(s,0)?this._minOutput:s,this._assertRange(s);const a=this.toSeconds(t);return Kt(isFinite(s)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,a),this._param.exponentialRampToValueAtTime(s,a),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const a=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,a),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const a=this._fromType(e);Kt(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const o=this.toSeconds(t);return this._assertRange(a),Kt(isFinite(a)&&isFinite(o),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:o,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",e,o,s),this._param.setTargetAtTime(a,o,s),this}setValueCurveAtTime(e,t,s,a=1){s=this.toSeconds(s),t=this.toSeconds(t);const o=this._fromType(e[0])*a;this.setValueAtTime(this._toType(o),t);const u=s/(e.length-1);for(let c=1;c<e.length;c++){const f=this._fromType(e[c])*a;this.linearRampToValueAtTime(this._toType(f),t+c*u)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return Kt(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));Kt(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const a=this._events.get(t),o=this._events.getAfter(t);return a&&io(a.time,t)?o?(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):o&&(this._param.cancelScheduledValues(o.time),this._events.cancel(o.time),o.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):o.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const a=this._events.getAfter(s.time),o=a?a.time:t+2,u=(o-t)/10;for(let c=t;c<o;c+=u)e.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?e.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?e.setTargetAtTime(a.value,a.time,a.constant):e[a.type](a.value,a.time)}),this}setParam(e){Kt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,a,o){return s+(t-s)*Math.exp(-(o-e)/a)}_linearInterpolate(e,t,s,a,o){return t+(a-t)*((o-e)/(s-e))}_exponentialInterpolate(e,t,s,a,o){return t*Math.pow(a/t,(o-e)/(s-e))}}class tn extends Hi{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return En(this.input)?gu(this.input)||this.input instanceof pr?1:this.input.numberOfInputs:0}get numberOfOutputs(){return En(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return En(e)&&(e instanceof tn||Sc(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Kt(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return Hh(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Op("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return FT(this,e,t,s),this}chain(...e){return rd(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),En(this.input)&&(this.input instanceof tn?this.input.dispose():Sc(this.input)&&this.input.disconnect()),En(this.output)&&(this.output instanceof tn?this.output.dispose():Sc(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function rd(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof tn?t.connect(s):Sc(t)&&Hh(t,s),s),e)}function Hh(n,e,t=0,s=0){for(Kt(En(n),"Cannot connect from undefined node"),Kt(En(e),"Cannot connect to undefined node"),(e instanceof tn||Sc(e))&&Kt(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Kt(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof tn||e instanceof pr;)En(e.input)&&(e=e.input);for(;n instanceof tn;)En(n.output)&&(n=n.output);gu(e)?n.connect(e,t):n.connect(e,t,s)}function FT(n,e,t=0,s=0){if(En(e))for(;e instanceof tn;)e=e.input;for(;!Sc(n);)En(n.output)&&(n=n.output);gu(e)?n.disconnect(e,t):Sc(e)?n.disconnect(e,t,s):n.disconnect()}class ys extends tn{constructor(){const e=Xt(ys.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new pr({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Tr(this,"gain")}static getDefaults(){return Object.assign(tn.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Rh extends tn{constructor(e){super(e),this.onended=lr,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ys({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(tn.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:lr})}_startGain(e,t=1){Kt(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Kt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==lr&&(this.onended(this),this.onended=lr,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Kt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=lr,this}}class Jg extends Rh{constructor(){const e=Xt(Jg.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Hh(this._source,this._gainNode),this.offset=new pr({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Rh.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class gr extends tn{constructor(){const e=Xt(gr.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Jg({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(tn.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return e2(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,a){return this._param.setValueCurveAtTime(e,t,s,a),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function e2(n,e,t,s){(e instanceof pr||gu(e)||e instanceof gr&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof gr&&(e.overridden=!0)),Hh(n,e,t,s)}class t2 extends pr{constructor(){const e=Xt(t2.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Ma(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(pr.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const a=this._fromType(e),o=this._events.get(t),u=Math.round(Math.max(1/s,1));for(let c=0;c<=u;c++){const f=s*c+t,d=this._exponentialApproach(o.time,o.value,a,s,f);this.linearRampToValueAtTime(this._toType(d),f)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const a=this._events.get(s),o=this._events.previousEvent(a),u=this._getTicksUntilEvent(o,s);return a.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),a=this._events.get(t),o=Math.round(Math.max((t-a.time)*10,1)),u=(t-a.time)/o;for(let c=0;c<=o;c++){const f=u*c+a.time,d=this._exponentialInterpolate(a.time,a.value,t,s,f);this.linearRampToValueAtTime(this._toType(d),f)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Ea(e.ticks)){const u=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(u,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let a=this._fromType(this.getValueAtTime(t));const o=this._events.get(t);return o&&o.time===t&&o.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+a)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(t);return this.getTimeOfTick(a+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const a=this._fromType(this.getValueAtTime(t.time)),u=(this._fromType(this.getValueAtTime(s.time))-a)/(s.time-t.time),c=Math.sqrt(Math.pow(a,2)-2*u*(t.ticks-e)),f=(-a+c)/u,d=(-a-c)/u;return(f>0?f:d)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),a=this.toSeconds(e),o=this.getTicksAtTime(s);return this.getTicksAtTime(s+a)-o}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class n2 extends gr{constructor(){const e=Xt(n2.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new t2({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(gr.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class r2 extends Hi{constructor(){const e=Xt(r2.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Kg,this._tickOffset=new Ma,this._ticksAtTime=new Ma,this._secondsAtTime=new Ma,this.frequency=new n2({context:this.context,units:e.units,value:e.frequency}),Tr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Hi.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),En(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),a=this._ticksAtTime.get(t),o={state:"paused",time:t};this._state.add(o);let u=a||s,c=a?a.ticks:0,f=null;return this._state.forEachBetween(u.time,t+this.sampleTime,d=>{let p=u.time;const y=this._tickOffset.get(d.time);y&&y.time>=u.time&&(c=y.ticks,p=y.time),u.state==="started"&&d.state!=="started"&&(c+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(p),d.time!==o.time&&(f={state:d.state,time:d.time,ticks:c})),u=d}),this._state.remove(o),f&&this._ticksAtTime.add(f),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const a=this._secondsAtTime.get(e);let o=a||t,u=a?a.seconds:0,c=null;return this._state.forEachBetween(o.time,e+this.sampleTime,f=>{let d=o.time;const p=this._tickOffset.get(f.time);p&&p.time>=o.time&&(u=p.seconds,d=p.time),o.state==="started"&&f.state!=="started"&&(u+=f.time-d,f.time!==s.time&&(c={state:f.state,time:f.time,seconds:u})),o=f}),this._state.remove(s),c&&this._secondsAtTime.add(c),u}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),a=this._state.get(t),o=Math.max(s.time,a.time),u=this.frequency.getTicksAtTime(o)+e-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(e,t,s){let a=this._state.get(e);this._state.forEachBetween(e,t,u=>{a&&a.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(a.time,e),u.time-this.sampleTime,s),a=u});let o=null;if(a&&a.state==="started"){const u=Math.max(a.time,e),c=this.frequency.getTicksAtTime(u),f=this.frequency.getTicksAtTime(a.time),d=c-f;let p=Math.ceil(d)-d;p=io(p,1)?0:p;let y=this.frequency.getTimeOfTick(c+p);for(;y<t;){try{s(y,Math.round(this.getTicksAtTime(y)))}catch(_){o=_;break}y+=this.frequency.getDurationOfTicks(1,y)}}if(o)throw o;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}let E3=class M3 extends Hi{constructor(){const e=Xt(M3.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=lr,this._lastUpdate=0,this._state=new Kg("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new r2({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Tr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Hi.getDefaults(),{callback:lr,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){y3(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),a=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(a+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const a=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,a);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,a)=>{this.callback(s,a)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};_d.mixin(E3);class Gh extends tn{constructor(){const e=Xt(Gh.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new ys({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Tr(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(tn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class s2 extends tn{constructor(){const e=Xt(s2.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Gh({context:this.context}),this.output=new ys({context:this.context}),this.volume=this.input.volume,rd(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(tn.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),rd(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Dp(n=>{n.destination=new s2({context:n})});Rp(n=>{n.destination.dispose()});class BT extends tn{constructor(){super(...arguments),this.name="Listener",this.positionX=new pr({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new pr({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new pr({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new pr({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new pr({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new pr({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new pr({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new pr({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new pr({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(tn.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Dp(n=>{n.listener=new BT({context:n})});Rp(n=>{n.listener.dispose()});class i2 extends Dl{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=Xt(i2.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:lr,onload:lr,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Kt(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=lr,a=lr){return El(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Sr(this.baseUrl+t,s,a))):this._buffers.set(e.toString(),new Sr(t,s,a)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class lp extends oa{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return hu(super._frequencyToUnits(e))}_ticksToUnits(e){return hu(super._ticksToUnits(e))}_beatsToUnits(e){return hu(super._beatsToUnits(e))}_secondsToUnits(e){return hu(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return j3(this.toMidi())}transpose(e){return new lp(this.context,this.toMidi()+e)}}class wh extends Hf{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class PT extends Hi{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ma,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Dp(n=>{n.draw=new PT({context:n})});Rp(n=>{n.draw.dispose()});class zT extends Dl{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Kt(En(e.time),"Events must have a time property"),Kt(En(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new qT(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,a=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,a=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,a=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,a=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,a=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),a=e.right;a&&(e.right=a.left,a.left=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),a=e.left;a&&(e.left=a.right,a.right=e),t!==null?s?t.left=a:t.right=a:this._setRoot(a)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let a=1;a<t.length;a++)t[a].low>s.low&&(s=t[a]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(a=>{a.event&&t(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class qT{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class UT extends Dl{constructor(e){super(),this.name="TimelineValue",this._timeline=new Ma({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class Nc extends tn{constructor(){super(Xt(Nc.getDefaults(),arguments,["context"]))}connect(e,t=0,s=0){return e2(this,e,t,s),this}}class Sd extends Nc{constructor(){const e=Xt(Sd.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,ca(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):pT(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(gr.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let a=0,o=t;a<o;a++){const u=a/(o-1)*2-1;s[a]=e(u,a)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));Kt(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Vp extends Nc{constructor(){const e=Xt(Vp.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Sd({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Nc.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Ac{constructor(e,t){this.id=Ac._eventId++,this._remainderTime=0;const s=Object.assign(Ac.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:lr,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Ac._eventId=0;class a2 extends Ac{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(a2.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ac.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return op(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new wh(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){op(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new wh(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Dh(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Fp extends Hi{constructor(){const e=Xt(Fp.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new UT(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ma,this._repeatedEvents=new zT,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new E3({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Tr(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Hi.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(s*Math.PI)*this._swingAmount;e+=new wh(this.context,this._swingTicks*2/3).toSeconds()*a}Lv(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),Lv(!1)}schedule(e,t){const s=new Ac(this,{callback:e,time:new Hf(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,a=1/0){const o=new a2(this,{callback:e,duration:new lo(this.context,a).toTicks(),interval:new lo(this.context,t).toTicks(),time:new Hf(this.context,s).toTicks()});return this._addEvent(o,this._repeatedEvents)}scheduleOnce(e,t){const s=new Ac(this,{callback:e,once:!0,time:new Hf(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new wh(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return En(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){ca(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new lo(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new lo(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new wh(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new wh(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),a=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),o=t+a;this.emit("stop",o),this._clock.setTicksAtTime(e,o),this.emit("start",o,this._clock.getSecondsAtTime(o))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),a=e-s%e;return this._clock.nextTickTime(a,t)}}syncSignal(e,t){const s=this.now();let a=this.bpm,o=1/(60/a.getValueAtTime(s)/this.PPQ),u=[];if(e.units==="time"){const f=.015625/o,d=new ys(f),p=new Vp(-1),y=new ys(f);a.chain(d,p,y),a=y,o=1/o,u=[d,p,y]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/o:t=0);const c=new ys(t);return a.connect(c),c.connect(e._param),u.push(c),this._syncedSignals.push({initial:e.value,nodes:u,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(a=>a.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Xg(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}_d.mixin(Fp);Dp(n=>{n.transport=new Fp({context:n})});Rp(n=>{n.transport.dispose()});class oi extends tn{constructor(e){super(e),this.input=void 0,this._state=new Kg("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=lr,this._syncedStop=lr,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Gh({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Tr(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(tn.getDefaults(),{mute:!1,onstop:lr,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let a=Ea(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")Kt(Dh(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,t,s);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const o=this._state.get(a);o&&(o.offset=this.toSeconds(Nh(t,0)),o.duration=s?this.toSeconds(s):void 0);const u=this.context.transport.schedule(c=>{this._start(c,t,s)},a);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else y3(this.context),this._start(a,t,s);return this}stop(e){let t=Ea(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||En(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Dh(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const a=t-this.toSeconds(s.time);let o;s.duration&&(o=this.toSeconds(s.duration)-a),this._start(e,this.toSeconds(s.offset)+a,o)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=lr,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Bp extends Rh{constructor(){const e=Xt(Bp.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Hh(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new pr({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Sr(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Rh.getDefaults(),{url:new Sr,loop:!1,loopEnd:0,loopStart:0,onload:lr,onerror:lr,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,a=1){Kt(this.buffer.loaded,"buffer is either not set or not loaded");const o=this.toSeconds(e);this._startGain(o,a),this.loop?t=Nh(t,this.loopStart):t=Nh(t,0);let u=Math.max(this.toSeconds(t),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,f=this.toSeconds(this.loopStart),d=c-f;eg(u,c)&&(u=(u-f)%d+f),io(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,op(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(o,u)),En(s)){let c=this.toSeconds(s);c=Math.max(c,0),this.stop(o+c)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Su(n,e){return bs(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new Zg(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class o2 extends Rh{constructor(){const e=Xt(o2.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Hh(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new pr({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new pr({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Tr(this,["frequency","detune"])}static getDefaults(){return Object.assign(Rh.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class gs extends oi{constructor(){const e=Xt(gs.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new gr({context:this.context,units:"frequency",value:e.frequency}),Tr(this,"frequency"),this.detune=new gr({context:this.context,units:"cents",value:e.detune}),Tr(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(oi.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new o2({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return gs._periodicWaveCache.find(t=>t.phase===this._phase&&AT(t.partials,this._partials));{const e=gs._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(En(s)){const{partials:a,wave:o}=s;this._wave=o,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,o]=this._getRealImaginary(e,this._phase),u=this.context.createPeriodicWave(a,o);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),gs._periodicWaveCache.push({imag:o,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),gs._periodicWaveCache.length>100&&gs._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Ml(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const a=new Float32Array(e);this._partials.forEach((o,u)=>a[u]=o),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(e,t){let a=2048;const o=new Float32Array(a),u=new Float32Array(a);let c=1;if(e==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,a=c,this._partials.length===0)return[o,u]}else{const f=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);f?(c=parseInt(f[2],10)+1,this._partialCount=parseInt(f[2],10),e=f[1],c=Math.max(c,2),a=c):this._partialCount=0,this._partials=[]}for(let f=1;f<a;++f){const d=2/(f*Math.PI);let p;switch(e){case"sine":p=f<=c?1:0,this._partials[f-1]=p;break;case"square":p=f&1?2*d:0,this._partials[f-1]=p;break;case"sawtooth":p=d*(f&1?1:-1),this._partials[f-1]=p;break;case"triangle":f&1?p=2*(d*d)*(f-1>>1&1?-1:1):p=0,this._partials[f-1]=p;break;case"custom":p=this._partials[f-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}p!==0?(o[f]=-p*Math.sin(t*f),u[f]=p*Math.cos(t*f)):(o[f]=0,u[f]=0)}return[o,u]}_inverseFFT(e,t,s){let a=0;const o=e.length;for(let u=0;u<o;u++)a+=e[u]*Math.cos(u*s)+t[u]*Math.sin(u*s);return a}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const a=Math.PI*2,o=32;for(let u=0;u<o;u++)s=Math.max(this._inverseFFT(e,t,u/o*a),s);return CT(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return bs(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}gs._periodicWaveCache=[];class L3 extends Nc{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Sd({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ll extends gr{constructor(){const e=Xt(Ll.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new ys({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(gr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Pp extends oi{constructor(){const e=Xt(Pp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new L3({context:this.context}),this._modulationNode=new ys({context:this.context}),this._carrier=new gs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new gs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ll({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Tr(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(gs.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return bs(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class zp extends oi{constructor(){const e=Xt(zp.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new ys({context:this.context,gain:0}),this._carrier=new gs({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new gr({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new gs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Ll({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Ll({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Tr(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(gs.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return bs(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Nd extends oi{constructor(){const e=Xt(Nd.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new ys({context:this.context,gain:0}),this._thresh=new Sd({context:this.context,mapping:t=>t<=0?-1:1}),this.width=new gr({context:this.context,units:"audioRange",value:e.width}),this._triangle=new gs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Tr(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(oi.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return bs(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class qp extends oi{constructor(){const e=Xt(qp.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new gr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new gr({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Tr(this,["frequency","detune"])}static getDefaults(){return Object.assign(gs.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((a,o)=>a.detune.value=t+s*o)}}get count(){return this._oscillators.length}set count(e){if(Ml(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new gs({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):lr});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return bs(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Up extends oi{constructor(){const e=Xt(Up.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Ll({context:this.context,value:2}),this._pulse=new Nd({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new gs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Tr(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(oi.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return bs(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Ov={am:Pp,fat:qp,fm:zp,oscillator:gs,pulse:Nd,pwm:Up};class Tc extends oi{constructor(){const e=Xt(Tc.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new gr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new gr({context:this.context,units:"cents",value:e.detune}),Tr(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(gs.getDefaults(),zp.getDefaults(),Pp.getDefaults(),qp.getDefaults(),Nd.getDefaults(),Up.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Ov[e],s=this.now();if(this._oscillator){const a=this._oscillator;a.stop(s),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof Ov[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&jl(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&jl(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&El(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return bs(this,arguments,void 0,function*(e=1024){return Su(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class l2 extends gr{constructor(){super(Xt(l2.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new ys({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,rd(this._constantSource,this._sum)}static getDefaults(){return Object.assign(gr.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class c2 extends Nc{constructor(){const e=Xt(c2.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Ll({context:this.context,value:e.max-e.min}),this._add=this.output=new l2({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Nc.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function O3(n,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){Ml(o,n,e),t.set(this,o)}})}}function Rl(n,e=1/0){const t=new WeakMap;return function(s,a){Reflect.defineProperty(s,a,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(o){Ml(this.toSeconds(o),n,e),t.set(this,o)}})}}class Hp extends oi{constructor(){const e=Xt(Hp.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Sr({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(oi.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:lr,onerror:lr,playbackRate:1,reverse:!1})}load(e){return bs(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=lr){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=Nh(t,this._loopStart):t=Nh(t,0);const a=this.toSeconds(t),o=s;s=Nh(s,Math.max(this._buffer.duration-a,0));let u=this.toSeconds(s);u=u/this._playbackRate,e=this.toSeconds(e);const c=new Bp({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+u),this._state.setStateAtTime("stopped",e+u,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&Ea(o)?c.start(e,a):c.start(e,a,u-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const a=this.toSeconds(e);this._stop(s),this._start(s,a)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Ml(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Ml(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}go([Rl(0)],Hp.prototype,"fadeIn",void 0);go([Rl(0)],Hp.prototype,"fadeOut",void 0);class ua extends tn{constructor(){const e=Xt(ua.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new gr({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(tn.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(El(e))return e;{let s;for(s in T1)if(T1[s][t]===e)return s;return e}}_setCurve(e,t,s){if(El(s)&&Reflect.has(T1,s)){const a=T1[s];fu(a)?e!=="_decayCurve"&&(this[e]=a[t]):this[e]=a}else if(ca(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let a=this.toSeconds(this.attack);const o=this.toSeconds(this.decay),u=this.getValueAtTime(e);if(u>0){const c=1/a;a=(1-u)/c}if(a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,a,e);else{this._sig.cancelAndHoldAtTime(e);let c=this._attackCurve;for(let f=1;f<c.length;f++)if(c[f-1]<=u&&u<=c[f]){c=this._attackCurve.slice(f),c[0]=u;break}this._sig.setValueCurveAtTime(c,e,a,t)}if(o&&this.sustain<1){const c=t*this.sustain,f=e+a;this.log("decay",f),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,o+f):this._sig.exponentialApproachValueAtTime(c,f,o)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(Kt(ca(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return e2(this,e,t,s),this}asArray(){return bs(this,arguments,void 0,function*(e=1024){const t=e/this.context.sampleRate,s=new Zg(1,t,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),o=a+this.toSeconds(this.release),u=o*.1,c=o+u,f=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/c,decay:t*this.toSeconds(this.decay)/c,release:t*this.toSeconds(this.release)/c,context:s}));return f._sig.toDestination(),f.triggerAttackRelease(t*(a+u)/c,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}go([Rl(0)],ua.prototype,"attack",void 0);go([Rl(0)],ua.prototype,"decay",void 0);go([O3(0,1)],ua.prototype,"sustain",void 0);go([Rl(0)],ua.prototype,"release",void 0);const T1=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const a=[],o=6.4;for(e=0;e<127;e++){t=e/127;const _=Math.sin(t*(Math.PI*2)*o-Math.PI/2)+1;a[e]=_/10+t*.83}a[127]=1;const u=[],c=5;for(e=0;e<128;e++)u[e]=Math.ceil(e/127*c)/c;const f=[];for(e=0;e<128;e++)t=e/127,f[e]=.5*(1-Math.cos(Math.PI*t));const d=[];for(e=0;e<128;e++){t=e/127;const _=Math.pow(t,3)*4+.2,b=Math.cos(_*Math.PI*2*t);d[e]=Math.abs(b*(1-t))}function p(_){const b=new Array(_.length);for(let A=0;A<_.length;A++)b[A]=1-_[A];return b}function y(_){return _.slice(0).reverse()}return{bounce:{In:p(d),Out:d},cosine:{In:s,Out:y(s)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:p(a)},sine:{In:f,Out:p(f)},step:{In:u,Out:p(u)}}})();class Cc extends tn{constructor(){const e=Xt(Cc.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t),this._volume=this.output=new Gh({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Tr(this,"volume")}static getDefaults(){return Object.assign(tn.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...a)=>{const o=a[t],u=this.context.transport.schedule(c=>{a[t]=c,s.apply(this,a)},o);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s),u=this.toSeconds(t);return this.triggerAttack(e,o,a),this.triggerRelease(o+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class uo extends Cc{constructor(){const e=Xt(uo.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Cc.getDefaults(),{detune:0,onsilence:lr,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const a=this.toSeconds(t);return this._triggerEnvelopeAttack(a,s),this.setNote(e,a),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),a=e instanceof oa?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const o=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,o,s)}else this.frequency.setValueAtTime(a,s);return this}}go([Rl(0)],uo.prototype,"portamento",void 0);class Gp extends ua{constructor(){super(Xt(Gp.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ys({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class ja extends uo{constructor(){const e=Xt(ja.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Tc(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Gp(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Tr(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(uo.getDefaults(),{envelope:Object.assign(ao(ua.getDefaults(),Object.keys(tn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ao(Tc.getDefaults(),[...Object.keys(oi.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class sd extends uo{constructor(){const e=Xt(sd.getDefaults(),arguments);super(e),this.name="ModulationSynth",this._carrier=new ja({context:this.context,oscillator:e.oscillator,envelope:e.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new ja({context:this.context,oscillator:e.modulation,envelope:e.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new gr({context:this.context,units:"frequency"}),this.detune=new gr({context:this.context,value:e.detune,units:"cents"}),this.harmonicity=new Ll({context:this.context,value:e.harmonicity,minValue:0}),this._modulationNode=new ys({context:this.context,gain:0}),Tr(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(uo.getDefaults(),{harmonicity:3,oscillator:Object.assign(ao(Tc.getDefaults(),[...Object.keys(oi.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(ao(ua.getDefaults(),Object.keys(tn.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(ao(Tc.getDefaults(),[...Object.keys(oi.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(ao(ua.getDefaults(),Object.keys(tn.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)}_triggerEnvelopeRelease(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class cp extends sd{constructor(){super(Xt(cp.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new L3({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class up extends tn{constructor(){const e=Xt(up.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new pr({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new pr({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new pr({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new pr({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(tn.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Kt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let u=0;u<e;u++){const f=Math.pow(u/e,2)*19980+20;t[u]=f}const s=new Float32Array(e),a=new Float32Array(e),o=this.context.createBiquadFilter();return o.type=this.type,o.Q.value=this.Q.value,o.frequency.value=this.frequency.value,o.gain.value=this.gain.value,o.getFrequencyResponse(t,s,a),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class hp extends tn{constructor(){const e=Xt(hp.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new ys({context:this.context}),this.output=new ys({context:this.context}),this._filters=[],this._filters=[],this.Q=new gr({context:this.context,units:"positive",value:e.Q}),this.frequency=new gr({context:this.context,units:"frequency",value:e.frequency}),this.detune=new gr({context:this.context,units:"cents",value:e.detune}),this.gain=new gr({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Tr(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(tn.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Kt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=jl(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let a=s.indexOf(t);Kt(a!==-1,`rolloff can only be ${s.join(", ")}`),a+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(o=>o.disconnect()),this._filters=new Array(a);for(let o=0;o<a;o++){const u=new up({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[o]=u}this._internalChannels=this._filters,rd(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new up({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((o,u)=>s[u]*=o)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),Xg(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class fp extends ua{constructor(){const e=Xt(fp.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="FrequencyEnvelope",this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Vp({context:this.context,value:e.exponent}),this._scale=this.output=new c2({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(ua.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);Ml(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class dp extends uo{constructor(){const e=Xt(dp.getDefaults(),arguments);super(e),this.name="MonoSynth",this.oscillator=new Tc(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new hp(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new fp(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new Gp(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Tr(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(uo.getDefaults(),{envelope:Object.assign(ao(ua.getDefaults(),Object.keys(tn.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(ao(hp.getDefaults(),Object.keys(tn.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(ao(fp.getDefaults(),Object.keys(tn.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(ao(Tc.getDefaults(),Object.keys(oi.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Gf extends sd{constructor(){const e=Xt(Gf.getDefaults(),arguments);super(e),this.name="FMSynth",this.modulationIndex=new Ll({context:this.context,value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(sd.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class Wp extends ja{constructor(){const e=Xt(Wp.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Tr(this,["oscillator","envelope"])}static getDefaults(){return du(uo.getDefaults(),ja.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),a=this.toFrequency(e instanceof oa?e.toFrequency():e),o=a*this.octaves;return this.oscillator.frequency.setValueAtTime(o,s),this.oscillator.frequency.exponentialRampToValueAtTime(a,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}go([O3(0)],Wp.prototype,"octaves",void 0);go([Rl(0)],Wp.prototype,"pitchDecay",void 0);const D3=new Set;function u2(n){D3.add(n)}function R3(n,e){const t=`registerProcessor("${n}", ${e})`;D3.add(t)}const HT=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;u2(HT);const GT=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;u2(GT);const WT=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;u2(WT);const YT="feedback-comb-filter",$T=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;R3(YT,$T);class Pi extends Cc{constructor(){const e=Xt(Pi.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),Kt(!jl(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Cc.getDefaults(),{maxPolyphony:32,options:{},voice:ja})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Kt(e instanceof uo,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Op("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(a=>{const o=new lp(this.context,a).toMidi(),u=this._getNextAvailableVoice();u&&(u.triggerAttack(a,t,s),this._activeVoices.push({midi:o,voice:u,released:!1}),this.log("triggerAttack",a,t))})}_triggerRelease(e,t){e.forEach(s=>{const a=new lp(this.context,s).toMidi(),o=this._activeVoices.find(({midi:u,released:c})=>u===a&&!c);o&&(o.voice.triggerRelease(t),o.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,a){Kt(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(t,s,a):this._triggerRelease(t,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,s,a)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const a=this.toSeconds(t);return this._scheduleEvent("attack",e,a,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,a){const o=this.toSeconds(s);if(this.triggerAttack(e,o,a),ca(t)){Kt(ca(e),"If the duration is an array, the notes must also be an array"),e=e;for(let u=0;u<e.length;u++){const c=t[Math.min(u,t.length-1)],f=this.toSeconds(c);Kt(f>0,"The duration must be greater than 0"),this.triggerRelease(e[u],o+f)}}else{const u=this.toSeconds(t);Kt(u>0,"The duration must be greater than 0"),this.triggerRelease(e,o+u)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=ao(e,["onsilence","context"]);return this.options=du(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Ad extends Cc{constructor(){const e=Xt(Ad.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(s=>{const a=parseInt(s,10);if(Kt(A1(s)||jl(a)&&isFinite(a),`url key is neither a note or midi pitch: ${s}`),A1(s)){const o=new oa(this.context,s).toMidi();t[o]=e.urls[s]}else jl(a)&&isFinite(a)&&(t[a]=e.urls[a])}),this._buffers=new i2({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Cc.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:lr,onerror:lr,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(a=>{const o=k3(new oa(this.context,a).toFrequency()),u=Math.round(o),c=o-u,f=this._findClosest(u),d=u-f,p=this._buffers.get(d),y=C3(f+c),_=new Bp({url:p,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:y}).connect(this.output);_.start(t,0,p.duration/y,s),ca(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(_),_.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const b=this._activeSources.get(u),A=b.indexOf(_);A!==-1&&b.splice(A,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const a=new oa(this.context,s).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const o=this._activeSources.get(a);t=this.toSeconds(t),o.forEach(u=>{u.stop(t)}),this._activeSources.set(a,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,a=1){const o=this.toSeconds(s);return this.triggerAttack(e,o,a),ca(t)?(Kt(ca(e),"notes must be an array when duration is array"),e.forEach((u,c)=>{const f=t[Math.min(c,t.length-1)];this.triggerRelease(u,o+this.toSeconds(f))})):this.triggerRelease(e,o+this.toSeconds(t)),this}add(e,t,s){if(Kt(A1(e)||isFinite(e),`note must be a pitch or midi: ${e}`),A1(e)){const a=new oa(this.context,e).toMidi();this._buffers.add(a,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}go([Rl(0)],Ad.prototype,"attack",void 0);go([Rl(0)],Ad.prototype,"release",void 0);class h2 extends tn{constructor(){const e=Xt(h2.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new pr({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Tr(this,"pan")}static getDefaults(){return Object.assign(tn.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const XT="bit-crusher",ZT=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;R3(XT,ZT);class ms extends tn{constructor(){const e=Xt(ms.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new ys({context:this.context}),ms._allSolos.has(this.context)||ms._allSolos.set(this.context,new Set),ms._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(tn.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),ms._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ms._soloed.has(this.context)||ms._soloed.set(this.context,new Set),ms._soloed.get(this.context).add(this)}_removeSolo(){ms._soloed.has(this.context)&&ms._soloed.get(this.context).delete(this)}_isSoloed(){return ms._soloed.has(this.context)&&ms._soloed.get(this.context).has(this)}_noSolos(){return!ms._soloed.has(this.context)||ms._soloed.has(this.context)&&ms._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ms._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ms._allSolos=new Map;ms._soloed=new Map;class f2 extends tn{constructor(){const e=Xt(f2.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new h2({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Gh({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Tr(this,["pan","volume"])}static getDefaults(){return Object.assign(tn.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class _h extends tn{constructor(){const e=Xt(_h.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new ms({solo:e.solo,context:this.context}),this._panVol=this.output=new f2({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Tr(this,["pan","volume"])}static getDefaults(){return Object.assign(tn.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return _h.buses.has(e)||_h.buses.set(e,new ys({context:this.context})),_h.buses.get(e)}send(e,t=0){const s=this._getBus(e),a=new ys({context:this.context,units:"decibels",gain:t});return this.connect(a),a.connect(s),a}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}_h.buses=new Map;const Ui=oo().transport,I3=oo().destination;oo().destination;oo().listener;oo().draw;const vs=oo();function QT(){return Sr.loaded()}const C1=({cx:n,cy:e,innerRadius:t,outerRadius:s,startAngle:a,endAngle:o,color:u,label:c,chord:f,isSelected:d,isDiatonic:p,isSecondary:y=!1,onClick:_,onDoubleClick:b,ringType:A="major",wheelRotation:N=0,romanNumeral:k,voicingSuggestion:C,segmentId:R="seg",onHover:D})=>{const V=oS(n,e,t,s,a,o),I=(a+o)/2,Y=Zn.useRef(0),W=Zn.useRef(null),[O,B]=Zn.useState(!1),K=Zn.useRef(null),j=Zn.useRef(!1),F=Zn.useRef(!1),te=-N,H=s-t,ae=t+H*.5,$=t+H*.18,re=wc(n,e,ae,I),le=wc(n,e,$,I),pe=s-6,be=aS(n,e,pe,a+1,o-1),P=`voicing-arc-${R}`,M=`clip-${R}`,J=(()=>{let Ye=.35,ut=.5;p?(Ye=1,ut=1):y&&(Ye=.7,ut=.65);const at=u.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(at){const Pe=parseInt(at[1]),nt=Math.round(parseInt(at[2])*ut),tt=parseInt(at[3]);let ht=tt;return A==="minor"?ht=Math.max(tt-8,30):A==="diminished"&&(ht=Math.max(tt-15,25)),{fill:`hsl(${Pe}, ${nt}%, ${ht}%)`,opacity:Ye}}return{fill:u,opacity:Ye}})(),Q=()=>A==="diminished"?"10px":A==="minor"?"12px":"14px",oe=p||y,fe=oe?"#000000":"rgba(255,255,255,0.7)",de=p?"bold":y?"600":"normal",xe=A==="diminished"||A==="minor"?"6px":"8px",we=A==="major"?oe?6:5:A==="minor"?oe?4:3.25:oe?3.5:3,Ve=oe?1:.95,Xe=Ye=>{if(B(!0),Ye.touches.length>=2){F.current=!0,K.current=null;return}Ye.touches.length===1&&!F.current&&(K.current={x:Ye.touches[0].clientX,y:Ye.touches[0].clientY},j.current=!1)},Je=Ye=>{if(Ye.touches.length>=2){F.current=!0,j.current=!0;return}if(K.current&&Ye.touches.length===1&&!F.current){const ut=Ye.touches[0],at=ut.clientX-K.current.x,Pe=ut.clientY-K.current.y;Math.sqrt(at*at+Pe*Pe)>15&&(j.current=!0)}},Fe=async Ye=>{Ye.preventDefault(),Ye.stopPropagation(),B(!1);const ut=F.current,at=j.current;if(K.current=null,j.current=!1,Ye.touches.length===0&&(F.current=!1),ut||at)return;vs.state!=="running"&&await _u();const Pe=Date.now(),nt=Pe-Y.current;W.current&&(clearTimeout(W.current),W.current=null),nt<300&&nt>0?(Y.current=0,b&&b(f)):(Y.current=Pe,W.current=setTimeout(()=>{_(f),W.current=null},300))},z=()=>{B(!1),K.current=null,j.current=!1,F.current=!1,W.current&&(clearTimeout(W.current),W.current=null)},ke=Ye=>{Ye.stopPropagation(),Ue.current&&(clearTimeout(Ue.current),Ue.current=null),D&&D(null,0,0),_(f)},ct=Ye=>{Ye.stopPropagation(),Ue.current&&(clearTimeout(Ue.current),Ue.current=null),D&&D(null,0,0),b&&b(f)},Ue=Zn.useRef(null),Me=Ye=>{if(!D)return;const ut=Ye.clientX,at=Ye.clientY;Ue.current=setTimeout(()=>{D("Select a chord slot in the timeline, then double-click a chord or chord voicing to add to the timeline.",ut,at)},3e3)},it=()=>{Ue.current&&(clearTimeout(Ue.current),Ue.current=null),D&&D(null,0,0)};return v.jsxs("g",{className:qt("cursor-pointer transition-all duration-200",!oe&&"hover:opacity-70",O&&"opacity-80"),onClick:ke,onDoubleClick:ct,onTouchStart:Xe,onTouchMove:Je,onTouchEnd:Fe,onTouchCancel:z,onMouseEnter:Me,onMouseLeave:it,style:{pointerEvents:"all",WebkitTapHighlightColor:"transparent"},children:[(p||y)&&C&&v.jsx("defs",{children:v.jsx("path",{id:P,d:be,fill:"none"})}),v.jsx("defs",{children:v.jsx("clipPath",{id:M,children:v.jsx("path",{d:V})})}),v.jsx("path",{d:V,fill:J.fill,opacity:J.opacity,stroke:k==="I"?"rgba(0,0,0,0.6)":"rgba(0,0,0,0.3)",strokeWidth:k==="I"?2.5:1,className:qt("transition-all duration-200 hover:brightness-110",d&&"brightness-125 stroke-white stroke-2",oe&&"hover:brightness-105"),style:{pointerEvents:"all"}}),d&&v.jsx("path",{d:V,fill:"none",stroke:"white",strokeWidth:we,opacity:Ve,filter:"url(#segment-glow)",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none",clipPath:`url(#${M})`}),(p||y)&&C&&A==="major"&&v.jsx("text",{fill:"rgba(0,0,0,0.6)",fontSize:"6px",className:"pointer-events-none select-none",children:v.jsx("textPath",{href:`#${P}`,startOffset:"50%",textAnchor:"middle",children:C})}),p&&C&&A==="minor"&&v.jsx("text",{fill:"rgba(0,0,0,0.55)",fontSize:"5px",className:"pointer-events-none select-none",children:v.jsx("textPath",{href:`#${P}`,startOffset:"50%",textAnchor:"middle",children:C})}),p&&C&&A==="diminished"&&v.jsx("text",{fill:"rgba(0,0,0,0.5)",fontSize:"5px",className:"pointer-events-none select-none",children:v.jsx("textPath",{href:`#${P}`,startOffset:"50%",textAnchor:"middle",children:C})}),v.jsx("text",{x:re.x,y:re.y,textAnchor:"middle",dominantBaseline:"middle",fill:fe,fontWeight:de,fontSize:Q(),className:"pointer-events-none select-none",transform:`rotate(${te}, ${re.x}, ${re.y})`,children:or(c)}),(p||y)&&k&&v.jsx("text",{x:le.x,y:le.y,textAnchor:"middle",dominantBaseline:"middle",fill:"rgba(0,0,0,0.6)",fontSize:xe,fontStyle:"italic",className:"pointer-events-none select-none",transform:`rotate(${te}, ${le.x}, ${le.y})`,children:k})]})};const KT=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JT=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Dv=n=>{const e=JT(n);return e.charAt(0).toUpperCase()+e.slice(1)},V3=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),eC=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var tC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const nC=ne.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:u,...c},f)=>ne.createElement("svg",{ref:f,...tC,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:V3("lucide",a),...!o&&!eC(c)&&{"aria-hidden":"true"},...c},[...u.map(([d,p])=>ne.createElement(d,p)),...Array.isArray(o)?o:[o]]));const rn=(n,e)=>{const t=ne.forwardRef(({className:s,...a},o)=>ne.createElement(nC,{ref:o,iconNode:e,className:V3(`lucide-${KT(Dv(n))}`,`lucide-${n}`,s),...a}));return t.displayName=Dv(n),t};const rC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wf=rn("chevron-down",rC);const sC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ih=rn("chevron-right",sC);const iC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Vh=rn("chevron-left",iC);const aC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],F3=rn("chevron-up",aC);const oC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],id=rn("circle-question-mark",oC);const lC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cC=rn("circle",lC);const uC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],hC=rn("clock",uC);const fC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],dC=rn("copy",fC);const pC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],d2=rn("download",pC);const mC=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],gC=rn("eraser",mC);const bC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],vC=rn("file-plus",bC);const yC=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],xC=rn("folder-open",yC);const wC=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],B3=rn("grip-vertical",wC);const _C=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],P3=rn("hand",_C);const SC=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],NC=rn("hash",SC);const AC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],TC=rn("info",AC);const CC=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],kC=rn("layers",CC);const jC=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"M21 16V5",key:"yxg4q8"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],z3=rn("list-music",jC);const EC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],MC=rn("loader-circle",EC);const LC=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],pp=rn("map",LC);const OC=[["path",{d:"M5 12h14",key:"1ays0h"}]],DC=rn("minus",OC);const RC=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],IC=rn("mouse-pointer-2",RC);const VC=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],q3=rn("music",VC);const FC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],U3=rn("panel-right-close",FC);const BC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],PC=rn("panel-right",BC);const zC=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],H3=rn("pause",zC);const qC=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Wh=rn("play",qC);const UC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Yh=rn("plus",UC);const HC=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],GC=rn("refresh-cw",HC);const WC=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Rv=rn("repeat",WC);const YC=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],mp=rn("rotate-ccw",YC);const $C=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Fh=rn("rotate-cw",$C);const XC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Iv=rn("save",XC);const ZC=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Vv=rn("settings-2",ZC);const QC=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],G3=rn("skip-back",QC);const KC=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],W3=rn("skip-forward",KC);const JC=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ek=rn("sparkles",JC);const tk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Y3=rn("square",tk);const nk=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],rk=rn("tag",nk);const sk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tg=rn("trash-2",sk);const ik=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],ng=rn("volume-2",ik);const ak=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],ok=rn("volume-x",ak);const lk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bu=rn("x",lk);const ck=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],uk=rn("zoom-in",ck);const hk=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],fk=rn("zoom-out",hk);let kc={piano:null,epiano:null,guitar:null,organ:null,synth:null,strings:null,pad:null,brass:null,marimba:null,bell:null,lead:null,bass:null,choir:null},p2="piano",Ff=null,q1=[],gp={},Fv=!1,zi=null;const m2=()=>{if(zi)return;if("audioSession"in navigator)try{navigator.audioSession.type="playback",console.log("[iOS Audio] Set audioSession.type to playback")}catch(t){console.warn("[iOS Audio] Could not set audioSession type:",t)}const n=["/+NIxAAAAAANIAAAAAExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/","40jEAA8AAAANIAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV","VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU"].join("");zi=document.createElement("audio"),zi.src="data:audio/mpeg;base64,"+n,zi.loop=!0,zi.volume=.001,zi.muted=!1,zi.setAttribute("playsinline","true"),zi.setAttribute("x-webkit-airplay","deny"),zi.preload="auto",document.body.appendChild(zi);const e=zi.play();e!==void 0&&e.then(()=>{console.log("[iOS Audio] Silent media started - ringer switch workaround active")}).catch(t=>{console.log("[iOS Audio] Silent audio deferred until user gesture:",t.message)})},g2=async()=>{if(!Fv){if(console.log("[iOS Audio] Starting unlock sequence..."),m2(),zi&&zi.paused)try{await zi.play(),console.log("[iOS Audio] Silent audio now playing")}catch(n){console.warn("[iOS Audio] Silent audio play failed:",n)}try{await _u(),console.log("[iOS Audio] Tone.start() completed, state:",vs.state)}catch(n){console.warn("[iOS Audio] Tone.start() failed:",n)}if(vs.state!=="running")try{await vs.resume(),console.log("[iOS Audio] Context resumed, state:",vs.state)}catch(n){console.warn("[iOS Audio] Context resume failed:",n)}Fv=!0,console.log("[iOS Audio] Unlock sequence complete")}},b2=n=>{n in kc&&(p2=n)},$3=n=>{const e=n<=0?-1/0:20*Math.log10(n);try{I3.volume.rampTo(e,.1)}catch(t){console.error("Error setting volume:",t)}},X3=n=>{I3.mute=n},Lc=async()=>{if(Ff)return Ff;Ff=(async()=>{const n="https://tonejs.github.io/audio/salamander/",e=(t,s)=>{if(!kc[t])try{const a=s();a&&(kc[t]=a)}catch(a){console.error(`Failed to init instrument "${t}"`,a)}};e("piano",()=>new Ad({urls:{C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3"},release:1,baseUrl:n}).toDestination()),e("guitar",()=>new Pi(ja,{oscillator:{type:"triangle"},envelope:{attack:.002,decay:.25,sustain:.3,release:1.2},filter:{type:"lowpass",frequency:2400,rolloff:-12,Q:1.2},filterEnvelope:{attack:.002,decay:.25,sustain:.2,release:.8,baseFrequency:800,octaves:2.5}}).toDestination()),e("organ",()=>new Pi(cp,{harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("synth",()=>new Pi(Gf,{harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}}).toDestination()),e("epiano",()=>new Pi(cp,{harmonicity:2,oscillator:{type:"triangle"},envelope:{attack:.01,decay:.2,sustain:.7,release:.8},modulation:{type:"sine"},modulationEnvelope:{attack:.2,decay:.1,sustain:.6,release:.6}}).toDestination()),e("strings",()=>new Pi(ja,{oscillator:{type:"sawtooth"},envelope:{attack:.2,decay:.2,sustain:.8,release:1.2}}).toDestination()),e("pad",()=>new Pi(Gf,{harmonicity:1.5,modulationIndex:8,oscillator:{type:"sine"},envelope:{attack:.5,decay:.3,sustain:.9,release:1.5},modulation:{type:"triangle"},modulationEnvelope:{attack:.8,decay:.3,sustain:.8,release:1.2}}).toDestination()),e("brass",()=>new Pi(dp,{oscillator:{type:"square"},filter:{Q:2,type:"lowpass",rolloff:-12},envelope:{attack:.02,decay:.25,sustain:.6,release:.7},filterEnvelope:{attack:.01,decay:.2,sustain:.8,release:.4,baseFrequency:200,octaves:2.5}}).toDestination()),e("marimba",()=>new Pi(ja,{oscillator:{type:"triangle"},envelope:{attack:.001,decay:.35,sustain:0,release:.6}}).toDestination()),e("bell",()=>new Pi(Gf,{harmonicity:8,modulationIndex:2,oscillator:{type:"sine"},envelope:{attack:.01,decay:1.2,sustain:0,release:1.2},modulation:{type:"square"},modulationEnvelope:{attack:.01,decay:.5,sustain:0,release:1.2}}).toDestination()),e("lead",()=>new Pi(ja,{oscillator:{type:"sawtooth"},envelope:{attack:.005,decay:.15,sustain:.6,release:.35}}).toDestination()),e("bass",()=>new Pi(dp,{oscillator:{type:"square"},filter:{type:"lowpass",rolloff:-24,Q:2},envelope:{attack:.01,decay:.2,sustain:.6,release:.4},filterEnvelope:{attack:.001,decay:.15,sustain:.4,release:.2,baseFrequency:80,octaves:3}}).toDestination()),e("choir",()=>new Pi(ja,{oscillator:{type:"sine"},envelope:{attack:.8,decay:.3,sustain:.9,release:1.8}}).toDestination()),await QT()})();try{await Ff}catch(n){Ff=null,console.error("Failed to initialize audio",n)}},Bv=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],Ur=async(n,e="1n",t)=>{if(vs.state!=="running"&&await _u(),vs.state==="suspended"&&await vs.resume(),await Lc(),!n||n.length===0)return;const s=n[0],a=Bv.indexOf(s.replace(/\d/,"")),o=n.map((c,f)=>{if(c.match(/\d/))return c;const d=c,p=Bv.indexOf(d);if(f===0)return`${d}3`;let y=3;return(p<a||p-a>6)&&(y=4),f>=4&&(y=4),f>=5&&(y=5),`${d}${y}`});let u=kc[p2];if(u||(u=kc.piano),!u){console.error("No instrument available to play!");return}try{u.triggerAttackRelease(o,e,t)}catch(c){console.error("Failed to play chord",c)}},Z3=async(n,e=4,t="8n")=>{vs.state!=="running"&&await _u(),vs.state==="suspended"&&await vs.resume(),await Lc();let s=kc[p2];if(s||(s=kc.piano),!s){console.error("No instrument available to play!");return}const a=`${n}${e}`;try{s.triggerAttackRelease(a,t)}catch(o){console.error(`Failed to play note ${a}`,o)}},Q3=()=>{Object.values(kc).forEach(t=>t?.releaseAll()),Ui.stop();const{setPlayingSlot:n,setIsPlaying:e}=nn.getState();n(null,null),e(!1)},ad=n=>{const e=Math.floor(n/4),t=Math.floor(n%4),s=Math.floor(n%1*4);return`${e}:${t}:${s}`},v2=n=>{Ui.cancel(0),q1=[],gp={},Ui.timeSignature=4;let e=0;n.sections.forEach(s=>{gp[s.id]=e,s.measures.forEach(a=>{a.beats.forEach(o=>{const u=ad(e),c=o.duration,f=c*4,d=`${Math.floor(f/16)}:${Math.floor(f%16/4)}:${f%4}`,p=Ui.schedule(y=>{const b=Math.max(0,y-vs.currentTime)*1e3;setTimeout(()=>{nn.getState().setPlayingSlot(s.id,o.id)},b),o.chord&&Ur(o.chord.notes,d,y)},u);q1.push(p),e+=c})})});const t=Ui.schedule(()=>{nn.getState().isLooping||Q3()},ad(e));q1.push(t)},dk=async()=>{await Lc()},K3=async()=>{await Lc(),vs.state!=="running"&&await vs.resume();const{tempo:n,currentSong:e}=nn.getState();Ui.bpm.value=n,q1.length===0&&v2(e),Ui.start()},J3=()=>{Ui.pause()},ew=n=>{Ui.bpm.value=n},tw=n=>{const{currentSong:e,playingSectionId:t}=nn.getState(),s=e.sections.map(p=>p.id);let a=t?s.indexOf(t):-1;a===-1&&(a=0);let o=n==="next"?a+1:a-1;o>=s.length&&(o=0),o<0&&(o=0);const u=s[o],c=gp[u]||0,f=ad(c);Ui.position=f;const d=e.sections[o].measures[0]?.beats[0];d&&nn.getState().setPlayingSlot(u,d.id)},nw=()=>{const{isLooping:n,playingSectionId:e,selectedSectionId:t,currentSong:s}=nn.getState();if(n){const a=e||t,o=s.sections.find(u=>u.id===a);if(o){const u=gp[o.id]??0;let c=0;o.measures.forEach(d=>d.beats.forEach(p=>c+=p.duration));const f=u+c;Ui.loopStart=ad(u),Ui.loopEnd=ad(f),Ui.loop=!0;return}}Ui.loop=!1},rg=Object.freeze(Object.defineProperty({__proto__:null,initAudio:Lc,pauseSong:J3,playChord:Ur,playNote:Z3,playSong:K3,preloadAudio:dk,scheduleSong:v2,setInstrument:b2,setMute:X3,setTempo:ew,setVolume:$3,skipToSection:tw,startSilentAudioForIOS:m2,stopAudio:Q3,toggleLoopMode:nw,unlockAudioForIOS:g2},Symbol.toStringTag,{value:"Module"})),bp=768;function y2(){const[n,e]=ne.useState(()=>typeof window<"u"?window.innerWidth<bp:!1);return ne.useEffect(()=>{const t=()=>e(window.innerWidth<bp);return window.addEventListener("resize",t),window.addEventListener("orientationchange",t),()=>{window.removeEventListener("resize",t),window.removeEventListener("orientationchange",t)}},[]),n}function $h(){const[n,e]=ne.useState(()=>typeof window<"u"?window.innerWidth<bp||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[t,s]=ne.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1);return ne.useEffect(()=>{const a=()=>{const o=window.innerWidth,u=window.innerHeight,c=o<bp||u<500&&u<o,f=u<o&&u<500;e(c),s(f)};return window.addEventListener("resize",a),window.addEventListener("orientationchange",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("orientationchange",a)}},[]),{isMobile:n,isLandscape:t}}var Cl=Nx();const pk=7e3,mk=({isOpen:n,onClose:e,onSelect:t,onAddToTimeline:s,onOpenDetails:a,chordRoot:o,voicings:u,selectedQuality:c,portraitWithPanel:f=!1})=>{const d=ne.useRef(null),{isMobile:p,isLandscape:y}=$h(),_=p&&y,[b,A]=ne.useState(c),N=ne.useRef(null),k=ne.useRef(null);ne.useEffect(()=>{n&&A(c)},[n,c]);const C=ne.useCallback(()=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{e()},pk)},[e]);if(ne.useEffect(()=>(n&&C(),()=>{k.current&&clearTimeout(k.current)}),[n,C]),ne.useEffect(()=>{if(!n)return;const D=I=>{d.current&&!d.current.contains(I.target)&&e()},V=setTimeout(()=>{document.addEventListener("mousedown",D),document.addEventListener("touchstart",D)},100);return()=>{clearTimeout(V),document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[n,e]),ne.useEffect(()=>{if(!n)return;const D=V=>{V.key==="Escape"&&e()};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[n,e]),!n)return null;const R=D=>{const V=Date.now();if(C(),N.current&&N.current.quality===D&&V-N.current.time<400){s&&s(D),e(),N.current=null;return}const I=ka(o,D);Ur(I),A(D),t(D),N.current={quality:D,time:V}};return Cl.createPortal(v.jsxs("div",{ref:d,className:qt("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row flex-nowrap items-center justify-center","animate-in fade-in zoom-in-95 duration-150",u.length>5||_?"p-1 gap-1":"p-2 gap-2"),style:{bottom:_?"56px":f?"6%":p?"13%":"220px",top:"auto",..._?{left:"24%",transform:"translateX(-50%)",maxWidth:"min(55vw, fit-content)"}:p?{left:"50%",transform:"translateX(-50%)",maxWidth:"calc(100vw - 32px)"}:{right:"340px",left:"auto",transform:"none",maxWidth:"calc(100vw - 400px)"},zIndex:99999},children:[u.map(D=>{const V=D.quality===b,I=u.length>4||_,Y=u.length>=6;return v.jsx("button",{onClick:W=>{W.stopPropagation(),R(D.quality)},onTouchEnd:W=>{W.stopPropagation()},className:qt("flex items-center justify-center rounded-lg transition-all shrink-0",Y?"min-w-[32px] h-9 px-0.5":I?"min-w-[40px] h-10 px-1.5":"min-w-[48px] h-12 px-2",V?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`Tap to preview, double-tap to add ${o}${D.label}`,children:v.jsx("span",{className:qt("font-semibold",Y?"text-[10px]":I?"text-xs":V?"text-sm":"text-xs"),children:D.label||"maj"})},D.quality)}),u.length>0&&v.jsx("div",{className:"w-px bg-border-subtle self-stretch my-1 shrink-0"}),a&&v.jsx("button",{onClick:D=>{D.stopPropagation(),a(),e()},onTouchEnd:D=>{D.preventDefault(),D.stopPropagation(),a(),e()},className:qt("flex items-center justify-center rounded-lg transition-all shrink-0","text-text-tertiary hover:text-text-secondary hover:bg-bg-tertiary",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Open chord details",children:v.jsx(TC,{size:u.length>=6?12:u.length>4||_?14:16})}),s&&v.jsx("button",{onClick:D=>{D.stopPropagation();const V=b||c||u[0]?.quality;V&&(s(V),e())},onTouchEnd:D=>{D.preventDefault(),D.stopPropagation();const V=b||c||u[0]?.quality;V&&(s(V),e())},className:qt("flex items-center justify-center rounded-lg transition-all shrink-0","text-accent-primary hover:text-white hover:bg-accent-primary/20",u.length>=6?"w-7 h-9":u.length>4||_?"w-8 h-10":"w-10 h-12"),title:"Add to timeline",children:v.jsx(Yh,{size:u.length>=6?14:u.length>4||_?16:18})})]}),document.body)};function gk(n,e){if(!n)return[];const t=n.split(/,\s*|\s+or\s+/).map(a=>a.trim()).filter(Boolean),s=[];e==="major"?s.push({quality:"major",label:""}):e==="minor"?s.push({quality:"minor",label:"m"}):e==="diminished"&&s.push({quality:"diminished",label:""});for(const a of t){let o=a,u=a;a==="6"?(o="major6",u="6"):a==="m6"?(o="minor6",u="m6"):a==="m75 (7)"?(o="halfDiminished7",u="7"):a==="m7"?(o="minor7",u="m7"):a==="m9"?(o="minor9",u="m9"):a==="m11"?(o="minor11",u="m11"):a==="sus4"?(o="sus4",u="sus4"):a==="7"?(o="dominant7",u="7"):a==="9"?(o="dominant9",u="9"):a==="11"?(o="dominant11",u="11"):a==="13"?(o="dominant13",u="13"):a==="maj7"?(o="major7",u="maj7"):a==="maj9"?(o="major9",u="maj9"):a==="maj13"&&(o="major13",u="maj13"),s.push({quality:o,label:u})}return s}const bk=({zoomScale:n,zoomOriginY:e,onZoomChange:t,panOffset:s,onPanChange:a,rotationOffset:o=0,disableModeToggle:u=!1,footerVisible:c=!0})=>{const{selectedKey:f,setKey:d,wheelRotation:p,wheelMode:y,rotateWheel:_,toggleWheelMode:b,addChordToSlot:A,selectedSectionId:N,selectedSlotId:k,setSelectedChord:C,selectedChord:R,selectNextSlotAfter:D,setSelectedSlot:V,timelineVisible:I,openTimeline:Y,chordPanelVisible:W,toggleChordPanel:O,pulseChordPanel:B,chordPanelGuitarExpanded:K,chordPanelVoicingsExpanded:j}=nn(),F=Uf.indexOf(f),te=-(F*30);let H;o!==0?H=te+o:y==="rotating"?H=p:H=0;const ae=ne.useRef(null),$=ne.useRef(null),[re,le]=ne.useState(null),[pe,be]=ne.useState({x:0,y:0}),[P,M]=ne.useState({isOpen:!1,chord:null,voicingSuggestion:"",baseQuality:""}),G=s??pe,J=ne.useCallback(Ne=>{a?a(Ne):be(Ne)},[a]),Q=y2(),{isLandscape:oe}=$h();ne.useEffect(()=>{const Ne=R?.segmentId??null;le(Ne)},[R]);const fe=ne.useRef(null),de=ne.useRef(null),[xe,we]=ne.useState(!1),Ve=ne.useRef(0),Xe=ne.useRef(0),[Je,Fe]=ne.useState(!1),z=ne.useRef(null),ke=ne.useCallback((Ne,Ie)=>{if(!de.current)return 0;const Ze=de.current.getBoundingClientRect(),bt=Ze.left+Ze.width/2,Ht=Ze.top+Ze.height/2,Vt=Ne-bt,Fn=Ie-Ht;return Math.atan2(Fn,Vt)*(180/Math.PI)},[]),ct=ne.useCallback(Ne=>{for(;Ne>180;)Ne-=360;for(;Ne<-180;)Ne+=360;return Ne},[]),Ue=ne.useCallback(Ne=>{const Ie=Uf.indexOf(f),Ze=Ne==="cw"?(Ie+1)%12:(Ie-1+12)%12;d(Uf[Ze]),_(Ne)},[f,d,_]),Me=ne.useRef(null),it=ne.useRef(!1),Ye=ne.useCallback(Ne=>{if(Q||!de.current||!fe.current)return;const Ie=de.current.getBoundingClientRect(),Ze=Ie.width/2,bt=Ie.height/2,Ht=Ne.clientX-Ie.left-Ze,Vt=Ne.clientY-Ie.top-bt,Fn=Math.sqrt(Ht*Ht+Vt*Vt),Wn=Ie.width/600*70,wn=Ie.width/600*250;Fn>Wn&&Fn<=wn?(we(!0),Ve.current=ke(Ne.clientX,Ne.clientY),Xe.current=p,Ne.preventDefault()):Fn>wn&&n>1&&(Fe(!0),z.current={x:Ne.clientX,y:Ne.clientY},Ne.preventDefault())},[ke,p,Q,n]),ut=ne.useCallback(Ne=>{if(Ne.touches.length!==1)return;const Ie=Ne.touches[0];if(Me.current={x:Ie.clientX,y:Ie.clientY},it.current=!1,!de.current)return;const Ze=de.current.getBoundingClientRect(),bt=Ze.width/2,Ht=Ze.height/2,Vt=Ie.clientX-Ze.left-bt,Fn=Ie.clientY-Ze.top-Ht,Wn=Math.sqrt(Vt*Vt+Fn*Fn),wn=Ze.width/600*70;Wn>wn&&(Ve.current=ke(Ie.clientX,Ie.clientY),Xe.current=p)},[ke,p]),at=ne.useCallback(Ne=>{if(Ne.touches.length!==1||!Me.current)return;const Ie=Ne.touches[0],Ze=Ie.clientX-Me.current.x,bt=Ie.clientY-Me.current.y;if(Math.sqrt(Ze*Ze+bt*bt)>10){if(it.current=!0,Ne.preventDefault(),!de.current)return;const Vt=de.current.getBoundingClientRect(),Fn=Vt.width/2,Wn=Vt.height/2,wn=Ie.clientX-Vt.left,os=Ie.clientY-Vt.top,Rr=Math.sqrt(Math.pow(wn-Fn,2)+Math.pow(os-Wn,2)),Jr=Vt.width/600*70;if(Rr>Jr&&Ve.current!==0){const ls=ke(Ie.clientX,Ie.clientY),Us=ct(ls-Ve.current);if(Math.abs(Us)>=15){const xs=Math.round(Us/30);if(xs!==0){const ci=y==="fixed"?xs>0?"cw":"ccw":xs>0?"ccw":"cw",xi=Math.abs(xs);for(let Ir=0;Ir<xi;Ir++)Ue(ci);Ve.current=ls}}}}},[ke,Ue,y,ct]),Pe=ne.useCallback(Ne=>{if(!xe)return;const Ie=ke(Ne.clientX,Ne.clientY),Ze=ct(Ie-Ve.current);if(Math.abs(Ze)>=15){const bt=Math.round(Ze/30);if(bt!==0){let Ht;y==="fixed"?Ht=bt>0?"cw":"ccw":Ht=bt>0?"ccw":"cw";const Vt=Math.abs(bt);for(let Fn=0;Fn<Vt;Fn++)Ue(Ht);Ve.current=Ie}}},[xe,ke,Ue,y,ct]),nt=ne.useCallback(()=>{we(!1)},[]);ne.useEffect(()=>{if(xe)return document.addEventListener("mousemove",Pe),document.addEventListener("mouseup",nt),()=>{document.removeEventListener("mousemove",Pe),document.removeEventListener("mouseup",nt)}},[xe,Pe,nt]);const tt=ne.useCallback((Ne,Ie,Ze)=>{if(!fe.current||Ze<=1)return{x:0,y:0};const{clientWidth:bt,clientHeight:Ht}=fe.current,Vt=12,Fn=bt*(Ze-1)/2+Vt,Wn=Ht*(Ze-1)/2+Vt;return{x:Math.max(-Fn,Math.min(Fn,Ne)),y:Math.max(-Wn,Math.min(Wn,Ie))}},[]);ne.useEffect(()=>{J(tt(G.x,G.y,n))},[n,tt,G.x,G.y,J]);const ht=ne.useCallback(Ne=>{if(!Je||!z.current)return;const Ie=Ne.clientX-z.current.x,Ze=Ne.clientY-z.current.y;J(tt(G.x+Ie,G.y+Ze,n)),z.current={x:Ne.clientX,y:Ne.clientY}},[Je,n,tt,G,J]),yt=ne.useCallback(()=>{Fe(!1),z.current=null},[]);ne.useEffect(()=>{if(Je)return document.addEventListener("mousemove",ht),document.addEventListener("mouseup",yt),()=>{document.removeEventListener("mousemove",ht),document.removeEventListener("mouseup",yt)}},[Je,ht,yt]);const dt=Ne=>({x:(Ne[0].clientX+Ne[1].clientX)/2,y:(Ne[0].clientY+Ne[1].clientY)/2}),xt=ne.useCallback(Ne=>{if(Ne.touches.length===2){Ne.preventDefault();const Ie=Ne.touches[0].clientX-Ne.touches[1].clientX,Ze=Ne.touches[0].clientY-Ne.touches[1].clientY;ae.current=Math.sqrt(Ie*Ie+Ze*Ze),$.current=dt(Ne.touches)}},[]),ft=ne.useCallback(Ne=>{if(Ne.touches.length===2&&ae.current!==null){Ne.preventDefault(),Ne.stopPropagation();const Ie=Ne.touches[0].clientX-Ne.touches[1].clientX,Ze=Ne.touches[0].clientY-Ne.touches[1].clientY,bt=Math.sqrt(Ie*Ie+Ze*Ze),Ht=bt/ae.current,Vt=Math.max(1,Math.min(2.5,n*Ht)),Fn=Vt>1.3?38:50,Wn=dt(Ne.touches);if($.current){const wn=Wn.x-$.current.x,os=Wn.y-$.current.y;J(tt(G.x+wn,G.y+os,Vt))}ae.current=bt,$.current=Wn,t(Vt,Fn)}},[n,t,tt,G,J]),un=ne.useCallback(Ne=>{ae.current=null,$.current=null,Ne.touches.length===0&&Ne.preventDefault()},[]),Yt=ne.useCallback(Ne=>{if(Ne.ctrlKey||Ne.metaKey){Ne.preventDefault();const Ie=Ne.deltaY>0?.9:1.1,Ze=Math.max(1,Math.min(2.5,n*Ie)),bt=Ze>1.3?38:50;t(Ze,bt)}},[n,t]),Nt=dd(),St=600,Tt=St/2,gt=St/2,Qt=60,Lt=Qt+8,Rt=145,mn=Rt,vt=210,_e=vt,rt=250,Ae=ne.useMemo(()=>Q_(f),[f]),st=ne.useMemo(()=>Ae.sharps>0?`${Ae.sharps}`:Ae.flats>0?`${Ae.flats}`:"",[Ae]),pt=ne.useRef(0),At=Ne=>{const Ie=Ne,Ze=Date.now();if(Ze-pt.current<300)return;pt.current=Ze,Ur(Ne.notes),le(Ie.segmentId??null),C(Ne);let bt="";Ie.positionIndex!==void 0&&Ie.ringType&&(bt=hn(Ie.positionIndex,Ie.ringType==="major"?"major":Ie.ringType==="minor"?Ie.numeral==="ii"||Ie.numeral==="vi"?"ii":"iii":"dim")),(!(Q&&!oe)||!W||!K&&!j)&&M({isOpen:!0,chord:Ie,voicingSuggestion:bt,baseQuality:Ie.quality})},ot=Ne=>{const Ie=Ne;let Ze=N,bt=k;if(!Ze||!bt){Y();const Vt=nn.getState();if(Ze=Vt.selectedSectionId,bt=Vt.selectedSlotId,!Ze||!bt)return}A(Ne,Ze,bt),D(Ze,bt)||(V(Ze,bt),le(Ie.segmentId??null),C(Ne)),I||Y()},Bt=Ne=>(Ne-F+12)%12,bn=(Ne,Ie)=>{const Ze=Bt(Ne);return Ie==="major"?Ze===0||Ze===1||Ze===11:Ie==="ii"||Ie==="iii"||Ie==="dim"?Ze===0:!1},vn=Ne=>Bt(Ne)===1,xn=Ne=>{const Ie=Bt(Ne);return Ie===2||Ie===4},Ut=(Ne,Ie)=>{const Ze=Bt(Ne);if(Ie==="major"){if(Ze===0)return"I";if(Ze===1)return"V";if(Ze===11)return"IV";if(Ze===2)return"II";if(Ze===4)return"III"}if(Ie==="ii"){if(Ze===0)return"ii";if(Ze===1)return"vi"}return Ie==="iii"&&Ze===0?"iii":Ie==="dim"&&Ze===0?"vii":""},hn=(Ne,Ie)=>{const Ze=Bt(Ne);if(Ie==="major"){if(Ze===0)return"maj7, maj9, maj13 or 6";if(Ze===1)return"7, 9, 11, sus4, 13";if(Ze===11)return"maj7, maj9, maj13 or 6";if(Ze===2||Ze===4)return"7, sus4"}if(Ie==="ii"){if(Ze===0)return"m7, m9, m11, m6";if(Ze===1)return"m7, m9, m11"}return Ie==="iii"&&Ze===0?"m7":Ie==="dim"&&Ze===0?"m75 (7)":""},fn=Ne=>{if(re)return re===Ne.segmentId;const Ie=R?.segmentId;return Ie?Ie===Ne.segmentId:R&&!Ie?R.root===Ne.root&&R.quality===Ne.quality:!1},Mn=ne.useCallback(Ne=>{Ne.touches.length===2?xt(Ne):Ne.touches.length===1&&ut(Ne)},[xt,ut]),Vn=ne.useCallback(Ne=>{Ne.touches.length===2?ft(Ne):Ne.touches.length===1&&at(Ne)},[ft,at]),Ln=ne.useCallback(Ne=>{Me.current=null,it.current=!1,un(Ne)},[un]),[Tn,mr]=ne.useState(null),yn=ne.useCallback((Ne,Ie,Ze)=>{mr(Ne?{text:Ne,x:Ie,y:Ze}:null)},[]),sn=Tn?{position:"fixed",left:Tn.x,top:Tn.y,transform:"translate(-50%, -100%) translateY(-12px)",backgroundColor:"rgba(0, 0, 0, 0.9)",color:"white",padding:"8px 12px",borderRadius:"6px",fontSize:"11px",pointerEvents:"none",zIndex:9999,whiteSpace:"normal",textAlign:"center",maxWidth:"220px",lineHeight:"1.4",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}:{};return v.jsxs("div",{ref:fe,"data-chord-wheel":!0,className:`relative flex flex-col items-center justify-center w-full h-full p-1 sm:p-2 select-none ${Je?"cursor-grabbing":n>1&&!Q?"cursor-grab":""}`,onTouchStart:Mn,onTouchMove:Vn,onTouchEnd:Ln,onWheel:Yt,onMouseDown:Ye,style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",touchAction:"none"},children:[Tn&&v.jsx("div",{style:sn,children:Tn.text}),v.jsx("div",{className:"w-full h-full transition-transform duration-150 ease-out overflow-hidden",style:{transform:`translate(${G.x}px, ${G.y}px) scale(${n})`,transformOrigin:`center ${e}%`},children:v.jsxs("svg",{ref:de,width:"100%",height:"100%",viewBox:`0 0 ${St} ${St}`,className:`w-full h-full select-none ${xe?"cursor-grabbing":"cursor-grab"}`,onMouseDown:Ye,style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},children:[v.jsxs("defs",{children:[v.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[v.jsx("feGaussianBlur",{stdDeviation:"3",result:"blur"}),v.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]}),v.jsx("filter",{id:"segment-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:v.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"4",floodColor:"#ffffff",floodOpacity:"0.9"})})]}),v.jsx("g",{style:{transform:`rotate(${H}deg)`,transformOrigin:`${Tt}px ${gt}px`,transition:"transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:W_.map((Ne,Ie)=>{const bt=Ie*30-15,Ht=bt+30,Vt=Nt[Ne.major]||Nt.C,Fn=Ne.ii.replace("m",""),Wn=Ne.iii.replace("m",""),wn=Ne.diminished.replace("",""),os=bn(Ie,"major"),Rr=xn(Ie),Jr=bn(Ie,"ii")||vn(Ie),ls=bn(Ie,"iii"),Us=bn(Ie,"dim"),xs={root:Ne.major,quality:"major",numeral:Ut(Ie,"major"),notes:ka(Ne.major,"major"),symbol:Ne.major,segmentId:`major-${Ie}`,ringType:"major",positionIndex:Ie},ci={root:Fn,quality:"minor",numeral:Ut(Ie,"ii"),notes:ka(Fn,"minor"),symbol:Ne.ii,segmentId:`ii-${Ie}`,ringType:"minor",positionIndex:Ie},xi={root:Wn,quality:"minor",numeral:Ut(Ie,"iii"),notes:ka(Wn,"minor"),symbol:Ne.iii,segmentId:`iii-${Ie}`,ringType:"minor",positionIndex:Ie},Ir={root:wn,quality:"diminished",numeral:Ut(Ie,"dim"),notes:ka(wn,"diminished"),symbol:Ne.diminished,segmentId:`dim-${Ie}`,ringType:"diminished",positionIndex:Ie},wi=15,Cn=bt+-7.5,yo=Cn+wi,ui=yo,ha=ui+wi,xo=15,cs=bt+(30-xo)/2,Vr=cs+xo,Cr=Ne.major,wo=Ne.ii,Il=Ne.iii,Xo=Ne.diminished;return v.jsxs("g",{children:[v.jsx(C1,{cx:Tt,cy:gt,innerRadius:Lt,outerRadius:Rt,startAngle:bt,endAngle:Ht,color:Vt,label:Cr,chord:xs,isSelected:fn(xs),isDiatonic:os,isSecondary:Rr,onClick:At,onDoubleClick:ot,ringType:"major",wheelRotation:H,romanNumeral:os||Rr?Ut(Ie,"major"):void 0,voicingSuggestion:os||Rr?hn(Ie,"major"):void 0,segmentId:`major-${Ie}`,onHover:yn}),v.jsx(C1,{cx:Tt,cy:gt,innerRadius:mn,outerRadius:vt,startAngle:Cn,endAngle:yo,color:Vt,label:wo,chord:ci,isSelected:fn(ci),isDiatonic:Jr,onClick:At,onDoubleClick:ot,ringType:"minor",wheelRotation:H,romanNumeral:Jr?Ut(Ie,"ii"):void 0,voicingSuggestion:Jr?hn(Ie,"ii"):void 0,segmentId:`ii-${Ie}`,onHover:yn}),v.jsx(C1,{cx:Tt,cy:gt,innerRadius:mn,outerRadius:vt,startAngle:ui,endAngle:ha,color:Vt,label:Il,chord:xi,isSelected:fn(xi),isDiatonic:ls,onClick:At,onDoubleClick:ot,ringType:"minor",wheelRotation:H,romanNumeral:ls?Ut(Ie,"iii"):void 0,voicingSuggestion:ls?hn(Ie,"iii"):void 0,segmentId:`iii-${Ie}`,onHover:yn}),v.jsx(C1,{cx:Tt,cy:gt,innerRadius:_e,outerRadius:rt,startAngle:cs,endAngle:Vr,color:Vt,label:Xo,chord:Ir,isSelected:fn(Ir),isDiatonic:Us,onClick:At,onDoubleClick:ot,ringType:"diminished",wheelRotation:H,romanNumeral:Us?Ut(Ie,"dim"):void 0,voicingSuggestion:Us?hn(Ie,"dim"):void 0,segmentId:`dim-${Ie}`,onHover:yn})]},Ne.major)})}),v.jsx("circle",{cx:Tt,cy:gt,r:Qt,fill:"#1a1a24",stroke:"#3a3a4a",strokeWidth:"2",style:{pointerEvents:"none"}}),v.jsx("text",{x:Tt,y:gt-25,textAnchor:"middle",fill:"#6366f1",fontSize:"9",fontWeight:"bold",letterSpacing:"2",children:"KEY"}),v.jsx("text",{x:Tt,y:gt+3,textAnchor:"middle",fill:"white",fontSize:"26",fontWeight:"bold",children:or(f)}),v.jsx("text",{x:Tt,y:gt+21,textAnchor:"middle",fill:"#9898a6",fontSize:"11",children:st||"No /"}),v.jsxs("g",{transform:`translate(${Tt-22}, ${gt+40})`,onClick:()=>Ue("ccw"),onTouchEnd:Ne=>{Ne.preventDefault(),Ne.stopPropagation(),Ue("ccw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[v.jsx("circle",{r:Q?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),v.jsx("g",{transform:Q?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:v.jsx(mp,{size:Q?12:9,color:"#9898a6"})})]}),v.jsxs("g",{transform:`translate(${Tt+22}, ${gt+40})`,onClick:()=>Ue("cw"),onTouchEnd:Ne=>{Ne.preventDefault(),Ne.stopPropagation(),Ue("cw")},className:"cursor-pointer",style:{pointerEvents:"all",cursor:"pointer"},children:[v.jsx("circle",{r:Q?14:9,fill:"#282833",className:"hover:fill-[#3a3a4a] transition-colors",style:{pointerEvents:"all"}}),v.jsx("g",{transform:Q?"translate(-6, -6)":"translate(-4.5, -4.5)",style:{pointerEvents:"none"},children:v.jsx(Fh,{size:Q?12:9,color:"#9898a6"})})]}),v.jsxs("g",{transform:`translate(${Tt}, ${gt+40})`,onClick:u?void 0:b,onTouchEnd:u?void 0:Ne=>{Ne.preventDefault(),Ne.stopPropagation(),b()},className:u?"":"cursor-pointer",style:{pointerEvents:u?"none":"all",cursor:u?"default":"pointer",opacity:u?.5:1},children:[v.jsx("circle",{r:Q?16:11,fill:u||y==="rotating"?"#252535":"#3f2e2e",className:"transition-colors",style:{pointerEvents:u?"none":"all",transition:"fill 0.3s ease"},children:v.jsx("title",{children:u?"Mode locked in this view":y==="rotating"?"Lock wheel (C at top)":"Pin current key to top"})}),v.jsxs("g",{style:{pointerEvents:"none",transition:"transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",transform:o!==0?`rotate(${o}deg)`:y==="rotating"?"rotate(0deg)":`rotate(${F*30}deg)`,transformOrigin:"0px 0px"},children:[v.jsx("polygon",{points:Q?"0,-10 4,0 0,1.5 -4,0":"0,-7 2.5,0 0,1 -2.5,0",fill:"#ef4444",stroke:"#b91c1c",strokeWidth:"0.5"}),v.jsx("polygon",{points:Q?"0,10 4,0 0,-1.5 -4,0":"0,7 2.5,0 0,-1 -2.5,0",fill:"#f1f5f9",stroke:"#94a3b8",strokeWidth:"0.5"}),v.jsx("circle",{cx:0,cy:0,r:Q?2:1.5,fill:y==="rotating"?"#fef2f2":"#6b7280"})]})]})]})}),v.jsx(mk,{isOpen:P.isOpen,onClose:()=>M({...P,isOpen:!1}),onSelect:Ne=>{if(P.chord){const Ie=ka(P.chord.root,Ne),Ze={...P.chord,quality:Ne,notes:Ie,symbol:`${P.chord.root}${Ne==="major"?"":Ne==="minor"?"m":Ne}`};C(Ze)}},onAddToTimeline:Ne=>{if(P.chord){const Ie=ka(P.chord.root,Ne),Ze={...P.chord,quality:Ne,notes:Ie,symbol:`${P.chord.root}${Ne==="major"?"":Ne==="minor"?"m":Ne}`};let bt=N,Ht=k;if(!bt||!Ht){Y();const Vt=nn.getState();if(bt=Vt.selectedSectionId,Ht=Vt.selectedSlotId,!bt||!Ht)return}A(Ze,bt,Ht),V(bt,Ht),C(Ze),I||Y()}},onOpenDetails:()=>{W?B():O()},chordRoot:P.chord?.root||"C",voicings:gk(P.voicingSuggestion,P.baseQuality),selectedQuality:P.chord?.quality,portraitWithPanel:Q&&!oe&&W&&!K&&!j}),Q&&!oe&&!W&&R&&(()=>{const Ne=Nt[R.root]||"#6366f1",Ie=R.quality;let Ze;return Ie==="major"||Ie==="maj"?Ze=or(R.root):Ie==="minor"||Ie==="m"?Ze=or(`${R.root}m`):Ie==="diminished"||Ie==="dim"?Ze=or(`${R.root}dim`):Ze=or(`${R.root}${Ie}`),v.jsxs("div",{className:"fixed flex items-center gap-1 z-10 cursor-pointer touch-feedback active:scale-95",style:{bottom:I?c?"260px":"204px":c?"175px":"119px",right:"12px",backgroundColor:"transparent",color:Ne,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${Ne}`,backdropFilter:"blur(8px)",background:"rgba(0, 0, 0, 0.4)",transition:"bottom 0.25s ease-out"},onClick:bt=>{bt.stopPropagation(),bt.preventDefault(),Ur(R.notes)},onTouchStart:bt=>{bt.stopPropagation()},onTouchEnd:bt=>{bt.stopPropagation(),bt.preventDefault(),Ur(R.notes)},children:[v.jsx("span",{className:"text-sm font-bold leading-none",children:Ze}),R.numeral&&v.jsx("span",{className:"text-xs font-serif italic opacity-70",children:or(R.numeral)})]})})()]})},sg=({type:n,size:e=20,className:t})=>{const s=e>16?1.5:1;switch(n){case"whole":return v.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:v.jsx("ellipse",{cx:"12",cy:"12",rx:"6",ry:"4",fill:"none",stroke:"currentColor",strokeWidth:s*1.5})});case"half":return v.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[v.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 10, 16)"}),v.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-half":return v.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[v.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,transform:"rotate(-20, 8, 16)"}),v.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),v.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"quarter":return v.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[v.jsx("ellipse",{cx:"10",cy:"16",rx:"5",ry:"3.5",fill:"currentColor",transform:"rotate(-20, 10, 16)"}),v.jsx("line",{x1:"14.5",y1:"14",x2:"14.5",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"dotted-quarter":return v.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[v.jsx("ellipse",{cx:"8",cy:"16",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 8, 16)"}),v.jsx("line",{x1:"12",y1:"14",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),v.jsx("circle",{cx:"17",cy:"16",r:"1.5",fill:"currentColor"})]});case"eighth":return v.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[v.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),v.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"4",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),v.jsx("path",{d:"M13 4 Q18 6 16 11",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]});case"sixteenth":return v.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",className:t,children:[v.jsx("ellipse",{cx:"9",cy:"17",rx:"4.5",ry:"3",fill:"currentColor",transform:"rotate(-20, 9, 17)"}),v.jsx("line",{x1:"13",y1:"15",x2:"13",y2:"3",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),v.jsx("path",{d:"M13 3 Q18 5 16 9",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"}),v.jsx("path",{d:"M13 7 Q18 9 16 13",fill:"none",stroke:"currentColor",strokeWidth:s*1.2,strokeLinecap:"round"})]})}};function ig(n,e){const[t]=e;if(t%3===0&&t>3){if(n===1)return"dotted-half";if(n===2)return"dotted-quarter";if(n===3)return"quarter";if(n===6)return"eighth";if(n===12)return"sixteenth"}if(t===3){if(n===1)return"dotted-half";if(n===3)return"quarter";if(n===6)return"eighth";if(n===12)return"sixteenth"}return n===1?"whole":n===2?"half":n===4?"quarter":n===8?"eighth":n===16?"sixteenth":n<=1?"whole":n<=2?"half":n<=4?"quarter":n<=8?"eighth":"sixteenth"}function rw(n){const[e]=n;return e%3===0?[1,3,6].filter(t=>t<=8):[1,2,4,8]}const vk=({value:n,onChange:e,timeSignature:t,isCompact:s=!1})=>{const[a,o]=ne.useState(!1),u=ne.useRef(null),c=ne.useRef(null),f=rw(t);ne.useEffect(()=>{const y=_=>{u.current&&!u.current.contains(_.target)&&c.current&&!c.current.contains(_.target)&&o(!1)};if(a)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[a]),ne.useEffect(()=>{if(a){const y=()=>o(!1);return window.addEventListener("scroll",y,!0),()=>window.removeEventListener("scroll",y,!0)}},[a]);const d=ig(n,t),p=s?12:16;return v.jsxs("div",{className:"relative",children:[v.jsx("button",{ref:u,onClick:()=>o(!a),className:qt("flex items-center justify-center rounded transition-all","hover:bg-accent-primary/20 active:scale-95","text-text-muted hover:text-accent-primary",s?"w-4 h-5":"w-5 h-6",a&&"bg-accent-primary/20 text-accent-primary"),title:`${n} step${n>1?"s":""} per measure`,children:v.jsx(sg,{type:d,size:p})}),a&&Cl.createPortal(v.jsx("div",{ref:c,className:qt("fixed bg-bg-elevated border border-border-medium rounded-xl shadow-xl","flex flex-row gap-2 p-2","animate-in fade-in zoom-in-95 duration-150"),style:{top:"60%",left:"50%",transform:"translate(-50%, -50%)",zIndex:99999},children:f.map(y=>{const _=ig(y,t),b=y===n;return v.jsx("button",{onClick:()=>{e(y),o(!1)},className:qt("flex items-center justify-center rounded-lg transition-all","w-12 h-12",b?"bg-accent-primary text-white shadow-lg":"text-text-secondary hover:text-text-primary hover:bg-bg-tertiary"),title:`${y} step${y>1?"s":""}`,children:v.jsx(sg,{type:_,size:26})},y)})}),document.body)]})},Pv={intro:{bg:"bg-purple-500/15",border:"border-purple-500/40",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/15",border:"border-blue-500/40",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/15",border:"border-cyan-500/40",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/15",border:"border-amber-500/40",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/15",border:"border-emerald-500/40",accent:"bg-emerald-500"},outro:{bg:"bg-rose-500/15",border:"border-rose-500/40",accent:"bg-rose-500"},custom:{bg:"bg-slate-500/15",border:"border-slate-500/40",accent:"bg-slate-500"}},yk=({section:n,songTimeSignature:e,className:t,onSlotClick:s})=>{const{tempo:a}=nn(),o=dd(),u=Pv[n.type]||Pv.custom,c=n.timeSignature||e,f=c[0],d=n.measures.length,[p,y]=ne.useState(!1),[_,b]=ne.useState(null),A=ne.useRef([]),N=252,k=15,C=52,R=Math.floor(N/d),D=Math.max(k,Math.min(C,R)),V=d>8,I=d>12,Y=()=>{A.current.forEach(O=>clearTimeout(O)),A.current=[],y(!1),b(null)};ne.useEffect(()=>(Y(),()=>{A.current.forEach(O=>clearTimeout(O)),A.current=[]}),[n.id]);const W=async()=>{if(p){Y();return}vs.state!=="running"&&await _u(),vs.state==="suspended"&&await vs.resume(),await Lc(),y(!0);const O=60/a*1e3,B=n.measures[0]?.beats.length||f,K=f/B,j=K*O;let F=0;n.measures.forEach(ae=>{ae.beats.forEach($=>{const re=F*j,le=window.setTimeout(()=>{b($.id)},re);if(A.current.push(le),$.chord&&$.chord.notes&&$.chord.notes.length>0){const pe=window.setTimeout(()=>{const M=`${4/Math.min(K,f)}n`;Ur($.chord.notes,M)},re);A.current.push(pe)}F++})});const te=n.measures.reduce((ae,$)=>ae+$.beats.length,0),H=window.setTimeout(()=>{y(!1),b(null),A.current=[]},te*j);A.current.push(H)};return v.jsx("div",{className:qt("w-full",t),children:v.jsxs("div",{className:qt("rounded-lg border overflow-hidden transition-all",u.bg,u.border),children:[v.jsx("div",{className:qt("h-1 w-full",u.accent)}),v.jsx("div",{className:"pl-2 pr-3 py-2 overflow-hidden",style:{maxHeight:I?"80px":V?"100px":"120px"},children:v.jsx("div",{className:"flex gap-0.5",style:{minWidth:"min-content",width:"100%"},children:n.measures.map((O,B)=>{const K=O.beats.length;return v.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-0.5",style:{minWidth:`${D}px`,maxWidth:`${D}px`},children:[!I&&v.jsxs("div",{className:"h-3 flex items-center justify-between px-0.5",children:[v.jsx("span",{className:qt("font-mono text-white/30",V?"text-[6px]":"text-[8px]"),children:B+1}),!V&&v.jsx("div",{className:"flex gap-px",children:Array.from({length:Math.min(K,f)}).map((j,F)=>v.jsx("div",{className:"w-0.5 h-1 bg-white/15 rounded-full"},F))})]}),v.jsx("div",{className:"flex-1 rounded overflow-hidden flex gap-px",style:{minHeight:I?"28px":V?"36px":"48px"},children:O.beats.map(j=>{const F=j.chord&&j.chord.notes&&j.chord.notes.length>0,te=j.chord,H=F&&o[te.root]||"#666",ae=_===j.id,$=O.beats.length;let re="9px";return I?re=$>2?"5px":"6px":V?re=$>2?"6px":"7px":re=$>2?"7px":$>1?"8px":"9px",F?v.jsx("div",{onClick:()=>s?.(j.id),className:qt("flex-1 min-w-0 rounded-sm flex items-center justify-center font-bold truncate transition-all duration-150",ae&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:brightness-110 active:scale-95"),style:{backgroundColor:ae?H:"rgba(0, 0, 0, 0.35)",border:`1.5px solid ${H}`,color:ae?"#fff":H,fontSize:re,padding:"0 2px",textShadow:ae?"0 1px 3px rgba(0,0,0,0.7)":"0 1px 2px rgba(0,0,0,0.5)",boxShadow:ae?`0 0 12px ${H}, 0 0 4px ${H}`:"none"},title:te.symbol,children:or(te.symbol)},j.id):v.jsx("div",{onClick:()=>s?.(j.id),className:qt("flex-1 min-w-0 rounded-sm flex items-center justify-center transition-all duration-150",ae&&"scale-105 z-10",s&&"cursor-pointer hover:scale-105 hover:bg-white/10 active:scale-95"),style:{backgroundColor:ae?"rgba(99, 102, 241, 0.5)":"rgba(255, 255, 255, 0.03)",border:ae?"1.5px solid rgba(99, 102, 241, 0.8)":"1px dashed rgba(255, 255, 255, 0.1)",boxShadow:ae?"0 0 8px rgba(99, 102, 241, 0.5)":"none"},children:v.jsx("span",{className:qt("transition-colors duration-150",ae?"text-white/60":"text-white/10",V?"text-[6px]":"text-[8px]"),children:""})},j.id)})})]},O.id)})})}),v.jsxs("div",{className:"px-2 py-1.5 bg-black/20 border-t border-white/5 flex items-center gap-2",children:[v.jsx("button",{onClick:W,className:qt("w-5 h-5 rounded-full flex items-center justify-center transition-all","hover:scale-110 active:scale-95",p?"bg-red-500/80 text-white":"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30"),title:p?"Stop":"Play section once",children:p?v.jsx(Y3,{size:8}):v.jsx(Wh,{size:10,className:"ml-0.5"})}),v.jsxs("div",{className:"flex-1 flex items-center justify-center gap-3",children:[v.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[c[0],"/",c[1]]}),v.jsx("span",{className:"w-0.5 h-0.5 rounded-full bg-white/20"}),v.jsxs("span",{className:"text-[9px] font-mono text-white/40",children:[d," bar",d!==1?"s":""]})]})]})]})})},xk=[[4,4],[3,4],[5,4],[2,4],[6,8]],zv=[{name:"Intro",type:"intro"},{name:"Verse",type:"verse"},{name:"Pre-Chorus",type:"pre-chorus"},{name:"Chorus",type:"chorus"},{name:"Bridge",type:"bridge"},{name:"Interlude",type:"interlude"},{name:"Solo",type:"solo"},{name:"Breakdown",type:"breakdown"},{name:"Tag",type:"tag"},{name:"Hook",type:"hook"},{name:"Outro",type:"outro"}],wk=({section:n,isOpen:e,onClose:t,onTimeSignatureChange:s,onBarsChange:a,onStepCountChange:o,onNameChange:u,onCopy:c,onClear:f,onDelete:d,songTimeSignature:p,onNavigatePrev:y,onNavigateNext:_,hasPrev:b=!1,hasNext:A=!1,sectionIndex:N,totalSections:k,onSlotClick:C})=>{const R=ne.useRef(null),D=n.timeSignature||p,V=`${D[0]}/${D[1]}`,I=n.measures.length,Y=n.measures[0]?.beats.length??1,W=rw(D);return ne.useEffect(()=>{if(!e)return;const O=B=>{B.key==="Escape"&&t()};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[e,t]),e?Cl.createPortal(v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:t}),y&&v.jsx("button",{onClick:y,disabled:!b,className:qt("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",b?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{left:"calc(50% - min(150px, 45vw) - 52px)"},title:"Previous Section",children:v.jsx(Vh,{size:24})}),_&&v.jsx("button",{onClick:_,disabled:!A,className:qt("fixed top-1/2 -translate-y-1/2 z-[100000]","w-10 h-10 rounded-full flex items-center justify-center","transition-all duration-200",A?"bg-accent-primary/20 text-accent-primary hover:bg-accent-primary/30 hover:scale-110 active:scale-95":"bg-white/5 text-white/20 cursor-not-allowed"),style:{right:"calc(50% - min(150px, 45vw) - 52px)"},title:"Next Section",children:v.jsx(Ih,{size:24})}),v.jsxs("div",{ref:R,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"260px",maxWidth:"300px",width:"90vw"},children:[v.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[v.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[N!==void 0&&k!==void 0&&v.jsxs("div",{className:"h-5 px-2 rounded-full flex items-center justify-center gap-0.5 font-bold text-white shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)",boxShadow:"0 0 8px rgba(99,102,241,0.4)"},title:`Section ${N+1} of ${k}`,children:[v.jsx("span",{className:"text-[10px]",children:N+1}),v.jsx("span",{className:"text-[6px] opacity-60 font-medium",children:"of"}),v.jsx("span",{className:"text-[10px]",children:k})]}),(N===void 0||k===void 0)&&v.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),u?v.jsx("select",{value:n.name,onChange:O=>{const B=zv.find(K=>K.name===O.target.value);B&&u(B.name,B.type)},className:`bg-transparent text-sm font-bold text-text-primary 
                                           focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                           appearance-none cursor-pointer pr-5`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0 center"},children:zv.map(O=>v.jsx("option",{value:O.name,className:"bg-bg-secondary",children:O.name},O.type))}):v.jsx("span",{className:"text-sm font-bold text-text-primary",children:n.name})]}),v.jsx("button",{onClick:t,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:v.jsx(bu,{size:14})})]}),v.jsxs("div",{className:"p-4 space-y-4",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-1.5",children:[v.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Time Sig"}),v.jsx("div",{className:"relative",children:v.jsx("select",{value:V,onChange:O=>s(O.target.value),className:`w-full h-8 bg-bg-tertiary text-text-primary text-xs font-bold rounded-lg 
                                               px-3 border border-border-subtle 
                                               focus:outline-none focus:ring-1 focus:ring-accent-primary/50
                                               appearance-none cursor-pointer`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",paddingRight:"24px"},children:xk.map(([O,B])=>v.jsxs("option",{value:`${O}/${B}`,className:"bg-bg-secondary",children:[O,"/",B]},`${O}/${B}`))})})]}),v.jsxs("div",{className:"space-y-1.5",children:[v.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Length"}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("button",{onClick:()=>a(Math.max(1,I-1)),disabled:I<=1,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:""}),v.jsx("span",{className:"flex-1 text-center text-sm font-bold text-text-primary tabular-nums",children:I}),v.jsx("button",{onClick:()=>a(Math.min(16,I+1)),disabled:I>=16,className:`h-8 w-8 flex items-center justify-center rounded-lg
                                               bg-bg-tertiary border border-border-subtle
                                               text-text-muted hover:text-text-primary hover:bg-bg-secondary
                                               disabled:opacity-30 disabled:cursor-not-allowed
                                               transition-all text-base font-bold active:scale-95`,children:"+"})]})]})]}),o&&v.jsxs("div",{className:"space-y-1.5",children:[v.jsx("label",{className:"block text-center text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Steps Per Bar"}),v.jsx("div",{className:"flex items-center gap-1.5 justify-center",children:W.map(O=>{const B=ig(O,D),K=O===Y;return v.jsx("button",{onClick:()=>o(O),className:qt("flex items-center justify-center rounded-lg transition-all","w-11 h-11 active:scale-95",K?"bg-accent-primary text-white shadow-lg border-2 border-accent-primary":"bg-bg-tertiary border border-border-subtle text-text-muted hover:text-text-primary hover:bg-bg-secondary"),title:`${O} step${O>1?"s":""} per measure`,children:v.jsx(sg,{type:B,size:24})},O)})})]}),v.jsx(yk,{section:n,songTimeSignature:p,className:"pt-1",onSlotClick:C}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[v.jsxs("button",{onClick:()=>{c(),t()},className:`flex items-center justify-center gap-1.5
                                       px-2 py-2.5 rounded-lg
                                       bg-accent-primary/10 border border-accent-primary/30
                                       text-accent-primary hover:bg-accent-primary/20
                                       transition-all text-xs font-bold active:scale-95`,children:[v.jsx(dC,{size:14}),"Duplicate"]}),v.jsxs("button",{onClick:()=>{f(),t()},className:`flex items-center justify-center gap-1.5
                                       px-2 py-2.5 rounded-lg
                                       bg-yellow-500/10 border border-yellow-500/30
                                       text-yellow-400 hover:bg-yellow-500/20
                                       transition-all text-xs font-bold active:scale-95`,children:[v.jsx(gC,{size:14}),"Clear"]}),v.jsxs("button",{onClick:()=>{d(),t()},className:`flex items-center justify-center gap-1.5
                                       px-2 py-2.5 rounded-lg
                                       bg-red-500/10 border border-red-500/30
                                       text-red-400 hover:bg-red-500/20
                                       transition-all text-xs font-bold active:scale-95`,children:[v.jsx(tg,{size:14}),"Remove"]})]})]})]})]}),document.body):null},_k={intro:"Intro",verse:"Verse","pre-chorus":"Pre-Chorus",chorus:"Chorus",bridge:"Bridge",interlude:"Interlude",solo:"Solo",breakdown:"Breakdown",tag:"Tag",hook:"Hook",outro:"Outro"};function Yf(n,e){const t=_k[n.type],s=e.filter(o=>o.type===n.type);if(s.length<=1)return t;const a=s.findIndex(o=>o.id===n.id);return`${t} ${a+1}`}const ag=({isOpen:n,onToggle:e,hideCloseButton:t=!1,isCompact:s=!1,isLandscape:a=!1})=>{const{currentSong:o,selectedSectionId:u,selectedSlotId:c,setSelectedSlot:f,selectSlotOnly:d,setSelectedChord:p,playingSectionId:y,playingSlotId:_,isPlaying:b,addSuggestedSection:A,setSectionTimeSignature:N,setSectionMeasures:k,setSectionSubdivision:C,removeSection:R,duplicateSection:D,clearSection:V,setMeasureSubdivision:I,selectedChord:Y,addChordToSlot:W,toggleSongMap:O,updateSection:B,undo:K,redo:j,canUndo:F,canRedo:te,clearSlot:H}=nn(),ae=o.timeSignature,$=dd(),re=ne.useRef(null),le=ne.useRef(null),{isMobile:pe}=$h(),be=!pe,[P,M]=Zn.useState(0),G=ne.useRef(0),[J,Q]=Zn.useState(0),oe=ne.useRef(0),[fe,de]=Zn.useState(0),xe=ne.useRef(!1),[we,Ve]=Zn.useState(null),Xe=ne.useRef(null);ne.useEffect(()=>{if(!b&&u&&le.current){const Pe=o.sections.findIndex(nt=>nt.id===u);Pe!==-1&&(M(Pe),setTimeout(()=>{if(le.current){const nt=le.current.querySelector(`[data-section-id="${u}"]`);nt&&nt.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},100))}},[u,o.sections,b]),ne.useEffect(()=>{if(b&&y){const Pe=o.sections.findIndex(nt=>nt.id===y);Pe!==-1&&Pe!==P&&M(Pe)}},[b,y,o.sections,P]),ne.useEffect(()=>{if(_&&re.current){const Pe=re.current.querySelector(`[data-slot-id="${_}"]`);Pe&&Pe.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},[_]),ne.useEffect(()=>{if(!n||!c||b)return;const Pe=setTimeout(()=>{if(re.current){const nt=re.current.querySelector(`[data-slot-id="${c}"]`);nt&&nt.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},250);return()=>clearTimeout(Pe)},[c,b,n]);const Je=Pe=>{G.current=Pe.touches[0].clientY},Fe=Pe=>{const nt=Pe.touches[0].clientY-G.current;nt>0&&Q(Math.min(nt,100))},z=()=>{J>50&&e(),Q(0)},ke=Pe=>{oe.current=Pe.touches[0].clientY},ct=Pe=>{const nt=oe.current-Pe.touches[0].clientY;nt>0&&de(Math.min(nt,60))},Ue=()=>{fe>30&&e(),de(0)},Me=Pe=>{xe.current=!0,oe.current=Pe.clientY,Pe.preventDefault()};ne.useEffect(()=>{const Pe=tt=>{if(!xe.current)return;const ht=oe.current-tt.clientY;ht>0&&de(Math.min(ht,60))},nt=()=>{xe.current&&(fe>30&&e(),de(0),xe.current=!1)};return document.addEventListener("mousemove",Pe),document.addEventListener("mouseup",nt),()=>{document.removeEventListener("mousemove",Pe),document.removeEventListener("mouseup",nt)}},[fe,e]);const it=Pe=>{if($[Pe])return $[Pe];const nt=Mh(Pe);for(const tt of Object.keys($))if(Mh(tt)===nt)return $[tt];return"hsl(230, 60%, 50%)"},Ye=(Pe,nt,tt)=>{const ht=u===Pe&&c===nt,yt=Date.now();if(tt&&Xe.current&&Xe.current.slotId===nt&&yt-Xe.current.time<400){Y&&(W(Y,Pe,nt),d(Pe,nt)),Xe.current=null;return}tt?(tt.notes&&tt.notes.length>0&&Ur(tt.notes),ht?p(tt):d(Pe,nt),Xe.current={slotId:nt,time:yt}):(ht&&Y?W(Y,Pe,nt):d(Pe,nt),Xe.current=null)},ut=Pe=>{const nt=Pe==="prev"?Math.max(0,P-1):Math.min(o.sections.length-1,P+1);M(nt);const tt=o.sections[nt];tt&&tt.measures[0]?.beats[0]&&f(tt.id,tt.measures[0].beats[0].id)},at=o.sections[P];return n?v.jsxs("div",{"data-mobile-timeline":!0,className:qt("relative w-full bg-bg-secondary border-t-2 border-border-subtle overflow-hidden flex flex-col mobile-timeline-drawer",a&&"h-full",t&&"h-full border-t-0"),style:{maxHeight:a||t?void 0:"140px",transform:J>0?`translateY(${J}px)`:void 0,opacity:J>0?Math.max(.5,1-J/150):1,transition:J===0?"all 0.2s ease-out":"none"},children:[!t&&v.jsx("div",{className:"flex flex-col items-center pt-2 pb-2.5 cursor-grab active:cursor-grabbing shrink-0",onTouchStart:Je,onTouchMove:Fe,onTouchEnd:z,children:v.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40"})}),s?v.jsxs("div",{className:"relative flex items-center justify-center shrink-0 px-1 py-1",children:[v.jsx("button",{onClick:()=>O(!0),className:"absolute left-1 rounded text-text-muted hover:text-accent-primary touch-feedback flex items-center justify-center w-5 h-5",title:"Song Overview",children:v.jsx(pp,{size:12})}),v.jsxs("div",{className:"flex items-center justify-center gap-1",children:[v.jsx("button",{onClick:()=>ut("prev"),disabled:P===0,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:v.jsx(Vh,{size:14})}),v.jsxs("button",{onClick:()=>at&&Ve(at.id),className:"flex items-center justify-center gap-0.5 px-2 py-1 rounded-full text-white font-semibold text-[10px]",style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 8px rgba(99, 102, 241, 0.4)",border:"1px solid rgba(255,255,255,0.2)"},title:at?Yf(at,o.sections):"Section",children:[v.jsxs("span",{className:"flex items-baseline",children:[v.jsx("span",{children:at?Yf(at,o.sections).charAt(0).toUpperCase():"S"}),v.jsx("span",{className:"text-[7px] opacity-60 ml-0.5",children:P+1})]}),v.jsx(Vv,{size:10,className:"opacity-70 shrink-0"})]}),v.jsx("button",{onClick:()=>ut("next"),disabled:P===o.sections.length-1,className:"rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback p-1",children:v.jsx(Ih,{size:14})})]}),v.jsxs("div",{className:"absolute right-1 flex items-center gap-0.5",children:[v.jsx("button",{onClick:K,disabled:!F,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo",children:v.jsx(mp,{size:10})}),v.jsx("button",{onClick:j,disabled:!te,className:"no-touch-enlarge w-6 h-6 flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo",children:v.jsx(Fh,{size:10})})]})]}):v.jsxs("div",{className:qt("flex items-center justify-between shrink-0",be?"px-3 py-1":"px-2 pb-1.5"),children:[v.jsxs("div",{className:"flex items-center shrink-0",children:[v.jsx("button",{onClick:()=>O(!0),className:qt("no-touch-enlarge rounded text-text-muted hover:text-accent-primary touch-feedback shrink-0 mr-0.5",be?"p-2":"p-1.5"),title:"Song Overview",children:v.jsx(pp,{size:be?18:16})}),v.jsxs("div",{className:"flex items-center gap-0.5 ml-1",children:[v.jsx("button",{onClick:K,disabled:!F,className:qt("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",be?"w-8 h-8":"w-7 h-7"),title:"Undo",children:v.jsx(mp,{size:be?14:12})}),v.jsx("button",{onClick:j,disabled:!te,className:qt("no-touch-enlarge flex items-center justify-center rounded bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",be?"w-8 h-8":"w-7 h-7"),title:"Redo",children:v.jsx(Fh,{size:be?14:12})})]})]}),v.jsx("button",{onClick:()=>ut("prev"),disabled:P===0,className:qt("no-touch-enlarge rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback",be?"p-2":"p-1.5"),children:v.jsx(Vh,{size:be?18:16})}),v.jsxs("div",{ref:le,className:qt("flex-1 flex items-center overflow-x-auto scrollbar-hide px-1 mx-1",be?"gap-2":"gap-1.5"),children:[o.sections.map((Pe,nt)=>{const tt=nt===P,ht=Yf(Pe,o.sections),yt=ht.charAt(0).toUpperCase();return v.jsx("button",{"data-section-id":Pe.id,onClick:()=>{if(tt){Ve(Pe.id);return}M(nt),Pe.measures[0]?.beats[0]&&f(Pe.id,Pe.measures[0].beats[0].id)},className:qt("no-touch-enlarge relative font-semibold transition-all touch-feedback shrink-0","flex items-center justify-center",tt?qt("rounded-full text-white shadow-lg whitespace-nowrap overflow-hidden",be?"w-32 h-9 text-xs":"w-24 h-8 text-[11px]"):qt("rounded-full text-text-secondary hover:text-text-primary border border-border-medium hover:border-border-subtle hover:bg-bg-tertiary",be?"w-9 h-9 text-sm":"w-8 h-8 text-xs")),style:tt?{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%)",boxShadow:"0 0 16px rgba(99, 102, 241, 0.5), inset 0 1px 0 rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.2)"}:void 0,title:ht,children:tt?v.jsxs("span",{className:"flex items-center gap-1 px-2 truncate",children:[v.jsx("span",{className:"truncate",children:ht}),v.jsx(Vv,{size:be?14:12,className:"opacity-70 shrink-0"})]}):yt},Pe.id)}),v.jsx("button",{onClick:()=>A(),className:qt("no-touch-enlarge rounded-full text-text-muted hover:text-accent-primary touch-feedback shrink-0 border border-dashed border-border-medium hover:border-accent-primary/50 transition-all hover:bg-accent-primary/10 flex items-center justify-center",be?"w-9 h-9":"w-8 h-8"),title:"Add section",children:v.jsx(Yh,{size:be?14:12})})]}),v.jsx("button",{onClick:()=>ut("next"),disabled:P===o.sections.length-1,className:qt("no-touch-enlarge rounded text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed touch-feedback",be?"p-2":"p-1.5"),children:v.jsx(Ih,{size:be?18:16})}),!t&&v.jsx("button",{onClick:e,className:"p-2 min-w-[40px] min-h-[40px] hover:bg-bg-tertiary rounded transition-colors touch-feedback flex items-center justify-center ml-1",title:"Close timeline",children:v.jsx(U3,{size:18,className:"text-text-muted rotate-90"})})]}),v.jsx("div",{ref:re,className:qt("flex-1",be?"px-3 pb-2 pt-3":"px-1 pb-1 pt-3",a?"overflow-y-auto overflow-x-hidden":"overflow-x-auto overflow-y-hidden"),children:at&&v.jsx("div",{className:qt(a?s?"flex flex-col gap-0":"grid grid-cols-4 gap-0.5":qt("flex flex-row items-center",be?"gap-1.5":"gap-0.5")),children:at.measures.map((Pe,nt)=>v.jsxs(Zn.Fragment,{children:[v.jsxs("div",{className:qt("flex items-center",a?s?"gap-0.5 w-full min-w-0":"gap-0.5":be?"gap-1 shrink-0":"gap-0.5 shrink-0"),children:[v.jsxs("div",{className:qt("flex flex-col items-center justify-center shrink-0",a?"gap-0 w-4":be?"gap-0 w-6":"gap-0 w-5"),children:[v.jsx("span",{className:qt("font-mono text-text-muted text-center leading-none",be?"text-[9px]":a?"text-[7px]":"text-[8px]"),children:nt+1}),v.jsx(vk,{value:Pe.beats.length,onChange:tt=>I(at.id,Pe.id,tt),timeSignature:at.timeSignature||[4,4],isCompact:a})]}),v.jsx("div",{className:qt("flex items-center",a?s?`flex-1 gap-0.5 min-w-0 ${Pe.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:`flex-1 gap-0.5 min-w-0 ${Pe.beats.length>4?"overflow-x-auto scrollbar-hide":"overflow-hidden"}`:"gap-0.5"),children:Pe.beats.map(tt=>{const ht=u===at.id&&c===tt.id,yt=b&&y===at.id&&_===tt.id,dt=tt.chord?it(tt.chord.root):void 0,xt=Pe.beats.length;let ft,un;a&&xt>4&&(ft=Math.max(22,Math.floor(160/xt)),un=Math.max(18,Math.floor(120/xt)));const Yt=be?48:36,Nt=4/xt,St=Math.round(Yt*Nt),Tt=Math.max(be?36:28,Math.min(be?192:144,St)),gt=be?40:a&&s?xt<=4?26:24:32;return v.jsxs("button",{"data-slot-id":tt.id,onClick:()=>Ye(at.id,tt.id,tt.chord),className:qt("no-touch-enlarge relative flex items-center justify-center rounded-md transition-all touch-feedback group",a&&xt<=4?"flex-1 min-w-0":"shrink-0",yt&&"ring-2 ring-green-500 ring-offset-1 ring-offset-bg-primary shadow-[0_0_12px_rgba(34,197,94,0.5)] scale-105 z-10",ht&&!yt&&"ring-2 ring-accent-primary ring-offset-1 ring-offset-bg-primary",!tt.chord&&"border-2 border-dashed border-border-medium bg-bg-elevated hover:border-text-muted"),style:{height:`${gt}px`,...a&&ft?{width:`${ft}px`,minWidth:`${un}px`}:{},...a?{}:{width:`${Tt}px`,minWidth:`${Tt}px`},...tt.chord?{backgroundColor:"rgba(0, 0, 0, 0.3)",border:`2px solid ${dt}`}:{}},children:[tt.chord?v.jsx("span",{className:qt("font-bold px-0.5 truncate",be?"text-xs":a?xt>=8?"text-[7px]":xt>=4?"text-[8px]":"text-[9px]":"text-[10px]"),style:{color:dt},children:or(tt.chord.symbol)}):v.jsx("span",{className:qt("text-text-muted font-light",a?xt>=8?"text-xs":"text-sm":"text-base"),children:"+"}),yt&&v.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-green-500 flex items-center justify-center",children:v.jsx(Wh,{size:6,fill:"white",className:"text-white"})}),tt.chord&&!yt&&(ht||be)&&v.jsx("div",{onClick:Qt=>{Qt.stopPropagation(),H(at.id,tt.id)},className:qt("absolute rounded-full bg-black/70 backdrop-blur-sm flex items-center justify-center cursor-pointer border border-white/30 active:bg-white/30",be?"w-4 h-4 -top-2 -right-2 opacity-0 group-hover:opacity-100 hover:bg-white/20 hover:border-white/50 transition-all z-30":"w-5 h-5 -top-2.5 -right-2.5 opacity-100 z-30"),title:"Remove chord",children:v.jsx("span",{className:qt("text-white/90 font-bold leading-none",be?"text-[10px]":"text-xs"),children:""})})]},tt.id)})})]}),!s&&!a&&nt<at.measures.length-1&&v.jsx("div",{className:"w-px h-5 bg-border-medium shrink-0"})]},Pe.id))})}),we&&(()=>{const Pe=o.sections.findIndex(ht=>ht.id===we),nt=Pe>0,tt=Pe<o.sections.length-1;return v.jsx(wk,{section:o.sections.find(ht=>ht.id===we),isOpen:!0,onClose:()=>Ve(null),onTimeSignatureChange:ht=>{const[yt,dt]=ht.split("/").map(xt=>parseInt(xt,10));yt&&dt&&we&&N(we,[yt,dt])},onBarsChange:ht=>{we&&k(we,ht)},onStepCountChange:ht=>{we&&C(we,ht)},onNameChange:(ht,yt)=>{we&&B(we,{name:ht,type:yt})},onCopy:()=>{we&&D(we)},onClear:()=>{we&&V(we)},onDelete:()=>{we&&R(we)},songTimeSignature:ae||[4,4],onNavigatePrev:()=>{if(nt){const ht=o.sections[Pe-1];Ve(ht.id),M(Pe-1)}},onNavigateNext:()=>{if(tt){const ht=o.sections[Pe+1];Ve(ht.id),M(Pe+1)}},hasPrev:nt,hasNext:tt,sectionIndex:Pe,totalSections:o.sections.length,onSlotClick:ht=>{Ve(null),M(Pe),d(we,ht)}})})()]}):v.jsxs("div",{"data-mobile-timeline":!0,className:"w-full h-12 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing touch-feedback select-none",onClick:()=>{!xe.current&&fe===0&&e()},onTouchStart:ke,onTouchMove:ct,onTouchEnd:Ue,onMouseDown:Me,style:{transform:fe>0?`translateY(-${fe}px)`:void 0,opacity:fe>0?Math.min(1,.7+fe/100):1,transition:fe===0?"all 0.2s ease-out":"none"},children:[v.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40 mb-1.5"}),v.jsx("span",{className:"text-[10px] font-medium text-text-muted uppercase tracking-wider",children:"Timeline"})]})},og=({highlightedNotes:n,rootNote:e,bassNote:t,color:s="#6366f1",octave:a=4,onNotePlay:o})=>{const u=["C","D","E","F","G","A","B"],c=C=>{const R={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},D=C.replace(/\d+/g,"");return R[D]??-1},f=n.map(C=>c(C)),d=e?c(e):-1,p=t?c(t):-1,y=C=>{const R=c(C);return R!==-1&&f.includes(R)},_=C=>d===-1?!1:c(C)===d,b=C=>p===-1?!1:c(C)===p,A=(C,R)=>{o&&o(C,R)},N=()=>{const C=[];for(let D=0;D<2;D++){const V=a+D;u.forEach(I=>{const Y=y(I),W=_(I),O=b(I);C.push(v.jsx("div",{className:"h-full rounded-b-md relative border-x border-b border-gray-400 cursor-pointer hover:brightness-95 active:brightness-90 transition-all",style:{width:`${100/14}%`,background:"linear-gradient(180deg, #fafafa 0%, #e8e8e8 70%, #d0d0d0 100%)",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.9), inset 0 -2px 4px rgba(0,0,0,0.08)"},onClick:()=>A(I,V),children:Y&&v.jsxs(v.Fragment,{children:[W&&v.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"3px",transform:"translateX(-50%)",width:"18px",height:"18px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),v.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"6px",transform:"translateX(-50%)",width:O?"14px":W?"12px":"9px",height:O?"14px":W?"12px":"9px",background:s,border:O?"3px solid #000":"2px solid #000",boxShadow:O?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`white-${D}-${I}`))})}return C},k=()=>{const C=[],R=[{note:"C#",offset:7.14},{note:"D#",offset:14.28},{note:"F#",offset:28.57},{note:"G#",offset:35.71},{note:"A#",offset:42.85}];for(let D=0;D<2;D++){const V=D*50,I=a+D;R.forEach(({note:Y,offset:W})=>{const O=y(Y),B=_(Y),K=b(Y),j=V+W;C.push(v.jsx("div",{className:"absolute top-0 rounded-b-md cursor-pointer hover:brightness-125 active:brightness-150 transition-all",style:{left:`${j}%`,width:"5.5%",height:"58%",transform:"translateX(-50%)",background:"linear-gradient(180deg, #333 0%, #1a1a1a 70%, #0a0a0a 100%)",boxShadow:"0 3px 6px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.08)",pointerEvents:"auto"},onClick:()=>A(Y,I),children:O&&v.jsxs(v.Fragment,{children:[B&&v.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none animate-pulse",style:{bottom:"1px",transform:"translateX(-50%)",width:"16px",height:"16px",background:"transparent",border:`2px solid ${s}`,boxShadow:`0 0 8px ${s}, 0 0 12px ${s}60`,opacity:.9}}),v.jsx("div",{className:"absolute left-1/2 rounded-full pointer-events-none",style:{bottom:"4px",transform:"translateX(-50%)",width:K?"12px":B?"10px":"8px",height:K?"12px":B?"10px":"8px",background:s,border:K?"3px solid #fff":"2px solid #fff",boxShadow:K?`0 0 10px ${s}, 0 0 4px ${s}`:`0 0 6px ${s}80`}})]})},`black-${D}-${Y}`))})}return C};return v.jsx("div",{className:"relative w-full rounded-lg select-none overflow-hidden",style:{height:"80px",minHeight:"80px",background:"#1a1a22",boxShadow:"inset 0 2px 8px rgba(0,0,0,0.6)",padding:"3px 2px 2px 2px"},children:v.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[v.jsx("div",{className:"flex w-full h-full gap-[1px]",style:{position:"relative",zIndex:0},children:N()}),v.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,pointerEvents:"none"},children:k()})]})})},Sk={C:{maj:[{frets:[-1,3,2,0,1,0],fingers:[0,3,2,0,1,0],barres:[],baseFret:1}],m:[{frets:[-1,3,1,0,1,3],fingers:[0,3,1,0,2,4],barres:[],baseFret:1}],7:[{frets:[-1,3,2,3,1,0],fingers:[0,3,2,4,1,0],barres:[],baseFret:1}],maj7:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj9:[{frets:[-1,3,2,0,0,0],fingers:[0,3,2,0,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,3,2,2,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],m7:[{frets:[-1,3,1,3,1,3],fingers:[0,2,1,3,1,4],barres:[1],baseFret:3}],m9:[{frets:[-1,3,1,3,3,3],fingers:[0,2,1,3,4,4],barres:[],baseFret:3}],m11:[{frets:[-1,3,1,3,3,1],fingers:[0,2,1,3,4,1],barres:[1],baseFret:3}],m6:[{frets:[-1,3,1,2,1,3],fingers:[0,3,1,2,1,4],barres:[1],baseFret:1}],sus2:[{frets:[-1,3,0,0,1,3],fingers:[0,2,0,0,1,3],barres:[],baseFret:1}],sus4:[{frets:[-1,3,3,0,1,1],fingers:[0,3,4,0,1,1],barres:[1],baseFret:1}],dim:[{frets:[-1,3,1,-1,1,2],fingers:[0,4,1,0,2,3],barres:[],baseFret:1}],6:[{frets:[-1,3,2,2,1,0],fingers:[0,4,2,3,1,0],barres:[],baseFret:1}],add9:[{frets:[-1,3,2,0,3,0],fingers:[0,2,1,0,3,0],barres:[],baseFret:1}],9:[{frets:[-1,3,2,3,3,0],fingers:[0,2,1,3,4,0],barres:[],baseFret:1}],11:[{frets:[-1,3,2,3,3,3],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],13:[{frets:[-1,3,2,3,3,5],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,3,4,3,4,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},"C#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},Db:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:4}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:4}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:4}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:4}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:4}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:4}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:4}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:4}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:4}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:4}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:4}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:4}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:4}]},D:{maj:[{frets:[-1,-1,0,2,3,2],fingers:[0,0,0,1,3,2],barres:[],baseFret:1}],m:[{frets:[-1,-1,0,2,3,1],fingers:[0,0,0,2,3,1],barres:[],baseFret:1}],7:[{frets:[-1,-1,0,2,1,2],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],maj7:[{frets:[-1,-1,0,2,2,2],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],maj9:[{frets:[-1,-1,0,2,2,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],maj13:[{frets:[-1,-1,0,2,2,4],fingers:[0,0,0,1,1,3],barres:[2],baseFret:1}],m7:[{frets:[-1,-1,0,2,1,1],fingers:[0,0,0,2,1,1],barres:[1],baseFret:1}],m9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],m11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m6:[{frets:[-1,-1,0,2,0,1],fingers:[0,0,0,2,0,1],barres:[],baseFret:1}],sus2:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],sus4:[{frets:[-1,-1,0,2,3,3],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,1,3,1],fingers:[0,0,0,1,4,2],barres:[],baseFret:1}],6:[{frets:[-1,-1,0,2,0,2],fingers:[0,0,0,1,0,2],barres:[],baseFret:1}],add9:[{frets:[-1,-1,0,2,3,0],fingers:[0,0,0,1,2,0],barres:[],baseFret:1}],9:[{frets:[-1,-1,0,2,1,0],fingers:[0,0,0,2,1,0],barres:[],baseFret:1}],11:[{frets:[-1,-1,0,2,1,3],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],13:[{frets:[-1,-1,0,2,1,4],fingers:[0,0,0,2,1,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,1,1,1],fingers:[0,0,0,1,2,3],barres:[],baseFret:1}]},"D#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},Eb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:6}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:6}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:6}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:6}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:6}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:6}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:6}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:6}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:6}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:6}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:6}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:6}],9:[{frets:[-1,1,3,1,1,1],fingers:[0,2,4,1,1,1],barres:[1],baseFret:6}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:6}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:6}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:6}]},E:{maj:[{frets:[0,2,2,1,0,0],fingers:[0,2,3,1,0,0],barres:[],baseFret:1}],m:[{frets:[0,2,2,0,0,0],fingers:[0,2,3,0,0,0],barres:[],baseFret:1}],7:[{frets:[0,2,0,1,0,0],fingers:[0,2,0,1,0,0],barres:[],baseFret:1}],maj7:[{frets:[0,2,1,1,0,0],fingers:[0,3,1,2,0,0],barres:[],baseFret:1}],maj9:[{frets:[0,2,1,1,0,2],fingers:[0,2,1,1,0,3],barres:[1],baseFret:1}],maj13:[{frets:[0,2,1,1,2,2],fingers:[0,2,1,1,3,3],barres:[],baseFret:1}],m7:[{frets:[0,2,0,0,0,0],fingers:[0,1,0,0,0,0],barres:[],baseFret:1}],m9:[{frets:[0,2,0,0,0,2],fingers:[0,2,0,0,0,3],barres:[],baseFret:1}],m11:[{frets:[0,2,0,0,3,0],fingers:[0,2,0,0,4,0],barres:[],baseFret:1}],m6:[{frets:[0,2,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],sus2:[{frets:[0,2,4,4,0,0],fingers:[0,1,3,4,0,0],barres:[],baseFret:1}],sus4:[{frets:[0,2,2,2,0,0],fingers:[0,2,3,4,0,0],barres:[],baseFret:1}],dim:[{frets:[0,1,2,0,2,0],fingers:[0,1,2,0,3,0],barres:[],baseFret:1}],6:[{frets:[0,2,2,1,2,0],fingers:[0,2,3,1,4,0],barres:[],baseFret:1}],add9:[{frets:[0,2,2,1,0,2],fingers:[0,2,3,1,0,4],barres:[],baseFret:1}],9:[{frets:[0,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],11:[{frets:[0,2,0,1,3,0],fingers:[0,2,0,1,4,0],barres:[],baseFret:1}],13:[{frets:[0,2,0,1,2,2],fingers:[0,2,0,1,3,4],barres:[],baseFret:1}],m7b5:[{frets:[0,1,0,0,2,0],fingers:[0,1,0,0,2,0],barres:[],baseFret:1}]},F:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:1}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:1}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,-1,3,2,1,0],fingers:[0,0,3,2,1,0],barres:[],baseFret:1}],maj9:[{frets:[1,0,3,0,1,0],fingers:[1,0,3,0,2,0],barres:[],baseFret:1}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:1}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:1}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:1}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,-1,3,0,1,1],fingers:[0,0,3,0,1,1],barres:[1],baseFret:1}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:1}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:1}],6:[{frets:[1,-1,0,2,1,1],fingers:[1,0,0,3,1,1],barres:[1],baseFret:1}],add9:[{frets:[-1,-1,3,2,1,3],fingers:[0,0,3,2,1,4],barres:[],baseFret:1}],9:[{frets:[1,3,1,2,1,3],fingers:[1,3,1,2,1,4],barres:[1],baseFret:1}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:1}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:1}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:1}]},"F#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},Gb:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:2}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:2}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:2}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:2}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:2}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:2}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:2}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:2}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:2}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:2}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:2}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:2}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:2}]},G:{maj:[{frets:[3,2,0,0,0,3],fingers:[2,1,0,0,0,3],barres:[],baseFret:1}],m:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],7:[{frets:[3,2,0,0,0,1],fingers:[3,2,0,0,0,1],barres:[],baseFret:1}],maj7:[{frets:[3,2,0,0,0,2],fingers:[3,1,0,0,0,2],barres:[],baseFret:1}],maj9:[{frets:[3,0,0,0,0,2],fingers:[2,0,0,0,0,1],barres:[],baseFret:1}],maj13:[{frets:[3,2,0,0,2,2],fingers:[3,1,0,0,2,2],barres:[2],baseFret:1}],m7:[{frets:[3,1,0,0,3,0],fingers:[2,1,0,0,3,0],barres:[],baseFret:1}],m9:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],m11:[{frets:[3,1,0,0,3,3],fingers:[2,1,0,0,3,4],barres:[],baseFret:1}],m6:[{frets:[3,1,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],sus2:[{frets:[3,0,0,0,3,3],fingers:[1,0,0,0,2,3],barres:[],baseFret:1}],sus4:[{frets:[3,3,0,0,1,3],fingers:[2,3,0,0,1,4],barres:[],baseFret:1}],dim:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}],6:[{frets:[3,2,0,0,0,0],fingers:[2,1,0,0,0,0],barres:[],baseFret:1}],add9:[{frets:[3,0,0,0,0,3],fingers:[2,0,0,0,0,3],barres:[],baseFret:1}],9:[{frets:[3,2,0,1,0,1],fingers:[3,2,0,1,0,1],barres:[1],baseFret:1}],11:[{frets:[3,2,0,1,3,1],fingers:[3,2,0,1,4,1],barres:[1],baseFret:1}],13:[{frets:[3,2,0,1,0,5],fingers:[2,1,0,1,0,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,-1,0,3,2,3],fingers:[0,0,0,2,1,3],barres:[],baseFret:1}]},"G#":{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},Ab:{maj:[{frets:[1,3,3,2,1,1],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],m:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],7:[{frets:[1,3,1,2,1,1],fingers:[1,3,1,2,1,1],barres:[1],baseFret:4}],maj7:[{frets:[1,3,2,2,1,1],fingers:[1,4,2,3,1,1],barres:[1],baseFret:4}],maj9:[{frets:[1,3,1,1,1,1],fingers:[1,4,1,1,1,1],barres:[1],baseFret:4}],maj13:[{frets:[1,3,1,2,3,3],fingers:[1,3,1,2,4,4],barres:[],baseFret:4}],m7:[{frets:[1,3,1,1,1,1],fingers:[1,3,1,1,1,1],barres:[1],baseFret:4}],m9:[{frets:[1,3,1,1,1,3],fingers:[1,3,1,1,1,4],barres:[1],baseFret:4}],m11:[{frets:[1,3,1,1,4,1],fingers:[1,2,1,1,4,1],barres:[1],baseFret:4}],m6:[{frets:[1,3,3,1,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],sus2:[{frets:[1,3,3,1,1,1],fingers:[1,3,4,1,1,1],barres:[1],baseFret:4}],sus4:[{frets:[1,3,3,3,1,1],fingers:[1,2,3,4,1,1],barres:[1],baseFret:4}],dim:[{frets:[1,2,3,1,-1,-1],fingers:[1,2,4,1,0,0],barres:[1],baseFret:4}],6:[{frets:[1,3,3,2,3,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}],add9:[{frets:[1,3,3,2,1,3],fingers:[1,3,4,2,1,1],barres:[1],baseFret:4}],9:[{frets:[-1,-1,4,3,2,4],fingers:[0,0,3,2,1,4],barres:[],baseFret:4}],11:[{frets:[1,3,1,2,4,1],fingers:[1,2,1,3,4,1],barres:[1],baseFret:4}],13:[{frets:[1,3,1,2,3,3],fingers:[1,2,1,3,4,4],barres:[],baseFret:4}],m7b5:[{frets:[1,2,3,1,4,1],fingers:[1,2,3,1,4,1],barres:[1],baseFret:4}]},A:{maj:[{frets:[-1,0,2,2,2,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],m:[{frets:[-1,0,2,2,1,0],fingers:[0,0,2,3,1,0],barres:[],baseFret:1}],7:[{frets:[-1,0,2,0,2,0],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}],maj7:[{frets:[-1,0,2,1,2,0],fingers:[0,0,2,1,3,0],barres:[],baseFret:1}],maj9:[{frets:[-1,0,2,1,0,0],fingers:[0,0,2,1,0,0],barres:[],baseFret:1}],maj13:[{frets:[-1,0,2,1,2,4],fingers:[0,0,2,1,3,4],barres:[],baseFret:1}],m7:[{frets:[-1,0,2,0,1,0],fingers:[0,0,2,0,1,0],barres:[],baseFret:1}],m9:[{frets:[-1,0,2,0,1,3],fingers:[0,0,2,0,1,4],barres:[],baseFret:1}],m11:[{frets:[-1,0,0,0,1,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],m6:[{frets:[-1,0,2,2,1,2],fingers:[0,0,2,3,1,4],barres:[],baseFret:1}],sus2:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],sus4:[{frets:[-1,0,2,2,3,0],fingers:[0,0,1,2,3,0],barres:[],baseFret:1}],dim:[{frets:[-1,0,1,2,1,-1],fingers:[0,0,1,3,2,0],barres:[],baseFret:1}],6:[{frets:[-1,0,2,2,2,2],fingers:[0,0,1,1,1,1],barres:[2],baseFret:1}],add9:[{frets:[-1,0,2,2,0,0],fingers:[0,0,1,2,0,0],barres:[],baseFret:1}],9:[{frets:[-1,0,2,4,2,3],fingers:[0,0,1,3,1,2],barres:[2],baseFret:1}],11:[{frets:[-1,0,0,0,2,0],fingers:[0,0,0,0,1,0],barres:[],baseFret:1}],13:[{frets:[-1,0,2,0,2,4],fingers:[0,0,1,0,2,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,0,1,0,1,-1],fingers:[0,0,1,0,2,0],barres:[],baseFret:1}]},"A#":{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},Bb:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:1}],7:[{frets:[-1,1,3,1,3,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:1}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:1}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:1}],m7:[{frets:[-1,1,3,1,2,1],fingers:[0,1,3,1,2,1],barres:[1],baseFret:1}],m9:[{frets:[-1,1,3,1,2,3],fingers:[0,1,3,1,2,4],barres:[1],baseFret:1}],m11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,2,1,4,1],barres:[1],baseFret:1}],m6:[{frets:[-1,1,3,1,3,1],fingers:[0,1,2,1,3,1],barres:[1],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:1}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:1}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:1}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:1}],add9:[{frets:[-1,1,0,3,1,1],fingers:[0,1,0,4,2,3],barres:[],baseFret:1}],9:[{frets:[-1,1,0,1,1,1],fingers:[0,2,0,3,3,3],barres:[1],baseFret:1}],11:[{frets:[-1,1,3,1,4,1],fingers:[0,1,3,1,4,1],barres:[1],baseFret:1}],13:[{frets:[-1,1,3,1,3,3],fingers:[0,1,3,1,4,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:1}]},B:{maj:[{frets:[-1,1,3,3,3,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],m:[{frets:[-1,1,3,3,2,1],fingers:[0,1,3,4,2,1],barres:[1],baseFret:2}],7:[{frets:[-1,2,1,2,0,2],fingers:[0,2,1,3,0,4],barres:[],baseFret:1}],maj7:[{frets:[-1,1,3,2,3,1],fingers:[0,1,3,2,4,1],barres:[1],baseFret:2}],maj9:[{frets:[-1,1,3,1,1,1],fingers:[0,1,4,1,1,1],barres:[1],baseFret:2}],maj13:[{frets:[-1,1,3,2,3,3],fingers:[0,1,3,2,4,4],barres:[],baseFret:2}],m7:[{frets:[-1,2,0,2,0,2],fingers:[0,1,0,2,0,3],barres:[],baseFret:1}],m9:[{frets:[-1,2,0,2,2,2],fingers:[0,1,0,2,3,4],barres:[],baseFret:1}],m11:[{frets:[-1,2,0,2,0,0],fingers:[0,1,0,2,0,0],barres:[],baseFret:1}],m6:[{frets:[-1,2,0,1,0,2],fingers:[0,2,0,1,0,3],barres:[],baseFret:1}],sus2:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],sus4:[{frets:[-1,1,3,3,4,1],fingers:[0,1,2,3,4,1],barres:[1],baseFret:2}],dim:[{frets:[-1,1,2,3,2,-1],fingers:[0,1,2,4,3,0],barres:[],baseFret:2}],6:[{frets:[-1,1,3,3,3,3],fingers:[0,1,2,2,2,2],barres:[3],baseFret:2}],add9:[{frets:[-1,1,3,3,1,1],fingers:[0,1,3,4,1,1],barres:[1],baseFret:2}],9:[{frets:[-1,2,1,2,2,2],fingers:[0,2,1,3,3,3],barres:[],baseFret:1}],11:[{frets:[-1,2,1,2,0,0],fingers:[0,2,1,3,0,0],barres:[],baseFret:1}],13:[{frets:[-1,2,1,2,2,4],fingers:[0,2,1,3,3,4],barres:[],baseFret:1}],m7b5:[{frets:[-1,1,2,1,2,-1],fingers:[0,1,3,2,4,0],barres:[],baseFret:2}]}};function Nk(n){return{"C":"C#","D":"Db","D":"D#","E":"Eb","F":"F#","G":"Gb","G":"G#","A":"Ab","A":"A#","B":"Bb"}[n]||n.replace("","#").replace("","b")}function Ak(n){return{major:"maj",major7:"maj7",major9:"maj9",major11:"maj11",major13:"maj13",major6:"6",minor:"m",min:"m",minor7:"m7",min7:"m7",minor9:"m9",min9:"m9",minor11:"m11",min11:"m11",minor13:"m13",min13:"m13",minor6:"m6",min6:"m6",dom7:"7",dominant7:"7",dom9:"9",dominant9:"9",dom11:"11",dominant11:"11",dom13:"13",dominant13:"13",suspended2:"sus2",suspended4:"sus4",diminished:"dim","half-diminished":"m7b5",halfDiminished7:"m7b5","m75":"m7b5",sixth:"6",ninth:"9",added9:"add9"}[n]||n}function sw(n,e){const t=Nk(n),s=Ak(e),a=Sk[t];if(!a)return null;const o=a[s];return!o||o.length===0?null:o[0]}const lg=({root:n,quality:e,color:t="#6366f1",onClick:s,onDoubleClick:a})=>{const o=y2(),u=sw(n,e),c=ne.useRef(0),f=ne.useRef(null),d=or(`${n}${e==="maj"?"":e}`),p=()=>{const N=Date.now(),k=N-c.current;f.current&&(clearTimeout(f.current),f.current=null),k<300&&k>0?(c.current=0,a&&a()):(c.current=N,f.current=setTimeout(()=>{s&&s(),f.current=null},300))},y=ne.useRef(0),_=ne.useRef(null),b=N=>{N.preventDefault(),N.stopPropagation();const k=Date.now(),C=k-y.current;_.current&&(clearTimeout(_.current),_.current=null),C<300&&C>0?(y.current=0,a&&a()):(y.current=k,_.current=setTimeout(()=>{s&&s(),_.current=null},300))};if(!u)return v.jsxs("div",{className:"flex items-center justify-center text-text-muted text-xs py-4",children:["No guitar diagram available for ",n,e]});const A=s||a;return v.jsxs("div",{className:`flex flex-col items-center ${A?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,onClick:A?p:void 0,onTouchEnd:A?b:void 0,onTouchStart:A?N=>N.stopPropagation():void 0,children:[v.jsx("span",{className:`${o?"text-xs":"text-[11px]"} font-bold mb-1 text-center`,style:{backgroundColor:"transparent",color:t,padding:"4px 12px",borderRadius:"10px",border:`2px solid ${t}`},children:d}),v.jsx("svg",{viewBox:"0 0 100 120",className:`w-full ${o?"max-w-[110px]":"max-w-[120px]"}`,style:{minHeight:o?110:120,pointerEvents:"none"},children:v.jsx(Tk,{chord:u,color:t})})]})},Tk=({chord:n,color:e})=>{const{frets:t,fingers:s,barres:a,baseFret:o}=n,u=20,c=25,f=12,d=18,p=4,y=6,_=4.5,b=Array.from({length:y},(R,D)=>u+D*f),A=Array.from({length:p+1},(R,D)=>c+D*d),N=o===1,k=f*(y-1)+16,C=d*p+8;return v.jsxs(v.Fragment,{children:[v.jsx("rect",{x:u-8,y:c-4,width:k,height:C,fill:"#3d2817",rx:3}),N?v.jsx("rect",{x:u-2,y:c-3,width:f*(y-1)+4,height:4,fill:"#f5f5f5",rx:1}):v.jsx("text",{x:u-14,y:c+d/2+4,fontSize:"12",fill:"#e0e0e0",textAnchor:"middle",fontWeight:"700",children:o}),A.map((R,D)=>v.jsx("line",{x1:u,y1:R,x2:u+f*(y-1),y2:R,stroke:"#b8b8b8",strokeWidth:D===0&&!N?2:1},`fret-${D}`)),b.map((R,D)=>v.jsx("line",{x1:R,y1:c,x2:R,y2:c+d*p,stroke:"#d4d4d4",strokeWidth:1.2+(5-D)*.25},`string-${D}`)),a.map((R,D)=>{const V=t.map((O,B)=>({fret:O,idx:B})).filter(({fret:O})=>O===R);if(V.length<2)return null;const I=Math.min(...V.map(O=>O.idx)),Y=Math.max(...V.map(O=>O.idx)),W=c+(R-.5)*d;return v.jsx("rect",{x:b[I]-_,y:W-_,width:b[Y]-b[I]+_*2,height:_*2,fill:"white",stroke:e,strokeWidth:2,rx:_},`barre-${D}`)}),t.map((R,D)=>{const V=b[D];if(R===-1)return v.jsx("text",{x:V,y:c-10,fontSize:"14",fill:"#ff6b6b",textAnchor:"middle",fontWeight:"bold",children:""},`mute-${D}`);if(R===0)return v.jsx("circle",{cx:V,cy:c-8,r:4,fill:"none",stroke:"var(--color-text-secondary)",strokeWidth:1.5},`open-${D}`);const I=a.includes(R),Y=s[D];if(I){const O=t.findIndex(B=>B===R);if(D!==O)return null}const W=c+(R-.5)*d;return v.jsxs("g",{children:[v.jsx("circle",{cx:V,cy:W,r:_,fill:"white",stroke:e,strokeWidth:2}),Y>0&&!I&&v.jsx("text",{x:V,y:W+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:Y})]},`finger-${D}`)}),a.map((R,D)=>{const V=t.map((O,B)=>({fret:O,idx:B})).filter(({fret:O})=>O===R);if(V.length<2)return null;const I=Math.min(...V.map(O=>O.idx)),Y=c+(R-.5)*d,W=s[I];return W>0?v.jsx("text",{x:b[I],y:Y+2.5,fontSize:"7",fill:"#1a1a1a",textAnchor:"middle",fontWeight:"bold",children:W},`barre-finger-${D}`):null})]})},qv=({notes:n,rootNote:e,color:t="#6366f1",width:s,numerals:a,onNotePlay:o,compact:u=!1})=>{const c=y2(),f=Y=>{const W=Y.replace(/[0-9]/g,"");let O=W[0],B="";W.includes("")||W.includes("#")?B="":(W.includes("")||W.includes("b"))&&(B="");let j={C:-6,D:-5,E:-4,F:-3,G:-2,A:-1,B:0}[O]??0;const F="CDEFGAB".indexOf(O),te="CDEFGAB".indexOf(e[0]);return F<te&&te-F>3&&(j+=7),{line:j,accidental:B}},d=Y=>{o&&o(Y,4)},y=s||(u?180:c?280:340),_=u?70:c?110:115,b=u?6:12,A=b,N=_*(u?.28:.22),k=u?7:10,C=Math.max(80,y-b*2),R=N+(u?32:50),D=N+(u?42:62),V=n.map((Y,W)=>{const{line:O,accidental:B}=f(Y),K=u?40:60,j=C-K-15,F=u?18:25,te=j/Math.max(n.length-1,1),H=Math.max(te,F),ae=H*Math.max(n.length-1,0),$=(j-ae)/2,re=A+K+$+W*H,le=N-O*k/2;return{note:Y,x:re,y:le,line:O,accidental:B,needsLedgerLines:O<-4||O>4}}),I=Y=>{const W=[];if(Y.line<-4)for(let B=-6;B>=Y.line;B-=2)B<-4&&W.push(v.jsx("line",{x1:Y.x-28/2,y1:N-B*k/2,x2:Y.x+28/2,y2:N-B*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-below-${B}`));else if(Y.line>4)for(let B=6;B<=Y.line;B+=2)B>4&&W.push(v.jsx("line",{x1:Y.x-28/2,y1:N-B*k/2,x2:Y.x+28/2,y2:N-B*k/2,stroke:"#888",strokeWidth:"1.5"},`ledger-above-${B}`));return W};return v.jsx("div",{className:`flex justify-center items-center ${u?"":"w-full"}`,children:v.jsxs("svg",{viewBox:`0 0 ${y} ${_}`,className:u?"":"w-full",style:{minHeight:u?60:c?95:100,width:u?y:void 0},children:[[-2,-1,0,1,2].map(Y=>v.jsx("line",{x1:A,y1:N-Y*k,x2:A+C,y2:N-Y*k,stroke:"#777",strokeWidth:u?1.5:2},`staff-${Y}`)),v.jsx("text",{x:A-(u?2:3),y:N+(u?14:20),fontSize:u?"38":c?"56":"62",fill:t,fontFamily:"serif",fontWeight:"bold",children:""}),V.map(Y=>I(Y)),V.map((Y,W)=>v.jsxs("g",{children:[Y.accidental&&v.jsx("text",{x:Y.x-(u?12:20),y:Y.y+(u?3:5),fontSize:u?"12":c?"18":"20",fill:"#ccc",fontFamily:"serif",fontWeight:"bold",children:Y.accidental}),o&&v.jsx("circle",{cx:Y.x,cy:Y.y,r:16,fill:"transparent",style:{cursor:"pointer"},onClick:()=>d(Y.note),onTouchEnd:O=>{O.preventDefault(),d(Y.note)}}),v.jsx("ellipse",{cx:Y.x,cy:Y.y,rx:u?5:7,ry:u?4:5.5,fill:W===0?t:"#ddd",stroke:W===0?t:"#ddd",strokeWidth:1,style:o?{cursor:"pointer"}:void 0,className:o?"hover:opacity-80 active:scale-110 transition-transform":""}),v.jsx("text",{x:Y.x,y:R,fontSize:u?"7":c?"10":"11",fill:"#999",textAnchor:"middle",fontWeight:"600",children:Y.note}),a&&a[W]&&v.jsx("text",{x:Y.x,y:D,fontSize:u?"7":c?"9":"10",fill:W===0?t:"#777",textAnchor:"middle",fontWeight:"700",children:a[W]})]},`note-${W}`))]})})},cg=({variant:n="sidebar",onScrollChange:e,forceVisible:t=!1})=>{const{selectedChord:s,selectedKey:a,chordPanelVisible:o,toggleChordPanel:u,selectedSectionId:c,selectedSlotId:f,addChordToSlot:d,setSelectedChord:p,setSelectedSlot:y,timelineVisible:_,openTimeline:b,setChordPanelGuitarExpanded:A,setChordPanelVoicingsExpanded:N,chordPanelAttention:k}=nn(),C=dd(),[R,D]=ne.useState(null),[V,I]=ne.useState([]),[Y,W]=ne.useState(320),[O,B]=ne.useState(!1),K=ne.useRef(0),j=n==="drawer",[F,te]=ne.useState(s),H=s??F,{isMobile:ae}=$h(),$=n==="landscape-panel"||n==="landscape-expanded",re=n==="landscape-panel",le=!j&&!$&&Y<360,pe=!j&&!$&&Y<290,[be,P]=ne.useState(!1),[M,G]=ne.useState(!1),[J,Q]=ne.useState(!ae||$),[oe,fe]=ne.useState(0),de=4,xe=_e=>{P(_e),N(_e)},we=_e=>{Q(_e),A(_e)};ne.useEffect(()=>{A(J),N(be)},[]);const Ve=ne.useRef(0),Xe=ne.useRef(0),[Je,Fe]=ne.useState(0),z=ne.useRef(null),ke=ne.useRef(null),ct=ne.useRef(null),Ue=ne.useRef(null),Me=_e=>{if(_e.current&&Ue.current){const rt=Ue.current,st=_e.current.offsetTop-rt.offsetTop;rt.scrollTo({top:st,behavior:"smooth"})}},it=ne.useCallback(_e=>{!j||!ae||(Ve.current=_e.touches[0].clientY,Xe.current=_e.touches[0].clientY)},[j,ae]),Ye=ne.useCallback(_e=>{if(!j||!ae)return;Xe.current=_e.touches[0].clientY;const rt=Xe.current-Ve.current;rt>0&&Fe(Math.min(rt,150))},[j,ae]),ut=ne.useCallback(()=>{!j||!ae||(Je>80?(Fe(300),setTimeout(()=>{u(),Fe(0)},200)):Fe(0))},[j,ae,Je,u]),at=()=>{if(!H)return"Chord Details";const _e=R||H.quality;return or(_e==="major"||_e==="maj"?H.root:_e==="minor"||_e==="m"?`${H.root}m`:_e==="diminished"||_e==="dim"?`${H.root}dim`:`${H.root}${_e}`)},Pe=ne.useCallback((_e,rt)=>{Z3(_e,rt)},[]),nt={maj:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',major:'The classic major triad: bright, stable, and universally resolved. The foundation of Western harmony and the sound of "home."',maj7:"Smooth and sophisticated, the major 7th adds a dreamy, floating quality. Think Burt Bacharach, neo-soul, and late-night jazz.",maj9:"Builds on maj7 with a crystalline 9th. Modern, airy, and introspective  perfect for R&B ballads and ambient textures.",maj13:"The full major palette: lush, orchestral, and complex. Great for endings or when you want maximum harmonic richness.",6:"Warm and vintage  the major 6th has an old-Hollywood or country sweetness. Softer resolution than maj7.",add9:"A major triad with added sparkle from the 9th, but no 7th. Clean, modern, and ubiquitous in pop and worship music.",7:"The dominant 7th creates bluesy tension begging for resolution. The engine behind the ii-V-I and the soul of rock & blues.",9:"Dominant 7 with a colorful 9th. Funky, jazzy, and sophisticated  think Stevie Wonder, Earth Wind & Fire, and neo-soul.",11:"Suspended, modal quality over dominant function. Creates an open, unresolved tension that floats before landing.",13:"The dominant chord at its richest: soulful 13th on top of bluesy 7th. Perfect for jazz turnarounds and R&B grooves.",m7:"The workhorse minor chord: soulful, laid-back, and endlessly versatile. The default for jazz ii chords and R&B grooves.",minor:"The basic minor triad: melancholic, introspective, and emotionally direct. Minor keys are built on this sound.",m9:"Lush and cinematic  adds depth and width to the minor sound. Evokes late-night cityscapes and emotional introspection.",m11:"Spacious and modal, with an open 11th suspension. Great for grooves, vamps, and creating atmospheric tension.",m6:"Bittersweet with a film-noir quality. The 6th adds sophistication to minor  a nice alternative to m7 for tonic chords.",sus2:"Neither major nor minor  the open 2nd creates an ambient, neutral quality. Ubiquitous in pop, rock, and modern worship.",sus4:"Suspended tension from the 4th wants to fall to the 3rd. Creates expectation and movement  classic resolution technique.",dim:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",diminished:"Highly unstable and tense  every note pushes somewhere else. Perfect as a passing chord or chromatic approach.",m7b5:"Half-diminished: dark and sophisticated. The natural ii chord in minor keys, essential for minor ii-V-i progressions."},tt=["maj","7","maj7","maj9","maj13","6","13","m7","m9","m11","m6","sus2","sus4","dim","m7b5","add9","9","11"],ht=_e=>{if(!H?.root)return"-";const rt=Bt=>Bt.replace(/[\d]/g,"").replace(//,"b").replace(//,"#"),Ae={C:0,"B#":0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,Fb:4,"E#":5,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11,Cb:11},st=Ae[rt(H.root)],pt=Ae[rt(_e)];if(st===void 0||pt===void 0)return"-";const At=(pt-st+12)%12;return{0:"R",1:"2",2:"2",3:"3",4:"3",5:"4",6:"5",7:"5",8:"6",9:"6",10:"7",11:"7"}[At]??"-"},yt=ne.useCallback(_e=>{j||(_e.preventDefault(),B(!0))},[j]);ne.useEffect(()=>{if(!O||j)return;const _e=st=>{const pt=window.innerWidth-st.clientX;W(Math.max(280,Math.min(500,pt)))},rt=st=>{if(st.touches.length===1){const pt=window.innerWidth-st.touches[0].clientX;W(Math.max(280,Math.min(500,pt)))}},Ae=()=>{B(!1)};return document.addEventListener("mousemove",_e),document.addEventListener("mouseup",Ae),document.addEventListener("touchmove",rt),document.addEventListener("touchend",Ae),()=>{document.removeEventListener("mousemove",_e),document.removeEventListener("mouseup",Ae),document.removeEventListener("touchmove",rt),document.removeEventListener("touchend",Ae)}},[O,j]),ne.useEffect(()=>{s&&te(s)},[s]),ne.useEffect(()=>{D(null),I([]),fe(0)},[H?.root,H?.quality]),ne.useEffect(()=>{$&&J&&z.current&&Ue.current&&setTimeout(()=>{if(z.current&&Ue.current){const _e=z.current,rt=Ue.current,Ae=_e.offsetTop-rt.offsetTop;rt.scrollTo({top:Ae+35,behavior:"smooth"})}},100)},[$,J]),ne.useEffect(()=>{if(!j||!e)return;const _e=Ue.current;if(!_e)return;const rt=()=>{const Ae=_e.scrollHeight-_e.scrollTop-_e.clientHeight<20;e(Ae)};return _e.addEventListener("scroll",rt),rt(),()=>_e.removeEventListener("scroll",rt)},[j,e]);const dt=H&&C[H.root]||"#6366f1",xt=V.length>0?V:H?.notes||[],ft=su(xt,oe),un=X_(xt),Yt=_e=>{const rt=Date.now();if(rt-K.current<300||(K.current=rt,!H))return;const Ae=ka(H.root,_e),st=su(Ae,oe);Ur(st),D(_e),I(Ae)},Nt=_e=>{if(K.current=0,!_){b();return}if(!H||!c||!f)return;const rt=ka(H.root,_e),Ae=cv(H.root,_e,rt,oe),st={...H,quality:_e,symbol:Ae,notes:rt,inversion:oe};d(st,c,f),y(c,f),p(st)},St=ne.useCallback(()=>{if(!H)return;const _e=R||H.quality,rt=ka(H.root,_e),Ae=su(rt,oe);Ur(Ae)},[H,R,oe]),Tt=ne.useCallback(()=>{if(!_){b();return}if(!H||!c||!f)return;const _e=R||H.quality,rt=ka(H.root,_e),Ae=cv(H.root,_e,rt,oe),st={...H,quality:_e,symbol:Ae,notes:rt,inversion:oe};d(st,c,f),y(c,f),p(st)},[H,R,oe,c,f,d,y,p,_,b]),gt=ne.useRef(0),Qt=ne.useRef(null),Lt=ne.useCallback(_e=>{if(!H)return;_e.preventDefault(),_e.stopPropagation();const rt=Date.now(),Ae=rt-gt.current;Qt.current&&(clearTimeout(Qt.current),Qt.current=null),Ae<300&&Ae>0?(gt.current=0,Tt()):(gt.current=rt,Qt.current=setTimeout(()=>{St(),Qt.current=null},300))},[H,St,Tt]),Rt=()=>{if(!H)return{extensions:[],description:""};let _e=H.numeral;if(_e&&_e.includes("(")){const Ae=_e.match(/^(.+?)\s*\(/);Ae&&(_e=Ae[1].trim())}return{I:{extensions:["maj","maj7","maj9","maj13","6"],description:"The tonic  your home base and resting point. This is where phrases resolve and songs often begin and end. Its stability makes it perfect for choruses and moments of arrival."},IV:{extensions:["maj","maj7","maj9","maj13","6"],description:'The subdominant  warm, hopeful, and slightly floating. It gently pulls away from home without creating urgency. Great for pre-choruses and that "lifting" feeling before a chorus.'},V:{extensions:["maj","7","9","11","sus4","13"],description:`The dominant  maximum tension wanting to resolve back to I. This chord creates expectation and forward motion. It's the "question" that begs for an "answer."`},ii:{extensions:["m","m7","m9","m11","m6"],description:"The supertonic  a natural setup chord that leads smoothly to V or IV. It's the workhorse of the ii-V-I progression and adds sophistication to any verse."},iii:{extensions:["m","m7"],description:"The mediant  mysterious and chameleon-like. It can substitute for I (they share two notes) or lead to vi. Use it for unexpected color and emotional complexity."},vi:{extensions:["m","m7","m9","m11"],description:'The relative minor  emotional depth and melancholy without leaving the key. This is the "sad" chord in major keys and the foundation of countless pop progressions (vi-IV-I-V).'},"vii":{extensions:["dim","m75"],description:"The leading tone chord  highly unstable and restless. Every note wants to move somewhere, making it a powerful passing chord that pulls strongly toward I."},II:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of V)  borrowed tension that points toward V. Use it to create a dramatic runway before landing on V."},III:{extensions:["maj","7","sus4"],description:"A secondary dominant (V of vi)  creates an unexpected dramatic pull toward vi. Perfect for adding tension before a minor chord moment."}}[_e||""]||{extensions:[],description:`This chord doesn't fit in the key of ${a}, but it may add color and interest to your progression.`}};if(!o&&!t)return j?v.jsxs("div",{className:"w-full h-12 flex flex-col items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-pointer touch-feedback active:bg-bg-tertiary",onClick:u,onTouchStart:_e=>{Ve.current=_e.touches[0].clientY,Xe.current=_e.touches[0].clientY},onTouchMove:_e=>{Xe.current=_e.touches[0].clientY},onTouchEnd:()=>{Ve.current-Xe.current>30&&u()},title:"Swipe up or tap to open",children:[v.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40 mb-1.5"}),v.jsx("span",{className:"text-[10px] font-medium text-text-muted uppercase tracking-wider",children:"Chord Details"})]}):v.jsx("button",{onClick:u,className:"h-full px-2 flex items-center justify-center bg-bg-secondary border-l border-border-subtle hover:bg-bg-tertiary transition-colors shrink-0",title:"Show chord details",children:v.jsx(PC,{size:18,className:"text-text-muted"})});const mn=n==="landscape-panel",vt=n==="landscape-expanded";return v.jsxs("div",{className:`${vt||mn?"h-full w-full flex flex-col bg-bg-secondary overflow-hidden":j?`${ae?"relative w-full":"fixed inset-x-3 bottom-[88px]"} ${ae?"max-h-[60vh]":"max-h-[70vh]"} bg-bg-secondary ${ae?"border-t-2 border-border-subtle":"border-2 border-border-subtle rounded-2xl"} shadow-2xl overflow-hidden ${ae?"":"z-40"} flex`:"h-full flex bg-bg-secondary border-l border-border-subtle overflow-x-hidden"}${k?" chord-panel-attention":""}`,style:{...!j&&!mn&&!vt?{width:Y,minWidth:0,maxWidth:"100%"}:{},...j?{transform:Je>0?`translateY(${Je}px)`:void 0,opacity:Je>0?Math.max(0,1-Je/300):1,transition:Je===0||Je>=150?"all 0.2s ease-out":"none"}:{},...k?{boxShadow:"0 0 20px 4px rgba(99, 102, 241, 0.4), inset 0 0 10px rgba(99, 102, 241, 0.1)",borderColor:"rgba(99, 102, 241, 0.6)",transition:"box-shadow 0.3s ease-out, border-color 0.3s ease-out"}:{}},children:[!j&&!mn&&v.jsx("div",{className:`w-3 flex items-center justify-center cursor-ew-resize hover:bg-bg-tertiary active:bg-accent-primary/20 transition-colors ${O?"bg-accent-primary/20":""} relative z-[60] touch-none`,onMouseDown:yt,onTouchStart:yt,children:v.jsx(B3,{size:12,className:"text-text-muted"})}),v.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0 relative",children:[j&&ae&&v.jsx("div",{className:"flex flex-col items-center shrink-0 cursor-grab active:cursor-grabbing",onTouchStart:it,onTouchMove:Ye,onTouchEnd:ut,children:v.jsx("div",{className:"pt-2.5 pb-1 flex flex-col items-center",children:v.jsx("div",{className:"w-12 h-1.5 rounded-full bg-text-muted/40"})})}),v.jsxs("div",{className:`${$?"px-3 py-2":ae&&j?"px-2 py-2":"px-4 py-3"} border-b border-border-subtle ${pe?"flex flex-col gap-2":"grid grid-cols-[1fr_auto_1fr] items-center gap-2"} shrink-0 ${j?"bg-bg-secondary/80 backdrop-blur-md":""}`,children:[v.jsx("div",{className:`flex items-center min-w-0 ${pe?"justify-center":""}`,style:{gap:"8px"},children:re&&H?v.jsx(v.Fragment,{children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-xs font-bold cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all",style:{backgroundColor:"transparent",color:dt,padding:"4px 10px",borderRadius:"8px",border:`2px solid ${dt}`},onClick:St,onDoubleClick:Tt,children:at()}),H.numeral&&v.jsx("span",{className:"text-sm font-serif italic text-text-muted shrink-0",children:or(H.numeral)}),v.jsxs("div",{className:"flex items-center shrink-0",title:"Chord inversion",children:[v.jsx("button",{onClick:()=>{const _e=Math.max(0,oe-1);fe(_e);const rt=su(xt,_e);Ur(rt)},disabled:oe<=0,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:v.jsx(Vh,{size:10})}),v.jsx("span",{className:"text-[9px] font-bold text-text-secondary w-3 text-center",children:oe}),v.jsx("button",{onClick:()=>{const _e=Math.min(un,oe+1);fe(_e);const rt=su(xt,_e);Ur(rt)},disabled:oe>=un,className:"w-3 h-3 flex items-center justify-center text-text-muted hover:text-accent-primary transition-colors disabled:opacity-20",children:v.jsx(Ih,{size:10})})]})]})}):v.jsx(v.Fragment,{children:v.jsxs("span",{className:`flex items-center shrink-0 min-w-0 ${H?"cursor-pointer touch-feedback hover:opacity-80 active:scale-95 transition-all":""}`,style:H?{gap:"4px",backgroundColor:"transparent",color:dt,padding:"3px 8px",borderRadius:"6px",border:`1.5px solid ${dt}`}:{gap:"4px"},onClick:H?St:void 0,onDoubleClick:H?Tt:void 0,onTouchEnd:H?Lt:void 0,onTouchStart:H?_e=>_e.stopPropagation():void 0,children:[v.jsx("span",{className:`${$?"text-lg":ae?"text-sm":"text-xs sm:text-sm"} font-bold leading-none truncate`,children:ae&&j?at():H?or(`${H.root}${(R||H.quality)==="maj"?"":" "+(R||H.quality)}`):"Chord Details"}),H?.numeral&&v.jsx("span",{className:`${$?"text-sm":"text-[10px]"} font-serif italic opacity-70 shrink-0`,children:or(H.numeral)})]})})}),!pe&&v.jsx("div",{className:"flex items-center justify-center",children:H&&!re&&v.jsxs("div",{className:"flex items-center bg-bg-tertiary/40 rounded-full px-0.5 ml-3",title:"Chord inversion - which note is in the bass",children:[v.jsx("button",{onClick:()=>{const _e=Math.max(0,oe-1);fe(_e);const rt=su(xt,_e);Ur(rt)},disabled:oe<=0,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Previous inversion",children:v.jsx(Vh,{size:8})}),v.jsx("span",{className:"text-[11px] font-semibold text-text-secondary min-w-[20px] text-center",children:Z_(oe)}),v.jsx("button",{onClick:()=>{const _e=Math.min(un,oe+1);fe(_e);const rt=su(xt,_e);Ur(rt)},disabled:oe>=un,className:"w-4 h-4 flex items-center justify-center hover:bg-accent-primary/20 rounded-full text-text-muted hover:text-accent-primary transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Next inversion",children:v.jsx(Ih,{size:8})})]})}),v.jsxs("div",{className:`flex items-center gap-2 shrink-0 ${pe?"justify-center w-full":"justify-end"}`,children:[H&&v.jsxs("button",{onClick:Tt,className:`${pe?"flex-1 py-2":ae?"px-3 py-1.5":"px-2.5 py-1"} bg-gradient-to-r from-accent-primary to-purple-600 hover:opacity-90 rounded-lg transition-all touch-feedback flex items-center justify-center gap-1.5 shadow-md shadow-accent-primary/20 active:scale-95`,title:"Add chord to timeline",children:[v.jsx(Yh,{size:pe?16:ae?14:12,className:"text-white"}),v.jsx("span",{className:`${pe?"text-sm":ae?"text-xs":"text-[11px]"} font-semibold text-white`,children:"Add"})]}),!$&&v.jsx("button",{onClick:u,className:`${pe?"p-2 bg-bg-tertiary/60 rounded-lg":ae?"p-2 min-w-[40px] min-h-[40px]":"p-1"} hover:bg-bg-tertiary rounded transition-colors touch-feedback flex items-center justify-center`,title:"Hide panel",children:v.jsx(U3,{size:pe||ae?18:16,className:`text-text-muted ${ae&&j?"rotate-90":""}`})})]})]}),H?v.jsxs("div",{ref:Ue,className:`flex-1 ${vt?"flex flex-row overflow-hidden":"overflow-y-auto overflow-x-hidden"} min-h-0 overscroll-contain`,children:[!vt&&v.jsxs("div",{className:`${ae?"px-5 pt-4 pb-4":"px-5 py-4"} border-b border-border-subtle`,children:[v.jsx(og,{highlightedNotes:ft,rootNote:H.root,bassNote:ft[0],color:dt,octave:de,onNotePlay:Pe}),v.jsx("div",{className:`${ae?"mt-4":"mt-5"} w-full`,children:v.jsxs("div",{className:"grid gap-1",style:{gridTemplateColumns:`${ae?"56px":"72px"} repeat(${ft.length}, minmax(0, 1fr))`},children:[v.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Notes"}),ft.map((_e,rt)=>v.jsx("div",{className:`text-center ${ae?"text-xs":"text-sm"} font-bold text-text-primary flex items-center justify-center`,style:{height:"16px"},children:_e},`note-${rt}`)),v.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Absolute"}),ft.map((_e,rt)=>v.jsx("div",{className:`text-center ${ae?"text-[11px]":"text-xs"} text-text-primary font-semibold flex items-center justify-center`,style:{height:"16px"},children:ht(_e)},`abs-${rt}`)),v.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide text-text-muted flex items-center",style:{height:"16px"},children:"Relative"}),ft.map((_e,rt)=>v.jsx("div",{className:`text-center ${ae?"text-[11px]":"text-xs"} text-text-secondary flex items-center justify-center`,style:{height:"16px"},children:K_(a,_e).replace(/^1/,"R")},`rel-${rt}`))]})})]}),v.jsxs("div",{className:`flex flex-col ${vt?"flex-1 overflow-y-auto":""}`,children:[v.jsxs("div",{ref:z,className:`${$?"px-2 py-1":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[v.jsxs("button",{onClick:()=>{const _e=!J;we(_e),_e&&setTimeout(()=>Me(z),50)},className:`w-full flex items-center justify-between ${J?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[v.jsx("h3",{className:`${re?"text-[9px]":ae?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide whitespace-nowrap`,children:re?"Guitar & Suggested":`Guitar & Suggested Voicings for ${or(H.numeral||H.symbol)}`}),v.jsx(Wf,{size:re?8:ae?14:12,className:`text-text-secondary transition-transform ${J?"rotate-180":""}`})]}),J&&v.jsx(v.Fragment,{children:v.jsxs("div",{className:`flex items-start ${re?"gap-1":"gap-2"} px-3`,style:{marginTop:re?"4px":"8px"},children:[v.jsxs("div",{className:"flex flex-col items-center shrink-0",style:{minWidth:re?"70px":"100px"},children:[v.jsx(lg,{root:H.root,quality:R||H.quality,color:dt,onClick:St,onDoubleClick:Tt}),!re&&v.jsx("p",{className:`${ae?"text-[10px]":"text-[9px]"} text-text-muted leading-relaxed text-center ${ae?"mb-1 px-1":"mb-1 px-0.5"}`,style:{maxWidth:re?"70px":"100px"},children:nt[R||H.quality]||"Select a voicing to see its description."})]}),v.jsx("div",{className:"w-px bg-border-subtle self-stretch"}),v.jsx("div",{className:"flex-1 flex flex-col justify-start pl-1",children:Rt().extensions.length>0?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:`grid ${re||le?"grid-cols-1":"grid-cols-2"}`,style:{gap:re?"3px":le?"4px":ae?"6px":"5px",marginBottom:re?"2px":"4px",marginRight:le?"12px":void 0},children:Rt().extensions.map(_e=>v.jsxs("button",{className:`relative group ${re?"px-1 py-0.5 text-[8px] min-h-[20px]":le?"px-2 py-1.5 text-[9px] min-h-[26px]":ae?"px-2 py-2 text-xs min-h-[36px]":"px-1.5 py-1 text-[10px]"} rounded font-semibold transition-colors touch-feedback text-center`,style:{width:re?"60px":le?"70px":ae?"80px":"70px",...R===_e?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#f0f0f5",border:"1px solid rgba(255,255,255,0.08)"}},onClick:()=>Yt(_e),onDoubleClick:()=>Nt(_e),children:[or(`${H.root}${_e}`),!ae&&nt[_e]&&v.jsxs("span",{className:"pointer-events-none absolute -top-6 -translate-y-full left-1/2 -translate-x-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[nt[_e]?v.jsxs(v.Fragment,{children:[nt[_e],v.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},_e))}),!le&&v.jsx("div",{style:{marginTop:re?"2px":"6px"},children:v.jsx(qv,{notes:ft,rootNote:H.root,color:dt,numerals:ft.map(_e=>ht(_e)),onNotePlay:Pe,compact:!0})})]}):v.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[v.jsx(qv,{notes:ft,rootNote:H.root,color:dt,numerals:ft.map(_e=>ht(_e)),onNotePlay:Pe,compact:!1}),v.jsxs("p",{className:`${re?"text-[8px]":ae?"text-[10px]":"text-[9px]"} text-text-muted italic text-center mt-1`,children:["Out of key  see ",v.jsx("span",{className:"font-semibold text-text-secondary",children:"Voicings"})," below"]})]})})]})})]}),v.jsxs("div",{ref:ke,className:`${vt?"px-3 py-1":ae?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[v.jsxs("button",{onClick:()=>{const _e=!be;xe(_e),_e&&setTimeout(()=>Me(ke),50)},className:`w-full flex items-center justify-between ${be?"mb-2":"mb-0"} cursor-pointer rounded-none`,style:{backgroundColor:"transparent"},children:[v.jsx("h3",{className:`${re?"text-[9px]":ae?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Voicings"}),v.jsx(Wf,{size:re?8:ae?14:12,className:`text-text-secondary transition-transform ${be?"rotate-180":""}`})]}),be&&v.jsx("div",{className:`grid ${re?"grid-cols-4":ae?"grid-cols-3":"grid-cols-2 sm:grid-cols-3"} ${re?"gap-2":ae?"gap-3":"gap-2.5"}`,children:tt.map((_e,rt)=>{const st=rt%2===0?{left:"calc(100% + 10px)"}:{right:"calc(100% + 10px)"};return v.jsxs("button",{className:`relative group ${re?"px-1.5 py-1 min-h-[22px] text-[8px]":ae?"px-3 py-3 min-h-[48px] text-xs":"px-2 py-1.5 text-[10px]"} rounded font-medium transition-colors touch-feedback`,style:R===_e?{backgroundColor:"#4f46e5",color:"#ffffff",border:"1px solid #4f46e5"}:{backgroundColor:"#282833",color:"#9898a6",border:"1px solid rgba(255,255,255,0.08)"},onClick:()=>Yt(_e),onDoubleClick:()=>Nt(_e),children:[_e,!ae&&nt[_e]&&v.jsxs("span",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 whitespace-normal text-[10px] leading-tight bg-black text-white px-3 py-2 rounded border border-white/10 shadow-xl opacity-0 group-hover:opacity-100 group-active:opacity-0 group-focus:opacity-0 transition-opacity duration-150 group-hover:delay-1000 z-50 w-44 text-left",style:{...st,backgroundColor:"#000",color:"#fff",padding:"8px 10px"},children:[nt[_e]?v.jsxs(v.Fragment,{children:[nt[_e],v.jsx("div",{className:"h-px bg-white/20 my-1.5"})]}):null,"Double-click to add to timeline"]})]},_e)})})]}),v.jsxs("div",{ref:ct,className:`${vt?"px-3 py-1":ae?"px-5 py-1 mt-2":"px-5 py-1"} rounded-none`,style:{backgroundColor:"#1e1e28",borderBottom:"1px solid #3a3a4a",scrollMarginTop:"60px"},children:[v.jsxs("button",{onClick:()=>{const _e=!M;G(_e),_e&&setTimeout(()=>Me(ct),50)},className:`w-full flex items-center justify-between cursor-pointer ${M?"mb-3":"mb-0"} rounded-none`,style:{backgroundColor:"transparent"},children:[v.jsx("h3",{className:`${re?"text-[9px]":ae?"text-[11px]":"text-[10px]"} font-semibold text-text-secondary uppercase tracking-wide`,children:"Theory"}),v.jsx(Wf,{size:re?8:ae?14:12,className:`text-text-secondary transition-transform ${M?"rotate-180":""}`})]}),M&&v.jsx("div",{className:`${ae?"p-3":"p-4"} bg-bg-elevated rounded-none`,children:v.jsx("p",{className:`${ae?"text-sm":"text-xs"} text-text-secondary leading-relaxed`,children:Rt().description})})]})]}),ae&&v.jsx("div",{className:"h-12 shrink-0"})]}):v.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 gap-4",children:[v.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-accent-primary/20 to-purple-600/20 flex items-center justify-center border border-accent-primary/30",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-accent-primary",children:[v.jsx("circle",{cx:"8",cy:"18",r:"4"}),v.jsx("path",{d:"M12 18V2l7 4"})]})}),v.jsxs("div",{className:"text-center space-y-2",children:[v.jsx("p",{className:`${ae?"text-base":"text-sm"} font-semibold text-text-primary`,children:"No chord selected"}),v.jsx("p",{className:`${ae?"text-sm":"text-xs"} text-text-muted max-w-[200px]`,children:"Tap a chord on the wheel or select one from the timeline"})]})]})]})]})},Ck="modulepreload",kk=function(n){return"/chord-wheel-writer/"+n},Uv={},Ah=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let f=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");a=f(t.map(d=>{if(d=kk(d),d in Uv)return;Uv[d]=!0;const p=d.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${y}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":Ck,p||(_.as="script"),_.crossOrigin="",_.href=d,c&&_.setAttribute("nonce",c),document.head.appendChild(_),p)return new Promise((b,A)=>{_.addEventListener("load",b),_.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return a.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},jk=()=>{const{currentSong:n,isPlaying:e,tempo:t,volume:s,setTempo:a,setVolume:o,instrument:u,setInstrument:c,isMuted:f,toggleMute:d,toggleLoop:p,isLooping:y,playingSectionId:_,selectedSectionId:b,setSelectedSlot:A}=nn(),{isMobile:N,isLandscape:k}=$h(),[C,R]=ne.useState(!1),[D,V]=ne.useState(!1),[I,Y]=ne.useState(t.toString()),W=ne.useRef(null),[O,B]=ne.useState(!1),K=ne.useRef(null),j=ne.useRef(t),F=ne.useRef(null);ne.useEffect(()=>{v2(n)},[n]),ne.useEffect(()=>{ew(t)},[t]),ne.useEffect(()=>{b2(u)},[u]),ne.useEffect(()=>{nw()},[y,n,_,b]),ne.useEffect(()=>{Ah(()=>Promise.resolve().then(()=>rg),void 0).then(Q=>{R(!0),Q.preloadAudio().finally(()=>R(!1))})},[]);const te=async()=>{try{await g2(),e?(J3(),nn.getState().setIsPlaying(!1)):(R(!0),await K3(),nn.getState().setIsPlaying(!0))}catch(Q){console.error("Playback error:",Q)}finally{R(!1)}},H=Q=>{tw(Q)},ae=()=>{p()},$=()=>{const Q=n.sections;if(Q.length===0)return;const oe=b?Q.findIndex(xe=>xe.id===b):-1,fe=oe>=0?(oe+1)%Q.length:0,de=Q[fe];de&&de.measures[0]?.beats[0]&&A(de.id,de.measures[0].beats[0].id)},re=[{value:"piano",label:"Piano"},{value:"epiano",label:"Electric Piano"},{value:"organ",label:"Organ"},{value:"pad",label:"Pad"},{value:"guitar",label:"Guitar"}];re.find(Q=>Q.value===u)||c("piano");const le=Q=>{const oe=re.findIndex(de=>de.value===u);if(oe===-1){c("piano");return}const fe=Q==="next"?(oe+1)%re.length:(oe-1+re.length)%re.length;c(re[fe].value)},pe=()=>{Y(t.toString()),V(!0),setTimeout(()=>W.current?.focus(),0)},be=()=>{const Q=parseInt(I,10);!isNaN(Q)&&Q>=40&&Q<=240?a(Q):Y(t.toString()),V(!1)},P=Q=>{Q.key==="Enter"?be():Q.key==="Escape"&&(Y(t.toString()),V(!1))},M=Q=>{K.current=Q.touches[0].clientX,j.current=t,B(!1),F.current=setTimeout(()=>{F.current=null},150)},G=Q=>{if(K.current===null)return;const fe=Q.touches[0].clientX-K.current;if(Math.abs(fe)>10){B(!0),F.current&&(clearTimeout(F.current),F.current=null);const de=Math.round(fe/3),xe=Math.min(240,Math.max(40,j.current+de));a(xe)}},J=()=>{!O&&F.current&&(clearTimeout(F.current),pe()),K.current=null,B(!1),F.current=null};return v.jsxs("div",{"data-playback-controls":!0,className:`${N&&k?"h-8":N?"h-11":"h-12"} bg-bg-elevated border-t border-border-subtle flex items-center justify-between ${N?"px-2 gap-1":"px-6"}`,children:[v.jsxs("div",{className:"flex items-center gap-0.5",children:[v.jsx("button",{onClick:()=>H("prev"),className:`${N&&k?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:v.jsx(G3,{size:N&&k?12:16})}),v.jsx("button",{onClick:te,disabled:C,className:`${N&&k?"w-6 h-6":N?"w-8 h-8":"w-9 h-9"} rounded-full bg-accent-primary hover:bg-indigo-500 disabled:bg-accent-primary/50 flex items-center justify-center text-white shadow-md transition-all hover:scale-105 active:scale-95 touch-feedback`,children:C?v.jsx(MC,{size:N&&k?12:N?16:18,className:"animate-spin"}):e?v.jsx(H3,{size:N&&k?12:N?16:18,fill:"currentColor"}):v.jsx(Wh,{size:N&&k?12:N?16:18,fill:"currentColor",className:"ml-0.5"})}),v.jsx("button",{onClick:()=>H("next"),className:`${N&&k?"p-1":"p-1.5"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center`,children:v.jsx(W3,{size:N&&k?12:16})}),N?v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:$,className:`${k?"p-1":"p-1.5"} transition-colors text-text-secondary hover:text-text-primary touch-feedback`,title:"Cycle to Next Section",children:v.jsx(GC,{size:k?12:14})}),v.jsx("button",{onClick:ae,className:`${k?"p-1":"p-1.5"} transition-colors touch-feedback ${y?"text-accent-primary":"text-text-secondary hover:text-text-primary"}`,title:"Loop Section",children:v.jsx(Rv,{size:k?12:14})})]}):v.jsx("button",{onClick:ae,className:`p-1.5 transition-colors ml-1 ${y?"text-accent-primary":"text-text-secondary hover:text-text-primary"}`,title:"Loop Section",children:v.jsx(Rv,{size:14})})]}),v.jsx("div",{className:"flex items-center",children:N?D?v.jsx("input",{ref:W,type:"number",inputMode:"numeric",value:I,onChange:Q=>Y(Q.target.value),onBlur:be,onKeyDown:P,className:`${k?"w-10 text-[9px] h-4":"w-12 text-[11px] h-5"} bg-bg-tertiary border border-accent-primary rounded-sm px-1 text-center text-text-primary font-medium focus:outline-none`,min:40,max:240}):v.jsxs("div",{onTouchStart:M,onTouchMove:G,onTouchEnd:J,onClick:pe,className:`${k?"text-[9px] px-1.5 h-4":"text-[11px] px-2 h-5"} font-medium ${O?"text-accent-primary":"text-text-secondary"} hover:text-text-primary transition-colors touch-feedback whitespace-nowrap flex items-center cursor-ew-resize select-none`,children:[t," ",v.jsx("span",{className:`${O?"text-accent-primary/70":"text-text-muted"} ml-0.5`,children:"BPM"})]}):v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-text-secondary font-medium",children:"Tempo"}),v.jsx("input",{type:"number",value:t,onChange:Q=>a(Number(Q.target.value)),className:"w-14 bg-bg-tertiary border border-border-subtle rounded px-2 py-1 text-center text-text-primary text-[11px] font-medium",min:40,max:240}),v.jsx("span",{className:"text-text-muted",children:"BPM"})]})}),v.jsxs("div",{className:`flex items-center ${N?"gap-1.5":"gap-4"}`,children:[v.jsxs("div",{className:"flex items-center gap-1",children:[!N&&v.jsxs("div",{className:"flex items-center rounded bg-bg-tertiary/60 border border-border-subtle/70 h-7",children:[v.jsx("button",{onClick:()=>le("prev"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-l transition-colors flex items-center",title:"Previous instrument",children:v.jsx(Vh,{size:12})}),v.jsx("button",{onClick:()=>le("next"),className:"px-1 h-full text-text-secondary hover:text-text-primary hover:bg-bg-tertiary rounded-r transition-colors flex items-center",title:"Next instrument",children:v.jsx(Ih,{size:12})})]}),N&&!k&&v.jsx(q3,{size:14,className:"text-text-muted"}),v.jsx("select",{value:u,onChange:Q=>c(Q.target.value),className:`bg-bg-tertiary border border-border-subtle rounded ${N&&k?"px-3 py-1 h-6 text-[7px] min-w-[60px]":N?"px-1.5 h-7 text-[11px] min-w-[70px]":"px-2 h-7 text-[10px] min-w-[130px]"} text-text-secondary focus:outline-none focus:border-accent-primary cursor-pointer`,children:re.map(Q=>v.jsx("option",{value:Q.value,children:Q.label},Q.value))})]}),v.jsxs("div",{className:`flex items-center ${N?"":"gap-2 w-28"}`,children:[v.jsx("button",{onClick:d,className:`${N?"p-1.5":"p-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback flex items-center justify-center rounded`,title:f?"Unmute":"Mute",children:f||s===0?v.jsx(ok,{size:N?16:14}):v.jsx(ng,{size:N?16:14})}),!N&&v.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:f?0:s,onChange:Q=>{f&&d(),o(Number(Q.target.value))},className:`w-full h-1 bg-bg-tertiary rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:bg-accent-primary [&::-webkit-slider-thumb]:rounded-full ${f?"opacity-50":""}`})]})]})]})};function Ek(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return ne.useMemo(()=>s=>{e.forEach(a=>a(s))},e)}const Yp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xh(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function x2(n){return"nodeType"in n}function Wi(n){var e,t;return n?Xh(n)?n:x2(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function w2(n){const{Document:e}=Wi(n);return n instanceof e}function Td(n){return Xh(n)?!1:n instanceof Wi(n).HTMLElement}function iw(n){return n instanceof Wi(n).SVGElement}function Zh(n){return n?Xh(n)?n.document:x2(n)?w2(n)?n:Td(n)||iw(n)?n.ownerDocument:document:document:document}const Ho=Yp?ne.useLayoutEffect:ne.useEffect;function _2(n){const e=ne.useRef(n);return Ho(()=>{e.current=n}),ne.useCallback(function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e.current==null?void 0:e.current(...s)},[])}function Mk(){const n=ne.useRef(null),e=ne.useCallback((s,a)=>{n.current=setInterval(s,a)},[]),t=ne.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function od(n,e){e===void 0&&(e=[n]);const t=ne.useRef(n);return Ho(()=>{t.current!==n&&(t.current=n)},e),t}function Cd(n,e){const t=ne.useRef();return ne.useMemo(()=>{const s=n(t.current);return t.current=s,s},[...e])}function vp(n){const e=_2(n),t=ne.useRef(null),s=ne.useCallback(a=>{a!==t.current&&e?.(a,t.current),t.current=a},[]);return[t,s]}function ug(n){const e=ne.useRef();return ne.useEffect(()=>{e.current=n},[n]),e.current}let ym={};function kd(n,e){return ne.useMemo(()=>{if(e)return e;const t=ym[n]==null?0:ym[n]+1;return ym[n]=t,n+"-"+t},[n,e])}function aw(n){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return s.reduce((o,u)=>{const c=Object.entries(u);for(const[f,d]of c){const p=o[f];p!=null&&(o[f]=p+n*d)}return o},{...e})}}const Th=aw(1),ld=aw(-1);function Lk(n){return"clientX"in n&&"clientY"in n}function S2(n){if(!n)return!1;const{KeyboardEvent:e}=Wi(n.target);return e&&n instanceof e}function Ok(n){if(!n)return!1;const{TouchEvent:e}=Wi(n.target);return e&&n instanceof e}function hg(n){if(Ok(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return Lk(n)?{x:n.clientX,y:n.clientY}:null}const cd=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[cd.Translate.toString(n),cd.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:s}=n;return e+" "+t+"ms "+s}}}),Hv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Dk(n){return n.matches(Hv)?n:n.querySelector(Hv)}const Rk={display:"none"};function Ik(n){let{id:e,value:t}=n;return Zn.createElement("div",{id:e,style:Rk},t)}function Vk(n){let{id:e,announcement:t,ariaLiveType:s="assertive"}=n;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Zn.createElement("div",{id:e,style:a,role:"status","aria-live":s,"aria-atomic":!0},t)}function Fk(){const[n,e]=ne.useState("");return{announce:ne.useCallback(s=>{s!=null&&e(s)},[]),announcement:n}}const ow=ne.createContext(null);function Bk(n){const e=ne.useContext(ow);ne.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function Pk(){const[n]=ne.useState(()=>new Set),e=ne.useCallback(s=>(n.add(s),()=>n.delete(s)),[n]);return[ne.useCallback(s=>{let{type:a,event:o}=s;n.forEach(u=>{var c;return(c=u[a])==null?void 0:c.call(u,o)})},[n]),e]}const zk={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},qk={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Uk(n){let{announcements:e=qk,container:t,hiddenTextDescribedById:s,screenReaderInstructions:a=zk}=n;const{announce:o,announcement:u}=Fk(),c=kd("DndLiveRegion"),[f,d]=ne.useState(!1);if(ne.useEffect(()=>{d(!0)},[]),Bk(ne.useMemo(()=>({onDragStart(y){let{active:_}=y;o(e.onDragStart({active:_}))},onDragMove(y){let{active:_,over:b}=y;e.onDragMove&&o(e.onDragMove({active:_,over:b}))},onDragOver(y){let{active:_,over:b}=y;o(e.onDragOver({active:_,over:b}))},onDragEnd(y){let{active:_,over:b}=y;o(e.onDragEnd({active:_,over:b}))},onDragCancel(y){let{active:_,over:b}=y;o(e.onDragCancel({active:_,over:b}))}}),[o,e])),!f)return null;const p=Zn.createElement(Zn.Fragment,null,Zn.createElement(Ik,{id:s,value:a.draggable}),Zn.createElement(Vk,{id:c,announcement:u}));return t?Cl.createPortal(p,t):p}var Es;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Es||(Es={}));function yp(){}function Gv(n,e){return ne.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function Hk(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return ne.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const ho=Object.freeze({x:0,y:0});function lw(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function cw(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return t-s}function Gk(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return s-t}function Wv(n){let{left:e,top:t,height:s,width:a}=n;return[{x:e,y:t},{x:e+a,y:t},{x:e,y:t+s},{x:e+a,y:t+s}]}function uw(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function Yv(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const Wk=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=Yv(e,e.left,e.top),o=[];for(const u of s){const{id:c}=u,f=t.get(c);if(f){const d=lw(Yv(f),a);o.push({id:c,data:{droppableContainer:u,value:d}})}}return o.sort(cw)},Yk=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=Wv(e),o=[];for(const u of s){const{id:c}=u,f=t.get(c);if(f){const d=Wv(f),p=a.reduce((_,b,A)=>_+lw(d[A],b),0),y=Number((p/4).toFixed(4));o.push({id:c,data:{droppableContainer:u,value:y}})}}return o.sort(cw)};function $k(n,e){const t=Math.max(e.top,n.top),s=Math.max(e.left,n.left),a=Math.min(e.left+e.width,n.left+n.width),o=Math.min(e.top+e.height,n.top+n.height),u=a-s,c=o-t;if(s<a&&t<o){const f=e.width*e.height,d=n.width*n.height,p=u*c,y=p/(f+d-p);return Number(y.toFixed(4))}return 0}const Xk=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const a=[];for(const o of s){const{id:u}=o,c=t.get(u);if(c){const f=$k(c,e);f>0&&a.push({id:u,data:{droppableContainer:o,value:f}})}}return a.sort(Gk)};function Zk(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function hw(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:ho}function Qk(n){return function(t){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((u,c)=>({...u,top:u.top+n*c.y,bottom:u.bottom+n*c.y,left:u.left+n*c.x,right:u.right+n*c.x}),{...t})}}const Kk=Qk(1);function Jk(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function e7(n,e,t){const s=Jk(e);if(!s)return n;const{scaleX:a,scaleY:o,x:u,y:c}=s,f=n.left-u-(1-a)*parseFloat(t),d=n.top-c-(1-o)*parseFloat(t.slice(t.indexOf(" ")+1)),p=a?n.width/a:n.width,y=o?n.height/o:n.height;return{width:p,height:y,top:d,right:f+p,bottom:d+y,left:f}}const t7={ignoreTransform:!1};function Qh(n,e){e===void 0&&(e=t7);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=Wi(n).getComputedStyle(n);d&&(t=e7(t,d,p))}const{top:s,left:a,width:o,height:u,bottom:c,right:f}=t;return{top:s,left:a,width:o,height:u,bottom:c,right:f}}function $v(n){return Qh(n,{ignoreTransform:!0})}function n7(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function r7(n,e){return e===void 0&&(e=Wi(n).getComputedStyle(n)),e.position==="fixed"}function s7(n,e){e===void 0&&(e=Wi(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=e[a];return typeof o=="string"?t.test(o):!1})}function $p(n,e){const t=[];function s(a){if(e!=null&&t.length>=e||!a)return t;if(w2(a)&&a.scrollingElement!=null&&!t.includes(a.scrollingElement))return t.push(a.scrollingElement),t;if(!Td(a)||iw(a)||t.includes(a))return t;const o=Wi(n).getComputedStyle(a);return a!==n&&s7(a,o)&&t.push(a),r7(a,o)?t:s(a.parentNode)}return n?s(n):t}function fw(n){const[e]=$p(n,1);return e??null}function xm(n){return!Yp||!n?null:Xh(n)?n:x2(n)?w2(n)||n===Zh(n).scrollingElement?window:Td(n)?n:null:null}function dw(n){return Xh(n)?n.scrollX:n.scrollLeft}function pw(n){return Xh(n)?n.scrollY:n.scrollTop}function fg(n){return{x:dw(n),y:pw(n)}}var Ps;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Ps||(Ps={}));function mw(n){return!Yp||!n?!1:n===document.scrollingElement}function gw(n){const e={x:0,y:0},t=mw(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},s={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},a=n.scrollTop<=e.y,o=n.scrollLeft<=e.x,u=n.scrollTop>=s.y,c=n.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:u,isRight:c,maxScroll:s,minScroll:e}}const i7={x:.2,y:.2};function a7(n,e,t,s,a){let{top:o,left:u,right:c,bottom:f}=t;s===void 0&&(s=10),a===void 0&&(a=i7);const{isTop:d,isBottom:p,isLeft:y,isRight:_}=gw(n),b={x:0,y:0},A={x:0,y:0},N={height:e.height*a.y,width:e.width*a.x};return!d&&o<=e.top+N.height?(b.y=Ps.Backward,A.y=s*Math.abs((e.top+N.height-o)/N.height)):!p&&f>=e.bottom-N.height&&(b.y=Ps.Forward,A.y=s*Math.abs((e.bottom-N.height-f)/N.height)),!_&&c>=e.right-N.width?(b.x=Ps.Forward,A.x=s*Math.abs((e.right-N.width-c)/N.width)):!y&&u<=e.left+N.width&&(b.x=Ps.Backward,A.x=s*Math.abs((e.left+N.width-u)/N.width)),{direction:b,speed:A}}function o7(n){if(n===document.scrollingElement){const{innerWidth:o,innerHeight:u}=window;return{top:0,left:0,right:o,bottom:u,width:o,height:u}}const{top:e,left:t,right:s,bottom:a}=n.getBoundingClientRect();return{top:e,left:t,right:s,bottom:a,width:n.clientWidth,height:n.clientHeight}}function bw(n){return n.reduce((e,t)=>Th(e,fg(t)),ho)}function l7(n){return n.reduce((e,t)=>e+dw(t),0)}function c7(n){return n.reduce((e,t)=>e+pw(t),0)}function u7(n,e){if(e===void 0&&(e=Qh),!n)return;const{top:t,left:s,bottom:a,right:o}=e(n);fw(n)&&(a<=0||o<=0||t>=window.innerHeight||s>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const h7=[["x",["left","right"],l7],["y",["top","bottom"],c7]];class N2{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=$p(t),a=bw(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,u,c]of h7)for(const f of u)Object.defineProperty(this,f,{get:()=>{const d=c(s),p=a[o]-d;return this.rect[f]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $f{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var a;(a=this.target)==null||a.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function f7(n){const{EventTarget:e}=Wi(n);return n instanceof e?n:Zh(n)}function wm(n,e){const t=Math.abs(n.x),s=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var Ca;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Ca||(Ca={}));function Xv(n){n.preventDefault()}function d7(n){n.stopPropagation()}var In;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(In||(In={}));const vw={start:[In.Space,In.Enter],cancel:[In.Esc],end:[In.Space,In.Enter,In.Tab]},p7=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case In.Right:return{...t,x:t.x+25};case In.Left:return{...t,x:t.x-25};case In.Down:return{...t,y:t.y+25};case In.Up:return{...t,y:t.y-25}}};class A2{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new $f(Zh(t)),this.windowListeners=new $f(Wi(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ca.Resize,this.handleCancel),this.windowListeners.add(Ca.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ca.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&u7(s),t(ho)}handleKeyDown(e){if(S2(e)){const{active:t,context:s,options:a}=this.props,{keyboardCodes:o=vw,coordinateGetter:u=p7,scrollBehavior:c="smooth"}=a,{code:f}=e;if(o.end.includes(f)){this.handleEnd(e);return}if(o.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:d}=s.current,p=d?{x:d.left,y:d.top}:ho;this.referenceCoordinates||(this.referenceCoordinates=p);const y=u(e,{active:t,context:s.current,currentCoordinates:p});if(y){const _=ld(y,p),b={x:0,y:0},{scrollableAncestors:A}=s.current;for(const N of A){const k=e.code,{isTop:C,isRight:R,isLeft:D,isBottom:V,maxScroll:I,minScroll:Y}=gw(N),W=o7(N),O={x:Math.min(k===In.Right?W.right-W.width/2:W.right,Math.max(k===In.Right?W.left:W.left+W.width/2,y.x)),y:Math.min(k===In.Down?W.bottom-W.height/2:W.bottom,Math.max(k===In.Down?W.top:W.top+W.height/2,y.y))},B=k===In.Right&&!R||k===In.Left&&!D,K=k===In.Down&&!V||k===In.Up&&!C;if(B&&O.x!==y.x){const j=N.scrollLeft+_.x,F=k===In.Right&&j<=I.x||k===In.Left&&j>=Y.x;if(F&&!_.y){N.scrollTo({left:j,behavior:c});return}F?b.x=N.scrollLeft-j:b.x=k===In.Right?N.scrollLeft-I.x:N.scrollLeft-Y.x,b.x&&N.scrollBy({left:-b.x,behavior:c});break}else if(K&&O.y!==y.y){const j=N.scrollTop+_.y,F=k===In.Down&&j<=I.y||k===In.Up&&j>=Y.y;if(F&&!_.x){N.scrollTo({top:j,behavior:c});return}F?b.y=N.scrollTop-j:b.y=k===In.Down?N.scrollTop-I.y:N.scrollTop-Y.y,b.y&&N.scrollBy({top:-b.y,behavior:c});break}}this.handleMove(e,Th(ld(y,this.referenceCoordinates),b))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}A2.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:s=vw,onActivation:a}=e,{active:o}=t;const{code:u}=n.nativeEvent;if(s.start.includes(u)){const c=o.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),a?.({event:n.nativeEvent}),!0)}return!1}}];function Zv(n){return!!(n&&"distance"in n)}function Qv(n){return!!(n&&"delay"in n)}class T2{constructor(e,t,s){var a;s===void 0&&(s=f7(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:u}=o;this.props=e,this.events=t,this.document=Zh(u),this.documentListeners=new $f(this.document),this.listeners=new $f(s),this.windowListeners=new $f(Wi(u)),this.initialCoordinates=(a=hg(o))!=null?a:ho,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ca.Resize,this.handleCancel),this.windowListeners.add(Ca.DragStart,Xv),this.windowListeners.add(Ca.VisibilityChange,this.handleCancel),this.windowListeners.add(Ca.ContextMenu,Xv),this.documentListeners.add(Ca.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Qv(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(Zv(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:a}=this.props;a(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ca.Click,d7,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ca.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:u,options:{activationConstraint:c}}=o;if(!a)return;const f=(t=hg(e))!=null?t:ho,d=ld(a,f);if(!s&&c){if(Zv(c)){if(c.tolerance!=null&&wm(d,c.tolerance))return this.handleCancel();if(wm(d,c.distance))return this.handleStart()}if(Qv(c)&&wm(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}e.cancelable&&e.preventDefault(),u(f)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===In.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const m7={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class C2 extends T2{constructor(e){const{event:t}=e,s=Zh(t.target);super(e,m7,s)}}C2.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const g7={move:{name:"mousemove"},end:{name:"mouseup"}};var dg;(function(n){n[n.RightClick=2]="RightClick"})(dg||(dg={}));class b7 extends T2{constructor(e){super(e,g7,Zh(e.event.target))}}b7.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return t.button===dg.RightClick?!1:(s?.({event:t}),!0)}}];const _m={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class v7 extends T2{constructor(e){super(e,_m)}static setup(){return window.addEventListener(_m.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(_m.move.name,e)};function e(){}}}v7.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;const{touches:a}=t;return a.length>1?!1:(s?.({event:t}),!0)}}];var Xf;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Xf||(Xf={}));var xp;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(xp||(xp={}));function y7(n){let{acceleration:e,activator:t=Xf.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:u=5,order:c=xp.TreeOrder,pointerCoordinates:f,scrollableAncestors:d,scrollableAncestorRects:p,delta:y,threshold:_}=n;const b=w7({delta:y,disabled:!o}),[A,N]=Mk(),k=ne.useRef({x:0,y:0}),C=ne.useRef({x:0,y:0}),R=ne.useMemo(()=>{switch(t){case Xf.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case Xf.DraggableRect:return a}},[t,a,f]),D=ne.useRef(null),V=ne.useCallback(()=>{const Y=D.current;if(!Y)return;const W=k.current.x*C.current.x,O=k.current.y*C.current.y;Y.scrollBy(W,O)},[]),I=ne.useMemo(()=>c===xp.TreeOrder?[...d].reverse():d,[c,d]);ne.useEffect(()=>{if(!o||!d.length||!R){N();return}for(const Y of I){if(s?.(Y)===!1)continue;const W=d.indexOf(Y),O=p[W];if(!O)continue;const{direction:B,speed:K}=a7(Y,O,R,e,_);for(const j of["x","y"])b[j][B[j]]||(K[j]=0,B[j]=0);if(K.x>0||K.y>0){N(),D.current=Y,A(V,u),k.current=K,C.current=B;return}}k.current={x:0,y:0},C.current={x:0,y:0},N()},[e,V,s,N,o,u,JSON.stringify(R),JSON.stringify(b),A,d,I,p,JSON.stringify(_)])}const x7={x:{[Ps.Backward]:!1,[Ps.Forward]:!1},y:{[Ps.Backward]:!1,[Ps.Forward]:!1}};function w7(n){let{delta:e,disabled:t}=n;const s=ug(e);return Cd(a=>{if(t||!s||!a)return x7;const o={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Ps.Backward]:a.x[Ps.Backward]||o.x===-1,[Ps.Forward]:a.x[Ps.Forward]||o.x===1},y:{[Ps.Backward]:a.y[Ps.Backward]||o.y===-1,[Ps.Forward]:a.y[Ps.Forward]||o.y===1}}},[t,e,s])}function _7(n,e){const t=e!=null?n.get(e):void 0,s=t?t.node.current:null;return Cd(a=>{var o;return e==null?null:(o=s??a)!=null?o:null},[s,e])}function S7(n,e){return ne.useMemo(()=>n.reduce((t,s)=>{const{sensor:a}=s,o=a.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,s)}));return[...t,...o]},[]),[n,e])}var ud;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(ud||(ud={}));var pg;(function(n){n.Optimized="optimized"})(pg||(pg={}));const Kv=new Map;function N7(n,e){let{dragging:t,dependencies:s,config:a}=e;const[o,u]=ne.useState(null),{frequency:c,measure:f,strategy:d}=a,p=ne.useRef(n),y=k(),_=od(y),b=ne.useCallback(function(C){C===void 0&&(C=[]),!_.current&&u(R=>R===null?C:R.concat(C.filter(D=>!R.includes(D))))},[_]),A=ne.useRef(null),N=Cd(C=>{if(y&&!t)return Kv;if(!C||C===Kv||p.current!==n||o!=null){const R=new Map;for(let D of n){if(!D)continue;if(o&&o.length>0&&!o.includes(D.id)&&D.rect.current){R.set(D.id,D.rect.current);continue}const V=D.node.current,I=V?new N2(f(V),V):null;D.rect.current=I,I&&R.set(D.id,I)}return R}return C},[n,o,t,y,f]);return ne.useEffect(()=>{p.current=n},[n]),ne.useEffect(()=>{y||b()},[t,y]),ne.useEffect(()=>{o&&o.length>0&&u(null)},[JSON.stringify(o)]),ne.useEffect(()=>{y||typeof c!="number"||A.current!==null||(A.current=setTimeout(()=>{b(),A.current=null},c))},[c,y,b,...s]),{droppableRects:N,measureDroppableContainers:b,measuringScheduled:o!=null};function k(){switch(d){case ud.Always:return!1;case ud.BeforeDragging:return t;default:return!t}}}function yw(n,e){return Cd(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function A7(n,e){return yw(n,e)}function T7(n){let{callback:e,disabled:t}=n;const s=_2(e),a=ne.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,t]);return ne.useEffect(()=>()=>a?.disconnect(),[a]),a}function Xp(n){let{callback:e,disabled:t}=n;const s=_2(e),a=ne.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[t]);return ne.useEffect(()=>()=>a?.disconnect(),[a]),a}function C7(n){return new N2(Qh(n),n)}function Jv(n,e,t){e===void 0&&(e=C7);const[s,a]=ne.useState(null);function o(){a(f=>{if(!n)return null;if(n.isConnected===!1){var d;return(d=f??t)!=null?d:null}const p=e(n);return JSON.stringify(f)===JSON.stringify(p)?f:p})}const u=T7({callback(f){if(n)for(const d of f){const{type:p,target:y}=d;if(p==="childList"&&y instanceof HTMLElement&&y.contains(n)){o();break}}}}),c=Xp({callback:o});return Ho(()=>{o(),n?(c?.observe(n),u?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),u?.disconnect())},[n]),s}function k7(n){const e=yw(n);return hw(n,e)}const ey=[];function j7(n){const e=ne.useRef(n),t=Cd(s=>n?s&&s!==ey&&n&&e.current&&n.parentNode===e.current.parentNode?s:$p(n):ey,[n]);return ne.useEffect(()=>{e.current=n},[n]),t}function E7(n){const[e,t]=ne.useState(null),s=ne.useRef(n),a=ne.useCallback(o=>{const u=xm(o.target);u&&t(c=>c?(c.set(u,fg(u)),new Map(c)):null)},[]);return ne.useEffect(()=>{const o=s.current;if(n!==o){u(o);const c=n.map(f=>{const d=xm(f);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,fg(d)]):null}).filter(f=>f!=null);t(c.length?new Map(c):null),s.current=n}return()=>{u(n),u(o)};function u(c){c.forEach(f=>{const d=xm(f);d?.removeEventListener("scroll",a)})}},[a,n]),ne.useMemo(()=>n.length?e?Array.from(e.values()).reduce((o,u)=>Th(o,u),ho):bw(n):ho,[n,e])}function ty(n,e){e===void 0&&(e=[]);const t=ne.useRef(null);return ne.useEffect(()=>{t.current=null},e),ne.useEffect(()=>{const s=n!==ho;s&&!t.current&&(t.current=n),!s&&t.current&&(t.current=null)},[n]),t.current?ld(n,t.current):ho}function M7(n){ne.useEffect(()=>{if(!Yp)return;const e=n.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function L7(n,e){return ne.useMemo(()=>n.reduce((t,s)=>{let{eventName:a,handler:o}=s;return t[a]=u=>{o(u,e)},t},{}),[n,e])}function xw(n){return ne.useMemo(()=>n?n7(n):null,[n])}const ny=[];function O7(n,e){e===void 0&&(e=Qh);const[t]=n,s=xw(t?Wi(t):null),[a,o]=ne.useState(ny);function u(){o(()=>n.length?n.map(f=>mw(f)?s:new N2(e(f),f)):ny)}const c=Xp({callback:u});return Ho(()=>{c?.disconnect(),u(),n.forEach(f=>c?.observe(f))},[n]),a}function D7(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return Td(e)?e:n}function R7(n){let{measure:e}=n;const[t,s]=ne.useState(null),a=ne.useCallback(d=>{for(const{target:p}of d)if(Td(p)){s(y=>{const _=e(p);return y?{...y,width:_.width,height:_.height}:_});break}},[e]),o=Xp({callback:a}),u=ne.useCallback(d=>{const p=D7(d);o?.disconnect(),p&&o?.observe(p),s(p?e(p):null)},[e,o]),[c,f]=vp(u);return ne.useMemo(()=>({nodeRef:c,rect:t,setRef:f}),[t,c,f])}const I7=[{sensor:C2,options:{}},{sensor:A2,options:{}}],V7={current:{}},U1={draggable:{measure:$v},droppable:{measure:$v,strategy:ud.WhileDragging,frequency:pg.Optimized},dragOverlay:{measure:Qh}};class Zf extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const F7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Zf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:yp},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:U1,measureDroppableContainers:yp,windowRect:null,measuringScheduled:!1},B7={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:yp,draggableNodes:new Map,over:null,measureDroppableContainers:yp},Zp=ne.createContext(B7),ww=ne.createContext(F7);function P7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Zf}}}function z7(n,e){switch(e.type){case Es.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Es.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Es.DragEnd:case Es.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Es.RegisterDroppable:{const{element:t}=e,{id:s}=t,a=new Zf(n.droppable.containers);return a.set(s,t),{...n,droppable:{...n.droppable,containers:a}}}case Es.SetDroppableDisabled:{const{id:t,key:s,disabled:a}=e,o=n.droppable.containers.get(t);if(!o||s!==o.key)return n;const u=new Zf(n.droppable.containers);return u.set(t,{...o,disabled:a}),{...n,droppable:{...n.droppable,containers:u}}}case Es.UnregisterDroppable:{const{id:t,key:s}=e,a=n.droppable.containers.get(t);if(!a||s!==a.key)return n;const o=new Zf(n.droppable.containers);return o.delete(t),{...n,droppable:{...n.droppable,containers:o}}}default:return n}}function q7(n){let{disabled:e}=n;const{active:t,activatorEvent:s,draggableNodes:a}=ne.useContext(Zp),o=ug(s),u=ug(t?.id);return ne.useEffect(()=>{if(!e&&!s&&o&&u!=null){if(!S2(o)||document.activeElement===o.target)return;const c=a.get(u);if(!c)return;const{activatorNode:f,node:d}=c;if(!f.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[f.current,d.current]){if(!p)continue;const y=Dk(p);if(y){y.focus();break}}})}},[s,e,a,u,o]),null}function U7(n,e){let{transform:t,...s}=e;return n!=null&&n.length?n.reduce((a,o)=>o({transform:a,...s}),t):t}function H7(n){return ne.useMemo(()=>({draggable:{...U1.draggable,...n?.draggable},droppable:{...U1.droppable,...n?.droppable},dragOverlay:{...U1.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function G7(n){let{activeNode:e,measure:t,initialRect:s,config:a=!0}=n;const o=ne.useRef(!1),{x:u,y:c}=typeof a=="boolean"?{x:a,y:a}:a;Ho(()=>{if(!u&&!c||!e){o.current=!1;return}if(o.current||!s)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const p=t(d),y=hw(p,s);if(u||(y.x=0),c||(y.y=0),o.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const _=fw(d);_&&_.scrollBy({top:y.y,left:y.x})}},[e,u,c,s,t])}const _w=ne.createContext({...ho,scaleX:1,scaleY:1});var xc;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(xc||(xc={}));const W7=ne.memo(function(e){var t,s,a,o;let{id:u,accessibility:c,autoScroll:f=!0,children:d,sensors:p=I7,collisionDetection:y=Xk,measuring:_,modifiers:b,...A}=e;const N=ne.useReducer(z7,void 0,P7),[k,C]=N,[R,D]=Pk(),[V,I]=ne.useState(xc.Uninitialized),Y=V===xc.Initialized,{draggable:{active:W,nodes:O,translate:B},droppable:{containers:K}}=k,j=W!=null?O.get(W):null,F=ne.useRef({initial:null,translated:null}),te=ne.useMemo(()=>{var vt;return W!=null?{id:W,data:(vt=j?.data)!=null?vt:V7,rect:F}:null},[W,j]),H=ne.useRef(null),[ae,$]=ne.useState(null),[re,le]=ne.useState(null),pe=od(A,Object.values(A)),be=kd("DndDescribedBy",u),P=ne.useMemo(()=>K.getEnabled(),[K]),M=H7(_),{droppableRects:G,measureDroppableContainers:J,measuringScheduled:Q}=N7(P,{dragging:Y,dependencies:[B.x,B.y],config:M.droppable}),oe=_7(O,W),fe=ne.useMemo(()=>re?hg(re):null,[re]),de=mn(),xe=A7(oe,M.draggable.measure);G7({activeNode:W!=null?O.get(W):null,config:de.layoutShiftCompensation,initialRect:xe,measure:M.draggable.measure});const we=Jv(oe,M.draggable.measure,xe),Ve=Jv(oe?oe.parentElement:null),Xe=ne.useRef({activatorEvent:null,active:null,activeNode:oe,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Je=K.getNodeFor((t=Xe.current.over)==null?void 0:t.id),Fe=R7({measure:M.dragOverlay.measure}),z=(s=Fe.nodeRef.current)!=null?s:oe,ke=Y?(a=Fe.rect)!=null?a:we:null,ct=!!(Fe.nodeRef.current&&Fe.rect),Ue=k7(ct?null:we),Me=xw(z?Wi(z):null),it=j7(Y?Je??oe:null),Ye=O7(it),ut=U7(b,{transform:{x:B.x-Ue.x,y:B.y-Ue.y,scaleX:1,scaleY:1},activatorEvent:re,active:te,activeNodeRect:we,containerNodeRect:Ve,draggingNodeRect:ke,over:Xe.current.over,overlayNodeRect:Fe.rect,scrollableAncestors:it,scrollableAncestorRects:Ye,windowRect:Me}),at=fe?Th(fe,B):null,Pe=E7(it),nt=ty(Pe),tt=ty(Pe,[we]),ht=Th(ut,nt),yt=ke?Kk(ke,ut):null,dt=te&&yt?y({active:te,collisionRect:yt,droppableRects:G,droppableContainers:P,pointerCoordinates:at}):null,xt=uw(dt,"id"),[ft,un]=ne.useState(null),Yt=ct?ut:Th(ut,tt),Nt=Zk(Yt,(o=ft?.rect)!=null?o:null,we),St=ne.useRef(null),Tt=ne.useCallback((vt,_e)=>{let{sensor:rt,options:Ae}=_e;if(H.current==null)return;const st=O.get(H.current);if(!st)return;const pt=vt.nativeEvent,At=new rt({active:H.current,activeNode:st,event:pt,options:Ae,context:Xe,onAbort(Bt){if(!O.get(Bt))return;const{onDragAbort:vn}=pe.current,xn={id:Bt};vn?.(xn),R({type:"onDragAbort",event:xn})},onPending(Bt,bn,vn,xn){if(!O.get(Bt))return;const{onDragPending:hn}=pe.current,fn={id:Bt,constraint:bn,initialCoordinates:vn,offset:xn};hn?.(fn),R({type:"onDragPending",event:fn})},onStart(Bt){const bn=H.current;if(bn==null)return;const vn=O.get(bn);if(!vn)return;const{onDragStart:xn}=pe.current,Ut={activatorEvent:pt,active:{id:bn,data:vn.data,rect:F}};Cl.unstable_batchedUpdates(()=>{xn?.(Ut),I(xc.Initializing),C({type:Es.DragStart,initialCoordinates:Bt,active:bn}),R({type:"onDragStart",event:Ut}),$(St.current),le(pt)})},onMove(Bt){C({type:Es.DragMove,coordinates:Bt})},onEnd:ot(Es.DragEnd),onCancel:ot(Es.DragCancel)});St.current=At;function ot(Bt){return async function(){const{active:vn,collisions:xn,over:Ut,scrollAdjustedTranslate:hn}=Xe.current;let fn=null;if(vn&&hn){const{cancelDrop:Mn}=pe.current;fn={activatorEvent:pt,active:vn,collisions:xn,delta:hn,over:Ut},Bt===Es.DragEnd&&typeof Mn=="function"&&await Promise.resolve(Mn(fn))&&(Bt=Es.DragCancel)}H.current=null,Cl.unstable_batchedUpdates(()=>{C({type:Bt}),I(xc.Uninitialized),un(null),$(null),le(null),St.current=null;const Mn=Bt===Es.DragEnd?"onDragEnd":"onDragCancel";if(fn){const Vn=pe.current[Mn];Vn?.(fn),R({type:Mn,event:fn})}})}}},[O]),gt=ne.useCallback((vt,_e)=>(rt,Ae)=>{const st=rt.nativeEvent,pt=O.get(Ae);if(H.current!==null||!pt||st.dndKit||st.defaultPrevented)return;const At={active:pt};vt(rt,_e.options,At)===!0&&(st.dndKit={capturedBy:_e.sensor},H.current=Ae,Tt(rt,_e))},[O,Tt]),Qt=S7(p,gt);M7(p),Ho(()=>{we&&V===xc.Initializing&&I(xc.Initialized)},[we,V]),ne.useEffect(()=>{const{onDragMove:vt}=pe.current,{active:_e,activatorEvent:rt,collisions:Ae,over:st}=Xe.current;if(!_e||!rt)return;const pt={active:_e,activatorEvent:rt,collisions:Ae,delta:{x:ht.x,y:ht.y},over:st};Cl.unstable_batchedUpdates(()=>{vt?.(pt),R({type:"onDragMove",event:pt})})},[ht.x,ht.y]),ne.useEffect(()=>{const{active:vt,activatorEvent:_e,collisions:rt,droppableContainers:Ae,scrollAdjustedTranslate:st}=Xe.current;if(!vt||H.current==null||!_e||!st)return;const{onDragOver:pt}=pe.current,At=Ae.get(xt),ot=At&&At.rect.current?{id:At.id,rect:At.rect.current,data:At.data,disabled:At.disabled}:null,Bt={active:vt,activatorEvent:_e,collisions:rt,delta:{x:st.x,y:st.y},over:ot};Cl.unstable_batchedUpdates(()=>{un(ot),pt?.(Bt),R({type:"onDragOver",event:Bt})})},[xt]),Ho(()=>{Xe.current={activatorEvent:re,active:te,activeNode:oe,collisionRect:yt,collisions:dt,droppableRects:G,draggableNodes:O,draggingNode:z,draggingNodeRect:ke,droppableContainers:K,over:ft,scrollableAncestors:it,scrollAdjustedTranslate:ht},F.current={initial:ke,translated:yt}},[te,oe,dt,yt,O,z,ke,G,K,ft,it,ht]),y7({...de,delta:B,draggingRect:yt,pointerCoordinates:at,scrollableAncestors:it,scrollableAncestorRects:Ye});const Lt=ne.useMemo(()=>({active:te,activeNode:oe,activeNodeRect:we,activatorEvent:re,collisions:dt,containerNodeRect:Ve,dragOverlay:Fe,draggableNodes:O,droppableContainers:K,droppableRects:G,over:ft,measureDroppableContainers:J,scrollableAncestors:it,scrollableAncestorRects:Ye,measuringConfiguration:M,measuringScheduled:Q,windowRect:Me}),[te,oe,we,re,dt,Ve,Fe,O,K,G,ft,J,it,Ye,M,Q,Me]),Rt=ne.useMemo(()=>({activatorEvent:re,activators:Qt,active:te,activeNodeRect:we,ariaDescribedById:{draggable:be},dispatch:C,draggableNodes:O,over:ft,measureDroppableContainers:J}),[re,Qt,te,we,C,be,O,ft,J]);return Zn.createElement(ow.Provider,{value:D},Zn.createElement(Zp.Provider,{value:Rt},Zn.createElement(ww.Provider,{value:Lt},Zn.createElement(_w.Provider,{value:Nt},d)),Zn.createElement(q7,{disabled:c?.restoreFocus===!1})),Zn.createElement(Uk,{...c,hiddenTextDescribedById:be}));function mn(){const vt=ae?.autoScrollEnabled===!1,_e=typeof f=="object"?f.enabled===!1:f===!1,rt=Y&&!vt&&!_e;return typeof f=="object"?{...f,enabled:rt}:{enabled:rt}}}),Y7=ne.createContext(null),ry="button",$7="Draggable";function X7(n){let{id:e,data:t,disabled:s=!1,attributes:a}=n;const o=kd($7),{activators:u,activatorEvent:c,active:f,activeNodeRect:d,ariaDescribedById:p,draggableNodes:y,over:_}=ne.useContext(Zp),{role:b=ry,roleDescription:A="draggable",tabIndex:N=0}=a??{},k=f?.id===e,C=ne.useContext(k?_w:Y7),[R,D]=vp(),[V,I]=vp(),Y=L7(u,e),W=od(t);Ho(()=>(y.set(e,{id:e,key:o,node:R,activatorNode:V,data:W}),()=>{const B=y.get(e);B&&B.key===o&&y.delete(e)}),[y,e]);const O=ne.useMemo(()=>({role:b,tabIndex:N,"aria-disabled":s,"aria-pressed":k&&b===ry?!0:void 0,"aria-roledescription":A,"aria-describedby":p.draggable}),[s,b,N,k,A,p.draggable]);return{active:f,activatorEvent:c,activeNodeRect:d,attributes:O,isDragging:k,listeners:s?void 0:Y,node:R,over:_,setNodeRef:D,setActivatorNodeRef:I,transform:C}}function Z7(){return ne.useContext(ww)}const Q7="Droppable",K7={timeout:25};function J7(n){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:a}=n;const o=kd(Q7),{active:u,dispatch:c,over:f,measureDroppableContainers:d}=ne.useContext(Zp),p=ne.useRef({disabled:t}),y=ne.useRef(!1),_=ne.useRef(null),b=ne.useRef(null),{disabled:A,updateMeasurementsFor:N,timeout:k}={...K7,...a},C=od(N??s),R=ne.useCallback(()=>{if(!y.current){y.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{d(Array.isArray(C.current)?C.current:[C.current]),b.current=null},k)},[k]),D=Xp({callback:R,disabled:A||!u}),V=ne.useCallback((O,B)=>{D&&(B&&(D.unobserve(B),y.current=!1),O&&D.observe(O))},[D]),[I,Y]=vp(V),W=od(e);return ne.useEffect(()=>{!D||!I.current||(D.disconnect(),y.current=!1,D.observe(I.current))},[I,D]),ne.useEffect(()=>(c({type:Es.RegisterDroppable,element:{id:s,key:o,disabled:t,node:I,rect:_,data:W}}),()=>c({type:Es.UnregisterDroppable,key:o,id:s})),[s]),ne.useEffect(()=>{t!==p.current.disabled&&(c({type:Es.SetDroppableDisabled,id:s,key:o,disabled:t}),p.current.disabled=t)},[s,o,t,c]),{active:u,rect:_,isOver:f?.id===s,node:I,over:f,setNodeRef:Y}}function k2(n,e,t){const s=n.slice();return s.splice(t<0?s.length+t:t,0,s.splice(e,1)[0]),s}function ej(n,e){return n.reduce((t,s,a)=>{const o=e.get(s);return o&&(t[a]=o),t},Array(n.length))}function k1(n){return n!==null&&n>=0}function tj(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function nj(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const j1={scaleX:1,scaleY:1},rj=n=>{var e;let{rects:t,activeNodeRect:s,activeIndex:a,overIndex:o,index:u}=n;const c=(e=t[a])!=null?e:s;if(!c)return null;const f=sj(t,u,a);if(u===a){const d=t[o];return d?{x:a<o?d.left+d.width-(c.left+c.width):d.left-c.left,y:0,...j1}:null}return u>a&&u<=o?{x:-c.width-f,y:0,...j1}:u<a&&u>=o?{x:c.width+f,y:0,...j1}:{x:0,y:0,...j1}};function sj(n,e,t){const s=n[e],a=n[e-1],o=n[e+1];return!s||!a&&!o?0:t<e?a?s.left-(a.left+a.width):o.left-(s.left+s.width):o?o.left-(s.left+s.width):s.left-(a.left+a.width)}const Sw=n=>{let{rects:e,activeIndex:t,overIndex:s,index:a}=n;const o=k2(e,s,t),u=e[a],c=o[a];return!c||!u?null:{x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height}},Nw="Sortable",Aw=Zn.createContext({activeIndex:-1,containerId:Nw,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Sw,disabled:{draggable:!1,droppable:!1}});function ij(n){let{children:e,id:t,items:s,strategy:a=Sw,disabled:o=!1}=n;const{active:u,dragOverlay:c,droppableRects:f,over:d,measureDroppableContainers:p}=Z7(),y=kd(Nw,t),_=c.rect!==null,b=ne.useMemo(()=>s.map(Y=>typeof Y=="object"&&"id"in Y?Y.id:Y),[s]),A=u!=null,N=u?b.indexOf(u.id):-1,k=d?b.indexOf(d.id):-1,C=ne.useRef(b),R=!tj(b,C.current),D=k!==-1&&N===-1||R,V=nj(o);Ho(()=>{R&&A&&p(b)},[R,b,A,p]),ne.useEffect(()=>{C.current=b},[b]);const I=ne.useMemo(()=>({activeIndex:N,containerId:y,disabled:V,disableTransforms:D,items:b,overIndex:k,useDragOverlay:_,sortedRects:ej(b,f),strategy:a}),[N,y,V.draggable,V.droppable,D,b,k,f,_,a]);return Zn.createElement(Aw.Provider,{value:I},e)}const aj=n=>{let{id:e,items:t,activeIndex:s,overIndex:a}=n;return k2(t,s,a).indexOf(e)},oj=n=>{let{containerId:e,isSorting:t,wasDragging:s,index:a,items:o,newIndex:u,previousItems:c,previousContainerId:f,transition:d}=n;return!d||!s||c!==o&&a===u?!1:t?!0:u!==a&&e===f},lj={duration:200,easing:"ease"},Tw="transform",cj=cd.Transition.toString({property:Tw,duration:0,easing:"linear"}),uj={roleDescription:"sortable"};function hj(n){let{disabled:e,index:t,node:s,rect:a}=n;const[o,u]=ne.useState(null),c=ne.useRef(t);return Ho(()=>{if(!e&&t!==c.current&&s.current){const f=a.current;if(f){const d=Qh(s.current,{ignoreTransform:!0}),p={x:f.left-d.left,y:f.top-d.top,scaleX:f.width/d.width,scaleY:f.height/d.height};(p.x||p.y)&&u(p)}}t!==c.current&&(c.current=t)},[e,t,s,a]),ne.useEffect(()=>{o&&u(null)},[o]),o}function fj(n){let{animateLayoutChanges:e=oj,attributes:t,disabled:s,data:a,getNewIndex:o=aj,id:u,strategy:c,resizeObserverConfig:f,transition:d=lj}=n;const{items:p,containerId:y,activeIndex:_,disabled:b,disableTransforms:A,sortedRects:N,overIndex:k,useDragOverlay:C,strategy:R}=ne.useContext(Aw),D=dj(s,b),V=p.indexOf(u),I=ne.useMemo(()=>({sortable:{containerId:y,index:V,items:p},...a}),[y,a,V,p]),Y=ne.useMemo(()=>p.slice(p.indexOf(u)),[p,u]),{rect:W,node:O,isOver:B,setNodeRef:K}=J7({id:u,data:I,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:Y,...f}}),{active:j,activatorEvent:F,activeNodeRect:te,attributes:H,setNodeRef:ae,listeners:$,isDragging:re,over:le,setActivatorNodeRef:pe,transform:be}=X7({id:u,data:I,attributes:{...uj,...t},disabled:D.draggable}),P=Ek(K,ae),M=!!j,G=M&&!A&&k1(_)&&k1(k),J=!C&&re,Q=J&&G?be:null,fe=G?Q??(c??R)({rects:N,activeNodeRect:te,activeIndex:_,overIndex:k,index:V}):null,de=k1(_)&&k1(k)?o({id:u,items:p,activeIndex:_,overIndex:k}):V,xe=j?.id,we=ne.useRef({activeId:xe,items:p,newIndex:de,containerId:y}),Ve=p!==we.current.items,Xe=e({active:j,containerId:y,isDragging:re,isSorting:M,id:u,index:V,items:p,newIndex:we.current.newIndex,previousItems:we.current.items,previousContainerId:we.current.containerId,transition:d,wasDragging:we.current.activeId!=null}),Je=hj({disabled:!Xe,index:V,node:O,rect:W});return ne.useEffect(()=>{M&&we.current.newIndex!==de&&(we.current.newIndex=de),y!==we.current.containerId&&(we.current.containerId=y),p!==we.current.items&&(we.current.items=p)},[M,de,y,p]),ne.useEffect(()=>{if(xe===we.current.activeId)return;if(xe!=null&&we.current.activeId==null){we.current.activeId=xe;return}const z=setTimeout(()=>{we.current.activeId=xe},50);return()=>clearTimeout(z)},[xe]),{active:j,activeIndex:_,attributes:H,data:I,rect:W,index:V,newIndex:de,items:p,isOver:B,isSorting:M,isDragging:re,listeners:$,node:O,overIndex:k,over:le,setNodeRef:P,setActivatorNodeRef:pe,setDroppableNodeRef:K,setDraggableNodeRef:ae,transform:Je??fe,transition:Fe()};function Fe(){if(Je||Ve&&we.current.newIndex===V)return cj;if(!(J&&!S2(F)||!d)&&(M||Xe))return cd.Transition.toString({...d,property:Tw})}}function dj(n,e){var t,s;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(s=n?.droppable)!=null?s:e.droppable}}function wp(n){if(!n)return!1;const e=n.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const pj=[In.Down,In.Right,In.Up,In.Left],mj=(n,e)=>{let{context:{active:t,collisionRect:s,droppableRects:a,droppableContainers:o,over:u,scrollableAncestors:c}}=e;if(pj.includes(n.code)){if(n.preventDefault(),!t||!s)return;const f=[];o.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const _=a.get(y.id);if(_)switch(n.code){case In.Down:s.top<_.top&&f.push(y);break;case In.Up:s.top>_.top&&f.push(y);break;case In.Left:s.left>_.left&&f.push(y);break;case In.Right:s.left<_.left&&f.push(y);break}});const d=Yk({collisionRect:s,droppableRects:a,droppableContainers:f});let p=uw(d,"id");if(p===u?.id&&d.length>1&&(p=d[1].id),p!=null){const y=o.get(t.id),_=o.get(p),b=_?a.get(_.id):null,A=_?.node.current;if(A&&b&&y&&_){const k=$p(A).some((Y,W)=>c[W]!==Y),C=Cw(y,_),R=gj(y,_),D=k||!C?{x:0,y:0}:{x:R?s.width-b.width:0,y:R?s.height-b.height:0},V={x:b.left,y:b.top};return D.x&&D.y?V:ld(V,D)}}}};function Cw(n,e){return!wp(n)||!wp(e)?!1:n.data.current.sortable.containerId===e.data.current.sortable.containerId}function gj(n,e){return!wp(n)||!wp(e)||!Cw(n,e)?!1:n.data.current.sortable.index<e.data.current.sortable.index}const bj={intro:{bg:"bg-purple-500/10",headers:"bg-purple-500/30 text-purple-100",border:"border-purple-500/30",accent:"bg-purple-500"},verse:{bg:"bg-blue-500/10",headers:"bg-blue-500/30 text-blue-100",border:"border-blue-500/30",accent:"bg-blue-500"},"pre-chorus":{bg:"bg-cyan-500/10",headers:"bg-cyan-500/30 text-cyan-100",border:"border-cyan-500/30",accent:"bg-cyan-500"},chorus:{bg:"bg-amber-500/10",headers:"bg-amber-500/30 text-amber-100",border:"border-amber-500/30",accent:"bg-amber-500"},bridge:{bg:"bg-emerald-500/10",headers:"bg-emerald-500/30 text-emerald-100",border:"border-emerald-500/30",accent:"bg-emerald-500"},interlude:{bg:"bg-teal-500/10",headers:"bg-teal-500/30 text-teal-100",border:"border-teal-500/30",accent:"bg-teal-500"},solo:{bg:"bg-orange-500/10",headers:"bg-orange-500/30 text-orange-100",border:"border-orange-500/30",accent:"bg-orange-500"},breakdown:{bg:"bg-red-500/10",headers:"bg-red-500/30 text-red-100",border:"border-red-500/30",accent:"bg-red-500"},tag:{bg:"bg-pink-500/10",headers:"bg-pink-500/30 text-pink-100",border:"border-pink-500/30",accent:"bg-pink-500"},hook:{bg:"bg-yellow-500/10",headers:"bg-yellow-500/30 text-yellow-100",border:"border-yellow-500/30",accent:"bg-yellow-500"},outro:{bg:"bg-rose-500/10",headers:"bg-rose-500/30 text-rose-100",border:"border-rose-500/30",accent:"bg-rose-500"}},vj=60,sy=.35,yj={bg:"bg-slate-500/10",headers:"bg-slate-500/30 text-slate-100",border:"border-slate-500/30",accent:"bg-slate-500"},xj=({section:n,allSections:e,onSelectBeat:t,onBeatTap:s,isActive:a,playingSlotId:o,selectedBeatId:u,chordColors:c,measureWidth:f,isCompact:d})=>{const{attributes:p,listeners:y,setNodeRef:_,transform:b,transition:A,isDragging:N}=fj({id:n.id}),k={transform:cd.Transform.toString(b),transition:A},C=bj[n.type]||yj,R=n.measures,D=Yf(n,e),I=Math.max(d?40:100,R.length*f),Y=d?60:140;return d?v.jsxs("div",{ref:_,"data-section-id":n.id,style:{...k,width:I,height:Y},className:qt("relative flex flex-col rounded-lg overflow-hidden shrink-0 transition-all border cursor-pointer",C.bg,C.border,N?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-70 hover:scale-[1.02]",a?"ring-2 ring-white/30":""),onClick:()=>t(n.id,n.measures[0]?.beats[0]?.id),...p,...y,children:[v.jsx("div",{className:qt("h-1.5 w-full",C.accent)}),v.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-1 py-1",children:[v.jsx("span",{className:"font-bold uppercase tracking-wide text-center leading-tight text-sm",children:n.type.charAt(0).toUpperCase()}),v.jsxs("span",{className:"text-[8px] font-mono text-white/40 mt-0.5",children:[R.length,"b"]})]})]}):v.jsxs("div",{ref:_,"data-section-id":n.id,style:{...k,width:I,height:Y},className:qt("relative flex flex-col pt-8 pb-2 rounded-xl overflow-hidden shrink-0 transition-all border group",C.bg,C.border,N?"opacity-50 z-50 ring-2 ring-accent-primary":"hover:border-opacity-50",a?"ring-2 ring-white/20":""),children:[v.jsxs("div",{className:qt("absolute top-0 left-0 right-0 h-8 flex items-center justify-between px-3 select-none border-b border-white/5",C.headers,"cursor-grab active:cursor-grabbing"),...p,...y,children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(B3,{size:14,className:"opacity-50"}),v.jsx("span",{className:"font-bold text-xs uppercase tracking-wider truncate max-w-[100px]",children:D})]}),f>=70&&v.jsx("div",{className:"flex items-center gap-2 text-[10px] font-mono opacity-80",children:v.jsxs("span",{children:[R.length," bars"]})})]}),v.jsx("div",{className:"flex-1 flex px-2 pt-2 gap-1 overflow-hidden",children:R.map((W,O)=>v.jsxs("div",{className:"flex-1 min-w-[32px] h-full flex flex-col gap-1",children:[v.jsxs("div",{className:"h-4 flex items-end justify-between px-0.5 border-b border-white/10 pb-0.5",children:[v.jsx("span",{className:"text-[9px] font-mono text-white/30",children:O+1}),v.jsx("div",{className:"flex gap-0.5",children:W.beats.map((B,K)=>v.jsx("div",{className:"w-0.5 h-1.5 bg-white/20 rounded-full"},K))})]}),(()=>{const B=W.beats.filter(j=>j.chord),K=B.length;return K===0?v.jsx("div",{className:"flex-1 rounded-sm bg-white/5 border border-dashed border-white/10 flex items-center justify-center",children:v.jsx("span",{className:"text-[10px] text-white/10",children:"-"})}):v.jsx("div",{className:"flex gap-0.5 flex-1 items-stretch",children:B.map(j=>{const F=c[j.chord.root]||"#666",te=K<=2?"10px":K<=4?"8px":"7px",H=K<=2?"0 4px":"0 2px",ae=u===j.id,$=o===j.id;return v.jsx("div",{onClick:re=>{re.stopPropagation(),s(n.id,j.id,j.chord)},className:qt("flex-1 min-w-0 rounded-sm flex items-center justify-center font-bold shadow-sm truncate transition-all cursor-pointer",$?"ring-2 ring-green-500 shadow-[0_0_12px_rgba(34,197,94,0.6)] scale-110 z-10":ae?"ring-2 ring-accent-primary shadow-[0_0_12px_rgba(99,102,241,0.5)] scale-105 z-10":"hover:ring-1 hover:ring-white/30 hover:scale-105"),style:{backgroundColor:$?"rgba(34, 197, 94, 0.15)":ae?"rgba(99, 102, 241, 0.15)":"rgba(0, 0, 0, 0.3)",border:`2px solid ${$?"#22c55e":ae?"#6366f1":F}`,color:$?"#4ade80":ae?"#a5b4fc":F,fontSize:te,padding:H,minHeight:"24px"},title:ae?`Tap again to go to ${j.chord.symbol}`:`Tap to select ${j.chord.symbol}`,children:or(j.chord.symbol)},j.id)})})})()]},W.id))}),v.jsx("div",{className:"absolute inset-0 top-8 bg-black/0 hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 hover:opacity-100 pointer-events-none",children:v.jsx("span",{className:"text-[10px] uppercase font-bold tracking-widest text-white/80 bg-black/50 px-2 py-1 rounded backdrop-blur-sm",children:"Go to Section"})})]})},wj=({displayChord:n,chordColors:e,isPlaying:t,selectedMapBeatId:s})=>{const{isMobile:a,isLandscape:o}=$h();if(!n)return null;const u=e[n.root]||"#6366f1";return a&&o?v.jsx("div",{className:"absolute top-2 right-2 z-20",onClick:c=>c.stopPropagation(),children:v.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg backdrop-blur-md cursor-pointer group",style:{background:"rgba(17,17,22,0.95)",border:`1.5px solid ${u}`,boxShadow:`0 2px 12px ${u}40`},onClick:()=>{n.notes&&Ur(n.notes)},children:[v.jsx("span",{className:"text-sm font-bold",style:{color:u},children:or(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)}),n.numeral&&v.jsx("span",{className:"text-[10px] font-serif italic text-white/40",children:or(n.numeral)}),t&&s&&v.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-ping"})]})}):a?v.jsx("div",{className:"shrink-0 px-3 py-2",style:{background:"linear-gradient(180deg, rgba(26,26,36,0.98) 0%, rgba(17,17,22,0.98) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},onClick:c=>c.stopPropagation(),children:v.jsxs("div",{className:"flex items-center justify-center gap-3 max-w-sm mx-auto",children:[v.jsxs("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&Ur(n.notes)},children:[v.jsx("div",{className:"relative px-3 py-1.5 rounded-lg transition-all group-hover:scale-105 group-active:scale-95",style:{background:`linear-gradient(135deg, ${u}15, ${u}05)`,border:`1.5px solid ${u}`,boxShadow:`0 0 12px ${u}30`},children:v.jsx("span",{className:"text-base font-bold",style:{color:u},children:or(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)})}),n.numeral&&v.jsx("span",{className:"text-[10px] font-serif italic text-white/40 mt-1",children:or(n.numeral)}),t&&s&&v.jsxs("span",{className:"text-[8px] text-green-400 mt-0.5 animate-pulse flex items-center gap-1",children:[v.jsx("span",{className:"w-1 h-1 rounded-full bg-green-400 animate-ping"}),"Playing"]})]}),v.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),v.jsx("div",{className:"flex-shrink-0 overflow-hidden",style:{width:"140px",transform:"scale(0.85)",transformOrigin:"center"},children:v.jsx(og,{highlightedNotes:n.notes||[],rootNote:n.root,color:u,octave:4})}),v.jsx("div",{className:"w-px h-10 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),v.jsx("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&Ur(n.notes)},children:v.jsx("div",{className:"transform scale-50 origin-top group-hover:scale-55 transition-transform",style:{marginTop:"-8px",marginBottom:"-50px"},children:v.jsx(lg,{root:n.root,quality:n.quality,color:u})})})]})}):v.jsx("div",{className:"shrink-0 px-4 py-3",style:{background:"linear-gradient(180deg, rgba(26,26,36,0.98) 0%, rgba(17,17,22,0.98) 100%)",borderTop:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 -4px 20px rgba(0,0,0,0.3)"},onClick:c=>c.stopPropagation(),children:v.jsxs("div",{className:"flex items-center justify-center gap-6 max-w-xl mx-auto",children:[v.jsxs("div",{className:"flex flex-col items-center cursor-pointer group",onClick:()=>{n.notes&&Ur(n.notes)},children:[v.jsx("div",{className:"relative px-4 py-2 rounded-xl transition-all group-hover:scale-105 group-active:scale-95",style:{background:`linear-gradient(135deg, ${u}15, ${u}05)`,border:`2px solid ${u}`,boxShadow:`0 0 20px ${u}30`},children:v.jsx("span",{className:"text-xl font-bold",style:{color:u},children:or(n.symbol||`${n.root}${n.quality==="maj"?"":n.quality}`)})}),n.numeral&&v.jsx("span",{className:"text-xs font-serif italic text-white/40 mt-1.5",children:or(n.numeral)}),t&&s&&v.jsxs("span",{className:"text-[9px] text-green-400 mt-1 animate-pulse flex items-center gap-1",children:[v.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 animate-ping"}),"Now Playing"]})]}),v.jsx("div",{className:"w-px h-16 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),v.jsx("div",{className:"flex-shrink-0",style:{width:"200px"},children:v.jsx(og,{highlightedNotes:n.notes||[],rootNote:n.root,color:u,octave:4})}),v.jsx("div",{className:"w-px h-16 bg-gradient-to-b from-transparent via-white/10 to-transparent"}),v.jsx("div",{className:"flex flex-col items-center cursor-pointer group shrink-0",onClick:()=>{n.notes&&Ur(n.notes)},children:v.jsx("div",{className:"transform scale-75 origin-top group-hover:scale-80 transition-transform",style:{marginTop:"-8px",marginBottom:"-20px"},children:v.jsx(lg,{root:n.root,quality:n.quality,color:u})})})]})})},_j=()=>{const{currentSong:n,songMapVisible:e,toggleSongMap:t,toggleSongInfoModal:s,setSelectedSlot:a,reorderSections:o,isPlaying:u,tempo:c,setTempo:f,playingSectionId:d}=nn(),[p,y]=ne.useState(!1),[_,b]=ne.useState(c.toString()),A=ne.useRef(null),[N,k]=ne.useState(!1),C=ne.useRef(null),R=ne.useRef(c),D=ne.useRef(null),V=()=>{b(c.toString()),y(!0),setTimeout(()=>A.current?.focus(),0)},I=()=>{const Fe=parseInt(_,10);!isNaN(Fe)&&Fe>=40&&Fe<=240?f(Fe):b(c.toString()),y(!1)},Y=Fe=>{Fe.key==="Enter"?I():Fe.key==="Escape"&&(b(c.toString()),y(!1))},W=Fe=>{C.current=Fe.touches[0].clientX,R.current=c,k(!1),D.current=setTimeout(()=>{D.current=null},150)},O=Fe=>{if(C.current===null)return;const ke=Fe.touches[0].clientX-C.current;if(Math.abs(ke)>10){k(!0),D.current&&(clearTimeout(D.current),D.current=null);const ct=Math.round(ke/3),Ue=Math.min(240,Math.max(40,R.current+ct));f(Ue)}},B=()=>{!N&&D.current&&(clearTimeout(D.current),V()),C.current=null,k(!1),D.current=null},[K,j]=ne.useState(1),F=ne.useRef(null),[te,H]=ne.useState(null),[ae,$]=ne.useState(null),[re,le]=ne.useState(null),[pe,be]=ne.useState(null);ne.useEffect(()=>{if(!u)return;const Fe=()=>{const{playingSectionId:ke,playingSlotId:ct}=nn.getState();if(ke&&ct){const Ue=n.sections.find(Me=>Me.id===ke);if(Ue)for(const Me of Ue.measures){const it=Me.beats.find(Ye=>Ye.id===ct);if(it?.chord){be(it.chord),H(it.chord),$(ct),le(ke);return}}}};Fe();const z=setInterval(Fe,100);return()=>clearInterval(z)},[u,n.sections]),ne.useEffect(()=>{!u&&te&&be(te)},[u,te]);const P=dd(),M=n.sections.reduce((Fe,z)=>Fe+z.measures.length,0),J=n.sections.reduce((Fe,z)=>{const ct=(z.timeSignature||n.timeSignature)[0];return Fe+z.measures.length*ct},0)/c*60,Q=Math.floor(J/60),oe=Math.floor(J%60),fe=`${Q}:${oe.toString().padStart(2,"0")}`,de=vj*K,xe=Fe=>{j(Number(Fe.target.value))},we=Hk(Gv(C2,{activationConstraint:{distance:8}}),Gv(A2,{coordinateGetter:mj})),Ve=Fe=>{const{active:z,over:ke}=Fe;if(ke&&z.id!==ke.id){const ct=n.sections.findIndex(Me=>Me.id===z.id),Ue=n.sections.findIndex(Me=>Me.id===ke.id);o(k2(n.sections,ct,Ue))}};if(ne.useEffect(()=>{const Fe=z=>{z.key==="Escape"&&t(!1)};return e&&window.addEventListener("keydown",Fe),()=>window.removeEventListener("keydown",Fe)},[e,t]),ne.useEffect(()=>{if(!e||!u||!d||!F.current)return;const Fe=F.current.querySelector(`[data-section-id="${d}"]`);Fe&&Fe.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[e,u,d]),!e)return null;const Xe=async()=>{const{unlockAudioForIOS:Fe,playSong:z,pauseSong:ke}=await Ah(async()=>{const{unlockAudioForIOS:ct,playSong:Ue,pauseSong:Me}=await Promise.resolve().then(()=>rg);return{unlockAudioForIOS:ct,playSong:Ue,pauseSong:Me}},void 0);u?(ke(),nn.getState().setIsPlaying(!1)):(await Fe(),await z(),nn.getState().setIsPlaying(!0))},Je=async Fe=>{const{skipToSection:z}=await Ah(async()=>{const{skipToSection:ke}=await Promise.resolve().then(()=>rg);return{skipToSection:ke}},void 0);z(Fe)};return e?v.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col bg-[#111116] animate-in fade-in duration-200",onClick:()=>t(!1),children:[v.jsxs("div",{className:"shrink-0 relative z-20",style:{paddingTop:"max(16px, env(safe-area-inset-top))"},onClick:Fe=>Fe.stopPropagation(),children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/60 to-transparent pointer-events-none"}),v.jsxs("div",{className:"relative flex items-center justify-between px-4 py-3 mt-2",children:[v.jsx("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity",onClick:Fe=>{Fe.stopPropagation(),s(!0)},children:v.jsxs("div",{children:[v.jsx("h2",{className:"font-bold text-white text-base leading-tight",children:n.title}),n.artist&&n.artist.trim()&&v.jsxs("p",{className:"text-white/40 text-[11px] italic",children:["by ",n.artist]})]})}),v.jsx("button",{onClick:()=>t(!1),className:"w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 active:bg-white/20 flex items-center justify-center text-white/70 transition-colors",children:v.jsx(bu,{size:16})})]}),v.jsxs("div",{className:"flex items-center gap-4 px-4 pb-4 text-[10px] font-medium text-white/40 overflow-x-auto no-scrollbar",children:[v.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[v.jsx("span",{className:"text-accent-primary",children:n.sections.length}),v.jsx("span",{children:"Sections"})]}),v.jsx("div",{className:"w-px h-2 bg-white/10 shrink-0"}),v.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[v.jsx("span",{className:"text-accent-primary",children:M}),v.jsx("span",{children:"Bars"})]}),v.jsx("div",{className:"w-px h-2 bg-white/10 shrink-0"}),v.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[v.jsx("span",{className:"text-accent-primary",children:fe}),v.jsx("span",{children:"Duration"})]})]})]}),v.jsxs("div",{ref:F,className:"flex-1 overflow-x-auto overflow-y-hidden flex items-center relative scrollbar-hide bg-[#0b0b0f]",onClick:Fe=>Fe.stopPropagation(),children:[v.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"20px 20px"}}),v.jsx("div",{className:qt("flex relative h-full items-center px-4 transition-all min-w-full",K<sy?"gap-2":"gap-4"),style:{paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:v.jsx(W7,{sensors:we,collisionDetection:Wk,onDragEnd:Ve,children:v.jsx(ij,{items:n.sections.map(Fe=>Fe.id),strategy:rj,children:n.sections.map(Fe=>v.jsx(xj,{section:Fe,allSections:n.sections,onSelectBeat:(z,ke)=>{ke&&a(z,ke),H(null),$(null),le(null),t(!1)},onBeatTap:(z,ke,ct)=>{ae===ke&&re===z?(ke&&a(z,ke),H(null),$(null),le(null),t(!1)):(H(ct),$(ke),le(z),be(ct),ct?.notes&&Ur(ct.notes))},isActive:u&&n.sections.findIndex(z=>z.id===Fe.id)===n.sections.findIndex(z=>z.id===d),playingSlotId:nn.getState().isPlaying?nn.getState().playingSlotId:null,selectedBeatId:ae,chordColors:P,measureWidth:de,isCompact:K<sy},Fe.id))})})})]}),v.jsx(wj,{displayChord:pe,chordColors:P,isPlaying:u,selectedMapBeatId:ae}),v.jsxs("div",{className:"shrink-0 bg-[#1a1a24] border-t border-white/5 z-[110]",style:{paddingBottom:"env(safe-area-inset-bottom)"},onClick:Fe=>Fe.stopPropagation(),children:[v.jsx("div",{className:"flex items-center justify-between px-4 py-2 border-b border-white/5",children:v.jsxs("div",{className:"flex items-center gap-3 w-full",children:[v.jsx(fk,{size:14,className:"text-text-secondary"}),v.jsx("input",{type:"range",min:"0.15",max:"2",step:"0.05",value:K,onChange:xe,className:"flex-1 h-1 bg-white/10 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:shadow-lg"}),v.jsx(uk,{size:14,className:"text-text-secondary"})]})}),v.jsxs("div",{className:"flex items-center justify-center gap-8 px-6 py-4",children:[v.jsxs("div",{className:"flex flex-col items-center gap-1",children:[v.jsx("span",{className:"text-[10px] uppercase tracking-wider text-white/30 font-bold",children:"BPM"}),p?v.jsx("input",{ref:A,type:"number",inputMode:"numeric",value:_,onChange:Fe=>b(Fe.target.value),onBlur:I,onKeyDown:Y,className:"w-16 text-lg bg-bg-tertiary border border-accent-primary rounded px-2 py-1 text-center text-white font-mono font-medium focus:outline-none",min:40,max:240}):v.jsx("div",{onTouchStart:W,onTouchMove:O,onTouchEnd:B,onClick:V,className:qt("text-lg font-mono font-medium cursor-ew-resize select-none px-3 py-1 rounded transition-colors",N?"text-accent-primary bg-accent-primary/10":"text-accent-primary hover:bg-white/5"),children:c})]}),v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsx("button",{onClick:()=>Je("prev"),className:"text-accent-primary/80 hover:text-accent-primary transition-colors p-2 active:scale-95",children:v.jsx(G3,{size:22,fill:"currentColor"})}),v.jsx("button",{onClick:Xe,className:qt("w-14 h-14 rounded-full flex items-center justify-center shadow-xl transition-all active:scale-95",u?"bg-accent-primary text-white shadow-accent-primary/30":"bg-accent-primary/20 text-accent-primary border-2 border-accent-primary"),children:u?v.jsx(H3,{size:24,fill:"currentColor"}):v.jsx(Wh,{size:24,fill:"currentColor",className:"ml-1"})}),v.jsx("button",{onClick:()=>Je("next"),className:"text-accent-primary/80 hover:text-accent-primary transition-colors p-2 active:scale-95",children:v.jsx(W3,{size:22,fill:"currentColor"})})]})]})]})]}):null},Sj=({className:n="",size:e=24})=>v.jsx("div",{className:`relative flex items-center justify-center ${n}`,style:{width:e,height:e},children:v.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((t,s)=>{const a=s*30,o=(a-15-90)*Math.PI/180,u=(a+15-90)*Math.PI/180,c=20,f=48,d=s<=4||s>=10;let p;d?s===0?p="rgba(234, 179, 8, 0.95)":s===1?p="rgba(163, 190, 60, 0.9)":s===2?p="rgba(132, 204, 22, 0.85)":s===3?p="rgba(74, 222, 128, 0.75)":s===4?p="rgba(45, 212, 191, 0.65)":s===11?p="rgba(251, 146, 60, 0.9)":s===10?p="rgba(168, 162, 158, 0.65)":p="rgba(200, 180, 100, 0.7)":p=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][s%3];const y=50+c*Math.cos(o),_=50+c*Math.sin(o),b=50+f*Math.cos(o),A=50+f*Math.sin(o),N=50+f*Math.cos(u),k=50+f*Math.sin(u),C=50+c*Math.cos(u),R=50+c*Math.sin(u);return v.jsx("path",{d:`M ${y} ${_} L ${b} ${A} A ${f} ${f} 0 0 1 ${N} ${k} L ${C} ${R} A ${c} ${c} 0 0 0 ${y} ${_}`,fill:p,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},s)}),v.jsx("circle",{cx:"50",cy:"50",r:"18",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.15)",strokeWidth:"1"})]})});function er(n){"@babel/helpers - typeof";return er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(n)}var fo=Uint8Array,la=Uint16Array,j2=Int32Array,E2=new fo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),M2=new fo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),iy=new fo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kw=function(n,e){for(var t=new la(31),s=0;s<31;++s)t[s]=e+=1<<n[s-1];for(var a=new j2(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},jw=kw(E2,2),Nj=jw.b,mg=jw.r;Nj[28]=258,mg[258]=28;var Aj=kw(M2,0),ay=Aj.r,gg=new la(32768);for(var Nr=0;Nr<32768;++Nr){var bc=(Nr&43690)>>1|(Nr&21845)<<1;bc=(bc&52428)>>2|(bc&13107)<<2,bc=(bc&61680)>>4|(bc&3855)<<4,gg[Nr]=((bc&65280)>>8|(bc&255)<<8)>>1}var Qf=(function(n,e,t){for(var s=n.length,a=0,o=new la(e);a<s;++a)n[a]&&++o[n[a]-1];var u=new la(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var c;if(t){c=new la(1<<e);var f=15-e;for(a=0;a<s;++a)if(n[a])for(var d=a<<4|n[a],p=e-n[a],y=u[n[a]-1]++<<p,_=y|(1<<p)-1;y<=_;++y)c[gg[y]>>f]=d}else for(c=new la(s),a=0;a<s;++a)n[a]&&(c[a]=gg[u[n[a]-1]++]>>15-n[a]);return c}),vu=new fo(288);for(var Nr=0;Nr<144;++Nr)vu[Nr]=8;for(var Nr=144;Nr<256;++Nr)vu[Nr]=9;for(var Nr=256;Nr<280;++Nr)vu[Nr]=7;for(var Nr=280;Nr<288;++Nr)vu[Nr]=8;var _p=new fo(32);for(var Nr=0;Nr<32;++Nr)_p[Nr]=5;var Tj=Qf(vu,9,0),Cj=Qf(_p,5,0),Ew=function(n){return(n+7)/8|0},kj=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new fo(n.subarray(e,t))},_l=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8},Bf=function(n,e,t){t<<=e&7;var s=e/8|0;n[s]|=t,n[s+1]|=t>>8,n[s+2]|=t>>16},Sm=function(n,e){for(var t=[],s=0;s<n.length;++s)n[s]&&t.push({s,f:n[s]});var a=t.length,o=t.slice();if(!a)return{t:Lw,l:0};if(a==1){var u=new fo(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(I,Y){return I.f-Y.f}),t.push({s:-1,f:25001});var c=t[0],f=t[1],d=0,p=1,y=2;for(t[0]={s:-1,f:c.f+f.f,l:c,r:f};p!=a-1;)c=t[t[d].f<t[y].f?d++:y++],f=t[d!=p&&t[d].f<t[y].f?d++:y++],t[p++]={s:-1,f:c.f+f.f,l:c,r:f};for(var _=o[0].s,s=1;s<a;++s)o[s].s>_&&(_=o[s].s);var b=new la(_+1),A=bg(t[p-1],b,0);if(A>e){var s=0,N=0,k=A-e,C=1<<k;for(o.sort(function(Y,W){return b[W.s]-b[Y.s]||Y.f-W.f});s<a;++s){var R=o[s].s;if(b[R]>e)N+=C-(1<<A-b[R]),b[R]=e;else break}for(N>>=k;N>0;){var D=o[s].s;b[D]<e?N-=1<<e-b[D]++-1:++s}for(;s>=0&&N;--s){var V=o[s].s;b[V]==e&&(--b[V],++N)}A=e}return{t:new fo(b),l:A}},bg=function(n,e,t){return n.s==-1?Math.max(bg(n.l,e,t+1),bg(n.r,e,t+1)):e[n.s]=t},oy=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new la(++e),s=0,a=n[0],o=1,u=function(f){t[s++]=f},c=1;c<=e;++c)if(n[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=n[c]}return{c:t.subarray(0,s),n:e}},Pf=function(n,e){for(var t=0,s=0;s<e.length;++s)t+=n[s]*e[s];return t},Mw=function(n,e,t){var s=t.length,a=Ew(e+2);n[a]=s&255,n[a+1]=s>>8,n[a+2]=n[a]^255,n[a+3]=n[a+1]^255;for(var o=0;o<s;++o)n[a+o+4]=t[o];return(a+4+s)*8},ly=function(n,e,t,s,a,o,u,c,f,d,p){_l(e,p++,t),++a[256];for(var y=Sm(a,15),_=y.t,b=y.l,A=Sm(o,15),N=A.t,k=A.l,C=oy(_),R=C.c,D=C.n,V=oy(N),I=V.c,Y=V.n,W=new la(19),O=0;O<R.length;++O)++W[R[O]&31];for(var O=0;O<I.length;++O)++W[I[O]&31];for(var B=Sm(W,7),K=B.t,j=B.l,F=19;F>4&&!K[iy[F-1]];--F);var te=d+5<<3,H=Pf(a,vu)+Pf(o,_p)+u,ae=Pf(a,_)+Pf(o,N)+u+14+3*F+Pf(W,K)+2*W[16]+3*W[17]+7*W[18];if(f>=0&&te<=H&&te<=ae)return Mw(e,p,n.subarray(f,f+d));var $,re,le,pe;if(_l(e,p,1+(ae<H)),p+=2,ae<H){$=Qf(_,b,0),re=_,le=Qf(N,k,0),pe=N;var be=Qf(K,j,0);_l(e,p,D-257),_l(e,p+5,Y-1),_l(e,p+10,F-4),p+=14;for(var O=0;O<F;++O)_l(e,p+3*O,K[iy[O]]);p+=3*F;for(var P=[R,I],M=0;M<2;++M)for(var G=P[M],O=0;O<G.length;++O){var J=G[O]&31;_l(e,p,be[J]),p+=K[J],J>15&&(_l(e,p,G[O]>>5&127),p+=G[O]>>12)}}else $=Tj,re=vu,le=Cj,pe=_p;for(var O=0;O<c;++O){var Q=s[O];if(Q>255){var J=Q>>18&31;Bf(e,p,$[J+257]),p+=re[J+257],J>7&&(_l(e,p,Q>>23&31),p+=E2[J]);var oe=Q&31;Bf(e,p,le[oe]),p+=pe[oe],oe>3&&(Bf(e,p,Q>>5&8191),p+=M2[oe])}else Bf(e,p,$[Q]),p+=re[Q]}return Bf(e,p,$[256]),p+re[256]},jj=new j2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Lw=new fo(0),Ej=function(n,e,t,s,a,o){var u=o.z||n.length,c=new fo(s+u+5*(1+Math.ceil(u/7e3))+a),f=c.subarray(s,c.length-a),d=o.l,p=(o.r||0)&7;if(e){p&&(f[0]=o.r>>3);for(var y=jj[e-1],_=y>>13,b=y&8191,A=(1<<t)-1,N=o.p||new la(32768),k=o.h||new la(A+1),C=Math.ceil(t/3),R=2*C,D=function(Fe){return(n[Fe]^n[Fe+1]<<C^n[Fe+2]<<R)&A},V=new j2(25e3),I=new la(288),Y=new la(32),W=0,O=0,B=o.i||0,K=0,j=o.w||0,F=0;B+2<u;++B){var te=D(B),H=B&32767,ae=k[te];if(N[H]=ae,k[te]=H,j<=B){var $=u-B;if((W>7e3||K>24576)&&($>423||!d)){p=ly(n,f,0,V,I,Y,O,K,F,B-F,p),K=W=O=0,F=B;for(var re=0;re<286;++re)I[re]=0;for(var re=0;re<30;++re)Y[re]=0}var le=2,pe=0,be=b,P=H-ae&32767;if($>2&&te==D(B-P))for(var M=Math.min(_,$)-1,G=Math.min(32767,B),J=Math.min(258,$);P<=G&&--be&&H!=ae;){if(n[B+le]==n[B+le-P]){for(var Q=0;Q<J&&n[B+Q]==n[B+Q-P];++Q);if(Q>le){if(le=Q,pe=P,Q>M)break;for(var oe=Math.min(P,Q-2),fe=0,re=0;re<oe;++re){var de=B-P+re&32767,xe=N[de],we=de-xe&32767;we>fe&&(fe=we,ae=de)}}}H=ae,ae=N[H],P+=H-ae&32767}if(pe){V[K++]=268435456|mg[le]<<18|ay[pe];var Ve=mg[le]&31,Xe=ay[pe]&31;O+=E2[Ve]+M2[Xe],++I[257+Ve],++Y[Xe],j=B+le,++W}else V[K++]=n[B],++I[n[B]]}}for(B=Math.max(B,j);B<u;++B)V[K++]=n[B],++I[n[B]];p=ly(n,f,d,V,I,Y,O,K,F,B-F,p),d||(o.r=p&7|f[p/8|0]<<3,p-=7,o.h=k,o.p=N,o.i=B,o.w=j)}else{for(var B=o.w||0;B<u+d;B+=65535){var Je=B+65535;Je>=u&&(f[p/8|0]=d,Je=u),p=Mw(f,p+1,n.subarray(B,Je))}o.i=u}return kj(c,0,s+Ew(p)+a)},Ow=function(){var n=1,e=0;return{p:function(t){for(var s=n,a=e,o=t.length|0,u=0;u!=o;){for(var c=Math.min(u+2655,o);u<c;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}n=s,e=a},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Mj=function(n,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new fo(o.length+n.length);u.set(o),u.set(n,o.length),n=u,a.w=o.length}return Ej(n,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,s,a)},Dw=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Lj=function(n,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var a=Ow();a.p(e.dictionary),Dw(n,2,a.d())}};function vg(n,e){e||(e={});var t=Ow();t.p(n);var s=Mj(n,e,e.dictionary?6:2,4);return Lj(s,e),Dw(s,s.length-4,t.d()),s}var Oj=typeof TextDecoder<"u"&&new TextDecoder,Dj=0;try{Oj.decode(Lw,{stream:!0}),Dj=1}catch{}function Rj(n){if(Array.isArray(n))return n}function Ij(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var s,a,o,u,c=[],f=!0,d=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(f=(s=o.call(t)).done)&&(c.push(s.value),c.length!==e);f=!0);}catch(p){d=!0,a=p}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(d)throw a}}return c}}function cy(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=Array(e);t<e;t++)s[t]=n[t];return s}function Vj(n,e){if(n){if(typeof n=="string")return cy(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?cy(n,e):void 0}}function Fj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uy(n,e){return Rj(n)||Ij(n,e)||Vj(n,e)||Fj()}function hy(n,e="utf8"){return new TextDecoder(e).decode(n)}const Bj=new TextEncoder;function Pj(n){return Bj.encode(n)}const zj=1024*8,qj=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Nm={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class L2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=zj,t={}){let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof L2)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=Nm[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===qj&&t!=="uint8"&&t!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+s));c.reverse();const f=new Nm[t](c.buffer);return this.offset+=s,f.reverse(),f}const u=new Nm[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return hy(this.readBytes(e))}decodeText(e=1,t="utf8"){return hy(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(Pj(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Kh(n){let e=n.length;for(;--e>=0;)n[e]=0}const Uj=3,Hj=258,Rw=29,Gj=256,Wj=Gj+1+Rw,Iw=30,Yj=512,$j=new Array((Wj+2)*2);Kh($j);const Xj=new Array(Iw*2);Kh(Xj);const Zj=new Array(Yj);Kh(Zj);const Qj=new Array(Hj-Uj+1);Kh(Qj);const Kj=new Array(Rw);Kh(Kj);const Jj=new Array(Iw);Kh(Jj);const eE=(n,e,t,s)=>{let a=n&65535|0,o=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var yg=eE;const tE=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},nE=new Uint32Array(tE()),rE=(n,e,t,s)=>{const a=nE,o=s+t;n^=-1;for(let u=s;u<o;u++)n=n>>>8^a[(n^e[u])&255];return n^-1};var Po=rE,xg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vw={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const sE=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var iE=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)sE(t,s)&&(n[s]=t[s])}}return n},aE=n=>{let e=0;for(let s=0,a=n.length;s<a;s++)e+=n[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=n.length;s<o;s++){let u=n[s];t.set(u,a),a+=u.length}return t},Fw={assign:iE,flattenChunks:aE};let Bw=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Bw=!1}const hd=new Uint8Array(256);for(let n=0;n<256;n++)hd[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;hd[254]=hd[254]=1;var oE=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,s,a,o,u=n.length,c=0;for(a=0;a<u;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)t=n.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=n.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const lE=(n,e)=>{if(e<65534&&n.subarray&&Bw)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(n[s]);return t};var cE=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=n[s++];if(u<128){o[a++]=u;continue}let c=hd[u];if(c>4){o[a++]=65533,s+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&s<t;)u=u<<6|n[s++]&63,c--;if(c>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return lE(o,a)},uE=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+hd[n[t]]>e?t:e},wg={string2buf:oE,buf2string:cE,utf8border:uE};function hE(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var fE=hE;const E1=16209,dE=16191;var pE=function(e,t){let s,a,o,u,c,f,d,p,y,_,b,A,N,k,C,R,D,V,I,Y,W,O,B,K;const j=e.state;s=e.next_in,B=e.input,a=s+(e.avail_in-5),o=e.next_out,K=e.output,u=o-(t-e.avail_out),c=o+(e.avail_out-257),f=j.dmax,d=j.wsize,p=j.whave,y=j.wnext,_=j.window,b=j.hold,A=j.bits,N=j.lencode,k=j.distcode,C=(1<<j.lenbits)-1,R=(1<<j.distbits)-1;e:do{A<15&&(b+=B[s++]<<A,A+=8,b+=B[s++]<<A,A+=8),D=N[b&C];t:for(;;){if(V=D>>>24,b>>>=V,A-=V,V=D>>>16&255,V===0)K[o++]=D&65535;else if(V&16){I=D&65535,V&=15,V&&(A<V&&(b+=B[s++]<<A,A+=8),I+=b&(1<<V)-1,b>>>=V,A-=V),A<15&&(b+=B[s++]<<A,A+=8,b+=B[s++]<<A,A+=8),D=k[b&R];n:for(;;){if(V=D>>>24,b>>>=V,A-=V,V=D>>>16&255,V&16){if(Y=D&65535,V&=15,A<V&&(b+=B[s++]<<A,A+=8,A<V&&(b+=B[s++]<<A,A+=8)),Y+=b&(1<<V)-1,Y>f){e.msg="invalid distance too far back",j.mode=E1;break e}if(b>>>=V,A-=V,V=o-u,Y>V){if(V=Y-V,V>p&&j.sane){e.msg="invalid distance too far back",j.mode=E1;break e}if(W=0,O=_,y===0){if(W+=d-V,V<I){I-=V;do K[o++]=_[W++];while(--V);W=o-Y,O=K}}else if(y<V){if(W+=d+y-V,V-=y,V<I){I-=V;do K[o++]=_[W++];while(--V);if(W=0,y<I){V=y,I-=V;do K[o++]=_[W++];while(--V);W=o-Y,O=K}}}else if(W+=y-V,V<I){I-=V;do K[o++]=_[W++];while(--V);W=o-Y,O=K}for(;I>2;)K[o++]=O[W++],K[o++]=O[W++],K[o++]=O[W++],I-=3;I&&(K[o++]=O[W++],I>1&&(K[o++]=O[W++]))}else{W=o-Y;do K[o++]=K[W++],K[o++]=K[W++],K[o++]=K[W++],I-=3;while(I>2);I&&(K[o++]=K[W++],I>1&&(K[o++]=K[W++]))}}else if((V&64)===0){D=k[(D&65535)+(b&(1<<V)-1)];continue n}else{e.msg="invalid distance code",j.mode=E1;break e}break}}else if((V&64)===0){D=N[(D&65535)+(b&(1<<V)-1)];continue t}else if(V&32){j.mode=dE;break e}else{e.msg="invalid literal/length code",j.mode=E1;break e}break}}while(s<a&&o<c);I=A>>3,s-=I,A-=I<<3,b&=(1<<A)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<c?257+(c-o):257-(o-c),j.hold=b,j.bits=A};const ph=15,fy=852,dy=592,py=0,Am=1,my=2,mE=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),gE=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),bE=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),vE=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),yE=(n,e,t,s,a,o,u,c)=>{const f=c.bits;let d=0,p=0,y=0,_=0,b=0,A=0,N=0,k=0,C=0,R=0,D,V,I,Y,W,O=null,B;const K=new Uint16Array(ph+1),j=new Uint16Array(ph+1);let F=null,te,H,ae;for(d=0;d<=ph;d++)K[d]=0;for(p=0;p<s;p++)K[e[t+p]]++;for(b=f,_=ph;_>=1&&K[_]===0;_--);if(b>_&&(b=_),_===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(y=1;y<_&&K[y]===0;y++);for(b<y&&(b=y),k=1,d=1;d<=ph;d++)if(k<<=1,k-=K[d],k<0)return-1;if(k>0&&(n===py||_!==1))return-1;for(j[1]=0,d=1;d<ph;d++)j[d+1]=j[d]+K[d];for(p=0;p<s;p++)e[t+p]!==0&&(u[j[e[t+p]]++]=p);if(n===py?(O=F=u,B=20):n===Am?(O=mE,F=gE,B=257):(O=bE,F=vE,B=0),R=0,p=0,d=y,W=o,A=b,N=0,I=-1,C=1<<b,Y=C-1,n===Am&&C>fy||n===my&&C>dy)return 1;for(;;){te=d-N,u[p]+1<B?(H=0,ae=u[p]):u[p]>=B?(H=F[u[p]-B],ae=O[u[p]-B]):(H=96,ae=0),D=1<<d-N,V=1<<A,y=V;do V-=D,a[W+(R>>N)+V]=te<<24|H<<16|ae|0;while(V!==0);for(D=1<<d-1;R&D;)D>>=1;if(D!==0?(R&=D-1,R+=D):R=0,p++,--K[d]===0){if(d===_)break;d=e[t+u[p]]}if(d>b&&(R&Y)!==I){for(N===0&&(N=b),W+=y,A=d-N,k=1<<A;A+N<_&&(k-=K[A+N],!(k<=0));)A++,k<<=1;if(C+=1<<A,n===Am&&C>fy||n===my&&C>dy)return 1;I=R&Y,a[I]=b<<24|A<<16|W-o|0}}return R!==0&&(a[W+R]=d-N<<24|64<<16|0),c.bits=b,0};var Kf=yE;const xE=0,Pw=1,zw=2,{Z_FINISH:gy,Z_BLOCK:wE,Z_TREES:M1,Z_OK:yu,Z_STREAM_END:_E,Z_NEED_DICT:SE,Z_STREAM_ERROR:La,Z_DATA_ERROR:qw,Z_MEM_ERROR:Uw,Z_BUF_ERROR:NE,Z_DEFLATED:by}=Vw,Qp=16180,vy=16181,yy=16182,xy=16183,wy=16184,_y=16185,Sy=16186,Ny=16187,Ay=16188,Ty=16189,Sp=16190,Sl=16191,Tm=16192,Cy=16193,Cm=16194,ky=16195,jy=16196,Ey=16197,My=16198,L1=16199,O1=16200,Ly=16201,Oy=16202,Dy=16203,Ry=16204,Iy=16205,km=16206,Vy=16207,Fy=16208,Or=16209,Hw=16210,Gw=16211,AE=852,TE=592,CE=15,kE=CE,By=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function jE(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Nu=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Qp||e.mode>Gw?1:0},Ww=n=>{if(Nu(n))return La;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Qp,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(AE),e.distcode=e.distdyn=new Int32Array(TE),e.sane=1,e.back=-1,yu},Yw=n=>{if(Nu(n))return La;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,Ww(n)},$w=(n,e)=>{let t;if(Nu(n))return La;const s=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?La:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,Yw(n))},Xw=(n,e)=>{if(!n)return La;const t=new jE;n.state=t,t.strm=n,t.window=null,t.mode=Qp;const s=$w(n,e);return s!==yu&&(n.state=null),s},EE=n=>Xw(n,kE);let Py=!0,jm,Em;const ME=n=>{if(Py){jm=new Int32Array(512),Em=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Kf(Pw,n.lens,0,288,jm,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Kf(zw,n.lens,0,32,Em,0,n.work,{bits:5}),Py=!1}n.lencode=jm,n.lenbits=9,n.distcode=Em,n.distbits=5},Zw=(n,e,t,s)=>{let a;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},LE=(n,e)=>{let t,s,a,o,u,c,f,d,p,y,_,b,A,N,k=0,C,R,D,V,I,Y,W,O;const B=new Uint8Array(4);let K,j;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Nu(n)||!n.output||!n.input&&n.avail_in!==0)return La;t=n.state,t.mode===Sl&&(t.mode=Tm),u=n.next_out,a=n.output,f=n.avail_out,o=n.next_in,s=n.input,c=n.avail_in,d=t.hold,p=t.bits,y=c,_=f,O=yu;e:for(;;)switch(t.mode){case Qp:if(t.wrap===0){t.mode=Tm;break}for(;p<16;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,B[0]=d&255,B[1]=d>>>8&255,t.check=Po(t.check,B,2,0),d=0,p=0,t.mode=vy;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){n.msg="incorrect header check",t.mode=Or;break}if((d&15)!==by){n.msg="unknown compression method",t.mode=Or;break}if(d>>>=4,p-=4,W=(d&15)+8,t.wbits===0&&(t.wbits=W),W>15||W>t.wbits){n.msg="invalid window size",t.mode=Or;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=d&512?Ty:Sl,d=0,p=0;break;case vy:for(;p<16;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(t.flags=d,(t.flags&255)!==by){n.msg="unknown compression method",t.mode=Or;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Or;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(B[0]=d&255,B[1]=d>>>8&255,t.check=Po(t.check,B,2,0)),d=0,p=0,t.mode=yy;case yy:for(;p<32;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(B[0]=d&255,B[1]=d>>>8&255,B[2]=d>>>16&255,B[3]=d>>>24&255,t.check=Po(t.check,B,4,0)),d=0,p=0,t.mode=xy;case xy:for(;p<16;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(B[0]=d&255,B[1]=d>>>8&255,t.check=Po(t.check,B,2,0)),d=0,p=0,t.mode=wy;case wy:if(t.flags&1024){for(;p<16;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(B[0]=d&255,B[1]=d>>>8&255,t.check=Po(t.check,B,2,0)),d=0,p=0}else t.head&&(t.head.extra=null);t.mode=_y;case _y:if(t.flags&1024&&(b=t.length,b>c&&(b=c),b&&(t.head&&(W=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+b),W)),t.flags&512&&t.wrap&4&&(t.check=Po(t.check,s,b,o)),c-=b,o+=b,t.length-=b),t.length))break e;t.length=0,t.mode=Sy;case Sy:if(t.flags&2048){if(c===0)break e;b=0;do W=s[o+b++],t.head&&W&&t.length<65536&&(t.head.name+=String.fromCharCode(W));while(W&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=Po(t.check,s,b,o)),c-=b,o+=b,W)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Ny;case Ny:if(t.flags&4096){if(c===0)break e;b=0;do W=s[o+b++],t.head&&W&&t.length<65536&&(t.head.comment+=String.fromCharCode(W));while(W&&b<c);if(t.flags&512&&t.wrap&4&&(t.check=Po(t.check,s,b,o)),c-=b,o+=b,W)break e}else t.head&&(t.head.comment=null);t.mode=Ay;case Ay:if(t.flags&512){for(;p<16;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(t.wrap&4&&d!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Or;break}d=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Sl;break;case Ty:for(;p<32;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}n.adler=t.check=By(d),d=0,p=0,t.mode=Sp;case Sp:if(t.havedict===0)return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=c,t.hold=d,t.bits=p,SE;n.adler=t.check=1,t.mode=Sl;case Sl:if(e===wE||e===M1)break e;case Tm:if(t.last){d>>>=p&7,p-=p&7,t.mode=km;break}for(;p<3;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}switch(t.last=d&1,d>>>=1,p-=1,d&3){case 0:t.mode=Cy;break;case 1:if(ME(t),t.mode=L1,e===M1){d>>>=2,p-=2;break e}break;case 2:t.mode=jy;break;case 3:n.msg="invalid block type",t.mode=Or}d>>>=2,p-=2;break;case Cy:for(d>>>=p&7,p-=p&7;p<32;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if((d&65535)!==(d>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Or;break}if(t.length=d&65535,d=0,p=0,t.mode=Cm,e===M1)break e;case Cm:t.mode=ky;case ky:if(b=t.length,b){if(b>c&&(b=c),b>f&&(b=f),b===0)break e;a.set(s.subarray(o,o+b),u),c-=b,o+=b,f-=b,u+=b,t.length-=b;break}t.mode=Sl;break;case jy:for(;p<14;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(t.nlen=(d&31)+257,d>>>=5,p-=5,t.ndist=(d&31)+1,d>>>=5,p-=5,t.ncode=(d&15)+4,d>>>=4,p-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Or;break}t.have=0,t.mode=Ey;case Ey:for(;t.have<t.ncode;){for(;p<3;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.lens[F[t.have++]]=d&7,d>>>=3,p-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,K={bits:t.lenbits},O=Kf(xE,t.lens,0,19,t.lencode,0,t.work,K),t.lenbits=K.bits,O){n.msg="invalid code lengths set",t.mode=Or;break}t.have=0,t.mode=My;case My:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[d&(1<<t.lenbits)-1],C=k>>>24,R=k>>>16&255,D=k&65535,!(C<=p);){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(D<16)d>>>=C,p-=C,t.lens[t.have++]=D;else{if(D===16){for(j=C+2;p<j;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(d>>>=C,p-=C,t.have===0){n.msg="invalid bit length repeat",t.mode=Or;break}W=t.lens[t.have-1],b=3+(d&3),d>>>=2,p-=2}else if(D===17){for(j=C+3;p<j;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}d>>>=C,p-=C,W=0,b=3+(d&7),d>>>=3,p-=3}else{for(j=C+7;p<j;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}d>>>=C,p-=C,W=0,b=11+(d&127),d>>>=7,p-=7}if(t.have+b>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Or;break}for(;b--;)t.lens[t.have++]=W}}if(t.mode===Or)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Or;break}if(t.lenbits=9,K={bits:t.lenbits},O=Kf(Pw,t.lens,0,t.nlen,t.lencode,0,t.work,K),t.lenbits=K.bits,O){n.msg="invalid literal/lengths set",t.mode=Or;break}if(t.distbits=6,t.distcode=t.distdyn,K={bits:t.distbits},O=Kf(zw,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,K),t.distbits=K.bits,O){n.msg="invalid distances set",t.mode=Or;break}if(t.mode=L1,e===M1)break e;case L1:t.mode=O1;case O1:if(c>=6&&f>=258){n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=c,t.hold=d,t.bits=p,pE(n,_),u=n.next_out,a=n.output,f=n.avail_out,o=n.next_in,s=n.input,c=n.avail_in,d=t.hold,p=t.bits,t.mode===Sl&&(t.back=-1);break}for(t.back=0;k=t.lencode[d&(1<<t.lenbits)-1],C=k>>>24,R=k>>>16&255,D=k&65535,!(C<=p);){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(R&&(R&240)===0){for(V=C,I=R,Y=D;k=t.lencode[Y+((d&(1<<V+I)-1)>>V)],C=k>>>24,R=k>>>16&255,D=k&65535,!(V+C<=p);){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}d>>>=V,p-=V,t.back+=V}if(d>>>=C,p-=C,t.back+=C,t.length=D,R===0){t.mode=Iy;break}if(R&32){t.back=-1,t.mode=Sl;break}if(R&64){n.msg="invalid literal/length code",t.mode=Or;break}t.extra=R&15,t.mode=Ly;case Ly:if(t.extra){for(j=t.extra;p<j;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Oy;case Oy:for(;k=t.distcode[d&(1<<t.distbits)-1],C=k>>>24,R=k>>>16&255,D=k&65535,!(C<=p);){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if((R&240)===0){for(V=C,I=R,Y=D;k=t.distcode[Y+((d&(1<<V+I)-1)>>V)],C=k>>>24,R=k>>>16&255,D=k&65535,!(V+C<=p);){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}d>>>=V,p-=V,t.back+=V}if(d>>>=C,p-=C,t.back+=C,R&64){n.msg="invalid distance code",t.mode=Or;break}t.offset=D,t.extra=R&15,t.mode=Dy;case Dy:if(t.extra){for(j=t.extra;p<j;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Or;break}t.mode=Ry;case Ry:if(f===0)break e;if(b=_-f,t.offset>b){if(b=t.offset-b,b>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Or;break}b>t.wnext?(b-=t.wnext,A=t.wsize-b):A=t.wnext-b,b>t.length&&(b=t.length),N=t.window}else N=a,A=u-t.offset,b=t.length;b>f&&(b=f),f-=b,t.length-=b;do a[u++]=N[A++];while(--b);t.length===0&&(t.mode=O1);break;case Iy:if(f===0)break e;a[u++]=t.length,f--,t.mode=O1;break;case km:if(t.wrap){for(;p<32;){if(c===0)break e;c--,d|=s[o++]<<p,p+=8}if(_-=f,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?Po(t.check,a,_,u-_):yg(t.check,a,_,u-_)),_=f,t.wrap&4&&(t.flags?d:By(d))!==t.check){n.msg="incorrect data check",t.mode=Or;break}d=0,p=0}t.mode=Vy;case Vy:if(t.wrap&&t.flags){for(;p<32;){if(c===0)break e;c--,d+=s[o++]<<p,p+=8}if(t.wrap&4&&d!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Or;break}d=0,p=0}t.mode=Fy;case Fy:O=_E;break e;case Or:O=qw;break e;case Hw:return Uw;case Gw:default:return La}return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=c,t.hold=d,t.bits=p,(t.wsize||_!==n.avail_out&&t.mode<Or&&(t.mode<km||e!==gy))&&Zw(n,n.output,n.next_out,_-n.avail_out),y-=n.avail_in,_-=n.avail_out,n.total_in+=y,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?Po(t.check,a,_,n.next_out-_):yg(t.check,a,_,n.next_out-_)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Sl?128:0)+(t.mode===L1||t.mode===Cm?256:0),(y===0&&_===0||e===gy)&&O===yu&&(O=NE),O},OE=n=>{if(Nu(n))return La;let e=n.state;return e.window&&(e.window=null),n.state=null,yu},DE=(n,e)=>{if(Nu(n))return La;const t=n.state;return(t.wrap&2)===0?La:(t.head=e,e.done=!1,yu)},RE=(n,e)=>{const t=e.length;let s,a,o;return Nu(n)||(s=n.state,s.wrap!==0&&s.mode!==Sp)?La:s.mode===Sp&&(a=1,a=yg(a,e,t,0),a!==s.check)?qw:(o=Zw(n,e,t,t),o?(s.mode=Hw,Uw):(s.havedict=1,yu))};var IE=Yw,VE=$w,FE=Ww,BE=EE,PE=Xw,zE=LE,qE=OE,UE=DE,HE=RE,GE="pako inflate (from Nodeca project)",Al={inflateReset:IE,inflateReset2:VE,inflateResetKeep:FE,inflateInit:BE,inflateInit2:PE,inflate:zE,inflateEnd:qE,inflateGetHeader:UE,inflateSetDictionary:HE,inflateInfo:GE};function WE(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var YE=WE;const Qw=Object.prototype.toString,{Z_NO_FLUSH:$E,Z_FINISH:XE,Z_OK:fd,Z_STREAM_END:Mm,Z_NEED_DICT:Lm,Z_STREAM_ERROR:ZE,Z_DATA_ERROR:zy,Z_MEM_ERROR:QE}=Vw;function jd(n){this.options=Fw.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fE,this.strm.avail_out=0;let t=Al.inflateInit2(this.strm,e.windowBits);if(t!==fd)throw new Error(xg[t]);if(this.header=new YE,Al.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=wg.string2buf(e.dictionary):Qw.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Al.inflateSetDictionary(this.strm,e.dictionary),t!==fd)))throw new Error(xg[t])}jd.prototype.push=function(n,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,c;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?XE:$E,Qw.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=Al.inflate(t,u),o===Lm&&a&&(o=Al.inflateSetDictionary(t,a),o===fd?o=Al.inflate(t,u):o===zy&&(o=Lm));t.avail_in>0&&o===Mm&&t.state.wrap>0&&n[t.next_in]!==0;)Al.inflateReset(t),o=Al.inflate(t,u);switch(o){case ZE:case zy:case Lm:case QE:return this.onEnd(o),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||o===Mm))if(this.options.to==="string"){let f=wg.utf8border(t.output,t.next_out),d=t.next_out-f,p=wg.buf2string(t.output,f);t.next_out=d,t.avail_out=s-d,d&&t.output.set(t.output.subarray(f,f+d),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===fd&&c===0)){if(o===Mm)return o=Al.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};jd.prototype.onData=function(n){this.chunks.push(n)};jd.prototype.onEnd=function(n){n===fd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Fw.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function KE(n,e){const t=new jd(e);if(t.push(n),t.err)throw t.msg||xg[t.err];return t.result}var JE=jd,eM=KE,tM={Inflate:JE,inflate:eM};const{Inflate:nM,inflate:rM}=tM;var qy=nM,sM=rM;const Kw=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Kw[n]=e}const Uy=4294967295;function iM(n,e,t){let s=n;for(let a=0;a<t;a++)s=Kw[(s^e[a])&255]^s>>>8;return s}function aM(n,e){return(iM(Uy,n,e)^Uy)>>>0}function Hy(n,e,t){const s=n.readUint32(),a=aM(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function Jw(n,e,t){for(let s=0;s<t;s++)e[s]=n[s]}function e4(n,e,t,s){let a=0;for(;a<s;a++)e[a]=n[a];for(;a<t;a++)e[a]=n[a]+e[a-s]&255}function t4(n,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=n[a];else for(;a<s;a++)e[a]=n[a]+t[a]&255}function n4(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=n[o]+(e[o-a]+t[o]>>1)&255}}function r4(n,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=n[o];for(;o<s;o++)e[o]=n[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=n[o]+t[o]&255;for(;o<s;o++)e[o]=n[o]+oM(e[o-a],t[o],t[o-a])&255}}function oM(n,e,t){const s=n+e-t,a=Math.abs(s-n),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?n:o<=u?e:t}function lM(n,e,t,s,a,o){switch(n){case 0:Jw(e,t,a);break;case 1:e4(e,t,a,o);break;case 2:t4(e,t,s,a);break;case 3:n4(e,t,s,a,o);break;case 4:r4(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const cM=new Uint16Array([255]),uM=new Uint8Array(cM.buffer),hM=uM[0]===255;function fM(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,f=new Uint8Array(s*t*c);let d=0;for(let p=0;p<7;p++){const y=u[p],_=Math.ceil((t-y.x)/y.xStep),b=Math.ceil((s-y.y)/y.yStep);if(_<=0||b<=0)continue;const A=_*c,N=new Uint8Array(A);for(let k=0;k<b;k++){const C=e[d++],R=e.subarray(d,d+A);d+=A;const D=new Uint8Array(A);lM(C,R,D,N,A,c),N.set(D);for(let V=0;V<_;V++){const I=y.x+V*y.xStep,Y=y.y+k*y.yStep;if(!(I>=t||Y>=s))for(let W=0;W<c;W++)f[(Y*t+I)*c+W]=D[V*c+W]}}}if(o===16){const p=new Uint16Array(f.buffer);if(hM)for(let y=0;y<p.length;y++)p[y]=dM(p[y]);return p}else return f}function dM(n){return(n&255)<<8|n>>8&255}const pM=new Uint16Array([255]),mM=new Uint8Array(pM.buffer),gM=mM[0]===255,bM=new Uint8Array(0);function Gy(n){const{data:e,width:t,height:s,channels:a,depth:o}=n,u=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*t),f=new Uint8Array(s*c);let d=bM,p=0,y,_;for(let b=0;b<s;b++){switch(y=e.subarray(p+1,p+1+c),_=f.subarray(b*c,(b+1)*c),e[p]){case 0:Jw(y,_,c);break;case 1:e4(y,_,c,u);break;case 2:t4(y,_,d,c);break;case 3:n4(y,_,d,c,u);break;case 4:r4(y,_,d,c,u);break;default:throw new Error(`Unsupported filter: ${e[p]}`)}d=_,p+=c+1}if(o===16){const b=new Uint16Array(f.buffer);if(gM)for(let A=0;A<b.length;A++)b[A]=vM(b[A]);return b}else return f}function vM(n){return(n&255)<<8|n>>8&255}const H1=Uint8Array.of(137,80,78,71,13,10,26,10);function Wy(n){if(!yM(n.readBytes(H1.length)))throw new Error("wrong PNG signature")}function yM(n){if(n.length<H1.length)return!1;for(let e=0;e<H1.length;e++)if(n[e]!==H1[e])return!1;return!0}const xM="tEXt",wM=0,s4=new TextDecoder("latin1");function _M(n){if(NM(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const SM=/^[\u0000-\u00FF]*$/;function NM(n){if(!SM.test(n))throw new Error("invalid latin1 text")}function AM(n,e,t){const s=i4(e);n[s]=TM(e,t-s.length-1)}function i4(n){for(n.mark();n.readByte()!==wM;);const e=n.offset;n.reset();const t=s4.decode(n.readBytes(e-n.offset-1));return n.skip(1),_M(t),t}function TM(n,e){return s4.decode(n.readBytes(e))}const ia={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Om={UNKNOWN:-1,DEFLATE:0},Yy={UNKNOWN:-1,ADAPTIVE:0},Dm={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},D1={NONE:0,BACKGROUND:1,PREVIOUS:2},Rm={SOURCE:0,OVER:1};class CM extends L2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:s=!1}=t;this._checkCrc=s,this._inflator=new qy,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Om.UNKNOWN,this._filterMethod=Yy.UNKNOWN,this._interlaceMethod=Dm.UNKNOWN,this._colorType=ia.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Wy(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(Wy(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const s=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case xM:AM(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Hy(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const s=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=s+e;break}if(this.offset-s!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Hy(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=kM(this.readUint8());const t=this.readUint8();this._colorType=t;let s;switch(t){case ia.GREYSCALE:s=1;break;case ia.TRUECOLOUR:s=3;break;case ia.INDEXED_COLOUR:s=1;break;case ia.GREYSCALE_ALPHA:s=2;break;case ia.TRUECOLOUR_ALPHA:s=4;break;case ia.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Om.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const s=[];this._palette=s;for(let a=0;a<t;a++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,s=this.offset+this.byteOffset;if(s+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,s,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ia.GREYSCALE:case ia.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case ia.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const s=this.readByte();this._palette[t].push(s)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ia.UNKNOWN:case ia.GREYSCALE_ALPHA:case ia.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=i4(this),s=this.readUint8();if(s!==Om.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const a=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:sM(a)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),s=this.readByte();this._png.resolution={x:e,y:t,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(e);if(s){if(s.data=Gy({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)t.data=s.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(s,a,t),this.addFrameDataToCanvas(t,s)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,s){switch(e.disposeOp){case D1.NONE:break;case D1.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const u=(a*e.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)s.data[u+c]=0}break;case D1.PREVIOUS:s.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const s=1<<this._png.depth,a=(o,u)=>{const c=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,f=(o*t.width+u)*this._png.channels;return{index:c,frameIndex:f}};switch(t.blendOp){case Rm.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let d=0;d<this._png.channels;d++)e.data[c+d]=t.data[f+d]}break;case Rm.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:c,frameIndex:f}=a(o,u);for(let d=0;d<this._png.channels;d++){const p=t.data[f+this._png.channels-1]/s,y=d%(this._png.channels-1)===0?1:t.data[f+d],_=Math.floor(p*y+(1-p)*e.data[c+d]);e.data[c+d]+=_}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==Yy.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Dm.NO_INTERLACE)this._png.data=Gy({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Dm.ADAM7)this._png.data=fM({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:D1.NONE,blendOp:Rm.SOURCE,data:e}),this._inflator=new qy,this._writingDataChunks=!1}}function kM(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var $y;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})($y||($y={}));function jM(n,e){return new CM(n,e).decode()}var en=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Im(){en.console&&typeof en.console.log=="function"&&en.console.log.apply(en.console,arguments)}var dr={log:Im,warn:function(n){en.console&&(typeof en.console.warn=="function"?en.console.warn.apply(en.console,arguments):Im.call(null,arguments))},error:function(n){en.console&&(typeof en.console.error=="function"?en.console.error.apply(en.console,arguments):Im(n))}};function Vm(n,e,t){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){ou(s.response,e,t)},s.onerror=function(){dr.error("could not download file")},s.send()}function Xy(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function R1(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var ou=en.saveAs||((typeof window>"u"?"undefined":er(window))!=="object"||window!==en?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var s=en.URL||en.webkitURL,a=document.createElement("a");e=e||n.name||"download",a.download=e,a.rel="noopener",typeof n=="string"?(a.href=n,a.origin!==location.origin?Xy(a.href)?Vm(n,e,t):R1(a,a.target="_blank"):R1(a)):(a.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){R1(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Xy(n))Vm(n,e,t);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){R1(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:er(o)!=="object"&&(dr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(n,t),e)}:function(n,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return Vm(n,e,t);var a=n.type==="application/octet-stream",o=/constructor/i.test(en.HTMLElement)||en.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":er(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var p=c.result;p=u?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=p:location=p,s=null},c.readAsDataURL(n)}else{var f=en.URL||en.webkitURL,d=f.createObjectURL(n);s?s.location=d:location.href=d,s=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});function a4(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(n);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+c+f+d}}var G1=en.atob.bind(en),Zy=en.btoa.bind(en);function Fm(n,e){var t=n[0],s=n[1],a=n[2],o=n[3];t=ri(t,s,a,o,e[0],7,-680876936),o=ri(o,t,s,a,e[1],12,-389564586),a=ri(a,o,t,s,e[2],17,606105819),s=ri(s,a,o,t,e[3],22,-1044525330),t=ri(t,s,a,o,e[4],7,-176418897),o=ri(o,t,s,a,e[5],12,1200080426),a=ri(a,o,t,s,e[6],17,-1473231341),s=ri(s,a,o,t,e[7],22,-45705983),t=ri(t,s,a,o,e[8],7,1770035416),o=ri(o,t,s,a,e[9],12,-1958414417),a=ri(a,o,t,s,e[10],17,-42063),s=ri(s,a,o,t,e[11],22,-1990404162),t=ri(t,s,a,o,e[12],7,1804603682),o=ri(o,t,s,a,e[13],12,-40341101),a=ri(a,o,t,s,e[14],17,-1502002290),t=si(t,s=ri(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=si(o,t,s,a,e[6],9,-1069501632),a=si(a,o,t,s,e[11],14,643717713),s=si(s,a,o,t,e[0],20,-373897302),t=si(t,s,a,o,e[5],5,-701558691),o=si(o,t,s,a,e[10],9,38016083),a=si(a,o,t,s,e[15],14,-660478335),s=si(s,a,o,t,e[4],20,-405537848),t=si(t,s,a,o,e[9],5,568446438),o=si(o,t,s,a,e[14],9,-1019803690),a=si(a,o,t,s,e[3],14,-187363961),s=si(s,a,o,t,e[8],20,1163531501),t=si(t,s,a,o,e[13],5,-1444681467),o=si(o,t,s,a,e[2],9,-51403784),a=si(a,o,t,s,e[7],14,1735328473),t=ii(t,s=si(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=ii(o,t,s,a,e[8],11,-2022574463),a=ii(a,o,t,s,e[11],16,1839030562),s=ii(s,a,o,t,e[14],23,-35309556),t=ii(t,s,a,o,e[1],4,-1530992060),o=ii(o,t,s,a,e[4],11,1272893353),a=ii(a,o,t,s,e[7],16,-155497632),s=ii(s,a,o,t,e[10],23,-1094730640),t=ii(t,s,a,o,e[13],4,681279174),o=ii(o,t,s,a,e[0],11,-358537222),a=ii(a,o,t,s,e[3],16,-722521979),s=ii(s,a,o,t,e[6],23,76029189),t=ii(t,s,a,o,e[9],4,-640364487),o=ii(o,t,s,a,e[12],11,-421815835),a=ii(a,o,t,s,e[15],16,530742520),t=ai(t,s=ii(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=ai(o,t,s,a,e[7],10,1126891415),a=ai(a,o,t,s,e[14],15,-1416354905),s=ai(s,a,o,t,e[5],21,-57434055),t=ai(t,s,a,o,e[12],6,1700485571),o=ai(o,t,s,a,e[3],10,-1894986606),a=ai(a,o,t,s,e[10],15,-1051523),s=ai(s,a,o,t,e[1],21,-2054922799),t=ai(t,s,a,o,e[8],6,1873313359),o=ai(o,t,s,a,e[15],10,-30611744),a=ai(a,o,t,s,e[6],15,-1560198380),s=ai(s,a,o,t,e[13],21,1309151649),t=ai(t,s,a,o,e[4],6,-145523070),o=ai(o,t,s,a,e[11],10,-1120210379),a=ai(a,o,t,s,e[2],15,718787259),s=ai(s,a,o,t,e[9],21,-343485551),n[0]=_c(t,n[0]),n[1]=_c(s,n[1]),n[2]=_c(a,n[2]),n[3]=_c(o,n[3])}function Kp(n,e,t,s,a,o){return e=_c(_c(e,n),_c(s,o)),_c(e<<a|e>>>32-a,t)}function ri(n,e,t,s,a,o,u){return Kp(e&t|~e&s,n,e,a,o,u)}function si(n,e,t,s,a,o,u){return Kp(e&s|t&~s,n,e,a,o,u)}function ii(n,e,t,s,a,o,u){return Kp(e^t^s,n,e,a,o,u)}function ai(n,e,t,s,a,o,u){return Kp(t^(e|~s),n,e,a,o,u)}function o4(n){var e,t=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Fm(s,EM(n.substring(e-64,e)));n=n.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)a[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Fm(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,Fm(s,a),s}function EM(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var Qy="0123456789abcdef".split("");function MM(n){for(var e="",t=0;t<4;t++)e+=Qy[n>>8*t+4&15]+Qy[n>>8*t&15];return e}function LM(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function _g(n){return o4(n).map(LM).join("")}var OM=(function(n){for(var e=0;e<n.length;e++)n[e]=MM(n[e]);return n.join("")})(o4("hello"))!="5d41402abc4b2a76b9719d911017c592";function _c(n,e){if(OM){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function Sg(n,e){var t,s,a,o;if(n!==t){for(var u=(a=n,o=1+(256/n.length|0),new Array(o+1).join(a)),c=[],f=0;f<256;f++)c[f]=f;var d=0;for(f=0;f<256;f++){var p=c[f];d=(d+p+u.charCodeAt(f))%256,c[f]=c[d],c[d]=p}t=n,s=c}else c=s;var y=e.length,_=0,b=0,A="";for(f=0;f<y;f++)b=(b+(p=c[_=(_+1)%256]))%256,c[_]=c[b],c[b]=p,u=c[(c[_]+c[b])%256],A+=String.fromCharCode(e.charCodeAt(f)^u);return A}var Ky={print:4,modify:8,copy:16,"annot-forms":32};function vh(n,e,t,s){this.v=1,this.r=2;var a=192;n.forEach(function(c){if(Ky.perm!==void 0)throw new Error("Invalid permission: "+c);a+=Ky[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=_g(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Sg(this.encryptionKey,this.padding)}function yh(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,s=0;s<t;s++){var a=n.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):n[s]}return e}function Jy(n){if(er(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(n,s)}catch(c){en.console&&dr.error("jsPDF PubSub Error",c.message,c)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Np(n){if(!(this instanceof Np))return new Np(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function l4(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function cu(n,e,t,s,a){if(!(this instanceof cu))return new cu(n,e,t,s,a);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,l4.call(this,s,a)}function Sh(n,e,t,s,a){if(!(this instanceof Sh))return new Sh(n,e,t,s,a);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,l4.call(this,s,a)}function It(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],c=1,f=16,d="S",p=null;er(n=n||{})==="object"&&(t=n.orientation,s=n.unit||s,a=n.format||a,o=n.compress||n.compressPdf||o,(p=n.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(f=n.floatPrecision),d=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var y=n.putOnlyUsedFonts||!1,_={},b={internal:{},__private__:{}};b.__private__.PubSub=Jy;var A="1.3",N=b.__private__.getPdfVersion=function(){return A};b.__private__.setPdfVersion=function(S){A=S};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return k};var C=b.__private__.getPageFormat=function(S){return k[S]};a=a||"a4";var R="compat",D="advanced",V=R;function I(){this.saveGraphicsState(),z(new ot(xt,0,0,-xt,0,Ba()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),d="n",V=D}function Y(){this.restoreGraphicsState(),d="S",V=R}var W=b.__private__.combineFontStyleAndFontWeight=function(S,q){if(S=="bold"&&q=="normal"||S=="bold"&&q==400||S=="normal"&&q=="italic"||S=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(S=q==400||q==="normal"?S==="italic"?"italic":"normal":q!=700&&q!=="bold"||S!=="normal"?(q==700?"bold":q)+""+S:"bold"),S};b.advancedAPI=function(S){var q=V===R;return q&&I.call(this),typeof S!="function"||(S(this),q&&Y.call(this)),this},b.compatAPI=function(S){var q=V===D;return q&&Y.call(this),typeof S!="function"||(S(this),q&&I.call(this)),this},b.isAdvancedAPI=function(){return V===D};var O,B=function(S){if(V!==D)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},K=b.roundToPrecision=b.__private__.roundToPrecision=function(S,q){var he=e||q;if(isNaN(S)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(he).replace(/0+$/,"")};O=b.hpf=b.__private__.hpf=typeof f=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return K(S,f)}:f==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return K(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return K(S,16)};var j=b.f2=b.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return K(S,2)},F=b.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return K(S,3)},te=b.scale=b.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return V===R?S*xt:V===D?S:void 0},H=function(S){return te((function(q){return V===R?Ba()-q:V===D?q:void 0})(S))};b.__private__.setPrecision=b.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var ae,$="00000000000000000000000000000000",re=b.__private__.getFileId=function(){return $},le=b.__private__.setFileId=function(S){return $=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(Vr=new vh(p.userPermissions,p.userPassword,p.ownerPassword,$)),$};b.setFileId=function(S){return le(S),this},b.getFileId=function(){return re()};var pe=b.__private__.convertDateToPDFDate=function(S){var q=S.getTimezoneOffset(),he=q<0?"+":"-",ge=Math.floor(Math.abs(q/60)),Te=Math.abs(q%60),Ge=[he,J(ge),"'",J(Te),"'"].join("");return["D:",S.getFullYear(),J(S.getMonth()+1),J(S.getDate()),J(S.getHours()),J(S.getMinutes()),J(S.getSeconds()),Ge].join("")},be=b.__private__.convertPDFDateToDate=function(S){var q=parseInt(S.substr(2,4),10),he=parseInt(S.substr(6,2),10)-1,ge=parseInt(S.substr(8,2),10),Te=parseInt(S.substr(10,2),10),Ge=parseInt(S.substr(12,2),10),et=parseInt(S.substr(14,2),10);return new Date(q,he,ge,Te,Ge,et,0)},P=b.__private__.setCreationDate=function(S){var q;if(S===void 0&&(S=new Date),S instanceof Date)q=pe(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=S}return ae=q},M=b.__private__.getCreationDate=function(S){var q=ae;return S==="jsDate"&&(q=be(ae)),q};b.setCreationDate=function(S){return P(S),this},b.getCreationDate=function(S){return M(S)};var G,J=b.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},Q=b.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},oe=0,fe=[],de=[],xe=0,we=[],Ve=[],Xe=!1,Je=de;b.__private__.setCustomOutputDestination=function(S){Xe=!0,Je=S};var Fe=function(S){Xe||(Je=S)};b.__private__.resetCustomOutputDestination=function(){Xe=!1,Je=de};var z=b.__private__.out=function(S){return S=S.toString(),xe+=S.length+1,Je.push(S),Je},ke=b.__private__.write=function(S){return z(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},ct=b.__private__.getArrayBuffer=function(S){for(var q=S.length,he=new ArrayBuffer(q),ge=new Uint8Array(he);q--;)ge[q]=S.charCodeAt(q);return he},Ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Ue};var Me=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(S){return Me=V===D?S/xt:S,this};var it,Ye=b.__private__.getFontSize=b.getFontSize=function(){return V===R?Me:Me*xt},ut=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(S){return ut=S,this},b.__private__.getR2L=b.getR2L=function(){return ut};var at,Pe=b.__private__.setZoomMode=function(S){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))it=S;else if(isNaN(S)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');it=S}else it=parseInt(S,10)};b.__private__.getZoomMode=function(){return it};var nt,tt=b.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');at=S};b.__private__.getPageMode=function(){return at};var ht=b.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');nt=S};b.__private__.getLayoutMode=function(){return nt},b.__private__.setDisplayMode=b.setDisplayMode=function(S,q,he){return Pe(S),ht(q),tt(he),this};var yt={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(S){if(Object.keys(yt).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return yt[S]},b.__private__.getDocumentProperties=function(){return yt},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(S){for(var q in yt)yt.hasOwnProperty(q)&&S[q]&&(yt[q]=S[q]);return this},b.__private__.setDocumentProperty=function(S,q){if(Object.keys(yt).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return yt[S]=q};var dt,xt,ft,un,Yt,Nt={},St={},Tt=[],gt={},Qt={},Lt={},Rt={},mn=null,vt=0,_e=[],rt=new Jy(b),Ae=n.hotfixes||[],st={},pt={},At=[],ot=function S(q,he,ge,Te,Ge,et){if(!(this instanceof S))return new S(q,he,ge,Te,Ge,et);isNaN(q)&&(q=1),isNaN(he)&&(he=0),isNaN(ge)&&(ge=0),isNaN(Te)&&(Te=1),isNaN(Ge)&&(Ge=0),isNaN(et)&&(et=0),this._matrix=[q,he,ge,Te,Ge,et]};Object.defineProperty(ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ot.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ot.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(O).join(S)},ot.prototype.multiply=function(S){var q=S.sx*this.sx+S.shy*this.shx,he=S.sx*this.shy+S.shy*this.sy,ge=S.shx*this.sx+S.sy*this.shx,Te=S.shx*this.shy+S.sy*this.sy,Ge=S.tx*this.sx+S.ty*this.shx+this.tx,et=S.tx*this.shy+S.ty*this.sy+this.ty;return new ot(q,he,ge,Te,Ge,et)},ot.prototype.decompose=function(){var S=this.sx,q=this.shy,he=this.shx,ge=this.sy,Te=this.tx,Ge=this.ty,et=Math.sqrt(S*S+q*q),kt=(S/=et)*he+(q/=et)*ge;he-=S*kt,ge-=q*kt;var Ot=Math.sqrt(he*he+ge*ge);return kt/=Ot,S*(ge/=Ot)<q*(he/=Ot)&&(S=-S,q=-q,kt=-kt,et=-et),{scale:new ot(et,0,0,Ot,0,0),translate:new ot(1,0,0,1,Te,Ge),rotate:new ot(S,q,-q,S,0,0),skew:new ot(1,0,kt,1,0,0)}},ot.prototype.toString=function(S){return this.join(" ")},ot.prototype.inversed=function(){var S=this.sx,q=this.shy,he=this.shx,ge=this.sy,Te=this.tx,Ge=this.ty,et=1/(S*ge-q*he),kt=ge*et,Ot=-q*et,Zt=-he*et,an=S*et;return new ot(kt,Ot,Zt,an,-kt*Te-Zt*Ge,-Ot*Te-an*Ge)},ot.prototype.applyToPoint=function(S){var q=S.x*this.sx+S.y*this.shx+this.tx,he=S.x*this.shy+S.y*this.sy+this.ty;return new Ni(q,he)},ot.prototype.applyToRectangle=function(S){var q=this.applyToPoint(S),he=this.applyToPoint(new Ni(S.x+S.w,S.y+S.h));return new Da(q.x,q.y,he.x-q.x,he.y-q.y)},ot.prototype.clone=function(){var S=this.sx,q=this.shy,he=this.shx,ge=this.sy,Te=this.tx,Ge=this.ty;return new ot(S,q,he,ge,Te,Ge)},b.Matrix=ot;var Bt=b.matrixMult=function(S,q){return q.multiply(S)},bn=new ot(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=bn;var vn=function(S,q){if(!Qt[S]){var he=(q instanceof cu?"Sh":"P")+(Object.keys(gt).length+1).toString(10);q.id=he,Qt[S]=he,gt[he]=q,rt.publish("addPattern",q)}};b.ShadingPattern=cu,b.TilingPattern=Sh,b.addShadingPattern=function(S,q){return B("addShadingPattern()"),vn(S,q),this},b.beginTilingPattern=function(S){B("beginTilingPattern()"),el(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},b.endTilingPattern=function(S,q){B("endTilingPattern()"),q.stream=Ve[G].join(`
`),vn(S,q),rt.publish("endTilingPattern",q),At.pop().restore()};var xn,Ut=b.__private__.newObject=function(){var S=hn();return fn(S,!0),S},hn=b.__private__.newObjectDeferred=function(){return oe++,fe[oe]=function(){return xe},oe},fn=function(S,q){return q=typeof q=="boolean"&&q,fe[S]=xe,q&&z(S+" 0 obj"),S},Mn=b.__private__.newAdditionalObject=function(){var S={objId:hn(),content:""};return we.push(S),S},Vn=hn(),Ln=hn(),Tn=b.__private__.decodeColorString=function(S){var q=S.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var he=parseFloat(q[0]);q=[he,he,he,"r"]}for(var ge="#",Te=0;Te<3;Te++)ge+=("0"+Math.floor(255*parseFloat(q[Te])).toString(16)).slice(-2);return ge},mr=b.__private__.encodeColorString=function(S){var q;typeof S=="string"&&(S={ch1:S});var he=S.ch1,ge=S.ch2,Te=S.ch3,Ge=S.ch4,et=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var kt=new a4(he);if(kt.ok)he=kt.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var Ot=parseInt(he.substr(1),16);he=Ot>>16&255,ge=Ot>>8&255,Te=255&Ot}if(ge===void 0||Ge===void 0&&he===ge&&ge===Te)q=typeof he=="string"?he+" "+et[0]:S.precision===2?j(he/255)+" "+et[0]:F(he/255)+" "+et[0];else if(Ge===void 0||er(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return["1.","1.","1.",et[1]].join(" ");q=typeof he=="string"?[he,ge,Te,et[1]].join(" "):S.precision===2?[j(he/255),j(ge/255),j(Te/255),et[1]].join(" "):[F(he/255),F(ge/255),F(Te/255),et[1]].join(" ")}else q=typeof he=="string"?[he,ge,Te,Ge,et[2]].join(" "):S.precision===2?[j(he),j(ge),j(Te),j(Ge),et[2]].join(" "):[F(he),F(ge),F(Te),F(Ge),et[2]].join(" ");return q},yn=b.__private__.getFilters=function(){return u},sn=b.__private__.putStream=function(S){var q=(S=S||{}).data||"",he=S.filters||yn(),ge=S.alreadyAppliedFilters||[],Te=S.addLength1||!1,Ge=q.length,et=S.objectId,kt=function(es){return es};if(p!==null&&et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(kt=Vr.encryptor(et,0));var Ot={};he===!0&&(he=["FlateEncode"]);var Zt=S.additionalKeyValues||[],an=(Ot=It.API.processDataByFilters!==void 0?It.API.processDataByFilters(q,he):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(ge)?ge.join(" "):ge.toString());if(Ot.data.length!==0&&(Zt.push({key:"Length",value:Ot.data.length}),Te===!0&&Zt.push({key:"Length1",value:Ge})),an.length!=0)if(an.split("/").length-1==1)Zt.push({key:"Filter",value:an});else{Zt.push({key:"Filter",value:"["+an+"]"});for(var On=0;On<Zt.length;On+=1)if(Zt[On].key==="DecodeParms"){for(var vr=[],Fr=0;Fr<Ot.reverseChain.split("/").length-1;Fr+=1)vr.push("null");vr.push(Zt[On].value),Zt[On].value="["+vr.join(" ")+"]"}}z("<<");for(var tr=0;tr<Zt.length;tr++)z("/"+Zt[tr].key+" "+Zt[tr].value);z(">>"),Ot.data.length!==0&&(z("stream"),z(kt(Ot.data)),z("endstream"))},Ne=b.__private__.putPage=function(S){var q=S.number,he=S.data,ge=S.objId,Te=S.contentsObjId;fn(ge,!0),z("<</Type /Page"),z("/Parent "+S.rootDictionaryObjId+" 0 R"),z("/Resources "+S.resourceDictionaryObjId+" 0 R"),z("/MediaBox ["+parseFloat(O(S.mediaBox.bottomLeftX))+" "+parseFloat(O(S.mediaBox.bottomLeftY))+" "+O(S.mediaBox.topRightX)+" "+O(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&z("/CropBox ["+O(S.cropBox.bottomLeftX)+" "+O(S.cropBox.bottomLeftY)+" "+O(S.cropBox.topRightX)+" "+O(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&z("/BleedBox ["+O(S.bleedBox.bottomLeftX)+" "+O(S.bleedBox.bottomLeftY)+" "+O(S.bleedBox.topRightX)+" "+O(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&z("/TrimBox ["+O(S.trimBox.bottomLeftX)+" "+O(S.trimBox.bottomLeftY)+" "+O(S.trimBox.topRightX)+" "+O(S.trimBox.topRightY)+"]"),S.artBox!==null&&z("/ArtBox ["+O(S.artBox.bottomLeftX)+" "+O(S.artBox.bottomLeftY)+" "+O(S.artBox.topRightX)+" "+O(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&z("/UserUnit "+S.userUnit),rt.publish("putPage",{objId:ge,pageContext:_e[q],pageNumber:q,page:he}),z("/Contents "+Te+" 0 R"),z(">>"),z("endobj");var Ge=he.join(`
`);return V===D&&(Ge+=`
Q`),fn(Te,!0),sn({data:Ge,filters:yn(),objectId:Te}),z("endobj"),ge},Ie=b.__private__.putPages=function(){var S,q,he=[];for(S=1;S<=vt;S++)_e[S].objId=hn(),_e[S].contentsObjId=hn();for(S=1;S<=vt;S++)he.push(Ne({number:S,data:Ve[S],objId:_e[S].objId,contentsObjId:_e[S].contentsObjId,mediaBox:_e[S].mediaBox,cropBox:_e[S].cropBox,bleedBox:_e[S].bleedBox,trimBox:_e[S].trimBox,artBox:_e[S].artBox,userUnit:_e[S].userUnit,rootDictionaryObjId:Vn,resourceDictionaryObjId:Ln}));fn(Vn,!0),z("<</Type /Pages");var ge="/Kids [";for(q=0;q<vt;q++)ge+=he[q]+" 0 R ";z(ge+"]"),z("/Count "+vt),z(">>"),z("endobj"),rt.publish("postPutPages")},Ze=function(S){rt.publish("putFont",{font:S,out:z,newObject:Ut,putStream:sn}),S.isAlreadyPutted!==!0&&(S.objectNumber=Ut(),z("<<"),z("/Type /Font"),z("/BaseFont /"+yh(S.postScriptName)),z("/Subtype /Type1"),typeof S.encoding=="string"&&z("/Encoding /"+S.encoding),z("/FirstChar 32"),z("/LastChar 255"),z(">>"),z("endobj"))},bt=function(S){S.objectNumber=Ut();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[O(S.x),O(S.y),O(S.x+S.width),O(S.y+S.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var he=S.pages[1].join(`
`);sn({data:he,additionalKeyValues:q,objectId:S.objectNumber}),z("endobj")},Ht=function(S,q){q||(q=21);var he=Ut(),ge=(function(et,kt){var Ot,Zt=[],an=1/(kt-1);for(Ot=0;Ot<1;Ot+=an)Zt.push(Ot);if(Zt.push(1),et[0].offset!=0){var On={offset:0,color:et[0].color};et.unshift(On)}if(et[et.length-1].offset!=1){var vr={offset:1,color:et[et.length-1].color};et.push(vr)}for(var Fr="",tr=0,es=0;es<Zt.length;es++){for(Ot=Zt[es];Ot>et[tr+1].offset;)tr++;var Hr=et[tr].offset,_s=(Ot-Hr)/(et[tr+1].offset-Hr),Pa=et[tr].color,Zi=et[tr+1].color;Fr+=Q(Math.round((1-_s)*Pa[0]+_s*Zi[0]).toString(16))+Q(Math.round((1-_s)*Pa[1]+_s*Zi[1]).toString(16))+Q(Math.round((1-_s)*Pa[2]+_s*Zi[2]).toString(16))}return Fr.trim()})(S.colors,q),Te=[];Te.push({key:"FunctionType",value:"0"}),Te.push({key:"Domain",value:"[0.0 1.0]"}),Te.push({key:"Size",value:"["+q+"]"}),Te.push({key:"BitsPerSample",value:"8"}),Te.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Te.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sn({data:ge,additionalKeyValues:Te,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),z("endobj"),S.objectNumber=Ut(),z("<< /ShadingType "+S.type),z("/ColorSpace /DeviceRGB");var Ge="/Coords ["+O(parseFloat(S.coords[0]))+" "+O(parseFloat(S.coords[1]))+" ";S.type===2?Ge+=O(parseFloat(S.coords[2]))+" "+O(parseFloat(S.coords[3])):Ge+=O(parseFloat(S.coords[2]))+" "+O(parseFloat(S.coords[3]))+" "+O(parseFloat(S.coords[4]))+" "+O(parseFloat(S.coords[5])),z(Ge+="]"),S.matrix&&z("/Matrix ["+S.matrix.toString()+"]"),z("/Function "+he+" 0 R"),z("/Extend [true true]"),z(">>"),z("endobj")},Vt=function(S,q){var he=hn(),ge=Ut();q.push({resourcesOid:he,objectOid:ge}),S.objectNumber=ge;var Te=[];Te.push({key:"Type",value:"/Pattern"}),Te.push({key:"PatternType",value:"1"}),Te.push({key:"PaintType",value:"1"}),Te.push({key:"TilingType",value:"1"}),Te.push({key:"BBox",value:"["+S.boundingBox.map(O).join(" ")+"]"}),Te.push({key:"XStep",value:O(S.xStep)}),Te.push({key:"YStep",value:O(S.yStep)}),Te.push({key:"Resources",value:he+" 0 R"}),S.matrix&&Te.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),sn({data:S.stream,additionalKeyValues:Te,objectId:S.objectNumber}),z("endobj")},Fn=function(S){for(var q in S.objectNumber=Ut(),z("<<"),S)switch(q){case"opacity":z("/ca "+j(S[q]));break;case"stroke-opacity":z("/CA "+j(S[q]))}z(">>"),z("endobj")},Wn=function(S){fn(S.resourcesOid,!0),z("<<"),z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var q in z("/Font <<"),Nt)Nt.hasOwnProperty(q)&&(y===!1||y===!0&&_.hasOwnProperty(q))&&z("/"+q+" "+Nt[q].objectNumber+" 0 R");z(">>")})(),(function(){if(Object.keys(gt).length>0){for(var q in z("/Shading <<"),gt)gt.hasOwnProperty(q)&&gt[q]instanceof cu&&gt[q].objectNumber>=0&&z("/"+q+" "+gt[q].objectNumber+" 0 R");rt.publish("putShadingPatternDict"),z(">>")}})(),(function(q){if(Object.keys(gt).length>0){for(var he in z("/Pattern <<"),gt)gt.hasOwnProperty(he)&&gt[he]instanceof b.TilingPattern&&gt[he].objectNumber>=0&&gt[he].objectNumber<q&&z("/"+he+" "+gt[he].objectNumber+" 0 R");rt.publish("putTilingPatternDict"),z(">>")}})(S.objectOid),(function(){if(Object.keys(Lt).length>0){var q;for(q in z("/ExtGState <<"),Lt)Lt.hasOwnProperty(q)&&Lt[q].objectNumber>=0&&z("/"+q+" "+Lt[q].objectNumber+" 0 R");rt.publish("putGStateDict"),z(">>")}})(),(function(){for(var q in z("/XObject <<"),st)st.hasOwnProperty(q)&&st[q].objectNumber>=0&&z("/"+q+" "+st[q].objectNumber+" 0 R");rt.publish("putXobjectDict"),z(">>")})(),z(">>"),z("endobj")},wn=function(S){St[S.fontName]=St[S.fontName]||{},St[S.fontName][S.fontStyle]=S.id},os=function(S,q,he,ge,Te){var Ge={id:"F"+(Object.keys(Nt).length+1).toString(10),postScriptName:S,fontName:q,fontStyle:he,encoding:ge,isStandardFont:Te||!1,metadata:{}};return rt.publish("addFont",{font:Ge,instance:this}),Nt[Ge.id]=Ge,wn(Ge),Ge.id},Rr=b.__private__.pdfEscape=b.pdfEscape=function(S,q){return(function(he,ge){var Te,Ge,et,kt,Ot,Zt,an,On,vr;if(et=(ge=ge||{}).sourceEncoding||"Unicode",Ot=ge.outputEncoding,(ge.autoencode||Ot)&&Nt[dt].metadata&&Nt[dt].metadata[et]&&Nt[dt].metadata[et].encoding&&(kt=Nt[dt].metadata[et].encoding,!Ot&&Nt[dt].encoding&&(Ot=Nt[dt].encoding),!Ot&&kt.codePages&&(Ot=kt.codePages[0]),typeof Ot=="string"&&(Ot=kt[Ot]),Ot)){for(an=!1,Zt=[],Te=0,Ge=he.length;Te<Ge;Te++)(On=Ot[he.charCodeAt(Te)])?Zt.push(String.fromCharCode(On)):Zt.push(he[Te]),Zt[Te].charCodeAt(0)>>8&&(an=!0);he=Zt.join("")}for(Te=he.length;an===void 0&&Te!==0;)he.charCodeAt(Te-1)>>8&&(an=!0),Te--;if(!an)return he;for(Zt=ge.noBOM?[]:[254,255],Te=0,Ge=he.length;Te<Ge;Te++){if((vr=(On=he.charCodeAt(Te))>>8)>>8)throw new Error("Character at position "+Te+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(vr),Zt.push(On-(vr<<8))}return String.fromCharCode.apply(void 0,Zt)})(S,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Jr=b.__private__.beginPage=function(S){Ve[++vt]=[],_e[vt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},xs(vt),Fe(Ve[G])},ls=function(S,q){var he,ge,Te;switch(t=q||t,typeof S=="string"&&(he=C(S.toLowerCase()),Array.isArray(he)&&(ge=he[0],Te=he[1])),Array.isArray(S)&&(ge=S[0]*xt,Te=S[1]*xt),isNaN(ge)&&(ge=a[0],Te=a[1]),(ge>14400||Te>14400)&&(dr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ge=Math.min(14400,ge),Te=Math.min(14400,Te)),a=[ge,Te],t.substr(0,1)){case"l":Te>ge&&(a=[Te,ge]);break;case"p":ge>Te&&(a=[Te,ge])}Jr(a),Gt(Qo),z(fi),Fl!==0&&z(Fl+" J"),us!==0&&z(us+" j"),rt.publish("addPage",{pageNumber:vt})},Us=function(S){S>0&&S<=vt&&(Ve.splice(S,1),_e.splice(S,1),vt--,G>vt&&(G=vt),this.setPage(G))},xs=function(S){S>0&&S<=vt&&(G=S)},ci=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Ve.length-1},xi=function(S,q,he){var ge,Te=void 0;return he=he||{},S=S!==void 0?S:Nt[dt].fontName,q=q!==void 0?q:Nt[dt].fontStyle,ge=S.toLowerCase(),St[ge]!==void 0&&St[ge][q]!==void 0?Te=St[ge][q]:St[S]!==void 0&&St[S][q]!==void 0?Te=St[S][q]:he.disableWarning===!1&&dr.warn("Unable to look up font label for font '"+S+"', '"+q+"'. Refer to getFontList() for available fonts."),Te||he.noFallback||(Te=St.times[q])==null&&(Te=St.times.normal),Te},Ir=b.__private__.putInfo=function(){var S=Ut(),q=function(ge){return ge};for(var he in p!==null&&(q=Vr.encryptor(S,0)),z("<<"),z("/Producer ("+Rr(q("jsPDF "+It.version))+")"),yt)yt.hasOwnProperty(he)&&yt[he]&&z("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+Rr(q(yt[he]))+")");z("/CreationDate ("+Rr(q(ae))+")"),z(">>"),z("endobj")},wi=b.__private__.putCatalog=function(S){var q=(S=S||{}).rootDictionaryObjId||Vn;switch(Ut(),z("<<"),z("/Type /Catalog"),z("/Pages "+q+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":z("/OpenAction [3 0 R /Fit]");break;case"original":z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+it;he.substr(he.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&z("/OpenAction [3 0 R /XYZ null null "+j(it)+"]")}switch(nt||(nt="continuous"),nt){case"continuous":z("/PageLayout /OneColumn");break;case"single":z("/PageLayout /SinglePage");break;case"two":case"twoleft":z("/PageLayout /TwoColumnLeft");break;case"tworight":z("/PageLayout /TwoColumnRight")}at&&z("/PageMode /"+at),rt.publish("putCatalog"),z(">>"),z("endobj")},_i=b.__private__.putTrailer=function(){z("trailer"),z("<<"),z("/Size "+(oe+1)),z("/Root "+oe+" 0 R"),z("/Info "+(oe-1)+" 0 R"),p!==null&&z("/Encrypt "+Vr.oid+" 0 R"),z("/ID [ <"+$+"> <"+$+"> ]"),z(">>")},Cn=b.__private__.putHeader=function(){z("%PDF-"+A),z("%")},yo=b.__private__.putXRef=function(){var S="0000000000";z("xref"),z("0 "+(oe+1)),z("0000000000 65535 f ");for(var q=1;q<=oe;q++)typeof fe[q]=="function"?z((S+fe[q]()).slice(-10)+" 00000 n "):fe[q]!==void 0?z((S+fe[q]).slice(-10)+" 00000 n "):z("0000000000 00000 n ")},ui=b.__private__.buildDocument=function(){var S;oe=0,xe=0,de=[],fe=[],we=[],Vn=hn(),Ln=hn(),Fe(de),rt.publish("buildDocument"),Cn(),Ie(),(function(){rt.publish("putAdditionalObjects");for(var he=0;he<we.length;he++){var ge=we[he];fn(ge.objId,!0),z(ge.content),z("endobj")}rt.publish("postPutAdditionalObjects")})(),S=[],(function(){for(var he in Nt)Nt.hasOwnProperty(he)&&(y===!1||y===!0&&_.hasOwnProperty(he))&&Ze(Nt[he])})(),(function(){var he;for(he in Lt)Lt.hasOwnProperty(he)&&Fn(Lt[he])})(),(function(){for(var he in st)st.hasOwnProperty(he)&&bt(st[he])})(),(function(he){var ge;for(ge in gt)gt.hasOwnProperty(ge)&&(gt[ge]instanceof cu?Ht(gt[ge]):gt[ge]instanceof Sh&&Vt(gt[ge],he))})(S),rt.publish("putResources"),S.forEach(Wn),Wn({resourcesOid:Ln,objectOid:Number.MAX_SAFE_INTEGER}),rt.publish("postPutResources"),p!==null&&(Vr.oid=Ut(),z("<<"),z("/Filter /Standard"),z("/V "+Vr.v),z("/R "+Vr.r),z("/U <"+Vr.toHexString(Vr.U)+">"),z("/O <"+Vr.toHexString(Vr.O)+">"),z("/P "+Vr.P),z(">>"),z("endobj")),Ir(),wi();var q=xe;return yo(),_i(),z("startxref"),z(""+q),z("%%EOF"),Fe(Ve[G]),de.join(`
`)},ha=b.__private__.getBlob=function(S){return new Blob([ct(S)],{type:"application/pdf"})},xo=b.output=b.__private__.output=(xn=function(S,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",S){case void 0:return ui();case"save":b.save(q.filename);break;case"arraybuffer":return ct(ui());case"blob":return ha(ui());case"bloburi":case"bloburl":if(en.URL!==void 0&&typeof en.URL.createObjectURL=="function")return en.URL&&en.URL.createObjectURL(ha(ui()))||void 0;dr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",ge=ui();try{he=Zy(ge)}catch{he=Zy(unescape(encodeURIComponent(ge)))}return"data:application/pdf;filename="+q.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Te="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(Te=q.pdfObjectUrl,Ge="");var et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Te+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",kt=en.open();return kt!==null&&kt.document.write(et),kt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',Zt=en.open();if(Zt!==null){Zt.document.write(Ot);var an=this;Zt.document.documentElement.querySelector("#pdfViewer").onload=function(){Zt.document.title=q.filename,Zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(an.output("bloburl"))}}return Zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(en)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var On='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',vr=en.open();if(vr!==null&&(vr.document.write(On),vr.document.title=q.filename),vr||typeof safari>"u")return vr;break;case"datauri":case"dataurl":return en.document.location.href=this.output("datauristring",q);default:return null}},xn.foo=function(){try{return xn.apply(this,arguments)}catch(he){var S=he.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var q="Error in function "+S.split(`
`)[0].split("<")[0]+": "+he.message;if(!en.console)throw new Error(q);en.console.error(q,he),en.alert&&alert(q)}},xn.foo.bar=xn,xn.foo),cs=function(S){return Array.isArray(Ae)===!0&&Ae.indexOf(S)>-1};switch(s){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=cs("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);xt=s}var Vr=null;P(),le();var Cr=b.__private__.getPageInfo=b.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:_e[S].objId,pageNumber:S,pageContext:_e[S]}},wo=b.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in _e)if(_e[q].objId===S)break;return Cr(q)},Il=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:_e[G].objId,pageNumber:G,pageContext:_e[G]}};b.addPage=function(){return ls.apply(this,arguments),this},b.setPage=function(){return xs.apply(this,arguments),Fe.call(this,Ve[G]),this},b.insertPage=function(S){return this.addPage(),this.movePage(G,S),this},b.movePage=function(S,q){var he,ge;if(S>q){he=Ve[S],ge=_e[S];for(var Te=S;Te>q;Te--)Ve[Te]=Ve[Te-1],_e[Te]=_e[Te-1];Ve[q]=he,_e[q]=ge,this.setPage(q)}else if(S<q){he=Ve[S],ge=_e[S];for(var Ge=S;Ge<q;Ge++)Ve[Ge]=Ve[Ge+1],_e[Ge]=_e[Ge+1];Ve[q]=he,_e[q]=ge,this.setPage(q)}return this},b.deletePage=function(){return Us.apply(this,arguments),this},b.__private__.text=b.text=function(S,q,he,ge,Te){var Ge,et,kt,Ot,Zt,an,On,vr,Fr,tr=(ge=ge||{}).scope||this;if(typeof S=="number"&&typeof q=="number"&&(typeof he=="string"||Array.isArray(he))){var es=he;he=q,q=S,S=es}if(arguments[3]instanceof ot==0?(kt=arguments[4],Ot=arguments[5],er(On=arguments[3])==="object"&&On!==null||(typeof kt=="string"&&(Ot=kt,kt=null),typeof On=="string"&&(Ot=On,On=null),typeof On=="number"&&(kt=On,On=null),ge={flags:On,angle:kt,align:Ot})):(B("The transform parameter of text() with a Matrix value"),Fr=Te),isNaN(q)||isNaN(he)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return tr;var Hr,_s="",Pa=typeof ge.lineHeightFactor=="number"?ge.lineHeightFactor:Oa,Zi=tr.internal.scaleFactor;function za(qn){return qn=qn.split("	").join(Array(ge.TabLen||9).join(" ")),Rr(qn,On)}function Pc(qn){for(var Dn,nr=qn.concat(),Pr=[],wa=nr.length;wa--;)typeof(Dn=nr.shift())=="string"?Pr.push(Dn):Array.isArray(qn)&&(Dn.length===1||Dn[1]===void 0&&Dn[2]===void 0)?Pr.push(Dn[0]):Pr.push([Dn[0],Dn[1],Dn[2]]);return Pr}function Pl(qn,Dn){var nr;if(typeof qn=="string")nr=Dn(qn)[0];else if(Array.isArray(qn)){for(var Pr,wa,ea=qn.concat(),sl=[],Uc=ea.length;Uc--;)typeof(Pr=ea.shift())=="string"?sl.push(Dn(Pr)[0]):Array.isArray(Pr)&&typeof Pr[0]=="string"&&(wa=Dn(Pr[0],Pr[1],Pr[2]),sl.push([wa[0],wa[1],wa[2]]));nr=sl}return nr}var pa=!1,Qi=!0;if(typeof S=="string")pa=!0;else if(Array.isArray(S)){var nl=S.concat();et=[];for(var qa,hs=nl.length;hs--;)(typeof(qa=nl.shift())!="string"||Array.isArray(qa)&&typeof qa[0]!="string")&&(Qi=!1);pa=Qi}if(pa===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var So=Me/tr.internal.scaleFactor,No=So*(Pa-1);switch(ge.baseline){case"bottom":he-=No;break;case"top":he+=So-No;break;case"hanging":he+=So-2*No;break;case"middle":he+=So/2-No}if((an=ge.maxWidth||0)>0&&(typeof S=="string"?S=tr.splitTextToSize(S,an):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(qn,Dn){return qn.concat(tr.splitTextToSize(Dn,an))},[]))),Ge={text:S,x:q,y:he,options:ge,mutex:{pdfEscape:Rr,activeFontKey:dt,fonts:Nt,activeFontSize:Me}},rt.publish("preProcessText",Ge),S=Ge.text,kt=(ge=Ge.options).angle,Fr instanceof ot==0&&kt&&typeof kt=="number"){kt*=Math.PI/180,ge.rotationDirection===0&&(kt=-kt),V===D&&(kt=-kt);var zl=Math.cos(kt),ma=Math.sin(kt);Fr=new ot(zl,ma,-ma,zl,0,0)}else kt&&kt instanceof ot&&(Fr=kt);V!==D||Fr||(Fr=bn),(Zt=ge.charSpace||Si)!==void 0&&(_s+=O(te(Zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(vr=ge.horizontalScale)!==void 0&&(_s+=O(100*vr)+` Tz
`),ge.lang;var Gs=-1,Ua=ge.renderingMode!==void 0?ge.renderingMode:ge.stroke,ql=tr.internal.getCurrentPageInfo().pageContext;switch(Ua){case 0:case!1:case"fill":Gs=0;break;case 1:case!0:case"stroke":Gs=1;break;case 2:case"fillThenStroke":Gs=2;break;case 3:case"invisible":Gs=3;break;case 4:case"fillAndAddForClipping":Gs=4;break;case 5:case"strokeAndAddPathForClipping":Gs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gs=6;break;case 7:case"addToPathForClipping":Gs=7}var zc=ql.usedRenderingMode!==void 0?ql.usedRenderingMode:-1;Gs!==-1?_s+=Gs+` Tr
`:zc!==-1&&(_s+=`0 Tr
`),Gs!==-1&&(ql.usedRenderingMode=Gs),Ot=ge.align||"left";var di,Ki=Me*Pa,Ha=tr.internal.pageSize.getWidth(),qc=Nt[dt];Zt=ge.charSpace||Si,an=ge.maxWidth||0,On=Object.assign({autoencode:!0,noBOM:!0},ge.flags);var Ji=[],Ao=function(qn){return tr.getStringUnitWidth(qn,{font:qc,charSpace:Zt,fontSize:Me,doKerning:!1})*Me/Zi};if(Object.prototype.toString.call(S)==="[object Array]"){var ei;et=Pc(S),Ot!=="left"&&(di=et.map(Ao));var Ws,ga=0;if(Ot==="right"){q-=di[0],S=[],hs=et.length;for(var ba=0;ba<hs;ba++)ba===0?(Ws=hi(q),ei=ws(he)):(Ws=te(ga-di[ba]),ei=-Ki),S.push([et[ba],Ws,ei]),ga=di[ba]}else if(Ot==="center"){q-=di[0]/2,S=[],hs=et.length;for(var Ga=0;Ga<hs;Ga++)Ga===0?(Ws=hi(q),ei=ws(he)):(Ws=te((ga-di[Ga])/2),ei=-Ki),S.push([et[Ga],Ws,ei]),ga=di[Ga]}else if(Ot==="left"){S=[],hs=et.length;for(var Ul=0;Ul<hs;Ul++)S.push(et[Ul])}else if(Ot==="justify"&&qc.encoding==="Identity-H"){S=[],hs=et.length,an=an!==0?an:Ha;for(var Hl=0,Br=0;Br<hs;Br++)if(ei=Br===0?ws(he):-Ki,Ws=Br===0?hi(q):Hl,Br<hs-1){var Du=te((an-di[Br])/(et[Br].split(" ").length-1)),va=et[Br].split(" ");S.push([va[0]+" ",Ws,ei]),Hl=0;for(var ya=1;ya<va.length;ya++){var Ss=(Ao(va[ya-1]+" "+va[ya])-Ao(va[ya]))*Zi+Du;ya==va.length-1?S.push([va[ya],Ss,0]):S.push([va[ya]+" ",Ss,0]),Hl-=Ss}}else S.push([et[Br],Ws,ei]);S.push(["",Hl,0])}else{if(Ot!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],hs=et.length,an=an!==0?an:Ha,Br=0;Br<hs;Br++){ei=Br===0?ws(he):-Ki,Ws=Br===0?hi(q):0;var Wa=et[Br].split(" ").length-1,Gl=Wa>0?(an-di[Br])/Wa:0;Br<hs-1?Ji.push(O(te(Gl))):Ji.push(0),S.push([et[Br],Ws,ei])}}}(typeof ge.R2L=="boolean"?ge.R2L:ut)===!0&&(S=Pl(S,function(qn,Dn,nr){return[qn.split("").reverse().join(""),Dn,nr]})),Ge={text:S,x:q,y:he,options:ge,mutex:{pdfEscape:Rr,activeFontKey:dt,fonts:Nt,activeFontSize:Me}},rt.publish("postProcessText",Ge),S=Ge.text,Hr=Ge.mutex.isHex||!1;var Wl=Nt[dt].encoding;Wl!=="WinAnsiEncoding"&&Wl!=="StandardEncoding"||(S=Pl(S,function(qn,Dn,nr){return[za(qn),Dn,nr]})),et=Pc(S),S=[];for(var Ya,$a,xa,rl=Array.isArray(et[0])?1:0,pi="",Xa=function(qn,Dn,nr){var Pr="";return nr instanceof ot?(nr=typeof ge.angle=="number"?Bt(nr,new ot(1,0,0,1,qn,Dn)):Bt(new ot(1,0,0,1,qn,Dn),nr),V===D&&(nr=Bt(new ot(1,0,0,-1,0,0),nr)),Pr=nr.join(" ")+` Tm
`):Pr=O(qn)+" "+O(Dn)+` Td
`,Pr},Ls=0;Ls<et.length;Ls++){switch(pi="",rl){case 1:xa=(Hr?"<":"(")+et[Ls][0]+(Hr?">":")"),Ya=parseFloat(et[Ls][1]),$a=parseFloat(et[Ls][2]);break;case 0:xa=(Hr?"<":"(")+et[Ls]+(Hr?">":")"),Ya=hi(q),$a=ws(he)}Ji!==void 0&&Ji[Ls]!==void 0&&(pi=Ji[Ls]+` Tw
`),Ls===0?S.push(pi+Xa(Ya,$a,Fr)+xa):rl===0?S.push(pi+xa):rl===1&&S.push(pi+Xa(Ya,$a,Fr)+xa)}S=rl===0?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Ai=`BT
/`;return Ai+=dt+" "+Me+` Tf
`,Ai+=O(Me*Pa)+` TL
`,Ai+=fa+`
`,Ai+=_s,Ai+=S,z(Ai+="ET"),_[dt]=!0,tr};var Xo=b.__private__.clip=b.clip=function(S){return z(S==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return Xo("evenodd")},b.__private__.discardPath=b.discardPath=function(){return z("n"),this};var Hs=b.__private__.isValidStyle=function(S){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(q=!0),q};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(S){return Hs(S)&&(d=S),this};var Oc=b.__private__.getStyle=b.getStyle=function(S){var q=d;switch(S){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=S}return q},Dc=b.close=function(){return z("h"),this};b.stroke=function(){return z("S"),this},b.fill=function(S){return $i("f",S),this},b.fillEvenOdd=function(S){return $i("f*",S),this},b.fillStroke=function(S){return $i("B",S),this},b.fillStrokeEvenOdd=function(S){return $i("B*",S),this};var $i=function(S,q){er(q)==="object"?Cu(q,S):z(S)},Zo=function(S){S===null||V===D&&S===void 0||(S=Oc(S),z(S))};function Tu(S,q,he,ge,Te){var Ge=new Sh(q||this.boundingBox,he||this.xStep,ge||this.yStep,this.gState,Te||this.matrix);Ge.stream=this.stream;var et=S+"$$"+this.cloneIndex+++"$$";return vn(et,Ge),Ge}var Cu=function(S,q){var he=Qt[S.key],ge=gt[he];if(ge instanceof cu)z("q"),z(Rc(q)),ge.gState&&b.setGState(ge.gState),z(S.matrix.toString()+" cm"),z("/"+he+" sh"),z("Q");else if(ge instanceof Sh){var Te=new ot(1,0,0,-1,0,Ba());S.matrix&&(Te=Te.multiply(S.matrix||bn),he=Tu.call(ge,S.key,S.boundingBox,S.xStep,S.yStep,Te).id),z("q"),z("/Pattern cs"),z("/"+he+" scn"),ge.gState&&b.setGState(ge.gState),z(q),z("Q")}},Rc=function(S){switch(S){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ic=b.moveTo=function(S,q){return z(O(te(S))+" "+O(H(q))+" m"),this},ku=b.lineTo=function(S,q){return z(O(te(S))+" "+O(H(q))+" l"),this},Js=b.curveTo=function(S,q,he,ge,Te,Ge){return z([O(te(S)),O(H(q)),O(te(he)),O(H(ge)),O(te(Te)),O(H(Ge)),"c"].join(" ")),this};b.__private__.line=b.line=function(S,q,he,ge,Te){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(ge)||!Hs(Te))throw new Error("Invalid arguments passed to jsPDF.line");return V===R?this.lines([[he-S,ge-q]],S,q,[1,1],Te||"S"):this.lines([[he-S,ge-q]],S,q,[1,1]).stroke()},b.__private__.lines=b.lines=function(S,q,he,ge,Te,Ge){var et,kt,Ot,Zt,an,On,vr,Fr,tr,es,Hr,_s;if(typeof S=="number"&&(_s=he,he=q,q=S,S=_s),ge=ge||[1,1],Ge=Ge||!1,isNaN(q)||isNaN(he)||!Array.isArray(S)||!Array.isArray(ge)||!Hs(Te)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ic(q,he),et=ge[0],kt=ge[1],Zt=S.length,es=q,Hr=he,Ot=0;Ot<Zt;Ot++)(an=S[Ot]).length===2?(es=an[0]*et+es,Hr=an[1]*kt+Hr,ku(es,Hr)):(On=an[0]*et+es,vr=an[1]*kt+Hr,Fr=an[2]*et+es,tr=an[3]*kt+Hr,es=an[4]*et+es,Hr=an[5]*kt+Hr,Js(On,vr,Fr,tr,es,Hr));return Ge&&Dc(),Zo(Te),this},b.path=function(S){for(var q=0;q<S.length;q++){var he=S[q],ge=he.c;switch(he.op){case"m":Ic(ge[0],ge[1]);break;case"l":ku(ge[0],ge[1]);break;case"c":Js.apply(this,ge);break;case"h":Dc()}}return this},b.__private__.rect=b.rect=function(S,q,he,ge,Te){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(ge)||!Hs(Te))throw new Error("Invalid arguments passed to jsPDF.rect");return V===R&&(ge=-ge),z([O(te(S)),O(H(q)),O(te(he)),O(te(ge)),"re"].join(" ")),Zo(Te),this},b.__private__.triangle=b.triangle=function(S,q,he,ge,Te,Ge,et){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(ge)||isNaN(Te)||isNaN(Ge)||!Hs(et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-S,ge-q],[Te-he,Ge-ge],[S-Te,q-Ge]],S,q,[1,1],et,!0),this},b.__private__.roundedRect=b.roundedRect=function(S,q,he,ge,Te,Ge,et){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(ge)||isNaN(Te)||isNaN(Ge)||!Hs(et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var kt=4/3*(Math.SQRT2-1);return Te=Math.min(Te,.5*he),Ge=Math.min(Ge,.5*ge),this.lines([[he-2*Te,0],[Te*kt,0,Te,Ge-Ge*kt,Te,Ge],[0,ge-2*Ge],[0,Ge*kt,-Te*kt,Ge,-Te,Ge],[2*Te-he,0],[-Te*kt,0,-Te,-Ge*kt,-Te,-Ge],[0,2*Ge-ge],[0,-Ge*kt,Te*kt,-Ge,Te,-Ge]],S+Te,q,[1,1],et,!0),this},b.__private__.ellipse=b.ellipse=function(S,q,he,ge,Te){if(isNaN(S)||isNaN(q)||isNaN(he)||isNaN(ge)||!Hs(Te))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*he,et=4/3*(Math.SQRT2-1)*ge;return Ic(S+he,q),Js(S+he,q-et,S+Ge,q-ge,S,q-ge),Js(S-Ge,q-ge,S-he,q-et,S-he,q),Js(S-he,q+et,S-Ge,q+ge,S,q+ge),Js(S+Ge,q+ge,S+he,q+et,S+he,q),Zo(Te),this},b.__private__.circle=b.circle=function(S,q,he,ge){if(isNaN(S)||isNaN(q)||isNaN(he)||!Hs(ge))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,q,he,he,ge)},b.setFont=function(S,q,he){return he&&(q=W(q,he)),dt=xi(S,q,{disableWarning:!1}),this};var Xi=b.__private__.getFont=b.getFont=function(){return Nt[xi.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var S,q,he={};for(S in St)if(St.hasOwnProperty(S))for(q in he[S]=[],St[S])St[S].hasOwnProperty(q)&&he[S].push(q);return he},b.addFont=function(S,q,he,ge,Te){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?Te=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(he=W(he,ge)),os.call(this,S,q,he,Te=Te||"Identity-H")};var Oa,Qo=n.lineWidth||.200025,_o=b.__private__.getLineWidth=b.getLineWidth=function(){return Qo},Gt=b.__private__.setLineWidth=b.setLineWidth=function(S){return Qo=S,z(O(te(S))+" w"),this};b.__private__.setLineDash=It.API.setLineDash=It.API.setLineDashPattern=function(S,q){if(S=S||[],q=q||0,isNaN(q)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map(function(he){return O(te(he))}).join(" "),q=O(te(q)),z("["+S+"] "+q+" d"),this};var ju=b.__private__.getLineHeight=b.getLineHeight=function(){return Me*Oa};b.__private__.getLineHeight=b.getLineHeight=function(){return Me*Oa};var Vc=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Oa=S),this},Eu=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Oa};Vc(n.lineHeight);var hi=b.__private__.getHorizontalCoordinate=function(S){return te(S)},ws=b.__private__.getVerticalCoordinate=function(S){return V===D?S:_e[G].mediaBox.topRightY-_e[G].mediaBox.bottomLeftY-te(S)},Fc=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(S){return O(hi(S))},Ko=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(S){return O(ws(S))},fi=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Tn(fi)},b.__private__.setStrokeColor=b.setDrawColor=function(S,q,he,ge){return fi=mr({ch1:S,ch2:q,ch3:he,ch4:ge,pdfColorType:"draw",precision:2}),z(fi),this};var Jo=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Tn(Jo)},b.__private__.setFillColor=b.setFillColor=function(S,q,he,ge){return Jo=mr({ch1:S,ch2:q,ch3:he,ch4:ge,pdfColorType:"fill",precision:2}),z(Jo),this};var fa=n.textColor||"0 g",Mu=b.__private__.getTextColor=b.getTextColor=function(){return Tn(fa)};b.__private__.setTextColor=b.setTextColor=function(S,q,he,ge){return fa=mr({ch1:S,ch2:q,ch3:he,ch4:ge,pdfColorType:"text",precision:3}),this};var Si=n.charSpace,Vl=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Si||0)};b.__private__.setCharSpace=b.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Si=S,this};var Fl=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(S){var q=b.CapJoinStyles[S];if(q===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fl=q,z(q+" J"),this};var us=0;b.__private__.setLineJoin=b.setLineJoin=function(S){var q=b.CapJoinStyles[S];if(q===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return us=q,z(q+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return z(O(te(S))+" M"),this},b.GState=Np,b.setGState=function(S){(S=typeof S=="string"?Lt[Rt[S]]:da(null,S)).equals(mn)||(z("/"+S.id+" gs"),mn=S)};var da=function(S,q){if(!S||!Rt[S]){var he=!1;for(var ge in Lt)if(Lt.hasOwnProperty(ge)&&Lt[ge].equals(q)){he=!0;break}if(he)q=Lt[ge];else{var Te="GS"+(Object.keys(Lt).length+1).toString(10);Lt[Te]=q,q.id=Te}return S&&(Rt[S]=q.id),rt.publish("addGState",q),q}};b.addGState=function(S,q){return da(S,q),this},b.saveGraphicsState=function(){return z("q"),Tt.push({key:dt,size:Me,color:fa}),this},b.restoreGraphicsState=function(){z("Q");var S=Tt.pop();return dt=S.key,Me=S.size,fa=S.color,mn=null,this},b.setCurrentTransformationMatrix=function(S){return z(S.toString()+" cm"),this},b.comment=function(S){return z("#"+S),this};var Ni=function(S,q){var he=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function(Ge){isNaN(Ge)||(he=parseFloat(Ge))}});var ge=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ge},set:function(Ge){isNaN(Ge)||(ge=parseFloat(Ge))}});var Te="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Te},set:function(Ge){Te=Ge.toString()}}),this},Da=function(S,q,he,ge){Ni.call(this,S,q),this.type="rect";var Te=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Te},set:function(et){isNaN(et)||(Te=parseFloat(et))}});var Ge=ge||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(et){isNaN(et)||(Ge=parseFloat(et))}}),this},Bl=function(){this.page=vt,this.currentPage=G,this.pages=Ve.slice(0),this.pagesContext=_e.slice(0),this.x=ft,this.y=un,this.matrix=Yt,this.width=Ia(G),this.height=Bc(G),this.outputDestination=Je,this.id="",this.objectNumber=-1};Bl.prototype.restore=function(){vt=this.page,G=this.currentPage,_e=this.pagesContext,Ve=this.pages,ft=this.x,un=this.y,Yt=this.matrix,tl(G,this.width),Va(G,this.height),Je=this.outputDestination};var el=function(S,q,he,ge,Te){At.push(new Bl),vt=G=0,Ve=[],ft=S,un=q,Yt=Te,Jr([he,ge])};for(var Ra in b.beginFormObject=function(S,q,he,ge,Te){return el(S,q,he,ge,Te),this},b.endFormObject=function(S){return(function(q){if(pt[q])At.pop().restore();else{var he=new Bl,ge="Xo"+(Object.keys(st).length+1).toString(10);he.id=ge,pt[q]=ge,st[ge]=he,rt.publish("addFormObject",he),At.pop().restore()}})(S),this},b.doFormObject=function(S,q){var he=st[pt[S]];return z("q"),z(q.toString()+" cm"),z("/"+he.id+" Do"),z("Q"),this},b.getFormObject=function(S){var q=st[pt[S]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},b.save=function(S,q){return S=S||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(ou(ha(ui()),S),typeof ou.unload=="function"&&en.setTimeout&&setTimeout(ou.unload,911),this):new Promise(function(he,ge){try{var Te=ou(ha(ui()),S);typeof ou.unload=="function"&&en.setTimeout&&setTimeout(ou.unload,911),he(Te)}catch(Ge){ge(Ge.message)}})},It.API)It.API.hasOwnProperty(Ra)&&(Ra==="events"&&It.API.events.length?(function(S,q){var he,ge,Te;for(Te=q.length-1;Te!==-1;Te--)he=q[Te][0],ge=q[Te][1],S.subscribe.apply(S,[he].concat(typeof ge=="function"?[ge]:ge))})(rt,It.API.events):b[Ra]=It.API[Ra]);function Ia(S){return _e[S].mediaBox.topRightX-_e[S].mediaBox.bottomLeftX}function tl(S,q){_e[S].mediaBox.topRightX=q+_e[S].mediaBox.bottomLeftX}function Bc(S){return _e[S].mediaBox.topRightY-_e[S].mediaBox.bottomLeftY}function Va(S,q){_e[S].mediaBox.topRightY=q+_e[S].mediaBox.bottomLeftY}var Fa=b.getPageWidth=function(S){return Ia(S=S||G)/xt},Lu=b.setPageWidth=function(S,q){tl(S,q*xt)},Ba=b.getPageHeight=function(S){return Bc(S=S||G)/xt},Ou=b.setPageHeight=function(S,q){Va(S,q*xt)};return b.internal={pdfEscape:Rr,getStyle:Oc,getFont:Xi,getFontSize:Ye,getCharSpace:Vl,getTextColor:Mu,getLineHeight:ju,getLineHeightFactor:Eu,getLineWidth:_o,write:ke,getHorizontalCoordinate:hi,getVerticalCoordinate:ws,getCoordinateString:Fc,getVerticalCoordinateString:Ko,collections:{},newObject:Ut,newAdditionalObject:Mn,newObjectDeferred:hn,newObjectDeferredBegin:fn,getFilters:yn,putStream:sn,events:rt,scaleFactor:xt,pageSize:{getWidth:function(){return Fa(G)},setWidth:function(S){Lu(G,S)},getHeight:function(){return Ba(G)},setHeight:function(S){Ou(G,S)}},encryptionOptions:p,encryption:Vr,getEncryptor:function(S){return p!==null?Vr.encryptor(S,0):function(q){return q}},output:xo,getNumberOfPages:ci,get pages(){return Ve},out:z,f2:j,f3:F,getPageInfo:Cr,getPageInfoByObjId:wo,getCurrentPageInfo:Il,getPDFVersion:N,Point:Ni,Rectangle:Da,Matrix:ot,hasHotfix:cs},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Fa(G)},set:function(S){Lu(G,S)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Ba(G)},set:function(S){Ou(G,S)},enumerable:!0,configurable:!0}),(function(S){for(var q=0,he=Ue.length;q<he;q++){var ge=os.call(this,S[q][0],S[q][1],S[q][2],Ue[q][3],!0);y===!1&&(_[ge]=!0);var Te=S[q][0].split("-");wn({id:ge,fontName:Te[0],fontStyle:Te[1]||""})}rt.publish("addFonts",{fonts:Nt,dictionary:St})}).call(b,Ue),dt="F1",ls(a,t),rt.publish("initialized"),b}vh.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},vh.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},vh.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},vh.prototype.processOwnerPassword=function(n,e){return Sg(_g(e).substr(0,5),n)},vh.prototype.encryptor=function(n,e){var t=_g(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Sg(t,s)}},Np.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||er(n)!==er(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},It.API={events:[]},It.version="3.0.4";var Qr=It.API,O2=1,Au=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mh=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},cn=function(n){return n.toFixed(2)},vc=function(n){return n.toFixed(5)};Qr.__acroform__={};var Yi=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},ex=function(n){return n*O2},zo=function(n){var e=new u4,t=Mt.internal.getHeight(n)||0,s=Mt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(cn(s)),Number(cn(t))],e},DM=Qr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},RM=Qr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},IM=Qr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},rs=Qr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return IM(n,e-1)},ss=Qr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return DM(n,e-1)},is=Qr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return RM(n,e-1)},VM=Qr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=n[0],o=n[1],u=n[2],c=n[3],f={};return f.lowerLeft_X=t(a)||0,f.lowerLeft_Y=s(o+c)||0,f.upperRight_X=t(a+u)||0,f.upperRight_Y=s(o)||0,[Number(cn(f.lowerLeft_X)),Number(cn(f.lowerLeft_Y)),Number(cn(f.upperRight_X)),Number(cn(f.upperRight_Y))]},FM=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,s=Ng(n,t),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+a+" "+cn(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=zo(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},Ng=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=n.multiline?a.map(function(j){return j.split(`
`)}):a.map(function(j){return[j]});var o=t,u=Mt.internal.getHeight(n)||0;u=u<0?-u:u;var c=Mt.internal.getWidth(n)||0;c=c<0?-c:c;var f=function(j,F,te){if(j+1<a.length){var H=F+" "+a[j+1][0];return I1(H,n,te).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var d,p,y=I1("3",n,o).height,_=n.multiline?u-o:(u-y)/2,b=_+=2,A=0,N=0,k=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+I1(e,n,o=12).width+", FieldWidth:"+c+`
`;break}for(var C="",R=0,D=0;D<a.length;D++)if(a.hasOwnProperty(D)){var V=!1;if(a[D].length!==1&&k!==a[D].length-1){if((y+2)*(R+2)+2>u)continue e;C+=a[D][k],V=!0,N=D,D--}else{C=(C+=a[D][k]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var I=parseInt(D),Y=f(I,C,o),W=D>=a.length-1;if(Y&&!W){C+=" ",k=0;continue}if(Y||W){if(W)N=I;else if(n.multiline&&(y+2)*(R+2)+2>u)continue e}else{if(!n.multiline||(y+2)*(R+2)+2>u)continue e;N=I}}for(var O="",B=A;B<=N;B++){var K=a[B];if(n.multiline){if(B===N){O+=K[k]+" ",k=(k+1)%K.length;continue}if(B===A){O+=K[K.length-1]+" ";continue}}O+=K[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,p=I1(O,n,o).width,n.textAlign){case"right":d=c-p-2;break;case"center":d=(c-p)/2;break;default:d=2}e+=cn(d)+" "+cn(b)+` Td
`,e+="("+Au(O)+`) Tj
`,e+=-cn(d)+` 0 Td
`,b=-(o+2),p=0,A=V?N:N+1,R++,C=""}break}return s.text=e,s.fontSize=o,s},I1=function(n,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},BM={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},PM=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},zM=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(bo.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(BM)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");O2=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new h4,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&PM(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var c=s[u],f=[],d=c.Rect;if(c.Rect&&(c.Rect=VM(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Mt.createDefaultAppearanceStream(c),er(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(f=c.getKeyValueListForStream()),c.Rect=d,c.hasAppearanceStream&&!c.appearanceStreamContent){var p=FM(c);f.push({key:"AP",value:"<</N "+p+">>"}),a.internal.acroformPlugin.xForms.push(p)}if(c.appearanceStreamContent){var y="";for(var _ in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(_)){var b=c.appearanceStreamContent[_];if(y+="/"+_+" ",y+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var u in b)if(b.hasOwnProperty(u)){var A=b[u];typeof A=="function"&&(A=A.call(a,c)),y+="/"+u+" "+A+" ",a.internal.acroformPlugin.xForms.indexOf(A)>=0||a.internal.acroformPlugin.xForms.push(A)}}else typeof(A=b)=="function"&&(A=A.call(a,c)),y+="/"+u+" "+A,a.internal.acroformPlugin.xForms.indexOf(A)>=0||a.internal.acroformPlugin.xForms.push(A);y+=">>"}f.push({key:"AP",value:`<<
`+y+">>"})}a.internal.putStream({additionalKeyValues:f,objectId:c.objId}),a.internal.out("endobj")}o&&(function(N,k){for(var C in N)if(N.hasOwnProperty(C)){var R=C,D=N[C];k.internal.newObjectDeferredBegin(D.objId,!0),er(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete N[R]}})(a.internal.acroformPlugin.xForms,a)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},c4=Qr.__acroform__.arrayToPdfArray=function(n,e,t){var s=function(u){return u};if(Array.isArray(n)){for(var a="[",o=0;o<n.length;o++)switch(o!==0&&(a+=" "),er(n[o])){case"boolean":case"number":case"object":a+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+Au(s(n[o].toString()))+")"):a+=n[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Bm=function(n,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Au(s(n))+")"},qo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qo.prototype.toString=function(){return this.objId+" 0 R"},qo.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},qo.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?n.push({key:s,value:c4(a,this.objId,this.scope)}):a instanceof qo?(a.scope=this.scope,n.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&n.push({key:s,value:a}))}return n};var u4=function(){qo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Yi(u4,qo);var h4=function(){qo.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Au(t(n))+")"}},set:function(t){n=t}})};Yi(h4,qo);var bo=function n(){qo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!rs(e,3)},set:function(C){C?this.F=ss(e,3):this.F=is(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');t=C}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(C){s=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(C){s[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(C){s[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(C){s[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(C){s[3]=C}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Ap)return;o="FieldObject"+n.FieldNum++}var C=function(R){return R};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Au(C(o))+")"},set:function(C){o=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(C){o=C}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(C){f=C}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/O2:d},set:function(C){d=C}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(C){p=C}});var y="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!y||this instanceof Ap||this instanceof pu))return Bm(y,this.objId,this.scope)},set:function(C){C=C.toString(),y=C}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof zs==0?Bm(_,this.objId,this.scope):_},set:function(C){C=C.toString(),_=this instanceof zs==0?C.substr(0,1)==="("?mh(C.substr(1,C.length-2)):mh(C):C}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof zs==1?mh(_.substr(1,_.length-1)):_},set:function(C){C=C.toString(),_=this instanceof zs==1?"/"+C:C}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof zs==0?Bm(b,this.objId,this.scope):b},set:function(C){C=C.toString(),b=this instanceof zs==0?C.substr(0,1)==="("?mh(C.substr(1,C.length-2)):mh(C):C}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof zs==1?mh(b.substr(1,b.length-1)):b},set:function(C){C=C.toString(),b=this instanceof zs==1?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(C){C=!!C,N=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(C){A=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,1)},set:function(C){C?this.Ff=ss(this.Ff,1):this.Ff=is(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,2)},set:function(C){C?this.Ff=ss(this.Ff,2):this.Ff=is(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,3)},set:function(C){C?this.Ff=ss(this.Ff,3):this.Ff=is(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');k=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(k){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};Yi(bo,qo);var Ch=function(){bo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return c4(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,c){c||(c=1);for(var f,d=[];f=u.exec(o);)d.push(f[c]);return d})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,18)},set:function(t){t?this.Ff=ss(this.Ff,18):this.Ff=is(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ss(this.Ff,19):this.Ff=is(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,20)},set:function(t){t?(this.Ff=ss(this.Ff,20),e.sort()):this.Ff=is(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,22)},set:function(t){t?this.Ff=ss(this.Ff,22):this.Ff=is(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,23)},set:function(t){t?this.Ff=ss(this.Ff,23):this.Ff=is(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,27)},set:function(t){t?this.Ff=ss(this.Ff,27):this.Ff=is(this.Ff,27)}}),this.hasAppearanceStream=!1};Yi(Ch,bo);var kh=function(){Ch.call(this),this.fontName="helvetica",this.combo=!1};Yi(kh,Ch);var jh=function(){kh.call(this),this.combo=!0};Yi(jh,kh);var W1=function(){jh.call(this),this.edit=!0};Yi(W1,jh);var zs=function(){bo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,15)},set:function(t){t?this.Ff=ss(this.Ff,15):this.Ff=is(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,16)},set:function(t){t?this.Ff=ss(this.Ff,16):this.Ff=is(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,17)},set:function(t){t?this.Ff=ss(this.Ff,17):this.Ff=is(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,26)},set:function(t){t?this.Ff=ss(this.Ff,26):this.Ff=is(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+Au(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){er(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Yi(zs,bo);var Y1=function(){zs.call(this),this.pushButton=!0};Yi(Y1,zs);var Eh=function(){zs.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Yi(Eh,zs);var Ap=function(){var n,e;bo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+Au(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){er(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Mt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Yi(Ap,bo),Eh.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Eh.prototype.createOption=function(n){var e=new Ap;return e.Parent=this,e.optionName=n,this.Kids.push(e),qM.call(this.scope,e),e};var $1=function(){zs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Mt.CheckBox.createAppearanceStream()};Yi($1,zs);var pu=function(){bo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,13)},set:function(e){e?this.Ff=ss(this.Ff,13):this.Ff=is(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,21)},set:function(e){e?this.Ff=ss(this.Ff,21):this.Ff=is(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,23)},set:function(e){e?this.Ff=ss(this.Ff,23):this.Ff=is(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,24)},set:function(e){e?this.Ff=ss(this.Ff,24):this.Ff=is(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,25)},set:function(e){e?this.Ff=ss(this.Ff,25):this.Ff=is(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,26)},set:function(e){e?this.Ff=ss(this.Ff,26):this.Ff=is(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Yi(pu,bo);var X1=function(){pu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!rs(this.Ff,14)},set:function(n){n?this.Ff=ss(this.Ff,14):this.Ff=is(this.Ff,14)}}),this.password=!0};Yi(X1,pu);var Mt={CheckBox:{createAppearanceStream:function(){return{N:{On:Mt.CheckBox.YesNormal},D:{On:Mt.CheckBox.YesPushDown,Off:Mt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=zo(n);e.scope=n.scope;var t=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),o=Ng(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+cn(Mt.internal.getWidth(n))+" "+cn(Mt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+cn(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=zo(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),a=[],o=Mt.internal.getHeight(n),u=Mt.internal.getWidth(n),c=Ng(n,n.caption);return a.push("1 g"),a.push("0 0 "+cn(u)+" "+cn(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+cn(u-1)+" "+cn(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+cn(c.fontSize)+" Tf "+s),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(n){var e=zo(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+cn(Mt.internal.getWidth(n))+" "+cn(Mt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Mt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Mt.RadioButton.Circle.YesNormal,e.D[n]=Mt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=zo(n);e.scope=n.scope;var t=[],s=Mt.internal.getWidth(n)<=Mt.internal.getHeight(n)?Mt.internal.getWidth(n)/4:Mt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Mt.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+vc(Mt.internal.getWidth(n)/2)+" "+vc(Mt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=zo(n);e.scope=n.scope;var t=[],s=Mt.internal.getWidth(n)<=Mt.internal.getHeight(n)?Mt.internal.getWidth(n)/4:Mt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*Mt.internal.Bezier_C).toFixed(5)),u=Number((s*Mt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+vc(Mt.internal.getWidth(n)/2)+" "+vc(Mt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+vc(Mt.internal.getWidth(n)/2)+" "+vc(Mt.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=zo(n);e.scope=n.scope;var t=[],s=Mt.internal.getWidth(n)<=Mt.internal.getHeight(n)?Mt.internal.getWidth(n)/4:Mt.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*Mt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+vc(Mt.internal.getWidth(n)/2)+" "+vc(Mt.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Mt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Mt.RadioButton.Cross.YesNormal,e.D[n]=Mt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=zo(n);e.scope=n.scope;var t=[],s=Mt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+cn(Mt.internal.getWidth(n)-2)+" "+cn(Mt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(cn(s.x1.x)+" "+cn(s.x1.y)+" m"),t.push(cn(s.x2.x)+" "+cn(s.x2.y)+" l"),t.push(cn(s.x4.x)+" "+cn(s.x4.y)+" m"),t.push(cn(s.x3.x)+" "+cn(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=zo(n);e.scope=n.scope;var t=Mt.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+cn(Mt.internal.getWidth(n))+" "+cn(Mt.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+cn(Mt.internal.getWidth(n)-2)+" "+cn(Mt.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(cn(t.x1.x)+" "+cn(t.x1.y)+" m"),s.push(cn(t.x2.x)+" "+cn(t.x2.y)+" l"),s.push(cn(t.x4.x)+" "+cn(t.x4.y)+" m"),s.push(cn(t.x3.x)+" "+cn(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=zo(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+cn(Mt.internal.getWidth(n))+" "+cn(Mt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Mt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Mt.internal.getWidth(n),t=Mt.internal.getHeight(n),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},Mt.internal.getWidth=function(n){var e=0;return er(n)==="object"&&(e=ex(n.Rect[2])),e},Mt.internal.getHeight=function(n){var e=0;return er(n)==="object"&&(e=ex(n.Rect[3])),e};var qM=Qr.addField=function(n){if(zM(this,n),!(n instanceof bo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Qr.AcroFormChoiceField=Ch,Qr.AcroFormListBox=kh,Qr.AcroFormComboBox=jh,Qr.AcroFormEditBox=W1,Qr.AcroFormButton=zs,Qr.AcroFormPushButton=Y1,Qr.AcroFormRadioButton=Eh,Qr.AcroFormCheckBox=$1,Qr.AcroFormTextField=pu,Qr.AcroFormPasswordField=X1,Qr.AcroFormAppearance=Mt,Qr.AcroForm={ChoiceField:Ch,ListBox:kh,ComboBox:jh,EditBox:W1,Button:zs,PushButton:Y1,RadioButton:Eh,CheckBox:$1,TextField:pu,PasswordField:X1,Appearance:Mt},It.AcroForm={ChoiceField:Ch,ListBox:kh,ComboBox:jh,EditBox:W1,Button:zs,PushButton:Y1,RadioButton:Eh,CheckBox:$1,TextField:pu,PasswordField:X1,Appearance:Mt};It.AcroForm;function f4(n){return n.reduce(function(e,t,s){return e[t]=s,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=n.__addimage__.getImageFileTypeByImageData=function(j,F){var te,H,ae,$,re,le=t;if((F=F||t)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(Y(j))for(re in s)for(ae=s[re],te=0;te<ae.length;te+=1){for($=!0,H=0;H<ae[te].length;H+=1)if(ae[te][H]!==void 0&&ae[te][H]!==j[H]){$=!1;break}if($===!0){le=re;break}}else for(re in s)for(ae=s[re],te=0;te<ae.length;te+=1){for($=!0,H=0;H<ae[te].length;H+=1)if(ae[te][H]!==void 0&&ae[te][H]!==j.charCodeAt(H)){$=!1;break}if($===!0){le=re;break}}return le===t&&F!==t&&(le=F),le},o=function j(F){for(var te=this.internal.write,H=this.internal.putStream,ae=(0,this.internal.getFilters)();ae.indexOf("FlateEncode")!==-1;)ae.splice(ae.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:F.width}),$.push({key:"Height",value:F.height}),F.colorSpace===C.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===C.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)&&F.transparency.length>0){for(var re="",le=0,pe=F.transparency.length;le<pe;le++)re+=F.transparency[le]+" "+F.transparency[le]+" ";$.push({key:"Mask",value:"["+re+"]"})}F.sMask!==void 0&&$.push({key:"SMask",value:F.objectId+1+" 0 R"});var be=F.filter!==void 0?["/"+F.filter]:void 0;if(H({data:F.data,additionalKeyValues:$,alreadyAppliedFilters:be,objectId:F.objectId}),te("endobj"),"sMask"in F&&F.sMask!==void 0){var P,M=(P=F.sMaskBitsPerComponent)!==null&&P!==void 0?P:F.bitsPerComponent,G={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:F.sMask};"filter"in F&&(G.decodeParameters="/Predictor ".concat(F.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(F.width),G.filter=F.filter),j.call(this,G)}if(F.colorSpace===C.INDEXED){var J=this.internal.newObject();H({data:O(new Uint8Array(F.palette)),objectId:J}),te("endobj")}},u=function(){var j=this.internal.collections[e+"images"];for(var F in j)o.call(this,j[F])},c=function(){var j,F=this.internal.collections[e+"images"],te=this.internal.write;for(var H in F)te("/I"+(j=F[H]).index,j.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",c))},d=function(){var j=this.internal.collections[e+"images"];return f.call(this),j},p=function(){return Object.keys(this.internal.collections[e+"images"]).length},y=function(j){return typeof n["process"+j.toUpperCase()]=="function"},_=function(j){return er(j)==="object"&&j.nodeType===1},b=function(j,F){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var te=""+j.getAttribute("src");if(te.indexOf("data:image/")===0)return G1(unescape(te).split("base64,").pop());var H=n.loadFile(te,!0);if(H!==void 0)return H}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var ae;switch(F){case"PNG":ae="image/png";break;case"WEBP":ae="image/webp";break;default:ae="image/jpeg"}return G1(j.toDataURL(ae,1).split("base64,").pop())}},A=function(j){var F=this.internal.collections[e+"images"];if(F){for(var te in F)if(j===F[te].alias)return F[te]}},N=function(j,F,te){return j||F||(j=-96,F=-96),j<0&&(j=-1*te.width*72/j/this.internal.scaleFactor),F<0&&(F=-1*te.height*72/F/this.internal.scaleFactor),j===0&&(j=F*te.width/te.height),F===0&&(F=j*te.height/te.width),[j,F]},k=function(j,F,te,H,ae,$){var re=N.call(this,te,H,ae),le=this.internal.getCoordinateString,pe=this.internal.getVerticalCoordinateString,be=d.call(this);if(te=re[0],H=re[1],be[ae.index]=ae,$){$*=Math.PI/180;var P=Math.cos($),M=Math.sin($),G=function(Q){return Q.toFixed(4)},J=[G(P),G(M),G(-1*M),G(P),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,le(j),pe(F+H),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([le(te),"0","0",le(H),"0","0","cm"].join(" "))):this.internal.write([le(te),"0","0",le(H),le(j),pe(F+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ae.index+" Do"),this.internal.write("Q")},C=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=n.__addimage__.sHashCode=function(j){var F,te,H=0;if(typeof j=="string")for(te=j.length,F=0;F<te;F++)H=(H<<5)-H+j.charCodeAt(F),H|=0;else if(Y(j))for(te=j.byteLength/2,F=0;F<te;F++)H=(H<<5)-H+j[F],H|=0;return H},V=n.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var F=!0;return j.length===0&&(F=!1),j.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(F=!1),F},I=n.__addimage__.extractImageFromDataUrl=function(j){if(j==null||!(j=j.trim()).startsWith("data:"))return null;var F=j.indexOf(",");return F<0?null:j.substring(0,F).trim().endsWith("base64")?j.substring(F+1):null};n.__addimage__.isArrayBuffer=function(j){return j instanceof ArrayBuffer};var Y=n.__addimage__.isArrayBufferView=function(j){return j instanceof Int8Array||j instanceof Uint8Array||j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array},W=n.__addimage__.binaryStringToUint8Array=function(j){for(var F=j.length,te=new Uint8Array(F),H=0;H<F;H++)te[H]=j.charCodeAt(H);return te},O=n.__addimage__.arrayBufferToBinaryString=function(j){for(var F="",te=Y(j)?j:new Uint8Array(j),H=0;H<te.length;H+=8192)F+=String.fromCharCode.apply(null,te.subarray(H,H+8192));return F};n.addImage=function(){var j,F,te,H,ae,$,re,le,pe;if(typeof arguments[1]=="number"?(F=t,te=arguments[1],H=arguments[2],ae=arguments[3],$=arguments[4],re=arguments[5],le=arguments[6],pe=arguments[7]):(F=arguments[1],te=arguments[2],H=arguments[3],ae=arguments[4],$=arguments[5],re=arguments[6],le=arguments[7],pe=arguments[8]),er(j=arguments[0])==="object"&&!_(j)&&"imageData"in j){var be=j;j=be.imageData,F=be.format||F||t,te=be.x||te||0,H=be.y||H||0,ae=be.w||be.width||ae,$=be.h||be.height||$,re=be.alias||re,le=be.compression||le,pe=be.rotation||be.angle||pe}var P=this.internal.getFilters();if(le===void 0&&P.indexOf("FlateEncode")!==-1&&(le="SLOW"),isNaN(te)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var M=B.call(this,j,F,re,le);return k.call(this,te,H,ae,$,M,pe),this};var B=function(j,F,te,H){var ae,$,re;if(typeof j=="string"&&a(j)===t){j=unescape(j);var le=K(j,!1);(le!==""||(le=n.loadFile(j,!0))!==void 0)&&(j=le)}if(_(j)&&(j=b(j,F)),F=a(j,F),!y(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((re=te)==null||re.length===0)&&(te=(function(pe){return typeof pe=="string"||Y(pe)?D(pe):Y(pe.data)?D(pe.data):null})(j)),(ae=A.call(this,te))||(j instanceof Uint8Array||F==="RGBA"||($=j,j=W(j)),ae=this["process"+F.toUpperCase()](j,p.call(this),te,(function(pe){return pe&&typeof pe=="string"&&(pe=pe.toUpperCase()),pe in n.image_compression?pe:R.NONE})(H),$)),!ae)throw new Error("An unknown error occurred whilst processing the image.");return ae},K=n.__addimage__.convertBase64ToBinaryString=function(j,F){F=typeof F!="boolean"||F;var te,H="";if(typeof j=="string"){var ae;te=(ae=I(j))!==null&&ae!==void 0?ae:j;try{H=G1(te)}catch($){if(F)throw V(te)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};n.getImageProperties=function(j){var F,te,H="";if(_(j)&&(j=b(j)),typeof j=="string"&&a(j)===t&&((H=K(j,!1))===""&&(H=n.loadFile(j)||""),j=H),te=a(j),!y(te))throw new Error("addImage does not support files of type '"+te+"', please ensure that a plugin for '"+te+"' support is added.");if(j instanceof Uint8Array||(j=W(j)),!(F=this["process"+te.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=te,F}})(It.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};It.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,p=!1,y=0;y<d.length&&!p;y++)switch((s=d[y]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var _=0;_<d.length;_++){s=d[_];var b=this.internal.pdfEscape,A=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(N.objId),R=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y)+"] ")+"/Contents ("+b(C(s.contents))+")",o+=" /Popup "+k.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+b(C(R))+") >>",N.content=o;var D=N.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+c(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+c(s.bounds.y)+"] ")+" /Parent "+D,s.open&&(o+=" /Open true"),o+=" >>",k.content=o,this.internal.write(N.objId,"0 R",k.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+c(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+c(s.bounds.y+s.bounds.h)+"] ";var V=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(A(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var I=this.annotations._nameMap[s.options.name];s.options.pageNumber=I.page,s.options.top=I.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(A(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var Y=c(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+Y+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},n.link=function(t,s,a,o,u){var c=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:f(t),y:d(s),w:f(t+a),h:d(s+o)},options:u,type:"link"})},n.textWithLink=function(t,s,a,o){var u,c,f=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var p=this.splitTextToSize(t,c).length;u=Math.ceil(d*p)}else c=f,u=d;return this.text(t,s,a,o),a+=.2*d,o.align==="center"&&(s-=f/2),o.align==="right"&&(s-=f),this.link(s,a-d,c,u,o),f},n.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(It.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(N){return e[N.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},c=n.__arabicParser__.isArabicEndLetter=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length<=2},f=n.__arabicParser__.isArabicAlfLetter=function(N){return u(N)&&a.indexOf(N.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length>=3};var p=n.__arabicParser__.arabicLetterHasMedialForm=function(N){return u(N)&&o(N)&&e[N.charCodeAt(0)].length==4},y=n.__arabicParser__.resolveLigatures=function(N){var k=0,C=t,R="",D=0;for(k=0;k<N.length;k+=1)C[N.charCodeAt(k)]!==void 0?(D++,typeof(C=C[N.charCodeAt(k)])=="number"&&(R+=String.fromCharCode(C),C=t,D=0),k===N.length-1&&(C=t,R+=N.charAt(k-(D-1)),k-=D-1,D=0)):(C=t,R+=N.charAt(k-D),k-=D,D=0);return R};n.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&s[N.charCodeAt(0)]!==void 0};var _=n.__arabicParser__.getCorrectForm=function(N,k,C){return u(N)?o(N)===!1?-1:!d(N)||!u(k)&&!u(C)||!u(C)&&c(k)||c(N)&&!u(k)||c(N)&&f(k)||c(N)&&c(k)?0:p(N)&&u(k)&&!c(k)&&u(C)&&d(C)?3:c(N)||!u(C)?1:2:-1},b=function(N){var k=0,C=0,R=0,D="",V="",I="",Y=(N=N||"").split("\\s+"),W=[];for(k=0;k<Y.length;k+=1){for(W.push(""),C=0;C<Y[k].length;C+=1)D=Y[k][C],V=Y[k][C-1],I=Y[k][C+1],u(D)?(R=_(D,V,I),W[k]+=R!==-1?String.fromCharCode(e[D.charCodeAt(0)][R]):D):W[k]+=D;W[k]=y(W[k])}return W.join(" ")},A=n.__arabicParser__.processArabic=n.processArabic=function(){var N,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(k)){var R=0;for(C=[],R=0;R<k.length;R+=1)Array.isArray(k[R])?C.push([b(k[R][0]),k[R][1],k[R][2]]):C.push([b(k[R])]);N=C}else N=b(k);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};n.events.push(["preProcessText",A])})(It.API),It.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(c){u=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(It.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(N){f=N}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(N){d=N}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var y=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(N){_=N}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(N){b=N}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(N){A=N}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(f){return s.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},n.getTextDimensions=function(f,d){s.call(this);var p=(d=d||{}).fontSize||this.getFontSize(),y=d.font||this.getFont(),_=d.scaleFactor||this.internal.scaleFactor,b=0,A=0,N=0,k=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var C=d.maxWidth;C>0?typeof f=="string"?f=this.splitTextToSize(f,C):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(D,V){return D.concat(k.splitTextToSize(V,C))},[])):f=Array.isArray(f)?f:[f];for(var R=0;R<f.length;R++)b<(N=this.getStringUnitWidth(f[R],{font:y})*p)&&(b=N);return b!==0&&(A=f.length),{w:b/=_,h:Math.max((A*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/_,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var d=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,y=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+y.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=y.top,b&&_&&(this.printHeaderRow(f.lineNumber,!0),f.y+=_[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-p,f.y+p,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+p,{align:"center",baseline:"top",maxWidth:f.width-p-p}):this.text(f.text,f.x+p,f.y+p,{align:"left",baseline:"top",maxWidth:f.width-p-p})),this.internal.__cell__.lastCell=f,this};n.table=function(f,d,p,y,_){if(s.call(this),!p)throw new Error("No data for PDF table.");var b,A,N,k,C=[],R=[],D=[],V={},I={},Y=[],W=[],O=(_=_||{}).autoSize||!1,B=_.printHeaders!==!1,K=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,j=_.margins||Object.assign({width:this.getPageWidth()},e),F=typeof _.padding=="number"?_.padding:3,te=_.headerBackgroundColor||"#c8c8c8",H=_.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=te,this.internal.__cell__.headerTextColor=H,this.setFontSize(K),y==null)R=C=Object.keys(p[0]),D=C.map(function(){return"left"});else if(Array.isArray(y)&&er(y[0])==="object")for(C=y.map(function(be){return be.name}),R=y.map(function(be){return be.prompt||be.name||""}),D=y.map(function(be){return be.align||"left"}),b=0;b<y.length;b+=1)I[y[b].name]=.7499990551181103*y[b].width;else Array.isArray(y)&&typeof y[0]=="string"&&(R=C=y,D=C.map(function(){return"left"}));if(O||Array.isArray(y)&&typeof y[0]=="string")for(b=0;b<C.length;b+=1){for(V[k=C[b]]=p.map(function(be){return be[k]}),this.setFont(void 0,"bold"),Y.push(this.getTextDimensions(R[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=V[k],this.setFont(void 0,"normal"),N=0;N<A.length;N+=1)Y.push(this.getTextDimensions(A[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);I[k]=Math.max.apply(null,Y)+F+F,Y=[]}if(B){var ae={};for(b=0;b<C.length;b+=1)ae[C[b]]={},ae[C[b]].text=R[b],ae[C[b]].align=D[b];var $=c.call(this,ae,I);W=C.map(function(be){return new o(f,d,I[be],$,ae[be].text,void 0,ae[be].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var re=y.reduce(function(be,P){return be[P.name]=P.align,be},{});for(b=0;b<p.length;b+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:b,data:p[b]},this);var le=c.call(this,p[b],I);for(N=0;N<C.length;N+=1){var pe=p[b][C[N]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:b,col:N,data:pe},this),u.call(this,new o(f,d,I[C[N]],le,pe,b+2,re[C[N]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var c=function(f,d){var p=this.internal.__cell__.padding,y=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(f).map(function(b){var A=f[b];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,d[b]-p-p)},this).map(function(b){return this.getLineHeightFactor()*b.length*y/_+p+p},this).reduce(function(b,A){return Math.max(b,A)},0)};n.setTableHeaderRow=function(f){s.call(this),this.internal.__cell__.tableHeaderRow=f},n.printHeaderRow=function(f,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var y=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(y[0],y[1],y[2],y[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){p=this.internal.__cell__.tableHeaderRow[b].clone(),d&&(p.y=this.internal.__cell__.margins.top||0,_.push(p)),p.lineNumber=f;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,p),this.setTextColor(A)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(It.API);var d4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},p4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ag=f4(p4),m4=[100,200,300,400,500,600,700,800,900],UM=f4(m4);function Pm(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return d4[o=o||"normal"]?o:"normal"})(n.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),a=(function(o){return typeof Ag[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:s,stretch:a,src:n.src||[],ref:n.ref||{name:e,style:[a,t,s].join(" ")}}}function tx(n,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(n[e[a]])return n[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(n[e[a]])return n[e[a]]}var HM={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},nx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function rx(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function sx(n){return n.trimLeft()}function GM(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function WM(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var V1,ix,ax,gh,F1,ox,lx,cx,zm=["times"];function ux(n,e,t,s,a){var o=4,u=fx;switch(a){case It.API.image_compression.FAST:o=1,u=hx;break;case It.API.image_compression.MEDIUM:o=6,u=dx;break;case It.API.image_compression.SLOW:o=9,u=px}n=(function(f,d,p,y){for(var _,b=f.length/d,A=new Uint8Array(f.length+b),N=[YM,hx,fx,dx,px],k=0;k<b;k+=1){var C=k*d,R=f.subarray(C,C+d);if(y)A.set(y(R,p,_),C+k);else{for(var D=N.length,V=[],I=0;I<D;I+=1)V[I]=N[I](R,p,_);var Y=XM(V.concat());A.set(V[Y],C+k)}_=R}return A})(n,e,Math.ceil(t*s/8),u);var c=vg(n,{level:o});return It.API.__addimage__.arrayBufferToBinaryString(c)}function YM(n){var e=Array.apply([],n);return e.unshift(0),e}function hx(n,e){var t=n.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=n[a-e]||0;s[a+1]=n[a]-o+256&255}return s}function fx(n,e,t){var s=n.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=n[o]-u+256&255}return a}function dx(n,e,t){var s=n.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=n[o-e]||0,c=t&&t[o]||0;a[o+1]=n[o]+256-(u+c>>>1)&255}return a}function px(n,e,t){var s=n.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=$M(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=n[o]-u+256&255}return a}function $M(n,e,t){if(n===e&&e===t)return n;var s=Math.abs(e-t),a=Math.abs(n-t),o=Math.abs(n+e-t-t);return s<=a&&s<=o?n:a<=o?e:t}function XM(n){var e=n.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function qm(n,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return g4(n,a)>>o&u}function mx(n,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),c=(1<<s)-1,f=(e&c)<<u;(function(d,p,y){if(p+1<d.byteLength)d.setUint16(p,y,!1);else{var _=y>>8&255;d.setUint8(p,_)}})(n,o,g4(n,o)&~(c<<u)&65535|f)}function g4(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function ZM(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,a=n[e++],o=a>>7,u=1<<1+(7&a);n[e++],n[e++];var c=null,f=null;o&&(c=e,f=u,e+=3*u);var d=!0,p=[],y=0,_=null,b=0,A=null;for(this.width=t,this.height=s;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,A=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var N=n[e++];y=n[e++]|n[e++]<<8,_=n[e++],1&N||(_=null),b=N>>2&7,e++;break;case 254:for(;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var k=n[e++]|n[e++]<<8,C=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,D=n[e++]|n[e++]<<8,V=n[e++],I=V>>6&1,Y=1<<1+(7&V),W=c,O=f,B=!1;V>>7&&(B=!0,W=e,O=Y,e+=3*Y);var K=e;for(e++;;){var j;if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}p.push({x:k,y:C,width:R,height:D,has_local_palette:B,palette_offset:W,palette_size:O,data_offset:K,data_length:e-K,transparent_index:_,interlaced:!!I,delay:y,disposal:b});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return A},this.frameInfo=function(F){if(F<0||F>=p.length)throw new Error("Frame index out of range.");return p[F]},this.decodeAndBlitFrameBGRA=function(F,te){var H=this.frameInfo(F),ae=H.width*H.height,$=new Uint8Array(ae);gx(n,H.data_offset,$,ae);var re=H.palette_offset,le=H.transparent_index;le===null&&(le=256);var pe=H.width,be=t-pe,P=pe,M=4*(H.y*t+H.x),G=4*((H.y+H.height)*t+H.x),J=M,Q=4*be;H.interlaced===!0&&(Q+=4*t*7);for(var oe=8,fe=0,de=$.length;fe<de;++fe){var xe=$[fe];if(P===0&&(P=pe,(J+=Q)>=G&&(Q=4*be+4*t*(oe-1),J=M+(pe+be)*(oe<<1),oe>>=1)),xe===le)J+=4;else{var we=n[re+3*xe],Ve=n[re+3*xe+1],Xe=n[re+3*xe+2];te[J++]=Xe,te[J++]=Ve,te[J++]=we,te[J++]=255}--P}},this.decodeAndBlitFrameRGBA=function(F,te){var H=this.frameInfo(F),ae=H.width*H.height,$=new Uint8Array(ae);gx(n,H.data_offset,$,ae);var re=H.palette_offset,le=H.transparent_index;le===null&&(le=256);var pe=H.width,be=t-pe,P=pe,M=4*(H.y*t+H.x),G=4*((H.y+H.height)*t+H.x),J=M,Q=4*be;H.interlaced===!0&&(Q+=4*t*7);for(var oe=8,fe=0,de=$.length;fe<de;++fe){var xe=$[fe];if(P===0&&(P=pe,(J+=Q)>=G&&(Q=4*be+4*t*(oe-1),J=M+(pe+be)*(oe<<1),oe>>=1)),xe===le)J+=4;else{var we=n[re+3*xe],Ve=n[re+3*xe+1],Xe=n[re+3*xe+2];te[J++]=we,te[J++]=Ve,te[J++]=Xe,te[J++]=255}--P}}}function gx(n,e,t,s){for(var a=n[e++],o=1<<a,u=o+1,c=u+1,f=a+1,d=(1<<f)-1,p=0,y=0,_=0,b=n[e++],A=new Int32Array(4096),N=null;;){for(;p<16&&b!==0;)y|=n[e++]<<p,p+=8,b===1?b=n[e++]:--b;if(p<f)break;var k=y&d;if(y>>=f,p-=f,k!==o){if(k===u)break;for(var C=k<c?k:N,R=0,D=C;D>o;)D=A[D]>>8,++R;var V=D;if(_+R+(C!==k?1:0)>s)return void dr.log("Warning, gif stream longer than expected.");t[_++]=V;var I=_+=R;for(C!==k&&(t[_++]=V),D=C;R--;)D=A[D],t[--I]=255&D,D>>=8;N!==null&&c<4096&&(A[c++]=N<<8|V,c>=d+1&&f<12&&(++f,d=d<<1|1)),N=k}else c=u+1,d=(1<<(f=a+1))-1,N=null}return _!==s&&dr.log("Warning, gif stream shorter than expected."),t}function Um(n){var e,t,s,a,o,u=Math.floor,c=new Array(64),f=new Array(64),d=new Array(64),p=new Array(64),y=new Array(65535),_=new Array(65535),b=new Array(64),A=new Array(64),N=[],k=0,C=7,R=new Array(64),D=new Array(64),V=new Array(64),I=new Array(256),Y=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],te=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(M,G){for(var J=0,Q=0,oe=new Array,fe=1;fe<=16;fe++){for(var de=1;de<=M[fe];de++)oe[G[Q]]=[],oe[G[Q]][0]=J,oe[G[Q]][1]=fe,Q++,J++;J*=2}return oe}function re(M){for(var G=M[0],J=M[1]-1;J>=0;)G&1<<J&&(k|=1<<C),J--,--C<0&&(k==255?(le(255),le(0)):le(k),C=7,k=0)}function le(M){N.push(M)}function pe(M){le(M>>8&255),le(255&M)}function be(M,G,J,Q,oe){for(var fe,de=oe[0],xe=oe[240],we=(function(Me,it){var Ye,ut,at,Pe,nt,tt,ht,yt,dt,xt,ft=0;for(dt=0;dt<8;++dt){Ye=Me[ft],ut=Me[ft+1],at=Me[ft+2],Pe=Me[ft+3],nt=Me[ft+4],tt=Me[ft+5],ht=Me[ft+6];var un=Ye+(yt=Me[ft+7]),Yt=Ye-yt,Nt=ut+ht,St=ut-ht,Tt=at+tt,gt=at-tt,Qt=Pe+nt,Lt=Pe-nt,Rt=un+Qt,mn=un-Qt,vt=Nt+Tt,_e=Nt-Tt;Me[ft]=Rt+vt,Me[ft+4]=Rt-vt;var rt=.707106781*(_e+mn);Me[ft+2]=mn+rt,Me[ft+6]=mn-rt;var Ae=.382683433*((Rt=Lt+gt)-(_e=St+Yt)),st=.5411961*Rt+Ae,pt=1.306562965*_e+Ae,At=.707106781*(vt=gt+St),ot=Yt+At,Bt=Yt-At;Me[ft+5]=Bt+st,Me[ft+3]=Bt-st,Me[ft+1]=ot+pt,Me[ft+7]=ot-pt,ft+=8}for(ft=0,dt=0;dt<8;++dt){Ye=Me[ft],ut=Me[ft+8],at=Me[ft+16],Pe=Me[ft+24],nt=Me[ft+32],tt=Me[ft+40],ht=Me[ft+48];var bn=Ye+(yt=Me[ft+56]),vn=Ye-yt,xn=ut+ht,Ut=ut-ht,hn=at+tt,fn=at-tt,Mn=Pe+nt,Vn=Pe-nt,Ln=bn+Mn,Tn=bn-Mn,mr=xn+hn,yn=xn-hn;Me[ft]=Ln+mr,Me[ft+32]=Ln-mr;var sn=.707106781*(yn+Tn);Me[ft+16]=Tn+sn,Me[ft+48]=Tn-sn;var Ne=.382683433*((Ln=Vn+fn)-(yn=Ut+vn)),Ie=.5411961*Ln+Ne,Ze=1.306562965*yn+Ne,bt=.707106781*(mr=fn+Ut),Ht=vn+bt,Vt=vn-bt;Me[ft+40]=Vt+Ie,Me[ft+24]=Vt-Ie,Me[ft+8]=Ht+Ze,Me[ft+56]=Ht-Ze,ft++}for(dt=0;dt<64;++dt)xt=Me[dt]*it[dt],b[dt]=xt>0?xt+.5|0:xt-.5|0;return b})(M,G),Ve=0;Ve<64;++Ve)A[W[Ve]]=we[Ve];var Xe=A[0]-J;J=A[0],Xe==0?re(Q[0]):(re(Q[_[fe=32767+Xe]]),re(y[fe]));for(var Je=63;Je>0&&A[Je]==0;)Je--;if(Je==0)return re(de),J;for(var Fe,z=1;z<=Je;){for(var ke=z;A[z]==0&&z<=Je;)++z;var ct=z-ke;if(ct>=16){Fe=ct>>4;for(var Ue=1;Ue<=Fe;++Ue)re(xe);ct&=15}fe=32767+A[z],re(oe[(ct<<4)+_[fe]]),re(y[fe]),z++}return Je!=63&&re(de),J}function P(M){M=Math.min(Math.max(M,1),100),o!=M&&((function(G){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var oe=u((J[Q]*G+50)/100);oe=Math.min(Math.max(oe,1),255),c[W[Q]]=oe}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var xe=u((fe[de]*G+50)/100);xe=Math.min(Math.max(xe,1),255),f[W[de]]=xe}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ve=0,Xe=0;Xe<8;Xe++)for(var Je=0;Je<8;Je++)d[Ve]=1/(c[W[Ve]]*we[Xe]*we[Je]*8),p[Ve]=1/(f[W[Ve]]*we[Xe]*we[Je]*8),Ve++})(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),o=M)}this.encode=function(M,G){G&&P(G),N=new Array,k=0,C=7,pe(65496),pe(65504),pe(16),le(74),le(70),le(73),le(70),le(0),le(1),le(1),le(0),pe(1),pe(1),le(0),le(0),(function(){pe(65499),pe(132),le(0);for(var ut=0;ut<64;ut++)le(c[ut]);le(1);for(var at=0;at<64;at++)le(f[at])})(),(function(ut,at){pe(65472),pe(17),le(8),pe(at),pe(ut),le(3),le(1),le(17),le(0),le(2),le(17),le(1),le(3),le(17),le(1)})(M.width,M.height),(function(){pe(65476),pe(418),le(0);for(var ut=0;ut<16;ut++)le(O[ut+1]);for(var at=0;at<=11;at++)le(B[at]);le(16);for(var Pe=0;Pe<16;Pe++)le(K[Pe+1]);for(var nt=0;nt<=161;nt++)le(j[nt]);le(1);for(var tt=0;tt<16;tt++)le(F[tt+1]);for(var ht=0;ht<=11;ht++)le(te[ht]);le(17);for(var yt=0;yt<16;yt++)le(H[yt+1]);for(var dt=0;dt<=161;dt++)le(ae[dt])})(),pe(65498),pe(12),le(3),le(1),le(0),le(2),le(17),le(3),le(17),le(0),le(63),le(0);var J=0,Q=0,oe=0;k=0,C=7,this.encode.displayName="_encode_";for(var fe,de,xe,we,Ve,Xe,Je,Fe,z,ke=M.data,ct=M.width,Ue=M.height,Me=4*ct,it=0;it<Ue;){for(fe=0;fe<Me;){for(Ve=Me*it+fe,Je=-1,Fe=0,z=0;z<64;z++)Xe=Ve+(Fe=z>>3)*Me+(Je=4*(7&z)),it+Fe>=Ue&&(Xe-=Me*(it+1+Fe-Ue)),fe+Je>=Me&&(Xe-=fe+Je-Me+4),de=ke[Xe++],xe=ke[Xe++],we=ke[Xe++],R[z]=(Y[de]+Y[xe+256|0]+Y[we+512|0]>>16)-128,D[z]=(Y[de+768|0]+Y[xe+1024|0]+Y[we+1280|0]>>16)-128,V[z]=(Y[de+1280|0]+Y[xe+1536|0]+Y[we+1792|0]>>16)-128;J=be(R,d,J,e,s),Q=be(D,p,Q,t,a),oe=be(V,p,oe,t,a),fe+=32}it+=8}if(C>=0){var Ye=[];Ye[1]=C+1,Ye[0]=(1<<C+1)-1,re(Ye)}return pe(65497),new Uint8Array(N)},n=n||50,(function(){for(var M=String.fromCharCode,G=0;G<256;G++)I[G]=M(G)})(),e=$(O,B),t=$(F,te),s=$(K,j),a=$(H,ae),(function(){for(var M=1,G=2,J=1;J<=15;J++){for(var Q=M;Q<G;Q++)_[32767+Q]=J,y[32767+Q]=[],y[32767+Q][1]=J,y[32767+Q][0]=Q;for(var oe=-(G-1);oe<=-M;oe++)_[32767+oe]=J,y[32767+oe]=[],y[32767+oe][1]=J,y[32767+oe][0]=G-1+oe;M<<=1,G<<=1}})(),(function(){for(var M=0;M<256;M++)Y[M]=19595*M,Y[M+256|0]=38470*M,Y[M+512|0]=7471*M+32768,Y[M+768|0]=-11059*M,Y[M+1024|0]=-21709*M,Y[M+1280|0]=32768*M+8421375,Y[M+1536|0]=-27439*M,Y[M+1792|0]=-5329*M})(),P(n)}function so(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bx(n){function e(B){if(!B)throw Error("assert :P")}function t(B,K,j){for(var F=0;4>F;F++)if(B[K+F]!=j.charCodeAt(F))return!0;return!1}function s(B,K,j,F,te){for(var H=0;H<te;H++)B[K+H]=j[F+H]}function a(B,K,j,F){for(var te=0;te<F;te++)B[K+te]=j}function o(B){return new Int32Array(B)}function u(B,K){for(var j=[],F=0;F<B;F++)j.push(new K);return j}function c(B,K){var j=[];return(function F(te,H,ae){for(var $=ae[H],re=0;re<$&&(te.push(ae.length>H+1?[]:new K),!(ae.length<H+1));re++)F(te[re],H+1,ae)})(j,0,B),j}var f=function(){var B=this;function K(m,x){for(var T=1<<x-1>>>0;m&T;)T>>>=1;return T?(m&T-1)+T:m}function j(m,x,T,E,U){e(!(E%T));do m[x+(E-=T)]=U;while(0<E)}function F(m,x,T,E,U){if(e(2328>=U),512>=U)var X=o(512);else if((X=o(U))==null)return 0;return(function(Z,se,ie,ue,ve,Le){var ce,Se,je=se,qe=1<<ie,Ee=o(16),ze=o(16);for(e(ve!=0),e(ue!=null),e(Z!=null),e(0<ie),Se=0;Se<ve;++Se){if(15<ue[Se])return 0;++Ee[ue[Se]]}if(Ee[0]==ve)return 0;for(ze[1]=0,ce=1;15>ce;++ce){if(Ee[ce]>1<<ce)return 0;ze[ce+1]=ze[ce]+Ee[ce]}for(Se=0;Se<ve;++Se)ce=ue[Se],0<ue[Se]&&(Le[ze[ce]++]=Se);if(ze[15]==1)return(ue=new te).g=0,ue.value=Le[0],j(Z,je,1,qe,ue),qe;var We,lt=-1,Ke=qe-1,Et=0,wt=1,Jt=1,Ct=1<<ie;for(Se=0,ce=1,ve=2;ce<=ie;++ce,ve<<=1){if(wt+=Jt<<=1,0>(Jt-=Ee[ce]))return 0;for(;0<Ee[ce];--Ee[ce])(ue=new te).g=ce,ue.value=Le[Se++],j(Z,je+Et,ve,Ct,ue),Et=K(Et,ce)}for(ce=ie+1,ve=2;15>=ce;++ce,ve<<=1){if(wt+=Jt<<=1,0>(Jt-=Ee[ce]))return 0;for(;0<Ee[ce];--Ee[ce]){if(ue=new te,(Et&Ke)!=lt){for(je+=Ct,We=1<<(lt=ce)-ie;15>lt&&!(0>=(We-=Ee[lt]));)++lt,We<<=1;qe+=Ct=1<<(We=lt-ie),Z[se+(lt=Et&Ke)].g=We+ie,Z[se+lt].value=je-se-lt}ue.g=ce-ie,ue.value=Le[Se++],j(Z,je+(Et>>ie),ve,Ct,ue),Et=K(Et,ce)}}return wt!=2*ze[15]-1?0:qe})(m,x,T,E,U,X)}function te(){this.value=this.g=0}function H(){this.value=this.g=0}function ae(){this.G=u(5,te),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Ao,H)}function $(m,x,T,E){e(m!=null),e(x!=null),e(2147483648>E),m.Ca=254,m.I=0,m.b=-8,m.Ka=0,m.oa=x,m.pa=T,m.Jd=x,m.Yc=T+E,m.Zc=4<=E?T+E-4+1:T,de(m)}function re(m,x){for(var T=0;0<x--;)T|=we(m,128)<<x;return T}function le(m,x){var T=re(m,x);return xe(m)?-T:T}function pe(m,x,T,E){var U,X=0;for(e(m!=null),e(x!=null),e(4294967288>E),m.Sb=E,m.Ra=0,m.u=0,m.h=0,4<E&&(E=4),U=0;U<E;++U)X+=x[T+U]<<8*U;m.Ra=X,m.bb=E,m.oa=x,m.pa=T}function be(m){for(;8<=m.u&&m.bb<m.Sb;)m.Ra>>>=8,m.Ra+=m.oa[m.pa+m.bb]<<ga-8>>>0,++m.bb,m.u-=8;Q(m)&&(m.h=1,m.u=0)}function P(m,x){if(e(0<=x),!m.h&&x<=Ws){var T=J(m)&ei[x];return m.u+=x,be(m),T}return m.h=1,m.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(m){return m.Ra>>>(m.u&ga-1)>>>0}function Q(m){return e(m.bb<=m.Sb),m.h||m.bb==m.Sb&&m.u>ga}function oe(m,x){m.u=x,m.h=Q(m)}function fe(m){m.u>=ba&&(e(m.u>=ba),be(m))}function de(m){e(m!=null&&m.oa!=null),m.pa<m.Zc?(m.I=(m.oa[m.pa++]|m.I<<8)>>>0,m.b+=8):(e(m!=null&&m.oa!=null),m.pa<m.Yc?(m.b+=8,m.I=m.oa[m.pa++]|m.I<<8):m.Ka?m.b=0:(m.I<<=8,m.b+=8,m.Ka=1))}function xe(m){return re(m,1)}function we(m,x){var T=m.Ca;0>m.b&&de(m);var E=m.b,U=T*x>>>8,X=(m.I>>>E>U)+0;for(X?(T-=U,m.I-=U+1<<E>>>0):T=U+1,E=T,U=0;256<=E;)U+=8,E>>=8;return E=7^U+Ga[E],m.b-=E,m.Ca=(T<<E)-1,X}function Ve(m,x,T){m[x+0]=T>>24&255,m[x+1]=T>>16&255,m[x+2]=T>>8&255,m[x+3]=255&T}function Xe(m,x){return m[x+0]|m[x+1]<<8}function Je(m,x){return Xe(m,x)|m[x+2]<<16}function Fe(m,x){return Xe(m,x)|Xe(m,x+2)<<16}function z(m,x){var T=1<<x;return e(m!=null),e(0<x),m.X=o(T),m.X==null?0:(m.Mb=32-x,m.Xa=x,1)}function ke(m,x){e(m!=null),e(x!=null),e(m.Xa==x.Xa),s(x.X,0,m.X,0,1<<x.Xa)}function ct(){this.X=[],this.Xa=this.Mb=0}function Ue(m,x,T,E){e(T!=null),e(E!=null);var U=T[0],X=E[0];return U==0&&(U=(m*X+x/2)/x),X==0&&(X=(x*U+m/2)/m),0>=U||0>=X?0:(T[0]=U,E[0]=X,1)}function Me(m,x){return m+(1<<x)-1>>>x}function it(m,x){return((4278255360&m)+(4278255360&x)>>>0&4278255360)+((16711935&m)+(16711935&x)>>>0&16711935)>>>0}function Ye(m,x){B[x]=function(T,E,U,X,Z,se,ie){var ue;for(ue=0;ue<Z;++ue){var ve=B[m](se[ie+ue-1],U,X+ue);se[ie+ue]=it(T[E+ue],ve)}}}function ut(){this.ud=this.hd=this.jd=0}function at(m,x){return((4278124286&(m^x))>>>1)+(m&x)>>>0}function Pe(m){return 0<=m&&256>m?m:0>m?0:255<m?255:void 0}function nt(m,x){return Pe(m+(m-x+.5>>1))}function tt(m,x,T){return Math.abs(x-T)-Math.abs(m-T)}function ht(m,x,T,E,U,X,Z){for(E=X[Z-1],T=0;T<U;++T)X[Z+T]=E=it(m[x+T],E)}function yt(m,x,T,E,U){var X;for(X=0;X<T;++X){var Z=m[x+X],se=Z>>8&255,ie=16711935&(ie=(ie=16711935&Z)+((se<<16)+se));E[U+X]=(4278255360&Z)+ie>>>0}}function dt(m,x){x.jd=255&m,x.hd=m>>8&255,x.ud=m>>16&255}function xt(m,x,T,E,U,X){var Z;for(Z=0;Z<E;++Z){var se=x[T+Z],ie=se>>>8,ue=se,ve=255&(ve=(ve=se>>>16)+((m.jd<<24>>24)*(ie<<24>>24)>>>5));ue=255&(ue=(ue+=(m.hd<<24>>24)*(ie<<24>>24)>>>5)+((m.ud<<24>>24)*(ve<<24>>24)>>>5)),U[X+Z]=(4278255360&se)+(ve<<16)+ue}}function ft(m,x,T,E,U){B[x]=function(X,Z,se,ie,ue,ve,Le,ce,Se){for(ie=Le;ie<ce;++ie)for(Le=0;Le<Se;++Le)ue[ve++]=U(se[E(X[Z++])])},B[m]=function(X,Z,se,ie,ue,ve,Le){var ce=8>>X.b,Se=X.Ea,je=X.K[0],qe=X.w;if(8>ce)for(X=(1<<X.b)-1,qe=(1<<ce)-1;Z<se;++Z){var Ee,ze=0;for(Ee=0;Ee<Se;++Ee)Ee&X||(ze=E(ie[ue++])),ve[Le++]=U(je[ze&qe]),ze>>=ce}else B["VP8LMapColor"+T](ie,ue,je,qe,ve,Le,Z,se,Se)}}function un(m,x,T,E,U){for(T=x+T;x<T;){var X=m[x++];E[U++]=X>>16&255,E[U++]=X>>8&255,E[U++]=255&X}}function Yt(m,x,T,E,U){for(T=x+T;x<T;){var X=m[x++];E[U++]=X>>16&255,E[U++]=X>>8&255,E[U++]=255&X,E[U++]=X>>24&255}}function Nt(m,x,T,E,U){for(T=x+T;x<T;){var X=(Z=m[x++])>>16&240|Z>>12&15,Z=240&Z|Z>>28&15;E[U++]=X,E[U++]=Z}}function St(m,x,T,E,U){for(T=x+T;x<T;){var X=(Z=m[x++])>>16&248|Z>>13&7,Z=Z>>5&224|Z>>3&31;E[U++]=X,E[U++]=Z}}function Tt(m,x,T,E,U){for(T=x+T;x<T;){var X=m[x++];E[U++]=255&X,E[U++]=X>>8&255,E[U++]=X>>16&255}}function gt(m,x,T,E,U,X){if(X==0)for(T=x+T;x<T;)Ve(E,((X=m[x++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),U+=32;else s(E,U,m,x,T)}function Qt(m,x){B[x][0]=B[m+"0"],B[x][1]=B[m+"1"],B[x][2]=B[m+"2"],B[x][3]=B[m+"3"],B[x][4]=B[m+"4"],B[x][5]=B[m+"5"],B[x][6]=B[m+"6"],B[x][7]=B[m+"7"],B[x][8]=B[m+"8"],B[x][9]=B[m+"9"],B[x][10]=B[m+"10"],B[x][11]=B[m+"11"],B[x][12]=B[m+"12"],B[x][13]=B[m+"13"],B[x][14]=B[m+"0"],B[x][15]=B[m+"0"]}function Lt(m){return m==Xc||m==Bu||m==$l||m==Pu}function Rt(){this.eb=[],this.size=this.A=this.fb=0}function mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Rt,this.f.kb=new mn,this.sd=null}function _e(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ae(m){return alert("todo:WebPSamplerProcessPlane"),m.T}function st(m,x){var T=m.T,E=x.ba.f.RGBA,U=E.eb,X=E.fb+m.ka*E.A,Z=Ts[x.ba.S],se=m.y,ie=m.O,ue=m.f,ve=m.N,Le=m.ea,ce=m.W,Se=x.cc,je=x.dc,qe=x.Mc,Ee=x.Nc,ze=m.ka,We=m.ka+m.T,lt=m.U,Ke=lt+1>>1;for(ze==0?Z(se,ie,null,null,ue,ve,Le,ce,ue,ve,Le,ce,U,X,null,null,lt):(Z(x.ec,x.fc,se,ie,Se,je,qe,Ee,ue,ve,Le,ce,U,X-E.A,U,X,lt),++T);ze+2<We;ze+=2)Se=ue,je=ve,qe=Le,Ee=ce,ve+=m.Rc,ce+=m.Rc,X+=2*E.A,Z(se,(ie+=2*m.fa)-m.fa,se,ie,Se,je,qe,Ee,ue,ve,Le,ce,U,X-E.A,U,X,lt);return ie+=m.fa,m.j+We<m.o?(s(x.ec,x.fc,se,ie,lt),s(x.cc,x.dc,ue,ve,Ke),s(x.Mc,x.Nc,Le,ce,Ke),T--):1&We||Z(se,ie,null,null,ue,ve,Le,ce,ue,ve,Le,ce,U,X+E.A,null,null,lt),T}function pt(m,x,T){var E=m.F,U=[m.J];if(E!=null){var X=m.U,Z=x.ba.S,se=Z==$c||Z==$l;x=x.ba.f.RGBA;var ie=[0],ue=m.ka;ie[0]=m.T,m.Kb&&(ue==0?--ie[0]:(--ue,U[0]-=m.width),m.j+m.ka+m.T==m.o&&(ie[0]=m.o-m.j-ue));var ve=x.eb;ue=x.fb+ue*x.A,m=Hc(E,U[0],m.width,X,ie,ve,ue+(se?0:3),x.A),e(T==ie),m&&Lt(Z)&&il(ve,ue,se,X,ie,x.A)}return 0}function At(m){var x=m.ma,T=x.ba.S,E=11>T,U=T==Ds||T==Ci||T==$c||T==Yl||T==12||Lt(T);if(x.memory=null,x.Ib=null,x.Jb=null,x.Nd=null,!Ha(x.Oa,m,U?11:12))return 0;if(U&&Lt(T)&&Pc(),m.da)alert("todo:use_scaling");else{if(E){if(x.Ib=Ae,m.Kb){if(T=m.U+1>>1,x.memory=o(m.U+2*T),x.memory==null)return 0;x.ec=x.memory,x.fc=0,x.cc=x.ec,x.dc=x.fc+m.U,x.Mc=x.cc,x.Nc=x.dc+T,x.Ib=st,Pc()}}else alert("todo:EmitYUV");U&&(x.Jb=pt,E&&Zi())}if(E&&!Lo){for(m=0;256>m;++m)Cs[m]=89858*(m-128)+Ql>>Oi,Jp[m]=-22014*(m-128)+Ql,Rd[m]=-45773*(m-128),Gu[m]=113618*(m-128)+Ql>>Oi;for(m=cl;m<Mo;++m)x=76283*(m-16)+Ql>>Oi,e0[m-cl]=Ir(x,255),t0[m-cl]=Ir(x+8>>4,15);Lo=1}return 1}function ot(m){var x=m.ma,T=m.U,E=m.T;return e(!(1&m.ka)),0>=T||0>=E?0:(T=x.Ib(m,x),x.Jb!=null&&x.Jb(m,x,T),x.Dc+=T,1)}function Bt(m){m.ma.memory=null}function bn(m,x,T,E){return P(m,8)!=47?0:(x[0]=P(m,14)+1,T[0]=P(m,14)+1,E[0]=P(m,1),P(m,3)!=0?0:!m.h)}function vn(m,x){if(4>m)return m+1;var T=m-2>>1;return(2+(1&m)<<T)+P(x,T)+1}function xn(m,x){return 120<x?x-120:1<=(T=((T=ji[x-1])>>4)*m+(8-(15&T)))?T:1;var T}function Ut(m,x,T){var E=J(T),U=m[x+=255&E].g-8;return 0<U&&(oe(T,T.u+8),E=J(T),x+=m[x].value,x+=E&(1<<U)-1),oe(T,T.u+m[x].g),m[x].value}function hn(m,x,T){return T.g+=m.g,T.value+=m.value<<x>>>0,e(8>=T.g),m.g}function fn(m,x,T){var E=m.xc;return e((x=E==0?0:m.vc[m.md*(T>>E)+(x>>E)])<m.Wb),m.Ya[x]}function Mn(m,x,T,E){var U=m.ab,X=m.c*x,Z=m.C;x=Z+x;var se=T,ie=E;for(E=m.Ta,T=m.Ua;0<U--;){var ue=m.gc[U],ve=Z,Le=x,ce=se,Se=ie,je=(ie=E,se=T,ue.Ea);switch(e(ve<Le),e(Le<=ue.nc),ue.hc){case 2:Br(ce,Se,(Le-ve)*je,ie,se);break;case 0:var qe=ve,Ee=Le,ze=ie,We=se,lt=(Ct=ue).Ea;qe==0&&(Ul(ce,Se,null,null,1,ze,We),ht(ce,Se+1,0,0,lt-1,ze,We+1),Se+=lt,We+=lt,++qe);for(var Ke=1<<Ct.b,Et=Ke-1,wt=Me(lt,Ct.b),Jt=Ct.K,Ct=Ct.w+(qe>>Ct.b)*wt;qe<Ee;){var _n=Jt,hr=Ct,on=1;for(Hl(ce,Se,ze,We-lt,1,ze,We);on<lt;){var _t=(on&~Et)+Ke;_t>lt&&(_t=lt),(0,Wa[_n[hr++]>>8&15])(ce,Se+ +on,ze,We+on-lt,_t-on,ze,We+on),on=_t}Se+=lt,We+=lt,++qe&Et||(Ct+=wt)}Le!=ue.nc&&s(ie,se-je,ie,se+(Le-ve-1)*je,je);break;case 1:for(je=ce,Ee=Se,lt=(ce=ue.Ea)-(We=ce&~(ze=(Se=1<<ue.b)-1)),qe=Me(ce,ue.b),Ke=ue.K,ue=ue.w+(ve>>ue.b)*qe;ve<Le;){for(Et=Ke,wt=ue,Jt=new ut,Ct=Ee+We,_n=Ee+ce;Ee<Ct;)dt(Et[wt++],Jt),Gl(Jt,je,Ee,Se,ie,se),Ee+=Se,se+=Se;Ee<_n&&(dt(Et[wt++],Jt),Gl(Jt,je,Ee,lt,ie,se),Ee+=lt,se+=lt),++ve&ze||(ue+=qe)}break;case 3:if(ce==ie&&Se==se&&0<ue.b){for(Ee=ie,ce=je=se+(Le-ve)*je-(We=(Le-ve)*Me(ue.Ea,ue.b)),Se=ie,ze=se,qe=[],We=(lt=We)-1;0<=We;--We)qe[We]=Se[ze+We];for(We=lt-1;0<=We;--We)Ee[ce+We]=qe[We];Du(ue,ve,Le,ie,je,ie,se)}else Du(ue,ve,Le,ce,Se,ie,se)}se=E,ie=T}ie!=T&&s(E,T,se,ie,X)}function Vn(m,x){var T=m.V,E=m.Ba+m.c*m.C,U=x-m.C;if(e(x<=m.l.o),e(16>=U),0<U){var X=m.l,Z=m.Ta,se=m.Ua,ie=X.width;if(Mn(m,U,T,E),U=se=[se],e((T=m.C)<(E=x)),e(X.v<X.va),E>X.o&&(E=X.o),T<X.j){var ue=X.j-T;T=X.j,U[0]+=ue*ie}if(T>=E?T=0:(U[0]+=4*X.v,X.ka=T-X.j,X.U=X.va-X.v,X.T=E-T,T=1),T){if(se=se[0],11>(T=m.ca).S){var ve=T.f.RGBA,Le=(E=T.S,U=X.U,X=X.T,ue=ve.eb,ve.A),ce=X;for(ve=ve.fb+m.Ma*ve.A;0<ce--;){var Se=Z,je=se,qe=U,Ee=ue,ze=ve;switch(E){case Vu:Wl(Se,je,qe,Ee,ze);break;case Ds:Ya(Se,je,qe,Ee,ze);break;case Xc:Ya(Se,je,qe,Ee,ze),il(Ee,ze,0,qe,1,0);break;case Fu:rl(Se,je,qe,Ee,ze);break;case Ci:gt(Se,je,qe,Ee,ze,1);break;case Bu:gt(Se,je,qe,Ee,ze,1),il(Ee,ze,0,qe,1,0);break;case $c:gt(Se,je,qe,Ee,ze,0);break;case $l:gt(Se,je,qe,Ee,ze,0),il(Ee,ze,1,qe,1,0);break;case Yl:$a(Se,je,qe,Ee,ze);break;case Pu:$a(Se,je,qe,Ee,ze),Ti(Ee,ze,qe,1,0);break;case To:xa(Se,je,qe,Ee,ze);break;default:e(0)}se+=ie,ve+=Le}m.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");e(m.Ma<=T.height)}}m.C=x,e(m.C<=m.i)}function Ln(m){var x;if(0<m.ua)return 0;for(x=0;x<m.Wb;++x){var T=m.Ya[x].G,E=m.Ya[x].H;if(0<T[1][E[1]+0].g||0<T[2][E[2]+0].g||0<T[3][E[3]+0].g)return 0}return 1}function Tn(m,x,T,E,U,X){if(m.Z!=0){var Z=m.qd,se=m.rd;for(e(Qa[m.Z]!=null);x<T;++x)Qa[m.Z](Z,se,E,U,E,U,X),Z=E,se=U,U+=X;m.qd=Z,m.rd=se}}function mr(m,x){var T=m.l.ma,E=T.Z==0||T.Z==1?m.l.j:m.C;if(E=m.C<E?E:m.C,e(x<=m.l.o),x>E){var U=m.l.width,X=T.ca,Z=T.tb+U*E,se=m.V,ie=m.Ba+m.c*E,ue=m.gc;e(m.ab==1),e(ue[0].hc==3),ya(ue[0],E,x,se,ie,X,Z),Tn(T,E,x,X,Z,U)}m.C=m.Ma=x}function yn(m,x,T,E,U,X,Z){var se=m.$/E,ie=m.$%E,ue=m.m,ve=m.s,Le=T+m.$,ce=Le;U=T+E*U;var Se=T+E*X,je=280+ve.ua,qe=m.Pb?se:16777216,Ee=0<ve.ua?ve.Wa:null,ze=ve.wc,We=Le<Se?fn(ve,ie,se):null;e(m.C<X),e(Se<=U);var lt=!1;e:for(;;){for(;lt||Le<Se;){var Ke=0;if(se>=qe){var Et=Le-T;e((qe=m).Pb),qe.wd=qe.m,qe.xd=Et,0<qe.s.ua&&ke(qe.s.Wa,qe.s.vb),qe=se+Co}if(ie&ze||(We=fn(ve,ie,se)),e(We!=null),We.Qb&&(x[Le]=We.qb,lt=!0),!lt)if(fe(ue),We.jc){Ke=ue,Et=x;var wt=Le,Jt=We.pd[J(Ke)&Ao-1];e(We.jc),256>Jt.g?(oe(Ke,Ke.u+Jt.g),Et[wt]=Jt.value,Ke=0):(oe(Ke,Ke.u+Jt.g-256),e(256<=Jt.value),Ke=Jt.value),Ke==0&&(lt=!0)}else Ke=Ut(We.G[0],We.H[0],ue);if(ue.h)break;if(lt||256>Ke){if(!lt)if(We.nd)x[Le]=(We.qb|Ke<<8)>>>0;else{if(fe(ue),lt=Ut(We.G[1],We.H[1],ue),fe(ue),Et=Ut(We.G[2],We.H[2],ue),wt=Ut(We.G[3],We.H[3],ue),ue.h)break;x[Le]=(wt<<24|lt<<16|Ke<<8|Et)>>>0}if(lt=!1,++Le,++ie>=E&&(ie=0,++se,Z!=null&&se<=X&&!(se%16)&&Z(m,se),Ee!=null))for(;ce<Le;)Ke=x[ce++],Ee.X[(506832829*Ke&4294967295)>>>Ee.Mb]=Ke}else if(280>Ke){if(Ke=vn(Ke-256,ue),Et=Ut(We.G[4],We.H[4],ue),fe(ue),Et=xn(E,Et=vn(Et,ue)),ue.h)break;if(Le-T<Et||U-Le<Ke)break e;for(wt=0;wt<Ke;++wt)x[Le+wt]=x[Le+wt-Et];for(Le+=Ke,ie+=Ke;ie>=E;)ie-=E,++se,Z!=null&&se<=X&&!(se%16)&&Z(m,se);if(e(Le<=U),ie&ze&&(We=fn(ve,ie,se)),Ee!=null)for(;ce<Le;)Ke=x[ce++],Ee.X[(506832829*Ke&4294967295)>>>Ee.Mb]=Ke}else{if(!(Ke<je))break e;for(lt=Ke-280,e(Ee!=null);ce<Le;)Ke=x[ce++],Ee.X[(506832829*Ke&4294967295)>>>Ee.Mb]=Ke;Ke=Le,e(!(lt>>>(Et=Ee).Xa)),x[Ke]=Et.X[lt],lt=!0}lt||e(ue.h==Q(ue))}if(m.Pb&&ue.h&&Le<U)e(m.m.h),m.a=5,m.m=m.wd,m.$=m.xd,0<m.s.ua&&ke(m.s.vb,m.s.Wa);else{if(ue.h)break e;Z?.(m,se>X?X:se),m.a=0,m.$=Le-T}return 1}return m.a=3,0}function sn(m){e(m!=null),m.vc=null,m.yc=null,m.Ya=null;var x=m.Wa;x!=null&&(x.X=null),m.vb=null,e(m!=null)}function Ne(){var m=new Zt;return m==null?null:(m.a=0,m.xb=rf,Qt("Predictor","VP8LPredictors"),Qt("Predictor","VP8LPredictors_C"),Qt("PredictorAdd","VP8LPredictorsAdd"),Qt("PredictorAdd","VP8LPredictorsAdd_C"),Br=yt,Gl=xt,Wl=un,Ya=Yt,$a=Nt,xa=St,rl=Tt,B.VP8LMapColor32b=va,B.VP8LMapColor8b=Ss,m)}function Ie(m,x,T,E,U){var X=1,Z=[m],se=[x],ie=E.m,ue=E.s,ve=null,Le=0;e:for(;;){if(T)for(;X&&P(ie,1);){var ce=Z,Se=se,je=E,qe=1,Ee=je.m,ze=je.gc[je.ab],We=P(Ee,2);if(je.Oc&1<<We)X=0;else{switch(je.Oc|=1<<We,ze.hc=We,ze.Ea=ce[0],ze.nc=Se[0],ze.K=[null],++je.ab,e(4>=je.ab),We){case 0:case 1:ze.b=P(Ee,3)+2,qe=Ie(Me(ze.Ea,ze.b),Me(ze.nc,ze.b),0,je,ze.K),ze.K=ze.K[0];break;case 3:var lt,Ke=P(Ee,8)+1,Et=16<Ke?0:4<Ke?1:2<Ke?2:3;if(ce[0]=Me(ze.Ea,Et),ze.b=Et,lt=qe=Ie(Ke,1,0,je,ze.K)){var wt,Jt=Ke,Ct=ze,_n=1<<(8>>Ct.b),hr=o(_n);if(hr==null)lt=0;else{var on=Ct.K[0],_t=Ct.w;for(hr[0]=Ct.K[0][0],wt=1;wt<1*Jt;++wt)hr[wt]=it(on[_t+wt],hr[wt-1]);for(;wt<4*_n;++wt)hr[wt]=0;Ct.K[0]=null,Ct.K[0]=hr,lt=1}}qe=lt;break;case 2:break;default:e(0)}X=qe}}if(Z=Z[0],se=se[0],X&&P(ie,1)&&!(X=1<=(Le=P(ie,4))&&11>=Le)){E.a=3;break e}var mt;if(mt=X)t:{var yr,Wt,dn,Yn=E,ts=Z,ks=se,rr=Le,Gr=T,Rs=Yn.m,Wr=Yn.s,gn=[null],Bn=1,xr=0,Un=Ei[rr];n:for(;;){if(Gr&&P(Rs,1)){var ns=P(Rs,3)+2,wr=Me(ts,ns),Pn=Me(ks,ns),qr=wr*Pn;if(!Ie(wr,Pn,0,Yn,gn))break n;for(gn=gn[0],Wr.xc=ns,yr=0;yr<qr;++yr){var $n=gn[yr]>>8&65535;gn[yr]=$n,$n>=Bn&&(Bn=$n+1)}}if(Rs.h)break n;for(Wt=0;5>Wt;++Wt){var Yr=ol[Wt];!Wt&&0<rr&&(Yr+=1<<rr),xr<Yr&&(xr=Yr)}var $r=u(Bn*Un,te),Qn=Bn,Rn=u(Qn,ae);if(Rn==null)var Is=null;else e(65536>=Qn),Is=Rn;var jr=o(xr);if(Is==null||jr==null||$r==null){Yn.a=1;break n}var Ft=$r;for(yr=dn=0;yr<Bn;++yr){var Pt=Is[yr],zn=Pt.G,ti=Pt.H,Di=0,$s=1,Xr=0;for(Wt=0;5>Wt;++Wt){Yr=ol[Wt],zn[Wt]=Ft,ti[Wt]=dn,!Wt&&0<rr&&(Yr+=1<<rr);s:{var Oo,Do=Yr,Yu=Yn,sr=jr,af=Ft,of=dn,$u=0,Ka=Yu.m,n0=P(Ka,1);if(a(sr,0,0,Do),n0){var lf=P(Ka,1)+1,cf=P(Ka,1),Xu=P(Ka,cf==0?1:8);sr[Xu]=1,lf==2&&(sr[Xu=P(Ka,8)]=1);var fs=1}else{var Er=o(19),Jc=P(Ka,4)+4;if(19<Jc){Yu.a=3;var Ro=0;break s}for(Oo=0;Oo<Jc;++Oo)Er[Zc[Oo]]=P(Ka,3);var Jl=void 0,ul=void 0,Sa=Yu,Zu=Er,ec=Do,Qu=sr,Ku=0,Ja=Sa.m,uf=8,hf=u(128,te);r:for(;F(hf,0,7,Zu,19);){if(P(Ja,1)){var Id=2+2*P(Ja,3);if((Jl=2+P(Ja,Id))>ec)break r}else Jl=ec;for(ul=0;ul<ec&&Jl--;){fe(Ja);var ff=hf[0+(127&J(Ja))];oe(Ja,Ja.u+ff.g);var Io=ff.value;if(16>Io)Qu[ul++]=Io,Io!=0&&(uf=Io);else{var Vd=Io==16,Fd=Io-16,Bd=Xl[Fd],df=P(Ja,ki[Fd])+Bd;if(ul+df>ec)break r;for(var Pd=Vd?uf:0;0<df--;)Qu[ul++]=Pd}}Ku=1;break r}Ku||(Sa.a=3),fs=Ku}(fs=fs&&!Ka.h)&&($u=F(af,of,8,sr,Do)),fs&&$u!=0?Ro=$u:(Yu.a=3,Ro=0)}if(Ro==0)break n;if($s&&zu[Wt]==1&&($s=Ft[dn].g==0),Di+=Ft[dn].g,dn+=Ro,3>=Wt){var hl,Ju=jr[0];for(hl=1;hl<Yr;++hl)jr[hl]>Ju&&(Ju=jr[hl]);Xr+=Ju}}if(Pt.nd=$s,Pt.Qb=0,$s&&(Pt.qb=(zn[3][ti[3]+0].value<<24|zn[1][ti[1]+0].value<<16|zn[2][ti[2]+0].value)>>>0,Di==0&&256>zn[0][ti[0]+0].value&&(Pt.Qb=1,Pt.qb+=zn[0][ti[0]+0].value<<8)),Pt.jc=!Pt.Qb&&6>Xr,Pt.jc){var eu,Na=Pt;for(eu=0;eu<Ao;++eu){var eo=eu,to=Na.pd[eo],eh=Na.G[0][Na.H[0]+eo];256<=eh.value?(to.g=eh.g+256,to.value=eh.value):(to.g=0,to.value=0,eo>>=hn(eh,8,to),eo>>=hn(Na.G[1][Na.H[1]+eo],16,to),eo>>=hn(Na.G[2][Na.H[2]+eo],0,to),hn(Na.G[3][Na.H[3]+eo],24,to))}}}Wr.vc=gn,Wr.Wb=Bn,Wr.Ya=Is,Wr.yc=$r,mt=1;break t}mt=0}if(!(X=mt)){E.a=3;break e}if(0<Le){if(ue.ua=1<<Le,!z(ue.Wa,Le)){E.a=1,X=0;break e}}else ue.ua=0;var th=E,fl=Z,zd=se,tc=th.s,nc=tc.xc;if(th.c=fl,th.i=zd,tc.md=Me(fl,nc),tc.wc=nc==0?-1:(1<<nc)-1,T){E.xb=ko;break e}if((ve=o(Z*se))==null){E.a=1,X=0;break e}X=(X=yn(E,ve,0,Z,se,se,null))&&!ie.h;break e}return X?(U!=null?U[0]=ve:(e(ve==null),e(T)),E.$=0,T||sn(ue)):sn(ue),X}function Ze(m,x){var T=m.c*m.i,E=T+x+16*x;return e(m.c<=x),m.V=o(E),m.V==null?(m.Ta=null,m.Ua=0,m.a=1,0):(m.Ta=m.V,m.Ua=m.Ba+T+x,1)}function bt(m,x){var T=m.C,E=x-T,U=m.V,X=m.Ba+m.c*T;for(e(x<=m.l.o);0<E;){var Z=16<E?16:E,se=m.l.ma,ie=m.l.width,ue=ie*Z,ve=se.ca,Le=se.tb+ie*T,ce=m.Ta,Se=m.Ua;Mn(m,Z,U,X),mi(ce,Se,ve,Le,ue),Tn(se,T,T+Z,ve,Le,ie),E-=Z,U+=Z*m.c,T+=Z}e(T==x),m.C=m.Ma=x}function Ht(){this.ub=this.yd=this.td=this.Rb=0}function Vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Fn(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Wn(){this.Yb=(function(){var m=[];return(function x(T,E,U){for(var X=U[E],Z=0;Z<X&&(T.push(U.length>E+1?[]:0),!(U.length<E+1));Z++)x(T[Z],E+1,U)})(m,0,[3,11]),m})()}function wn(){this.jb=o(3),this.Wc=c([4,8],Wn),this.Xc=c([4,17],Wn)}function os(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Rr(){this.ld=this.La=this.dd=this.tc=0}function Jr(){this.Na=this.la=0}function ls(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Us(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function xs(){this.uc=this.M=this.Nb=0,this.wa=Array(new Rr),this.Y=0,this.ya=Array(new Us),this.aa=0,this.l=new wi}function ci(){this.y=o(16),this.f=o(8),this.ea=o(8)}function xi(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new Ht,this.Kc=new Vt,this.ed=new os,this.Qa=new Fn,this.Ic=this.$c=this.Aa=0,this.D=new xs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,M),this.ia=0,this.pb=u(4,ls),this.Pa=new wn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ci),this.Hd=0,this.rb=Array(new Jr),this.sb=0,this.wa=Array(new Rr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Us),this.L=this.aa=0,this.gd=c([4,2],Rr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ir(m,x){return 0>m?0:m>x?x:m}function wi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function _i(){var m=new xi;return m!=null&&(m.a=0,m.sc="OK",m.cb=0,m.Xb=0,gi||(gi=ha)),m}function Cn(m,x,T){return m.a==0&&(m.a=x,m.sc=T,m.cb=0),0}function yo(m,x,T){return 3<=T&&m[x+0]==157&&m[x+1]==1&&m[x+2]==42}function ui(m,x){if(m==null)return 0;if(m.a=0,m.sc="OK",x==null)return Cn(m,2,"null VP8Io passed to VP8GetHeaders()");var T=x.data,E=x.w,U=x.ha;if(4>U)return Cn(m,7,"Truncated header.");var X=T[E+0]|T[E+1]<<8|T[E+2]<<16,Z=m.Od;if(Z.Rb=!(1&X),Z.td=X>>1&7,Z.yd=X>>4&1,Z.ub=X>>5,3<Z.td)return Cn(m,3,"Incorrect keyframe parameters.");if(!Z.yd)return Cn(m,4,"Frame not displayable.");E+=3,U-=3;var se=m.Kc;if(Z.Rb){if(7>U)return Cn(m,7,"cannot parse picture header");if(!yo(T,E,U))return Cn(m,3,"Bad code word");se.c=16383&(T[E+4]<<8|T[E+3]),se.Td=T[E+4]>>6,se.i=16383&(T[E+6]<<8|T[E+5]),se.Ud=T[E+6]>>6,E+=7,U-=7,m.za=se.c+15>>4,m.Ub=se.i+15>>4,x.width=se.c,x.height=se.i,x.Da=0,x.j=0,x.v=0,x.va=x.width,x.o=x.height,x.da=0,x.ib=x.width,x.hb=x.height,x.U=x.width,x.T=x.height,a((X=m.Pa).jb,0,255,X.jb.length),e((X=m.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,a(X.Zb,0,0,X.Zb.length),a(X.Lb,0,0,X.Lb)}if(Z.ub>U)return Cn(m,7,"bad partition length");$(X=m.m,T,E,Z.ub),E+=Z.ub,U-=Z.ub,Z.Rb&&(se.Ld=xe(X),se.Kd=xe(X)),se=m.Qa;var ie,ue=m.Pa;if(e(X!=null),e(se!=null),se.Cb=xe(X),se.Cb){if(se.Bb=xe(X),xe(X)){for(se.Fb=xe(X),ie=0;4>ie;++ie)se.Zb[ie]=xe(X)?le(X,7):0;for(ie=0;4>ie;++ie)se.Lb[ie]=xe(X)?le(X,6):0}if(se.Bb)for(ie=0;3>ie;++ie)ue.jb[ie]=xe(X)?re(X,8):255}else se.Bb=0;if(X.Ka)return Cn(m,3,"cannot parse segment header");if((se=m.ed).zd=xe(X),se.Tb=re(X,6),se.wb=re(X,3),se.Pc=xe(X),se.Pc&&xe(X)){for(ue=0;4>ue;++ue)xe(X)&&(se.vd[ue]=le(X,6));for(ue=0;4>ue;++ue)xe(X)&&(se.od[ue]=le(X,6))}if(m.L=se.Tb==0?0:se.zd?1:2,X.Ka)return Cn(m,3,"cannot parse filter header");var ve=U;if(U=ie=E,E=ie+ve,se=ve,m.Xb=(1<<re(m.m,2))-1,ve<3*(ue=m.Xb))T=7;else{for(ie+=3*ue,se-=3*ue,ve=0;ve<ue;++ve){var Le=T[U+0]|T[U+1]<<8|T[U+2]<<16;Le>se&&(Le=se),$(m.Jc[+ve],T,ie,Le),ie+=Le,se-=Le,U+=3}$(m.Jc[+ue],T,ie,se),T=ie<E?0:5}if(T!=0)return Cn(m,T,"cannot parse partitions");for(T=re(ie=m.m,7),U=xe(ie)?le(ie,4):0,E=xe(ie)?le(ie,4):0,se=xe(ie)?le(ie,4):0,ue=xe(ie)?le(ie,4):0,ie=xe(ie)?le(ie,4):0,ve=m.Qa,Le=0;4>Le;++Le){if(ve.Cb){var ce=ve.Zb[Le];ve.Fb||(ce+=T)}else{if(0<Le){m.pb[Le]=m.pb[0];continue}ce=T}var Se=m.pb[Le];Se.Sc[0]=Mi[Ir(ce+U,127)],Se.Sc[1]=Li[Ir(ce+0,127)],Se.Eb[0]=2*Mi[Ir(ce+E,127)],Se.Eb[1]=101581*Li[Ir(ce+se,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=Mi[Ir(ce+ue,117)],Se.Qc[1]=Li[Ir(ce+ie,127)],Se.lc=ce+ie}if(!Z.Rb)return Cn(m,4,"Not a key frame.");for(xe(X),Z=m.Pa,T=0;4>T;++T){for(U=0;8>U;++U)for(E=0;3>E;++E)for(se=0;11>se;++se)ue=we(X,ur[T][U][E][se])?re(X,8):Dd[T][U][E][se],Z.Wc[T][U].Yb[E][se]=ue;for(U=0;17>U;++U)Z.Xc[T][U]=Z.Wc[T][Sn[U]]}return m.kc=xe(X),m.kc&&(m.Bd=re(X,8)),m.cb=1}function ha(m,x,T,E,U,X,Z){var se=x[U].Yb[T];for(T=0;16>U;++U){if(!we(m,se[T+0]))return U;for(;!we(m,se[T+1]);)if(se=x[++U].Yb[0],T=0,U==16)return 16;var ie=x[U+1].Yb;if(we(m,se[T+2])){var ue=m,ve=0;if(we(ue,(ce=se)[(Le=T)+3]))if(we(ue,ce[Le+6])){for(se=0,Le=2*(ve=we(ue,ce[Le+8]))+(ce=we(ue,ce[Le+9+ve])),ve=0,ce=Od[Le];ce[se];++se)ve+=ve+we(ue,ce[se]);ve+=3+(8<<Le)}else we(ue,ce[Le+7])?(ve=7+2*we(ue,165),ve+=we(ue,145)):ve=5+we(ue,159);else ve=we(ue,ce[Le+4])?3+we(ue,ce[Le+5]):2;se=ie[2]}else ve=1,se=ie[1];ie=Z+nf[U],0>(ue=m).b&&de(ue);var Le,ce=ue.b,Se=(Le=ue.Ca>>1)-(ue.I>>ce)>>31;--ue.b,ue.Ca+=Se,ue.Ca|=1,ue.I-=(Le+1&Se)<<ce,X[ie]=((ve^Se)-Se)*E[(0<U)+0]}return 16}function xo(m){var x=m.rb[m.sb-1];x.la=0,x.Na=0,a(m.zc,0,0,m.zc.length),m.ja=0}function cs(m,x,T,E,U){U=m[x+T+32*E]+(U>>3),m[x+T+32*E]=-256&U?0>U?0:255:U}function Vr(m,x,T,E,U,X){cs(m,x,0,T,E+U),cs(m,x,1,T,E+X),cs(m,x,2,T,E-X),cs(m,x,3,T,E-U)}function Cr(m){return(20091*m>>16)+m}function wo(m,x,T,E){var U,X=0,Z=o(16);for(U=0;4>U;++U){var se=m[x+0]+m[x+8],ie=m[x+0]-m[x+8],ue=(35468*m[x+4]>>16)-Cr(m[x+12]),ve=Cr(m[x+4])+(35468*m[x+12]>>16);Z[X+0]=se+ve,Z[X+1]=ie+ue,Z[X+2]=ie-ue,Z[X+3]=se-ve,X+=4,x++}for(U=X=0;4>U;++U)se=(m=Z[X+0]+4)+Z[X+8],ie=m-Z[X+8],ue=(35468*Z[X+4]>>16)-Cr(Z[X+12]),cs(T,E,0,0,se+(ve=Cr(Z[X+4])+(35468*Z[X+12]>>16))),cs(T,E,1,0,ie+ue),cs(T,E,2,0,ie-ue),cs(T,E,3,0,se-ve),X++,E+=32}function Il(m,x,T,E){var U=m[x+0]+4,X=35468*m[x+4]>>16,Z=Cr(m[x+4]),se=35468*m[x+1]>>16;Vr(T,E,0,U+Z,m=Cr(m[x+1]),se),Vr(T,E,1,U+X,m,se),Vr(T,E,2,U-X,m,se),Vr(T,E,3,U-Z,m,se)}function Xo(m,x,T,E,U){wo(m,x,T,E),U&&wo(m,x+16,T,E+4)}function Hs(m,x,T,E){Xa(m,x+0,T,E,1),Xa(m,x+32,T,E+128,1)}function Oc(m,x,T,E){var U;for(m=m[x+0]+4,U=0;4>U;++U)for(x=0;4>x;++x)cs(T,E,x,U,m)}function Dc(m,x,T,E){m[x+0]&&qn(m,x+0,T,E),m[x+16]&&qn(m,x+16,T,E+4),m[x+32]&&qn(m,x+32,T,E+128),m[x+48]&&qn(m,x+48,T,E+128+4)}function $i(m,x,T,E){var U,X=o(16);for(U=0;4>U;++U){var Z=m[x+0+U]+m[x+12+U],se=m[x+4+U]+m[x+8+U],ie=m[x+4+U]-m[x+8+U],ue=m[x+0+U]-m[x+12+U];X[0+U]=Z+se,X[8+U]=Z-se,X[4+U]=ue+ie,X[12+U]=ue-ie}for(U=0;4>U;++U)Z=(m=X[0+4*U]+3)+X[3+4*U],se=X[1+4*U]+X[2+4*U],ie=X[1+4*U]-X[2+4*U],ue=m-X[3+4*U],T[E+0]=Z+se>>3,T[E+16]=ue+ie>>3,T[E+32]=Z-se>>3,T[E+48]=ue-ie>>3,E+=64}function Zo(m,x,T){var E,U=x-32,X=Os,Z=255-m[U-1];for(E=0;E<T;++E){var se,ie=X,ue=Z+m[x-1];for(se=0;se<T;++se)m[x+se]=ie[ue+m[U+se]];x+=32}}function Tu(m,x){Zo(m,x,4)}function Cu(m,x){Zo(m,x,8)}function Rc(m,x){Zo(m,x,16)}function Ic(m,x){var T;for(T=0;16>T;++T)s(m,x+32*T,m,x-32,16)}function ku(m,x){var T;for(T=16;0<T;--T)a(m,x,m[x-1],16),x+=32}function Js(m,x,T){var E;for(E=0;16>E;++E)a(x,T+32*E,m,16)}function Xi(m,x){var T,E=16;for(T=0;16>T;++T)E+=m[x-1+32*T]+m[x+T-32];Js(E>>5,m,x)}function Oa(m,x){var T,E=8;for(T=0;16>T;++T)E+=m[x-1+32*T];Js(E>>4,m,x)}function Qo(m,x){var T,E=8;for(T=0;16>T;++T)E+=m[x+T-32];Js(E>>4,m,x)}function _o(m,x){Js(128,m,x)}function Gt(m,x,T){return m+2*x+T+2>>2}function ju(m,x){var T,E=x-32;for(E=new Uint8Array([Gt(m[E-1],m[E+0],m[E+1]),Gt(m[E+0],m[E+1],m[E+2]),Gt(m[E+1],m[E+2],m[E+3]),Gt(m[E+2],m[E+3],m[E+4])]),T=0;4>T;++T)s(m,x+32*T,E,0,E.length)}function Vc(m,x){var T=m[x-1],E=m[x-1+32],U=m[x-1+64],X=m[x-1+96];Ve(m,x+0,16843009*Gt(m[x-1-32],T,E)),Ve(m,x+32,16843009*Gt(T,E,U)),Ve(m,x+64,16843009*Gt(E,U,X)),Ve(m,x+96,16843009*Gt(U,X,X))}function Eu(m,x){var T,E=4;for(T=0;4>T;++T)E+=m[x+T-32]+m[x-1+32*T];for(E>>=3,T=0;4>T;++T)a(m,x+32*T,E,4)}function hi(m,x){var T=m[x-1+0],E=m[x-1+32],U=m[x-1+64],X=m[x-1-32],Z=m[x+0-32],se=m[x+1-32],ie=m[x+2-32],ue=m[x+3-32];m[x+0+96]=Gt(E,U,m[x-1+96]),m[x+1+96]=m[x+0+64]=Gt(T,E,U),m[x+2+96]=m[x+1+64]=m[x+0+32]=Gt(X,T,E),m[x+3+96]=m[x+2+64]=m[x+1+32]=m[x+0+0]=Gt(Z,X,T),m[x+3+64]=m[x+2+32]=m[x+1+0]=Gt(se,Z,X),m[x+3+32]=m[x+2+0]=Gt(ie,se,Z),m[x+3+0]=Gt(ue,ie,se)}function ws(m,x){var T=m[x+1-32],E=m[x+2-32],U=m[x+3-32],X=m[x+4-32],Z=m[x+5-32],se=m[x+6-32],ie=m[x+7-32];m[x+0+0]=Gt(m[x+0-32],T,E),m[x+1+0]=m[x+0+32]=Gt(T,E,U),m[x+2+0]=m[x+1+32]=m[x+0+64]=Gt(E,U,X),m[x+3+0]=m[x+2+32]=m[x+1+64]=m[x+0+96]=Gt(U,X,Z),m[x+3+32]=m[x+2+64]=m[x+1+96]=Gt(X,Z,se),m[x+3+64]=m[x+2+96]=Gt(Z,se,ie),m[x+3+96]=Gt(se,ie,ie)}function Fc(m,x){var T=m[x-1+0],E=m[x-1+32],U=m[x-1+64],X=m[x-1-32],Z=m[x+0-32],se=m[x+1-32],ie=m[x+2-32],ue=m[x+3-32];m[x+0+0]=m[x+1+64]=X+Z+1>>1,m[x+1+0]=m[x+2+64]=Z+se+1>>1,m[x+2+0]=m[x+3+64]=se+ie+1>>1,m[x+3+0]=ie+ue+1>>1,m[x+0+96]=Gt(U,E,T),m[x+0+64]=Gt(E,T,X),m[x+0+32]=m[x+1+96]=Gt(T,X,Z),m[x+1+32]=m[x+2+96]=Gt(X,Z,se),m[x+2+32]=m[x+3+96]=Gt(Z,se,ie),m[x+3+32]=Gt(se,ie,ue)}function Ko(m,x){var T=m[x+0-32],E=m[x+1-32],U=m[x+2-32],X=m[x+3-32],Z=m[x+4-32],se=m[x+5-32],ie=m[x+6-32],ue=m[x+7-32];m[x+0+0]=T+E+1>>1,m[x+1+0]=m[x+0+64]=E+U+1>>1,m[x+2+0]=m[x+1+64]=U+X+1>>1,m[x+3+0]=m[x+2+64]=X+Z+1>>1,m[x+0+32]=Gt(T,E,U),m[x+1+32]=m[x+0+96]=Gt(E,U,X),m[x+2+32]=m[x+1+96]=Gt(U,X,Z),m[x+3+32]=m[x+2+96]=Gt(X,Z,se),m[x+3+64]=Gt(Z,se,ie),m[x+3+96]=Gt(se,ie,ue)}function fi(m,x){var T=m[x-1+0],E=m[x-1+32],U=m[x-1+64],X=m[x-1+96];m[x+0+0]=T+E+1>>1,m[x+2+0]=m[x+0+32]=E+U+1>>1,m[x+2+32]=m[x+0+64]=U+X+1>>1,m[x+1+0]=Gt(T,E,U),m[x+3+0]=m[x+1+32]=Gt(E,U,X),m[x+3+32]=m[x+1+64]=Gt(U,X,X),m[x+3+64]=m[x+2+64]=m[x+0+96]=m[x+1+96]=m[x+2+96]=m[x+3+96]=X}function Jo(m,x){var T=m[x-1+0],E=m[x-1+32],U=m[x-1+64],X=m[x-1+96],Z=m[x-1-32],se=m[x+0-32],ie=m[x+1-32],ue=m[x+2-32];m[x+0+0]=m[x+2+32]=T+Z+1>>1,m[x+0+32]=m[x+2+64]=E+T+1>>1,m[x+0+64]=m[x+2+96]=U+E+1>>1,m[x+0+96]=X+U+1>>1,m[x+3+0]=Gt(se,ie,ue),m[x+2+0]=Gt(Z,se,ie),m[x+1+0]=m[x+3+32]=Gt(T,Z,se),m[x+1+32]=m[x+3+64]=Gt(E,T,Z),m[x+1+64]=m[x+3+96]=Gt(U,E,T),m[x+1+96]=Gt(X,U,E)}function fa(m,x){var T;for(T=0;8>T;++T)s(m,x+32*T,m,x-32,8)}function Mu(m,x){var T;for(T=0;8>T;++T)a(m,x,m[x-1],8),x+=32}function Si(m,x,T){var E;for(E=0;8>E;++E)a(x,T+32*E,m,8)}function Vl(m,x){var T,E=8;for(T=0;8>T;++T)E+=m[x+T-32]+m[x-1+32*T];Si(E>>4,m,x)}function Fl(m,x){var T,E=4;for(T=0;8>T;++T)E+=m[x+T-32];Si(E>>3,m,x)}function us(m,x){var T,E=4;for(T=0;8>T;++T)E+=m[x-1+32*T];Si(E>>3,m,x)}function da(m,x){Si(128,m,x)}function Ni(m,x,T){var E=m[x-T],U=m[x+0],X=3*(U-E)+Za[1020+m[x-2*T]-m[x+T]],Z=Yc[112+(X+4>>3)];m[x-T]=Os[255+E+Yc[112+(X+3>>3)]],m[x+0]=Os[255+U-Z]}function Da(m,x,T,E){var U=m[x+0],X=m[x+T];return Ns[255+m[x-2*T]-m[x-T]]>E||Ns[255+X-U]>E}function Bl(m,x,T,E){return 4*Ns[255+m[x-T]-m[x+0]]+Ns[255+m[x-2*T]-m[x+T]]<=E}function el(m,x,T,E,U){var X=m[x-3*T],Z=m[x-2*T],se=m[x-T],ie=m[x+0],ue=m[x+T],ve=m[x+2*T],Le=m[x+3*T];return 4*Ns[255+se-ie]+Ns[255+Z-ue]>E?0:Ns[255+m[x-4*T]-X]<=U&&Ns[255+X-Z]<=U&&Ns[255+Z-se]<=U&&Ns[255+Le-ve]<=U&&Ns[255+ve-ue]<=U&&Ns[255+ue-ie]<=U}function Ra(m,x,T,E){var U=2*E+1;for(E=0;16>E;++E)Bl(m,x+E,T,U)&&Ni(m,x+E,T)}function Ia(m,x,T,E){var U=2*E+1;for(E=0;16>E;++E)Bl(m,x+E*T,1,U)&&Ni(m,x+E*T,1)}function tl(m,x,T,E){var U;for(U=3;0<U;--U)Ra(m,x+=4*T,T,E)}function Bc(m,x,T,E){var U;for(U=3;0<U;--U)Ia(m,x+=4,T,E)}function Va(m,x,T,E,U,X,Z,se){for(X=2*X+1;0<U--;){if(el(m,x,T,X,Z))if(Da(m,x,T,se))Ni(m,x,T);else{var ie=m,ue=x,ve=T,Le=ie[ue-2*ve],ce=ie[ue-ve],Se=ie[ue+0],je=ie[ue+ve],qe=ie[ue+2*ve],Ee=27*(We=Za[1020+3*(Se-ce)+Za[1020+Le-je]])+63>>7,ze=18*We+63>>7,We=9*We+63>>7;ie[ue-3*ve]=Os[255+ie[ue-3*ve]+We],ie[ue-2*ve]=Os[255+Le+ze],ie[ue-ve]=Os[255+ce+Ee],ie[ue+0]=Os[255+Se-Ee],ie[ue+ve]=Os[255+je-ze],ie[ue+2*ve]=Os[255+qe-We]}x+=E}}function Fa(m,x,T,E,U,X,Z,se){for(X=2*X+1;0<U--;){if(el(m,x,T,X,Z))if(Da(m,x,T,se))Ni(m,x,T);else{var ie=m,ue=x,ve=T,Le=ie[ue-ve],ce=ie[ue+0],Se=ie[ue+ve],je=Yc[112+(4+(qe=3*(ce-Le))>>3)],qe=Yc[112+(qe+3>>3)],Ee=je+1>>1;ie[ue-2*ve]=Os[255+ie[ue-2*ve]+Ee],ie[ue-ve]=Os[255+Le+qe],ie[ue+0]=Os[255+ce-je],ie[ue+ve]=Os[255+Se-Ee]}x+=E}}function Lu(m,x,T,E,U,X){Va(m,x,T,1,16,E,U,X)}function Ba(m,x,T,E,U,X){Va(m,x,1,T,16,E,U,X)}function Ou(m,x,T,E,U,X){var Z;for(Z=3;0<Z;--Z)Fa(m,x+=4*T,T,1,16,E,U,X)}function S(m,x,T,E,U,X){var Z;for(Z=3;0<Z;--Z)Fa(m,x+=4,1,T,16,E,U,X)}function q(m,x,T,E,U,X,Z,se){Va(m,x,U,1,8,X,Z,se),Va(T,E,U,1,8,X,Z,se)}function he(m,x,T,E,U,X,Z,se){Va(m,x,1,U,8,X,Z,se),Va(T,E,1,U,8,X,Z,se)}function ge(m,x,T,E,U,X,Z,se){Fa(m,x+4*U,U,1,8,X,Z,se),Fa(T,E+4*U,U,1,8,X,Z,se)}function Te(m,x,T,E,U,X,Z,se){Fa(m,x+4,1,U,8,X,Z,se),Fa(T,E+4,1,U,8,X,Z,se)}function Ge(){this.ba=new vt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function et(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function kt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ot(){this.ua=0,this.Wa=new ct,this.vb=new ct,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ae,this.yc=new te}function Zt(){this.xb=this.a=0,this.l=new wi,this.ca=new vt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ot,this.ab=0,this.gc=u(4,kt),this.Oc=0}function an(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function On(m,x,T,E,U,X,Z){for(m=m==null?0:m[x+0],x=0;x<Z;++x)U[X+x]=m+T[E+x]&255,m=U[X+x]}function vr(m,x,T,E,U,X,Z){var se;if(m==null)On(null,null,T,E,U,X,Z);else for(se=0;se<Z;++se)U[X+se]=m[x+se]+T[E+se]&255}function Fr(m,x,T,E,U,X,Z){if(m==null)On(null,null,T,E,U,X,Z);else{var se,ie=m[x+0],ue=ie,ve=ie;for(se=0;se<Z;++se)ue=ve+(ie=m[x+se])-ue,ve=T[E+se]+(-256&ue?0>ue?0:255:ue)&255,ue=ie,U[X+se]=ve}}function tr(m,x,T,E){var U=x.width,X=x.o;if(e(m!=null&&x!=null),0>T||0>=E||T+E>X)return null;if(!m.Cc){if(m.ga==null){var Z;if(m.ga=new an,(Z=m.ga==null)||(Z=x.width*x.o,e(m.Gb.length==0),m.Gb=o(Z),m.Uc=0,m.Gb==null?Z=0:(m.mb=m.Gb,m.nb=m.Uc,m.rc=null,Z=1),Z=!Z),!Z){Z=m.ga;var se=m.Fa,ie=m.P,ue=m.qc,ve=m.mb,Le=m.nb,ce=ie+1,Se=ue-1,je=Z.l;if(e(se!=null&&ve!=null&&x!=null),Qa[0]=null,Qa[1]=On,Qa[2]=vr,Qa[3]=Fr,Z.ca=ve,Z.tb=Le,Z.c=x.width,Z.i=x.height,e(0<Z.c&&0<Z.i),1>=ue)x=0;else if(Z.$a=3&se[ie+0],Z.Z=se[ie+0]>>2&3,Z.Lc=se[ie+0]>>4&3,ie=se[ie+0]>>6&3,0>Z.$a||1<Z.$a||4<=Z.Z||1<Z.Lc||ie)x=0;else if(je.put=ot,je.ac=At,je.bc=Bt,je.ma=Z,je.width=x.width,je.height=x.height,je.Da=x.Da,je.v=x.v,je.va=x.va,je.j=x.j,je.o=x.o,Z.$a)e:{e(Z.$a==1),x=Ne();t:for(;;){if(x==null){x=0;break e}if(e(Z!=null),Z.mc=x,x.c=Z.c,x.i=Z.i,x.l=Z.l,x.l.ma=Z,x.l.width=Z.c,x.l.height=Z.i,x.a=0,pe(x.m,se,ce,Se),!Ie(Z.c,Z.i,1,x,null)||(x.ab==1&&x.gc[0].hc==3&&Ln(x.s)?(Z.ic=1,se=x.c*x.i,x.Ta=null,x.Ua=0,x.V=o(se),x.Ba=0,x.V==null?(x.a=1,x=0):x=1):(Z.ic=0,x=Ze(x,Z.c)),!x))break t;x=1;break e}Z.mc=null,x=0}else x=Se>=Z.c*Z.i;Z=!x}if(Z)return null;m.ga.Lc!=1?m.Ga=0:E=X-T}e(m.ga!=null),e(T+E<=X);e:{if(x=(se=m.ga).c,X=se.l.o,se.$a==0){if(ce=m.rc,Se=m.Vc,je=m.Fa,ie=m.P+1+T*x,ue=m.mb,ve=m.nb+T*x,e(ie<=m.P+m.qc),se.Z!=0)for(e(Qa[se.Z]!=null),Z=0;Z<E;++Z)Qa[se.Z](ce,Se,je,ie,ue,ve,x),ce=ue,Se=ve,ve+=x,ie+=x;else for(Z=0;Z<E;++Z)s(ue,ve,je,ie,x),ce=ue,Se=ve,ve+=x,ie+=x;m.rc=ce,m.Vc=Se}else{if(e(se.mc!=null),x=T+E,e((Z=se.mc)!=null),e(x<=Z.i),Z.C>=x)x=1;else if(se.ic||Zi(),se.ic){se=Z.V,ce=Z.Ba,Se=Z.c;var qe=Z.i,Ee=(je=1,ie=Z.$/Se,ue=Z.$%Se,ve=Z.m,Le=Z.s,Z.$),ze=Se*qe,We=Se*x,lt=Le.wc,Ke=Ee<We?fn(Le,ue,ie):null;e(Ee<=ze),e(x<=qe),e(Ln(Le));t:for(;;){for(;!ve.h&&Ee<We;){if(ue&lt||(Ke=fn(Le,ue,ie)),e(Ke!=null),fe(ve),256>(qe=Ut(Ke.G[0],Ke.H[0],ve)))se[ce+Ee]=qe,++Ee,++ue>=Se&&(ue=0,++ie<=x&&!(ie%16)&&mr(Z,ie));else{if(!(280>qe)){je=0;break t}qe=vn(qe-256,ve);var Et,wt=Ut(Ke.G[4],Ke.H[4],ve);if(fe(ve),!(Ee>=(wt=xn(Se,wt=vn(wt,ve)))&&ze-Ee>=qe)){je=0;break t}for(Et=0;Et<qe;++Et)se[ce+Ee+Et]=se[ce+Ee+Et-wt];for(Ee+=qe,ue+=qe;ue>=Se;)ue-=Se,++ie<=x&&!(ie%16)&&mr(Z,ie);Ee<We&&ue&lt&&(Ke=fn(Le,ue,ie))}e(ve.h==Q(ve))}mr(Z,ie>x?x:ie);break t}!je||ve.h&&Ee<ze?(je=0,Z.a=ve.h?5:3):Z.$=Ee,x=je}else x=yn(Z,Z.V,Z.Ba,Z.c,Z.i,x,bt);if(!x){E=0;break e}}T+E>=X&&(m.Cc=1),E=1}if(!E)return null;if(m.Cc&&((E=m.ga)!=null&&(E.mc=null),m.ga=null,0<m.Ga))return alert("todo:WebPDequantizeLevels"),null}return m.nb+T*U}function es(m,x,T,E,U,X){for(;0<U--;){var Z,se=m,ie=x+(T?1:0),ue=m,ve=x+(T?0:3);for(Z=0;Z<E;++Z){var Le=ue[ve+4*Z];Le!=255&&(Le*=32897,se[ie+4*Z+0]=se[ie+4*Z+0]*Le>>23,se[ie+4*Z+1]=se[ie+4*Z+1]*Le>>23,se[ie+4*Z+2]=se[ie+4*Z+2]*Le>>23)}x+=X}}function Hr(m,x,T,E,U){for(;0<E--;){var X;for(X=0;X<T;++X){var Z=m[x+2*X+0],se=15&(ue=m[x+2*X+1]),ie=4369*se,ue=(240&ue|ue>>4)*ie>>16;m[x+2*X+0]=(240&Z|Z>>4)*ie>>16&240|(15&Z|Z<<4)*ie>>16>>4&15,m[x+2*X+1]=240&ue|se}x+=U}}function _s(m,x,T,E,U,X,Z,se){var ie,ue,ve=255;for(ue=0;ue<U;++ue){for(ie=0;ie<E;++ie){var Le=m[x+ie];X[Z+4*ie]=Le,ve&=Le}x+=T,Z+=se}return ve!=255}function Pa(m,x,T,E,U){var X;for(X=0;X<U;++X)T[E+X]=m[x+X]>>8}function Zi(){il=es,Ti=Hr,Hc=_s,mi=Pa}function za(m,x,T){B[m]=function(E,U,X,Z,se,ie,ue,ve,Le,ce,Se,je,qe,Ee,ze,We,lt){var Ke,Et=lt-1>>1,wt=se[ie+0]|ue[ve+0]<<16,Jt=Le[ce+0]|Se[je+0]<<16;e(E!=null);var Ct=3*wt+Jt+131074>>2;for(x(E[U+0],255&Ct,Ct>>16,qe,Ee),X!=null&&(Ct=3*Jt+wt+131074>>2,x(X[Z+0],255&Ct,Ct>>16,ze,We)),Ke=1;Ke<=Et;++Ke){var _n=se[ie+Ke]|ue[ve+Ke]<<16,hr=Le[ce+Ke]|Se[je+Ke]<<16,on=wt+_n+Jt+hr+524296,_t=on+2*(_n+Jt)>>3;Ct=_t+wt>>1,wt=(on=on+2*(wt+hr)>>3)+_n>>1,x(E[U+2*Ke-1],255&Ct,Ct>>16,qe,Ee+(2*Ke-1)*T),x(E[U+2*Ke-0],255&wt,wt>>16,qe,Ee+(2*Ke-0)*T),X!=null&&(Ct=on+Jt>>1,wt=_t+hr>>1,x(X[Z+2*Ke-1],255&Ct,Ct>>16,ze,We+(2*Ke-1)*T),x(X[Z+2*Ke+0],255&wt,wt>>16,ze,We+(2*Ke+0)*T)),wt=_n,Jt=hr}1&lt||(Ct=3*wt+Jt+131074>>2,x(E[U+lt-1],255&Ct,Ct>>16,qe,Ee+(lt-1)*T),X!=null&&(Ct=3*Jt+wt+131074>>2,x(X[Z+lt-1],255&Ct,Ct>>16,ze,We+(lt-1)*T)))}}function Pc(){Ts[Vu]=ll,Ts[Ds]=Zl,Ts[Fu]=sf,Ts[Ci]=Uu,Ts[$c]=jo,Ts[Yl]=_a,Ts[To]=Eo,Ts[Xc]=Zl,Ts[Bu]=Uu,Ts[$l]=jo,Ts[Pu]=_a}function Pl(m){return m&-16384?0>m?0:255:m>>Hu}function pa(m,x){return Pl((19077*m>>8)+(26149*x>>8)-14234)}function Qi(m,x,T){return Pl((19077*m>>8)-(6419*x>>8)-(13320*T>>8)+8708)}function nl(m,x){return Pl((19077*m>>8)+(33050*x>>8)-17685)}function qa(m,x,T,E,U){E[U+0]=pa(m,T),E[U+1]=Qi(m,x,T),E[U+2]=nl(m,x)}function hs(m,x,T,E,U){E[U+0]=nl(m,x),E[U+1]=Qi(m,x,T),E[U+2]=pa(m,T)}function So(m,x,T,E,U){var X=Qi(m,x,T);x=X<<3&224|nl(m,x)>>3,E[U+0]=248&pa(m,T)|X>>5,E[U+1]=x}function No(m,x,T,E,U){var X=240&nl(m,x)|15;E[U+0]=240&pa(m,T)|Qi(m,x,T)>>4,E[U+1]=X}function zl(m,x,T,E,U){E[U+0]=255,qa(m,x,T,E,U+1)}function ma(m,x,T,E,U){hs(m,x,T,E,U),E[U+3]=255}function Gs(m,x,T,E,U){qa(m,x,T,E,U),E[U+3]=255}function Ua(m,x,T){B[m]=function(E,U,X,Z,se,ie,ue,ve,Le){for(var ce=ve+(-2&Le)*T;ve!=ce;)x(E[U+0],X[Z+0],se[ie+0],ue,ve),x(E[U+1],X[Z+0],se[ie+0],ue,ve+T),U+=2,++Z,++ie,ve+=2*T;1&Le&&x(E[U+0],X[Z+0],se[ie+0],ue,ve)}}function ql(m,x,T){return T==0?m==0?x==0?6:5:x==0?4:0:T}function zc(m,x,T,E,U){switch(m>>>30){case 3:Xa(x,T,E,U,0);break;case 2:Ls(x,T,E,U);break;case 1:qn(x,T,E,U)}}function di(m,x){var T,E,U=x.M,X=x.Nb,Z=m.oc,se=m.pc+40,ie=m.oc,ue=m.pc+584,ve=m.oc,Le=m.pc+600;for(T=0;16>T;++T)Z[se+32*T-1]=129;for(T=0;8>T;++T)ie[ue+32*T-1]=129,ve[Le+32*T-1]=129;for(0<U?Z[se-1-32]=ie[ue-1-32]=ve[Le-1-32]=129:(a(Z,se-32-1,127,21),a(ie,ue-32-1,127,9),a(ve,Le-32-1,127,9)),E=0;E<m.za;++E){var ce=x.ya[x.aa+E];if(0<E){for(T=-1;16>T;++T)s(Z,se+32*T-4,Z,se+32*T+12,4);for(T=-1;8>T;++T)s(ie,ue+32*T-4,ie,ue+32*T+4,4),s(ve,Le+32*T-4,ve,Le+32*T+4,4)}var Se=m.Gd,je=m.Hd+E,qe=ce.ad,Ee=ce.Hc;if(0<U&&(s(Z,se-32,Se[je].y,0,16),s(ie,ue-32,Se[je].f,0,8),s(ve,Le-32,Se[je].ea,0,8)),ce.Za){var ze=Z,We=se-32+16;for(0<U&&(E>=m.za-1?a(ze,We,Se[je].y[15],4):s(ze,We,Se[je+1].y,0,4)),T=0;4>T;T++)ze[We+128+T]=ze[We+256+T]=ze[We+384+T]=ze[We+0+T];for(T=0;16>T;++T,Ee<<=2)ze=Z,We=se+zr[T],kr[ce.Ob[T]](ze,We),zc(Ee,qe,16*+T,ze,We)}else if(ze=ql(E,U,ce.Ob[0]),Ys[ze](Z,se),Ee!=0)for(T=0;16>T;++T,Ee<<=2)zc(Ee,qe,16*+T,Z,se+zr[T]);for(T=ce.Gc,ze=ql(E,U,ce.Dd),ta[ze](ie,ue),ta[ze](ve,Le),Ee=qe,ze=ie,We=ue,255&(ce=0|T)&&(170&ce?Ai(Ee,256,ze,We):Dn(Ee,256,ze,We)),ce=ve,Ee=Le,255&(T>>=8)&&(170&T?Ai(qe,320,ce,Ee):Dn(qe,320,ce,Ee)),U<m.Ub-1&&(s(Se[je].y,0,Z,se+480,16),s(Se[je].f,0,ie,ue+224,8),s(Se[je].ea,0,ve,Le+224,8)),T=8*X*m.B,Se=m.sa,je=m.ta+16*E+16*X*m.R,qe=m.qa,ce=m.ra+8*E+T,Ee=m.Ha,ze=m.Ia+8*E+T,T=0;16>T;++T)s(Se,je+T*m.R,Z,se+32*T,16);for(T=0;8>T;++T)s(qe,ce+T*m.B,ie,ue+32*T,8),s(Ee,ze+T*m.B,ve,Le+32*T,8)}}function Ki(m,x,T,E,U,X,Z,se,ie){var ue=[0],ve=[0],Le=0,ce=ie!=null?ie.kd:0,Se=ie??new et;if(m==null||12>T)return 7;Se.data=m,Se.w=x,Se.ha=T,x=[x],T=[T],Se.gb=[Se.gb];e:{var je=x,qe=T,Ee=Se.gb;if(e(m!=null),e(qe!=null),e(Ee!=null),Ee[0]=0,12<=qe[0]&&!t(m,je[0],"RIFF")){if(t(m,je[0]+8,"WEBP")){Ee=3;break e}var ze=Fe(m,je[0]+4);if(12>ze||4294967286<ze){Ee=3;break e}if(ce&&ze>qe[0]-8){Ee=7;break e}Ee[0]=ze,je[0]+=12,qe[0]-=12}Ee=0}if(Ee!=0)return Ee;for(ze=0<Se.gb[0],T=T[0];;){e:{var We=m;qe=x,Ee=T;var lt=ue,Ke=ve,Et=je=[0];if((Ct=Le=[Le])[0]=0,8>Ee[0])Ee=7;else{if(!t(We,qe[0],"VP8X")){if(Fe(We,qe[0]+4)!=10){Ee=3;break e}if(18>Ee[0]){Ee=7;break e}var wt=Fe(We,qe[0]+8),Jt=1+Je(We,qe[0]+12);if(2147483648<=Jt*(We=1+Je(We,qe[0]+15))){Ee=3;break e}Et!=null&&(Et[0]=wt),lt!=null&&(lt[0]=Jt),Ke!=null&&(Ke[0]=We),qe[0]+=18,Ee[0]-=18,Ct[0]=1}Ee=0}}if(Le=Le[0],je=je[0],Ee!=0)return Ee;if(qe=!!(2&je),!ze&&Le)return 3;if(X!=null&&(X[0]=!!(16&je)),Z!=null&&(Z[0]=qe),se!=null&&(se[0]=0),Z=ue[0],je=ve[0],Le&&qe&&ie==null){Ee=0;break}if(4>T){Ee=7;break}if(ze&&Le||!ze&&!Le&&!t(m,x[0],"ALPH")){T=[T],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{wt=m,Ee=x,ze=T;var Ct=Se.gb;lt=Se.na,Ke=Se.P,Et=Se.Sa,Jt=22,e(wt!=null),e(ze!=null),We=Ee[0];var _n=ze[0];for(e(lt!=null),e(Et!=null),lt[0]=null,Ke[0]=null,Et[0]=0;;){if(Ee[0]=We,ze[0]=_n,8>_n){Ee=7;break e}var hr=Fe(wt,We+4);if(4294967286<hr){Ee=3;break e}var on=8+hr+1&-2;if(Jt+=on,0<Ct&&Jt>Ct){Ee=3;break e}if(!t(wt,We,"VP8 ")||!t(wt,We,"VP8L")){Ee=0;break e}if(_n[0]<on){Ee=7;break e}t(wt,We,"ALPH")||(lt[0]=wt,Ke[0]=We+8,Et[0]=hr),We+=on,_n-=on}}if(T=T[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],Ee!=0)break}T=[T],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(Ct=m,Ee=x,ze=T,lt=Se.gb[0],Ke=Se.Ja,Et=Se.xa,wt=Ee[0],We=!t(Ct,wt,"VP8 "),Jt=!t(Ct,wt,"VP8L"),e(Ct!=null),e(ze!=null),e(Ke!=null),e(Et!=null),8>ze[0])Ee=7;else{if(We||Jt){if(Ct=Fe(Ct,wt+4),12<=lt&&Ct>lt-12){Ee=3;break e}if(ce&&Ct>ze[0]-8){Ee=7;break e}Ke[0]=Ct,Ee[0]+=8,ze[0]-=8,Et[0]=Jt}else Et[0]=5<=ze[0]&&Ct[wt+0]==47&&!(Ct[wt+4]>>5),Ke[0]=ze[0];Ee=0}if(T=T[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],x=x[0],Ee!=0)break;if(4294967286<Se.Ja)return 3;if(se==null||qe||(se[0]=Se.xa?2:1),Z=[Z],je=[je],Se.xa){if(5>T){Ee=7;break}se=Z,ce=je,qe=X,m==null||5>T?m=0:5<=T&&m[x+0]==47&&!(m[x+4]>>5)?(ze=[0],Ct=[0],lt=[0],pe(Ke=new G,m,x,T),bn(Ke,ze,Ct,lt)?(se!=null&&(se[0]=ze[0]),ce!=null&&(ce[0]=Ct[0]),qe!=null&&(qe[0]=lt[0]),m=1):m=0):m=0}else{if(10>T){Ee=7;break}se=je,m==null||10>T||!yo(m,x+3,T-3)?m=0:(ce=m[x+0]|m[x+1]<<8|m[x+2]<<16,qe=16383&(m[x+7]<<8|m[x+6]),m=16383&(m[x+9]<<8|m[x+8]),1&ce||3<(ce>>1&7)||!(ce>>4&1)||ce>>5>=Se.Ja||!qe||!m?m=0:(Z&&(Z[0]=qe),se&&(se[0]=m),m=1))}if(!m||(Z=Z[0],je=je[0],Le&&(ue[0]!=Z||ve[0]!=je)))return 3;ie!=null&&(ie[0]=Se,ie.offset=x-ie.w,e(4294967286>x-ie.w),e(ie.offset==ie.ha-T));break}return Ee==0||Ee==7&&Le&&ie==null?(X!=null&&(X[0]|=Se.na!=null&&0<Se.na.length),E!=null&&(E[0]=Z),U!=null&&(U[0]=je),0):Ee}function Ha(m,x,T){var E=x.width,U=x.height,X=0,Z=0,se=E,ie=U;if(x.Da=m!=null&&0<m.Da,x.Da&&(se=m.cd,ie=m.bd,X=m.v,Z=m.j,11>T||(X&=-2,Z&=-2),0>X||0>Z||0>=se||0>=ie||X+se>E||Z+ie>U))return 0;if(x.v=X,x.j=Z,x.va=X+se,x.o=Z+ie,x.U=se,x.T=ie,x.da=m!=null&&0<m.da,x.da){if(!Ue(se,ie,T=[m.ib],X=[m.hb]))return 0;x.ib=T[0],x.hb=X[0]}return x.ob=m!=null&&m.ob,x.Kb=m==null||!m.Sd,x.da&&(x.ob=x.ib<3*E/4&&x.hb<3*U/4,x.Kb=0),1}function qc(m){if(m==null)return 2;if(11>m.S){var x=m.f.RGBA;x.fb+=(m.height-1)*x.A,x.A=-x.A}else x=m.f.kb,m=m.height,x.O+=(m-1)*x.fa,x.fa=-x.fa,x.N+=(m-1>>1)*x.Ab,x.Ab=-x.Ab,x.W+=(m-1>>1)*x.Db,x.Db=-x.Db,x.F!=null&&(x.J+=(m-1)*x.lb,x.lb=-x.lb);return 0}function Ji(m,x,T,E){if(E==null||0>=m||0>=x)return 2;if(T!=null){if(T.Da){var U=T.cd,X=T.bd,Z=-2&T.v,se=-2&T.j;if(0>Z||0>se||0>=U||0>=X||Z+U>m||se+X>x)return 2;m=U,x=X}if(T.da){if(!Ue(m,x,U=[T.ib],X=[T.hb]))return 2;m=U[0],x=X[0]}}E.width=m,E.height=x;e:{var ie=E.width,ue=E.height;if(m=E.S,0>=ie||0>=ue||!(m>=Vu&&13>m))m=2;else{if(0>=E.Rd&&E.sd==null){Z=X=U=x=0;var ve=(se=ie*Wu[m])*ue;if(11>m||(X=(ue+1)/2*(x=(ie+1)/2),m==12&&(Z=(U=ie)*ue)),(ue=o(ve+2*X+Z))==null){m=1;break e}E.sd=ue,11>m?((ie=E.f.RGBA).eb=ue,ie.fb=0,ie.A=se,ie.size=ve):((ie=E.f.kb).y=ue,ie.O=0,ie.fa=se,ie.Fd=ve,ie.f=ue,ie.N=0+ve,ie.Ab=x,ie.Cd=X,ie.ea=ue,ie.W=0+ve+X,ie.Db=x,ie.Ed=X,m==12&&(ie.F=ue,ie.J=0+ve+2*X),ie.Tc=Z,ie.lb=U)}if(x=1,U=E.S,X=E.width,Z=E.height,U>=Vu&&13>U)if(11>U)m=E.f.RGBA,x&=(se=Math.abs(m.A))*(Z-1)+X<=m.size,x&=se>=X*Wu[U],x&=m.eb!=null;else{m=E.f.kb,se=(X+1)/2,ve=(Z+1)/2,ie=Math.abs(m.fa),ue=Math.abs(m.Ab);var Le=Math.abs(m.Db),ce=Math.abs(m.lb),Se=ce*(Z-1)+X;x&=ie*(Z-1)+X<=m.Fd,x&=ue*(ve-1)+se<=m.Cd,x=(x&=Le*(ve-1)+se<=m.Ed)&ie>=X&ue>=se&Le>=se,x&=m.y!=null,x&=m.f!=null,x&=m.ea!=null,U==12&&(x&=ce>=X,x&=Se<=m.Tc,x&=m.F!=null)}else x=0;m=x?0:2}}return m!=0||T!=null&&T.fd&&(m=qc(E)),m}var Ao=64,ei=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ws=24,ga=32,ba=8,Ga=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ye("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(m){return m},B.Predictor2=function(m,x,T){return x[T+0]},B.Predictor3=function(m,x,T){return x[T+1]},B.Predictor4=function(m,x,T){return x[T-1]},B.Predictor5=function(m,x,T){return at(at(m,x[T+1]),x[T+0])},B.Predictor6=function(m,x,T){return at(m,x[T-1])},B.Predictor7=function(m,x,T){return at(m,x[T+0])},B.Predictor8=function(m,x,T){return at(x[T-1],x[T+0])},B.Predictor9=function(m,x,T){return at(x[T+0],x[T+1])},B.Predictor10=function(m,x,T){return at(at(m,x[T-1]),at(x[T+0],x[T+1]))},B.Predictor11=function(m,x,T){var E=x[T+0];return 0>=tt(E>>24&255,m>>24&255,(x=x[T-1])>>24&255)+tt(E>>16&255,m>>16&255,x>>16&255)+tt(E>>8&255,m>>8&255,x>>8&255)+tt(255&E,255&m,255&x)?E:m},B.Predictor12=function(m,x,T){var E=x[T+0];return(Pe((m>>24&255)+(E>>24&255)-((x=x[T-1])>>24&255))<<24|Pe((m>>16&255)+(E>>16&255)-(x>>16&255))<<16|Pe((m>>8&255)+(E>>8&255)-(x>>8&255))<<8|Pe((255&m)+(255&E)-(255&x)))>>>0},B.Predictor13=function(m,x,T){var E=x[T-1];return(nt((m=at(m,x[T+0]))>>24&255,E>>24&255)<<24|nt(m>>16&255,E>>16&255)<<16|nt(m>>8&255,E>>8&255)<<8|nt(255&m,255&E))>>>0};var Ul=B.PredictorAdd0;B.PredictorAdd1=ht,Ye("Predictor2","PredictorAdd2"),Ye("Predictor3","PredictorAdd3"),Ye("Predictor4","PredictorAdd4"),Ye("Predictor5","PredictorAdd5"),Ye("Predictor6","PredictorAdd6"),Ye("Predictor7","PredictorAdd7"),Ye("Predictor8","PredictorAdd8"),Ye("Predictor9","PredictorAdd9"),Ye("Predictor10","PredictorAdd10"),Ye("Predictor11","PredictorAdd11"),Ye("Predictor12","PredictorAdd12"),Ye("Predictor13","PredictorAdd13");var Hl=B.PredictorAdd2;ft("ColorIndexInverseTransform","MapARGB","32b",function(m){return m>>8&255},function(m){return m}),ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(m){return m},function(m){return m>>8&255});var Br,Du=B.ColorIndexInverseTransform,va=B.MapARGB,ya=B.VP8LColorIndexInverseTransformAlpha,Ss=B.MapAlpha,Wa=B.VP8LPredictorsAdd=[];Wa.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var Gl,Wl,Ya,$a,xa,rl,pi,Xa,Ls,Ai,qn,Dn,nr,Pr,wa,ea,sl,Uc,Jh,Ed,Md,Ld,ef,tf,il,Ti,Hc,mi,al=o(511),Ru=o(2041),Gc=o(225),Wc=o(767),Iu=0,Za=Ru,Yc=Gc,Os=Wc,Ns=al,Vu=0,Ds=1,Fu=2,Ci=3,$c=4,Yl=5,To=6,Xc=7,Bu=8,$l=9,Pu=10,ki=[2,3,7],Xl=[3,3,11],ol=[280,256,256,256,40],zu=[0,1,1,1,0],Zc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ji=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ei=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Co=8,Mi=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Li=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],gi=null,Od=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],nf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],qu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Dd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],As=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ur=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Sn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ys=[],kr=[],ta=[],ko=1,rf=2,Qa=[],Ts=[];za("UpsampleRgbLinePair",qa,3),za("UpsampleBgrLinePair",hs,3),za("UpsampleRgbaLinePair",Gs,4),za("UpsampleBgraLinePair",ma,4),za("UpsampleArgbLinePair",zl,4),za("UpsampleRgba4444LinePair",No,2),za("UpsampleRgb565LinePair",So,2);var ll=B.UpsampleRgbLinePair,sf=B.UpsampleBgrLinePair,Zl=B.UpsampleRgbaLinePair,Uu=B.UpsampleBgraLinePair,jo=B.UpsampleArgbLinePair,_a=B.UpsampleRgba4444LinePair,Eo=B.UpsampleRgb565LinePair,Oi=16,Ql=1<<Oi-1,cl=-227,Mo=482,Hu=6,Lo=0,Cs=o(256),Gu=o(256),Rd=o(256),Jp=o(256),e0=o(Mo-cl),t0=o(Mo-cl);Ua("YuvToRgbRow",qa,3),Ua("YuvToBgrRow",hs,3),Ua("YuvToRgbaRow",Gs,4),Ua("YuvToBgraRow",ma,4),Ua("YuvToArgbRow",zl,4),Ua("YuvToRgba4444Row",No,2),Ua("YuvToRgb565Row",So,2);var zr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Kl=[0,2,8],Qc=[8,7,6,4,4,2,2,2,1,1,1,1],Kc=1;this.WebPDecodeRGBA=function(m,x,T,E,U){var X=Ds,Z=new Ge,se=new vt;Z.ba=se,se.S=X,se.width=[se.width],se.height=[se.height];var ie=se.width,ue=se.height,ve=new _e;if(ve==null||m==null)var Le=2;else e(ve!=null),Le=Ki(m,x,T,ve.width,ve.height,ve.Pd,ve.Qd,ve.format,null);if(Le!=0?ie=0:(ie!=null&&(ie[0]=ve.width[0]),ue!=null&&(ue[0]=ve.height[0]),ie=1),ie){se.width=se.width[0],se.height=se.height[0],E!=null&&(E[0]=se.width),U!=null&&(U[0]=se.height);e:{if(E=new wi,(U=new et).data=m,U.w=x,U.ha=T,U.kd=1,x=[0],e(U!=null),((m=Ki(U.data,U.w,U.ha,null,null,null,x,null,U))==0||m==7)&&x[0]&&(m=4),(x=m)==0){if(e(Z!=null),E.data=U.data,E.w=U.w+U.offset,E.ha=U.ha-U.offset,E.put=ot,E.ac=At,E.bc=Bt,E.ma=Z,U.xa){if((m=Ne())==null){Z=1;break e}if((function(ce,Se){var je=[0],qe=[0],Ee=[0];t:for(;;){if(ce==null)return 0;if(Se==null)return ce.a=2,0;if(ce.l=Se,ce.a=0,pe(ce.m,Se.data,Se.w,Se.ha),!bn(ce.m,je,qe,Ee)){ce.a=3;break t}if(ce.xb=rf,Se.width=je[0],Se.height=qe[0],!Ie(je[0],qe[0],1,ce,null))break t;return 1}return e(ce.a!=0),0})(m,E)){if(E=(x=Ji(E.width,E.height,Z.Oa,Z.ba))==0){t:{E=m;n:for(;;){if(E==null){E=0;break t}if(e(E.s.yc!=null),e(E.s.Ya!=null),e(0<E.s.Wb),e((T=E.l)!=null),e((U=T.ma)!=null),E.xb!=0){if(E.ca=U.ba,E.tb=U.tb,e(E.ca!=null),!Ha(U.Oa,T,Ci)){E.a=2;break n}if(!Ze(E,T.width)||T.da)break n;if((T.da||Lt(E.ca.S))&&Zi(),11>E.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),E.ca.f.kb.F!=null&&Zi()),E.Pb&&0<E.s.ua&&E.s.vb.X==null&&!z(E.s.vb,E.s.Wa.Xa)){E.a=1;break n}E.xb=0}if(!yn(E,E.V,E.Ba,E.c,E.i,T.o,Vn))break n;U.Dc=E.Ma,E=1;break t}e(E.a!=0),E=0}E=!E}E&&(x=m.a)}else x=m.a}else{if((m=new _i)==null){Z=1;break e}if(m.Fa=U.na,m.P=U.P,m.qc=U.Sa,ui(m,E)){if((x=Ji(E.width,E.height,Z.Oa,Z.ba))==0){if(m.Aa=0,T=Z.Oa,e((U=m)!=null),T!=null){if(0<(ie=0>(ie=T.Md)?0:100<ie?255:255*ie/100)){for(ue=ve=0;4>ue;++ue)12>(Le=U.pb[ue]).lc&&(Le.ia=ie*Qc[0>Le.lc?0:Le.lc]>>3),ve|=Le.ia;ve&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=T.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}(function(ce,Se){if(ce==null)return 0;if(Se==null)return Cn(ce,2,"NULL VP8Io parameter in VP8Decode().");if(!ce.cb&&!ui(ce,Se))return 0;if(e(ce.cb),Se.ac==null||Se.ac(Se)){Se.ob&&(ce.L=0);var je=Kl[ce.L];if(ce.L==2?(ce.yb=0,ce.zb=0):(ce.yb=Se.v-je>>4,ce.zb=Se.j-je>>4,0>ce.yb&&(ce.yb=0),0>ce.zb&&(ce.zb=0)),ce.Va=Se.o+15+je>>4,ce.Hb=Se.va+15+je>>4,ce.Hb>ce.za&&(ce.Hb=ce.za),ce.Va>ce.Ub&&(ce.Va=ce.Ub),0<ce.L){var qe=ce.ed;for(je=0;4>je;++je){var Ee;if(ce.Qa.Cb){var ze=ce.Qa.Lb[je];ce.Qa.Fb||(ze+=qe.Tb)}else ze=qe.Tb;for(Ee=0;1>=Ee;++Ee){var We=ce.gd[je][Ee],lt=ze;if(qe.Pc&&(lt+=qe.vd[0],Ee&&(lt+=qe.od[0])),0<(lt=0>lt?0:63<lt?63:lt)){var Ke=lt;0<qe.wb&&(Ke=4<qe.wb?Ke>>2:Ke>>1)>9-qe.wb&&(Ke=9-qe.wb),1>Ke&&(Ke=1),We.dd=Ke,We.tc=2*lt+Ke,We.ld=40<=lt?2:15<=lt?1:0}else We.tc=0;We.La=Ee}}}je=0}else Cn(ce,6,"Frame setup failed"),je=ce.a;if(je=je==0){if(je){ce.$c=0,0<ce.Aa||(ce.Ic=Kc);t:{je=ce.Ic,qe=4*(Ke=ce.za);var Et=32*Ke,wt=Ke+1,Jt=0<ce.L?Ke*(0<ce.Aa?2:1):0,Ct=(ce.Aa==2?2:1)*Ke;if((We=qe+832+(Ee=3*(16*je+Kl[ce.L])/2*Et)+(ze=ce.Fa!=null&&0<ce.Fa.length?ce.Kc.c*ce.Kc.i:0))!=We)je=0;else{if(We>ce.Vb){if(ce.Vb=0,ce.Ec=o(We),ce.Fc=0,ce.Ec==null){je=Cn(ce,1,"no memory during frame initialization.");break t}ce.Vb=We}We=ce.Ec,lt=ce.Fc,ce.Ac=We,ce.Bc=lt,lt+=qe,ce.Gd=u(Et,ci),ce.Hd=0,ce.rb=u(wt+1,Jr),ce.sb=1,ce.wa=Jt?u(Jt,Rr):null,ce.Y=0,ce.D.Nb=0,ce.D.wa=ce.wa,ce.D.Y=ce.Y,0<ce.Aa&&(ce.D.Y+=Ke),e(!0),ce.oc=We,ce.pc=lt,lt+=832,ce.ya=u(Ct,Us),ce.aa=0,ce.D.ya=ce.ya,ce.D.aa=ce.aa,ce.Aa==2&&(ce.D.aa+=Ke),ce.R=16*Ke,ce.B=8*Ke,Ke=(Et=Kl[ce.L])*ce.R,Et=Et/2*ce.B,ce.sa=We,ce.ta=lt+Ke,ce.qa=ce.sa,ce.ra=ce.ta+16*je*ce.R+Et,ce.Ha=ce.qa,ce.Ia=ce.ra+8*je*ce.B+Et,ce.$c=0,lt+=Ee,ce.mb=ze?We:null,ce.nb=ze?lt:null,e(lt+ze<=ce.Fc+ce.Vb),xo(ce),a(ce.Ac,ce.Bc,0,qe),je=1}}if(je){if(Se.ka=0,Se.y=ce.sa,Se.O=ce.ta,Se.f=ce.qa,Se.N=ce.ra,Se.ea=ce.Ha,Se.Vd=ce.Ia,Se.fa=ce.R,Se.Rc=ce.B,Se.F=null,Se.J=0,!Iu){for(je=-255;255>=je;++je)al[255+je]=0>je?-je:je;for(je=-1020;1020>=je;++je)Ru[1020+je]=-128>je?-128:127<je?127:je;for(je=-112;112>=je;++je)Gc[112+je]=-16>je?-16:15<je?15:je;for(je=-255;510>=je;++je)Wc[255+je]=0>je?0:255<je?255:je;Iu=1}pi=$i,Xa=Xo,Ai=Hs,qn=Oc,Dn=Dc,Ls=Il,nr=Lu,Pr=Ba,wa=q,ea=he,sl=Ou,Uc=S,Jh=ge,Ed=Te,Md=Ra,Ld=Ia,ef=tl,tf=Bc,kr[0]=Eu,kr[1]=Tu,kr[2]=ju,kr[3]=Vc,kr[4]=hi,kr[5]=Fc,kr[6]=ws,kr[7]=Ko,kr[8]=Jo,kr[9]=fi,Ys[0]=Xi,Ys[1]=Rc,Ys[2]=Ic,Ys[3]=ku,Ys[4]=Oa,Ys[5]=Qo,Ys[6]=_o,ta[0]=Vl,ta[1]=Cu,ta[2]=fa,ta[3]=Mu,ta[4]=us,ta[5]=Fl,ta[6]=da,je=1}else je=0}je&&(je=(function(_n,hr){for(_n.M=0;_n.M<_n.Va;++_n.M){var on,_t=_n.Jc[_n.M&_n.Xb],mt=_n.m,yr=_n;for(on=0;on<yr.za;++on){var Wt=mt,dn=yr,Yn=dn.Ac,ts=dn.Bc+4*on,ks=dn.zc,rr=dn.ya[dn.aa+on];if(dn.Qa.Bb?rr.$b=we(Wt,dn.Pa.jb[0])?2+we(Wt,dn.Pa.jb[2]):we(Wt,dn.Pa.jb[1]):rr.$b=0,dn.kc&&(rr.Ad=we(Wt,dn.Bd)),rr.Za=!we(Wt,145)+0,rr.Za){var Gr=rr.Ob,Rs=0;for(dn=0;4>dn;++dn){var Wr,gn=ks[0+dn];for(Wr=0;4>Wr;++Wr){gn=As[Yn[ts+Wr]][gn];for(var Bn=qu[we(Wt,gn[0])];0<Bn;)Bn=qu[2*Bn+we(Wt,gn[Bn])];gn=-Bn,Yn[ts+Wr]=gn}s(Gr,Rs,Yn,ts,4),Rs+=4,ks[0+dn]=gn}}else gn=we(Wt,156)?we(Wt,128)?1:3:we(Wt,163)?2:0,rr.Ob[0]=gn,a(Yn,ts,gn,4),a(ks,0,gn,4);rr.Dd=we(Wt,142)?we(Wt,114)?we(Wt,183)?1:3:2:0}if(yr.m.Ka)return Cn(_n,7,"Premature end-of-partition0 encountered.");for(;_n.ja<_n.za;++_n.ja){if(yr=_t,Wt=(mt=_n).rb[mt.sb-1],Yn=mt.rb[mt.sb+mt.ja],on=mt.ya[mt.aa+mt.ja],ts=mt.kc?on.Ad:0)Wt.la=Yn.la=0,on.Za||(Wt.Na=Yn.Na=0),on.Hc=0,on.Gc=0,on.ia=0;else{var xr,Un;if(Wt=Yn,Yn=yr,ts=mt.Pa.Xc,ks=mt.ya[mt.aa+mt.ja],rr=mt.pb[ks.$b],dn=ks.ad,Gr=0,Rs=mt.rb[mt.sb-1],gn=Wr=0,a(dn,Gr,0,384),ks.Za)var ns=0,wr=ts[3];else{Bn=o(16);var Pn=Wt.Na+Rs.Na;if(Pn=gi(Yn,ts[1],Pn,rr.Eb,0,Bn,0),Wt.Na=Rs.Na=(0<Pn)+0,1<Pn)pi(Bn,0,dn,Gr);else{var qr=Bn[0]+3>>3;for(Bn=0;256>Bn;Bn+=16)dn[Gr+Bn]=qr}ns=1,wr=ts[0]}var $n=15&Wt.la,Yr=15&Rs.la;for(Bn=0;4>Bn;++Bn){var $r=1&Yr;for(qr=Un=0;4>qr;++qr)$n=$n>>1|($r=(Pn=gi(Yn,wr,Pn=$r+(1&$n),rr.Sc,ns,dn,Gr))>ns)<<7,Un=Un<<2|(3<Pn?3:1<Pn?2:dn[Gr+0]!=0),Gr+=16;$n>>=4,Yr=Yr>>1|$r<<7,Wr=(Wr<<8|Un)>>>0}for(wr=$n,ns=Yr>>4,xr=0;4>xr;xr+=2){for(Un=0,$n=Wt.la>>4+xr,Yr=Rs.la>>4+xr,Bn=0;2>Bn;++Bn){for($r=1&Yr,qr=0;2>qr;++qr)Pn=$r+(1&$n),$n=$n>>1|($r=0<(Pn=gi(Yn,ts[2],Pn,rr.Qc,0,dn,Gr)))<<3,Un=Un<<2|(3<Pn?3:1<Pn?2:dn[Gr+0]!=0),Gr+=16;$n>>=2,Yr=Yr>>1|$r<<5}gn|=Un<<4*xr,wr|=$n<<4<<xr,ns|=(240&Yr)<<xr}Wt.la=wr,Rs.la=ns,ks.Hc=Wr,ks.Gc=gn,ks.ia=43690&gn?0:rr.ia,ts=!(Wr|gn)}if(0<mt.L&&(mt.wa[mt.Y+mt.ja]=mt.gd[on.$b][on.Za],mt.wa[mt.Y+mt.ja].La|=!ts),yr.Ka)return Cn(_n,7,"Premature end-of-file encountered.")}if(xo(_n),mt=hr,yr=1,on=(_t=_n).D,Wt=0<_t.L&&_t.M>=_t.zb&&_t.M<=_t.Va,_t.Aa==0)t:{if(on.M=_t.M,on.uc=Wt,di(_t,on),yr=1,on=(Un=_t.D).Nb,Wt=(gn=Kl[_t.L])*_t.R,Yn=gn/2*_t.B,Bn=16*on*_t.R,qr=8*on*_t.B,ts=_t.sa,ks=_t.ta-Wt+Bn,rr=_t.qa,dn=_t.ra-Yn+qr,Gr=_t.Ha,Rs=_t.Ia-Yn+qr,Yr=($n=Un.M)==0,Wr=$n>=_t.Va-1,_t.Aa==2&&di(_t,Un),Un.uc)for($r=(Pn=_t).D.M,e(Pn.D.uc),Un=Pn.yb;Un<Pn.Hb;++Un){ns=Un,wr=$r;var Qn=(Rn=(Xr=Pn).D).Nb;xr=Xr.R;var Rn=Rn.wa[Rn.Y+ns],Is=Xr.sa,jr=Xr.ta+16*Qn*xr+16*ns,Ft=Rn.dd,Pt=Rn.tc;if(Pt!=0)if(e(3<=Pt),Xr.L==1)0<ns&&Ld(Is,jr,xr,Pt+4),Rn.La&&tf(Is,jr,xr,Pt),0<wr&&Md(Is,jr,xr,Pt+4),Rn.La&&ef(Is,jr,xr,Pt);else{var zn=Xr.B,ti=Xr.qa,Di=Xr.ra+8*Qn*zn+8*ns,$s=Xr.Ha,Xr=Xr.Ia+8*Qn*zn+8*ns;Qn=Rn.ld,0<ns&&(Pr(Is,jr,xr,Pt+4,Ft,Qn),ea(ti,Di,$s,Xr,zn,Pt+4,Ft,Qn)),Rn.La&&(Uc(Is,jr,xr,Pt,Ft,Qn),Ed(ti,Di,$s,Xr,zn,Pt,Ft,Qn)),0<wr&&(nr(Is,jr,xr,Pt+4,Ft,Qn),wa(ti,Di,$s,Xr,zn,Pt+4,Ft,Qn)),Rn.La&&(sl(Is,jr,xr,Pt,Ft,Qn),Jh(ti,Di,$s,Xr,zn,Pt,Ft,Qn))}}if(_t.ia&&alert("todo:DitherRow"),mt.put!=null){if(Un=16*$n,$n=16*($n+1),Yr?(mt.y=_t.sa,mt.O=_t.ta+Bn,mt.f=_t.qa,mt.N=_t.ra+qr,mt.ea=_t.Ha,mt.W=_t.Ia+qr):(Un-=gn,mt.y=ts,mt.O=ks,mt.f=rr,mt.N=dn,mt.ea=Gr,mt.W=Rs),Wr||($n-=gn),$n>mt.o&&($n=mt.o),mt.F=null,mt.J=null,_t.Fa!=null&&0<_t.Fa.length&&Un<$n&&(mt.J=tr(_t,mt,Un,$n-Un),mt.F=_t.mb,mt.F==null&&mt.F.length==0)){yr=Cn(_t,3,"Could not decode alpha data.");break t}Un<mt.j&&(gn=mt.j-Un,Un=mt.j,e(!(1&gn)),mt.O+=_t.R*gn,mt.N+=_t.B*(gn>>1),mt.W+=_t.B*(gn>>1),mt.F!=null&&(mt.J+=mt.width*gn)),Un<$n&&(mt.O+=mt.v,mt.N+=mt.v>>1,mt.W+=mt.v>>1,mt.F!=null&&(mt.J+=mt.v),mt.ka=Un-mt.j,mt.U=mt.va-mt.v,mt.T=$n-Un,yr=mt.put(mt))}on+1!=_t.Ic||Wr||(s(_t.sa,_t.ta-Wt,ts,ks+16*_t.R,Wt),s(_t.qa,_t.ra-Yn,rr,dn+8*_t.B,Yn),s(_t.Ha,_t.Ia-Yn,Gr,Rs+8*_t.B,Yn))}if(!yr)return Cn(_n,6,"Output aborted.")}return 1})(ce,Se)),Se.bc!=null&&Se.bc(Se),je&=1}return je?(ce.cb=0,je):0})(m,E)||(x=m.a)}}else x=m.a}x==0&&Z.Oa!=null&&Z.Oa.fd&&(x=qc(Z.ba))}Z=x}X=Z!=0?null:11>X?se.f.RGBA.eb:se.f.kb.y}else X=null;return X};var Wu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(B,K){for(var j="",F=0;F<4;F++)j+=String.fromCharCode(B[K++]);return j}function p(B,K){return B[K+0]|B[K+1]<<8}function y(B,K){return(B[K+0]|B[K+1]<<8|B[K+2]<<16)>>>0}function _(B,K){return(B[K+0]|B[K+1]<<8|B[K+2]<<16|B[K+3]<<24)>>>0}new f;var b=[0],A=[0],N=[],k=new f,C=n,R=(function(B,K){var j={},F=0,te=!1,H=0,ae=0;if(j.frames=[],!(function(M,G){for(var J=0;J<4;J++)if(M[G+J]!="RIFF".charCodeAt(J))return!0;return!1})(B,K)){for(_(B,K+=4),K+=8;K<B.length;){var $=d(B,K),re=_(B,K+=4);K+=4;var le=re+(1&re);switch($){case"VP8 ":case"VP8L":j.frames[F]===void 0&&(j.frames[F]={}),(P=j.frames[F]).src_off=te?ae:K-8,P.src_size=H+re+8,F++,te&&(te=!1,H=0,ae=0);break;case"VP8X":(P=j.header={}).feature_flags=B[K];var pe=K+4;P.canvas_width=1+y(B,pe),pe+=3,P.canvas_height=1+y(B,pe),pe+=3;break;case"ALPH":te=!0,H=le+8,ae=K-8;break;case"ANIM":(P=j.header).bgcolor=_(B,K),pe=K+4,P.loop_count=p(B,pe),pe+=2;break;case"ANMF":var be,P;(P=j.frames[F]={}).offset_x=2*y(B,K),K+=3,P.offset_y=2*y(B,K),K+=3,P.width=1+y(B,K),K+=3,P.height=1+y(B,K),K+=3,P.duration=y(B,K),K+=3,be=B[K++],P.dispose=1&be,P.blend=be>>1&1}$!="ANMF"&&(K+=le)}return j}})(C,0);R.response=C,R.rgbaoutput=!0,R.dataurl=!1;var D=R.header?R.header:null,V=R.frames?R.frames:null;if(D){D.loop_counter=D.loop_count,b=[D.canvas_height],A=[D.canvas_width];for(var I=0;I<V.length&&V[I].blend!=0;I++);}var Y=V[0],W=k.WebPDecodeRGBA(C,Y.src_off,Y.src_size,A,b);Y.rgba=W,Y.imgwidth=A[0],Y.imgheight=b[0];for(var O=0;O<A[0]*b[0]*4;O++)N[O]=W[O];return this.width=A,this.height=b,this.data=N,this}(function(n){var e,t,s,a,o,u,c,f,d,p=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new f,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new u,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new u,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new y(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,c=this.internal.Rectangle,f=this.internal.Matrix,d=new p}]);var y=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=M;Object.defineProperty(this,"pdf",{get:function(){return G}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(z){J=!!z}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(z){Q=!!z}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(z){isNaN(z)||(oe=z)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(z){isNaN(z)||(fe=z)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(z){var ke;typeof z=="number"?ke=[z,z,z,z]:((ke=new Array(4))[0]=z[0],ke[1]=z.length>=2?z[1]:ke[0],ke[2]=z.length>=3?z[2]:ke[0],ke[3]=z.length>=4?z[3]:ke[1]),d.margin=ke}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(z){de=z}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(z){xe=z}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(z){we=z}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(z){z instanceof p&&(d=z)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(z){d.path=z}});var Ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ve},set:function(z){Ve=z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(z){var ke;ke=_(z),this.ctx.fillStyle=ke.style,this.ctx.isFillTransparent=ke.a===0,this.ctx.fillOpacity=ke.a,this.pdf.setFillColor(ke.r,ke.g,ke.b,{a:ke.a}),this.pdf.setTextColor(ke.r,ke.g,ke.b,{a:ke.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(z){var ke=_(z);this.ctx.strokeStyle=ke.style,this.ctx.isStrokeTransparent=ke.a===0,this.ctx.strokeOpacity=ke.a,ke.a===0?this.pdf.setDrawColor(255,255,255):(ke.a,this.pdf.setDrawColor(ke.r,ke.g,ke.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(z){["butt","round","square"].indexOf(z)!==-1&&(this.ctx.lineCap=z,this.pdf.setLineCap(z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(z){isNaN(z)||(this.ctx.lineWidth=z,this.pdf.setLineWidth(z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(z){["bevel","round","miter"].indexOf(z)!==-1&&(this.ctx.lineJoin=z,this.pdf.setLineJoin(z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(z){isNaN(z)||(this.ctx.miterLimit=z,this.pdf.setMiterLimit(z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(z){this.ctx.textBaseline=z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(z){["right","end","center","left","start"].indexOf(z)!==-1&&(this.ctx.textAlign=z)}});var Xe=null,Je=null,Fe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Fe},set:function(z){Xe=null,Je=null,Fe=z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(z){var ke;if(this.ctx.font=z,(ke=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(z))!==null){var ct=ke[1];ke[2];var Ue=ke[3],Me=ke[4];ke[5];var it=ke[6],Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Me)[2];Me=Math.floor(Ye==="px"?parseFloat(Me)*this.pdf.internal.scaleFactor:Ye==="em"?parseFloat(Me)*this.pdf.getFontSize():parseFloat(Me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Me);var ut=(function(ft){var un,Yt,Nt=[],St=ft.trim();if(St==="")return zm;if(St in nx)return[nx[St]];for(;St!=="";){switch(Yt=null,un=(St=sx(St)).charAt(0)){case'"':case"'":Yt=GM(St.substring(1),un);break;default:Yt=WM(St)}if(Yt===null||(Nt.push(Yt[0]),(St=sx(Yt[1]))!==""&&St.charAt(0)!==","))return zm;St=St.replace(/^,/,"")}return Nt})(it);if(this.fontFaces){var at=(function(ft,un){var Yt=ft.getFontList(),Nt=JSON.stringify(Yt);if(Xe===null||Je!==Nt){var St=(function(Tt){var gt=[];return Object.keys(Tt).forEach(function(Qt){Tt[Qt].forEach(function(Lt){var Rt=null;switch(Lt){case"bold":Rt={family:Qt,weight:"bold"};break;case"italic":Rt={family:Qt,style:"italic"};break;case"bolditalic":Rt={family:Qt,weight:"bold",style:"italic"};break;case"":case"normal":Rt={family:Qt}}Rt!==null&&(Rt.ref={name:Qt,style:Lt},gt.push(Rt))})}),gt})(Yt);Xe=(function(Tt){for(var gt={},Qt=0;Qt<Tt.length;++Qt){var Lt=Pm(Tt[Qt]),Rt=Lt.family,mn=Lt.stretch,vt=Lt.style,_e=Lt.weight;gt[Rt]=gt[Rt]||{},gt[Rt][mn]=gt[Rt][mn]||{},gt[Rt][mn][vt]=gt[Rt][mn][vt]||{},gt[Rt][mn][vt][_e]=Lt}return gt})(St.concat(un)),Je=Nt}return Xe})(this.pdf,this.fontFaces),Pe=ut.map(function(ft){return{family:ft,stretch:"normal",weight:Ue,style:ct}}),nt=(function(ft,un,Yt){for(var Nt=(Yt=Yt||{}).defaultFontFamily||"times",St=Object.assign({},HM,Yt.genericFontFamilies||{}),Tt=null,gt=null,Qt=0;Qt<un.length;++Qt)if(St[(Tt=Pm(un[Qt])).family]&&(Tt.family=St[Tt.family]),ft.hasOwnProperty(Tt.family)){gt=ft[Tt.family];break}if(!(gt=gt||ft[Nt]))throw new Error("Could not find a font-family for the rule '"+rx(Tt)+"' and default family '"+Nt+"'.");if(gt=(function(Lt,Rt){if(Rt[Lt])return Rt[Lt];var mn=Ag[Lt],vt=mn<=Ag.normal?-1:1,_e=tx(Rt,p4,mn,vt);if(!_e)throw new Error("Could not find a matching font-stretch value for "+Lt);return _e})(Tt.stretch,gt),gt=(function(Lt,Rt){if(Rt[Lt])return Rt[Lt];for(var mn=d4[Lt],vt=0;vt<mn.length;++vt)if(Rt[mn[vt]])return Rt[mn[vt]];throw new Error("Could not find a matching font-style for "+Lt)})(Tt.style,gt),!(gt=(function(Lt,Rt){if(Rt[Lt])return Rt[Lt];if(Lt===400&&Rt[500])return Rt[500];if(Lt===500&&Rt[400])return Rt[400];var mn=UM[Lt],vt=tx(Rt,m4,mn,Lt<400?-1:1);if(!vt)throw new Error("Could not find a matching font-weight for value "+Lt);return vt})(Tt.weight,gt)))throw new Error("Failed to resolve a font for the rule '"+rx(Tt)+"'.");return gt})(at,Pe);this.pdf.setFont(nt.ref.name,nt.ref.style)}else{var tt="";(Ue==="bold"||parseInt(Ue,10)>=700||ct==="bold")&&(tt="bold"),ct==="italic"&&(tt+="italic"),tt.length===0&&(tt="normal");for(var ht="",yt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},dt=0;dt<ut.length;dt++){if(this.pdf.internal.getFont(ut[dt],tt,{noFallback:!0,disableWarning:!0})!==void 0){ht=ut[dt];break}if(tt==="bolditalic"&&this.pdf.internal.getFont(ut[dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ht=ut[dt],tt="bold";else if(this.pdf.internal.getFont(ut[dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ht=ut[dt],tt="normal";break}}if(ht===""){for(var xt=0;xt<ut.length;xt++)if(yt[ut[xt]]){ht=yt[ut[xt]];break}}ht=ht===""?"Times":ht,this.pdf.setFont(ht,tt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(z){this.ctx.globalCompositeOperation=z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(z){this.ctx.globalAlpha=z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(z){this.ctx.lineDashOffset=z,P.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(z){this.ctx.lineDash=z,P.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(z){this.ctx.ignoreClearRect=!!z}})};y.prototype.setLineDash=function(M){this.lineDash=M},y.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},y.prototype.fill=function(){V.call(this,"fill",!1)},y.prototype.stroke=function(){V.call(this,"stroke",!1)},y.prototype.beginPath=function(){this.path=[{type:"begin"}]},y.prototype.moveTo=function(M,G){if(isNaN(M)||isNaN(G))throw dr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new u(M,G));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new u(M,G)},y.prototype.closePath=function(){var M=new u(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&er(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){M=new u(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(M.x,M.y)},y.prototype.lineTo=function(M,G){if(isNaN(M)||isNaN(G))throw dr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new u(M,G));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new u(J.x,J.y)},y.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},y.prototype.quadraticCurveTo=function(M,G,J,Q){if(isNaN(J)||isNaN(Q)||isNaN(M)||isNaN(G))throw dr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new u(J,Q)),fe=this.ctx.transform.applyToPoint(new u(M,G));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new u(oe.x,oe.y)},y.prototype.bezierCurveTo=function(M,G,J,Q,oe,fe){if(isNaN(oe)||isNaN(fe)||isNaN(M)||isNaN(G)||isNaN(J)||isNaN(Q))throw dr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new u(oe,fe)),xe=this.ctx.transform.applyToPoint(new u(M,G)),we=this.ctx.transform.applyToPoint(new u(J,Q));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:we.x,y2:we.y,x:de.x,y:de.y}),this.ctx.lastPoint=new u(de.x,de.y)},y.prototype.arc=function(M,G,J,Q,oe,fe){if(isNaN(M)||isNaN(G)||isNaN(J)||isNaN(Q)||isNaN(oe))throw dr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new u(M,G));M=de.x,G=de.y;var xe=this.ctx.transform.applyToPoint(new u(0,J)),we=this.ctx.transform.applyToPoint(new u(0,0));J=Math.sqrt(Math.pow(xe.x-we.x,2)+Math.pow(xe.y-we.y,2))}Math.abs(oe-Q)>=2*Math.PI&&(Q=0,oe=2*Math.PI),this.path.push({type:"arc",x:M,y:G,radius:J,startAngle:Q,endAngle:oe,counterclockwise:fe})},y.prototype.arcTo=function(M,G,J,Q,oe){throw new Error("arcTo not implemented.")},y.prototype.rect=function(M,G,J,Q){if(isNaN(M)||isNaN(G)||isNaN(J)||isNaN(Q))throw dr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,G),this.lineTo(M+J,G),this.lineTo(M+J,G+Q),this.lineTo(M,G+Q),this.lineTo(M,G),this.lineTo(M+J,G),this.lineTo(M,G)},y.prototype.fillRect=function(M,G,J,Q){if(isNaN(M)||isNaN(G)||isNaN(J)||isNaN(Q))throw dr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,G,J,Q),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},y.prototype.strokeRect=function(M,G,J,Q){if(isNaN(M)||isNaN(G)||isNaN(J)||isNaN(Q))throw dr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(M,G,J,Q),this.stroke())},y.prototype.clearRect=function(M,G,J,Q){if(isNaN(M)||isNaN(G)||isNaN(J)||isNaN(Q))throw dr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,G,J,Q))},y.prototype.save=function(M){M=typeof M!="boolean"||M;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},y.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(G),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},y.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(M){var G,J,Q,oe;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))G=0,J=0,Q=0,oe=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(fe!==null)G=parseInt(fe[1]),J=parseInt(fe[2]),Q=parseInt(fe[3]),oe=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)G=parseInt(fe[1]),J=parseInt(fe[2]),Q=parseInt(fe[3]),oe=parseFloat(fe[4]);else{if(oe=1,typeof M=="string"&&M.charAt(0)!=="#"){var de=new a4(M);M=de.ok?de.toHex():"#000000"}M.length===4?(G=M.substring(1,2),G+=G,J=M.substring(2,3),J+=J,Q=M.substring(3,4),Q+=Q):(G=M.substring(1,3),J=M.substring(3,5),Q=M.substring(5,7)),G=parseInt(G,16),J=parseInt(J,16),Q=parseInt(Q,16)}}return{r:G,g:J,b:Q,a:oe,style:M}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};y.prototype.fillText=function(M,G,J,Q){if(isNaN(G)||isNaN(J)||typeof M!="string")throw dr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!b.call(this)){var oe=le(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;F.call(this,{text:M,x:G,y:J,scale:fe,angle:oe,align:this.textAlign,maxWidth:Q})}},y.prototype.strokeText=function(M,G,J,Q){if(isNaN(G)||isNaN(J)||typeof M!="string")throw dr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){Q=isNaN(Q)?void 0:Q;var oe=le(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;F.call(this,{text:M,x:G,y:J,scale:fe,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:Q})}},y.prototype.measureText=function(M){if(typeof M!="string")throw dr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,J=this.pdf.internal.scaleFactor,Q=G.internal.getFontSize(),oe=G.getStringUnitWidth(M)*Q/G.internal.scaleFactor;return new function(fe){var de=(fe=fe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this}({width:oe*=Math.round(96*J/72*1e4)/1e4})},y.prototype.scale=function(M,G){if(isNaN(M)||isNaN(G))throw dr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new f(M,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},y.prototype.rotate=function(M){if(isNaN(M))throw dr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new f(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},y.prototype.translate=function(M,G){if(isNaN(M)||isNaN(G))throw dr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new f(1,0,0,1,M,G);this.ctx.transform=this.ctx.transform.multiply(J)},y.prototype.transform=function(M,G,J,Q,oe,fe){if(isNaN(M)||isNaN(G)||isNaN(J)||isNaN(Q)||isNaN(oe)||isNaN(fe))throw dr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new f(M,G,J,Q,oe,fe);this.ctx.transform=this.ctx.transform.multiply(de)},y.prototype.setTransform=function(M,G,J,Q,oe,fe){M=isNaN(M)?1:M,G=isNaN(G)?0:G,J=isNaN(J)?0:J,Q=isNaN(Q)?1:Q,oe=isNaN(oe)?0:oe,fe=isNaN(fe)?0:fe,this.ctx.transform=new f(M,G,J,Q,oe,fe)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};y.prototype.drawImage=function(M,G,J,Q,oe,fe,de,xe,we){var Ve=this.pdf.getImageProperties(M),Xe=1,Je=1,Fe=1,z=1;Q!==void 0&&xe!==void 0&&(Fe=xe/Q,z=we/oe,Xe=Ve.width/Q*xe/Q,Je=Ve.height/oe*we/oe),fe===void 0&&(fe=G,de=J,G=0,J=0),Q!==void 0&&xe===void 0&&(xe=Q,we=oe),Q===void 0&&xe===void 0&&(xe=Ve.width,we=Ve.height);var ke=this.ctx.transform.decompose(),ct=le(ke.rotate.shx),Ue=new f,Me=(Ue=(Ue=(Ue=Ue.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale)).applyToRectangle(new c(fe-G*Fe,de-J*z,Q*Xe,oe*Je));if(this.autoPaging){for(var it,Ye=k.call(this,Me),ut=[],at=0;at<Ye.length;at+=1)ut.indexOf(Ye[at])===-1&&ut.push(Ye[at]);D(ut);for(var Pe=ut[0],nt=ut[ut.length-1],tt=Pe;tt<nt+1;tt++){this.pdf.setPage(tt);var ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yt=tt===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=tt===1?0:dt+(tt-2)*xt;if(this.ctx.clip_path.length!==0){var un=this.path;it=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(it,this.posX+this.margin[3],-ft+yt+this.ctx.prevPageLastElemOffset),I.call(this,"fill",!0),this.path=un}var Yt=JSON.parse(JSON.stringify(Me));Yt=R([Yt],this.posX+this.margin[3],-ft+yt+this.ctx.prevPageLastElemOffset)[0];var Nt=(tt>Pe||tt<nt)&&N.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,xt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Yt.x,Yt.y,Yt.w,Yt.h,null,null,ct),Nt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,ct)};var k=function(M,G,J){var Q=[];G=G||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":Q.push(Math.floor((M.y+oe)/J)+1);break;case"arc":Q.push(Math.floor((M.y+oe-M.radius)/J)+1),Q.push(Math.floor((M.y+oe+M.radius)/J)+1);break;case"qct":var fe=pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);Q.push(Math.floor((fe.y+oe)/J)+1),Q.push(Math.floor((fe.y+fe.h+oe)/J)+1);break;case"bct":var de=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);Q.push(Math.floor((de.y+oe)/J)+1),Q.push(Math.floor((de.y+de.h+oe)/J)+1);break;case"rect":Q.push(Math.floor((M.y+oe)/J)+1),Q.push(Math.floor((M.y+M.h+oe)/J)+1)}for(var xe=0;xe<Q.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<Q[xe];)C.call(this);return Q},C=function(){var M=this.fillStyle,G=this.strokeStyle,J=this.font,Q=this.lineCap,oe=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=G,this.font=J,this.lineCap=Q,this.lineWidth=oe,this.lineJoin=fe},R=function(M,G,J){for(var Q=0;Q<M.length;Q++)switch(M[Q].type){case"bct":M[Q].x2+=G,M[Q].y2+=J;case"qct":M[Q].x1+=G,M[Q].y1+=J;default:M[Q].x+=G,M[Q].y+=J}return M},D=function(M){return M.sort(function(G,J){return G-J})},V=function(M,G){var J=this.fillStyle,Q=this.strokeStyle,oe=this.lineCap,fe=this.lineWidth,de=Math.abs(fe*this.ctx.transform.scaleX),xe=this.lineJoin;if(this.autoPaging){for(var we,Ve,Xe=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),Fe=[],z=0;z<Je.length;z++)if(Je[z].x!==void 0)for(var ke=k.call(this,Je[z]),ct=0;ct<ke.length;ct+=1)Fe.indexOf(ke[ct])===-1&&Fe.push(ke[ct]);for(var Ue=0;Ue<Fe.length;Ue++)for(;this.pdf.internal.getNumberOfPages()<Fe[Ue];)C.call(this);D(Fe);for(var Me=Fe[0],it=Fe[Fe.length-1],Ye=Me;Ye<it+1;Ye++){this.pdf.setPage(Ye),this.fillStyle=J,this.strokeStyle=Q,this.lineCap=oe,this.lineWidth=de,this.lineJoin=xe;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],at=Ye===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=Ye===1?0:Pe+(Ye-2)*nt;if(this.ctx.clip_path.length!==0){var ht=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(we,this.posX+this.margin[3],-tt+at+this.ctx.prevPageLastElemOffset),I.call(this,M,!0),this.path=ht}if(Ve=JSON.parse(JSON.stringify(Xe)),this.path=R(Ve,this.posX+this.margin[3],-tt+at+this.ctx.prevPageLastElemOffset),G===!1||Ye===0){var yt=(Ye>Me||Ye<it)&&N.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,nt,null).clip().discardPath()),I.call(this,M,G),yt&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}this.path=Xe}else this.lineWidth=de,I.call(this,M,G),this.lineWidth=fe},I=function(M,G){if((M!=="stroke"||G||!A.call(this))&&(M==="stroke"||G||!b.call(this))){for(var J,Q,oe=[],fe=this.path,de=0;de<fe.length;de++){var xe=fe[de];switch(xe.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:xe,deltas:[],abs:[]});break;case"lt":var we=oe.length;if(fe[de-1]&&!isNaN(fe[de-1].x)&&(J=[xe.x-fe[de-1].x,xe.y-fe[de-1].y],we>0)){for(;we>=0;we--)if(oe[we-1].close!==!0&&oe[we-1].begin!==!0){oe[we-1].deltas.push(J),oe[we-1].abs.push(xe);break}}break;case"bct":J=[xe.x1-fe[de-1].x,xe.y1-fe[de-1].y,xe.x2-fe[de-1].x,xe.y2-fe[de-1].y,xe.x-fe[de-1].x,xe.y-fe[de-1].y],oe[oe.length-1].deltas.push(J);break;case"qct":var Ve=fe[de-1].x+2/3*(xe.x1-fe[de-1].x),Xe=fe[de-1].y+2/3*(xe.y1-fe[de-1].y),Je=xe.x+2/3*(xe.x1-xe.x),Fe=xe.y+2/3*(xe.y1-xe.y),z=xe.x,ke=xe.y;J=[Ve-fe[de-1].x,Xe-fe[de-1].y,Je-fe[de-1].x,Fe-fe[de-1].y,z-fe[de-1].x,ke-fe[de-1].y],oe[oe.length-1].deltas.push(J);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(xe)}}Q=G?null:M==="stroke"?"stroke":"fill";for(var ct=!1,Ue=0;Ue<oe.length;Ue++)if(oe[Ue].arc)for(var Me=oe[Ue].abs,it=0;it<Me.length;it++){var Ye=Me[it];Ye.type==="arc"?O.call(this,Ye.x,Ye.y,Ye.radius,Ye.startAngle,Ye.endAngle,Ye.counterclockwise,void 0,G,!ct):te.call(this,Ye.x,Ye.y),ct=!0}else if(oe[Ue].close===!0)this.pdf.internal.out("h"),ct=!1;else if(oe[Ue].begin!==!0){var ut=oe[Ue].start.x,at=oe[Ue].start.y;H.call(this,oe[Ue].deltas,ut,at),ct=!0}Q&&B.call(this,Q),G&&K.call(this)}},Y=function(M){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-J;case"top":return M+G-J;case"hanging":return M+G-2*J;case"middle":return M+G/2-J;default:return M}},W=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};y.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(G,J){this.colorStops.push([G,J])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},y.prototype.createPattern=function(){return this.createLinearGradient()},y.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(M,G,J,Q,oe,fe,de,xe,we){for(var Ve=$.call(this,J,Q,oe,fe),Xe=0;Xe<Ve.length;Xe++){var Je=Ve[Xe];Xe===0&&(we?j.call(this,Je.x1+M,Je.y1+G):te.call(this,Je.x1+M,Je.y1+G)),ae.call(this,M,G,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}xe?K.call(this):B.call(this,de)},B=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(M,G){this.pdf.internal.out(t(M)+" "+s(G)+" m")},F=function(M){var G;switch(M.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var J,Q,oe,fe=this.pdf.getTextDimensions(M.text),de=Y.call(this,M.y),xe=W.call(this,de)-fe.h,we=this.ctx.transform.applyToPoint(new u(M.x,de));if(this.autoPaging){var Ve=this.ctx.transform.decompose(),Xe=new f;Xe=(Xe=(Xe=Xe.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale);for(var Je=this.ctx.transform.applyToRectangle(new c(M.x,de,fe.w,fe.h)),Fe=Xe.applyToRectangle(new c(M.x,xe,fe.w,fe.h)),z=k.call(this,Fe),ke=[],ct=0;ct<z.length;ct+=1)ke.indexOf(z[ct])===-1&&ke.push(z[ct]);D(ke);for(var Ue=ke[0],Me=ke[ke.length-1],it=Ue;it<Me+1;it++){this.pdf.setPage(it);var Ye=it===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[2],Pe=at-this.margin[0],nt=this.pdf.internal.pageSize.width-this.margin[1],tt=nt-this.margin[3],ht=it===1?0:ut+(it-2)*Pe;if(this.ctx.clip_path.length!==0){var yt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(J,this.posX+this.margin[3],-1*ht+Ye),I.call(this,"fill",!0),this.path=yt}var dt=R([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-ht+Ye+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*M.scale),oe=this.lineWidth,this.lineWidth=oe*M.scale);var xt=this.autoPaging!=="text";if(xt||dt.y+dt.h<=at){if(xt||dt.y>=Ye&&dt.x<=nt){var ft=xt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||nt-dt.x)[0],un=R([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-ht+Ye+this.ctx.prevPageLastElemOffset)[0],Yt=xt&&(it>Ue||it<Me)&&N.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,Pe,null).clip().discardPath()),this.pdf.text(ft,un.x,un.y,{angle:M.angle,align:G,renderingMode:M.renderingMode}),Yt&&this.pdf.restoreGraphicsState()}}else dt.y<at&&(this.ctx.prevPageLastElemOffset+=at-dt.y);M.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=oe)}}else M.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*M.scale),oe=this.lineWidth,this.lineWidth=oe*M.scale),this.pdf.text(M.text,we.x+this.posX,we.y+this.posY,{angle:M.angle,align:G,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=oe)},te=function(M,G,J,Q){J=J||0,Q=Q||0,this.pdf.internal.out(t(M+J)+" "+s(G+Q)+" l")},H=function(M,G,J){return this.pdf.lines(M,G,J,null,null)},ae=function(M,G,J,Q,oe,fe,de,xe){this.pdf.internal.out([e(a(J+M)),e(o(Q+G)),e(a(oe+M)),e(o(fe+G)),e(a(de+M)),e(o(xe+G)),"c"].join(" "))},$=function(M,G,J,Q){for(var oe=2*Math.PI,fe=Math.PI/2;G>J;)G-=oe;var de=Math.abs(J-G);de<oe&&Q&&(de=oe-de);for(var xe=[],we=Q?-1:1,Ve=G;de>1e-5;){var Xe=Ve+we*Math.min(de,fe);xe.push(re.call(this,M,Ve,Xe)),de-=Math.abs(Xe-Ve),Ve=Xe}return xe},re=function(M,G,J){var Q=(J-G)/2,oe=M*Math.cos(Q),fe=M*Math.sin(Q),de=oe,xe=-fe,we=de*de+xe*xe,Ve=we+de*oe+xe*fe,Xe=4/3*(Math.sqrt(2*we*Ve)-Ve)/(de*fe-xe*oe),Je=de-Xe*xe,Fe=xe+Xe*de,z=Je,ke=-Fe,ct=Q+G,Ue=Math.cos(ct),Me=Math.sin(ct);return{x1:M*Math.cos(G),y1:M*Math.sin(G),x2:Je*Ue-Fe*Me,y2:Je*Me+Fe*Ue,x3:z*Ue-ke*Me,y3:z*Me+ke*Ue,x4:M*Math.cos(J),y4:M*Math.sin(J)}},le=function(M){return 180*M/Math.PI},pe=function(M,G,J,Q,oe,fe){var de=M+.5*(J-M),xe=G+.5*(Q-G),we=oe+.5*(J-oe),Ve=fe+.5*(Q-fe),Xe=Math.min(M,oe,de,we),Je=Math.max(M,oe,de,we),Fe=Math.min(G,fe,xe,Ve),z=Math.max(G,fe,xe,Ve);return new c(Xe,Fe,Je-Xe,z-Fe)},be=function(M,G,J,Q,oe,fe,de,xe){var we,Ve,Xe,Je,Fe,z,ke,ct,Ue,Me,it,Ye,ut,at,Pe=J-M,nt=Q-G,tt=oe-J,ht=fe-Q,yt=de-oe,dt=xe-fe;for(Ve=0;Ve<41;Ve++)Ue=(ke=(Xe=M+(we=Ve/40)*Pe)+we*((Fe=J+we*tt)-Xe))+we*(Fe+we*(oe+we*yt-Fe)-ke),Me=(ct=(Je=G+we*nt)+we*((z=Q+we*ht)-Je))+we*(z+we*(fe+we*dt-z)-ct),Ve==0?(it=Ue,Ye=Me,ut=Ue,at=Me):(it=Math.min(it,Ue),Ye=Math.min(Ye,Me),ut=Math.max(ut,Ue),at=Math.max(at,Me));return new c(Math.round(it),Math.round(Ye),Math.round(ut-it),Math.round(at-Ye))},P=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,G,J=(M=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:G}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(It.API),(function(n){var e=function(u){var c,f,d,p,y,_,b,A,N,k;for(f=[],d=0,p=(u+=c="\0\0\0\0".slice(u.length%4||4)).length;p>d;d+=4)(y=(u.charCodeAt(d)<<24)+(u.charCodeAt(d+1)<<16)+(u.charCodeAt(d+2)<<8)+u.charCodeAt(d+3))!==0?(_=(y=((y=((y=((y=(y-(k=y%85))/85)-(N=y%85))/85)-(A=y%85))/85)-(b=y%85))/85)%85,f.push(_+33,b+33,A+33,N+33,k+33)):f.push(122);return(function(C,R){for(var D=R;D>0;D--)C.pop()})(f,c.length),String.fromCharCode.apply(String,f)+"~>"},t=function(u){var c,f,d,p,y,_=String,b="length",A=255,N="charCodeAt",k="slice",C="replace";for(u[k](-2),u=u[k](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),d=[],p=0,y=(u+=c="uuuuu"[k](u[b]%5||5))[b];y>p;p+=5)f=52200625*(u[N](p)-33)+614125*(u[N](p+1)-33)+7225*(u[N](p+2)-33)+85*(u[N](p+3)-33)+(u[N](p+4)-33),d.push(A&f>>24,A&f>>16,A&f>>8,A&f);return(function(R,D){for(var V=D;V>0;V--)R.pop()})(d,c[b]),_.fromCharCode.apply(_,d)},s=function(u){return u.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),c.test(u)===!1)return"";for(var f="",d=0;d<u.length;d+=2)f+=String.fromCharCode("0x"+(u[d]+u[d+1]));return f},o=function(u){for(var c=new Uint8Array(u.length),f=u.length;f--;)c[f]=u.charCodeAt(f);return(c=vg(c)).reduce(function(d,p){return d+String.fromCharCode(p)},"")};n.processDataByFilters=function(u,c){var f=0,d=u||"",p=[];for(typeof(c=c||[])=="string"&&(c=[c]),f=0;f<c.length;f+=1)switch(c[f]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=s(d),p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=o(d),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[f]+'" is not implemented')}return{data:d,reverseChain:p.reverse().join(" ")}}})(It.API),(function(n){n.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var c=void 0;try{c=(function(f,d,p){var y=new XMLHttpRequest,_=0,b=function(A){var N=A.length,k=[],C=String.fromCharCode;for(_=0;_<N;_+=1)k.push(C(255&A.charCodeAt(_)));return k.join("")};if(y.open("GET",f,!d),y.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(y.onload=function(){y.status===200?p(b(this.responseText)):p(void 0)}),y.send(null),d&&y.status===200)return b(y.responseText)})(a,o,u)}catch{}return c})(e,t,s)},n.loadImageFile=n.loadFile})(It.API),(function(n){function e(){return(en.html2canvas?Promise.resolve(en.html2canvas):Ah(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(en.DOMPurify?Promise.resolve(en.DOMPurify):Ah(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var s=function(c){var f=er(c);return f==="undefined"?"undefined":f==="string"||c instanceof String?"string":f==="number"||c instanceof Number?"number":f==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":f==="object"?"object":"unknown"},a=function(c,f){var d=document.createElement(c);for(var p in f.className&&(d.className=f.className),f.innerHTML&&f.dompurify&&(d.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)d.style[p]=f.style[p];return d},o=function c(f,d){for(var p=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),y=f.firstChild;y;y=y.nextSibling)d!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(c(y,d));return f.nodeType===1&&(f.nodeName==="CANVAS"?(p.width=f.width,p.height=f.height,p.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(p.value=f.value),p.addEventListener("load",function(){p.scrollTop=f.scrollTop,p.scrollLeft=f.scrollLeft},!0)),p},u=function c(f){var d=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),p=c.convert(Promise.resolve(),d);return(p=p.setProgress(1,c,1,[c])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(c,f){return c.__proto__=f||u.prototype,c},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(c,f){return this.then(function(){switch(f=f||(function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),f){case"string":return this.then(t).then(function(d){return this.set({src:a("div",{innerHTML:c,dompurify:d})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},u.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,f(this.prop.container,d)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(f){var d=this.opt.jsPDF,p=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=p,p)for(var b=0;b<p.length;++b){var A=p[b],N=A.src.find(function(k){return k.format==="truetype"});N&&d.addFont(N.url,A.ref.name,A.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,d.context2d.save(!0),f(this.prop.container,_)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(c,f,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(c,f):this.outputPdf(c,f)},u.prototype.outputPdf=function(c,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,f)})},u.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},u.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(c){if(s(c)!=="object")return this;var f=Object.keys(c||{}).map(function(d){if(d in u.template.prop)return function(){this.prop[d]=c[d]};switch(d){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[d]=c[d]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(c,f){return this.then(function(){var d=c in u.template.prop?this.prop[c]:this.opt[c];return f?f(d):d})},u.prototype.setMargin=function(c){return this.then(function(){switch(s(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},u.prototype.setPageSize=function(c){function f(d,p){return Math.floor(d*p/72*96)}return this.then(function(){(c=c||It.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:f(c.inner.width,c.k),height:f(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},u.prototype.setProgress=function(c,f,d,p){return c!=null&&(this.progress.val=c),f!=null&&(this.progress.state=f),d!=null&&(this.progress.n=d),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(c,f,d,p){return this.setProgress(c?this.progress.val+c:null,f||null,d?this.progress.n+d:null,p?this.progress.stack.concat(p):null)},u.prototype.then=function(c,f){var d=this;return this.thenCore(c,f,function(p,y){return d.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,function(_){return d.updateProgress(null,p),_}).then(p,y).then(function(_){return d.updateProgress(1),_})})},u.prototype.thenCore=function(c,f,d){d=d||Promise.prototype.then;var p=this;c&&(c=c.bind(p)),f&&(f=f.bind(p));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?p:u.convert(Object.assign({},p),Promise.prototype),_=d.call(y,c,f);return u.convert(_,p.__proto__)},u.prototype.thenExternal=function(c,f){return Promise.prototype.then.call(this,c,f)},u.prototype.thenList=function(c){var f=this;return c.forEach(function(d){f=f.thenCore(d)}),f},u.prototype.catch=function(c){c&&(c=c.bind(this));var f=Promise.prototype.catch.call(this,c);return u.convert(f,this)},u.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},u.prototype.error=function(c){return this.then(function(){throw new Error(c)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,It.getPageSize=function(c,f,d){if(er(c)==="object"){var p=c;c=p.orientation,f=p.unit||f,d=p.format||d}f=f||"mm",d=d||"a4",c=(""+(c||"P")).toLowerCase();var y,_=(""+d).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+f}var A,N=0,k=0;if(b.hasOwnProperty(_))N=b[_][1]/y,k=b[_][0]/y;else try{N=d[1],k=d[0]}catch{throw new Error("Invalid format: "+d)}if(c==="p"||c==="portrait")c="p",k>N&&(A=k,k=N,N=A);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",N>k&&(A=k,k=N,N=A)}return{width:k,height:N,unit:f,k:y,orientation:c}},n.html=function(c,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Pm):null;var d=new u(f);return f.worker?d:d.from(c).doCallback()}})(It.API),It.API.addJS=function(n){return ax=n,this.internal.events.subscribe("postPutResources",function(){V1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(V1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ix=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ax+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){V1!==void 0&&ix!==void 0&&this.internal.out("/Names <</JavaScript "+V1+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],c=s.exec(u);if(c!=null){var f=c[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,p=[];for(o=0;o<d;o++){var y=t.internal.newObject();p.push(y);var _=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<p.length;o++)t.internal.write("(page_"+(o+1)+")"+p[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var c=this.count=this.count_r({count:0},u);if(c>0&&this.line("/Count "+c),u.options&&u.options.pageNumber){var f=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(It.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,s,a,o,u,c){var f,d=this.decode.DCT_DECODE,p=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,f=(function(y){for(var _,b=256*y.charCodeAt(4)+y.charCodeAt(5),A=y.length,N={width:0,height:0,numcomponents:1},k=4;k<A;k+=2){if(k+=b,e.indexOf(y.charCodeAt(k+1))!==-1){_=256*y.charCodeAt(k+5)+y.charCodeAt(k+6),N={width:256*y.charCodeAt(k+7)+y.charCodeAt(k+8),height:_,numcomponents:y.charCodeAt(k+9)};break}b=256*y.charCodeAt(k+2)+y.charCodeAt(k+3)}return N})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),f.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}p={data:t,width:f.width,height:f.height,colorSpace:c,bitsPerComponent:8,filter:d,index:s,alias:a}}return p}})(It.API),It.API.processPNG=function(n,e,t,s){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var a,o=jM(n,{checkCrc:!0}),u=o.width,c=o.height,f=o.channels,d=o.palette,p=o.depth;a=d&&f===1?(function(O){for(var B=O.width,K=O.height,j=O.data,F=O.palette,te=O.depth,H=!1,ae=[],$=[],re=void 0,le=!1,pe=0,be=0;be<F.length;be++){var P=uy(F[be],4),M=P[0],G=P[1],J=P[2],Q=P[3];ae.push(M,G,J),Q!=null&&(Q===0?(pe++,$.length<1&&$.push(be)):Q<255&&(le=!0))}if(le||pe>1){H=!0,$=void 0;var oe=B*K;re=new Uint8Array(oe);for(var fe=new DataView(j.buffer),de=0;de<oe;de++){var xe=qm(fe,de,te),we=uy(F[xe],4)[3];re[de]=we}}else pe===0&&($=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:H?8:void 0,colorBytes:j,alphaBytes:re,needSMask:H,palette:ae,mask:$}})(o):f===2||f===4?(function(O){for(var B=O.data,K=O.width,j=O.height,F=O.channels,te=O.depth,H=F===2?"DeviceGray":"DeviceRGB",ae=F-1,$=K*j,re=ae,le=$*re,pe=1*$,be=Math.ceil(le*te/8),P=Math.ceil(pe*te/8),M=new Uint8Array(be),G=new Uint8Array(P),J=new DataView(B.buffer),Q=new DataView(M.buffer),oe=new DataView(G.buffer),fe=!1,de=0;de<$;de++){for(var xe=de*F,we=0;we<re;we++)mx(Q,qm(J,xe+we,te),de*re+we,te);var Ve=qm(J,xe+re,te);Ve<(1<<te)-1&&(fe=!0),mx(oe,Ve,1*de,te)}return{colorSpace:H,colorsPerPixel:ae,sMaskBitsPerComponent:fe?te:void 0,colorBytes:M,alphaBytes:G,needSMask:fe}})(o):(function(O){var B=O.data,K=O.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:K,colorsPerPixel:K==="DeviceGray"?1:3,colorBytes:B instanceof Uint16Array?(function(j){for(var F=j.length,te=new Uint8Array(2*F),H=new DataView(te.buffer,te.byteOffset,te.byteLength),ae=0;ae<F;ae++)H.setUint16(2*ae,j[ae],!1);return te})(B):B,needSMask:!1}})(o);var y,_,b,A=a,N=A.colorSpace,k=A.colorsPerPixel,C=A.sMaskBitsPerComponent,R=A.colorBytes,D=A.alphaBytes,V=A.needSMask,I=A.palette,Y=A.mask,W=null;return s!==It.API.image_compression.NONE&&typeof vg=="function"?(W=(function(O){var B;switch(O){case It.API.image_compression.FAST:B=11;break;case It.API.image_compression.MEDIUM:B=13;break;case It.API.image_compression.SLOW:B=14;break;default:B=12}return B})(s),y=this.decode.FLATE_DECODE,_="/Predictor ".concat(W," /Colors ").concat(k," /BitsPerComponent ").concat(p," /Columns ").concat(u),n=ux(R,Math.ceil(u*k*p/8),k,p,s),V&&(b=ux(D,Math.ceil(u*C/8),1,C,s))):(y=void 0,_=void 0,n=R,V&&(b=D)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(b&&this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),{alias:t,data:n,index:e,filter:y,decodeParameters:_,transparency:Y,palette:I,sMask:b,predictor:W,width:u,height:c,bitsPerComponent:p,sMaskBitsPerComponent:C,colorSpace:N}}},(function(n){n.processGIF89A=function(e,t,s,a){var o=new ZM(e),u=o.width,c=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:u,height:c},p=new Um(100).encode(d,100);return n.processJPEG.call(this,p,t,s,a)},n.processGIF87A=n.processGIF89A})(It.API),so.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},so.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){dr.log("bit decode error:"+t)}},so.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var f=this.palette[o>>7-c&1];this.data[u+4*c]=f.blue,this.data[u+4*c+1]=f.green,this.data[u+4*c+2]=f.red,this.data[u+4*c+3]=255}t!==0&&(this.pos+=4-t)}},so.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,c=o>>4,f=15&o,d=this.palette[c];if(this.data[u]=d.blue,this.data[u+1]=d.green,this.data[u+2]=d.red,this.data[u+3]=255,2*a+1>=this.width)break;d=this.palette[f],this.data[u+4]=d.blue,this.data[u+4+1]=d.green,this.data[u+4+2]=d.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},so.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},so.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,d=o>>15?255:0,p=s*this.width*4+4*a;this.data[p]=f,this.data[p+1]=c,this.data[p+2]=u,this.data[p+3]=d}this.pos+=n}},so.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(u&e)/e*255|0,f=(u>>5&t)/t*255|0,d=(u>>11)/e*255|0,p=a*this.width*4+4*o;this.data[p]=d,this.data[p+1]=f,this.data[p+2]=c,this.data[p+3]=255}this.pos+=n}},so.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},so.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=u}},so.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,s,a){var o=new so(e,!1),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},d=new Um(100).encode(f,100);return n.processJPEG.call(this,d,t,s,a)}})(It.API),bx.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,s,a){var o=new bx(e),u=o.width,c=o.height,f={data:o.getData(),width:u,height:c},d=new Um(100).encode(f,100);return n.processJPEG.call(this,d,t,s,a)}})(It.API),It.API.processRGBA=function(n,e,t){for(var s=n.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),c=0,f=0,d=0;d<a;d+=4){var p=s[d],y=s[d+1],_=s[d+2],b=s[d+3];o[c++]=p,o[c++]=y,o[c++]=_,u[f++]=b}var A=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:A,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},It.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},gh=It.API,F1=gh.getCharWidthsArray=function(n,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,f=c.fof?c.fof:1,d=e.kerning?e.kerning:a.metadata.Unicode.kerning,p=d.fof?d.fof:1,y=e.doKerning!==!1,_=0,b=n.length,A=0,N=c[0]||f,k=[];for(t=0;t<b;t++)s=n.charCodeAt(t),typeof a.metadata.widthOfString=="function"?k.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(_=y&&er(d[s])==="object"&&!isNaN(parseInt(d[s][A],10))?d[s][A]/p:0,k.push((c[s]||N)/f+_)),A=s;return k},ox=gh.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return gh.processArabic&&(n=gh.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,t,a)/t:F1.apply(this,arguments).reduce(function(o,u){return o+u},0)},lx=function(n,e,t,s){for(var a=[],o=0,u=n.length,c=0;o!==u&&c+e[o]<t;)c+=e[o],o++;a.push(n.slice(0,o));var f=o;for(c=0;o!==u;)c+e[o]>s&&(a.push(n.slice(f,o)),c=0,f=o),c+=e[o],o++;return f!==o&&a.push(n.slice(f,o)),a},cx=function(n,e,t){t||(t={});var s,a,o,u,c,f,d,p=[],y=[p],_=t.textIndent||0,b=0,A=0,N=n.split(" "),k=F1.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?N[0].length+2:t.lineIndent||0){var C=Array(f).join(" "),R=[];N.map(function(V){(V=V.split(/\s*\n/)).length>1?R=R.concat(V.map(function(I,Y){return(Y&&I.length?`
`:"")+I})):R.push(V[0])}),N=R,f=ox.apply(this,[C,t])}for(o=0,u=N.length;o<u;o++){var D=0;if(s=N[o],f&&s[0]==`
`&&(s=s.substr(1),D=1),_+b+(A=(a=F1.apply(this,[s,t])).reduce(function(V,I){return V+I},0))>e||D){if(A>e){for(c=lx.apply(this,[s,a,e-(_+b),e]),p.push(c.shift()),p=[c.pop()];c.length;)y.push([c.shift()]);A=a.slice(s.length-(p[0]?p[0].length:0)).reduce(function(V,I){return V+I},0)}else p=[s];y.push(p),_=A+f,b=k}else p.push(s),_+=b+A,b=k}return d=f?function(V,I){return(I?C:"")+V.join(" ")}:function(V){return V.join(" ")},y.map(d)},gh.splitTextToSize=function(n,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var y=this.internal.getFont(p.fontName,p.fontStyle),_="Unicode";return y.metadata[_]?{widths:y.metadata[_].widths||{0:1},kerning:y.metadata[_].kerning||{}}:{font:y.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var c,f,d=[];for(c=0,f=s.length;c<f;c++)d=d.concat(cx.apply(this,[s[c],u,o]));return d},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(_){return"0x"+parseInt(_,10).toString(16)},c=n.__fontmetrics__.compress=function(_){var b,A,N,k,C=["{"];for(var R in _){if(b=_[R],isNaN(parseInt(R,10))?A="'"+R+"'":(R=parseInt(R,10),A=(A=u(R).slice(2)).slice(0,-1)+a[A.slice(-1)]),typeof b=="number")b<0?(N=u(b).slice(3),k="-"):(N=u(b).slice(2),k=""),N=k+N.slice(0,-1)+a[N.slice(-1)];else{if(er(b)!=="object")throw new Error("Don't know what to do with value type "+er(b)+".");N=c(b)}C.push(A+N)}return C.push("}"),C.join("")},f=n.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,A,N,k,C={},R=1,D=C,V=[],I="",Y="",W=_.length-1,O=1;O<W;O+=1)(k=_[O])=="'"?b?(N=b.join(""),b=void 0):b=[]:b?b.push(k):k=="{"?(V.push([D,N]),D={},N=void 0):k=="}"?((A=V.pop())[0][A[1]]=D,N=void 0,D=A[0]):k=="-"?R=-1:N===void 0?s.hasOwnProperty(k)?(I+=s[k],N=parseInt(I,16)*R,R=1,I=""):I+=k:s.hasOwnProperty(k)?(Y+=s[k],D[N]=parseInt(Y,16)*R,R=1,N=void 0,Y=""):Y+=k;return C},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},y={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(_){var b=_.font,A=y.Unicode[b.postScriptName];A&&(b.metadata.Unicode={},b.metadata.Unicode.widths=A.widths,b.metadata.Unicode.kerning=A.kerning);var N=p.Unicode[b.postScriptName];N&&(b.metadata.Unicode.encoding=N,b.encoding=N.codePages[0])}])})(It.API),(function(n){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};n.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(G1(c)),u.metadata=n.API.TTFFont.open(c),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})(It),It.API.addSvgAsImage=function(n,e,t,s,a,o,u,c){if(isNaN(e)||isNaN(t))throw dr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw dr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=a;var d=f.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,f.width,f.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return(en.canvg?Promise.resolve(en.canvg):Ah(()=>import("./index.es-AvJWOWrr.js"),[])).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(d,n,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(p)}).then(function(){y.addImage(f.toDataURL("image/jpeg",1),e,t,s,a,u,c)})},It.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},It.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(u),f=[],d=0,p=0,y=0;function _(A,N){var k,C=!1;for(k=0;k<A.length;k+=1)A[k]===N&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var b=c.length;for(y=0;y<b;y+=1)t[c[y]].value=t[c[y]].defaultValue,t[c[y]].explicitSet=!1}if(er(n)==="object"){for(a in n)if(o=n[a],_(c,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&_(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(d=0;d<o.length;d+=1)if(s=!0,o[d].length===1&&typeof o[d][0]=="number")f.push(String(o[d]-1));else if(o[d].length>1){for(p=0;p<o[d].length;p+=1)typeof o[d][p]!="number"&&(s=!1);s===!0&&f.push([o[d][0]-1,o[d][1]-1].join(" "))}t[a].value="["+f.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,N=[];for(A in t)t[A].explicitSet===!0&&(t[A].type==="name"?N.push("/"+A+" /"+t[A].value):N.push("/"+A+" "+t[A].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+u.length+c.length+a.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+c+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(It.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,u){for(var c,f=u.metadata.Unicode.widths,d=["","0","00","000","0000"],p=[""],y=0,_=o.length;y<_;++y){if(c=u.metadata.characterToGlyph(o.charCodeAt(y)),u.metadata.glyIdsUsed.push(c),u.metadata.toUnicode[c]=o.charCodeAt(y),f.indexOf(c)==-1&&(f.push(c),f.push([parseInt(u.metadata.widthOfGlyph(c),10)])),c=="0")return p.join("");c=c.toString(16),p.push(d[4-c.length],c)}return p.join("")},s=function(o){var u,c,f,d,p,y,_;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],y=0,_=(c=Object.keys(o).sort(function(b,A){return b-A})).length;y<_;y++)u=c[y],f.length>=100&&(p+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(d=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+d+">"));return f.length&&(p+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),p+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,d=u.newObject,p=u.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="Identity-H"){for(var y=c.metadata.Unicode.widths,_=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),b="",A=0;A<_.length;A++)b+=String.fromCharCode(_[A]);var N=d();p({data:b,addLength1:!0,objectId:N}),f("endobj");var k=d();p({data:s(c.metadata.toUnicode),addLength1:!0,objectId:k}),f("endobj");var C=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+yh(c.fontName)),f("/FontFile2 "+N+" 0 R"),f("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),f("/Flags "+c.metadata.flags),f("/StemV "+c.metadata.stemV),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f(">>"),f("endobj");var R=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+yh(c.fontName)),f("/FontDescriptor "+C+" 0 R"),f("/W "+n.API.PDFObject.convert(y)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+c.encoding+")"),f(">>"),f(">>"),f("endobj"),c.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+k+" 0 R"),f("/BaseFont /"+yh(c.fontName)),f("/Encoding /"+c.encoding),f("/DescendantFonts ["+R+" 0 R]"),f(">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var c=u.font,f=u.out,d=u.newObject,p=u.putStream;if(c.metadata instanceof n.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var y=c.metadata.rawData,_="",b=0;b<y.length;b++)_+=String.fromCharCode(y[b]);var A=d();p({data:_,addLength1:!0,objectId:A}),f("endobj");var N=d();p({data:s(c.metadata.toUnicode),addLength1:!0,objectId:N}),f("endobj");var k=d();f("<<"),f("/Descent "+c.metadata.decender),f("/CapHeight "+c.metadata.capHeight),f("/StemV "+c.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+A+" 0 R"),f("/Flags 96"),f("/FontBBox "+n.API.PDFObject.convert(c.metadata.bbox)),f("/FontName /"+yh(c.fontName)),f("/ItalicAngle "+c.metadata.italicAngle),f("/Ascent "+c.metadata.ascender),f(">>"),f("endobj"),c.objectNumber=d();for(var C=0;C<c.metadata.hmtx.widths.length;C++)c.metadata.hmtx.widths[C]=parseInt(c.metadata.hmtx.widths[C]*(1e3/c.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+yh(c.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),f("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,c=o.text||"",f=o.x,d=o.y,p=o.options||{},y=o.mutex||{},_=y.pdfEscape,b=y.activeFontKey,A=y.fonts,N=b,k="",C=0,R="",D=A[N].encoding;if(A[N].encoding!=="Identity-H")return{text:c,x:f,y:d,options:p,mutex:y};for(R=c,N=b,Array.isArray(c)&&(R=c[0]),C=0;C<R.length;C+=1)A[N].metadata.hasOwnProperty("cmap")&&(u=A[N].metadata.cmap.unicode.codeMap[R[C].charCodeAt(0)]),u||R[C].charCodeAt(0)<256&&A[N].metadata.hasOwnProperty("Unicode")?k+=R[C]:k+="";var V="";return parseInt(N.slice(1))<14||D==="WinAnsiEncoding"?V=_(k,N).split("").map(function(I){return I.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(V=t(k,A[N])),y.isHex=!0,{text:V,x:f,y:d,options:p,mutex:y}};e.events.push(["postProcessText",function(o){var u=o.text||"",c=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var d=0;for(d=0;d<u.length;d+=1)Array.isArray(u[d])&&u[d].length===3?c.push([a(Object.assign({},f,{text:u[d][0]})).text,u[d][1],u[d][2]]):c.push(a(Object.assign({},f,{text:u[d]})).text);o.text=c}else o.text=a(Object.assign({},f,{text:u})).text}])})(It),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(It.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var a,o,u,c,f,d,p,y=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,D=0;this.__bidiEngine__={};var V=function(j){var F=j.charCodeAt(),te=F>>8,H=N[te];return H!==void 0?y[256*H+(255&F)]:te===252||te===253?"AL":C.test(te)?"L":te===8?"R":"N"},I=function(j){for(var F,te=0;te<j.length;te++){if((F=V(j.charAt(te)))==="L")return!1;if(F==="R")return!0}return!1},Y=function(j,F,te,H){var ae,$,re,le,pe=F[H];switch(pe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"N":case"AN":break;case"EN":R&&(pe="AN");break;case"AL":R=!0,pe="R";break;case"WS":case"BN":pe="N";break;case"CS":H<1||H+1>=F.length||(ae=te[H-1])!=="EN"&&ae!=="AN"||($=F[H+1])!=="EN"&&$!=="AN"?pe="N":R&&($="AN"),pe=$===ae?$:"N";break;case"ES":pe=(ae=H>0?te[H-1]:"B")==="EN"&&H+1<F.length&&F[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&te[H-1]==="EN"){pe="EN";break}if(R){pe="N";break}for(re=H+1,le=F.length;re<le&&F[re]==="ET";)re++;pe=re<le&&F[re]==="EN"?"EN":"N";break;case"NSM":if(u&&!c){for(le=F.length,re=H+1;re<le&&F[re]==="NSM";)re++;if(re<le){var be=j[H],P=be>=1425&&be<=2303||be===64286;if(ae=F[re],P&&(ae==="R"||ae==="AL")){pe="R";break}}}pe=H<1||(ae=F[H-1])==="B"?"N":te[H-1];break;case"B":R=!1,a=!0,pe=D;break;case"S":o=!0,pe="N"}return pe},W=function(j,F,te){var H=j.split("");return te&&O(H,te,{hiLevel:D}),H.reverse(),F&&F.reverse(),H.join("")},O=function(j,F,te){var H,ae,$,re,le,pe=-1,be=j.length,P=0,M=[],G=D?b:_,J=[];for(R=!1,a=!1,o=!1,ae=0;ae<be;ae++)J[ae]=V(j[ae]);for($=0;$<be;$++){if(le=P,M[$]=Y(j,J,M,$),H=240&(P=G[le][A[M[$]]]),P&=15,F[$]=re=G[P][5],H>0)if(H===16){for(ae=pe;ae<$;ae++)F[ae]=1;pe=-1}else pe=-1;if(G[P][6])pe===-1&&(pe=$);else if(pe>-1){for(ae=pe;ae<$;ae++)F[ae]=re;pe=-1}J[$]==="B"&&(F[$]=0),te.hiLevel|=re}o&&(function(Q,oe,fe){for(var de=0;de<fe;de++)if(Q[de]==="S"){oe[de]=D;for(var xe=de-1;xe>=0&&Q[xe]==="WS";xe--)oe[xe]=D}})(J,F,be)},B=function(j,F,te,H,ae){if(!(ae.hiLevel<j)){if(j===1&&D===1&&!a)return F.reverse(),void(te&&te.reverse());for(var $,re,le,pe,be=F.length,P=0;P<be;){if(H[P]>=j){for(le=P+1;le<be&&H[le]>=j;)le++;for(pe=P,re=le-1;pe<re;pe++,re--)$=F[pe],F[pe]=F[re],F[re]=$,te&&($=te[pe],te[pe]=te[re],te[re]=$);P=le}P++}}},K=function(j,F,te){var H=j.split(""),ae={hiLevel:D};return te||(te=[]),O(H,te,ae),(function($,re,le){if(le.hiLevel!==0&&p)for(var pe,be=0;be<$.length;be++)re[be]===1&&(pe=k.indexOf($[be]))>=0&&($[be]=k[pe+1])})(H,te,ae),B(2,H,F,te,ae),B(1,H,F,te,ae),H.join("")};return this.__bidiEngine__.doBidiReorder=function(j,F,te){if((function(ae,$){if($)for(var re=0;re<ae.length;re++)$[re]=re;c===void 0&&(c=I(ae)),d===void 0&&(d=I(ae))})(j,F),u||!f||d)if(u&&f&&c^d)D=c?1:0,j=W(j,F,te);else if(!u&&f&&d)D=c?1:0,j=K(j,F,te),j=W(j,F);else if(!u||c||f||d){if(u&&!f&&c^d)j=W(j,F),c?(D=0,j=K(j,F,te)):(D=1,j=K(j,F,te),j=W(j,F));else if(u&&c&&!f&&d)D=1,j=K(j,F,te),j=W(j,F);else if(!u&&!f&&c^d){var H=p;c?(D=1,j=K(j,F,te),D=0,p=!1,j=K(j,F,te),p=H):(D=0,j=K(j,F,te),j=W(j,F),D=1,p=!1,j=K(j,F,te),p=H,j=W(j,F))}}else D=0,j=K(j,F,te);else D=c?1:0,j=K(j,F,te);return j},this.__bidiEngine__.setOptions=function(j){j&&(u=j.isInputVisual,f=j.isOutputVisual,c=j.isInputRtl,d=j.isOutputRtl,p=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(u=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?u.push([t.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):u.push([t.doBidiReorder(a[c])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(It),It.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new jc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new hL(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new QM(this.contents),this.head=new JM(this),this.name=new sL(this),this.cmap=new b4(this),this.toUnicode={},this.hhea=new eL(this),this.maxp=new iL(this),this.hmtx=new aL(this),this.post=new nL(this),this.os2=new tL(this),this.loca=new uL(this),this.glyf=new oL(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,c,f,d;for(d=[],u=0,c=(f=this.bbox).length;u<c;u++)e=f[u],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,s){var a,o,u,c;for(u=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n})();var vo,jc=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,s,a,o,u,c,f;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),c=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^c)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*c+f},n.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},n.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},n})(),QM=(function(){var n;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,c,f,d,p,y,_,b,A,N;for(N in b=Object.keys(t).length,f=Math.log(2),y=16*Math.floor(Math.log(b)/f),u=Math.floor(y/f),p=16*b-y,(a=new jc).writeInt(this.scalarType),a.writeShort(b),a.writeShort(y),a.writeShort(u),a.writeShort(p),o=16*b,d=a.pos+o,c=null,A=[],t)for(_=t[N],a.writeString(N),a.writeInt(n(_)),a.writeInt(d),a.writeInt(_.length),A=A.concat(_),N==="head"&&(c=d),d+=_.length;d%4;)A.push(0),d++;return a.write(A),s=2981146554-n(a.data),a.pos=c+8,a.writeUInt32(s),a.data},n=function(t){var s,a,o,u;for(t=v4.call(t);t.length%4;)t.push(0);for(o=new jc(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),KM={}.hasOwnProperty,$o=function(n,e){for(var t in e)KM.call(e,t)&&(n[t]=e[t]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};vo=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var JM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return $o(n,vo),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new jc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),vx=(function(){function n(e,t){var s,a,o,u,c,f,d,p,y,_,b,A,N,k,C,R,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),y=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(b=e.readUInt16(),_=b/2,e.pos+=6,o=(function(){var V,I;for(I=[],f=V=0;0<=_?V<_:V>_;f=0<=_?++V:--V)I.push(e.readUInt16());return I})(),e.pos+=2,N=(function(){var V,I;for(I=[],f=V=0;0<=_?V<_:V>_;f=0<=_?++V:--V)I.push(e.readUInt16());return I})(),d=(function(){var V,I;for(I=[],f=V=0;0<=_?V<_:V>_;f=0<=_?++V:--V)I.push(e.readUInt16());return I})(),p=(function(){var V,I;for(I=[],f=V=0;0<=_?V<_:V>_;f=0<=_?++V:--V)I.push(e.readUInt16());return I})(),a=(this.length-e.pos+this.offset)/2,c=(function(){var V,I;for(I=[],f=V=0;0<=a?V<a:V>a;f=0<=a?++V:--V)I.push(e.readUInt16());return I})(),f=C=0,D=o.length;C<D;f=++C)for(k=o[f],s=R=A=N[f];A<=k?R<=k:R>=k;s=A<=k?++R:--R)p[f]===0?u=s+d[f]:(u=c[p[f]/2+(s-A)-(_-f)]||0)!==0&&(u+=d[f]),this.codeMap[s]=65535&u}e.pos=y}return n.encode=function(e,t){var s,a,o,u,c,f,d,p,y,_,b,A,N,k,C,R,D,V,I,Y,W,O,B,K,j,F,te,H,ae,$,re,le,pe,be,P,M,G,J,Q,oe,fe,de,xe,we,Ve,Xe;switch(H=new jc,u=Object.keys(e).sort(function(Je,Fe){return Je-Fe}),t){case"macroman":for(N=0,k=(function(){var Je=[];for(A=0;A<256;++A)Je.push(0);return Je})(),R={0:0},o={},ae=0,pe=u.length;ae<pe;ae++)R[xe=e[a=u[ae]]]==null&&(R[xe]=++N),o[a]={old:e[a],new:R[e[a]]},k[a]=R[e[a]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(k),{charMap:o,subtable:H.data,maxGlyphID:N+1};case"unicode":for(F=[],y=[],D=0,R={},s={},C=d=null,$=0,be=u.length;$<be;$++)R[I=e[a=u[$]]]==null&&(R[I]=++D),s[a]={old:I,new:R[I]},c=R[I]-a,C!=null&&c===d||(C&&y.push(C),F.push(a),d=c),C=a;for(C&&y.push(C),y.push(65535),F.push(65535),K=2*(B=F.length),O=2*Math.pow(Math.log(B)/Math.LN2,2),_=Math.log(O/2)/Math.LN2,W=2*B-O,f=[],Y=[],b=[],A=re=0,P=F.length;re<P;A=++re){if(j=F[A],p=y[A],j===65535){f.push(0),Y.push(0);break}if(j-(te=s[j].new)>=32768)for(f.push(0),Y.push(2*(b.length+B-A)),a=le=j;j<=p?le<=p:le>=p;a=j<=p?++le:--le)b.push(s[a].new);else f.push(te-j),Y.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*B+2*b.length),H.writeUInt16(0),H.writeUInt16(K),H.writeUInt16(O),H.writeUInt16(_),H.writeUInt16(W),fe=0,M=y.length;fe<M;fe++)a=y[fe],H.writeUInt16(a);for(H.writeUInt16(0),de=0,G=F.length;de<G;de++)a=F[de],H.writeUInt16(a);for(we=0,J=f.length;we<J;we++)c=f[we],H.writeUInt16(c);for(Ve=0,Q=Y.length;Ve<Q;Ve++)V=Y[Ve],H.writeUInt16(V);for(Xe=0,oe=b.length;Xe<oe;Xe++)N=b[Xe],H.writeUInt16(N);return{charMap:s,subtable:H.data,maxGlyphID:D+1}}},n})(),b4=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return $o(n,vo),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new vx(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=vx.encode(e,t),(a=new jc).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},n})(),eL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return $o(n,vo),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),tL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return $o(n,vo),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),nL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return $o(n,vo),n.prototype.tag="post",n.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,c,f;for(f=[],o=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;o=0<=c?++u:--u)f.push(e.readUInt32());return f}).call(this)}},n})(),rL=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},sL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return $o(n,vo),n.prototype.tag="name",n.prototype.parse=function(e){var t,s,a,o,u,c,f,d,p,y,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),c=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(f={},o=p=0,y=s.length;p<y;o=++p)a=s[o],e.pos=a.offset,d=e.readString(a.length),u=new rL(d,a),f[_=a.nameID]==null&&(f[_]=[]),f[a.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},n})(),iL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return $o(n,vo),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),aL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return $o(n,vo),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,s,a,o,u,c,f;for(e.pos=this.offset,this.metrics=[],t=0,c=this.file.hhea.numberOfMetrics;0<=c?t<c:t>c;t=0<=c?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,p;for(p=[],t=d=0;0<=a?d<a:d>a;t=0<=a?++d:--d)p.push(e.readInt16());return p})(),this.widths=(function(){var d,p,y,_;for(_=[],d=0,p=(y=this.metrics).length;d<p;d++)o=y[d],_.push(o.advance);return _}).call(this),s=this.widths[this.widths.length-1],f=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)f.push(this.widths.push(s));return f},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),v4=[].slice,oL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return $o(n,vo),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,s,a,o,u,c,f,d,p,y;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(c=new jc(t.read(a))).readShort(),d=c.readShort(),y=c.readShort(),f=c.readShort(),p=c.readShort(),this.cache[e]=u===-1?new cL(c,d,y,f,p):new lL(c,u,d,y,f,p),this.cache[e]))},n.prototype.encode=function(e,t,s){var a,o,u,c,f;for(u=[],o=[],c=0,f=t.length;c<f;c++)a=e[t[c]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},n})(),lL=(function(){function n(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),cL=(function(){function n(e,t,s,a,o){var u,c;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;c=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&c;)u.pos+=1&c?4:2,128&c?u.pos+=8:64&c?u.pos+=4:8&c&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,s;for(t=new jc(v4.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),uL=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return $o(n,vo),n.prototype.tag="loca",n.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var c=this.offsets[u],f=this.offsets[u+1]-c;f>0&&(a+=f)}for(var d=new Array(4*s.length),p=0;p<s.length;++p)d[4*p+3]=255&s[p],d[4*p+2]=(65280&s[p])>>8,d[4*p+1]=(16711680&s[p])>>16,d[4*p]=(4278190080&s[p])>>24;return d},n})(),hL=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},n.prototype.glyphsFor=function(e){var t,s,a,o,u,c,f;for(a={},u=0,c=e.length;u<c;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in f=this.glyphsFor(t))s=f[o],a[o]=s;return a},n.prototype.encode=function(e,t){var s,a,o,u,c,f,d,p,y,_,b,A,N,k,C;for(a in s=b4.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),b={0:0},C=s.charMap)b[(f=C[a]).old]=f.new;for(A in _=s.maxGlyphID,u)A in b||(b[A]=_++);return p=(function(R){var D,V;for(D in V={},R)V[R[D]]=D;return V})(b),y=Object.keys(p).sort(function(R,D){return R-D}),N=(function(){var R,D,V;for(V=[],R=0,D=y.length;R<D;R++)c=y[R],V.push(p[c]);return V})(),o=this.font.glyf.encode(u,N,b),d=this.font.loca.encode(o.offsets,N),k={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},n})();It.API.PDFObject=(function(){var n;function e(){}return n=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var c,f,d;for(d=[],c=0,f=t.length;c<f;c++)s=t[c],d.push(e.convert(s));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();var Z1={exports:{}},fL=Z1.exports,yx;function dL(){return yx||(yx=1,(function(n,e){(function(t,s){s()})(fL,function(){function t(d,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function s(d,p,y){var _=new XMLHttpRequest;_.open("GET",d),_.responseType="blob",_.onload=function(){f(_.response,p,y)},_.onerror=function(){console.error("could not download file")},_.send()}function a(d){var p=new XMLHttpRequest;p.open("HEAD",d,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _1=="object"&&_1.global===_1?_1:void 0,c=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(d,p,y){var _=u.URL||u.webkitURL,b=document.createElement("a");p=p||d.name||"download",b.download=p,b.rel="noopener",typeof d=="string"?(b.href=d,b.origin===location.origin?o(b):a(b.href)?s(d,p,y):o(b,b.target="_blank")):(b.href=_.createObjectURL(d),setTimeout(function(){_.revokeObjectURL(b.href)},4e4),setTimeout(function(){o(b)},0))}:"msSaveOrOpenBlob"in navigator?function(d,p,y){if(p=p||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,y),p);else if(a(d))s(d,p,y);else{var _=document.createElement("a");_.href=d,_.target="_blank",setTimeout(function(){o(_)})}}:function(d,p,y,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof d=="string")return s(d,p,y);var b=d.type==="application/octet-stream",A=/constructor/i.test(u.HTMLElement)||u.safari,N=/CriOS\/[\d]+/.test(navigator.userAgent);if((N||b&&A||c)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var D=k.result;D=N?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=D:location=D,_=null},k.readAsDataURL(d)}else{var C=u.URL||u.webkitURL,R=C.createObjectURL(d);_?_.location=R:location.href=R,_=null,setTimeout(function(){C.revokeObjectURL(R)},4e4)}});u.saveAs=f.saveAs=f,n.exports=f})})(Z1)),Z1.exports}var pL=dL();const D2="chordWheelSongs",Tg="chordWheelCurrentSongId",Jf=()=>{try{const n=localStorage.getItem(D2);return n?JSON.parse(n).map(t=>({...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)})):[]}catch(n){return console.error("Error loading saved songs:",n),[]}},xx=n=>{try{const e=Jf(),t=e.findIndex(a=>a.id===n.id),s={...n,updatedAt:new Date().toISOString(),createdAt:n.createdAt instanceof Date?n.createdAt.toISOString():n.createdAt};t>=0?e[t]=s:e.push({...s,createdAt:new Date().toISOString()}),localStorage.setItem(D2,JSON.stringify(e)),localStorage.setItem(Tg,n.id)}catch(e){console.error("Error saving song:",e)}},mL=n=>{try{const t=Jf().filter(s=>s.id!==n);localStorage.setItem(D2,JSON.stringify(t)),localStorage.getItem(Tg)===n&&localStorage.removeItem(Tg)}catch(e){console.error("Error deleting song:",e)}},gL=({isOpen:n,onClose:e,onConfirm:t,title:s,message:a,confirmLabel:o="Confirm",cancelLabel:u="Cancel",isDestructive:c=!1})=>(ne.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]),ne.useEffect(()=>{const f=d=>{d.key==="Escape"&&n&&e()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[n,e]),n?v.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[v.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity",onClick:e}),v.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-sm w-full overflow-hidden flex flex-col scale-100 opacity-100 transition-all",children:[v.jsxs("div",{className:"p-6",children:[v.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:s}),v.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:a})]}),v.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-[#22222e] border-t border-border-subtle",children:[v.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors",children:u}),v.jsx("button",{onClick:()=>{t(),e()},className:`px-4 py-2 text-sm font-bold text-white rounded-lg shadow-lg transition-transform active:scale-95 ${c?"bg-red-500 hover:bg-red-600":"bg-accent-primary hover:bg-accent-secondary"}`,children:o})]})]})]}):null),y4={I:{degree:0,quality:"major"},ii:{degree:1,quality:"minor"},iii:{degree:2,quality:"minor"},IV:{degree:3,quality:"major"},V:{degree:4,quality:"major"},vi:{degree:5,quality:"minor"},"vii":{degree:6,quality:"diminished"},iv:{degree:3,quality:"minor"},"VI":{degree:8,quality:"major"},bVI:{degree:8,quality:"major"},"VII":{degree:10,quality:"major"},bVII:{degree:10,quality:"major"}},bL=[0,2,4,5,7,9,11];function vL(n,e){const t=Mh(e),s=Tl.indexOf(t);if(s===-1)return e;const a=y4[n];if(!a)return console.warn(`Unknown roman numeral: ${n}`),e;let o;a.degree<7?o=bL[a.degree]:o=a.degree;const u=(s+o)%12;return Tl[u]}function yL(n,e){const t=y4[n]||{quality:"major"},s=vL(n,e),a=ka(s,t.quality);return{root:s,quality:t.quality,numeral:n,notes:a,symbol:`${s}${t.quality==="major"?"":t.quality==="minor"?"m":""}`}}function R2(n,e){return n.map(t=>yL(t,e))}let Q1=!1,Tp=[];function I2(){Q1=!1,Tp.forEach(n=>clearTimeout(n)),Tp=[]}async function x4(n,e,t=120,s=2,a){I2(),Q1=!0,vs.state!=="running"&&await _u(),vs.state==="suspended"&&await vs.resume(),await Lc();const o=R2(n,e),c=60/t*1e3*s,d=`${4/s}n`;return new Promise(p=>{o.forEach((y,_)=>{const b=window.setTimeout(()=>{if(Q1&&(a?.(_,y),Ur(y.notes,d),_===o.length-1)){const A=window.setTimeout(()=>{Q1=!1,p()},c);Tp.push(A)}},_*c);Tp.push(b)})})}const xL=[{id:"pop-anthem",name:"Pop/Rock Anthem",description:"The most popular progression in modern music. Uplifting and anthemic.",numerals:["I","V","vi","IV"],genre:"Pop/Rock",artists:"U2, The Beatles, Blink-182",color:"accent-primary",sectionType:"chorus",sectionName:"Anthem",beatsPerChord:4},{id:"emotional-ballad",name:"Emotional Ballad",description:"Starts on the minor chord for a melancholic, emotional feel.",numerals:["vi","IV","I","V"],genre:"Ballad",artists:"Adele, John Legend",color:"purple-400",sectionType:"verse",sectionName:"Ballad",beatsPerChord:4},{id:"jazz-ii-v-i",name:"Jazz / R&B",description:"The foundation of jazz harmony. Smooth and sophisticated.",numerals:["ii","V","I"],genre:"Jazz/R&B",artists:"Maroon 5, Jazz Standards",color:"blue-400",sectionType:"verse",sectionName:"ii-V-I",beatsPerChord:4,totalBars:4},{id:"50s-progression",name:"50s Doo-Wop",description:"Classic rock and roll. Nostalgic and feel-good.",numerals:["I","vi","IV","V"],genre:"Oldies",artists:"Stand By Me, Earth Angel",color:"yellow-400",sectionType:"verse",sectionName:"Doo-Wop",beatsPerChord:4},{id:"andalusian",name:"Andalusian Cadence",description:"Dramatic descending progression. Spanish/Flamenco influenced.",numerals:["vi","V","IV","III"],genre:"Dramatic",artists:"Hit the Road Jack, Sultans of Swing",color:"red-400",sectionType:"verse",sectionName:"Andal.",beatsPerChord:4},{id:"pachelbel",name:"Pachelbel Canon",description:"The classical progression that influenced centuries of music.",numerals:["I","V","vi","iii","IV","I","IV","V"],genre:"Classical/Pop",artists:"Canon in D, Basket Case",color:"green-400",sectionType:"verse",sectionName:"Canon",beatsPerChord:2}],wL=[{id:"perfect",name:"Perfect Cadence",description:'The "Full Stop". Strongest resolution.',numerals:["V","I"],color:"green-500",emotion:"Conclusive"},{id:"plagal",name:"Plagal Cadence",description:'The "Amen". Softer, church-like resolution.',numerals:["IV","I"],color:"blue-500",emotion:"Peaceful"},{id:"half",name:"Half Cadence",description:'The "Comma". Leaves listeners wanting more.',numerals:["I","V"],color:"yellow-500",emotion:"Suspenseful"},{id:"deceptive",name:"Deceptive Cadence",description:'The "Surprise". Expecting I, getting vi.',numerals:["V","vi"],color:"purple-500",emotion:"Unexpected"}],_L=({preset:n,showAddButton:e=!0,compact:t=!1,onAddToTimeline:s})=>{const{selectedKey:a,currentSong:o,openTimeline:u}=nn(),c=nn(R=>R.addCustomSection),[f,d]=ne.useState(!1),[p,y]=ne.useState(null),[_,b]=ne.useState(!1),A=R2(n.numerals,a),N=async()=>{if(f){I2(),d(!1),y(null);return}d(!0),y(0);try{await x4(n.numerals,a,o.tempo,n.beatsPerChord,R=>{y(R)})}finally{d(!1),y(null)}},k=async(R,D)=>{if(f)return;y(D);const V=n.beatsPerChord>=4?"1n":"2n";await Ur(R.notes,V),setTimeout(()=>y(null),400)},C=()=>{c&&(c(n.sectionName,n.sectionType,A,{beatsPerChord:n.beatsPerChord,totalBars:n.totalBars}),u(),b(!0),setTimeout(()=>b(!1),1500),s?.())};return v.jsxs("div",{className:`
                p-2.5 rounded bg-bg-tertiary transition-all duration-300 overflow-hidden
                ${t?"text-xs":"text-sm"}
                ${_?"ring-2 ring-green-500 bg-green-500/10":""}
            `,children:[v.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[v.jsxs("div",{className:"min-w-0",children:[v.jsx("span",{className:"font-bold text-white",children:n.name}),n.artists&&v.jsx("span",{className:"block text-xs text-gray-500 truncate",children:n.artists})]}),e&&v.jsxs("button",{onClick:C,className:`
                            flex items-center gap-1 px-2 py-1 rounded text-xs font-medium shrink-0
                            transition-all duration-200
                            ${_?"bg-green-500 text-white":"bg-bg-elevated hover:bg-accent-primary/20 text-gray-400 hover:text-accent-primary"}
                        `,title:"Add to timeline",children:[v.jsx(Yh,{size:12}),v.jsx("span",{className:"hidden sm:inline",children:_?"Added!":"Add"})]})]}),v.jsxs("div",{className:"grid gap-1.5",style:{gridTemplateColumns:"auto repeat(4, minmax(0, max-content))",justifyContent:"start"},children:[v.jsx("button",{onClick:N,className:`
                        flex items-center justify-center w-7 h-7 rounded-full shrink-0
                        transition-all duration-200
                        ${f?"bg-red-500 hover:bg-red-600 text-white":"bg-accent-primary/20 hover:bg-accent-primary/40 text-accent-primary"}
                    `,title:f?"Stop":"Play progression",children:f?v.jsx(Y3,{size:12}):v.jsx(Wh,{size:12,className:"ml-0.5"})}),n.numerals.map((R,D)=>{const V=A[D],I=p===D,Y=D<4?void 0:D%4+2;return v.jsx("button",{onClick:()=>k(V,D),disabled:f,className:`
                                text-xs px-2 py-1 rounded font-medium
                                transition-all duration-150
                                ${I?`bg-${n.color} text-white scale-110 shadow-lg shadow-${n.color}/30`:`bg-black/40 text-${n.color} hover:bg-black/60 hover:scale-105`}
                                ${f&&!I?"opacity-50":""}
                                disabled:cursor-not-allowed
                            `,style:{...I?{backgroundColor:`var(--color-${n.color})`}:{},...Y?{gridColumn:Y}:{}},title:`Play ${V.symbol}`,children:R},`${R}-${D}`)})]})]})},SL=({preset:n})=>{const{selectedKey:e,currentSong:t}=nn(),[s,a]=ne.useState(!1),[o,u]=ne.useState(null),c=R2(n.numerals,e),f=async()=>{if(s){I2(),a(!1),u(null);return}a(!0),u(0);try{await x4(n.numerals,e,t.tempo,2,y=>{u(y)})}finally{a(!1),u(null)}},d=async(y,_)=>{s||(u(_),await Ur(y.notes,"2n"),setTimeout(()=>u(null),400))},p=`text-${n.color.replace("-500","-400")}`;return v.jsxs("div",{className:`
                group p-3 rounded bg-bg-tertiary hover:bg-bg-tertiary/80 
                transition-all duration-200 border-l-2
            `,style:{borderColor:`var(--color-${n.color}, currentColor)`},children:[v.jsxs("div",{className:"flex justify-between items-center mb-1 gap-2",children:[v.jsx("span",{className:"font-bold text-white",children:n.name}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("button",{onClick:f,className:`
                            w-6 h-6 rounded-full flex items-center justify-center
                            transition-all duration-200
                            ${s?"bg-red-500 text-white":"bg-white/10 hover:bg-white/20 text-white/70 hover:text-white"}
                        `,title:s?"Stop":"Play cadence",children:s?v.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"}):v.jsx(Wh,{size:10,className:"ml-0.5"})}),v.jsx("div",{className:"flex gap-0.5",children:n.numerals.map((y,_)=>{const b=c[_],A=o===_;return v.jsxs(Zn.Fragment,{children:[v.jsx("button",{onClick:()=>d(b,_),disabled:s,className:`
                                            text-xs px-1.5 py-0.5 rounded
                                            transition-all duration-150
                                            ${A?"bg-white text-black scale-110":`bg-black/30 ${p} hover:bg-black/50 hover:scale-105`}
                                        `,style:A?{backgroundColor:`var(--color-${n.color})`,color:"white"}:void 0,title:`Play ${b.symbol}`,children:y}),_<n.numerals.length-1&&v.jsx("span",{className:"text-gray-500 text-xs flex items-center",children:""})]},`${y}-${_}`)})})]})]}),v.jsx("p",{className:"text-gray-400 text-xs",children:n.description})]})},wx=({size:n=32})=>v.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",style:{width:n,height:n},children:[[...Array(12)].map((e,t)=>{const s=t*30,a=(s-15-90)*Math.PI/180,o=(s+15-90)*Math.PI/180,u=18,c=46,f=t<=4||t>=10;let d;f?t===0?d="rgba(234, 179, 8, 0.9)":t===1?d="rgba(163, 190, 60, 0.85)":t===2?d="rgba(132, 204, 22, 0.8)":t===3?d="rgba(74, 222, 128, 0.7)":t===4?d="rgba(45, 212, 191, 0.6)":t===11?d="rgba(251, 146, 60, 0.85)":t===10?d="rgba(168, 162, 158, 0.6)":d="rgba(200, 180, 100, 0.7)":d=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][t%3];const p=50+u*Math.cos(a),y=50+u*Math.sin(a),_=50+c*Math.cos(a),b=50+c*Math.sin(a),A=50+c*Math.cos(o),N=50+c*Math.sin(o),k=50+u*Math.cos(o),C=50+u*Math.sin(o);return v.jsx("path",{d:`M ${p} ${y} L ${_} ${b} A ${c} ${c} 0 0 1 ${A} ${N} L ${k} ${C} A ${u} ${u} 0 0 0 ${p} ${y}`,fill:d,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},t)}),v.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]}),_x=({onClose:n})=>{const{selectedKey:e}=nn();return v.jsxs(v.Fragment,{children:[v.jsxs("section",{className:"relative",children:[v.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-accent-primary/20 rounded-full blur-3xl pointer-events-none"}),v.jsx("div",{className:"absolute -bottom-5 -right-5 w-24 h-24 bg-purple-500/15 rounded-full blur-3xl pointer-events-none"}),v.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2 relative",children:[v.jsx(cC,{size:12,className:"fill-accent-primary"}),"Quick Start"]}),v.jsxs("div",{className:"relative bg-gradient-to-b from-bg-elevated/60 to-bg-elevated/40 rounded-xl p-5 border border-white/5 space-y-4",children:[v.jsxs("div",{className:"flex items-start gap-4 group",children:[v.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:v.jsx(P3,{size:18,className:"text-accent-primary"})}),v.jsxs("div",{className:"pt-0.5",children:[v.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),v.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",v.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),v.jsxs("div",{className:"flex items-start gap-4 group",children:[v.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:v.jsx(Fh,{size:18,className:"text-purple-400"})}),v.jsxs("div",{className:"pt-0.5",children:[v.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),v.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[v.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate and change keys. Highlighted chords always sound good together."]})]})]}),v.jsxs("div",{className:"flex items-start gap-4 group",children:[v.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:v.jsx(z3,{size:18,className:"text-emerald-400"})}),v.jsxs("div",{className:"pt-0.5",children:[v.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),v.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",v.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",v.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),v.jsxs("div",{className:"flex items-start gap-4 group",children:[v.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:v.jsx(pp,{size:18,className:"text-amber-400"})}),v.jsxs("div",{className:"pt-0.5",children:[v.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),v.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",v.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),v.jsxs("div",{className:"flex items-start gap-4 group",children:[v.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:v.jsx(d2,{size:18,className:"text-sky-400"})}),v.jsxs("div",{className:"pt-0.5",children:[v.jsx("h4",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),v.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[v.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),v.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"shrink-0 w-14 h-14 relative",children:v.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((t,s)=>{const a=s*30,o=(a-15-90)*Math.PI/180,u=(a+15-90)*Math.PI/180,c=18,f=46,d=s<=4||s>=10;let p;d?s===0?p="rgba(234, 179, 8, 0.9)":s===1?p="rgba(163, 190, 60, 0.85)":s===2?p="rgba(132, 204, 22, 0.8)":s===3?p="rgba(74, 222, 128, 0.7)":s===4?p="rgba(45, 212, 191, 0.6)":s===11?p="rgba(251, 146, 60, 0.85)":s===10?p="rgba(168, 162, 158, 0.6)":p="rgba(200, 180, 100, 0.7)":p=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][s%3];const y=50+c*Math.cos(o),_=50+c*Math.sin(o),b=50+f*Math.cos(o),A=50+f*Math.sin(o),N=50+f*Math.cos(u),k=50+f*Math.sin(u),C=50+c*Math.cos(u),R=50+c*Math.sin(u);return v.jsx("path",{d:`M ${y} ${_} L ${b} ${A} A ${f} ${f} 0 0 1 ${N} ${k} L ${C} ${R} A ${c} ${c} 0 0 0 ${y} ${_}`,fill:p,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},s)}),v.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("strong",{className:"text-xs text-white block mb-1",children:"Understanding the Wheel"}),v.jsxs("div",{className:"text-[11px] text-gray-400 leading-snug space-y-0.5",children:[v.jsxs("div",{children:[v.jsx("strong",{className:"text-gray-300",children:"Highlighted"})," = in key"]}),v.jsxs("div",{children:[v.jsx("strong",{className:"text-gray-300",children:"Inner"})," = Major (I, IV, V)"]}),v.jsxs("div",{children:[v.jsx("strong",{className:"text-gray-300",children:"Middle"})," = Minor (ii, iii, vi)"]}),v.jsxs("div",{children:[v.jsx("strong",{className:"text-gray-300",children:"Outer"})," = Dim (vii)"]})]})]})]})}),v.jsx("div",{className:"p-3 rounded-xl bg-accent-primary/5 border border-accent-primary/20",children:v.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[v.jsx(id,{size:14,className:"text-accent-primary shrink-0"}),v.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[v.jsx("strong",{className:"text-accent-primary",children:"Tip:"})," Tap the",v.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 rounded-full text-text-muted border border-border-subtle/60",children:v.jsx(id,{size:10})}),"button anytime to reopen this guide."]})]})})]})]}),v.jsxs("section",{children:[v.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[v.jsx(NC,{size:12}),"The Language of Music (Roman Numerals)"]}),v.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-4",children:[v.jsx("p",{className:"text-sm text-gray-300",children:'Musicians use roman numerals to talk about chords regardless of the specific key. This reveals the "DNA" of a song.'}),v.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-sm",children:["I","ii","iii","IV","V","vi","vii"].map((t,s)=>v.jsxs("div",{className:`rounded p-2 flex flex-col items-center justify-between h-20 ${["I","IV","V"].includes(t)?"bg-accent-primary/20 border border-accent-primary/30":t==="vii"?"bg-red-500/10 border border-red-500/20":"bg-violet-500/15 border border-violet-500/25"}`,children:[v.jsx("span",{className:"font-bold text-white mb-1",children:t}),v.jsx("span",{className:"text-[10px] text-gray-400 leading-tight",children:s===0?"Tonic (Home)":s===3?"Subdom. (Away)":s===4?"Dominant (Tension)":s===5?"Rel. Minor":s===6?"Leading Tone":"Mediant"})]},t))}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-gray-400",children:[v.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[v.jsx("strong",{className:"text-accent-primary block mb-1",children:"Tonic (I, vi, iii)"}),"Stable, home base. Where songs usually start and end."]}),v.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[v.jsx("strong",{className:"text-accent-primary block mb-1",children:"Subdominant (IV, ii)"}),"Movement, drifting away from home. Creates interest."]}),v.jsxs("div",{className:"p-2 rounded bg-bg-tertiary/50",children:[v.jsx("strong",{className:"text-accent-primary block mb-1",children:"Dominant (V, vii)"}),"Tension, needing resolution. Pulls strongly back to I."]})]})]})]}),v.jsxs("section",{children:[v.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[v.jsx(kC,{size:12}),"Songwriting Toolkit"]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[v.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Emotional Cadences (How Phrases End)",v.jsx(ng,{size:12,className:"text-accent-primary/50"}),v.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e]})]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:wL.map(t=>v.jsx(SL,{preset:t},t.id))})]}),v.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4",children:[v.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["Famous Progressions",v.jsx(ng,{size:12,className:"text-accent-primary/50"}),v.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["in ",e,"  tap to play  click + to add"]})]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:xL.map(t=>v.jsx(_L,{preset:t,onAddToTimeline:n},t.id))})]})]})]}),v.jsxs("section",{children:[v.jsxs("h3",{className:"text-accent-primary font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[v.jsx(q3,{size:12}),"Adding Spice (Advanced)"]}),v.jsxs("div",{className:"bg-bg-elevated/50 rounded-lg p-4 space-y-6",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-white mb-2 text-sm flex items-center gap-2",children:"1. Modal Interchange (Borrowed Chords)"}),v.jsx("p",{className:"text-sm text-gray-400 mb-3",children:'Steal chords from the parallel minor key to add "cinematic" emotion.'}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-xs",children:[v.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[v.jsx("strong",{className:"text-white block",children:"Minor IV (iv)"}),v.jsx("span",{className:"text-gray-500",children:'"The Beatles Cadence". Gives a nostalgic, bittersweet ending. (Fm in key of C).'})]}),v.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[v.jsx("strong",{className:"text-white block",children:"Flat VI (VI)"}),v.jsx("span",{className:"text-gray-500",children:'Epic, heroic, fantasy feeling. "Lord of the Rings" sound. (Ab in key of C).'})]}),v.jsxs("div",{className:"bg-bg-tertiary p-2 rounded border-l-2 border-indigo-500",children:[v.jsx("strong",{className:"text-white block",children:"Picardy Third"}),v.jsx("span",{className:"text-gray-500",children:"Ending a sad, minor song on a happy Major I chord. Pure sunshine."})]})]})]}),v.jsx("div",{className:"w-full h-px bg-white/5"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"2. Secondary Dominants"}),v.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Make a minor chord Major to create a magnetic pull to another chord."}),v.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"In C Major, play ',v.jsx("strong",{className:"text-white",children:"E Major (III)"}),". It pulls hard to ",v.jsx("strong",{className:"text-white",children:"Am"}),'. (Radiohead - Creep)"']})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"3. Tritone Substitution"}),v.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Jazz trick: Replace the V chord with a dominant chord exactly halfway around the circle (a tritone away)."}),v.jsxs("div",{className:"bg-bg-tertiary p-3 rounded text-xs text-gray-300 italic",children:['"Instead of G7  C, try ',v.jsx("strong",{className:"text-white",children:"Db7  C"}),'. Smooth chromatic slide."']})]})]}),v.jsx("div",{className:"w-full h-px bg-white/5"}),v.jsxs("div",{children:[v.jsxs("h4",{className:"font-bold text-white mb-3 text-sm flex items-center gap-2",children:["4. Secrets of the Pros",v.jsx("span",{className:"text-[10px] bg-purple-500/20 text-purple-400 px-1.5 py-0.5 rounded uppercase font-bold",children:"Expert"})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[v.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"A"}),v.jsxs("div",{children:[v.jsx("strong",{className:"text-white text-sm block",children:"Pedal Point"}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Keep the bass note the same while changing chords on top. Creates massive tension and "floaty" feelings. (e.g., C/C  F/C  G/C).'})]})]}),v.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[v.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"B"}),v.jsxs("div",{children:[v.jsx("strong",{className:"text-white text-sm block",children:"Line Clich"}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'A single note moving down chromatically inside a static chord. think "Stairway to Heaven" or James Bond theme (Am  Am(maj7)  Am7  Am6).'})]})]}),v.jsxs("div",{className:"p-3 rounded bg-bg-tertiary flex gap-3",children:[v.jsx("div",{className:"shrink-0 w-8 h-8 rounded bg-bg-elevated flex items-center justify-center font-bold text-accent-primary",children:"C"}),v.jsxs("div",{children:[v.jsx("strong",{className:"text-white text-sm block",children:"Relative Major/Minor Modulation"}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Switching focus between I and vi. Use the exact same notes, but center your melody around Am instead of C to instantly change the mood from happy to sad."})]})]})]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-bold text-white mb-2 text-sm",children:"5. Building Better Chords (Extensions)"}),v.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs text-center",children:[v.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[v.jsx("strong",{className:"text-white block",children:"maj7"}),v.jsx("span",{className:"text-gray-500",children:"Dreamy, Jazz, Lo-fi"})]}),v.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[v.jsx("strong",{className:"text-white block",children:"dom7"}),v.jsx("span",{className:"text-gray-500",children:"Blues, Funk, Tension"})]}),v.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[v.jsx("strong",{className:"text-white block",children:"sus4"}),v.jsx("span",{className:"text-gray-500",children:"Open, airy, delayed"})]}),v.jsxs("div",{className:"bg-bg-tertiary p-2 rounded hover:bg-bg-tertiary/80 transition-colors",children:[v.jsx("strong",{className:"text-white block",children:"add9"}),v.jsx("span",{className:"text-gray-500",children:"Rich, cinematic pop"})]})]})]})]})]})]})},NL=({isOpen:n,onClose:e,isEmbedded:t=!1})=>n?t?v.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col bg-[#1a1a24]",children:[v.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-[#22222e] shrink-0",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-6 h-6",children:v.jsx(wx,{size:24})}),v.jsx("h2",{className:"text-sm font-bold text-white",children:"Guide"})]}),v.jsx("button",{onClick:e,className:"p-1 hover:bg-bg-tertiary rounded transition-colors text-text-muted hover:text-white",children:v.jsx(bu,{size:16})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-6 sm:py-6 space-y-8",children:v.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:v.jsx(_x,{onClose:e})})})]}):v.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center pointer-events-none",style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[v.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm cursor-pointer pointer-events-auto",onClick:e}),v.jsxs("div",{className:"relative bg-[#1a1a24] border border-border-medium rounded-xl shadow-2xl max-w-4xl w-full max-h-full overflow-hidden flex flex-col pointer-events-auto",children:[v.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border-subtle bg-[#22222e]",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-8 h-8",children:v.jsx(wx,{size:32})}),v.jsx("h2",{className:"text-lg font-bold text-white",children:"Chord Wheel Guide"})]}),v.jsx("button",{onClick:e,className:"p-2 hover:bg-bg-tertiary rounded-lg transition-colors text-text-muted hover:text-white",children:v.jsx(bu,{size:20})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto px-[20px] py-[20px] sm:px-8 sm:py-8 space-y-8",children:v.jsx("div",{className:"space-y-8 text-sm leading-relaxed [p]:mb-3 [p]:mx-[20px] [ul]:mx-[20px] [li]:ml-4",children:v.jsx(_x,{onClose:e})})})]})]}):null,Sx="chordwheel_onboarding_seen",AL=({onDismiss:n,onOpenHelp:e})=>{const[t,s]=ne.useState(!1),[a,o]=ne.useState(!1);ne.useEffect(()=>{if(!localStorage.getItem(Sx)){const f=setTimeout(()=>s(!0),800);return()=>clearTimeout(f)}},[]);const u=()=>{o(!0),localStorage.setItem(Sx,"true"),setTimeout(()=>{s(!1),n?.()},300)};return t?v.jsxs("div",{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 transition-all duration-300 ${a?"opacity-0":"opacity-100"}`,style:{paddingTop:"max(16px, env(safe-area-inset-top))",paddingBottom:"max(16px, env(safe-area-inset-bottom))",paddingLeft:"max(16px, env(safe-area-inset-left))",paddingRight:"max(16px, env(safe-area-inset-right))"},children:[v.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-md cursor-pointer",onClick:u}),v.jsxs("div",{className:`relative max-w-md w-full bg-gradient-to-b from-[#1e1e2a] to-[#151520] border border-white/10 rounded-2xl shadow-2xl overflow-hidden transition-all duration-300 ${a?"scale-95 opacity-0":"scale-100 opacity-100"}`,children:[v.jsx("div",{className:"absolute -top-20 -left-20 w-40 h-40 bg-accent-primary/30 rounded-full blur-3xl pointer-events-none"}),v.jsx("div",{className:"absolute -bottom-10 -right-10 w-32 h-32 bg-purple-500/20 rounded-full blur-3xl pointer-events-none"}),v.jsxs("div",{className:"relative px-6 pt-6 pb-4 flex items-center justify-between border-b border-white/5",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-accent-primary to-purple-600 flex items-center justify-center shadow-lg shadow-accent-primary/25",children:v.jsx(ek,{size:20,className:"text-white"})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-lg font-bold text-white",children:"Welcome!"}),v.jsx("p",{className:"text-xs text-gray-400",children:"Quick start guide"})]})]}),v.jsx("button",{onClick:u,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",children:v.jsx(bu,{size:20})})]}),v.jsxs("div",{className:"relative px-6 py-5 space-y-4",children:[v.jsxs("div",{className:"flex items-start gap-4 group",children:[v.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-accent-primary/10 border border-accent-primary/20 flex items-center justify-center group-hover:bg-accent-primary/20 transition-colors",children:v.jsx(P3,{size:18,className:"text-accent-primary"})}),v.jsxs("div",{className:"pt-0.5",children:[v.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Tap any chord"}),v.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap a chord on the wheel to hear it and see voicings, or ",v.jsx("strong",{className:"text-gray-300",children:"double-tap"})," to add it to your timeline."]})]})]}),v.jsxs("div",{className:"flex items-start gap-4 group",children:[v.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-purple-500/10 border border-purple-500/20 flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:v.jsx(Fh,{size:18,className:"text-purple-400"})}),v.jsxs("div",{className:"pt-0.5",children:[v.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Change the key"}),v.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[v.jsx("strong",{className:"text-gray-300",children:"Drag the wheel"})," to rotate and change keys. Highlighted chords always sound good together."]})]})]}),v.jsxs("div",{className:"flex items-start gap-4 group",children:[v.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:v.jsx(z3,{size:18,className:"text-emerald-400"})}),v.jsxs("div",{className:"pt-0.5",children:[v.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Add to your timeline"}),v.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Tap the ",v.jsx("strong",{className:"text-emerald-400",children:"+ Add"})," button, or ",v.jsx("strong",{className:"text-gray-300",children:"double-tap"})," any chord preview to place it on your timeline."]})]})]}),v.jsxs("div",{className:"flex items-start gap-4 group",children:[v.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-center justify-center group-hover:bg-amber-500/20 transition-colors",children:v.jsx(pp,{size:18,className:"text-amber-400"})}),v.jsxs("div",{className:"pt-0.5",children:[v.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Arrange your song"}),v.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Open the ",v.jsx("strong",{className:"text-gray-300",children:"Song Map"})," to see your full arrangement, reorder sections, and play back your progression."]})]})]}),v.jsxs("div",{className:"flex items-start gap-4 group",children:[v.jsx("div",{className:"shrink-0 w-10 h-10 rounded-xl bg-sky-500/10 border border-sky-500/20 flex items-center justify-center group-hover:bg-sky-500/20 transition-colors",children:v.jsx(d2,{size:18,className:"text-sky-400"})}),v.jsxs("div",{className:"pt-0.5",children:[v.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Export your chord sheet"}),v.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[v.jsx("strong",{className:"text-gray-300",children:"Tap the download icon"})," in the header to export a printable PDF with chords and guitar diagrams."]})]})]}),v.jsx("div",{className:"mt-5 p-3 rounded-xl bg-white/5 border border-white/10",children:v.jsxs("div",{className:"flex items-center justify-between gap-3",children:[v.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[v.jsx(IC,{size:14,className:"text-accent-primary shrink-0",style:{transform:"scaleX(-1)"}}),v.jsxs("span",{className:"flex items-center gap-1.5 flex-wrap",children:[v.jsx("strong",{className:"text-gray-300",children:"Tip:"})," Tap the",v.jsx("button",{onClick:()=>{u(),setTimeout(()=>e?.(),350)},className:"inline-flex items-center justify-center w-5 h-5 bg-bg-secondary/80 hover:bg-bg-tertiary rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/60",title:"Open full guide",children:v.jsx(id,{size:12})}),"button anytime for the full guide."]})]}),v.jsx("div",{className:"shrink-0 w-16 h-16 relative",children:v.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[[...Array(12)].map((c,f)=>{const d=f*30,p=(d-15-90)*Math.PI/180,y=(d+15-90)*Math.PI/180,_=18,b=46,A=f<=4||f>=10;let N;A?f===0?N="rgba(234, 179, 8, 0.9)":f===1?N="rgba(163, 190, 60, 0.85)":f===2?N="rgba(132, 204, 22, 0.8)":f===3?N="rgba(74, 222, 128, 0.7)":f===4?N="rgba(45, 212, 191, 0.6)":f===11?N="rgba(251, 146, 60, 0.85)":f===10?N="rgba(168, 162, 158, 0.6)":N="rgba(200, 180, 100, 0.7)":N=["rgba(100, 80, 120, 0.5)","rgba(80, 70, 90, 0.5)","rgba(60, 55, 70, 0.5)"][f%3];const k=50+_*Math.cos(p),C=50+_*Math.sin(p),R=50+b*Math.cos(p),D=50+b*Math.sin(p),V=50+b*Math.cos(y),I=50+b*Math.sin(y),Y=50+_*Math.cos(y),W=50+_*Math.sin(y);return v.jsx("path",{d:`M ${k} ${C} L ${R} ${D} A ${b} ${b} 0 0 1 ${V} ${I} L ${Y} ${W} A ${_} ${_} 0 0 0 ${k} ${C}`,fill:N,stroke:"rgba(0, 0, 0, 0.3)",strokeWidth:"0.5"},f)}),v.jsx("circle",{cx:"50",cy:"50",r:"16",fill:"rgba(20, 20, 30, 0.95)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"})]})})]})})]}),v.jsx("div",{className:"relative px-6 pb-6",children:v.jsx("button",{onClick:u,className:"w-full py-3 px-4 rounded-xl bg-gradient-to-r from-accent-primary to-purple-600 text-white font-semibold text-sm hover:opacity-90 transition-opacity shadow-lg shadow-accent-primary/25 active:scale-[0.98]",children:"Got it, let's go!"})})]})]}):null},TL=({isOpen:n,onClose:e,title:t,artist:s,tags:a,onSave:o})=>{const u=ne.useRef(null),c=ne.useRef(null),[f,d]=ne.useState(t),[p,y]=ne.useState(s),[_,b]=ne.useState(a),[A,N]=ne.useState("");if(ne.useEffect(()=>{n&&(d(t),y(s),b(a),N(""),setTimeout(()=>{c.current?.focus(),c.current?.select()},100))},[n,t,s,a]),ne.useEffect(()=>{if(!n)return;const I=Y=>{Y.key==="Escape"&&e()};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[n,e]),!n)return null;const k=()=>{const I=f.trim()||"Untitled Song";o(I,p.trim(),_),e()},C=()=>{const I=A.trim();I&&!_.includes(I)&&(b([..._,I]),N(""))},R=I=>{b(_.filter(Y=>Y!==I))},D=I=>{I.key==="Enter"&&(I.preventDefault(),C())},V=I=>{I.key==="Enter"&&(I.preventDefault(),k())};return Cl.createPortal(v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"fixed inset-0 z-[99998] bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",onClick:e}),v.jsxs("div",{ref:u,className:`fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[99999]
                           bg-bg-elevated border border-border-medium rounded-xl 
                           shadow-2xl shadow-black/50
                           animate-in fade-in zoom-in-95 duration-200`,style:{minWidth:"280px",maxWidth:"340px",width:"90vw"},children:[v.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border-subtle bg-bg-secondary/50 rounded-t-xl",children:[v.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[v.jsx("div",{className:"w-2 h-2 rounded-full shadow-[0_0_8px_rgba(99,102,241,0.5)] shrink-0",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"}}),v.jsx("span",{className:"text-sm font-bold text-text-primary",children:"Song Info"})]}),v.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-bg-tertiary text-text-muted hover:text-text-primary transition-colors shrink-0",children:v.jsx(bu,{size:14})})]}),v.jsxs("div",{className:"p-4 space-y-4",children:[v.jsxs("div",{className:"space-y-1.5",children:[v.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"Song Title"}),v.jsx("input",{ref:c,type:"text",value:f,onChange:I=>d(I.target.value),onKeyDown:V,placeholder:"Untitled Song",maxLength:100,className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`})]}),v.jsxs("div",{className:"space-y-1.5",children:[v.jsx("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider",children:"By (Optional)"}),v.jsx("input",{type:"text",value:p,onChange:I=>y(I.target.value),onKeyDown:V,placeholder:"Artist or songwriter name",maxLength:100,className:`w-full h-9 bg-bg-tertiary text-text-primary text-sm font-medium rounded-lg 
                                       px-3 border border-border-subtle 
                                       focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`})]}),v.jsxs("div",{className:"space-y-1.5",children:[v.jsxs("label",{className:"text-[10px] font-bold text-text-muted uppercase tracking-wider flex items-center gap-1.5",children:[v.jsx(rk,{size:10}),"Tags (Optional)"]}),_.length>0&&v.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:_.map(I=>v.jsxs("span",{className:qt("inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium","bg-accent-primary/15 text-accent-primary border border-accent-primary/30"),children:[I,v.jsx("button",{onClick:()=>R(I),className:"hover:text-red-400 transition-colors",title:`Remove "${I}"`,children:v.jsx(bu,{size:12})})]},I))}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"text",value:A,onChange:I=>N(I.target.value),onKeyDown:D,placeholder:"Add a tag...",maxLength:30,className:`flex-1 h-8 bg-bg-tertiary text-text-primary text-xs rounded-lg 
                                           px-3 border border-border-subtle 
                                           focus:outline-none focus:ring-1 focus:ring-accent-primary/50 focus:border-accent-primary`}),v.jsxs("button",{onClick:C,disabled:!A.trim(),className:qt("h-8 px-3 rounded-lg text-xs font-medium transition-all","flex items-center gap-1",A.trim()?"bg-accent-primary/10 border border-accent-primary/30 text-accent-primary hover:bg-accent-primary/20 active:scale-95":"bg-bg-tertiary border border-border-subtle text-text-muted cursor-not-allowed"),children:[v.jsx(Yh,{size:12}),"Add"]})]}),v.jsx("p",{className:"text-[10px] text-text-muted",children:"Tags help you organize and filter your songs"})]}),v.jsx("button",{onClick:k,className:`w-full py-2.5 rounded-lg
                                   bg-accent-primary text-white font-bold text-sm
                                   hover:bg-accent-primary/90 active:scale-[0.98]
                                   transition-all shadow-lg shadow-accent-primary/25`,children:"Save"})]})]})]}),document.body)},CL=({mobileTimelineOpen:n,setMobileTimelineOpen:e,chordPanelVisible:t,setChordPanelScrolledToBottom:s})=>{const a=ne.useRef(0),[o,u]=ne.useState(0),c=ne.useRef(!1),f=t,d=!t,p=450,y=V=>{a.current=V.touches[0].clientY,c.current=!0,u(0)},_=V=>{if(!c.current)return;const I=a.current-V.touches[0].clientY;u(I)},b=()=>{if(!c.current)return;c.current=!1;const V=40;f&&o<-V&&(t&&nn.getState().toggleChordPanel(),n&&e(!1)),d&&o>V&&(n||e(!0),t||nn.getState().toggleChordPanel()),u(0)},A=()=>{Math.abs(o)<15&&(f?(t&&nn.getState().toggleChordPanel(),n&&e(!1)):(n||e(!0),t||nn.getState().toggleChordPanel()))},N=o!==0,k=f&&o<0?Math.min(400,-o*1.5):0,C=d&&o>0?Math.min(p,o*2):0,R=C>0,D=k>0;return v.jsxs("div",{className:"shrink-0 flex flex-col overflow-hidden",style:{maxHeight:D?`calc(65vh - ${k}px)`:"65vh",opacity:D?Math.max(.3,1-k/500):1,transition:N?"none":"all 0.25s ease-out"},children:[v.jsx("div",{className:"h-6 flex items-center justify-center bg-bg-secondary border-t border-border-subtle cursor-grab active:cursor-grabbing select-none",onTouchStart:y,onTouchMove:_,onTouchEnd:b,onClick:A,children:v.jsx(F3,{size:16,className:`text-text-muted transition-transform duration-200 ${f?"rotate-180":""}`})}),v.jsxs("div",{className:"flex-1 overflow-hidden",style:{maxHeight:R?`${C}px`:void 0,transition:N?"none":"max-height 0.25s ease-out"},children:[v.jsx(ag,{isOpen:n||R,onToggle:()=>e(!n)}),v.jsx("div",{"data-chord-details":!0,className:"shrink-0 bg-bg-primary overflow-hidden",style:{maxHeight:n||R?"45vh":"55vh"},children:v.jsx(cg,{variant:"drawer",onScrollChange:s,forceVisible:R})})]})]})};function kL(){const{currentSong:n,selectedKey:e,timelineVisible:t,toggleTimeline:s,selectedSectionId:a,selectedSlotId:o,clearSlot:u,clearTimeline:c,setTitle:f,setArtist:d,setTags:p,loadSong:y,newSong:_,instrument:b,volume:A,isMuted:N,undo:k,redo:C,canUndo:R,canRedo:D,chordPanelVisible:V,isPlaying:I,songInfoModalVisible:Y,toggleSongInfoModal:W}=nn();ne.useEffect(()=>{b2(b)},[b]),ne.useEffect(()=>{$3(A)},[A]),ne.useEffect(()=>{X3(N)},[N]);const[O,B]=ne.useState(!1),[K,j]=ne.useState(()=>{if(typeof window>"u")return 1;const Ae=window.innerWidth,st=window.innerHeight;return Ae<768||st<500&&st<Ae?1.25:1}),[F,te]=ne.useState(50),[H,ae]=ne.useState({x:0,y:0}),$=ne.useRef(null),[re,le]=ne.useState(()=>typeof window>"u"?200:Math.max(200,Math.floor(window.innerWidth*.33))),[pe,be]=ne.useState(()=>{if(typeof window>"u")return 500;const Ae=window.innerWidth,pt=window.innerHeight-48-56-152-32,At=Ae-380-40;return Math.max(300,Math.min(At,pt))}),[P,M]=ne.useState(()=>typeof window<"u"?window.innerWidth<768||window.innerHeight<500&&window.innerHeight<window.innerWidth:!1),[G,J]=ne.useState(()=>typeof window<"u"?window.innerHeight<window.innerWidth&&window.innerHeight<500:!1),Q=ne.useRef(!1),oe=ne.useRef(!1),[fe,de]=ne.useState(!1),xe=ne.useRef(null),[we,Ve]=ne.useState(!1),[Xe,Je]=ne.useState(!1),Fe=ne.useRef(null),z=ne.useRef(!1);ne.useEffect(()=>{if(!P)return;if(G&&!z.current)z.current=!0,Fe.current=nn.getState().chordPanelVisible,de(!0),Ve(!0),nn.getState().chordPanelVisible||nn.getState().toggleChordPanel();else if(!G&&z.current){z.current=!1;const At=nn.getState().chordPanelVisible,ot=Fe.current;ot!==null&&At!==ot&&nn.getState().toggleChordPanel(),Ve(!1),Fe.current=null}const Ae=()=>{de(!0)},st=()=>{xe.current&&clearTimeout(xe.current),xe.current=setTimeout(Ae,1e4)},pt=At=>{const ot=At.target,Bt=ot.closest("[data-chord-details]"),bn=ot.closest("[data-playback-controls]"),vn=ot.closest("[data-mobile-timeline]"),xn=ot.closest("header"),Ut=ot.closest("[data-wheel-background]"),hn=ot.closest("button"),fn=ot.tagName==="path"||ot.tagName==="circle"||ot.tagName==="text"||ot.tagName==="polygon"||ot.tagName==="g"&&ot.style.cursor==="pointer"||ot.closest('g[style*="cursor: pointer"]')||ot.closest('g[class*="cursor-pointer"]'),Mn=!G&&nn.getState().chordPanelVisible;Ut&&!Bt&&!bn&&!vn&&!xn&&!hn&&!fn&&!Mn&&(de(Vn=>!Vn),xe.current&&clearTimeout(xe.current),st())};return document.addEventListener("touchstart",pt),st(),()=>{document.removeEventListener("touchstart",pt),xe.current&&clearTimeout(xe.current)}},[P,G]);const[ke,ct]=ne.useState(!1),Ue=ne.useRef(null),Me=ne.useCallback(()=>{!P||!G||(ct(!0),Ue.current&&clearTimeout(Ue.current),Ue.current=setTimeout(()=>{ct(!1)},3e3))},[P,G]);ne.useEffect(()=>()=>{Ue.current&&clearTimeout(Ue.current)},[]),ne.useEffect(()=>{if(!P)return;const Ae=()=>{Ve(!0)};return window.addEventListener("openMobileTimeline",Ae),()=>window.removeEventListener("openMobileTimeline",Ae)},[P]),ne.useEffect(()=>{if(!P)return;const Ae=nn.getState();we&&!Ae.timelineVisible?nn.setState({timelineVisible:!0}):!we&&Ae.timelineVisible&&nn.setState({timelineVisible:!1})},[P,we]),ne.useEffect(()=>{const Ae=()=>{const st=window.innerWidth,pt=window.innerHeight,At=st<768||pt<500&&pt<st,ot=pt<st&&pt<500;if(M(At),J(ot),At&&ot){const bn=Math.max(200,Math.floor(st*.33));le(bn)}if(!At){const bn=nn.getState().timelineVisible?152:24,vn=pt-48-56-bn-32,xn=st-380-40;be(Math.max(300,Math.min(xn,vn)))}const Bt=nn.getState();At&&!oe.current&&(Bt.timelineVisible&&Bt.toggleTimeline(),Bt.chordPanelVisible&&Bt.toggleChordPanel(),oe.current=!0),!At&&Q.current&&!Bt.chordPanelVisible&&(Bt.toggleChordPanel(),Q.current=!1)};return Ae(),window.addEventListener("resize",Ae),window.addEventListener("orientationchange",Ae),()=>{window.removeEventListener("resize",Ae),window.removeEventListener("orientationchange",Ae)}},[]),ne.useEffect(()=>{if(P)return;const Ae=window.innerWidth,st=window.innerHeight,pt=t?152:24,At=st-48-56-pt-32,ot=Ae-380-40;be(Math.max(300,Math.min(ot,At)))},[t,P]);const it=ne.useCallback((Ae,st)=>{j(Ae),te(st)},[]),Ye=ne.useCallback(()=>{const Ae=Math.min(2.5,K+.2);j(Ae),te(Ae>1.3?38:50)},[K]),ut=ne.useCallback(()=>{const Ae=Math.max(.2,K-.2);j(Ae),te(Ae>1.3?38:50)},[K]),at=ne.useCallback(Ae=>{ae(Ae)},[]),Pe=ne.useMemo(()=>P&&(G||V)?90:0,[P,G,V]),nt=P&&(G||V);ne.useEffect(()=>{if(P)if(nt)if($.current||($.current={zoom:K,origin:F,pan:{...H}}),G){const Ae=window.innerHeight,st=1.65,pt=Math.max(.9,Math.min(1.1,Ae/400)),At=st*pt;j(At),te(48),ae({x:-35,y:0})}else j(1.42),te(42),ae({x:-35,y:-30});else $.current&&(j($.current.zoom),te($.current.origin),ae($.current.pan),$.current=null)},[nt,G,P]);const tt=()=>{W(!0)},ht=(Ae,st,pt)=>{f(Ae),d(st),p(pt)},yt=ne.useMemo(()=>{const Ae=n.sections.reduce((Bt,bn)=>{const vn=bn.measures.reduce((xn,Ut)=>xn+Ut.beats.reduce((hn,fn)=>hn+fn.duration,0),0);return Bt+vn},0),st=n.tempo/60,pt=Ae/st,At=Math.floor(pt/60),ot=Math.floor(pt%60);return`${At}:${ot.toString().padStart(2,"0")}`},[n.sections,n.tempo]),[dt,xt]=ne.useState(!1);ne.useEffect(()=>{const Ae=async()=>{try{m2(),await _u(),await Lc(),xt(!0)}catch(pt){console.error("Audio initialization failed:",pt)}},st=async()=>{dt||(await g2(),Ae())};return document.addEventListener("touchstart",st,{once:!0}),document.addEventListener("click",st,{once:!0}),()=>{document.removeEventListener("touchstart",st),document.removeEventListener("click",st)}},[dt]),ne.useEffect(()=>{const Ae=st=>{if((st.key==="Delete"||st.key==="Backspace")&&a&&o){if(document.activeElement?.tagName==="INPUT"||document.activeElement?.tagName==="TEXTAREA")return;st.preventDefault(),u(a,o)}};return window.addEventListener("keydown",Ae),()=>window.removeEventListener("keydown",Ae)},[a,o,u]),ne.useEffect(()=>{const Ae=st=>{const pt=st.target;pt?.tagName==="INPUT"||pt?.tagName==="TEXTAREA"||pt?.isContentEditable||st.metaKey&&st.key.toLowerCase()==="z"&&(st.preventDefault(),st.shiftKey?D&&C():R&&k())};return window.addEventListener("keydown",Ae),()=>window.removeEventListener("keydown",Ae)},[k,C,R,D]);const[ft,un]=ne.useState(!1),[Yt,Nt]=ne.useState([]),St=ne.useRef(null);ne.useEffect(()=>{Nt(Jf())},[]),ne.useEffect(()=>{const Ae=st=>{St.current&&!St.current.contains(st.target)&&un(!1)};return document.addEventListener("mousedown",Ae),()=>document.removeEventListener("mousedown",Ae)},[]);const Tt=()=>{if(n.title==="Untitled Song"||!n.title.trim()){const Ae=prompt("Please name your song:",n.title);if(Ae===null)return;const st=Ae.trim()||"Untitled Song";f(st);const pt={...n,title:st};xx(pt)}else xx(n);Nt(Jf()),un(!1)},gt=Ae=>{y(Ae),un(!1)},[Qt,Lt]=ne.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),Rt=()=>{Lt({isOpen:!0,title:"New Song",message:"Start a new song? Unsaved changes will be lost.",confirmLabel:"Start New",isDestructive:!0,onConfirm:()=>{_(),un(!1)}})},mn=(Ae,st,pt)=>{pt.stopPropagation(),Lt({isOpen:!0,title:"Delete Song",message:`Are you sure you want to delete "${st}"? This cannot be undone.`,confirmLabel:"Delete",isDestructive:!0,onConfirm:()=>{mL(Ae),Nt(Jf())}})},vt=152,_e=()=>{const Ae=new It,st=Ae.internal.pageSize.getWidth(),pt=20,At=4,Bt=n.sections.reduce((yn,sn)=>{const Ie=(sn.timeSignature||n.timeSignature)[0];return yn+sn.measures.length*Ie},0)/n.tempo*60,bn=Math.floor(Bt/60),vn=Math.floor(Bt%60),xn=`${bn}:${vn.toString().padStart(2,"0")}`,Ut=n.sections.reduce((yn,sn)=>yn+sn.measures.length,0),hn=n.sections.length;if(Ae.setFontSize(22),Ae.setFont("helvetica","bold"),Ae.setTextColor(0,0,0),Ae.text(n.title,pt,18),n.artist&&n.artist.trim()){const yn=Ae.getTextWidth(n.title);Ae.setFontSize(14),Ae.setFont("helvetica","italic"),Ae.setTextColor(100,100,100),Ae.text(`by ${n.artist}`,pt+yn+6,18),Ae.setTextColor(0,0,0)}Ae.setDrawColor(0,0,0),Ae.setLineWidth(.5),Ae.line(pt,22,st-pt,22),Ae.setFontSize(10),Ae.setFont("helvetica","normal");const fn=[`Key: ${or(e)}`,`Tempo: ${n.tempo} BPM`,`Duration: ${xn}`,`${hn} sections`,`${Ut} bars`];Ae.text(fn.join("      "),pt,30);let Mn=48;const Vn=new Set;if(n.sections.forEach(yn=>{Mn>260&&(Ae.addPage(),Mn=20),Ae.setFontSize(14),Ae.setFont("helvetica","bold"),Ae.setTextColor(0,0,0),Ae.text(`[${Yf(yn,n.sections)}]`,pt,Mn),Mn+=10;const sn=yn.measures.map(Ne=>{const Ie=Ne.beats.length;return Ne.beats.forEach(Ze=>{if(Ze.chord){const bt=Ze.chord.root,Vt={major:"maj",minor:"m",diminished:"dim",augmented:"aug",major7:"maj7",minor7:"m7",dominant7:"7",halfDiminished7:"m7b5",sus2:"sus2",sus4:"sus4"}[Ze.chord.quality]||Ze.chord.quality||"maj";Vn.add(`${bt}|${Vt}`)}}),Ie===1?Ne.beats[0]?.chord?.symbol||"":Ie===2?Ne.beats.map(Ze=>Ze.chord?.symbol||"").join(" "):Ne.beats.map(Ze=>Ze.chord?.symbol||"").join(" ")});if(Ae.setFontSize(14),Ae.setFont("helvetica","normal"),sn.length===0)Ae.text("(No chords)",pt,Mn),Mn+=12;else for(let Ne=0;Ne<sn.length;Ne+=At){Mn>275&&(Ae.addPage(),Mn=20);const Ze=sn.slice(Ne,Ne+At).join("  |  "),bt=Ne>0?"    ":"";Ae.text(bt+Ze,pt,Mn),Mn+=10}Mn+=6}),Vn.size>0){const yn=Array.from(Vn),sn=245,Ne=5,bt=yn.length*(22+Ne)>sn,Ht=bt?18:22,Vt=bt?18:20,Fn=bt?22:25,Wn=bt?155:170;let wn=0,os=35;const Rr=bt?Math.ceil(yn.length/2):yn.length;Ae.setPage(1),yn.forEach((Jr,ls)=>{const[Us,xs]=Jr.split("|"),ci=sw(Us,xs);if(!ci)return;bt&&ls===Rr&&(wn=1,os=35);const xi=wn*Fn,Ir=`${Us}${xs==="maj"?"":xs}`;Ae.setFontSize(bt?6:7),Ae.setFont("helvetica","bold"),Ae.setTextColor(0,0,0),Ae.text(Ir,Wn+xi+Vt/2+2,os,{align:"center"}),rt(Ae,ci,Wn+xi,os+3,bt),os+=Ht+Ne})}const Ln=`${n.title.replace(/\s+/g,"-").toLowerCase()}.pdf`,Tn=Ae.output("blob");if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const yn=URL.createObjectURL(Tn);window.open(yn,"_blank"),setTimeout(()=>URL.revokeObjectURL(yn),1e4)}else pL.saveAs(Tn,Ln)},rt=(Ae,st,pt,At,ot=!1)=>{const{frets:Bt,barres:bn,baseFret:vn}=st,xn=ot?2.5:3,Ut=ot?3:4,hn=4,fn=6,Mn=ot?1:1.2,Vn=Array.from({length:fn},(sn,Ne)=>pt+Ne*xn),Ln=Array.from({length:hn+1},(sn,Ne)=>At+Ne*Ut),Tn=vn===1,mr=xn*(fn-1),yn=Ut*hn;Ae.setDrawColor(0,0,0),Tn?(Ae.setLineWidth(1),Ae.line(pt,At,pt+mr,At)):(Ae.setLineWidth(.3),Ae.line(pt,At,pt+mr,At),Ae.setFontSize(ot?6:7),Ae.setFont("helvetica","bold"),Ae.text(vn.toString(),pt-3,At+Ut/2+1)),Ae.setLineWidth(.2),Ln.slice(1).forEach(sn=>{Ae.line(pt,sn,pt+mr,sn)}),Vn.forEach(sn=>{Ae.line(sn,At,sn,At+yn)}),bn.forEach(sn=>{const Ne=Bt.map((Ht,Vt)=>({fret:Ht,idx:Vt})).filter(({fret:Ht})=>Ht===sn);if(Ne.length<2)return;const Ie=Math.min(...Ne.map(Ht=>Ht.idx)),Ze=Math.max(...Ne.map(Ht=>Ht.idx)),bt=At+(sn-.5)*Ut;Ae.setLineWidth(Mn*1.4),Ae.line(Vn[Ie],bt,Vn[Ze],bt),Ae.setLineWidth(.2)}),Bt.forEach((sn,Ne)=>{const Ie=Vn[Ne];if(sn===-1){Ae.setFontSize(ot?6:7),Ae.setFont("helvetica","bold"),Ae.text("x",Ie,At-1,{align:"center"});return}if(sn===0){Ae.setLineWidth(.3),Ae.circle(Ie,At-1.5,.8,"S");return}if(bn.includes(sn)){const Ht=Bt.findIndex(Vt=>Vt===sn);if(Ne!==Ht)return}const bt=At+(sn-.5)*Ut;Ae.setFillColor(0,0,0),Ae.circle(Ie,bt,Mn,"F")})};return v.jsxs("div",{className:"h-full w-full flex flex-col bg-bg-primary text-text-primary overflow-hidden",children:[v.jsxs("header",{className:`${P?"h-14":"h-12"} border-b border-border-subtle grid grid-cols-[1fr_auto_1fr] items-center ${P?"px-4":"px-3"} bg-bg-secondary shrink-0 z-20 transition-all duration-300 ease-out ${P&&!G&&(fe||V)||P&&G&&!ke?"opacity-0 -translate-y-full pointer-events-none absolute top-0 left-0 right-0":"relative"}`,children:[v.jsx("div",{className:"flex items-center gap-2 shrink-0",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"relative",children:v.jsx(Sj,{size:P?32:24})}),v.jsx("span",{className:`font-bold ${P?"text-xs":"text-sm"} tracking-tight hidden sm:block text-text-muted`,children:"Songwriter's Wheel"})]})}),v.jsx("div",{className:"flex items-center justify-center overflow-hidden",children:v.jsx("span",{onClick:tt,className:`${P?"text-xs":"text-sm"} font-medium text-text-primary cursor-pointer hover:text-accent-primary transition-colors px-2 py-1 rounded text-center truncate max-w-[70vw]`,title:"Click to edit song info",children:n.title})}),v.jsxs("div",{className:`flex items-center ${P?"gap-3":"gap-4"} shrink-0 justify-self-end`,children:[!P&&v.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-text-muted",children:[v.jsx(hC,{size:11,className:"shrink-0"}),v.jsx("span",{className:"leading-none",children:yt})]}),v.jsxs("div",{className:`flex items-center gap-2 p-[10px] ${P?"text-xs":"text-[10px]"} text-text-muted`,children:[v.jsx("span",{className:"uppercase font-bold",children:"Key"}),v.jsx("span",{className:`font-bold text-accent-primary ${P?"text-base":"text-sm"} min-w-[1.5rem] text-center inline-block`,children:or(e)})]}),v.jsxs("div",{className:"relative",ref:St,children:[v.jsxs("button",{onClick:()=>un(!ft),className:`flex items-center gap-1.5 ${P?"text-xs px-2 py-1.5 min-w-[44px]":"text-[11px] px-2 py-1"} text-text-secondary hover:text-text-primary transition-colors touch-feedback`,children:[v.jsx(Iv,{size:P?16:12}),v.jsx("span",{className:"hidden sm:inline",children:"Save"}),v.jsx(Wf,{size:P?12:10,className:`transition-transform ${ft?"rotate-180":""}`})]}),ft&&v.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-[#1a1a24] border border-border-medium rounded-lg shadow-2xl z-50 overflow-hidden",children:[v.jsxs("div",{className:"p-1.5 border-b border-border-subtle bg-[#22222e]",children:[v.jsxs("button",{onClick:Tt,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[v.jsx(Iv,{size:14,className:"text-accent-primary"}),"Save Current Song"]}),v.jsxs("button",{onClick:Rt,className:"w-full flex items-center gap-2 px-3 py-2 text-xs text-gray-200 hover:bg-[#2a2a3a] rounded transition-colors",children:[v.jsx(vC,{size:14,className:"text-green-400"}),"New Song"]})]}),v.jsx("div",{className:"max-h-48 overflow-y-auto bg-[#1a1a24]",children:Yt.length===0?v.jsx("p",{className:"px-3 py-4 text-[10px] text-gray-500 text-center",children:"No saved songs yet"}):v.jsxs("div",{className:"p-1.5",children:[v.jsx("p",{className:"px-2 py-1 text-[9px] text-gray-500 uppercase tracking-wider",children:"Saved Songs"}),Yt.map(Ae=>v.jsxs("div",{onClick:()=>gt(Ae),className:`flex items-center justify-between px-3 py-2 text-xs rounded cursor-pointer transition-colors ${Ae.id===n.id?"bg-accent-primary/20 text-accent-primary":"text-gray-300 hover:bg-[#2a2a3a]"}`,children:[v.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[v.jsx(xC,{size:12,className:"shrink-0"}),v.jsx("span",{className:"truncate",children:Ae.title})]}),v.jsx("button",{onClick:st=>mn(Ae.id,Ae.title,st),className:"p-1 hover:bg-red-500/20 rounded text-gray-500 hover:text-red-400 shrink-0",children:v.jsx(tg,{size:10})})]},Ae.id))]})})]})]}),v.jsxs("button",{onClick:_e,className:`flex items-center justify-center ${P?"text-xs px-3 py-1.5 min-w-[44px] min-h-[44px]":"text-[11px] px-2.5 py-1 gap-1.5"} bg-text-primary text-bg-primary rounded font-medium hover:bg-white transition-colors touch-feedback`,children:[v.jsx(d2,{size:P?16:12}),v.jsx("span",{className:"hidden sm:inline sm:ml-1.5",children:"Export"})]})]})]}),v.jsxs("div",{className:`flex-1 flex ${P?G?"flex-row":"flex-col":"flex-row"} overflow-hidden min-h-0`,children:[v.jsxs("div",{"data-wheel-background":!0,className:`flex flex-col min-w-0 min-h-0 bg-gradient-to-b from-bg-primary to-bg-secondary/30 ${P&&G?"shrink-0":"flex-1"} ${P?"overflow-hidden":""} relative`,style:P&&G?{width:`${re}px`,minWidth:"200px",height:"100%"}:void 0,children:[v.jsxs("div",{className:`flex-1 flex flex-col ${P&&!G?"justify-center":P&&G?"justify-center items-center":"justify-center items-center pt-2"} ${P?"overflow-hidden":"overflow-visible"}`,children:[P?null:v.jsxs("div",{className:"flex justify-end gap-2 px-2 shrink-0 w-full",children:[v.jsxs("div",{className:"flex items-center bg-bg-secondary/60 backdrop-blur-sm rounded-full px-0.5 border border-border-subtle/40",children:[v.jsx("button",{onClick:ut,disabled:K<=.2,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom out",children:v.jsx(DC,{size:8})}),v.jsxs("span",{className:"text-[7px] w-5 text-text-muted text-center font-medium",children:[Math.round(K*100),"%"]}),v.jsx("button",{onClick:Ye,disabled:K>=2.5,className:"no-touch-enlarge w-4 h-4 flex items-center justify-center hover:bg-bg-tertiary disabled:opacity-30 disabled:cursor-not-allowed rounded-full text-text-muted hover:text-text-primary transition-colors",title:"Zoom in",children:v.jsx(Yh,{size:8})})]}),v.jsx("button",{onClick:()=>B(!0),className:"no-touch-enlarge w-8 h-8 flex items-center justify-center bg-bg-secondary/60 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors border border-border-subtle/40",title:"Chord Wheel Guide",children:v.jsx(id,{size:16})})]}),v.jsx("div",{className:`flex-1 flex justify-center ${P?"items-center":""} ${P&&G?"p-1 overflow-hidden":P&&!G?"px-0 py-0":"p-2 overflow-visible"}`,onClick:Me,children:v.jsx("div",{className:"relative flex items-center justify-center",style:P&&G?{width:"calc(100dvh - 60px)",height:"calc(100dvh - 60px)",maxWidth:"100%",maxHeight:"100%",aspectRatio:"1 / 1"}:P&&!G?{width:fe?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",height:fe?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxWidth:fe?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",maxHeight:fe?"min(calc(100vw - 8px), 55dvh)":"min(calc(100vw - 16px), 85dvh)",aspectRatio:"1 / 1"}:{width:`${pe}px`,height:`${pe}px`,aspectRatio:"1 / 1"},children:v.jsx(bk,{zoomScale:K,zoomOriginY:F,onZoomChange:it,panOffset:H,onPanChange:at,rotationOffset:Pe,disableModeToggle:Pe!==0,footerVisible:I||!(P&&!G&&(fe||V&&!Xe))})})})]}),P&&v.jsx("button",{onClick:()=>B(!0),onTouchEnd:Ae=>{Ae.preventDefault(),Ae.stopPropagation(),B(!0)},className:`absolute ${G?"top-2 right-2 w-8 h-8":"top-3 right-3 w-11 h-11"} flex items-center justify-center bg-bg-secondary/90 hover:bg-bg-tertiary backdrop-blur-sm rounded-full text-text-muted hover:text-accent-primary transition-colors shadow-lg border border-border-subtle z-50`,style:{touchAction:"auto",pointerEvents:"auto"},title:"Chord Wheel Guide",children:v.jsx(id,{size:G?14:20})}),P?null:t?v.jsx(v.Fragment,{children:v.jsxs("div",{className:"shrink-0 bg-bg-secondary border-t border-border-subtle overflow-hidden flex flex-col",style:{height:vt},children:[v.jsxs("div",{className:"shrink-0 flex items-center justify-between px-2 py-1 border-b border-border-subtle/50 bg-bg-elevated/80",children:[v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsxs("button",{onClick:k,disabled:!R,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo (Z)",children:[v.jsx(mp,{size:12}),v.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Undo"})]}),v.jsxs("button",{onClick:C,disabled:!D,className:"no-touch-enlarge flex items-center gap-1 px-2 py-1 rounded-md bg-bg-tertiary/60 hover:bg-bg-tertiary text-text-muted hover:text-text-primary disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo (Z)",children:[v.jsx(Fh,{size:12}),v.jsx("span",{className:"text-[9px] font-medium uppercase tracking-wide",children:"Redo"})]})]}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsxs("button",{onClick:()=>{Lt({isOpen:!0,title:"Clear Timeline",message:"Are you sure you want to clear all chords from the timeline? This action cannot be undone.",confirmLabel:"Clear",isDestructive:!0,onConfirm:c})},className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-red-400 rounded hover:bg-red-400/10 transition-colors flex items-center gap-0.5",title:"Clear all chords from timeline",children:[v.jsx(tg,{size:8}),v.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Clear"})]}),v.jsxs("button",{onClick:s,className:"no-touch-enlarge text-[8px] px-1 py-0.5 text-text-muted hover:text-text-primary rounded hover:bg-bg-tertiary transition-colors flex items-center gap-0.5",title:"Hide timeline",children:[v.jsx(Wf,{size:8}),v.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Hide"})]})]})]}),v.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:v.jsx(ag,{isOpen:!0,onToggle:s,hideCloseButton:!0,isCompact:!1,isLandscape:!1})})]})}):v.jsx("div",{className:"h-6 bg-bg-secondary border-t border-border-subtle flex items-center justify-center shrink-0",children:v.jsxs("button",{onClick:s,className:"px-3 h-full flex items-center gap-1 text-[8px] text-text-muted hover:text-text-primary hover:bg-bg-tertiary transition-colors",title:"Show timeline",children:[v.jsx(F3,{size:10}),v.jsx("span",{className:"uppercase tracking-wider font-bold",children:"Timeline"})]})})]}),P&&G?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:`flex h-full ${we?"flex-1":"justify-end"} shrink-0`,style:{minWidth:we?"100px":"28px",transition:"all 0.25s ease-out"},children:[v.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${we?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{we&&!V&&nn.getState().toggleChordPanel(),Ve(!we)},children:[v.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),v.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:we?"":"Timeline"})]}),we&&v.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle",children:v.jsx(ag,{isOpen:!0,onToggle:()=>Ve(!1),hideCloseButton:!0,isCompact:V,isLandscape:!0})})]}),v.jsxs("div",{className:`flex h-full ${V?"flex-1":""} shrink-0`,style:{minWidth:V?"100px":"28px",transition:"all 0.25s ease-out"},children:[V&&v.jsx("div",{className:"flex-1 h-full bg-bg-secondary overflow-hidden border-l border-border-subtle","data-chord-details":!0,children:v.jsx(cg,{variant:we?"landscape-panel":"landscape-expanded"})}),v.jsxs("div",{className:`h-full flex flex-col items-center justify-center cursor-pointer touch-feedback active:bg-bg-tertiary border-l border-border-subtle shrink-0 ${V?"bg-bg-elevated":"bg-bg-secondary"}`,style:{width:"28px"},onClick:()=>{V&&!we&&Ve(!0),nn.getState().toggleChordPanel()},children:[v.jsx("div",{className:"h-10 w-1 rounded-full bg-text-muted/50 mb-2"}),v.jsx("span",{className:"text-[9px] font-bold text-text-muted uppercase tracking-wide",style:{writingMode:"vertical-rl",textOrientation:"mixed"},children:V?"":"Details"})]})]})]}):P?null:v.jsx(cg,{variant:"sidebar"})]}),P&&!G&&v.jsx(CL,{mobileTimelineOpen:we,setMobileTimelineOpen:Ve,chordPanelVisible:V,setChordPanelScrolledToBottom:Je}),(I||!(P&&!G&&(fe||V&&!Xe)))&&v.jsx("div",{className:"shrink-0 z-30 relative",style:{paddingBottom:P?"env(safe-area-inset-bottom)":void 0},children:v.jsx(jk,{})}),v.jsx(gL,{isOpen:Qt.isOpen,onClose:()=>Lt(Ae=>({...Ae,isOpen:!1})),onConfirm:Qt.onConfirm,title:Qt.title,message:Qt.message,confirmLabel:Qt.confirmLabel,isDestructive:Qt.isDestructive}),v.jsx(_j,{}),v.jsx(NL,{isOpen:O,onClose:()=>B(!1)}),v.jsx(TL,{isOpen:Y,onClose:()=>W(!1),title:n.title,artist:n.artist||"",tags:n.tags||[],onSave:ht}),v.jsx(AL,{onOpenHelp:()=>B(!0)})]})}V_.createRoot(document.getElementById("root")).render(v.jsx(ne.StrictMode,{children:v.jsx(kL,{})}));export{er as _,_1 as c,k_ as g};
